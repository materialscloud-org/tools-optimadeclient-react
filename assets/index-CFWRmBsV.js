(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const y of c)if(y.type==="childList")for(const u of y.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function s(c){const y={};return c.integrity&&(y.integrity=c.integrity),c.referrerPolicy&&(y.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?y.credentials="include":c.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function o(c){if(c.ep)return;c.ep=!0;const y=s(c);fetch(c.href,y)}})();function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var r=e.default;if(typeof r=="function"){var s=function o(){var c=!1;try{c=this instanceof o}catch{}return c?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};s.prototype=r.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var c=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(s,o,c.get?c:{enumerable:!0,get:function(){return e[o]}})}),s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var e=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),v=Symbol.iterator;function R(fe){return fe===null||typeof fe!="object"?null:(fe=v&&fe[v]||fe["@@iterator"],typeof fe=="function"?fe:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,k={};function K(fe,De,He){this.props=fe,this.context=De,this.refs=k,this.updater=He||O}K.prototype.isReactComponent={},K.prototype.setState=function(fe,De){if(typeof fe!="object"&&typeof fe!="function"&&fe!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,fe,De,"setState")},K.prototype.forceUpdate=function(fe){this.updater.enqueueForceUpdate(this,fe,"forceUpdate")};function Z(){}Z.prototype=K.prototype;function X(fe,De,He){this.props=fe,this.context=De,this.refs=k,this.updater=He||O}var S=X.prototype=new Z;S.constructor=X,C(S,K.prototype),S.isPureReactComponent=!0;var F=Array.isArray,B=Object.prototype.hasOwnProperty,W={current:null},J={key:!0,ref:!0,__self:!0,__source:!0};function N(fe,De,He){var ae,Ae={},We=null,qe=null;if(De!=null)for(ae in De.ref!==void 0&&(qe=De.ref),De.key!==void 0&&(We=""+De.key),De)B.call(De,ae)&&!J.hasOwnProperty(ae)&&(Ae[ae]=De[ae]);var Fe=arguments.length-2;if(Fe===1)Ae.children=He;else if(1<Fe){for(var rt=Array(Fe),at=0;at<Fe;at++)rt[at]=arguments[at+2];Ae.children=rt}if(fe&&fe.defaultProps)for(ae in Fe=fe.defaultProps,Fe)Ae[ae]===void 0&&(Ae[ae]=Fe[ae]);return{$$typeof:e,type:fe,key:We,ref:qe,props:Ae,_owner:W.current}}function ee(fe,De){return{$$typeof:e,type:fe.type,key:De,ref:fe.ref,props:fe.props,_owner:fe._owner}}function Se(fe){return typeof fe=="object"&&fe!==null&&fe.$$typeof===e}function ce(fe){var De={"=":"=0",":":"=2"};return"$"+fe.replace(/[=:]/g,function(He){return De[He]})}var ge=/\/+/g;function me(fe,De){return typeof fe=="object"&&fe!==null&&fe.key!=null?ce(""+fe.key):De.toString(36)}function Ce(fe,De,He,ae,Ae){var We=typeof fe;(We==="undefined"||We==="boolean")&&(fe=null);var qe=!1;if(fe===null)qe=!0;else switch(We){case"string":case"number":qe=!0;break;case"object":switch(fe.$$typeof){case e:case r:qe=!0}}if(qe)return qe=fe,Ae=Ae(qe),fe=ae===""?"."+me(qe,0):ae,F(Ae)?(He="",fe!=null&&(He=fe.replace(ge,"$&/")+"/"),Ce(Ae,De,He,"",function(at){return at})):Ae!=null&&(Se(Ae)&&(Ae=ee(Ae,He+(!Ae.key||qe&&qe.key===Ae.key?"":(""+Ae.key).replace(ge,"$&/")+"/")+fe)),De.push(Ae)),1;if(qe=0,ae=ae===""?".":ae+":",F(fe))for(var Fe=0;Fe<fe.length;Fe++){We=fe[Fe];var rt=ae+me(We,Fe);qe+=Ce(We,De,He,rt,Ae)}else if(rt=R(fe),typeof rt=="function")for(fe=rt.call(fe),Fe=0;!(We=fe.next()).done;)We=We.value,rt=ae+me(We,Fe++),qe+=Ce(We,De,He,rt,Ae);else if(We==="object")throw De=String(fe),Error("Objects are not valid as a React child (found: "+(De==="[object Object]"?"object with keys {"+Object.keys(fe).join(", ")+"}":De)+"). If you meant to render a collection of children, use an array instead.");return qe}function ue(fe,De,He){if(fe==null)return fe;var ae=[],Ae=0;return Ce(fe,ae,"","",function(We){return De.call(He,We,Ae++)}),ae}function L(fe){if(fe._status===-1){var De=fe._result;De=De(),De.then(function(He){(fe._status===0||fe._status===-1)&&(fe._status=1,fe._result=He)},function(He){(fe._status===0||fe._status===-1)&&(fe._status=2,fe._result=He)}),fe._status===-1&&(fe._status=0,fe._result=De)}if(fe._status===1)return fe._result.default;throw fe._result}var he={current:null},se={transition:null},q={ReactCurrentDispatcher:he,ReactCurrentBatchConfig:se,ReactCurrentOwner:W};function ke(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:ue,forEach:function(fe,De,He){ue(fe,function(){De.apply(this,arguments)},He)},count:function(fe){var De=0;return ue(fe,function(){De++}),De},toArray:function(fe){return ue(fe,function(De){return De})||[]},only:function(fe){if(!Se(fe))throw Error("React.Children.only expected to receive a single React element child.");return fe}},react_production_min.Component=K,react_production_min.Fragment=s,react_production_min.Profiler=c,react_production_min.PureComponent=X,react_production_min.StrictMode=o,react_production_min.Suspense=d,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,react_production_min.act=ke,react_production_min.cloneElement=function(fe,De,He){if(fe==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+fe+".");var ae=C({},fe.props),Ae=fe.key,We=fe.ref,qe=fe._owner;if(De!=null){if(De.ref!==void 0&&(We=De.ref,qe=W.current),De.key!==void 0&&(Ae=""+De.key),fe.type&&fe.type.defaultProps)var Fe=fe.type.defaultProps;for(rt in De)B.call(De,rt)&&!J.hasOwnProperty(rt)&&(ae[rt]=De[rt]===void 0&&Fe!==void 0?Fe[rt]:De[rt])}var rt=arguments.length-2;if(rt===1)ae.children=He;else if(1<rt){Fe=Array(rt);for(var at=0;at<rt;at++)Fe[at]=arguments[at+2];ae.children=Fe}return{$$typeof:e,type:fe.type,key:Ae,ref:We,props:ae,_owner:qe}},react_production_min.createContext=function(fe){return fe={$$typeof:u,_currentValue:fe,_currentValue2:fe,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},fe.Provider={$$typeof:y,_context:fe},fe.Consumer=fe},react_production_min.createElement=N,react_production_min.createFactory=function(fe){var De=N.bind(null,fe);return De.type=fe,De},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(fe){return{$$typeof:p,render:fe}},react_production_min.isValidElement=Se,react_production_min.lazy=function(fe){return{$$typeof:w,_payload:{_status:-1,_result:fe},_init:L}},react_production_min.memo=function(fe,De){return{$$typeof:x,type:fe,compare:De===void 0?null:De}},react_production_min.startTransition=function(fe){var De=se.transition;se.transition={};try{fe()}finally{se.transition=De}},react_production_min.unstable_act=ke,react_production_min.useCallback=function(fe,De){return he.current.useCallback(fe,De)},react_production_min.useContext=function(fe){return he.current.useContext(fe)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(fe){return he.current.useDeferredValue(fe)},react_production_min.useEffect=function(fe,De){return he.current.useEffect(fe,De)},react_production_min.useId=function(){return he.current.useId()},react_production_min.useImperativeHandle=function(fe,De,He){return he.current.useImperativeHandle(fe,De,He)},react_production_min.useInsertionEffect=function(fe,De){return he.current.useInsertionEffect(fe,De)},react_production_min.useLayoutEffect=function(fe,De){return he.current.useLayoutEffect(fe,De)},react_production_min.useMemo=function(fe,De){return he.current.useMemo(fe,De)},react_production_min.useReducer=function(fe,De,He){return he.current.useReducer(fe,De,He)},react_production_min.useRef=function(fe){return he.current.useRef(fe)},react_production_min.useState=function(fe){return he.current.useState(fe)},react_production_min.useSyncExternalStore=function(fe,De,He){return he.current.useSyncExternalStore(fe,De,He)},react_production_min.useTransition=function(){return he.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var e=requireReact(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function u(p,d,x){var w,v={},R=null,O=null;x!==void 0&&(R=""+x),d.key!==void 0&&(R=""+d.key),d.ref!==void 0&&(O=d.ref);for(w in d)o.call(d,w)&&!y.hasOwnProperty(w)&&(v[w]=d[w]);if(p&&p.defaultProps)for(w in d=p.defaultProps,d)v[w]===void 0&&(v[w]=d[w]);return{$$typeof:r,type:p,key:R,ref:O,props:v,_owner:c.current}}return reactJsxRuntime_production_min.Fragment=s,reactJsxRuntime_production_min.jsx=u,reactJsxRuntime_production_min.jsxs=u,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact(),client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(e){function r(se,q){var ke=se.length;se.push(q);e:for(;0<ke;){var fe=ke-1>>>1,De=se[fe];if(0<c(De,q))se[fe]=q,se[ke]=De,ke=fe;else break e}}function s(se){return se.length===0?null:se[0]}function o(se){if(se.length===0)return null;var q=se[0],ke=se.pop();if(ke!==q){se[0]=ke;e:for(var fe=0,De=se.length,He=De>>>1;fe<He;){var ae=2*(fe+1)-1,Ae=se[ae],We=ae+1,qe=se[We];if(0>c(Ae,ke))We<De&&0>c(qe,Ae)?(se[fe]=qe,se[We]=ke,fe=We):(se[fe]=Ae,se[ae]=ke,fe=ae);else if(We<De&&0>c(qe,ke))se[fe]=qe,se[We]=ke,fe=We;else break e}}return q}function c(se,q){var ke=se.sortIndex-q.sortIndex;return ke!==0?ke:se.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var y=performance;e.unstable_now=function(){return y.now()}}else{var u=Date,p=u.now();e.unstable_now=function(){return u.now()-p}}var d=[],x=[],w=1,v=null,R=3,O=!1,C=!1,k=!1,K=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(se){for(var q=s(x);q!==null;){if(q.callback===null)o(x);else if(q.startTime<=se)o(x),q.sortIndex=q.expirationTime,r(d,q);else break;q=s(x)}}function F(se){if(k=!1,S(se),!C)if(s(d)!==null)C=!0,L(B);else{var q=s(x);q!==null&&he(F,q.startTime-se)}}function B(se,q){C=!1,k&&(k=!1,Z(N),N=-1),O=!0;var ke=R;try{for(S(q),v=s(d);v!==null&&(!(v.expirationTime>q)||se&&!ce());){var fe=v.callback;if(typeof fe=="function"){v.callback=null,R=v.priorityLevel;var De=fe(v.expirationTime<=q);q=e.unstable_now(),typeof De=="function"?v.callback=De:v===s(d)&&o(d),S(q)}else o(d);v=s(d)}if(v!==null)var He=!0;else{var ae=s(x);ae!==null&&he(F,ae.startTime-q),He=!1}return He}finally{v=null,R=ke,O=!1}}var W=!1,J=null,N=-1,ee=5,Se=-1;function ce(){return!(e.unstable_now()-Se<ee)}function ge(){if(J!==null){var se=e.unstable_now();Se=se;var q=!0;try{q=J(!0,se)}finally{q?me():(W=!1,J=null)}}else W=!1}var me;if(typeof X=="function")me=function(){X(ge)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,ue=Ce.port2;Ce.port1.onmessage=ge,me=function(){ue.postMessage(null)}}else me=function(){K(ge,0)};function L(se){J=se,W||(W=!0,me())}function he(se,q){N=K(function(){se(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(se){se.callback=null},e.unstable_continueExecution=function(){C||O||(C=!0,L(B))},e.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<se?Math.floor(1e3/se):5},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return s(d)},e.unstable_next=function(se){switch(R){case 1:case 2:case 3:var q=3;break;default:q=R}var ke=R;R=q;try{return se()}finally{R=ke}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(se,q){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ke=R;R=se;try{return q()}finally{R=ke}},e.unstable_scheduleCallback=function(se,q,ke){var fe=e.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?fe+ke:fe):ke=fe,se){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=ke+De,se={id:w++,callback:q,priorityLevel:se,startTime:ke,expirationTime:De,sortIndex:-1},ke>fe?(se.sortIndex=ke,r(x,se),s(d)===null&&se===s(x)&&(k?(Z(N),N=-1):k=!0,he(F,ke-fe))):(se.sortIndex=De,r(d,se),C||O||(C=!0,L(B))),se},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(se){var q=R;return function(){var ke=R;R=q;try{return se.apply(this,arguments)}finally{R=ke}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var e=requireReact(),r=requireScheduler();function s(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,c={};function y(t,i){u(t,i),u(t+"Capture",i)}function u(t,i){for(c[t]=i,t=0;t<i.length;t++)o.add(i[t])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},v={};function R(t){return d.call(v,t)?!0:d.call(w,t)?!1:x.test(t)?v[t]=!0:(w[t]=!0,!1)}function O(t,i,l,m){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return m?!1:l!==null?!l.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function C(t,i,l,m){if(i===null||typeof i>"u"||O(t,i,l,m))return!0;if(m)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function k(t,i,l,m,I,j,ie){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=m,this.attributeNamespace=I,this.mustUseProperty=l,this.propertyName=t,this.type=i,this.sanitizeURL=j,this.removeEmptyString=ie}var K={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){K[t]=new k(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];K[i]=new k(i,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){K[t]=new k(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){K[t]=new k(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){K[t]=new k(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){K[t]=new k(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){K[t]=new k(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){K[t]=new k(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){K[t]=new k(t,5,!1,t.toLowerCase(),null,!1,!1)});var Z=/[\-:]([a-z])/g;function X(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(Z,X);K[i]=new k(i,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(Z,X);K[i]=new k(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(Z,X);K[i]=new k(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){K[t]=new k(t,1,!1,t.toLowerCase(),null,!1,!1)}),K.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){K[t]=new k(t,1,!1,t.toLowerCase(),null,!0,!0)});function S(t,i,l,m){var I=K.hasOwnProperty(i)?K[i]:null;(I!==null?I.type!==0:m||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(C(i,l,I,m)&&(l=null),m||I===null?R(i)&&(l===null?t.removeAttribute(i):t.setAttribute(i,""+l)):I.mustUseProperty?t[I.propertyName]=l===null?I.type===3?!1:"":l:(i=I.attributeName,m=I.attributeNamespace,l===null?t.removeAttribute(i):(I=I.type,l=I===3||I===4&&l===!0?"":""+l,m?t.setAttributeNS(m,i,l):t.setAttribute(i,l))))}var F=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),W=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),Se=Symbol.for("react.provider"),ce=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),Ce=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),he=Symbol.for("react.offscreen"),se=Symbol.iterator;function q(t){return t===null||typeof t!="object"?null:(t=se&&t[se]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,fe;function De(t){if(fe===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);fe=i&&i[1]||""}return`
`+fe+t}var He=!1;function ae(t,i){if(!t||He)return"";He=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(Qe){var m=Qe}Reflect.construct(t,[],i)}else{try{i.call()}catch(Qe){m=Qe}t.call(i.prototype)}else{try{throw Error()}catch(Qe){m=Qe}t()}}catch(Qe){if(Qe&&m&&typeof Qe.stack=="string"){for(var I=Qe.stack.split(`
`),j=m.stack.split(`
`),ie=I.length-1,Te=j.length-1;1<=ie&&0<=Te&&I[ie]!==j[Te];)Te--;for(;1<=ie&&0<=Te;ie--,Te--)if(I[ie]!==j[Te]){if(ie!==1||Te!==1)do if(ie--,Te--,0>Te||I[ie]!==j[Te]){var Le=`
`+I[ie].replace(" at new "," at ");return t.displayName&&Le.includes("<anonymous>")&&(Le=Le.replace("<anonymous>",t.displayName)),Le}while(1<=ie&&0<=Te);break}}}finally{He=!1,Error.prepareStackTrace=l}return(t=t?t.displayName||t.name:"")?De(t):""}function Ae(t){switch(t.tag){case 5:return De(t.type);case 16:return De("Lazy");case 13:return De("Suspense");case 19:return De("SuspenseList");case 0:case 2:case 15:return t=ae(t.type,!1),t;case 11:return t=ae(t.type.render,!1),t;case 1:return t=ae(t.type,!0),t;default:return""}}function We(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case J:return"Fragment";case W:return"Portal";case ee:return"Profiler";case N:return"StrictMode";case me:return"Suspense";case Ce:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ce:return(t.displayName||"Context")+".Consumer";case Se:return(t._context.displayName||"Context")+".Provider";case ge:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ue:return i=t.displayName||null,i!==null?i:We(t.type)||"Memo";case L:i=t._payload,t=t._init;try{return We(t(i))}catch{}}return null}function qe(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return We(i);case 8:return i===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Fe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rt(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function at(t){var i=rt(t)?"checked":"value",l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),m=""+t[i];if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var I=l.get,j=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return I.call(this)},set:function(ie){m=""+ie,j.call(this,ie)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return m},setValue:function(ie){m=""+ie},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ot(t){t._valueTracker||(t._valueTracker=at(t))}function Ft(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var l=i.getValue(),m="";return t&&(m=rt(t)?t.checked?"true":"false":t.value),t=m,t!==l?(i.setValue(t),!0):!1}function Ct(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ar(t,i){var l=i.checked;return ke({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??t._wrapperState.initialChecked})}function or(t,i){var l=i.defaultValue==null?"":i.defaultValue,m=i.checked!=null?i.checked:i.defaultChecked;l=Fe(i.value!=null?i.value:l),t._wrapperState={initialChecked:m,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Mr(t,i){i=i.checked,i!=null&&S(t,"checked",i,!1)}function Er(t,i){Mr(t,i);var l=Fe(i.value),m=i.type;if(l!=null)m==="number"?(l===0&&t.value===""||t.value!=l)&&(t.value=""+l):t.value!==""+l&&(t.value=""+l);else if(m==="submit"||m==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?vr(t,i.type,l):i.hasOwnProperty("defaultValue")&&vr(t,i.type,Fe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function pr(t,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var m=i.type;if(!(m!=="submit"&&m!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,l||i===t.value||(t.value=i),t.defaultValue=i}l=t.name,l!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,l!==""&&(t.name=l)}function vr(t,i,l){(i!=="number"||Ct(t.ownerDocument)!==t)&&(l==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+l&&(t.defaultValue=""+l))}var xr=Array.isArray;function fi(t,i,l,m){if(t=t.options,i){i={};for(var I=0;I<l.length;I++)i["$"+l[I]]=!0;for(l=0;l<t.length;l++)I=i.hasOwnProperty("$"+t[l].value),t[l].selected!==I&&(t[l].selected=I),I&&m&&(t[l].defaultSelected=!0)}else{for(l=""+Fe(l),i=null,I=0;I<t.length;I++){if(t[I].value===l){t[I].selected=!0,m&&(t[I].defaultSelected=!0);return}i!==null||t[I].disabled||(i=t[I])}i!==null&&(i.selected=!0)}}function Pr(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(s(91));return ke({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Or(t,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(s(92));if(xr(l)){if(1<l.length)throw Error(s(93));l=l[0]}i=l}i==null&&(i=""),l=i}t._wrapperState={initialValue:Fe(l)}}function Di(t,i){var l=Fe(i.value),m=Fe(i.defaultValue);l!=null&&(l=""+l,l!==t.value&&(t.value=l),i.defaultValue==null&&t.defaultValue!==l&&(t.defaultValue=l)),m!=null&&(t.defaultValue=""+m)}function wi(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function Hi(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?Hi(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ee,Oe=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,m,I){MSApp.execUnsafeLocalFunction(function(){return t(i,l,m,I)})}:t})(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(Ee=Ee||document.createElement("div"),Ee.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Ee.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function dt(t,i){if(i){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=i;return}}t.textContent=i}var nt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},It=["Webkit","ms","Moz","O"];Object.keys(nt).forEach(function(t){It.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),nt[i]=nt[t]})});function ht(t,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||nt.hasOwnProperty(t)&&nt[t]?(""+i).trim():i+"px"}function zt(t,i){t=t.style;for(var l in i)if(i.hasOwnProperty(l)){var m=l.indexOf("--")===0,I=ht(l,i[l],m);l==="float"&&(l="cssFloat"),m?t.setProperty(l,I):t[l]=I}}var Ut=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ot(t,i){if(i){if(Ut[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(s(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(s(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(s(61))}if(i.style!=null&&typeof i.style!="object")throw Error(s(62))}}function mr(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var li=null;function Ci(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ui=null,gi=null,jr=null;function zr(t){if(t=Os(t)){if(typeof ui!="function")throw Error(s(280));var i=t.stateNode;i&&(i=ra(i),ui(t.stateNode,t.type,i))}}function Dr(t){gi?jr?jr.push(t):jr=[t]:gi=t}function rr(){if(gi){var t=gi,i=jr;if(jr=gi=null,zr(t),i)for(t=0;t<i.length;t++)zr(i[t])}}function vi(t,i){return t(i)}function bi(){}var Ki=!1;function Ai(t,i,l){if(Ki)return t(i,l);Ki=!0;try{return vi(t,i,l)}finally{Ki=!1,(gi!==null||jr!==null)&&(bi(),rr())}}function Ni(t,i){var l=t.stateNode;if(l===null)return null;var m=ra(l);if(m===null)return null;l=m[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(t=t.type,m=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!m;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var Ti=!1;if(p)try{var pi={};Object.defineProperty(pi,"passive",{get:function(){Ti=!0}}),window.addEventListener("test",pi,pi),window.removeEventListener("test",pi,pi)}catch{Ti=!1}function Br(t,i,l,m,I,j,ie,Te,Le){var Qe=Array.prototype.slice.call(arguments,3);try{i.apply(l,Qe)}catch(xt){this.onError(xt)}}var Yr=!1,Vi=null,yi=!1,Wi=null,tn={onError:function(t){Yr=!0,Vi=t}};function an(t,i,l,m,I,j,ie,Te,Le){Yr=!1,Vi=null,Br.apply(tn,arguments)}function ur(t,i,l,m,I,j,ie,Te,Le){if(an.apply(this,arguments),Yr){if(Yr){var Qe=Vi;Yr=!1,Vi=null}else throw Error(s(198));yi||(yi=!0,Wi=Qe)}}function Gr(t){var i=t,l=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(l=i.return),t=i.return;while(t)}return i.tag===3?l:null}function Kr(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function qi(t){if(Gr(t)!==t)throw Error(s(188))}function Bt(t){var i=t.alternate;if(!i){if(i=Gr(t),i===null)throw Error(s(188));return i!==t?null:t}for(var l=t,m=i;;){var I=l.return;if(I===null)break;var j=I.alternate;if(j===null){if(m=I.return,m!==null){l=m;continue}break}if(I.child===j.child){for(j=I.child;j;){if(j===l)return qi(I),t;if(j===m)return qi(I),i;j=j.sibling}throw Error(s(188))}if(l.return!==m.return)l=I,m=j;else{for(var ie=!1,Te=I.child;Te;){if(Te===l){ie=!0,l=I,m=j;break}if(Te===m){ie=!0,m=I,l=j;break}Te=Te.sibling}if(!ie){for(Te=j.child;Te;){if(Te===l){ie=!0,l=j,m=I;break}if(Te===m){ie=!0,m=j,l=I;break}Te=Te.sibling}if(!ie)throw Error(s(189))}}if(l.alternate!==m)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?t:i}function E(t){return t=Bt(t),t!==null?ne(t):null}function ne(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=ne(t);if(i!==null)return i;t=t.sibling}return null}var xe=r.unstable_scheduleCallback,Ve=r.unstable_cancelCallback,ze=r.unstable_shouldYield,yt=r.unstable_requestPaint,lt=r.unstable_now,mt=r.unstable_getCurrentPriorityLevel,Rt=r.unstable_ImmediatePriority,kt=r.unstable_UserBlockingPriority,Lt=r.unstable_NormalPriority,gr=r.unstable_LowPriority,Yt=r.unstable_IdlePriority,Cr=null,Ar=null;function Ur(t){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(Cr,t,void 0,(t.current.flags&128)===128)}catch{}}var _r=Math.clz32?Math.clz32:Ri,Lr=Math.log,wr=Math.LN2;function Ri(t){return t>>>=0,t===0?32:31-(Lr(t)/wr|0)|0}var Zt=64,ri=4194304;function oe(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function n(t,i){var l=t.pendingLanes;if(l===0)return 0;var m=0,I=t.suspendedLanes,j=t.pingedLanes,ie=l&268435455;if(ie!==0){var Te=ie&~I;Te!==0?m=oe(Te):(j&=ie,j!==0&&(m=oe(j)))}else ie=l&~I,ie!==0?m=oe(ie):j!==0&&(m=oe(j));if(m===0)return 0;if(i!==0&&i!==m&&(i&I)===0&&(I=m&-m,j=i&-i,I>=j||I===16&&(j&4194240)!==0))return i;if((m&4)!==0&&(m|=l&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=m;0<i;)l=31-_r(i),I=1<<l,m|=t[l],i&=~I;return m}function a(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h(t,i){for(var l=t.suspendedLanes,m=t.pingedLanes,I=t.expirationTimes,j=t.pendingLanes;0<j;){var ie=31-_r(j),Te=1<<ie,Le=I[ie];Le===-1?((Te&l)===0||(Te&m)!==0)&&(I[ie]=a(Te,i)):Le<=i&&(t.expiredLanes|=Te),j&=~Te}}function f(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function T(){var t=Zt;return Zt<<=1,(Zt&4194240)===0&&(Zt=64),t}function _(t){for(var i=[],l=0;31>l;l++)i.push(t);return i}function M(t,i,l){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-_r(i),t[i]=l}function P(t,i){var l=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var m=t.eventTimes;for(t=t.expirationTimes;0<l;){var I=31-_r(l),j=1<<I;i[I]=0,m[I]=-1,t[I]=-1,l&=~j}}function A(t,i){var l=t.entangledLanes|=i;for(t=t.entanglements;l;){var m=31-_r(l),I=1<<m;I&i|t[m]&i&&(t[m]|=i),l&=~I}}var D=0;function z(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var $,U,V,H,G,Y=!1,te=[],re=null,de=null,le=null,ye=new Map,Pe=new Map,Re=[],Me="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function we(t,i){switch(t){case"focusin":case"focusout":re=null;break;case"dragenter":case"dragleave":de=null;break;case"mouseover":case"mouseout":le=null;break;case"pointerover":case"pointerout":ye.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pe.delete(i.pointerId)}}function Ue(t,i,l,m,I,j){return t===null||t.nativeEvent!==j?(t={blockedOn:i,domEventName:l,eventSystemFlags:m,nativeEvent:j,targetContainers:[I]},i!==null&&(i=Os(i),i!==null&&U(i)),t):(t.eventSystemFlags|=m,i=t.targetContainers,I!==null&&i.indexOf(I)===-1&&i.push(I),t)}function Je(t,i,l,m,I){switch(i){case"focusin":return re=Ue(re,t,i,l,m,I),!0;case"dragenter":return de=Ue(de,t,i,l,m,I),!0;case"mouseover":return le=Ue(le,t,i,l,m,I),!0;case"pointerover":var j=I.pointerId;return ye.set(j,Ue(ye.get(j)||null,t,i,l,m,I)),!0;case"gotpointercapture":return j=I.pointerId,Pe.set(j,Ue(Pe.get(j)||null,t,i,l,m,I)),!0}return!1}function tt(t){var i=Kn(t.target);if(i!==null){var l=Gr(i);if(l!==null){if(i=l.tag,i===13){if(i=Kr(l),i!==null){t.blockedOn=i,G(t.priority,function(){V(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ye(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var l=it(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(l===null){l=t.nativeEvent;var m=new l.constructor(l.type,l);li=m,l.target.dispatchEvent(m),li=null}else return i=Os(l),i!==null&&U(i),t.blockedOn=l,!1;i.shift()}return!0}function ut(t,i,l){Ye(t)&&l.delete(i)}function ft(){Y=!1,re!==null&&Ye(re)&&(re=null),de!==null&&Ye(de)&&(de=null),le!==null&&Ye(le)&&(le=null),ye.forEach(ut),Pe.forEach(ut)}function Ze(t,i){t.blockedOn===i&&(t.blockedOn=null,Y||(Y=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,ft)))}function pt(t){function i(I){return Ze(I,t)}if(0<te.length){Ze(te[0],t);for(var l=1;l<te.length;l++){var m=te[l];m.blockedOn===t&&(m.blockedOn=null)}}for(re!==null&&Ze(re,t),de!==null&&Ze(de,t),le!==null&&Ze(le,t),ye.forEach(i),Pe.forEach(i),l=0;l<Re.length;l++)m=Re[l],m.blockedOn===t&&(m.blockedOn=null);for(;0<Re.length&&(l=Re[0],l.blockedOn===null);)tt(l),l.blockedOn===null&&Re.shift()}var Be=F.ReactCurrentBatchConfig,et=!0;function St(t,i,l,m){var I=D,j=Be.transition;Be.transition=null;try{D=1,wt(t,i,l,m)}finally{D=I,Be.transition=j}}function st(t,i,l,m){var I=D,j=Be.transition;Be.transition=null;try{D=4,wt(t,i,l,m)}finally{D=I,Be.transition=j}}function wt(t,i,l,m){if(et){var I=it(t,i,l,m);if(I===null)Qa(t,i,m,Et,l),we(t,m);else if(Je(I,t,i,l,m))m.stopPropagation();else if(we(t,m),i&4&&-1<Me.indexOf(t)){for(;I!==null;){var j=Os(I);if(j!==null&&$(j),j=it(t,i,l,m),j===null&&Qa(t,i,m,Et,l),j===I)break;I=j}I!==null&&m.stopPropagation()}else Qa(t,i,m,null,l)}}var Et=null;function it(t,i,l,m){if(Et=null,t=Ci(m),t=Kn(t),t!==null)if(i=Gr(t),i===null)t=null;else if(l=i.tag,l===13){if(t=Kr(i),t!==null)return t;t=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return Et=t,null}function Pt(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mt()){case Rt:return 1;case kt:return 4;case Lt:case gr:return 16;case Yt:return 536870912;default:return 16}default:return 16}}var Ht=null,Mt=null,ct=null;function Jt(){if(ct)return ct;var t,i=Mt,l=i.length,m,I="value"in Ht?Ht.value:Ht.textContent,j=I.length;for(t=0;t<l&&i[t]===I[t];t++);var ie=l-t;for(m=1;m<=ie&&i[l-m]===I[j-m];m++);return ct=I.slice(t,1<m?1-m:void 0)}function Nt(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function qt(){return!0}function Vt(){return!1}function Xt(t){function i(l,m,I,j,ie){this._reactName=l,this._targetInst=I,this.type=m,this.nativeEvent=j,this.target=ie,this.currentTarget=null;for(var Te in t)t.hasOwnProperty(Te)&&(l=t[Te],this[Te]=l?l(j):j[Te]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?qt:Vt,this.isPropagationStopped=Vt,this}return ke(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=qt)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=qt)},persist:function(){},isPersistent:qt}),i}var yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fr=Xt(yr),Tr=ke({},yr,{view:0,detail:0}),ii=Xt(Tr),Wr,br,$r,ci=ke({},Tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$e,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$r&&($r&&t.type==="mousemove"?(Wr=t.screenX-$r.screenX,br=t.screenY-$r.screenY):br=Wr=0,$r=t),Wr)},movementY:function(t){return"movementY"in t?t.movementY:br}}),ni=Xt(ci),hi=ke({},ci,{dataTransfer:0}),Ii=Xt(hi),xi=ke({},Tr,{relatedTarget:0}),Oi=Xt(xi),Hr=ke({},yr,{animationName:0,elapsedTime:0,pseudoElement:0}),Xr=Xt(Hr),qr=ke({},yr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ei=Xt(qr),g=ke({},yr,{data:0}),Q=Xt(g),b={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},be={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ve(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=_e[t])?!!i[t]:!1}function $e(){return ve}var Ie=ke({},Tr,{key:function(t){if(t.key){var i=b[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Nt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?be[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$e,charCode:function(t){return t.type==="keypress"?Nt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gt=Xt(Ie),Ne=ke({},ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xe=Xt(Ne),dr=ke({},Tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$e}),Wt=Xt(dr),_t=ke({},yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),si=Xt(_t),Rr=ke({},ci,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),er=Xt(Rr),Ir=[9,13,27,32],lr=p&&"CompositionEvent"in window,At=null;p&&"documentMode"in document&&(At=document.documentMode);var sr=p&&"TextEvent"in window&&!At,kr=p&&(!lr||At&&8<At&&11>=At),Dt=" ",Sr=!1;function cr(t,i){switch(t){case"keyup":return Ir.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fr=!1;function zi(t,i){switch(t){case"compositionend":return tr(i);case"keypress":return i.which!==32?null:(Sr=!0,Dt);case"textInput":return t=i.data,t===Dt&&Sr?null:t;default:return null}}function Wn(t,i){if(fr)return t==="compositionend"||!lr&&cr(t,i)?(t=Jt(),ct=Mt=Ht=null,fr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return kr&&i.locale!=="ko"?null:i.data;default:return null}}var as={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!as[t.type]:i==="textarea"}function Xn(t,i,l,m){Dr(m),i=Js(i,"onChange"),0<i.length&&(l=new Fr("onChange","change",null,l,m),t.push({event:l,listeners:i}))}var As=null,Ts=null;function lc(t){El(t,0)}function qs(t){var i=hs(t);if(Ft(i))return t}function uc(t,i){if(t==="change")return i}var ol=!1;if(p){var Ba;if(p){var Ua="oninput"in document;if(!Ua){var ll=document.createElement("div");ll.setAttribute("oninput","return;"),Ua=typeof ll.oninput=="function"}Ba=Ua}else Ba=!1;ol=Ba&&(!document.documentMode||9<document.documentMode)}function ul(){As&&(As.detachEvent("onpropertychange",cl),Ts=As=null)}function cl(t){if(t.propertyName==="value"&&qs(Ts)){var i=[];Xn(i,Ts,t,Ci(t)),Ai(lc,i)}}function cc(t,i,l){t==="focusin"?(ul(),As=i,Ts=l,As.attachEvent("onpropertychange",cl)):t==="focusout"&&ul()}function hc(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qs(Ts)}function dc(t,i){if(t==="click")return qs(i)}function fc(t,i){if(t==="input"||t==="change")return qs(i)}function pc(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var fn=typeof Object.is=="function"?Object.is:pc;function Rs(t,i){if(fn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var l=Object.keys(t),m=Object.keys(i);if(l.length!==m.length)return!1;for(m=0;m<l.length;m++){var I=l[m];if(!d.call(i,I)||!fn(t[I],i[I]))return!1}return!0}function hl(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dl(t,i){var l=hl(t);t=0;for(var m;l;){if(l.nodeType===3){if(m=t+l.textContent.length,t<=i&&m>=i)return{node:l,offset:i-t};t=m}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=hl(l)}}function fl(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?fl(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function pl(){for(var t=window,i=Ct();i instanceof t.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)t=i.contentWindow;else break;i=Ct(t.document)}return i}function Ga(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function mc(t){var i=pl(),l=t.focusedElem,m=t.selectionRange;if(i!==l&&l&&l.ownerDocument&&fl(l.ownerDocument.documentElement,l)){if(m!==null&&Ga(l)){if(i=m.start,t=m.end,t===void 0&&(t=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(t,l.value.length);else if(t=(i=l.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var I=l.textContent.length,j=Math.min(m.start,I);m=m.end===void 0?j:Math.min(m.end,I),!t.extend&&j>m&&(I=m,m=j,j=I),I=dl(l,j);var ie=dl(l,m);I&&ie&&(t.rangeCount!==1||t.anchorNode!==I.node||t.anchorOffset!==I.offset||t.focusNode!==ie.node||t.focusOffset!==ie.offset)&&(i=i.createRange(),i.setStart(I.node,I.offset),t.removeAllRanges(),j>m?(t.addRange(i),t.extend(ie.node,ie.offset)):(i.setEnd(ie.node,ie.offset),t.addRange(i)))}}for(i=[],t=l;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)t=i[l],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gc=p&&"documentMode"in document&&11>=document.documentMode,os=null,Ha=null,Ms=null,Wa=!1;function ml(t,i,l){var m=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Wa||os==null||os!==Ct(m)||(m=os,"selectionStart"in m&&Ga(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Ms&&Rs(Ms,m)||(Ms=m,m=Js(Ha,"onSelect"),0<m.length&&(i=new Fr("onSelect","select",null,i,l),t.push({event:i,listeners:m}),i.target=os)))}function Qs(t,i){var l={};return l[t.toLowerCase()]=i.toLowerCase(),l["Webkit"+t]="webkit"+i,l["Moz"+t]="moz"+i,l}var ls={animationend:Qs("Animation","AnimationEnd"),animationiteration:Qs("Animation","AnimationIteration"),animationstart:Qs("Animation","AnimationStart"),transitionend:Qs("Transition","TransitionEnd")},$a={},gl={};p&&(gl=document.createElement("div").style,"AnimationEvent"in window||(delete ls.animationend.animation,delete ls.animationiteration.animation,delete ls.animationstart.animation),"TransitionEvent"in window||delete ls.transitionend.transition);function Ys(t){if($a[t])return $a[t];if(!ls[t])return t;var i=ls[t],l;for(l in i)if(i.hasOwnProperty(l)&&l in gl)return $a[t]=i[l];return t}var vl=Ys("animationend"),yl=Ys("animationiteration"),xl=Ys("animationstart"),_l=Ys("transitionend"),wl=new Map,bl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kn(t,i){wl.set(t,i),y(i,[t])}for(var Xa=0;Xa<bl.length;Xa++){var Ka=bl[Xa],vc=Ka.toLowerCase(),yc=Ka[0].toUpperCase()+Ka.slice(1);kn(vc,"on"+yc)}kn(vl,"onAnimationEnd"),kn(yl,"onAnimationIteration"),kn(xl,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn(_l,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),y("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),y("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),y("onBeforeInput",["compositionend","keypress","textInput","paste"]),y("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),y("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),y("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ps="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ps));function Sl(t,i,l){var m=t.type||"unknown-event";t.currentTarget=l,ur(m,i,void 0,t),t.currentTarget=null}function El(t,i){i=(i&4)!==0;for(var l=0;l<t.length;l++){var m=t[l],I=m.event;m=m.listeners;e:{var j=void 0;if(i)for(var ie=m.length-1;0<=ie;ie--){var Te=m[ie],Le=Te.instance,Qe=Te.currentTarget;if(Te=Te.listener,Le!==j&&I.isPropagationStopped())break e;Sl(I,Te,Qe),j=Le}else for(ie=0;ie<m.length;ie++){if(Te=m[ie],Le=Te.instance,Qe=Te.currentTarget,Te=Te.listener,Le!==j&&I.isPropagationStopped())break e;Sl(I,Te,Qe),j=Le}}}if(yi)throw t=Wi,yi=!1,Wi=null,t}function Zr(t,i){var l=i[ro];l===void 0&&(l=i[ro]=new Set);var m=t+"__bubble";l.has(m)||(Cl(i,t,2,!1),l.add(m))}function qa(t,i,l){var m=0;i&&(m|=4),Cl(l,t,m,i)}var Zs="_reactListening"+Math.random().toString(36).slice(2);function ks(t){if(!t[Zs]){t[Zs]=!0,o.forEach(function(l){l!=="selectionchange"&&(xc.has(l)||qa(l,!1,t),qa(l,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Zs]||(i[Zs]=!0,qa("selectionchange",!1,i))}}function Cl(t,i,l,m){switch(Pt(i)){case 1:var I=St;break;case 4:I=st;break;default:I=wt}l=I.bind(null,i,l,t),I=void 0,!Ti||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(I=!0),m?I!==void 0?t.addEventListener(i,l,{capture:!0,passive:I}):t.addEventListener(i,l,!0):I!==void 0?t.addEventListener(i,l,{passive:I}):t.addEventListener(i,l,!1)}function Qa(t,i,l,m,I){var j=m;if((i&1)===0&&(i&2)===0&&m!==null)e:for(;;){if(m===null)return;var ie=m.tag;if(ie===3||ie===4){var Te=m.stateNode.containerInfo;if(Te===I||Te.nodeType===8&&Te.parentNode===I)break;if(ie===4)for(ie=m.return;ie!==null;){var Le=ie.tag;if((Le===3||Le===4)&&(Le=ie.stateNode.containerInfo,Le===I||Le.nodeType===8&&Le.parentNode===I))return;ie=ie.return}for(;Te!==null;){if(ie=Kn(Te),ie===null)return;if(Le=ie.tag,Le===5||Le===6){m=j=ie;continue e}Te=Te.parentNode}}m=m.return}Ai(function(){var Qe=j,xt=Ci(l),bt=[];e:{var vt=wl.get(t);if(vt!==void 0){var jt=Fr,$t=t;switch(t){case"keypress":if(Nt(l)===0)break e;case"keydown":case"keyup":jt=gt;break;case"focusin":$t="focus",jt=Oi;break;case"focusout":$t="blur",jt=Oi;break;case"beforeblur":case"afterblur":jt=Oi;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":jt=ni;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":jt=Ii;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":jt=Wt;break;case vl:case yl:case xl:jt=Xr;break;case _l:jt=si;break;case"scroll":jt=ii;break;case"wheel":jt=er;break;case"copy":case"cut":case"paste":jt=ei;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":jt=Xe}var Kt=(i&4)!==0,mi=!Kt&&t==="scroll",Ge=Kt?vt!==null?vt+"Capture":null:vt;Kt=[];for(var je=Qe,Ke;je!==null;){Ke=je;var Tt=Ke.stateNode;if(Ke.tag===5&&Tt!==null&&(Ke=Tt,Ge!==null&&(Tt=Ni(je,Ge),Tt!=null&&Kt.push(Ds(je,Tt,Ke)))),mi)break;je=je.return}0<Kt.length&&(vt=new jt(vt,$t,null,l,xt),bt.push({event:vt,listeners:Kt}))}}if((i&7)===0){e:{if(vt=t==="mouseover"||t==="pointerover",jt=t==="mouseout"||t==="pointerout",vt&&l!==li&&($t=l.relatedTarget||l.fromElement)&&(Kn($t)||$t[Sn]))break e;if((jt||vt)&&(vt=xt.window===xt?xt:(vt=xt.ownerDocument)?vt.defaultView||vt.parentWindow:window,jt?($t=l.relatedTarget||l.toElement,jt=Qe,$t=$t?Kn($t):null,$t!==null&&(mi=Gr($t),$t!==mi||$t.tag!==5&&$t.tag!==6)&&($t=null)):(jt=null,$t=Qe),jt!==$t)){if(Kt=ni,Tt="onMouseLeave",Ge="onMouseEnter",je="mouse",(t==="pointerout"||t==="pointerover")&&(Kt=Xe,Tt="onPointerLeave",Ge="onPointerEnter",je="pointer"),mi=jt==null?vt:hs(jt),Ke=$t==null?vt:hs($t),vt=new Kt(Tt,je+"leave",jt,l,xt),vt.target=mi,vt.relatedTarget=Ke,Tt=null,Kn(xt)===Qe&&(Kt=new Kt(Ge,je+"enter",$t,l,xt),Kt.target=Ke,Kt.relatedTarget=mi,Tt=Kt),mi=Tt,jt&&$t)t:{for(Kt=jt,Ge=$t,je=0,Ke=Kt;Ke;Ke=us(Ke))je++;for(Ke=0,Tt=Ge;Tt;Tt=us(Tt))Ke++;for(;0<je-Ke;)Kt=us(Kt),je--;for(;0<Ke-je;)Ge=us(Ge),Ke--;for(;je--;){if(Kt===Ge||Ge!==null&&Kt===Ge.alternate)break t;Kt=us(Kt),Ge=us(Ge)}Kt=null}else Kt=null;jt!==null&&Al(bt,vt,jt,Kt,!1),$t!==null&&mi!==null&&Al(bt,mi,$t,Kt,!0)}}e:{if(vt=Qe?hs(Qe):window,jt=vt.nodeName&&vt.nodeName.toLowerCase(),jt==="select"||jt==="input"&&vt.type==="file")var Qt=uc;else if($n(vt))if(ol)Qt=fc;else{Qt=hc;var ir=cc}else(jt=vt.nodeName)&&jt.toLowerCase()==="input"&&(vt.type==="checkbox"||vt.type==="radio")&&(Qt=dc);if(Qt&&(Qt=Qt(t,Qe))){Xn(bt,Qt,l,xt);break e}ir&&ir(t,vt,Qe),t==="focusout"&&(ir=vt._wrapperState)&&ir.controlled&&vt.type==="number"&&vr(vt,"number",vt.value)}switch(ir=Qe?hs(Qe):window,t){case"focusin":($n(ir)||ir.contentEditable==="true")&&(os=ir,Ha=Qe,Ms=null);break;case"focusout":Ms=Ha=os=null;break;case"mousedown":Wa=!0;break;case"contextmenu":case"mouseup":case"dragend":Wa=!1,ml(bt,l,xt);break;case"selectionchange":if(gc)break;case"keydown":case"keyup":ml(bt,l,xt)}var nr;if(lr)e:{switch(t){case"compositionstart":var hr="onCompositionStart";break e;case"compositionend":hr="onCompositionEnd";break e;case"compositionupdate":hr="onCompositionUpdate";break e}hr=void 0}else fr?cr(t,l)&&(hr="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(hr="onCompositionStart");hr&&(kr&&l.locale!=="ko"&&(fr||hr!=="onCompositionStart"?hr==="onCompositionEnd"&&fr&&(nr=Jt()):(Ht=xt,Mt="value"in Ht?Ht.value:Ht.textContent,fr=!0)),ir=Js(Qe,hr),0<ir.length&&(hr=new Q(hr,t,null,l,xt),bt.push({event:hr,listeners:ir}),nr?hr.data=nr:(nr=tr(l),nr!==null&&(hr.data=nr)))),(nr=sr?zi(t,l):Wn(t,l))&&(Qe=Js(Qe,"onBeforeInput"),0<Qe.length&&(xt=new Q("onBeforeInput","beforeinput",null,l,xt),bt.push({event:xt,listeners:Qe}),xt.data=nr))}El(bt,i)})}function Ds(t,i,l){return{instance:t,listener:i,currentTarget:l}}function Js(t,i){for(var l=i+"Capture",m=[];t!==null;){var I=t,j=I.stateNode;I.tag===5&&j!==null&&(I=j,j=Ni(t,l),j!=null&&m.unshift(Ds(t,j,I)),j=Ni(t,i),j!=null&&m.push(Ds(t,j,I))),t=t.return}return m}function us(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Al(t,i,l,m,I){for(var j=i._reactName,ie=[];l!==null&&l!==m;){var Te=l,Le=Te.alternate,Qe=Te.stateNode;if(Le!==null&&Le===m)break;Te.tag===5&&Qe!==null&&(Te=Qe,I?(Le=Ni(l,j),Le!=null&&ie.unshift(Ds(l,Le,Te))):I||(Le=Ni(l,j),Le!=null&&ie.push(Ds(l,Le,Te)))),l=l.return}ie.length!==0&&t.push({event:i,listeners:ie})}var _c=/\r\n?/g,wc=/\u0000|\uFFFD/g;function Tl(t){return(typeof t=="string"?t:""+t).replace(_c,`
`).replace(wc,"")}function ea(t,i,l){if(i=Tl(i),Tl(t)!==i&&l)throw Error(s(425))}function ta(){}var Ya=null,Za=null;function Ja(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var eo=typeof setTimeout=="function"?setTimeout:void 0,bc=typeof clearTimeout=="function"?clearTimeout:void 0,Rl=typeof Promise=="function"?Promise:void 0,Sc=typeof queueMicrotask=="function"?queueMicrotask:typeof Rl<"u"?function(t){return Rl.resolve(null).then(t).catch(Ec)}:eo;function Ec(t){setTimeout(function(){throw t})}function to(t,i){var l=i,m=0;do{var I=l.nextSibling;if(t.removeChild(l),I&&I.nodeType===8)if(l=I.data,l==="/$"){if(m===0){t.removeChild(I),pt(i);return}m--}else l!=="$"&&l!=="$?"&&l!=="$!"||m++;l=I}while(l);pt(i)}function Dn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function Ml(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return t;i--}else l==="/$"&&i++}t=t.previousSibling}return null}var cs=Math.random().toString(36).slice(2),xn="__reactFiber$"+cs,Is="__reactProps$"+cs,Sn="__reactContainer$"+cs,ro="__reactEvents$"+cs,Cc="__reactListeners$"+cs,Ac="__reactHandles$"+cs;function Kn(t){var i=t[xn];if(i)return i;for(var l=t.parentNode;l;){if(i=l[Sn]||l[xn]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(t=Ml(t);t!==null;){if(l=t[xn])return l;t=Ml(t)}return i}t=l,l=t.parentNode}return null}function Os(t){return t=t[xn]||t[Sn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(s(33))}function ra(t){return t[Is]||null}var io=[],ds=-1;function In(t){return{current:t}}function Jr(t){0>ds||(t.current=io[ds],io[ds]=null,ds--)}function Qr(t,i){ds++,io[ds]=t.current,t.current=i}var On={},ji=In(On),Qi=In(!1),qn=On;function fs(t,i){var l=t.type.contextTypes;if(!l)return On;var m=t.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===i)return m.__reactInternalMemoizedMaskedChildContext;var I={},j;for(j in l)I[j]=i[j];return m&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=I),I}function Yi(t){return t=t.childContextTypes,t!=null}function ia(){Jr(Qi),Jr(ji)}function Pl(t,i,l){if(ji.current!==On)throw Error(s(168));Qr(ji,i),Qr(Qi,l)}function kl(t,i,l){var m=t.stateNode;if(i=i.childContextTypes,typeof m.getChildContext!="function")return l;m=m.getChildContext();for(var I in m)if(!(I in i))throw Error(s(108,qe(t)||"Unknown",I));return ke({},l,m)}function na(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||On,qn=ji.current,Qr(ji,t),Qr(Qi,Qi.current),!0}function Dl(t,i,l){var m=t.stateNode;if(!m)throw Error(s(169));l?(t=kl(t,i,qn),m.__reactInternalMemoizedMergedChildContext=t,Jr(Qi),Jr(ji),Qr(ji,t)):Jr(Qi),Qr(Qi,l)}var En=null,sa=!1,no=!1;function Il(t){En===null?En=[t]:En.push(t)}function Tc(t){sa=!0,Il(t)}function zn(){if(!no&&En!==null){no=!0;var t=0,i=D;try{var l=En;for(D=1;t<l.length;t++){var m=l[t];do m=m(!0);while(m!==null)}En=null,sa=!1}catch(I){throw En!==null&&(En=En.slice(t+1)),xe(Rt,zn),I}finally{D=i,no=!1}}return null}var ps=[],ms=0,aa=null,oa=0,on=[],ln=0,Qn=null,Cn=1,An="";function Yn(t,i){ps[ms++]=oa,ps[ms++]=aa,aa=t,oa=i}function Ol(t,i,l){on[ln++]=Cn,on[ln++]=An,on[ln++]=Qn,Qn=t;var m=Cn;t=An;var I=32-_r(m)-1;m&=~(1<<I),l+=1;var j=32-_r(i)+I;if(30<j){var ie=I-I%5;j=(m&(1<<ie)-1).toString(32),m>>=ie,I-=ie,Cn=1<<32-_r(i)+I|l<<I|m,An=j+t}else Cn=1<<j|l<<I|m,An=t}function so(t){t.return!==null&&(Yn(t,1),Ol(t,1,0))}function ao(t){for(;t===aa;)aa=ps[--ms],ps[ms]=null,oa=ps[--ms],ps[ms]=null;for(;t===Qn;)Qn=on[--ln],on[ln]=null,An=on[--ln],on[ln]=null,Cn=on[--ln],on[ln]=null}var rn=null,nn=null,ti=!1,pn=null;function zl(t,i){var l=dn(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=t,i=t.deletions,i===null?(t.deletions=[l],t.flags|=16):i.push(l)}function Ll(t,i){switch(t.tag){case 5:var l=t.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,rn=t,nn=Dn(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,rn=t,nn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=Qn!==null?{id:Cn,overflow:An}:null,t.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=dn(18,null,null,0),l.stateNode=i,l.return=t,t.child=l,rn=t,nn=null,!0):!1;default:return!1}}function oo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lo(t){if(ti){var i=nn;if(i){var l=i;if(!Ll(t,i)){if(oo(t))throw Error(s(418));i=Dn(l.nextSibling);var m=rn;i&&Ll(t,i)?zl(m,l):(t.flags=t.flags&-4097|2,ti=!1,rn=t)}}else{if(oo(t))throw Error(s(418));t.flags=t.flags&-4097|2,ti=!1,rn=t}}}function Fl(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rn=t}function la(t){if(t!==rn)return!1;if(!ti)return Fl(t),ti=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!Ja(t.type,t.memoizedProps)),i&&(i=nn)){if(oo(t))throw Nl(),Error(s(418));for(;i;)zl(t,i),i=Dn(i.nextSibling)}if(Fl(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"){if(i===0){nn=Dn(t.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}t=t.nextSibling}nn=null}}else nn=rn?Dn(t.stateNode.nextSibling):null;return!0}function Nl(){for(var t=nn;t;)t=Dn(t.nextSibling)}function gs(){nn=rn=null,ti=!1}function uo(t){pn===null?pn=[t]:pn.push(t)}var Rc=F.ReactCurrentBatchConfig;function zs(t,i,l){if(t=l.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(s(309));var m=l.stateNode}if(!m)throw Error(s(147,t));var I=m,j=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===j?i.ref:(i=function(ie){var Te=I.refs;ie===null?delete Te[j]:Te[j]=ie},i._stringRef=j,i)}if(typeof t!="string")throw Error(s(284));if(!l._owner)throw Error(s(290,t))}return t}function ua(t,i){throw t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function Vl(t){var i=t._init;return i(t._payload)}function jl(t){function i(Ge,je){if(t){var Ke=Ge.deletions;Ke===null?(Ge.deletions=[je],Ge.flags|=16):Ke.push(je)}}function l(Ge,je){if(!t)return null;for(;je!==null;)i(Ge,je),je=je.sibling;return null}function m(Ge,je){for(Ge=new Map;je!==null;)je.key!==null?Ge.set(je.key,je):Ge.set(je.index,je),je=je.sibling;return Ge}function I(Ge,je){return Ge=Gn(Ge,je),Ge.index=0,Ge.sibling=null,Ge}function j(Ge,je,Ke){return Ge.index=Ke,t?(Ke=Ge.alternate,Ke!==null?(Ke=Ke.index,Ke<je?(Ge.flags|=2,je):Ke):(Ge.flags|=2,je)):(Ge.flags|=1048576,je)}function ie(Ge){return t&&Ge.alternate===null&&(Ge.flags|=2),Ge}function Te(Ge,je,Ke,Tt){return je===null||je.tag!==6?(je=tl(Ke,Ge.mode,Tt),je.return=Ge,je):(je=I(je,Ke),je.return=Ge,je)}function Le(Ge,je,Ke,Tt){var Qt=Ke.type;return Qt===J?xt(Ge,je,Ke.props.children,Tt,Ke.key):je!==null&&(je.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===L&&Vl(Qt)===je.type)?(Tt=I(je,Ke.props),Tt.ref=zs(Ge,je,Ke),Tt.return=Ge,Tt):(Tt=Ia(Ke.type,Ke.key,Ke.props,null,Ge.mode,Tt),Tt.ref=zs(Ge,je,Ke),Tt.return=Ge,Tt)}function Qe(Ge,je,Ke,Tt){return je===null||je.tag!==4||je.stateNode.containerInfo!==Ke.containerInfo||je.stateNode.implementation!==Ke.implementation?(je=rl(Ke,Ge.mode,Tt),je.return=Ge,je):(je=I(je,Ke.children||[]),je.return=Ge,je)}function xt(Ge,je,Ke,Tt,Qt){return je===null||je.tag!==7?(je=ss(Ke,Ge.mode,Tt,Qt),je.return=Ge,je):(je=I(je,Ke),je.return=Ge,je)}function bt(Ge,je,Ke){if(typeof je=="string"&&je!==""||typeof je=="number")return je=tl(""+je,Ge.mode,Ke),je.return=Ge,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case B:return Ke=Ia(je.type,je.key,je.props,null,Ge.mode,Ke),Ke.ref=zs(Ge,null,je),Ke.return=Ge,Ke;case W:return je=rl(je,Ge.mode,Ke),je.return=Ge,je;case L:var Tt=je._init;return bt(Ge,Tt(je._payload),Ke)}if(xr(je)||q(je))return je=ss(je,Ge.mode,Ke,null),je.return=Ge,je;ua(Ge,je)}return null}function vt(Ge,je,Ke,Tt){var Qt=je!==null?je.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return Qt!==null?null:Te(Ge,je,""+Ke,Tt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case B:return Ke.key===Qt?Le(Ge,je,Ke,Tt):null;case W:return Ke.key===Qt?Qe(Ge,je,Ke,Tt):null;case L:return Qt=Ke._init,vt(Ge,je,Qt(Ke._payload),Tt)}if(xr(Ke)||q(Ke))return Qt!==null?null:xt(Ge,je,Ke,Tt,null);ua(Ge,Ke)}return null}function jt(Ge,je,Ke,Tt,Qt){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number")return Ge=Ge.get(Ke)||null,Te(je,Ge,""+Tt,Qt);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case B:return Ge=Ge.get(Tt.key===null?Ke:Tt.key)||null,Le(je,Ge,Tt,Qt);case W:return Ge=Ge.get(Tt.key===null?Ke:Tt.key)||null,Qe(je,Ge,Tt,Qt);case L:var ir=Tt._init;return jt(Ge,je,Ke,ir(Tt._payload),Qt)}if(xr(Tt)||q(Tt))return Ge=Ge.get(Ke)||null,xt(je,Ge,Tt,Qt,null);ua(je,Tt)}return null}function $t(Ge,je,Ke,Tt){for(var Qt=null,ir=null,nr=je,hr=je=0,ki=null;nr!==null&&hr<Ke.length;hr++){nr.index>hr?(ki=nr,nr=null):ki=nr.sibling;var Vr=vt(Ge,nr,Ke[hr],Tt);if(Vr===null){nr===null&&(nr=ki);break}t&&nr&&Vr.alternate===null&&i(Ge,nr),je=j(Vr,je,hr),ir===null?Qt=Vr:ir.sibling=Vr,ir=Vr,nr=ki}if(hr===Ke.length)return l(Ge,nr),ti&&Yn(Ge,hr),Qt;if(nr===null){for(;hr<Ke.length;hr++)nr=bt(Ge,Ke[hr],Tt),nr!==null&&(je=j(nr,je,hr),ir===null?Qt=nr:ir.sibling=nr,ir=nr);return ti&&Yn(Ge,hr),Qt}for(nr=m(Ge,nr);hr<Ke.length;hr++)ki=jt(nr,Ge,hr,Ke[hr],Tt),ki!==null&&(t&&ki.alternate!==null&&nr.delete(ki.key===null?hr:ki.key),je=j(ki,je,hr),ir===null?Qt=ki:ir.sibling=ki,ir=ki);return t&&nr.forEach(function(Hn){return i(Ge,Hn)}),ti&&Yn(Ge,hr),Qt}function Kt(Ge,je,Ke,Tt){var Qt=q(Ke);if(typeof Qt!="function")throw Error(s(150));if(Ke=Qt.call(Ke),Ke==null)throw Error(s(151));for(var ir=Qt=null,nr=je,hr=je=0,ki=null,Vr=Ke.next();nr!==null&&!Vr.done;hr++,Vr=Ke.next()){nr.index>hr?(ki=nr,nr=null):ki=nr.sibling;var Hn=vt(Ge,nr,Vr.value,Tt);if(Hn===null){nr===null&&(nr=ki);break}t&&nr&&Hn.alternate===null&&i(Ge,nr),je=j(Hn,je,hr),ir===null?Qt=Hn:ir.sibling=Hn,ir=Hn,nr=ki}if(Vr.done)return l(Ge,nr),ti&&Yn(Ge,hr),Qt;if(nr===null){for(;!Vr.done;hr++,Vr=Ke.next())Vr=bt(Ge,Vr.value,Tt),Vr!==null&&(je=j(Vr,je,hr),ir===null?Qt=Vr:ir.sibling=Vr,ir=Vr);return ti&&Yn(Ge,hr),Qt}for(nr=m(Ge,nr);!Vr.done;hr++,Vr=Ke.next())Vr=jt(nr,Ge,hr,Vr.value,Tt),Vr!==null&&(t&&Vr.alternate!==null&&nr.delete(Vr.key===null?hr:Vr.key),je=j(Vr,je,hr),ir===null?Qt=Vr:ir.sibling=Vr,ir=Vr);return t&&nr.forEach(function(oh){return i(Ge,oh)}),ti&&Yn(Ge,hr),Qt}function mi(Ge,je,Ke,Tt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===J&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case B:e:{for(var Qt=Ke.key,ir=je;ir!==null;){if(ir.key===Qt){if(Qt=Ke.type,Qt===J){if(ir.tag===7){l(Ge,ir.sibling),je=I(ir,Ke.props.children),je.return=Ge,Ge=je;break e}}else if(ir.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===L&&Vl(Qt)===ir.type){l(Ge,ir.sibling),je=I(ir,Ke.props),je.ref=zs(Ge,ir,Ke),je.return=Ge,Ge=je;break e}l(Ge,ir);break}else i(Ge,ir);ir=ir.sibling}Ke.type===J?(je=ss(Ke.props.children,Ge.mode,Tt,Ke.key),je.return=Ge,Ge=je):(Tt=Ia(Ke.type,Ke.key,Ke.props,null,Ge.mode,Tt),Tt.ref=zs(Ge,je,Ke),Tt.return=Ge,Ge=Tt)}return ie(Ge);case W:e:{for(ir=Ke.key;je!==null;){if(je.key===ir)if(je.tag===4&&je.stateNode.containerInfo===Ke.containerInfo&&je.stateNode.implementation===Ke.implementation){l(Ge,je.sibling),je=I(je,Ke.children||[]),je.return=Ge,Ge=je;break e}else{l(Ge,je);break}else i(Ge,je);je=je.sibling}je=rl(Ke,Ge.mode,Tt),je.return=Ge,Ge=je}return ie(Ge);case L:return ir=Ke._init,mi(Ge,je,ir(Ke._payload),Tt)}if(xr(Ke))return $t(Ge,je,Ke,Tt);if(q(Ke))return Kt(Ge,je,Ke,Tt);ua(Ge,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"?(Ke=""+Ke,je!==null&&je.tag===6?(l(Ge,je.sibling),je=I(je,Ke),je.return=Ge,Ge=je):(l(Ge,je),je=tl(Ke,Ge.mode,Tt),je.return=Ge,Ge=je),ie(Ge)):l(Ge,je)}return mi}var vs=jl(!0),Bl=jl(!1),ca=In(null),ha=null,ys=null,co=null;function ho(){co=ys=ha=null}function fo(t){var i=ca.current;Jr(ca),t._currentValue=i}function po(t,i,l){for(;t!==null;){var m=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),t===l)break;t=t.return}}function xs(t,i){ha=t,co=ys=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&i)!==0&&(Zi=!0),t.firstContext=null)}function un(t){var i=t._currentValue;if(co!==t)if(t={context:t,memoizedValue:i,next:null},ys===null){if(ha===null)throw Error(s(308));ys=t,ha.dependencies={lanes:0,firstContext:t}}else ys=ys.next=t;return i}var Zn=null;function mo(t){Zn===null?Zn=[t]:Zn.push(t)}function Ul(t,i,l,m){var I=i.interleaved;return I===null?(l.next=l,mo(i)):(l.next=I.next,I.next=l),i.interleaved=l,Tn(t,m)}function Tn(t,i){t.lanes|=i;var l=t.alternate;for(l!==null&&(l.lanes|=i),l=t,t=t.return;t!==null;)t.childLanes|=i,l=t.alternate,l!==null&&(l.childLanes|=i),l=t,t=t.return;return l.tag===3?l.stateNode:null}var Ln=!1;function go(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gl(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rn(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function Fn(t,i,l){var m=t.updateQueue;if(m===null)return null;if(m=m.shared,(Nr&2)!==0){var I=m.pending;return I===null?i.next=i:(i.next=I.next,I.next=i),m.pending=i,Tn(t,l)}return I=m.interleaved,I===null?(i.next=i,mo(m)):(i.next=I.next,I.next=i),m.interleaved=i,Tn(t,l)}function da(t,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var m=i.lanes;m&=t.pendingLanes,l|=m,i.lanes=l,A(t,l)}}function Hl(t,i){var l=t.updateQueue,m=t.alternate;if(m!==null&&(m=m.updateQueue,l===m)){var I=null,j=null;if(l=l.firstBaseUpdate,l!==null){do{var ie={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};j===null?I=j=ie:j=j.next=ie,l=l.next}while(l!==null);j===null?I=j=i:j=j.next=i}else I=j=i;l={baseState:m.baseState,firstBaseUpdate:I,lastBaseUpdate:j,shared:m.shared,effects:m.effects},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=i:t.next=i,l.lastBaseUpdate=i}function fa(t,i,l,m){var I=t.updateQueue;Ln=!1;var j=I.firstBaseUpdate,ie=I.lastBaseUpdate,Te=I.shared.pending;if(Te!==null){I.shared.pending=null;var Le=Te,Qe=Le.next;Le.next=null,ie===null?j=Qe:ie.next=Qe,ie=Le;var xt=t.alternate;xt!==null&&(xt=xt.updateQueue,Te=xt.lastBaseUpdate,Te!==ie&&(Te===null?xt.firstBaseUpdate=Qe:Te.next=Qe,xt.lastBaseUpdate=Le))}if(j!==null){var bt=I.baseState;ie=0,xt=Qe=Le=null,Te=j;do{var vt=Te.lane,jt=Te.eventTime;if((m&vt)===vt){xt!==null&&(xt=xt.next={eventTime:jt,lane:0,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null});e:{var $t=t,Kt=Te;switch(vt=i,jt=l,Kt.tag){case 1:if($t=Kt.payload,typeof $t=="function"){bt=$t.call(jt,bt,vt);break e}bt=$t;break e;case 3:$t.flags=$t.flags&-65537|128;case 0:if($t=Kt.payload,vt=typeof $t=="function"?$t.call(jt,bt,vt):$t,vt==null)break e;bt=ke({},bt,vt);break e;case 2:Ln=!0}}Te.callback!==null&&Te.lane!==0&&(t.flags|=64,vt=I.effects,vt===null?I.effects=[Te]:vt.push(Te))}else jt={eventTime:jt,lane:vt,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null},xt===null?(Qe=xt=jt,Le=bt):xt=xt.next=jt,ie|=vt;if(Te=Te.next,Te===null){if(Te=I.shared.pending,Te===null)break;vt=Te,Te=vt.next,vt.next=null,I.lastBaseUpdate=vt,I.shared.pending=null}}while(!0);if(xt===null&&(Le=bt),I.baseState=Le,I.firstBaseUpdate=Qe,I.lastBaseUpdate=xt,i=I.shared.interleaved,i!==null){I=i;do ie|=I.lane,I=I.next;while(I!==i)}else j===null&&(I.shared.lanes=0);ts|=ie,t.lanes=ie,t.memoizedState=bt}}function Wl(t,i,l){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var m=t[i],I=m.callback;if(I!==null){if(m.callback=null,m=l,typeof I!="function")throw Error(s(191,I));I.call(m)}}}var Ls={},_n=In(Ls),Fs=In(Ls),Ns=In(Ls);function Jn(t){if(t===Ls)throw Error(s(174));return t}function vo(t,i){switch(Qr(Ns,i),Qr(Fs,t),Qr(_n,Ls),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:pe(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=pe(i,t)}Jr(_n),Qr(_n,i)}function _s(){Jr(_n),Jr(Fs),Jr(Ns)}function $l(t){Jn(Ns.current);var i=Jn(_n.current),l=pe(i,t.type);i!==l&&(Qr(Fs,t),Qr(_n,l))}function yo(t){Fs.current===t&&(Jr(_n),Jr(Fs))}var ai=In(0);function pa(t){for(var i=t;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var xo=[];function _o(){for(var t=0;t<xo.length;t++)xo[t]._workInProgressVersionPrimary=null;xo.length=0}var ma=F.ReactCurrentDispatcher,wo=F.ReactCurrentBatchConfig,es=0,oi=null,Si=null,Mi=null,ga=!1,Vs=!1,js=0,Mc=0;function Bi(){throw Error(s(321))}function bo(t,i){if(i===null)return!1;for(var l=0;l<i.length&&l<t.length;l++)if(!fn(t[l],i[l]))return!1;return!0}function So(t,i,l,m,I,j){if(es=j,oi=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ma.current=t===null||t.memoizedState===null?Ic:Oc,t=l(m,I),Vs){j=0;do{if(Vs=!1,js=0,25<=j)throw Error(s(301));j+=1,Mi=Si=null,i.updateQueue=null,ma.current=zc,t=l(m,I)}while(Vs)}if(ma.current=xa,i=Si!==null&&Si.next!==null,es=0,Mi=Si=oi=null,ga=!1,i)throw Error(s(300));return t}function Eo(){var t=js!==0;return js=0,t}function wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mi===null?oi.memoizedState=Mi=t:Mi=Mi.next=t,Mi}function cn(){if(Si===null){var t=oi.alternate;t=t!==null?t.memoizedState:null}else t=Si.next;var i=Mi===null?oi.memoizedState:Mi.next;if(i!==null)Mi=i,Si=t;else{if(t===null)throw Error(s(310));Si=t,t={memoizedState:Si.memoizedState,baseState:Si.baseState,baseQueue:Si.baseQueue,queue:Si.queue,next:null},Mi===null?oi.memoizedState=Mi=t:Mi=Mi.next=t}return Mi}function Bs(t,i){return typeof i=="function"?i(t):i}function Co(t){var i=cn(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=t;var m=Si,I=m.baseQueue,j=l.pending;if(j!==null){if(I!==null){var ie=I.next;I.next=j.next,j.next=ie}m.baseQueue=I=j,l.pending=null}if(I!==null){j=I.next,m=m.baseState;var Te=ie=null,Le=null,Qe=j;do{var xt=Qe.lane;if((es&xt)===xt)Le!==null&&(Le=Le.next={lane:0,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null}),m=Qe.hasEagerState?Qe.eagerState:t(m,Qe.action);else{var bt={lane:xt,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null};Le===null?(Te=Le=bt,ie=m):Le=Le.next=bt,oi.lanes|=xt,ts|=xt}Qe=Qe.next}while(Qe!==null&&Qe!==j);Le===null?ie=m:Le.next=Te,fn(m,i.memoizedState)||(Zi=!0),i.memoizedState=m,i.baseState=ie,i.baseQueue=Le,l.lastRenderedState=m}if(t=l.interleaved,t!==null){I=t;do j=I.lane,oi.lanes|=j,ts|=j,I=I.next;while(I!==t)}else I===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function Ao(t){var i=cn(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=t;var m=l.dispatch,I=l.pending,j=i.memoizedState;if(I!==null){l.pending=null;var ie=I=I.next;do j=t(j,ie.action),ie=ie.next;while(ie!==I);fn(j,i.memoizedState)||(Zi=!0),i.memoizedState=j,i.baseQueue===null&&(i.baseState=j),l.lastRenderedState=j}return[j,m]}function Xl(){}function Kl(t,i){var l=oi,m=cn(),I=i(),j=!fn(m.memoizedState,I);if(j&&(m.memoizedState=I,Zi=!0),m=m.queue,To(Yl.bind(null,l,m,t),[t]),m.getSnapshot!==i||j||Mi!==null&&Mi.memoizedState.tag&1){if(l.flags|=2048,Us(9,Ql.bind(null,l,m,I,i),void 0,null),Pi===null)throw Error(s(349));(es&30)!==0||ql(l,i,I)}return I}function ql(t,i,l){t.flags|=16384,t={getSnapshot:i,value:l},i=oi.updateQueue,i===null?(i={lastEffect:null,stores:null},oi.updateQueue=i,i.stores=[t]):(l=i.stores,l===null?i.stores=[t]:l.push(t))}function Ql(t,i,l,m){i.value=l,i.getSnapshot=m,Zl(i)&&Jl(t)}function Yl(t,i,l){return l(function(){Zl(i)&&Jl(t)})}function Zl(t){var i=t.getSnapshot;t=t.value;try{var l=i();return!fn(t,l)}catch{return!0}}function Jl(t){var i=Tn(t,1);i!==null&&yn(i,t,1,-1)}function eu(t){var i=wn();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:t},i.queue=t,t=t.dispatch=Dc.bind(null,oi,t),[i.memoizedState,t]}function Us(t,i,l,m){return t={tag:t,create:i,destroy:l,deps:m,next:null},i=oi.updateQueue,i===null?(i={lastEffect:null,stores:null},oi.updateQueue=i,i.lastEffect=t.next=t):(l=i.lastEffect,l===null?i.lastEffect=t.next=t:(m=l.next,l.next=t,t.next=m,i.lastEffect=t)),t}function tu(){return cn().memoizedState}function va(t,i,l,m){var I=wn();oi.flags|=t,I.memoizedState=Us(1|i,l,void 0,m===void 0?null:m)}function ya(t,i,l,m){var I=cn();m=m===void 0?null:m;var j=void 0;if(Si!==null){var ie=Si.memoizedState;if(j=ie.destroy,m!==null&&bo(m,ie.deps)){I.memoizedState=Us(i,l,j,m);return}}oi.flags|=t,I.memoizedState=Us(1|i,l,j,m)}function ru(t,i){return va(8390656,8,t,i)}function To(t,i){return ya(2048,8,t,i)}function iu(t,i){return ya(4,2,t,i)}function nu(t,i){return ya(4,4,t,i)}function su(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function au(t,i,l){return l=l!=null?l.concat([t]):null,ya(4,4,su.bind(null,i,t),l)}function Ro(){}function ou(t,i){var l=cn();i=i===void 0?null:i;var m=l.memoizedState;return m!==null&&i!==null&&bo(i,m[1])?m[0]:(l.memoizedState=[t,i],t)}function lu(t,i){var l=cn();i=i===void 0?null:i;var m=l.memoizedState;return m!==null&&i!==null&&bo(i,m[1])?m[0]:(t=t(),l.memoizedState=[t,i],t)}function uu(t,i,l){return(es&21)===0?(t.baseState&&(t.baseState=!1,Zi=!0),t.memoizedState=l):(fn(l,i)||(l=T(),oi.lanes|=l,ts|=l,t.baseState=!0),i)}function Pc(t,i){var l=D;D=l!==0&&4>l?l:4,t(!0);var m=wo.transition;wo.transition={};try{t(!1),i()}finally{D=l,wo.transition=m}}function cu(){return cn().memoizedState}function kc(t,i,l){var m=Bn(t);if(l={lane:m,action:l,hasEagerState:!1,eagerState:null,next:null},hu(t))du(i,l);else if(l=Ul(t,i,l,m),l!==null){var I=Xi();yn(l,t,m,I),fu(l,i,m)}}function Dc(t,i,l){var m=Bn(t),I={lane:m,action:l,hasEagerState:!1,eagerState:null,next:null};if(hu(t))du(i,I);else{var j=t.alternate;if(t.lanes===0&&(j===null||j.lanes===0)&&(j=i.lastRenderedReducer,j!==null))try{var ie=i.lastRenderedState,Te=j(ie,l);if(I.hasEagerState=!0,I.eagerState=Te,fn(Te,ie)){var Le=i.interleaved;Le===null?(I.next=I,mo(i)):(I.next=Le.next,Le.next=I),i.interleaved=I;return}}catch{}l=Ul(t,i,I,m),l!==null&&(I=Xi(),yn(l,t,m,I),fu(l,i,m))}}function hu(t){var i=t.alternate;return t===oi||i!==null&&i===oi}function du(t,i){Vs=ga=!0;var l=t.pending;l===null?i.next=i:(i.next=l.next,l.next=i),t.pending=i}function fu(t,i,l){if((l&4194240)!==0){var m=i.lanes;m&=t.pendingLanes,l|=m,i.lanes=l,A(t,l)}}var xa={readContext:un,useCallback:Bi,useContext:Bi,useEffect:Bi,useImperativeHandle:Bi,useInsertionEffect:Bi,useLayoutEffect:Bi,useMemo:Bi,useReducer:Bi,useRef:Bi,useState:Bi,useDebugValue:Bi,useDeferredValue:Bi,useTransition:Bi,useMutableSource:Bi,useSyncExternalStore:Bi,useId:Bi,unstable_isNewReconciler:!1},Ic={readContext:un,useCallback:function(t,i){return wn().memoizedState=[t,i===void 0?null:i],t},useContext:un,useEffect:ru,useImperativeHandle:function(t,i,l){return l=l!=null?l.concat([t]):null,va(4194308,4,su.bind(null,i,t),l)},useLayoutEffect:function(t,i){return va(4194308,4,t,i)},useInsertionEffect:function(t,i){return va(4,2,t,i)},useMemo:function(t,i){var l=wn();return i=i===void 0?null:i,t=t(),l.memoizedState=[t,i],t},useReducer:function(t,i,l){var m=wn();return i=l!==void 0?l(i):i,m.memoizedState=m.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},m.queue=t,t=t.dispatch=kc.bind(null,oi,t),[m.memoizedState,t]},useRef:function(t){var i=wn();return t={current:t},i.memoizedState=t},useState:eu,useDebugValue:Ro,useDeferredValue:function(t){return wn().memoizedState=t},useTransition:function(){var t=eu(!1),i=t[0];return t=Pc.bind(null,t[1]),wn().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,l){var m=oi,I=wn();if(ti){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),Pi===null)throw Error(s(349));(es&30)!==0||ql(m,i,l)}I.memoizedState=l;var j={value:l,getSnapshot:i};return I.queue=j,ru(Yl.bind(null,m,j,t),[t]),m.flags|=2048,Us(9,Ql.bind(null,m,j,l,i),void 0,null),l},useId:function(){var t=wn(),i=Pi.identifierPrefix;if(ti){var l=An,m=Cn;l=(m&~(1<<32-_r(m)-1)).toString(32)+l,i=":"+i+"R"+l,l=js++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=Mc++,i=":"+i+"r"+l.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},Oc={readContext:un,useCallback:ou,useContext:un,useEffect:To,useImperativeHandle:au,useInsertionEffect:iu,useLayoutEffect:nu,useMemo:lu,useReducer:Co,useRef:tu,useState:function(){return Co(Bs)},useDebugValue:Ro,useDeferredValue:function(t){var i=cn();return uu(i,Si.memoizedState,t)},useTransition:function(){var t=Co(Bs)[0],i=cn().memoizedState;return[t,i]},useMutableSource:Xl,useSyncExternalStore:Kl,useId:cu,unstable_isNewReconciler:!1},zc={readContext:un,useCallback:ou,useContext:un,useEffect:To,useImperativeHandle:au,useInsertionEffect:iu,useLayoutEffect:nu,useMemo:lu,useReducer:Ao,useRef:tu,useState:function(){return Ao(Bs)},useDebugValue:Ro,useDeferredValue:function(t){var i=cn();return Si===null?i.memoizedState=t:uu(i,Si.memoizedState,t)},useTransition:function(){var t=Ao(Bs)[0],i=cn().memoizedState;return[t,i]},useMutableSource:Xl,useSyncExternalStore:Kl,useId:cu,unstable_isNewReconciler:!1};function mn(t,i){if(t&&t.defaultProps){i=ke({},i),t=t.defaultProps;for(var l in t)i[l]===void 0&&(i[l]=t[l]);return i}return i}function Mo(t,i,l,m){i=t.memoizedState,l=l(m,i),l=l==null?i:ke({},i,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var _a={isMounted:function(t){return(t=t._reactInternals)?Gr(t)===t:!1},enqueueSetState:function(t,i,l){t=t._reactInternals;var m=Xi(),I=Bn(t),j=Rn(m,I);j.payload=i,l!=null&&(j.callback=l),i=Fn(t,j,I),i!==null&&(yn(i,t,I,m),da(i,t,I))},enqueueReplaceState:function(t,i,l){t=t._reactInternals;var m=Xi(),I=Bn(t),j=Rn(m,I);j.tag=1,j.payload=i,l!=null&&(j.callback=l),i=Fn(t,j,I),i!==null&&(yn(i,t,I,m),da(i,t,I))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var l=Xi(),m=Bn(t),I=Rn(l,m);I.tag=2,i!=null&&(I.callback=i),i=Fn(t,I,m),i!==null&&(yn(i,t,m,l),da(i,t,m))}};function pu(t,i,l,m,I,j,ie){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(m,j,ie):i.prototype&&i.prototype.isPureReactComponent?!Rs(l,m)||!Rs(I,j):!0}function mu(t,i,l){var m=!1,I=On,j=i.contextType;return typeof j=="object"&&j!==null?j=un(j):(I=Yi(i)?qn:ji.current,m=i.contextTypes,j=(m=m!=null)?fs(t,I):On),i=new i(l,j),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=_a,t.stateNode=i,i._reactInternals=t,m&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=I,t.__reactInternalMemoizedMaskedChildContext=j),i}function gu(t,i,l,m){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,m),i.state!==t&&_a.enqueueReplaceState(i,i.state,null)}function Po(t,i,l,m){var I=t.stateNode;I.props=l,I.state=t.memoizedState,I.refs={},go(t);var j=i.contextType;typeof j=="object"&&j!==null?I.context=un(j):(j=Yi(i)?qn:ji.current,I.context=fs(t,j)),I.state=t.memoizedState,j=i.getDerivedStateFromProps,typeof j=="function"&&(Mo(t,i,j,l),I.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(i=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),i!==I.state&&_a.enqueueReplaceState(I,I.state,null),fa(t,l,I,m),I.state=t.memoizedState),typeof I.componentDidMount=="function"&&(t.flags|=4194308)}function ws(t,i){try{var l="",m=i;do l+=Ae(m),m=m.return;while(m);var I=l}catch(j){I=`
Error generating stack: `+j.message+`
`+j.stack}return{value:t,source:i,stack:I,digest:null}}function ko(t,i,l){return{value:t,source:null,stack:l??null,digest:i??null}}function Do(t,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var Lc=typeof WeakMap=="function"?WeakMap:Map;function vu(t,i,l){l=Rn(-1,l),l.tag=3,l.payload={element:null};var m=i.value;return l.callback=function(){Ta||(Ta=!0,Xo=m),Do(t,i)},l}function yu(t,i,l){l=Rn(-1,l),l.tag=3;var m=t.type.getDerivedStateFromError;if(typeof m=="function"){var I=i.value;l.payload=function(){return m(I)},l.callback=function(){Do(t,i)}}var j=t.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(l.callback=function(){Do(t,i),typeof m!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var ie=i.stack;this.componentDidCatch(i.value,{componentStack:ie!==null?ie:""})}),l}function xu(t,i,l){var m=t.pingCache;if(m===null){m=t.pingCache=new Lc;var I=new Set;m.set(i,I)}else I=m.get(i),I===void 0&&(I=new Set,m.set(i,I));I.has(l)||(I.add(l),t=Qc.bind(null,t,i,l),i.then(t,t))}function _u(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function wu(t,i,l,m,I){return(t.mode&1)===0?(t===i?t.flags|=65536:(t.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Rn(-1,1),i.tag=2,Fn(l,i,1))),l.lanes|=1),t):(t.flags|=65536,t.lanes=I,t)}var Fc=F.ReactCurrentOwner,Zi=!1;function $i(t,i,l,m){i.child=t===null?Bl(i,null,l,m):vs(i,t.child,l,m)}function bu(t,i,l,m,I){l=l.render;var j=i.ref;return xs(i,I),m=So(t,i,l,m,j,I),l=Eo(),t!==null&&!Zi?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~I,Mn(t,i,I)):(ti&&l&&so(i),i.flags|=1,$i(t,i,m,I),i.child)}function Su(t,i,l,m,I){if(t===null){var j=l.type;return typeof j=="function"&&!el(j)&&j.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=j,Eu(t,i,j,m,I)):(t=Ia(l.type,null,m,i,i.mode,I),t.ref=i.ref,t.return=i,i.child=t)}if(j=t.child,(t.lanes&I)===0){var ie=j.memoizedProps;if(l=l.compare,l=l!==null?l:Rs,l(ie,m)&&t.ref===i.ref)return Mn(t,i,I)}return i.flags|=1,t=Gn(j,m),t.ref=i.ref,t.return=i,i.child=t}function Eu(t,i,l,m,I){if(t!==null){var j=t.memoizedProps;if(Rs(j,m)&&t.ref===i.ref)if(Zi=!1,i.pendingProps=m=j,(t.lanes&I)!==0)(t.flags&131072)!==0&&(Zi=!0);else return i.lanes=t.lanes,Mn(t,i,I)}return Io(t,i,l,m,I)}function Cu(t,i,l){var m=i.pendingProps,I=m.children,j=t!==null?t.memoizedState:null;if(m.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qr(Ss,sn),sn|=l;else{if((l&1073741824)===0)return t=j!==null?j.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,Qr(Ss,sn),sn|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=j!==null?j.baseLanes:l,Qr(Ss,sn),sn|=m}else j!==null?(m=j.baseLanes|l,i.memoizedState=null):m=l,Qr(Ss,sn),sn|=m;return $i(t,i,I,l),i.child}function Au(t,i){var l=i.ref;(t===null&&l!==null||t!==null&&t.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function Io(t,i,l,m,I){var j=Yi(l)?qn:ji.current;return j=fs(i,j),xs(i,I),l=So(t,i,l,m,j,I),m=Eo(),t!==null&&!Zi?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~I,Mn(t,i,I)):(ti&&m&&so(i),i.flags|=1,$i(t,i,l,I),i.child)}function Tu(t,i,l,m,I){if(Yi(l)){var j=!0;na(i)}else j=!1;if(xs(i,I),i.stateNode===null)ba(t,i),mu(i,l,m),Po(i,l,m,I),m=!0;else if(t===null){var ie=i.stateNode,Te=i.memoizedProps;ie.props=Te;var Le=ie.context,Qe=l.contextType;typeof Qe=="object"&&Qe!==null?Qe=un(Qe):(Qe=Yi(l)?qn:ji.current,Qe=fs(i,Qe));var xt=l.getDerivedStateFromProps,bt=typeof xt=="function"||typeof ie.getSnapshotBeforeUpdate=="function";bt||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(Te!==m||Le!==Qe)&&gu(i,ie,m,Qe),Ln=!1;var vt=i.memoizedState;ie.state=vt,fa(i,m,ie,I),Le=i.memoizedState,Te!==m||vt!==Le||Qi.current||Ln?(typeof xt=="function"&&(Mo(i,l,xt,m),Le=i.memoizedState),(Te=Ln||pu(i,l,Te,m,vt,Le,Qe))?(bt||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(i.flags|=4194308)):(typeof ie.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=Le),ie.props=m,ie.state=Le,ie.context=Qe,m=Te):(typeof ie.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{ie=i.stateNode,Gl(t,i),Te=i.memoizedProps,Qe=i.type===i.elementType?Te:mn(i.type,Te),ie.props=Qe,bt=i.pendingProps,vt=ie.context,Le=l.contextType,typeof Le=="object"&&Le!==null?Le=un(Le):(Le=Yi(l)?qn:ji.current,Le=fs(i,Le));var jt=l.getDerivedStateFromProps;(xt=typeof jt=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(Te!==bt||vt!==Le)&&gu(i,ie,m,Le),Ln=!1,vt=i.memoizedState,ie.state=vt,fa(i,m,ie,I);var $t=i.memoizedState;Te!==bt||vt!==$t||Qi.current||Ln?(typeof jt=="function"&&(Mo(i,l,jt,m),$t=i.memoizedState),(Qe=Ln||pu(i,l,Qe,m,vt,$t,Le)||!1)?(xt||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(m,$t,Le),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(m,$t,Le)),typeof ie.componentDidUpdate=="function"&&(i.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof ie.componentDidUpdate!="function"||Te===t.memoizedProps&&vt===t.memoizedState||(i.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||Te===t.memoizedProps&&vt===t.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=$t),ie.props=m,ie.state=$t,ie.context=Le,m=Qe):(typeof ie.componentDidUpdate!="function"||Te===t.memoizedProps&&vt===t.memoizedState||(i.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||Te===t.memoizedProps&&vt===t.memoizedState||(i.flags|=1024),m=!1)}return Oo(t,i,l,m,j,I)}function Oo(t,i,l,m,I,j){Au(t,i);var ie=(i.flags&128)!==0;if(!m&&!ie)return I&&Dl(i,l,!1),Mn(t,i,j);m=i.stateNode,Fc.current=i;var Te=ie&&typeof l.getDerivedStateFromError!="function"?null:m.render();return i.flags|=1,t!==null&&ie?(i.child=vs(i,t.child,null,j),i.child=vs(i,null,Te,j)):$i(t,i,Te,j),i.memoizedState=m.state,I&&Dl(i,l,!0),i.child}function Ru(t){var i=t.stateNode;i.pendingContext?Pl(t,i.pendingContext,i.pendingContext!==i.context):i.context&&Pl(t,i.context,!1),vo(t,i.containerInfo)}function Mu(t,i,l,m,I){return gs(),uo(I),i.flags|=256,$i(t,i,l,m),i.child}var zo={dehydrated:null,treeContext:null,retryLane:0};function Lo(t){return{baseLanes:t,cachePool:null,transitions:null}}function Pu(t,i,l){var m=i.pendingProps,I=ai.current,j=!1,ie=(i.flags&128)!==0,Te;if((Te=ie)||(Te=t!==null&&t.memoizedState===null?!1:(I&2)!==0),Te?(j=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(I|=1),Qr(ai,I&1),t===null)return lo(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((i.mode&1)===0?i.lanes=1:t.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(ie=m.children,t=m.fallback,j?(m=i.mode,j=i.child,ie={mode:"hidden",children:ie},(m&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=ie):j=Oa(ie,m,0,null),t=ss(t,m,l,null),j.return=i,t.return=i,j.sibling=t,i.child=j,i.child.memoizedState=Lo(l),i.memoizedState=zo,t):Fo(i,ie));if(I=t.memoizedState,I!==null&&(Te=I.dehydrated,Te!==null))return Nc(t,i,ie,m,Te,I,l);if(j){j=m.fallback,ie=i.mode,I=t.child,Te=I.sibling;var Le={mode:"hidden",children:m.children};return(ie&1)===0&&i.child!==I?(m=i.child,m.childLanes=0,m.pendingProps=Le,i.deletions=null):(m=Gn(I,Le),m.subtreeFlags=I.subtreeFlags&14680064),Te!==null?j=Gn(Te,j):(j=ss(j,ie,l,null),j.flags|=2),j.return=i,m.return=i,m.sibling=j,i.child=m,m=j,j=i.child,ie=t.child.memoizedState,ie=ie===null?Lo(l):{baseLanes:ie.baseLanes|l,cachePool:null,transitions:ie.transitions},j.memoizedState=ie,j.childLanes=t.childLanes&~l,i.memoizedState=zo,m}return j=t.child,t=j.sibling,m=Gn(j,{mode:"visible",children:m.children}),(i.mode&1)===0&&(m.lanes=l),m.return=i,m.sibling=null,t!==null&&(l=i.deletions,l===null?(i.deletions=[t],i.flags|=16):l.push(t)),i.child=m,i.memoizedState=null,m}function Fo(t,i){return i=Oa({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function wa(t,i,l,m){return m!==null&&uo(m),vs(i,t.child,null,l),t=Fo(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Nc(t,i,l,m,I,j,ie){if(l)return i.flags&256?(i.flags&=-257,m=ko(Error(s(422))),wa(t,i,ie,m)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(j=m.fallback,I=i.mode,m=Oa({mode:"visible",children:m.children},I,0,null),j=ss(j,I,ie,null),j.flags|=2,m.return=i,j.return=i,m.sibling=j,i.child=m,(i.mode&1)!==0&&vs(i,t.child,null,ie),i.child.memoizedState=Lo(ie),i.memoizedState=zo,j);if((i.mode&1)===0)return wa(t,i,ie,null);if(I.data==="$!"){if(m=I.nextSibling&&I.nextSibling.dataset,m)var Te=m.dgst;return m=Te,j=Error(s(419)),m=ko(j,m,void 0),wa(t,i,ie,m)}if(Te=(ie&t.childLanes)!==0,Zi||Te){if(m=Pi,m!==null){switch(ie&-ie){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}I=(I&(m.suspendedLanes|ie))!==0?0:I,I!==0&&I!==j.retryLane&&(j.retryLane=I,Tn(t,I),yn(m,t,I,-1))}return Jo(),m=ko(Error(s(421))),wa(t,i,ie,m)}return I.data==="$?"?(i.flags|=128,i.child=t.child,i=Yc.bind(null,t),I._reactRetry=i,null):(t=j.treeContext,nn=Dn(I.nextSibling),rn=i,ti=!0,pn=null,t!==null&&(on[ln++]=Cn,on[ln++]=An,on[ln++]=Qn,Cn=t.id,An=t.overflow,Qn=i),i=Fo(i,m.children),i.flags|=4096,i)}function ku(t,i,l){t.lanes|=i;var m=t.alternate;m!==null&&(m.lanes|=i),po(t.return,i,l)}function No(t,i,l,m,I){var j=t.memoizedState;j===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:l,tailMode:I}:(j.isBackwards=i,j.rendering=null,j.renderingStartTime=0,j.last=m,j.tail=l,j.tailMode=I)}function Du(t,i,l){var m=i.pendingProps,I=m.revealOrder,j=m.tail;if($i(t,i,m.children,l),m=ai.current,(m&2)!==0)m=m&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ku(t,l,i);else if(t.tag===19)ku(t,l,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}m&=1}if(Qr(ai,m),(i.mode&1)===0)i.memoizedState=null;else switch(I){case"forwards":for(l=i.child,I=null;l!==null;)t=l.alternate,t!==null&&pa(t)===null&&(I=l),l=l.sibling;l=I,l===null?(I=i.child,i.child=null):(I=l.sibling,l.sibling=null),No(i,!1,I,l,j);break;case"backwards":for(l=null,I=i.child,i.child=null;I!==null;){if(t=I.alternate,t!==null&&pa(t)===null){i.child=I;break}t=I.sibling,I.sibling=l,l=I,I=t}No(i,!0,l,null,j);break;case"together":No(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ba(t,i){(i.mode&1)===0&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function Mn(t,i,l){if(t!==null&&(i.dependencies=t.dependencies),ts|=i.lanes,(l&i.childLanes)===0)return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,l=Gn(t,t.pendingProps),i.child=l,l.return=i;t.sibling!==null;)t=t.sibling,l=l.sibling=Gn(t,t.pendingProps),l.return=i;l.sibling=null}return i.child}function Vc(t,i,l){switch(i.tag){case 3:Ru(i),gs();break;case 5:$l(i);break;case 1:Yi(i.type)&&na(i);break;case 4:vo(i,i.stateNode.containerInfo);break;case 10:var m=i.type._context,I=i.memoizedProps.value;Qr(ca,m._currentValue),m._currentValue=I;break;case 13:if(m=i.memoizedState,m!==null)return m.dehydrated!==null?(Qr(ai,ai.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?Pu(t,i,l):(Qr(ai,ai.current&1),t=Mn(t,i,l),t!==null?t.sibling:null);Qr(ai,ai.current&1);break;case 19:if(m=(l&i.childLanes)!==0,(t.flags&128)!==0){if(m)return Du(t,i,l);i.flags|=128}if(I=i.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),Qr(ai,ai.current),m)break;return null;case 22:case 23:return i.lanes=0,Cu(t,i,l)}return Mn(t,i,l)}var Iu,Vo,Ou,zu;Iu=function(t,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)t.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Vo=function(){},Ou=function(t,i,l,m){var I=t.memoizedProps;if(I!==m){t=i.stateNode,Jn(_n.current);var j=null;switch(l){case"input":I=ar(t,I),m=ar(t,m),j=[];break;case"select":I=ke({},I,{value:void 0}),m=ke({},m,{value:void 0}),j=[];break;case"textarea":I=Pr(t,I),m=Pr(t,m),j=[];break;default:typeof I.onClick!="function"&&typeof m.onClick=="function"&&(t.onclick=ta)}Ot(l,m);var ie;l=null;for(Qe in I)if(!m.hasOwnProperty(Qe)&&I.hasOwnProperty(Qe)&&I[Qe]!=null)if(Qe==="style"){var Te=I[Qe];for(ie in Te)Te.hasOwnProperty(ie)&&(l||(l={}),l[ie]="")}else Qe!=="dangerouslySetInnerHTML"&&Qe!=="children"&&Qe!=="suppressContentEditableWarning"&&Qe!=="suppressHydrationWarning"&&Qe!=="autoFocus"&&(c.hasOwnProperty(Qe)?j||(j=[]):(j=j||[]).push(Qe,null));for(Qe in m){var Le=m[Qe];if(Te=I?.[Qe],m.hasOwnProperty(Qe)&&Le!==Te&&(Le!=null||Te!=null))if(Qe==="style")if(Te){for(ie in Te)!Te.hasOwnProperty(ie)||Le&&Le.hasOwnProperty(ie)||(l||(l={}),l[ie]="");for(ie in Le)Le.hasOwnProperty(ie)&&Te[ie]!==Le[ie]&&(l||(l={}),l[ie]=Le[ie])}else l||(j||(j=[]),j.push(Qe,l)),l=Le;else Qe==="dangerouslySetInnerHTML"?(Le=Le?Le.__html:void 0,Te=Te?Te.__html:void 0,Le!=null&&Te!==Le&&(j=j||[]).push(Qe,Le)):Qe==="children"?typeof Le!="string"&&typeof Le!="number"||(j=j||[]).push(Qe,""+Le):Qe!=="suppressContentEditableWarning"&&Qe!=="suppressHydrationWarning"&&(c.hasOwnProperty(Qe)?(Le!=null&&Qe==="onScroll"&&Zr("scroll",t),j||Te===Le||(j=[])):(j=j||[]).push(Qe,Le))}l&&(j=j||[]).push("style",l);var Qe=j;(i.updateQueue=Qe)&&(i.flags|=4)}},zu=function(t,i,l,m){l!==m&&(i.flags|=4)};function Gs(t,i){if(!ti)switch(t.tailMode){case"hidden":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var m=null;l!==null;)l.alternate!==null&&(m=l),l=l.sibling;m===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:m.sibling=null}}function Ui(t){var i=t.alternate!==null&&t.alternate.child===t.child,l=0,m=0;if(i)for(var I=t.child;I!==null;)l|=I.lanes|I.childLanes,m|=I.subtreeFlags&14680064,m|=I.flags&14680064,I.return=t,I=I.sibling;else for(I=t.child;I!==null;)l|=I.lanes|I.childLanes,m|=I.subtreeFlags,m|=I.flags,I.return=t,I=I.sibling;return t.subtreeFlags|=m,t.childLanes=l,i}function jc(t,i,l){var m=i.pendingProps;switch(ao(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ui(i),null;case 1:return Yi(i.type)&&ia(),Ui(i),null;case 3:return m=i.stateNode,_s(),Jr(Qi),Jr(ji),_o(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(t===null||t.child===null)&&(la(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,pn!==null&&(Qo(pn),pn=null))),Vo(t,i),Ui(i),null;case 5:yo(i);var I=Jn(Ns.current);if(l=i.type,t!==null&&i.stateNode!=null)Ou(t,i,l,m,I),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!m){if(i.stateNode===null)throw Error(s(166));return Ui(i),null}if(t=Jn(_n.current),la(i)){m=i.stateNode,l=i.type;var j=i.memoizedProps;switch(m[xn]=i,m[Is]=j,t=(i.mode&1)!==0,l){case"dialog":Zr("cancel",m),Zr("close",m);break;case"iframe":case"object":case"embed":Zr("load",m);break;case"video":case"audio":for(I=0;I<Ps.length;I++)Zr(Ps[I],m);break;case"source":Zr("error",m);break;case"img":case"image":case"link":Zr("error",m),Zr("load",m);break;case"details":Zr("toggle",m);break;case"input":or(m,j),Zr("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!j.multiple},Zr("invalid",m);break;case"textarea":Or(m,j),Zr("invalid",m)}Ot(l,j),I=null;for(var ie in j)if(j.hasOwnProperty(ie)){var Te=j[ie];ie==="children"?typeof Te=="string"?m.textContent!==Te&&(j.suppressHydrationWarning!==!0&&ea(m.textContent,Te,t),I=["children",Te]):typeof Te=="number"&&m.textContent!==""+Te&&(j.suppressHydrationWarning!==!0&&ea(m.textContent,Te,t),I=["children",""+Te]):c.hasOwnProperty(ie)&&Te!=null&&ie==="onScroll"&&Zr("scroll",m)}switch(l){case"input":ot(m),pr(m,j,!0);break;case"textarea":ot(m),wi(m);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(m.onclick=ta)}m=I,i.updateQueue=m,m!==null&&(i.flags|=4)}else{ie=I.nodeType===9?I:I.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Hi(l)),t==="http://www.w3.org/1999/xhtml"?l==="script"?(t=ie.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof m.is=="string"?t=ie.createElement(l,{is:m.is}):(t=ie.createElement(l),l==="select"&&(ie=t,m.multiple?ie.multiple=!0:m.size&&(ie.size=m.size))):t=ie.createElementNS(t,l),t[xn]=i,t[Is]=m,Iu(t,i,!1,!1),i.stateNode=t;e:{switch(ie=mr(l,m),l){case"dialog":Zr("cancel",t),Zr("close",t),I=m;break;case"iframe":case"object":case"embed":Zr("load",t),I=m;break;case"video":case"audio":for(I=0;I<Ps.length;I++)Zr(Ps[I],t);I=m;break;case"source":Zr("error",t),I=m;break;case"img":case"image":case"link":Zr("error",t),Zr("load",t),I=m;break;case"details":Zr("toggle",t),I=m;break;case"input":or(t,m),I=ar(t,m),Zr("invalid",t);break;case"option":I=m;break;case"select":t._wrapperState={wasMultiple:!!m.multiple},I=ke({},m,{value:void 0}),Zr("invalid",t);break;case"textarea":Or(t,m),I=Pr(t,m),Zr("invalid",t);break;default:I=m}Ot(l,I),Te=I;for(j in Te)if(Te.hasOwnProperty(j)){var Le=Te[j];j==="style"?zt(t,Le):j==="dangerouslySetInnerHTML"?(Le=Le?Le.__html:void 0,Le!=null&&Oe(t,Le)):j==="children"?typeof Le=="string"?(l!=="textarea"||Le!=="")&&dt(t,Le):typeof Le=="number"&&dt(t,""+Le):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(c.hasOwnProperty(j)?Le!=null&&j==="onScroll"&&Zr("scroll",t):Le!=null&&S(t,j,Le,ie))}switch(l){case"input":ot(t),pr(t,m,!1);break;case"textarea":ot(t),wi(t);break;case"option":m.value!=null&&t.setAttribute("value",""+Fe(m.value));break;case"select":t.multiple=!!m.multiple,j=m.value,j!=null?fi(t,!!m.multiple,j,!1):m.defaultValue!=null&&fi(t,!!m.multiple,m.defaultValue,!0);break;default:typeof I.onClick=="function"&&(t.onclick=ta)}switch(l){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ui(i),null;case 6:if(t&&i.stateNode!=null)zu(t,i,t.memoizedProps,m);else{if(typeof m!="string"&&i.stateNode===null)throw Error(s(166));if(l=Jn(Ns.current),Jn(_n.current),la(i)){if(m=i.stateNode,l=i.memoizedProps,m[xn]=i,(j=m.nodeValue!==l)&&(t=rn,t!==null))switch(t.tag){case 3:ea(m.nodeValue,l,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ea(m.nodeValue,l,(t.mode&1)!==0)}j&&(i.flags|=4)}else m=(l.nodeType===9?l:l.ownerDocument).createTextNode(m),m[xn]=i,i.stateNode=m}return Ui(i),null;case 13:if(Jr(ai),m=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ti&&nn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Nl(),gs(),i.flags|=98560,j=!1;else if(j=la(i),m!==null&&m.dehydrated!==null){if(t===null){if(!j)throw Error(s(318));if(j=i.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(s(317));j[xn]=i}else gs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ui(i),j=!1}else pn!==null&&(Qo(pn),pn=null),j=!0;if(!j)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(m=m!==null,m!==(t!==null&&t.memoizedState!==null)&&m&&(i.child.flags|=8192,(i.mode&1)!==0&&(t===null||(ai.current&1)!==0?Ei===0&&(Ei=3):Jo())),i.updateQueue!==null&&(i.flags|=4),Ui(i),null);case 4:return _s(),Vo(t,i),t===null&&ks(i.stateNode.containerInfo),Ui(i),null;case 10:return fo(i.type._context),Ui(i),null;case 17:return Yi(i.type)&&ia(),Ui(i),null;case 19:if(Jr(ai),j=i.memoizedState,j===null)return Ui(i),null;if(m=(i.flags&128)!==0,ie=j.rendering,ie===null)if(m)Gs(j,!1);else{if(Ei!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(ie=pa(t),ie!==null){for(i.flags|=128,Gs(j,!1),m=ie.updateQueue,m!==null&&(i.updateQueue=m,i.flags|=4),i.subtreeFlags=0,m=l,l=i.child;l!==null;)j=l,t=m,j.flags&=14680066,ie=j.alternate,ie===null?(j.childLanes=0,j.lanes=t,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=ie.childLanes,j.lanes=ie.lanes,j.child=ie.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=ie.memoizedProps,j.memoizedState=ie.memoizedState,j.updateQueue=ie.updateQueue,j.type=ie.type,t=ie.dependencies,j.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),l=l.sibling;return Qr(ai,ai.current&1|2),i.child}t=t.sibling}j.tail!==null&&lt()>Es&&(i.flags|=128,m=!0,Gs(j,!1),i.lanes=4194304)}else{if(!m)if(t=pa(ie),t!==null){if(i.flags|=128,m=!0,l=t.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),Gs(j,!0),j.tail===null&&j.tailMode==="hidden"&&!ie.alternate&&!ti)return Ui(i),null}else 2*lt()-j.renderingStartTime>Es&&l!==1073741824&&(i.flags|=128,m=!0,Gs(j,!1),i.lanes=4194304);j.isBackwards?(ie.sibling=i.child,i.child=ie):(l=j.last,l!==null?l.sibling=ie:i.child=ie,j.last=ie)}return j.tail!==null?(i=j.tail,j.rendering=i,j.tail=i.sibling,j.renderingStartTime=lt(),i.sibling=null,l=ai.current,Qr(ai,m?l&1|2:l&1),i):(Ui(i),null);case 22:case 23:return Zo(),m=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==m&&(i.flags|=8192),m&&(i.mode&1)!==0?(sn&1073741824)!==0&&(Ui(i),i.subtreeFlags&6&&(i.flags|=8192)):Ui(i),null;case 24:return null;case 25:return null}throw Error(s(156,i.tag))}function Bc(t,i){switch(ao(i),i.tag){case 1:return Yi(i.type)&&ia(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return _s(),Jr(Qi),Jr(ji),_o(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 5:return yo(i),null;case 13:if(Jr(ai),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));gs()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Jr(ai),null;case 4:return _s(),null;case 10:return fo(i.type._context),null;case 22:case 23:return Zo(),null;case 24:return null;default:return null}}var Sa=!1,Gi=!1,Uc=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function bs(t,i){var l=t.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(m){di(t,i,m)}else l.current=null}function jo(t,i,l){try{l()}catch(m){di(t,i,m)}}var Lu=!1;function Gc(t,i){if(Ya=et,t=pl(),Ga(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var m=l.getSelection&&l.getSelection();if(m&&m.rangeCount!==0){l=m.anchorNode;var I=m.anchorOffset,j=m.focusNode;m=m.focusOffset;try{l.nodeType,j.nodeType}catch{l=null;break e}var ie=0,Te=-1,Le=-1,Qe=0,xt=0,bt=t,vt=null;t:for(;;){for(var jt;bt!==l||I!==0&&bt.nodeType!==3||(Te=ie+I),bt!==j||m!==0&&bt.nodeType!==3||(Le=ie+m),bt.nodeType===3&&(ie+=bt.nodeValue.length),(jt=bt.firstChild)!==null;)vt=bt,bt=jt;for(;;){if(bt===t)break t;if(vt===l&&++Qe===I&&(Te=ie),vt===j&&++xt===m&&(Le=ie),(jt=bt.nextSibling)!==null)break;bt=vt,vt=bt.parentNode}bt=jt}l=Te===-1||Le===-1?null:{start:Te,end:Le}}else l=null}l=l||{start:0,end:0}}else l=null;for(Za={focusedElem:t,selectionRange:l},et=!1,Gt=i;Gt!==null;)if(i=Gt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Gt=t;else for(;Gt!==null;){i=Gt;try{var $t=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if($t!==null){var Kt=$t.memoizedProps,mi=$t.memoizedState,Ge=i.stateNode,je=Ge.getSnapshotBeforeUpdate(i.elementType===i.type?Kt:mn(i.type,Kt),mi);Ge.__reactInternalSnapshotBeforeUpdate=je}break;case 3:var Ke=i.stateNode.containerInfo;Ke.nodeType===1?Ke.textContent="":Ke.nodeType===9&&Ke.documentElement&&Ke.removeChild(Ke.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Tt){di(i,i.return,Tt)}if(t=i.sibling,t!==null){t.return=i.return,Gt=t;break}Gt=i.return}return $t=Lu,Lu=!1,$t}function Hs(t,i,l){var m=i.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var I=m=m.next;do{if((I.tag&t)===t){var j=I.destroy;I.destroy=void 0,j!==void 0&&jo(i,l,j)}I=I.next}while(I!==m)}}function Ea(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&t)===t){var m=l.create;l.destroy=m()}l=l.next}while(l!==i)}}function Bo(t){var i=t.ref;if(i!==null){var l=t.stateNode;t.tag,t=l,typeof i=="function"?i(t):i.current=t}}function Fu(t){var i=t.alternate;i!==null&&(t.alternate=null,Fu(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[xn],delete i[Is],delete i[ro],delete i[Cc],delete i[Ac])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Nu(t){return t.tag===5||t.tag===3||t.tag===4}function Vu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Nu(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Uo(t,i,l){var m=t.tag;if(m===5||m===6)t=t.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(t,i):l.insertBefore(t,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(t,l)):(i=l,i.appendChild(t)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=ta));else if(m!==4&&(t=t.child,t!==null))for(Uo(t,i,l),t=t.sibling;t!==null;)Uo(t,i,l),t=t.sibling}function Go(t,i,l){var m=t.tag;if(m===5||m===6)t=t.stateNode,i?l.insertBefore(t,i):l.appendChild(t);else if(m!==4&&(t=t.child,t!==null))for(Go(t,i,l),t=t.sibling;t!==null;)Go(t,i,l),t=t.sibling}var Li=null,gn=!1;function Nn(t,i,l){for(l=l.child;l!==null;)ju(t,i,l),l=l.sibling}function ju(t,i,l){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(Cr,l)}catch{}switch(l.tag){case 5:Gi||bs(l,i);case 6:var m=Li,I=gn;Li=null,Nn(t,i,l),Li=m,gn=I,Li!==null&&(gn?(t=Li,l=l.stateNode,t.nodeType===8?t.parentNode.removeChild(l):t.removeChild(l)):Li.removeChild(l.stateNode));break;case 18:Li!==null&&(gn?(t=Li,l=l.stateNode,t.nodeType===8?to(t.parentNode,l):t.nodeType===1&&to(t,l),pt(t)):to(Li,l.stateNode));break;case 4:m=Li,I=gn,Li=l.stateNode.containerInfo,gn=!0,Nn(t,i,l),Li=m,gn=I;break;case 0:case 11:case 14:case 15:if(!Gi&&(m=l.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){I=m=m.next;do{var j=I,ie=j.destroy;j=j.tag,ie!==void 0&&((j&2)!==0||(j&4)!==0)&&jo(l,i,ie),I=I.next}while(I!==m)}Nn(t,i,l);break;case 1:if(!Gi&&(bs(l,i),m=l.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=l.memoizedProps,m.state=l.memoizedState,m.componentWillUnmount()}catch(Te){di(l,i,Te)}Nn(t,i,l);break;case 21:Nn(t,i,l);break;case 22:l.mode&1?(Gi=(m=Gi)||l.memoizedState!==null,Nn(t,i,l),Gi=m):Nn(t,i,l);break;default:Nn(t,i,l)}}function Bu(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var l=t.stateNode;l===null&&(l=t.stateNode=new Uc),i.forEach(function(m){var I=Zc.bind(null,t,m);l.has(m)||(l.add(m),m.then(I,I))})}}function vn(t,i){var l=i.deletions;if(l!==null)for(var m=0;m<l.length;m++){var I=l[m];try{var j=t,ie=i,Te=ie;e:for(;Te!==null;){switch(Te.tag){case 5:Li=Te.stateNode,gn=!1;break e;case 3:Li=Te.stateNode.containerInfo,gn=!0;break e;case 4:Li=Te.stateNode.containerInfo,gn=!0;break e}Te=Te.return}if(Li===null)throw Error(s(160));ju(j,ie,I),Li=null,gn=!1;var Le=I.alternate;Le!==null&&(Le.return=null),I.return=null}catch(Qe){di(I,i,Qe)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Uu(i,t),i=i.sibling}function Uu(t,i){var l=t.alternate,m=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vn(i,t),bn(t),m&4){try{Hs(3,t,t.return),Ea(3,t)}catch(Kt){di(t,t.return,Kt)}try{Hs(5,t,t.return)}catch(Kt){di(t,t.return,Kt)}}break;case 1:vn(i,t),bn(t),m&512&&l!==null&&bs(l,l.return);break;case 5:if(vn(i,t),bn(t),m&512&&l!==null&&bs(l,l.return),t.flags&32){var I=t.stateNode;try{dt(I,"")}catch(Kt){di(t,t.return,Kt)}}if(m&4&&(I=t.stateNode,I!=null)){var j=t.memoizedProps,ie=l!==null?l.memoizedProps:j,Te=t.type,Le=t.updateQueue;if(t.updateQueue=null,Le!==null)try{Te==="input"&&j.type==="radio"&&j.name!=null&&Mr(I,j),mr(Te,ie);var Qe=mr(Te,j);for(ie=0;ie<Le.length;ie+=2){var xt=Le[ie],bt=Le[ie+1];xt==="style"?zt(I,bt):xt==="dangerouslySetInnerHTML"?Oe(I,bt):xt==="children"?dt(I,bt):S(I,xt,bt,Qe)}switch(Te){case"input":Er(I,j);break;case"textarea":Di(I,j);break;case"select":var vt=I._wrapperState.wasMultiple;I._wrapperState.wasMultiple=!!j.multiple;var jt=j.value;jt!=null?fi(I,!!j.multiple,jt,!1):vt!==!!j.multiple&&(j.defaultValue!=null?fi(I,!!j.multiple,j.defaultValue,!0):fi(I,!!j.multiple,j.multiple?[]:"",!1))}I[Is]=j}catch(Kt){di(t,t.return,Kt)}}break;case 6:if(vn(i,t),bn(t),m&4){if(t.stateNode===null)throw Error(s(162));I=t.stateNode,j=t.memoizedProps;try{I.nodeValue=j}catch(Kt){di(t,t.return,Kt)}}break;case 3:if(vn(i,t),bn(t),m&4&&l!==null&&l.memoizedState.isDehydrated)try{pt(i.containerInfo)}catch(Kt){di(t,t.return,Kt)}break;case 4:vn(i,t),bn(t);break;case 13:vn(i,t),bn(t),I=t.child,I.flags&8192&&(j=I.memoizedState!==null,I.stateNode.isHidden=j,!j||I.alternate!==null&&I.alternate.memoizedState!==null||($o=lt())),m&4&&Bu(t);break;case 22:if(xt=l!==null&&l.memoizedState!==null,t.mode&1?(Gi=(Qe=Gi)||xt,vn(i,t),Gi=Qe):vn(i,t),bn(t),m&8192){if(Qe=t.memoizedState!==null,(t.stateNode.isHidden=Qe)&&!xt&&(t.mode&1)!==0)for(Gt=t,xt=t.child;xt!==null;){for(bt=Gt=xt;Gt!==null;){switch(vt=Gt,jt=vt.child,vt.tag){case 0:case 11:case 14:case 15:Hs(4,vt,vt.return);break;case 1:bs(vt,vt.return);var $t=vt.stateNode;if(typeof $t.componentWillUnmount=="function"){m=vt,l=vt.return;try{i=m,$t.props=i.memoizedProps,$t.state=i.memoizedState,$t.componentWillUnmount()}catch(Kt){di(m,l,Kt)}}break;case 5:bs(vt,vt.return);break;case 22:if(vt.memoizedState!==null){Wu(bt);continue}}jt!==null?(jt.return=vt,Gt=jt):Wu(bt)}xt=xt.sibling}e:for(xt=null,bt=t;;){if(bt.tag===5){if(xt===null){xt=bt;try{I=bt.stateNode,Qe?(j=I.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(Te=bt.stateNode,Le=bt.memoizedProps.style,ie=Le!=null&&Le.hasOwnProperty("display")?Le.display:null,Te.style.display=ht("display",ie))}catch(Kt){di(t,t.return,Kt)}}}else if(bt.tag===6){if(xt===null)try{bt.stateNode.nodeValue=Qe?"":bt.memoizedProps}catch(Kt){di(t,t.return,Kt)}}else if((bt.tag!==22&&bt.tag!==23||bt.memoizedState===null||bt===t)&&bt.child!==null){bt.child.return=bt,bt=bt.child;continue}if(bt===t)break e;for(;bt.sibling===null;){if(bt.return===null||bt.return===t)break e;xt===bt&&(xt=null),bt=bt.return}xt===bt&&(xt=null),bt.sibling.return=bt.return,bt=bt.sibling}}break;case 19:vn(i,t),bn(t),m&4&&Bu(t);break;case 21:break;default:vn(i,t),bn(t)}}function bn(t){var i=t.flags;if(i&2){try{e:{for(var l=t.return;l!==null;){if(Nu(l)){var m=l;break e}l=l.return}throw Error(s(160))}switch(m.tag){case 5:var I=m.stateNode;m.flags&32&&(dt(I,""),m.flags&=-33);var j=Vu(t);Go(t,j,I);break;case 3:case 4:var ie=m.stateNode.containerInfo,Te=Vu(t);Uo(t,Te,ie);break;default:throw Error(s(161))}}catch(Le){di(t,t.return,Le)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Hc(t,i,l){Gt=t,Gu(t)}function Gu(t,i,l){for(var m=(t.mode&1)!==0;Gt!==null;){var I=Gt,j=I.child;if(I.tag===22&&m){var ie=I.memoizedState!==null||Sa;if(!ie){var Te=I.alternate,Le=Te!==null&&Te.memoizedState!==null||Gi;Te=Sa;var Qe=Gi;if(Sa=ie,(Gi=Le)&&!Qe)for(Gt=I;Gt!==null;)ie=Gt,Le=ie.child,ie.tag===22&&ie.memoizedState!==null?$u(I):Le!==null?(Le.return=ie,Gt=Le):$u(I);for(;j!==null;)Gt=j,Gu(j),j=j.sibling;Gt=I,Sa=Te,Gi=Qe}Hu(t)}else(I.subtreeFlags&8772)!==0&&j!==null?(j.return=I,Gt=j):Hu(t)}}function Hu(t){for(;Gt!==null;){var i=Gt;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Gi||Ea(5,i);break;case 1:var m=i.stateNode;if(i.flags&4&&!Gi)if(l===null)m.componentDidMount();else{var I=i.elementType===i.type?l.memoizedProps:mn(i.type,l.memoizedProps);m.componentDidUpdate(I,l.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var j=i.updateQueue;j!==null&&Wl(i,j,m);break;case 3:var ie=i.updateQueue;if(ie!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}Wl(i,ie,l)}break;case 5:var Te=i.stateNode;if(l===null&&i.flags&4){l=Te;var Le=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":Le.autoFocus&&l.focus();break;case"img":Le.src&&(l.src=Le.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var Qe=i.alternate;if(Qe!==null){var xt=Qe.memoizedState;if(xt!==null){var bt=xt.dehydrated;bt!==null&&pt(bt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Gi||i.flags&512&&Bo(i)}catch(vt){di(i,i.return,vt)}}if(i===t){Gt=null;break}if(l=i.sibling,l!==null){l.return=i.return,Gt=l;break}Gt=i.return}}function Wu(t){for(;Gt!==null;){var i=Gt;if(i===t){Gt=null;break}var l=i.sibling;if(l!==null){l.return=i.return,Gt=l;break}Gt=i.return}}function $u(t){for(;Gt!==null;){var i=Gt;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{Ea(4,i)}catch(Le){di(i,l,Le)}break;case 1:var m=i.stateNode;if(typeof m.componentDidMount=="function"){var I=i.return;try{m.componentDidMount()}catch(Le){di(i,I,Le)}}var j=i.return;try{Bo(i)}catch(Le){di(i,j,Le)}break;case 5:var ie=i.return;try{Bo(i)}catch(Le){di(i,ie,Le)}}}catch(Le){di(i,i.return,Le)}if(i===t){Gt=null;break}var Te=i.sibling;if(Te!==null){Te.return=i.return,Gt=Te;break}Gt=i.return}}var Wc=Math.ceil,Ca=F.ReactCurrentDispatcher,Ho=F.ReactCurrentOwner,hn=F.ReactCurrentBatchConfig,Nr=0,Pi=null,_i=null,Fi=0,sn=0,Ss=In(0),Ei=0,Ws=null,ts=0,Aa=0,Wo=0,$s=null,Ji=null,$o=0,Es=1/0,Pn=null,Ta=!1,Xo=null,Vn=null,Ra=!1,jn=null,Ma=0,Xs=0,Ko=null,Pa=-1,ka=0;function Xi(){return(Nr&6)!==0?lt():Pa!==-1?Pa:Pa=lt()}function Bn(t){return(t.mode&1)===0?1:(Nr&2)!==0&&Fi!==0?Fi&-Fi:Rc.transition!==null?(ka===0&&(ka=T()),ka):(t=D,t!==0||(t=window.event,t=t===void 0?16:Pt(t.type)),t)}function yn(t,i,l,m){if(50<Xs)throw Xs=0,Ko=null,Error(s(185));M(t,l,m),((Nr&2)===0||t!==Pi)&&(t===Pi&&((Nr&2)===0&&(Aa|=l),Ei===4&&Un(t,Fi)),en(t,m),l===1&&Nr===0&&(i.mode&1)===0&&(Es=lt()+500,sa&&zn()))}function en(t,i){var l=t.callbackNode;h(t,i);var m=n(t,t===Pi?Fi:0);if(m===0)l!==null&&Ve(l),t.callbackNode=null,t.callbackPriority=0;else if(i=m&-m,t.callbackPriority!==i){if(l!=null&&Ve(l),i===1)t.tag===0?Tc(Ku.bind(null,t)):Il(Ku.bind(null,t)),Sc(function(){(Nr&6)===0&&zn()}),l=null;else{switch(z(m)){case 1:l=Rt;break;case 4:l=kt;break;case 16:l=Lt;break;case 536870912:l=Yt;break;default:l=Lt}l=rc(l,Xu.bind(null,t))}t.callbackPriority=i,t.callbackNode=l}}function Xu(t,i){if(Pa=-1,ka=0,(Nr&6)!==0)throw Error(s(327));var l=t.callbackNode;if(Cs()&&t.callbackNode!==l)return null;var m=n(t,t===Pi?Fi:0);if(m===0)return null;if((m&30)!==0||(m&t.expiredLanes)!==0||i)i=Da(t,m);else{i=m;var I=Nr;Nr|=2;var j=Qu();(Pi!==t||Fi!==i)&&(Pn=null,Es=lt()+500,is(t,i));do try{Kc();break}catch(Te){qu(t,Te)}while(!0);ho(),Ca.current=j,Nr=I,_i!==null?i=0:(Pi=null,Fi=0,i=Ei)}if(i!==0){if(i===2&&(I=f(t),I!==0&&(m=I,i=qo(t,I))),i===1)throw l=Ws,is(t,0),Un(t,m),en(t,lt()),l;if(i===6)Un(t,m);else{if(I=t.current.alternate,(m&30)===0&&!$c(I)&&(i=Da(t,m),i===2&&(j=f(t),j!==0&&(m=j,i=qo(t,j))),i===1))throw l=Ws,is(t,0),Un(t,m),en(t,lt()),l;switch(t.finishedWork=I,t.finishedLanes=m,i){case 0:case 1:throw Error(s(345));case 2:ns(t,Ji,Pn);break;case 3:if(Un(t,m),(m&130023424)===m&&(i=$o+500-lt(),10<i)){if(n(t,0)!==0)break;if(I=t.suspendedLanes,(I&m)!==m){Xi(),t.pingedLanes|=t.suspendedLanes&I;break}t.timeoutHandle=eo(ns.bind(null,t,Ji,Pn),i);break}ns(t,Ji,Pn);break;case 4:if(Un(t,m),(m&4194240)===m)break;for(i=t.eventTimes,I=-1;0<m;){var ie=31-_r(m);j=1<<ie,ie=i[ie],ie>I&&(I=ie),m&=~j}if(m=I,m=lt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*Wc(m/1960))-m,10<m){t.timeoutHandle=eo(ns.bind(null,t,Ji,Pn),m);break}ns(t,Ji,Pn);break;case 5:ns(t,Ji,Pn);break;default:throw Error(s(329))}}}return en(t,lt()),t.callbackNode===l?Xu.bind(null,t):null}function qo(t,i){var l=$s;return t.current.memoizedState.isDehydrated&&(is(t,i).flags|=256),t=Da(t,i),t!==2&&(i=Ji,Ji=l,i!==null&&Qo(i)),t}function Qo(t){Ji===null?Ji=t:Ji.push.apply(Ji,t)}function $c(t){for(var i=t;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var m=0;m<l.length;m++){var I=l[m],j=I.getSnapshot;I=I.value;try{if(!fn(j(),I))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Un(t,i){for(i&=~Wo,i&=~Aa,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var l=31-_r(i),m=1<<l;t[l]=-1,i&=~m}}function Ku(t){if((Nr&6)!==0)throw Error(s(327));Cs();var i=n(t,0);if((i&1)===0)return en(t,lt()),null;var l=Da(t,i);if(t.tag!==0&&l===2){var m=f(t);m!==0&&(i=m,l=qo(t,m))}if(l===1)throw l=Ws,is(t,0),Un(t,i),en(t,lt()),l;if(l===6)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,ns(t,Ji,Pn),en(t,lt()),null}function Yo(t,i){var l=Nr;Nr|=1;try{return t(i)}finally{Nr=l,Nr===0&&(Es=lt()+500,sa&&zn())}}function rs(t){jn!==null&&jn.tag===0&&(Nr&6)===0&&Cs();var i=Nr;Nr|=1;var l=hn.transition,m=D;try{if(hn.transition=null,D=1,t)return t()}finally{D=m,hn.transition=l,Nr=i,(Nr&6)===0&&zn()}}function Zo(){sn=Ss.current,Jr(Ss)}function is(t,i){t.finishedWork=null,t.finishedLanes=0;var l=t.timeoutHandle;if(l!==-1&&(t.timeoutHandle=-1,bc(l)),_i!==null)for(l=_i.return;l!==null;){var m=l;switch(ao(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&ia();break;case 3:_s(),Jr(Qi),Jr(ji),_o();break;case 5:yo(m);break;case 4:_s();break;case 13:Jr(ai);break;case 19:Jr(ai);break;case 10:fo(m.type._context);break;case 22:case 23:Zo()}l=l.return}if(Pi=t,_i=t=Gn(t.current,null),Fi=sn=i,Ei=0,Ws=null,Wo=Aa=ts=0,Ji=$s=null,Zn!==null){for(i=0;i<Zn.length;i++)if(l=Zn[i],m=l.interleaved,m!==null){l.interleaved=null;var I=m.next,j=l.pending;if(j!==null){var ie=j.next;j.next=I,m.next=ie}l.pending=m}Zn=null}return t}function qu(t,i){do{var l=_i;try{if(ho(),ma.current=xa,ga){for(var m=oi.memoizedState;m!==null;){var I=m.queue;I!==null&&(I.pending=null),m=m.next}ga=!1}if(es=0,Mi=Si=oi=null,Vs=!1,js=0,Ho.current=null,l===null||l.return===null){Ei=1,Ws=i,_i=null;break}e:{var j=t,ie=l.return,Te=l,Le=i;if(i=Fi,Te.flags|=32768,Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var Qe=Le,xt=Te,bt=xt.tag;if((xt.mode&1)===0&&(bt===0||bt===11||bt===15)){var vt=xt.alternate;vt?(xt.updateQueue=vt.updateQueue,xt.memoizedState=vt.memoizedState,xt.lanes=vt.lanes):(xt.updateQueue=null,xt.memoizedState=null)}var jt=_u(ie);if(jt!==null){jt.flags&=-257,wu(jt,ie,Te,j,i),jt.mode&1&&xu(j,Qe,i),i=jt,Le=Qe;var $t=i.updateQueue;if($t===null){var Kt=new Set;Kt.add(Le),i.updateQueue=Kt}else $t.add(Le);break e}else{if((i&1)===0){xu(j,Qe,i),Jo();break e}Le=Error(s(426))}}else if(ti&&Te.mode&1){var mi=_u(ie);if(mi!==null){(mi.flags&65536)===0&&(mi.flags|=256),wu(mi,ie,Te,j,i),uo(ws(Le,Te));break e}}j=Le=ws(Le,Te),Ei!==4&&(Ei=2),$s===null?$s=[j]:$s.push(j),j=ie;do{switch(j.tag){case 3:j.flags|=65536,i&=-i,j.lanes|=i;var Ge=vu(j,Le,i);Hl(j,Ge);break e;case 1:Te=Le;var je=j.type,Ke=j.stateNode;if((j.flags&128)===0&&(typeof je.getDerivedStateFromError=="function"||Ke!==null&&typeof Ke.componentDidCatch=="function"&&(Vn===null||!Vn.has(Ke)))){j.flags|=65536,i&=-i,j.lanes|=i;var Tt=yu(j,Te,i);Hl(j,Tt);break e}}j=j.return}while(j!==null)}Zu(l)}catch(Qt){i=Qt,_i===l&&l!==null&&(_i=l=l.return);continue}break}while(!0)}function Qu(){var t=Ca.current;return Ca.current=xa,t===null?xa:t}function Jo(){(Ei===0||Ei===3||Ei===2)&&(Ei=4),Pi===null||(ts&268435455)===0&&(Aa&268435455)===0||Un(Pi,Fi)}function Da(t,i){var l=Nr;Nr|=2;var m=Qu();(Pi!==t||Fi!==i)&&(Pn=null,is(t,i));do try{Xc();break}catch(I){qu(t,I)}while(!0);if(ho(),Nr=l,Ca.current=m,_i!==null)throw Error(s(261));return Pi=null,Fi=0,Ei}function Xc(){for(;_i!==null;)Yu(_i)}function Kc(){for(;_i!==null&&!ze();)Yu(_i)}function Yu(t){var i=tc(t.alternate,t,sn);t.memoizedProps=t.pendingProps,i===null?Zu(t):_i=i,Ho.current=null}function Zu(t){var i=t;do{var l=i.alternate;if(t=i.return,(i.flags&32768)===0){if(l=jc(l,i,sn),l!==null){_i=l;return}}else{if(l=Bc(l,i),l!==null){l.flags&=32767,_i=l;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ei=6,_i=null;return}}if(i=i.sibling,i!==null){_i=i;return}_i=i=t}while(i!==null);Ei===0&&(Ei=5)}function ns(t,i,l){var m=D,I=hn.transition;try{hn.transition=null,D=1,qc(t,i,l,m)}finally{hn.transition=I,D=m}return null}function qc(t,i,l,m){do Cs();while(jn!==null);if((Nr&6)!==0)throw Error(s(327));l=t.finishedWork;var I=t.finishedLanes;if(l===null)return null;if(t.finishedWork=null,t.finishedLanes=0,l===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var j=l.lanes|l.childLanes;if(P(t,j),t===Pi&&(_i=Pi=null,Fi=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Ra||(Ra=!0,rc(Lt,function(){return Cs(),null})),j=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||j){j=hn.transition,hn.transition=null;var ie=D;D=1;var Te=Nr;Nr|=4,Ho.current=null,Gc(t,l),Uu(l,t),mc(Za),et=!!Ya,Za=Ya=null,t.current=l,Hc(l),yt(),Nr=Te,D=ie,hn.transition=j}else t.current=l;if(Ra&&(Ra=!1,jn=t,Ma=I),j=t.pendingLanes,j===0&&(Vn=null),Ur(l.stateNode),en(t,lt()),i!==null)for(m=t.onRecoverableError,l=0;l<i.length;l++)I=i[l],m(I.value,{componentStack:I.stack,digest:I.digest});if(Ta)throw Ta=!1,t=Xo,Xo=null,t;return(Ma&1)!==0&&t.tag!==0&&Cs(),j=t.pendingLanes,(j&1)!==0?t===Ko?Xs++:(Xs=0,Ko=t):Xs=0,zn(),null}function Cs(){if(jn!==null){var t=z(Ma),i=hn.transition,l=D;try{if(hn.transition=null,D=16>t?16:t,jn===null)var m=!1;else{if(t=jn,jn=null,Ma=0,(Nr&6)!==0)throw Error(s(331));var I=Nr;for(Nr|=4,Gt=t.current;Gt!==null;){var j=Gt,ie=j.child;if((Gt.flags&16)!==0){var Te=j.deletions;if(Te!==null){for(var Le=0;Le<Te.length;Le++){var Qe=Te[Le];for(Gt=Qe;Gt!==null;){var xt=Gt;switch(xt.tag){case 0:case 11:case 15:Hs(8,xt,j)}var bt=xt.child;if(bt!==null)bt.return=xt,Gt=bt;else for(;Gt!==null;){xt=Gt;var vt=xt.sibling,jt=xt.return;if(Fu(xt),xt===Qe){Gt=null;break}if(vt!==null){vt.return=jt,Gt=vt;break}Gt=jt}}}var $t=j.alternate;if($t!==null){var Kt=$t.child;if(Kt!==null){$t.child=null;do{var mi=Kt.sibling;Kt.sibling=null,Kt=mi}while(Kt!==null)}}Gt=j}}if((j.subtreeFlags&2064)!==0&&ie!==null)ie.return=j,Gt=ie;else e:for(;Gt!==null;){if(j=Gt,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:Hs(9,j,j.return)}var Ge=j.sibling;if(Ge!==null){Ge.return=j.return,Gt=Ge;break e}Gt=j.return}}var je=t.current;for(Gt=je;Gt!==null;){ie=Gt;var Ke=ie.child;if((ie.subtreeFlags&2064)!==0&&Ke!==null)Ke.return=ie,Gt=Ke;else e:for(ie=je;Gt!==null;){if(Te=Gt,(Te.flags&2048)!==0)try{switch(Te.tag){case 0:case 11:case 15:Ea(9,Te)}}catch(Qt){di(Te,Te.return,Qt)}if(Te===ie){Gt=null;break e}var Tt=Te.sibling;if(Tt!==null){Tt.return=Te.return,Gt=Tt;break e}Gt=Te.return}}if(Nr=I,zn(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(Cr,t)}catch{}m=!0}return m}finally{D=l,hn.transition=i}}return!1}function Ju(t,i,l){i=ws(l,i),i=vu(t,i,1),t=Fn(t,i,1),i=Xi(),t!==null&&(M(t,1,i),en(t,i))}function di(t,i,l){if(t.tag===3)Ju(t,t,l);else for(;i!==null;){if(i.tag===3){Ju(i,t,l);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Vn===null||!Vn.has(m))){t=ws(l,t),t=yu(i,t,1),i=Fn(i,t,1),t=Xi(),i!==null&&(M(i,1,t),en(i,t));break}}i=i.return}}function Qc(t,i,l){var m=t.pingCache;m!==null&&m.delete(i),i=Xi(),t.pingedLanes|=t.suspendedLanes&l,Pi===t&&(Fi&l)===l&&(Ei===4||Ei===3&&(Fi&130023424)===Fi&&500>lt()-$o?is(t,0):Wo|=l),en(t,i)}function ec(t,i){i===0&&((t.mode&1)===0?i=1:(i=ri,ri<<=1,(ri&130023424)===0&&(ri=4194304)));var l=Xi();t=Tn(t,i),t!==null&&(M(t,i,l),en(t,l))}function Yc(t){var i=t.memoizedState,l=0;i!==null&&(l=i.retryLane),ec(t,l)}function Zc(t,i){var l=0;switch(t.tag){case 13:var m=t.stateNode,I=t.memoizedState;I!==null&&(l=I.retryLane);break;case 19:m=t.stateNode;break;default:throw Error(s(314))}m!==null&&m.delete(i),ec(t,l)}var tc;tc=function(t,i,l){if(t!==null)if(t.memoizedProps!==i.pendingProps||Qi.current)Zi=!0;else{if((t.lanes&l)===0&&(i.flags&128)===0)return Zi=!1,Vc(t,i,l);Zi=(t.flags&131072)!==0}else Zi=!1,ti&&(i.flags&1048576)!==0&&Ol(i,oa,i.index);switch(i.lanes=0,i.tag){case 2:var m=i.type;ba(t,i),t=i.pendingProps;var I=fs(i,ji.current);xs(i,l),I=So(null,i,m,t,I,l);var j=Eo();return i.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Yi(m)?(j=!0,na(i)):j=!1,i.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,go(i),I.updater=_a,i.stateNode=I,I._reactInternals=i,Po(i,m,t,l),i=Oo(null,i,m,!0,j,l)):(i.tag=0,ti&&j&&so(i),$i(null,i,I,l),i=i.child),i;case 16:m=i.elementType;e:{switch(ba(t,i),t=i.pendingProps,I=m._init,m=I(m._payload),i.type=m,I=i.tag=eh(m),t=mn(m,t),I){case 0:i=Io(null,i,m,t,l);break e;case 1:i=Tu(null,i,m,t,l);break e;case 11:i=bu(null,i,m,t,l);break e;case 14:i=Su(null,i,m,mn(m.type,t),l);break e}throw Error(s(306,m,""))}return i;case 0:return m=i.type,I=i.pendingProps,I=i.elementType===m?I:mn(m,I),Io(t,i,m,I,l);case 1:return m=i.type,I=i.pendingProps,I=i.elementType===m?I:mn(m,I),Tu(t,i,m,I,l);case 3:e:{if(Ru(i),t===null)throw Error(s(387));m=i.pendingProps,j=i.memoizedState,I=j.element,Gl(t,i),fa(i,m,null,l);var ie=i.memoizedState;if(m=ie.element,j.isDehydrated)if(j={element:m,isDehydrated:!1,cache:ie.cache,pendingSuspenseBoundaries:ie.pendingSuspenseBoundaries,transitions:ie.transitions},i.updateQueue.baseState=j,i.memoizedState=j,i.flags&256){I=ws(Error(s(423)),i),i=Mu(t,i,m,l,I);break e}else if(m!==I){I=ws(Error(s(424)),i),i=Mu(t,i,m,l,I);break e}else for(nn=Dn(i.stateNode.containerInfo.firstChild),rn=i,ti=!0,pn=null,l=Bl(i,null,m,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(gs(),m===I){i=Mn(t,i,l);break e}$i(t,i,m,l)}i=i.child}return i;case 5:return $l(i),t===null&&lo(i),m=i.type,I=i.pendingProps,j=t!==null?t.memoizedProps:null,ie=I.children,Ja(m,I)?ie=null:j!==null&&Ja(m,j)&&(i.flags|=32),Au(t,i),$i(t,i,ie,l),i.child;case 6:return t===null&&lo(i),null;case 13:return Pu(t,i,l);case 4:return vo(i,i.stateNode.containerInfo),m=i.pendingProps,t===null?i.child=vs(i,null,m,l):$i(t,i,m,l),i.child;case 11:return m=i.type,I=i.pendingProps,I=i.elementType===m?I:mn(m,I),bu(t,i,m,I,l);case 7:return $i(t,i,i.pendingProps,l),i.child;case 8:return $i(t,i,i.pendingProps.children,l),i.child;case 12:return $i(t,i,i.pendingProps.children,l),i.child;case 10:e:{if(m=i.type._context,I=i.pendingProps,j=i.memoizedProps,ie=I.value,Qr(ca,m._currentValue),m._currentValue=ie,j!==null)if(fn(j.value,ie)){if(j.children===I.children&&!Qi.current){i=Mn(t,i,l);break e}}else for(j=i.child,j!==null&&(j.return=i);j!==null;){var Te=j.dependencies;if(Te!==null){ie=j.child;for(var Le=Te.firstContext;Le!==null;){if(Le.context===m){if(j.tag===1){Le=Rn(-1,l&-l),Le.tag=2;var Qe=j.updateQueue;if(Qe!==null){Qe=Qe.shared;var xt=Qe.pending;xt===null?Le.next=Le:(Le.next=xt.next,xt.next=Le),Qe.pending=Le}}j.lanes|=l,Le=j.alternate,Le!==null&&(Le.lanes|=l),po(j.return,l,i),Te.lanes|=l;break}Le=Le.next}}else if(j.tag===10)ie=j.type===i.type?null:j.child;else if(j.tag===18){if(ie=j.return,ie===null)throw Error(s(341));ie.lanes|=l,Te=ie.alternate,Te!==null&&(Te.lanes|=l),po(ie,l,i),ie=j.sibling}else ie=j.child;if(ie!==null)ie.return=j;else for(ie=j;ie!==null;){if(ie===i){ie=null;break}if(j=ie.sibling,j!==null){j.return=ie.return,ie=j;break}ie=ie.return}j=ie}$i(t,i,I.children,l),i=i.child}return i;case 9:return I=i.type,m=i.pendingProps.children,xs(i,l),I=un(I),m=m(I),i.flags|=1,$i(t,i,m,l),i.child;case 14:return m=i.type,I=mn(m,i.pendingProps),I=mn(m.type,I),Su(t,i,m,I,l);case 15:return Eu(t,i,i.type,i.pendingProps,l);case 17:return m=i.type,I=i.pendingProps,I=i.elementType===m?I:mn(m,I),ba(t,i),i.tag=1,Yi(m)?(t=!0,na(i)):t=!1,xs(i,l),mu(i,m,I),Po(i,m,I,l),Oo(null,i,m,!0,t,l);case 19:return Du(t,i,l);case 22:return Cu(t,i,l)}throw Error(s(156,i.tag))};function rc(t,i){return xe(t,i)}function Jc(t,i,l,m){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(t,i,l,m){return new Jc(t,i,l,m)}function el(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eh(t){if(typeof t=="function")return el(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ge)return 11;if(t===ue)return 14}return 2}function Gn(t,i){var l=t.alternate;return l===null?(l=dn(t.tag,i,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=i,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&14680064,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,i=t.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l}function Ia(t,i,l,m,I,j){var ie=2;if(m=t,typeof t=="function")el(t)&&(ie=1);else if(typeof t=="string")ie=5;else e:switch(t){case J:return ss(l.children,I,j,i);case N:ie=8,I|=8;break;case ee:return t=dn(12,l,i,I|2),t.elementType=ee,t.lanes=j,t;case me:return t=dn(13,l,i,I),t.elementType=me,t.lanes=j,t;case Ce:return t=dn(19,l,i,I),t.elementType=Ce,t.lanes=j,t;case he:return Oa(l,I,j,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Se:ie=10;break e;case ce:ie=9;break e;case ge:ie=11;break e;case ue:ie=14;break e;case L:ie=16,m=null;break e}throw Error(s(130,t==null?t:typeof t,""))}return i=dn(ie,l,i,I),i.elementType=t,i.type=m,i.lanes=j,i}function ss(t,i,l,m){return t=dn(7,t,m,i),t.lanes=l,t}function Oa(t,i,l,m){return t=dn(22,t,m,i),t.elementType=he,t.lanes=l,t.stateNode={isHidden:!1},t}function tl(t,i,l){return t=dn(6,t,null,i),t.lanes=l,t}function rl(t,i,l){return i=dn(4,t.children!==null?t.children:[],t.key,i),i.lanes=l,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function th(t,i,l,m,I){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_(0),this.expirationTimes=_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_(0),this.identifierPrefix=m,this.onRecoverableError=I,this.mutableSourceEagerHydrationData=null}function il(t,i,l,m,I,j,ie,Te,Le){return t=new th(t,i,l,Te,Le),i===1?(i=1,j===!0&&(i|=8)):i=0,j=dn(3,null,null,i),t.current=j,j.stateNode=t,j.memoizedState={element:m,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},go(j),t}function rh(t,i,l){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:m==null?null:""+m,children:t,containerInfo:i,implementation:l}}function ic(t){if(!t)return On;t=t._reactInternals;e:{if(Gr(t)!==t||t.tag!==1)throw Error(s(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Yi(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(s(171))}if(t.tag===1){var l=t.type;if(Yi(l))return kl(t,l,i)}return i}function nc(t,i,l,m,I,j,ie,Te,Le){return t=il(l,m,!0,t,I,j,ie,Te,Le),t.context=ic(null),l=t.current,m=Xi(),I=Bn(l),j=Rn(m,I),j.callback=i??null,Fn(l,j,I),t.current.lanes=I,M(t,I,m),en(t,m),t}function za(t,i,l,m){var I=i.current,j=Xi(),ie=Bn(I);return l=ic(l),i.context===null?i.context=l:i.pendingContext=l,i=Rn(j,ie),i.payload={element:t},m=m===void 0?null:m,m!==null&&(i.callback=m),t=Fn(I,i,ie),t!==null&&(yn(t,I,ie,j),da(t,I,ie)),ie}function La(t){return t=t.current,t.child?(t.child.tag===5,t.child.stateNode):null}function sc(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<i?l:i}}function nl(t,i){sc(t,i),(t=t.alternate)&&sc(t,i)}function ih(){return null}var ac=typeof reportError=="function"?reportError:function(t){console.error(t)};function sl(t){this._internalRoot=t}Fa.prototype.render=sl.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));za(t,i,null,null)},Fa.prototype.unmount=sl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;rs(function(){za(null,t,null,null)}),i[Sn]=null}};function Fa(t){this._internalRoot=t}Fa.prototype.unstable_scheduleHydration=function(t){if(t){var i=H();t={blockedOn:null,target:t,priority:i};for(var l=0;l<Re.length&&i!==0&&i<Re[l].priority;l++);Re.splice(l,0,t),l===0&&tt(t)}};function al(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Na(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function oc(){}function nh(t,i,l,m,I){if(I){if(typeof m=="function"){var j=m;m=function(){var Qe=La(ie);j.call(Qe)}}var ie=nc(i,m,t,0,null,!1,!1,"",oc);return t._reactRootContainer=ie,t[Sn]=ie.current,ks(t.nodeType===8?t.parentNode:t),rs(),ie}for(;I=t.lastChild;)t.removeChild(I);if(typeof m=="function"){var Te=m;m=function(){var Qe=La(Le);Te.call(Qe)}}var Le=il(t,0,!1,null,null,!1,!1,"",oc);return t._reactRootContainer=Le,t[Sn]=Le.current,ks(t.nodeType===8?t.parentNode:t),rs(function(){za(i,Le,l,m)}),Le}function Va(t,i,l,m,I){var j=l._reactRootContainer;if(j){var ie=j;if(typeof I=="function"){var Te=I;I=function(){var Le=La(ie);Te.call(Le)}}za(i,ie,t,I)}else ie=nh(l,i,t,I,m);return La(ie)}$=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var l=oe(i.pendingLanes);l!==0&&(A(i,l|1),en(i,lt()),(Nr&6)===0&&(Es=lt()+500,zn()))}break;case 13:rs(function(){var m=Tn(t,1);if(m!==null){var I=Xi();yn(m,t,1,I)}}),nl(t,1)}},U=function(t){if(t.tag===13){var i=Tn(t,134217728);if(i!==null){var l=Xi();yn(i,t,134217728,l)}nl(t,134217728)}},V=function(t){if(t.tag===13){var i=Bn(t),l=Tn(t,i);if(l!==null){var m=Xi();yn(l,t,i,m)}nl(t,i)}},H=function(){return D},G=function(t,i){var l=D;try{return D=t,i()}finally{D=l}},ui=function(t,i,l){switch(i){case"input":if(Er(t,l),i=l.name,l.type==="radio"&&i!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var m=l[i];if(m!==t&&m.form===t.form){var I=ra(m);if(!I)throw Error(s(90));Ft(m),Er(m,I)}}}break;case"textarea":Di(t,l);break;case"select":i=l.value,i!=null&&fi(t,!!l.multiple,i,!1)}},vi=Yo,bi=rs;var sh={usingClientEntryPoint:!1,Events:[Os,hs,ra,Dr,rr,Yo]},Ks={findFiberByHostInstance:Kn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ah={bundleType:Ks.bundleType,version:Ks.version,rendererPackageName:Ks.rendererPackageName,rendererConfig:Ks.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=E(t),t===null?null:t.stateNode},findFiberByHostInstance:Ks.findFiberByHostInstance||ih,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ja.isDisabled&&ja.supportsFiber)try{Cr=ja.inject(ah),Ar=ja}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sh,reactDom_production_min.createPortal=function(t,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!al(i))throw Error(s(200));return rh(t,i,null,l)},reactDom_production_min.createRoot=function(t,i){if(!al(t))throw Error(s(299));var l=!1,m="",I=ac;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onRecoverableError!==void 0&&(I=i.onRecoverableError)),i=il(t,1,!1,null,null,l,!1,m,I),t[Sn]=i.current,ks(t.nodeType===8?t.parentNode:t),new sl(i)},reactDom_production_min.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=E(i),t=t===null?null:t.stateNode,t},reactDom_production_min.flushSync=function(t){return rs(t)},reactDom_production_min.hydrate=function(t,i,l){if(!Na(i))throw Error(s(200));return Va(null,t,i,!0,l)},reactDom_production_min.hydrateRoot=function(t,i,l){if(!al(t))throw Error(s(405));var m=l!=null&&l.hydratedSources||null,I=!1,j="",ie=ac;if(l!=null&&(l.unstable_strictMode===!0&&(I=!0),l.identifierPrefix!==void 0&&(j=l.identifierPrefix),l.onRecoverableError!==void 0&&(ie=l.onRecoverableError)),i=nc(i,null,t,1,l??null,I,!1,j,ie),t[Sn]=i.current,ks(t),m)for(t=0;t<m.length;t++)l=m[t],I=l._getVersion,I=I(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,I]:i.mutableSourceEagerHydrationData.push(l,I);return new Fa(i)},reactDom_production_min.render=function(t,i,l){if(!Na(i))throw Error(s(200));return Va(null,t,i,!1,l)},reactDom_production_min.unmountComponentAtNode=function(t){if(!Na(t))throw Error(s(40));return t._reactRootContainer?(rs(function(){Va(null,null,t,!1,function(){t._reactRootContainer=null,t[Sn]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=Yo,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(t,i,l,m){if(!Na(l))throw Error(s(200));if(t==null||t._reactInternals===void 0)throw Error(s(38));return Va(t,i,l,!1,m)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var e=requireReactDom();return client.createRoot=e.createRoot,client.hydrateRoot=e.hydrateRoot,client}var clientExports=requireClient();var PopStateEventType="popstate";function createBrowserHistory(e={}){function r(o,c){let{pathname:y,search:u,hash:p}=o.location;return createLocation("",{pathname:y,search:u,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(o,c){return typeof c=="string"?c:createPath(c)}return getUrlBasedHistory(r,s,null,e)}function invariant$1(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function warning(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(e,r){return{usr:e.state,key:e.key,idx:r}}function createLocation(e,r,s=null,o){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof r=="string"?parsePath(r):r,state:s,key:r&&r.key||o||createKey()}}function createPath({pathname:e="/",search:r="",hash:s=""}){return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function parsePath(e){let r={};if(e){let s=e.indexOf("#");s>=0&&(r.hash=e.substring(s),e=e.substring(0,s));let o=e.indexOf("?");o>=0&&(r.search=e.substring(o),e=e.substring(0,o)),e&&(r.pathname=e)}return r}function getUrlBasedHistory(e,r,s,o={}){let{window:c=document.defaultView,v5Compat:y=!1}=o,u=c.history,p="POP",d=null,x=w();x==null&&(x=0,u.replaceState({...u.state,idx:x},""));function w(){return(u.state||{idx:null}).idx}function v(){p="POP";let K=w(),Z=K==null?null:K-x;x=K,d&&d({action:p,location:k.location,delta:Z})}function R(K,Z){p="PUSH";let X=createLocation(k.location,K,Z);x=w()+1;let S=getHistoryState(X,x),F=k.createHref(X);try{u.pushState(S,"",F)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;c.location.assign(F)}y&&d&&d({action:p,location:k.location,delta:1})}function O(K,Z){p="REPLACE";let X=createLocation(k.location,K,Z);x=w();let S=getHistoryState(X,x),F=k.createHref(X);u.replaceState(S,"",F),y&&d&&d({action:p,location:k.location,delta:0})}function C(K){return createBrowserURLImpl(K)}let k={get action(){return p},get location(){return e(c,u)},listen(K){if(d)throw new Error("A history only accepts one active listener");return c.addEventListener(PopStateEventType,v),d=K,()=>{c.removeEventListener(PopStateEventType,v),d=null}},createHref(K){return r(c,K)},createURL:C,encodeLocation(K){let Z=C(K);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:R,replace:O,go(K){return u.go(K)}};return k}function createBrowserURLImpl(e,r=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),invariant$1(s,"No window.location.(origin|href) available to create URL");let o=typeof e=="string"?e:createPath(e);return o=o.replace(/ $/,"%20"),!r&&o.startsWith("//")&&(o=s+o),new URL(o,s)}function matchRoutes(e,r,s="/"){return matchRoutesImpl(e,r,s,!1)}function matchRoutesImpl(e,r,s,o){let c=typeof r=="string"?parsePath(r):r,y=stripBasename(c.pathname||"/",s);if(y==null)return null;let u=flattenRoutes(e);rankRouteBranches(u);let p=null;for(let d=0;p==null&&d<u.length;++d){let x=decodePath(y);p=matchRouteBranch(u[d],x,o)}return p}function flattenRoutes(e,r=[],s=[],o="",c=!1){let y=(u,p,d=c,x)=>{let w={relativePath:x===void 0?u.path||"":x,caseSensitive:u.caseSensitive===!0,childrenIndex:p,route:u};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(o)&&d)return;invariant$1(w.relativePath.startsWith(o),`Absolute route path "${w.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(o.length)}let v=joinPaths([o,w.relativePath]),R=s.concat(w);u.children&&u.children.length>0&&(invariant$1(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),flattenRoutes(u.children,r,R,v,d)),!(u.path==null&&!u.index)&&r.push({path:v,score:computeScore(v,u.index),routesMeta:R})};return e.forEach((u,p)=>{if(u.path===""||!u.path?.includes("?"))y(u,p);else for(let d of explodeOptionalSegments(u.path))y(u,p,!0,d)}),r}function explodeOptionalSegments(e){let r=e.split("/");if(r.length===0)return[];let[s,...o]=r,c=s.endsWith("?"),y=s.replace(/\?$/,"");if(o.length===0)return c?[y,""]:[y];let u=explodeOptionalSegments(o.join("/")),p=[];return p.push(...u.map(d=>d===""?y:[y,d].join("/"))),c&&p.push(...u),p.map(d=>e.startsWith("/")&&d===""?"/":d)}function rankRouteBranches(e){e.sort((r,s)=>r.score!==s.score?s.score-r.score:compareIndexes(r.routesMeta.map(o=>o.childrenIndex),s.routesMeta.map(o=>o.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,r){let s=e.split("/"),o=s.length;return s.some(isSplat)&&(o+=splatPenalty),r&&(o+=indexRouteValue),s.filter(c=>!isSplat(c)).reduce((c,y)=>c+(paramRe.test(y)?dynamicSegmentValue:y===""?emptySegmentValue:staticSegmentValue),o)}function compareIndexes(e,r){return e.length===r.length&&e.slice(0,-1).every((o,c)=>o===r[c])?e[e.length-1]-r[r.length-1]:0}function matchRouteBranch(e,r,s=!1){let{routesMeta:o}=e,c={},y="/",u=[];for(let p=0;p<o.length;++p){let d=o[p],x=p===o.length-1,w=y==="/"?r:r.slice(y.length)||"/",v=matchPath({path:d.relativePath,caseSensitive:d.caseSensitive,end:x},w),R=d.route;if(!v&&x&&s&&!o[o.length-1].route.index&&(v=matchPath({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},w)),!v)return null;Object.assign(c,v.params),u.push({params:c,pathname:joinPaths([y,v.pathname]),pathnameBase:normalizePathname(joinPaths([y,v.pathnameBase])),route:R}),v.pathnameBase!=="/"&&(y=joinPaths([y,v.pathnameBase]))}return u}function matchPath(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,o]=compilePath(e.path,e.caseSensitive,e.end),c=r.match(s);if(!c)return null;let y=c[0],u=y.replace(/(.)\/+$/,"$1"),p=c.slice(1);return{params:o.reduce((x,{paramName:w,isOptional:v},R)=>{if(w==="*"){let C=p[R]||"";u=y.slice(0,y.length-C.length).replace(/(.)\/+$/,"$1")}const O=p[R];return v&&!O?x[w]=void 0:x[w]=(O||"").replace(/%2F/g,"/"),x},{}),pathname:y,pathnameBase:u,pattern:e}}function compilePath(e,r=!1,s=!0){warning(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let o=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,p,d)=>(o.push({paramName:p,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(o.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,r?void 0:"i"),o]}function decodePath(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return warning(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),e}}function stripBasename(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let s=r.endsWith("/")?r.length-1:r.length,o=e.charAt(s);return o&&o!=="/"?null:e.slice(s)||"/"}var ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isAbsoluteUrl=e=>ABSOLUTE_URL_REGEX.test(e);function resolvePath(e,r="/"){let{pathname:s,search:o="",hash:c=""}=typeof e=="string"?parsePath(e):e,y;if(s)if(isAbsoluteUrl(s))y=s;else{if(s.includes("//")){let u=s;s=s.replace(/\/\/+/g,"/"),warning(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${s}`)}s.startsWith("/")?y=resolvePathname(s.substring(1),"/"):y=resolvePathname(s,r)}else y=r;return{pathname:y,search:normalizeSearch(o),hash:normalizeHash(c)}}function resolvePathname(e,r){let s=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function getInvalidPathError(e,r,s,o){return`Cannot include a '${e}' character in a manually specified \`to.${r}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(e){return e.filter((r,s)=>s===0||r.route.path&&r.route.path.length>0)}function getResolveToMatches(e){let r=getPathContributingMatches(e);return r.map((s,o)=>o===r.length-1?s.pathname:s.pathnameBase)}function resolveTo(e,r,s,o=!1){let c;typeof e=="string"?c=parsePath(e):(c={...e},invariant$1(!c.pathname||!c.pathname.includes("?"),getInvalidPathError("?","pathname","search",c)),invariant$1(!c.pathname||!c.pathname.includes("#"),getInvalidPathError("#","pathname","hash",c)),invariant$1(!c.search||!c.search.includes("#"),getInvalidPathError("#","search","hash",c)));let y=e===""||c.pathname==="",u=y?"/":c.pathname,p;if(u==null)p=s;else{let v=r.length-1;if(!o&&u.startsWith("..")){let R=u.split("/");for(;R[0]==="..";)R.shift(),v-=1;c.pathname=R.join("/")}p=v>=0?r[v]:"/"}let d=resolvePath(c,p),x=u&&u!=="/"&&u.endsWith("/"),w=(y||u===".")&&s.endsWith("/");return!d.pathname.endsWith("/")&&(x||w)&&(d.pathname+="/"),d}var joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,normalizeHash=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,ErrorResponseImpl=class{constructor(e,r,s,o=!1){this.status=e,this.statusText=r||"",this.internal=o,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function getRoutePattern(e){return e.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function parseToInfo(e,r){let s=e;if(typeof s!="string"||!ABSOLUTE_URL_REGEX.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let o=s,c=!1;if(isBrowser$2)try{let y=new URL(window.location.href),u=s.startsWith("//")?new URL(y.protocol+s):new URL(s),p=stripBasename(u.pathname,r);u.origin===y.origin&&p!=null?s=p+u.search+u.hash:c=!0}catch{warning(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:c,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var RSCRouterContext=reactExports.createContext(!1),ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";var ERROR_DIGEST_BASE="REACT_ROUTER_ERROR",ERROR_DIGEST_REDIRECT="REDIRECT",ERROR_DIGEST_ROUTE_ERROR_RESPONSE="ROUTE_ERROR_RESPONSE";function decodeRedirectErrorDigest(e){if(e.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_REDIRECT}:{`))try{let r=JSON.parse(e.slice(28));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.location=="string"&&typeof r.reloadDocument=="boolean"&&typeof r.replace=="boolean")return r}catch{}}function decodeRouteErrorResponseDigest(e){if(e.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_ROUTE_ERROR_RESPONSE}:{`))try{let r=JSON.parse(e.slice(40));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string")return new ErrorResponseImpl(r.status,r.statusText,r.data)}catch{}}function useHref(e,{relative:r}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:o}=reactExports.useContext(NavigationContext),{hash:c,pathname:y,search:u}=useResolvedPath(e,{relative:r}),p=y;return s!=="/"&&(p=y==="/"?s:joinPaths([s,y])),o.createHref({pathname:p,search:u,hash:c})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=reactExports.useContext(RouteContext);return e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let e=reactExports.useContext(DataRouterContext),{basename:r,navigator:s}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),y=JSON.stringify(getResolveToMatches(o)),u=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{u.current=!0}),reactExports.useCallback((d,x={})=>{if(warning(u.current,navigateEffectWarning),!u.current)return;if(typeof d=="number"){s.go(d);return}let w=resolveTo(d,JSON.parse(y),c,x.relative==="path");e==null&&r!=="/"&&(w.pathname=w.pathname==="/"?r:joinPaths([r,w.pathname])),(x.replace?s.replace:s.push)(w,x.state,x)},[r,s,y,c,e])}reactExports.createContext(null);function useResolvedPath(e,{relative:r}={}){let{matches:s}=reactExports.useContext(RouteContext),{pathname:o}=useLocation(),c=JSON.stringify(getResolveToMatches(s));return reactExports.useMemo(()=>resolveTo(e,JSON.parse(c),o,r==="path"),[e,c,o,r])}function useRoutesImpl(e,r,s,o,c){invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:y}=reactExports.useContext(NavigationContext),{matches:u}=reactExports.useContext(RouteContext),p=u[u.length-1],d=p?p.params:{},x=p?p.pathname:"/",w=p?p.pathnameBase:"/",v=p&&p.route;{let X=v&&v.path||"";warningOnce(x,!v||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let R=useLocation(),O;O=R;let C=O.pathname||"/",k=C;if(w!=="/"){let X=w.replace(/^\//,"").split("/");k="/"+C.replace(/^\//,"").split("/").slice(X.length).join("/")}let K=matchRoutes(e,{pathname:k});return warning(v||K!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),warning(K==null||K[K.length-1].route.element!==void 0||K[K.length-1].route.Component!==void 0||K[K.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(K&&K.map(X=>Object.assign({},X,{params:Object.assign({},d,X.params),pathname:joinPaths([w,y.encodeLocation?y.encodeLocation(X.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?w:joinPaths([w,y.encodeLocation?y.encodeLocation(X.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathnameBase])})),u,s,o,c)}function DefaultErrorComponent(){let e=useRouteError(),r=isRouteErrorResponse(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:o},y={padding:"2px 4px",backgroundColor:o},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:y},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:y},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},r),s?reactExports.createElement("pre",{style:c},s):null,u)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){this.props.onError?this.props.onError(e,r):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const s=decodeRouteErrorResponseDigest(e.digest);s&&(e=s)}let r=e!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?reactExports.createElement(RSCErrorHandler,{error:e},r):r}};RenderErrorBoundary.contextType=RSCRouterContext;var errorRedirectHandledMap=new WeakMap;function RSCErrorHandler({children:e,error:r}){let{basename:s}=reactExports.useContext(NavigationContext);if(typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){let o=decodeRedirectErrorDigest(r.digest);if(o){let c=errorRedirectHandledMap.get(r);if(c)throw c;let y=parseToInfo(o.location,s);if(isBrowser$2&&!errorRedirectHandledMap.get(r))if(y.isExternal||o.reloadDocument)window.location.href=y.absoluteURL||y.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(y.to,{replace:o.replace}));throw errorRedirectHandledMap.set(r,u),u}return reactExports.createElement("meta",{httpEquiv:"refresh",content:`0;url=${y.absoluteURL||y.to}`})}}return e}function RenderedRoute({routeContext:e,match:r,children:s}){let o=reactExports.useContext(DataRouterContext);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),reactExports.createElement(RouteContext.Provider,{value:e},s)}function _renderMatches(e,r=[],s=null,o=null,c=null){if(e==null){if(!s)return null;if(s.errors)e=s.matches;else if(r.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let y=e,u=s?.errors;if(u!=null){let w=y.findIndex(v=>v.route.id&&u?.[v.route.id]!==void 0);invariant$1(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),y=y.slice(0,Math.min(y.length,w+1))}let p=!1,d=-1;if(s)for(let w=0;w<y.length;w++){let v=y[w];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=w),v.route.id){let{loaderData:R,errors:O}=s,C=v.route.loader&&!R.hasOwnProperty(v.route.id)&&(!O||O[v.route.id]===void 0);if(v.route.lazy||C){p=!0,d>=0?y=y.slice(0,d+1):y=[y[0]];break}}}let x=s&&o?(w,v)=>{o(w,{location:s.location,params:s.matches?.[0]?.params??{},unstable_pattern:getRoutePattern(s.matches),errorInfo:v})}:void 0;return y.reduceRight((w,v,R)=>{let O,C=!1,k=null,K=null;s&&(O=u&&v.route.id?u[v.route.id]:void 0,k=v.route.errorElement||defaultErrorElement,p&&(d<0&&R===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,K=null):d===R&&(C=!0,K=v.route.hydrateFallbackElement||null)));let Z=r.concat(y.slice(0,R+1)),X=()=>{let S;return O?S=k:C?S=K:v.route.Component?S=reactExports.createElement(v.route.Component,null):v.route.element?S=v.route.element:S=w,reactExports.createElement(RenderedRoute,{match:v,routeContext:{outlet:w,matches:Z,isDataRoute:s!=null},children:S})};return s&&(v.route.ErrorBoundary||v.route.errorElement||R===0)?reactExports.createElement(RenderErrorBoundary,{location:s.location,revalidation:s.revalidation,component:k,error:O,children:X(),routeContext:{outlet:null,matches:Z,isDataRoute:!0},onError:x}):X()},null)}function getDataRouterConsoleError(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(e){let r=reactExports.useContext(DataRouterContext);return invariant$1(r,getDataRouterConsoleError(e)),r}function useDataRouterState(e){let r=reactExports.useContext(DataRouterStateContext);return invariant$1(r,getDataRouterConsoleError(e)),r}function useRouteContext(e){let r=reactExports.useContext(RouteContext);return invariant$1(r,getDataRouterConsoleError(e)),r}function useCurrentRouteId(e){let r=useRouteContext(e),s=r.matches[r.matches.length-1];return invariant$1(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let e=reactExports.useContext(RouteErrorContext),r=useDataRouterState("useRouteError"),s=useCurrentRouteId("useRouteError");return e!==void 0?e:r.errors?.[s]}function useNavigateStable(){let{router:e}=useDataRouterContext("useNavigate"),r=useCurrentRouteId("useNavigate"),s=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{s.current=!0}),reactExports.useCallback(async(c,y={})=>{warning(s.current,navigateEffectWarning),s.current&&(typeof c=="number"?await e.navigate(c):await e.navigate(c,{fromRouteId:r,...y}))},[e,r])}var alreadyWarned={};function warningOnce(e,r,s){!r&&!alreadyWarned[e]&&(alreadyWarned[e]=!0,warning(!1,s))}reactExports.memo(DataRoutes);function DataRoutes({routes:e,future:r,state:s,onError:o}){return useRoutesImpl(e,void 0,s,o,r)}function Router({basename:e="/",children:r=null,location:s,navigationType:o="POP",navigator:c,static:y=!1,unstable_useTransitions:u}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=e.replace(/^\/*/,"/"),d=reactExports.useMemo(()=>({basename:p,navigator:c,static:y,unstable_useTransitions:u,future:{}}),[p,c,y,u]);typeof s=="string"&&(s=parsePath(s));let{pathname:x="/",search:w="",hash:v="",state:R=null,key:O="default"}=s,C=reactExports.useMemo(()=>{let k=stripBasename(x,p);return k==null?null:{location:{pathname:k,search:w,hash:v,state:R,key:O},navigationType:o}},[p,x,w,v,R,O,o]);return warning(C!=null,`<Router basename="${p}"> is not able to match the URL "${x}${w}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:reactExports.createElement(NavigationContext.Provider,{value:d},reactExports.createElement(LocationContext.Provider,{children:r,value:C}))}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function isButtonElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="button"}function isFormElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="form"}function isInputElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="input"}function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function shouldProcessLinkClick(e,r){return e.button===0&&(!r||r==="_self")&&!isModifiedEvent(e)}function createSearchParams(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((r,s)=>{let o=e[s];return r.concat(Array.isArray(o)?o.map(c=>[s,c]):[[s,o]])},[]))}function getSearchParamsForLocation(e,r){let s=createSearchParams(e);return r&&r.forEach((o,c)=>{s.has(c)||r.getAll(c).forEach(y=>{s.append(c,y)})}),s}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(e){return e!=null&&!supportedFormEncTypes.has(e)?(warning(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):e}function getFormSubmissionInfo(e,r){let s,o,c,y,u;if(isFormElement(e)){let p=e.getAttribute("action");o=p?stripBasename(p,r):null,s=e.getAttribute("method")||defaultMethod,c=getFormEncType(e.getAttribute("enctype"))||defaultEncType,y=new FormData(e)}else if(isButtonElement(e)||isInputElement(e)&&(e.type==="submit"||e.type==="image")){let p=e.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||p.getAttribute("action");if(o=d?stripBasename(d,r):null,s=e.getAttribute("formmethod")||p.getAttribute("method")||defaultMethod,c=getFormEncType(e.getAttribute("formenctype"))||getFormEncType(p.getAttribute("enctype"))||defaultEncType,y=new FormData(p,e),!isFormDataSubmitterSupported()){let{name:x,type:w,value:v}=e;if(w==="image"){let R=x?`${x}.`:"";y.append(`${R}x`,"0"),y.append(`${R}y`,"0")}else x&&y.append(x,v)}}else{if(isHtmlElement(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=defaultMethod,o=null,c=defaultEncType,u=e}return y&&c==="text/plain"&&(u=y,y=void 0),{action:o,method:s.toLowerCase(),encType:c,formData:y,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function singleFetchUrl(e,r,s,o){let c=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s?c.pathname.endsWith("/")?c.pathname=`${c.pathname}_.${o}`:c.pathname=`${c.pathname}.${o}`:c.pathname==="/"?c.pathname=`_root.${o}`:r&&stripBasename(c.pathname,r)==="/"?c.pathname=`${r.replace(/\/$/,"")}/_root.${o}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${o}`,c}async function loadRouteModule(e,r){if(e.id in r)return r[e.id];try{let s=await import(e.module);return r[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function getKeyedPrefetchLinks(e,r,s){let o=await Promise.all(e.map(async c=>{let y=r.routes[c.route.id];if(y){let u=await loadRouteModule(y,s);return u.links?u.links():[]}return[]}));return dedupeLinkDescriptors(o.flat(1).filter(isHtmlLinkDescriptor).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function getNewMatchesForLinks(e,r,s,o,c,y){let u=(d,x)=>s[x]?d.route.id!==s[x].route.id:!0,p=(d,x)=>s[x].pathname!==d.pathname||s[x].route.path?.endsWith("*")&&s[x].params["*"]!==d.params["*"];return y==="assets"?r.filter((d,x)=>u(d,x)||p(d,x)):y==="data"?r.filter((d,x)=>{let w=o.routes[d.route.id];if(!w||!w.hasLoader)return!1;if(u(d,x)||p(d,x))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function getModuleLinkHrefs(e,r,{includeHydrateFallback:s}={}){return dedupeHrefs(e.map(o=>{let c=r.routes[o.route.id];if(!c)return[];let y=[c.module];return c.clientActionModule&&(y=y.concat(c.clientActionModule)),c.clientLoaderModule&&(y=y.concat(c.clientLoaderModule)),s&&c.hydrateFallbackModule&&(y=y.concat(c.hydrateFallbackModule)),c.imports&&(y=y.concat(c.imports)),y}).flat(1))}function dedupeHrefs(e){return[...new Set(e)]}function sortKeys(e){let r={},s=Object.keys(e).sort();for(let o of s)r[o]=e[o];return r}function dedupeLinkDescriptors(e,r){let s=new Set;return new Set(r),e.reduce((o,c)=>{let y=JSON.stringify(sortKeys(c));return s.has(y)||(s.add(y),o.push({key:y,link:c})),o},[])}function useDataRouterContext2(){let e=reactExports.useContext(DataRouterContext);return invariant2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function useDataRouterStateContext(){let e=reactExports.useContext(DataRouterStateContext);return invariant2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let e=reactExports.useContext(FrameworkContext);return invariant2(e,"You must render this element inside a <HydratedRouter> element"),e}function usePrefetchBehavior(e,r){let s=reactExports.useContext(FrameworkContext),[o,c]=reactExports.useState(!1),[y,u]=reactExports.useState(!1),{onFocus:p,onBlur:d,onMouseEnter:x,onMouseLeave:w,onTouchStart:v}=r,R=reactExports.useRef(null);reactExports.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let k=Z=>{Z.forEach(X=>{u(X.isIntersecting)})},K=new IntersectionObserver(k,{threshold:.5});return R.current&&K.observe(R.current),()=>{K.disconnect()}}},[e]),reactExports.useEffect(()=>{if(o){let k=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(k)}}},[o]);let O=()=>{c(!0)},C=()=>{c(!1),u(!1)};return s?e!=="intent"?[y,R,{}]:[y,R,{onFocus:composeEventHandlers(p,O),onBlur:composeEventHandlers(d,C),onMouseEnter:composeEventHandlers(x,O),onMouseLeave:composeEventHandlers(w,C),onTouchStart:composeEventHandlers(v,O)}]:[!1,R,{}]}function composeEventHandlers(e,r){return s=>{e&&e(s),s.defaultPrevented||r(s)}}function PrefetchPageLinks({page:e,...r}){let{router:s}=useDataRouterContext2(),o=reactExports.useMemo(()=>matchRoutes(s.routes,e,s.basename),[s.routes,e,s.basename]);return o?reactExports.createElement(PrefetchPageLinksImpl,{page:e,matches:o,...r}):null}function useKeyedPrefetchLinks(e){let{manifest:r,routeModules:s}=useFrameworkContext(),[o,c]=reactExports.useState([]);return reactExports.useEffect(()=>{let y=!1;return getKeyedPrefetchLinks(e,r,s).then(u=>{y||c(u)}),()=>{y=!0}},[e,r,s]),o}function PrefetchPageLinksImpl({page:e,matches:r,...s}){let o=useLocation(),{future:c,manifest:y,routeModules:u}=useFrameworkContext(),{basename:p}=useDataRouterContext2(),{loaderData:d,matches:x}=useDataRouterStateContext(),w=reactExports.useMemo(()=>getNewMatchesForLinks(e,r,x,y,o,"data"),[e,r,x,y,o]),v=reactExports.useMemo(()=>getNewMatchesForLinks(e,r,x,y,o,"assets"),[e,r,x,y,o]),R=reactExports.useMemo(()=>{if(e===o.pathname+o.search+o.hash)return[];let k=new Set,K=!1;if(r.forEach(X=>{let S=y.routes[X.route.id];!S||!S.hasLoader||(!w.some(F=>F.route.id===X.route.id)&&X.route.id in d&&u[X.route.id]?.shouldRevalidate||S.hasClientLoader?K=!0:k.add(X.route.id))}),k.size===0)return[];let Z=singleFetchUrl(e,p,c.unstable_trailingSlashAwareDataRequests,"data");return K&&k.size>0&&Z.searchParams.set("_routes",r.filter(X=>k.has(X.route.id)).map(X=>X.route.id).join(",")),[Z.pathname+Z.search]},[p,c.unstable_trailingSlashAwareDataRequests,d,o,y,w,r,e,u]),O=reactExports.useMemo(()=>getModuleLinkHrefs(v,y),[v,y]),C=useKeyedPrefetchLinks(v);return reactExports.createElement(reactExports.Fragment,null,R.map(k=>reactExports.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...s})),O.map(k=>reactExports.createElement("link",{key:k,rel:"modulepreload",href:k,...s})),C.map(({key:k,link:K})=>reactExports.createElement("link",{key:k,nonce:s.nonce,...K})))}function mergeRefs(...e){return r=>{e.forEach(s=>{typeof s=="function"?s(r):s!=null&&(s.current=r)})}}var isBrowser2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser2&&(window.__reactRouterVersion="7.12.0")}catch{}function BrowserRouter({basename:e,children:r,unstable_useTransitions:s,window:o}){let c=reactExports.useRef();c.current==null&&(c.current=createBrowserHistory({window:o,v5Compat:!0}));let y=c.current,[u,p]=reactExports.useState({action:y.action,location:y.location}),d=reactExports.useCallback(x=>{s===!1?p(x):reactExports.startTransition(()=>p(x))},[s]);return reactExports.useLayoutEffect(()=>y.listen(d),[y,d]),reactExports.createElement(Router,{basename:e,children:r,location:u.location,navigationType:u.action,navigator:y,unstable_useTransitions:s})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:r,discover:s="render",prefetch:o="none",relative:c,reloadDocument:y,replace:u,state:p,target:d,to:x,preventScrollReset:w,viewTransition:v,unstable_defaultShouldRevalidate:R,...O},C){let{basename:k,unstable_useTransitions:K}=reactExports.useContext(NavigationContext),Z=typeof x=="string"&&ABSOLUTE_URL_REGEX2.test(x),X=parseToInfo(x,k);x=X.to;let S=useHref(x,{relative:c}),[F,B,W]=usePrefetchBehavior(o,O),J=useLinkClickHandler(x,{replace:u,state:p,target:d,preventScrollReset:w,relative:c,viewTransition:v,unstable_defaultShouldRevalidate:R,unstable_useTransitions:K});function N(Se){r&&r(Se),Se.defaultPrevented||J(Se)}let ee=reactExports.createElement("a",{...O,...W,href:X.absoluteURL||S,onClick:X.isExternal||y?r:N,ref:mergeRefs(C,B),target:d,"data-discover":!Z&&s==="render"?"true":void 0});return F&&!Z?reactExports.createElement(reactExports.Fragment,null,ee,reactExports.createElement(PrefetchPageLinks,{page:S})):ee});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":r="page",caseSensitive:s=!1,className:o="",end:c=!1,style:y,to:u,viewTransition:p,children:d,...x},w){let v=useResolvedPath(u,{relative:x.relative}),R=useLocation(),O=reactExports.useContext(DataRouterStateContext),{navigator:C,basename:k}=reactExports.useContext(NavigationContext),K=O!=null&&useViewTransitionState(v)&&p===!0,Z=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,X=R.pathname,S=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;s||(X=X.toLowerCase(),S=S?S.toLowerCase():null,Z=Z.toLowerCase()),S&&k&&(S=stripBasename(S,k)||S);const F=Z!=="/"&&Z.endsWith("/")?Z.length-1:Z.length;let B=X===Z||!c&&X.startsWith(Z)&&X.charAt(F)==="/",W=S!=null&&(S===Z||!c&&S.startsWith(Z)&&S.charAt(Z.length)==="/"),J={isActive:B,isPending:W,isTransitioning:K},N=B?r:void 0,ee;typeof o=="function"?ee=o(J):ee=[o,B?"active":null,W?"pending":null,K?"transitioning":null].filter(Boolean).join(" ");let Se=typeof y=="function"?y(J):y;return reactExports.createElement(Link,{...x,"aria-current":N,className:ee,ref:w,style:Se,to:u,viewTransition:p},typeof d=="function"?d(J):d)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:e="render",fetcherKey:r,navigate:s,reloadDocument:o,replace:c,state:y,method:u=defaultMethod,action:p,onSubmit:d,relative:x,preventScrollReset:w,viewTransition:v,unstable_defaultShouldRevalidate:R,...O},C)=>{let{unstable_useTransitions:k}=reactExports.useContext(NavigationContext),K=useSubmit(),Z=useFormAction(p,{relative:x}),X=u.toLowerCase()==="get"?"get":"post",S=typeof p=="string"&&ABSOLUTE_URL_REGEX2.test(p),F=B=>{if(d&&d(B),B.defaultPrevented)return;B.preventDefault();let W=B.nativeEvent.submitter,J=W?.getAttribute("formmethod")||u,N=()=>K(W||B.currentTarget,{fetcherKey:r,method:J,navigate:s,replace:c,state:y,relative:x,preventScrollReset:w,viewTransition:v,unstable_defaultShouldRevalidate:R});k&&s!==!1?reactExports.startTransition(()=>N()):N()};return reactExports.createElement("form",{ref:C,method:X,action:Z,onSubmit:o?d:F,...O,"data-discover":!S&&e==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(e){let r=reactExports.useContext(DataRouterContext);return invariant$1(r,getDataRouterConsoleError2(e)),r}function useLinkClickHandler(e,{target:r,replace:s,state:o,preventScrollReset:c,relative:y,viewTransition:u,unstable_defaultShouldRevalidate:p,unstable_useTransitions:d}={}){let x=useNavigate(),w=useLocation(),v=useResolvedPath(e,{relative:y});return reactExports.useCallback(R=>{if(shouldProcessLinkClick(R,r)){R.preventDefault();let O=s!==void 0?s:createPath(w)===createPath(v),C=()=>x(e,{replace:O,state:o,preventScrollReset:c,relative:y,viewTransition:u,unstable_defaultShouldRevalidate:p});d?reactExports.startTransition(()=>C()):C()}},[w,x,v,s,o,r,e,c,y,u,p,d])}function useSearchParams(e){warning(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=reactExports.useRef(createSearchParams(e)),s=reactExports.useRef(!1),o=useLocation(),c=reactExports.useMemo(()=>getSearchParamsForLocation(o.search,s.current?null:r.current),[o.search]),y=useNavigate(),u=reactExports.useCallback((p,d)=>{const x=createSearchParams(typeof p=="function"?p(new URLSearchParams(c)):p);s.current=!0,y("?"+x,d)},[y,c]);return[c,u]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:e}=useDataRouterContext3("useSubmit"),{basename:r}=reactExports.useContext(NavigationContext),s=useRouteId(),o=e.fetch,c=e.navigate;return reactExports.useCallback(async(y,u={})=>{let{action:p,method:d,encType:x,formData:w,body:v}=getFormSubmissionInfo(y,r);if(u.navigate===!1){let R=u.fetcherKey||getUniqueFetcherId();await o(R,s,u.action||p,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:w,body:v,formMethod:u.method||d,formEncType:u.encType||x,flushSync:u.flushSync})}else await c(u.action||p,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:w,body:v,formMethod:u.method||d,formEncType:u.encType||x,replace:u.replace,state:u.state,fromRouteId:s,flushSync:u.flushSync,viewTransition:u.viewTransition})},[o,c,r,s])}function useFormAction(e,{relative:r}={}){let{basename:s}=reactExports.useContext(NavigationContext),o=reactExports.useContext(RouteContext);invariant$1(o,"useFormAction must be used inside a RouteContext");let[c]=o.matches.slice(-1),y={...useResolvedPath(e||".",{relative:r})},u=useLocation();if(e==null){y.search=u.search;let p=new URLSearchParams(y.search),d=p.getAll("index");if(d.some(w=>w==="")){p.delete("index"),d.filter(v=>v).forEach(v=>p.append("index",v));let w=p.toString();y.search=w?`?${w}`:""}}return(!e||e===".")&&c.route.index&&(y.search=y.search?y.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(y.pathname=y.pathname==="/"?s:joinPaths([s,y.pathname])),createPath(y)}function useViewTransitionState(e,{relative:r}={}){let s=reactExports.useContext(ViewTransitionContext);invariant$1(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=useDataRouterContext3("useViewTransitionState"),c=useResolvedPath(e,{relative:r});if(!s.isTransitioning)return!1;let y=stripBasename(s.currentLocation.pathname,o)||s.currentLocation.pathname,u=stripBasename(s.nextLocation.pathname,o)||s.nextLocation.pathname;return matchPath(c.pathname,u)!=null||matchPath(c.pathname,y)!=null}const corsProxies=[{name:"cors-materialscloud",urlRule:e=>`https://cors.materialscloud.org/${e}`}],elements=[{num:1,sym:"H",row:1,col:1,group:"group1"},{num:2,sym:"He",row:1,col:18,group:"group18"},{num:3,sym:"Li",row:2,col:1,group:"group1"},{num:4,sym:"Be",row:2,col:2,group:"group2"},{num:5,sym:"B",row:2,col:13,group:"metalloid"},{num:6,sym:"C",row:2,col:14,group:"mainGroup"},{num:7,sym:"N",row:2,col:15,group:"mainGroup"},{num:8,sym:"O",row:2,col:16,group:"mainGroup"},{num:9,sym:"F",row:2,col:17,group:"group17"},{num:10,sym:"Ne",row:2,col:18,group:"group18"},{num:11,sym:"Na",row:3,col:1,group:"group1"},{num:12,sym:"Mg",row:3,col:2,group:"group2"},{num:13,sym:"Al",row:3,col:13,group:"postTransition"},{num:14,sym:"Si",row:3,col:14,group:"metalloid"},{num:15,sym:"P",row:3,col:15,group:"mainGroup"},{num:16,sym:"S",row:3,col:16,group:"mainGroup"},{num:17,sym:"Cl",row:3,col:17,group:"group17"},{num:18,sym:"Ar",row:3,col:18,group:"group18"},{num:19,sym:"K",row:4,col:1,group:"group1"},{num:20,sym:"Ca",row:4,col:2,group:"group2"},{num:21,sym:"Sc",row:4,col:3,group:"transition"},{num:22,sym:"Ti",row:4,col:4,group:"transition"},{num:23,sym:"V",row:4,col:5,group:"transition"},{num:24,sym:"Cr",row:4,col:6,group:"transition"},{num:25,sym:"Mn",row:4,col:7,group:"transition"},{num:26,sym:"Fe",row:4,col:8,group:"transition"},{num:27,sym:"Co",row:4,col:9,group:"transition"},{num:28,sym:"Ni",row:4,col:10,group:"transition"},{num:29,sym:"Cu",row:4,col:11,group:"transition"},{num:30,sym:"Zn",row:4,col:12,group:"transition"},{num:31,sym:"Ga",row:4,col:13,group:"postTransition"},{num:32,sym:"Ge",row:4,col:14,group:"metalloid"},{num:33,sym:"As",row:4,col:15,group:"metalloid"},{num:34,sym:"Se",row:4,col:16,group:"mainGroup"},{num:35,sym:"Br",row:4,col:17,group:"group17"},{num:36,sym:"Kr",row:4,col:18,group:"group18"},{num:37,sym:"Rb",row:5,col:1,group:"group1"},{num:38,sym:"Sr",row:5,col:2,group:"group2"},{num:39,sym:"Y",row:5,col:3,group:"transition"},{num:40,sym:"Zr",row:5,col:4,group:"transition"},{num:41,sym:"Nb",row:5,col:5,group:"transition"},{num:42,sym:"Mo",row:5,col:6,group:"transition"},{num:43,sym:"Tc",row:5,col:7,group:"transition"},{num:44,sym:"Ru",row:5,col:8,group:"transition"},{num:45,sym:"Rh",row:5,col:9,group:"transition"},{num:46,sym:"Pd",row:5,col:10,group:"transition"},{num:47,sym:"Ag",row:5,col:11,group:"transition"},{num:48,sym:"Cd",row:5,col:12,group:"transition"},{num:49,sym:"In",row:5,col:13,group:"postTransition"},{num:50,sym:"Sn",row:5,col:14,group:"postTransition"},{num:51,sym:"Sb",row:5,col:15,group:"metalloid"},{num:52,sym:"Te",row:5,col:16,group:"metalloid"},{num:53,sym:"I",row:5,col:17,group:"group17"},{num:54,sym:"Xe",row:5,col:18,group:"group18"},{num:55,sym:"Cs",row:6,col:1,group:"group1"},{num:56,sym:"Ba",row:6,col:2,group:"group2"},{num:72,sym:"Hf",row:6,col:4,group:"transition"},{num:73,sym:"Ta",row:6,col:5,group:"transition"},{num:74,sym:"W",row:6,col:6,group:"transition"},{num:75,sym:"Re",row:6,col:7,group:"transition"},{num:76,sym:"Os",row:6,col:8,group:"transition"},{num:77,sym:"Ir",row:6,col:9,group:"transition"},{num:78,sym:"Pt",row:6,col:10,group:"transition"},{num:79,sym:"Au",row:6,col:11,group:"transition"},{num:80,sym:"Hg",row:6,col:12,group:"transition"},{num:81,sym:"Tl",row:6,col:13,group:"postTransition"},{num:82,sym:"Pb",row:6,col:14,group:"postTransition"},{num:83,sym:"Bi",row:6,col:15,group:"postTransition"},{num:84,sym:"Po",row:6,col:16,group:"postTransition"},{num:85,sym:"At",row:6,col:17,group:"group17"},{num:86,sym:"Rn",row:6,col:18,group:"group18"},{num:87,sym:"Fr",row:7,col:1,group:"group1"},{num:88,sym:"Ra",row:7,col:2,group:"group2"},{num:104,sym:"Rf",row:7,col:4,group:"transition"},{num:105,sym:"Db",row:7,col:5,group:"transition"},{num:106,sym:"Sg",row:7,col:6,group:"transition"},{num:107,sym:"Bh",row:7,col:7,group:"transition"},{num:108,sym:"Hs",row:7,col:8,group:"transition"},{num:109,sym:"Mt",row:7,col:9,group:"bg-lime-200"},{num:110,sym:"Ds",row:7,col:10,group:"bg-lime-200"},{num:111,sym:"Rg",row:7,col:11,group:"bg-lime-200"},{num:112,sym:"Cn",row:7,col:12,group:"bg-lime-200"},{num:113,sym:"Nh",row:7,col:13,group:"bg-lime-200"},{num:114,sym:"Fl",row:7,col:14,group:"bg-lime-200"},{num:115,sym:"Mc",row:7,col:15,group:"bg-lime-200"},{num:116,sym:"Lv",row:7,col:16,group:"bg-lime-200"},{num:117,sym:"Ts",row:7,col:17,group:"bg-lime-200"},{num:118,sym:"Og",row:7,col:18,group:"bg-lime-200"},{num:57,sym:"La",row:12,col:3,group:"lanthanide"},{num:58,sym:"Ce",row:12,col:4,group:"lanthanide"},{num:59,sym:"Pr",row:12,col:5,group:"lanthanide"},{num:60,sym:"Nd",row:12,col:6,group:"lanthanide"},{num:61,sym:"Pm",row:12,col:7,group:"lanthanide"},{num:62,sym:"Sm",row:12,col:8,group:"lanthanide"},{num:63,sym:"Eu",row:12,col:9,group:"lanthanide"},{num:64,sym:"Gd",row:12,col:10,group:"lanthanide"},{num:65,sym:"Tb",row:12,col:11,group:"lanthanide"},{num:66,sym:"Dy",row:12,col:12,group:"lanthanide"},{num:67,sym:"Ho",row:12,col:13,group:"lanthanide"},{num:68,sym:"Er",row:12,col:14,group:"lanthanide"},{num:69,sym:"Tm",row:12,col:15,group:"lanthanide"},{num:70,sym:"Yb",row:12,col:16,group:"lanthanide"},{num:71,sym:"Lu",row:12,col:17,group:"lanthanide"},{num:89,sym:"Ac",row:13,col:3,group:"actinide"},{num:90,sym:"Th",row:13,col:4,group:"actinide"},{num:91,sym:"Pa",row:13,col:5,group:"actinide"},{num:92,sym:"U",row:13,col:6,group:"actinide"},{num:93,sym:"Np",row:13,col:7,group:"actinide"},{num:94,sym:"Pu",row:13,col:8,group:"actinide"},{num:95,sym:"Am",row:13,col:9,group:"actinide"},{num:96,sym:"Cm",row:13,col:10,group:"actinide"},{num:97,sym:"Bk",row:13,col:11,group:"actinide"},{num:98,sym:"Cf",row:13,col:12,group:"actinide"},{num:99,sym:"Es",row:13,col:13,group:"actinide"},{num:100,sym:"Fm",row:13,col:14,group:"actinide"},{num:101,sym:"Md",row:13,col:15,group:"actinide"},{num:102,sym:"No",row:13,col:16,group:"actinide"},{num:103,sym:"Lr",row:13,col:17,group:"actinide"}];async function fetchWithCorsFallback(e){const r=[{name:"direct",url:e},...corsProxies.map(s=>({name:s.name,url:s.urlRule(e)}))];for(const{url:s}of r)try{const o=await fetch(s);if(!o.ok)continue;return await o.json()}catch{continue}throw new Error("All fetch attempts failed")}async function getProvidersList(e="https://raw.githubusercontent.com/Materials-Consortia/providers/refs/heads/master/src/links/v1/providers.json",r=[]){async function s(y){const u=await fetch(y);if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);return await u.json()}let o;try{o=await s(e)}catch(y){console.warn("Remote fetch failed, falling back to cachedProviders.json:",y);try{o=await s("cachedProviders.json")}catch(u){throw console.error("Both remote and local fetches failed:",u),u}}const c=o.data.filter(y=>!r.includes(y.id));return{...o,data:c}}async function getProviderLinks(e){try{return{children:((await fetchWithCorsFallback(`${e}/v1/links`)).data||[]).filter(o=>o.attributes?.link_type==="child"),error:null}}catch(r){return{children:[],error:r}}}async function getCustomInfo({baseUrl:e}){try{const r=await fetchWithCorsFallback(`${e}/info/`);if(!r||!r.meta)throw new Error("Invalid OPTIMADE response");return{meta:r.meta}}catch(r){throw r}}async function getInfo({providerUrl:e}){try{const s=(await fetchWithCorsFallback(`${e}/info/structures`)).data?.properties??{};return{customProps:Object.fromEntries(Object.entries(s).filter(([c])=>c.startsWith("_"))),allProps:s,error:null}}catch(r){return{customProps:{},allProps:{},error:r}}}async function getStructures({providerUrl:e,filter:r="",page:s=1,pageSize:o=20}){if(!e)throw new Error("Provider URL is required");await new Promise(K=>setTimeout(K,1e3));const c=["cartesian_site_positions","species_at_sites","lattice_vectors","chemical_formula_descriptive","chemical_formula_hill"],y=(s-1)*o,u=r?`?filter=${encodeURIComponent(r)}&page_offset=${y}`:`?page_offset=${y}`,p=`${e}/v1/structures${u}`;let d;try{d=await fetchWithCorsFallback(p,corsProxies)}catch{throw new Error("Failed to fetch base structures")}const x=d?.data??[];if(!x.length)return d;const w=x[0].attributes??{},v=new Set(Object.keys(w)),R=c.filter(K=>!v.has(K));if(!R.length)return d;const O=`${e}/v1/structures${u}&response_fields=${R.join(",")}`;let C;try{C=await fetchWithCorsFallback(O,corsProxies)}catch{return console.warn("Failed to fetch missing fields, returning base response"),d}const k=new Map((C.data??[]).map(K=>[K.id,K.attributes??{}]));return{...d,data:x.map(K=>({...K,attributes:{...K.attributes,...k.get(K.id)??{}}}))}}function OptimadeHeader(){return jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("img",{src:"/optimade_logo-min.png",alt:"OptimadeLogo",className:"h-18 sm:h-24 md:h-32 w-auto object-contain"})})}function HelpIcon({popover:e,size:r=24,color:s="currentColor",strokeWidthBorder:o=2,strokeWidth:c=2.5,placement:y="top",popoutBgColor:u="bg-gray-800",popoutTextColor:p="text-white",popoutStyleOverrides:d=""}){let x="";switch(y){case"top":x="bottom-full left-1/2 transform -translate-x-1/2 mb-2";break;case"bottom":x="top-full left-1/2 transform -translate-x-1/2 mt-2";break;case"left":x="right-full top-1/2 transform -translate-y-1/2 mr-2";break;case"right":x="left-full top-1/2 transform -translate-y-1/2 ml-2";break;default:x="bottom-full left-1/2 transform -translate-x-1/2 mb-2"}return jsxRuntimeExports.jsxs("span",{className:"relative inline-block group",children:[jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:o,strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",strokeWidth:c}),jsxRuntimeExports.jsx("path",{d:"M12 17h.01",strokeWidth:c})]}),e&&jsxRuntimeExports.jsx("span",{className:`absolute ${x} w-max max-w-xs rounded-sm ${u} ${p} text-xs p-1
          text-center opacity-0 group-hover:opacity-100 transition-opacity z-50 pointer-events-none ${d}`,children:e})]})}const defaultColors={group1:"bg-[#d7bbbb]",group2:"bg-[#d7cdbb]",group17:"bg-[#d7d9c2]",group18:"bg-[#d0d5ee]",transition:"bg-[#c4d0d8]",lanthanide:"bg-[#e5cbee]",actinide:"bg-[#aebcee]",metalloid:"bg-[#cdd9c2]",postTransition:"bg-[#c2c8d9]",mainGroup:"bg-[#d9c2ce]",default:"bg-gray-200"};function PTable({providerUrl:e=null,selected:r={},onSelectionChange:s,colors:o=defaultColors,selectedClassName:c="bg-green-400 border border-green-700 text-white scale-105",deselectedClassName:y="bg-red-400 border border-red-700 text-white scale-105",defaultBorderClassName:u="border border-slate-700",hoverClassName:p="transform transition-transform duration-100 hover:scale-105 hover:z-10 hover:cursor-pointer"}){const[d,x]=reactExports.useState(elements),[w,v]=reactExports.useState(null),[R,O]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{try{const Z=await fetch("./cachedPTable.json");if(!Z.ok)throw new Error("Failed to load cached PTable");const X=Z.headers.get("last-modified");if(X){const B=new Date(X).toLocaleDateString();O(B)}const S=await Z.json(),F={};S.forEach(B=>{F[B.providerUrl]=B.ptable}),v(F)}catch(Z){console.error("Failed to load cached PTable:",Z)}})()},[]),reactExports.useEffect(()=>{if(!e||!w)return;const K=w[e]||{},Z=elements.map(X=>({...X,present:X.sym in K?K[X.sym]:void 0}));x(Z)},[e,w]);const C=K=>{if(!s)return;const Z=((r[K]??0)+1)%3;s({[K]:Z})},k=K=>{const Z=r[K.sym]??0,X=o[K.group]??o.default;if(Z===1)return c;if(Z===2)return y;const S=K.present===!1?"opacity-30":"";return`${X} ${u} ${S}`};return jsxRuntimeExports.jsx("div",{className:"w-full max-w-full mx-auto px-0 md:px-2",children:jsxRuntimeExports.jsxs("div",{className:"@container",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-end pb-2 pr-1.5",children:jsxRuntimeExports.jsx(HelpIcon,{popover:`All OPTIMADE provider databases have been prefiltered, with unavailable structures greyed out. Last updated: ${R}.`,placement:"left",color:"rgb(40,40,40)"})}),jsxRuntimeExports.jsx("div",{className:"grid @gap-0.5 @sm:gap-1 w-full",style:{gridTemplateColumns:"repeat(18, minmax(0, 1fr))"},children:d.map(K=>jsxRuntimeExports.jsx("div",{style:{gridColumn:K.col,gridRow:K.row},className:"relative w-full",children:jsxRuntimeExports.jsx("div",{className:"w-full aspect-square",children:jsxRuntimeExports.jsxs("button",{onClick:()=>C(K.sym),className:`flex flex-col justify-center items-center w-full h-full rounded-sm ${p} ${k(K)}`,children:[jsxRuntimeExports.jsx("span",{className:"text-[0px] opacity-0 @sm:text-[0.3rem] @sm:opacity-100 @md:text-[0.5rem] @lg:text-[0.7rem] text-gray-700 leading-tight",children:K.num}),jsxRuntimeExports.jsx("span",{className:"text-[0.55rem] font-medium leading-none",style:{fontSize:"clamp(0.55rem, 2.5vw, 1.25rem)"},children:K.sym})]})})},K.sym))})]})})}const textNormal=" text-sm md:text-base",textLarge=" text-base md:text-lg",textHyperlink=" text-blue-500 hover:underline hover:text-blue-600",textSmall=" text-xs md:text-sm",textTiny=" text-[13px] md:text-[13px]",textError=" text-center text-red-500",baseButtonStyle=`px-2 py-1 md:px-3 md:py-1.5 rounded
 bg-blue-600 text-white 
 hover:bg-blue-700 hover:cursor-pointer
`,baseContainer="w-full border border-slate-500 rounded-sm bg-slate-50 shadow-sm ",containerStyle=baseContainer+" p-2",containerStyleDropdown=baseContainer+" overflow-hidden text-[11px] md:text-[13px]",containerStyleHalf=baseContainer+` p-2 md:w-1/2  min-h-48 md:h-[450px] h-[200px] text-[11px] md:text-[13px]
   overflow-auto`,warningContainerStyle="w-full rounded-sm bg-yellow-100 border border-yellow-400 text-yellow-800 p-3 text-center";function QueryTextBox({value:e,onChange:r,placeholder:s="Enter OPTIMADE filter",onSubmit:o,loading:c=!1}){return jsxRuntimeExports.jsx("div",{className:textNormal,children:jsxRuntimeExports.jsxs("form",{onSubmit:y=>{y.preventDefault(),o?.()},className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"text",value:e,onChange:y=>r(y.target.value),placeholder:s,className:`${containerStyle} border-gray-300! bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 `}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:c,className:`${baseButtonStyle} disabled:opacity-50`,children:c?"Loading":"Query"})]})})}var lib={},Range={},utils={},types={},hasRequiredTypes;function requireTypes(){if(hasRequiredTypes)return types;hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0}),types.Direction=void 0;var e;return(function(r){r.Right="to right",r.Left="to left",r.Down="to bottom",r.Up="to top"})(e||(types.Direction=e={})),types}var hasRequiredUtils;function requireUtils(){return hasRequiredUtils||(hasRequiredUtils=1,(function(e){var r=utils&&utils.__spreadArray||function(ge,me,Ce){if(Ce||arguments.length===2)for(var ue=0,L=me.length,he;ue<L;ue++)(he||!(ue in me))&&(he||(he=Array.prototype.slice.call(me,0,ue)),he[ue]=me[ue]);return ge.concat(he||Array.prototype.slice.call(me))};Object.defineProperty(e,"__esModule",{value:!0}),e.isIOS=e.useThumbOverlap=e.assertUnreachable=e.voidFn=e.getTrackBackground=e.replaceAt=e.schd=e.translate=e.getClosestThumbIndex=e.translateThumbs=e.getPaddingAndBorder=e.getMargin=e.checkInitialOverlap=e.checkValuesAgainstBoundaries=e.checkBoundaries=e.isVertical=e.relativeValue=e.normalizeValue=e.isStepDivisible=e.isTouchEvent=e.getStepDecimals=void 0;var s=requireReact(),o=requireTypes(),c=function(ge){var me=ge.toString().split(".")[1];return me?me.length:0};e.getStepDecimals=c;function y(ge){return ge.touches&&ge.touches.length||ge.changedTouches&&ge.changedTouches.length}e.isTouchEvent=y;function u(ge,me,Ce){var ue=(me-ge)/Ce,L=8,he=Number(ue.toFixed(L));return parseInt(he.toString(),10)===he}e.isStepDivisible=u;function p(ge,me,Ce,ue,L,he,se){var q=1e11;if(ge=Math.round(ge*q)/q,!he){var ke=se[me-1],fe=se[me+1];if(ke&&ke>ge)return ke;if(fe&&fe<ge)return fe}if(ge>ue)return ue;if(ge<Ce)return Ce;var De=Math.floor(ge*q-Ce*q)%Math.floor(L*q),He=Math.floor(ge*q-Math.abs(De)),ae=De===0?ge:He/q,Ae=Math.abs(De/q)<L/2?ae:ae+L,We=(0,e.getStepDecimals)(L);return parseFloat(Ae.toFixed(We))}e.normalizeValue=p;function d(ge,me,Ce){return(ge-me)/(Ce-me)}e.relativeValue=d;function x(ge){return ge===o.Direction.Up||ge===o.Direction.Down}e.isVertical=x;function w(ge,me,Ce){if(me>=Ce)throw new RangeError("min (".concat(me,") is equal/bigger than max (").concat(Ce,")"));if(ge<me)throw new RangeError("value (".concat(ge,") is smaller than min (").concat(me,")"));if(ge>Ce)throw new RangeError("value (".concat(ge,") is bigger than max (").concat(Ce,")"))}e.checkBoundaries=w;function v(ge,me,Ce){return ge<me?me:ge>Ce?Ce:ge}e.checkValuesAgainstBoundaries=v;function R(ge){if(!(ge.length<2)&&!ge.slice(1).every(function(me,Ce){return ge[Ce]<=me}))throw new RangeError("values={[".concat(ge,"]} needs to be sorted when allowOverlap={false}"))}e.checkInitialOverlap=R;function O(ge){var me=window.getComputedStyle(ge);return{top:parseInt(me["margin-top"],10),bottom:parseInt(me["margin-bottom"],10),left:parseInt(me["margin-left"],10),right:parseInt(me["margin-right"],10)}}e.getMargin=O;function C(ge){var me=window.getComputedStyle(ge);return{top:parseInt(me["padding-top"],10)+parseInt(me["border-top-width"],10),bottom:parseInt(me["padding-bottom"],10)+parseInt(me["border-bottom-width"],10),left:parseInt(me["padding-left"],10)+parseInt(me["border-left-width"],10),right:parseInt(me["padding-right"],10)+parseInt(me["border-right-width"],10)}}e.getPaddingAndBorder=C;function k(ge,me,Ce){var ue=Ce?-1:1;ge.forEach(function(L,he){return Z(L,ue*me[he].x,me[he].y)})}e.translateThumbs=k;function K(ge,me,Ce,ue){for(var L=0,he=Se(ge[0],me,Ce,ue),se=1;se<ge.length;se++){var q=Se(ge[se],me,Ce,ue);q<he&&(he=q,L=se)}return L}e.getClosestThumbIndex=K;function Z(ge,me,Ce){ge.style.transform="translate(".concat(me,"px, ").concat(Ce,"px)")}e.translate=Z;var X=function(ge){var me=[],Ce=null,ue=function(){for(var L=[],he=0;he<arguments.length;he++)L[he]=arguments[he];me=L,!Ce&&(Ce=requestAnimationFrame(function(){Ce=null,ge.apply(void 0,me)}))};return ue};e.schd=X;function S(ge,me,Ce){var ue=ge.slice(0);return ue[me]=Ce,ue}e.replaceAt=S;function F(ge){var me=ge.values,Ce=ge.colors,ue=ge.min,L=ge.max,he=ge.direction,se=he===void 0?o.Direction.Right:he,q=ge.rtl,ke=q===void 0?!1:q;ke&&se===o.Direction.Right?se=o.Direction.Left:ke&&o.Direction.Left&&(se=o.Direction.Right);var fe=me.slice(0).sort(function(He,ae){return He-ae}).map(function(He){return(He-ue)/(L-ue)*100}),De=fe.reduce(function(He,ae,Ae){return"".concat(He,", ").concat(Ce[Ae]," ").concat(ae,"%, ").concat(Ce[Ae+1]," ").concat(ae,"%")},"");return"linear-gradient(".concat(se,", ").concat(Ce[0]," 0%").concat(De,", ").concat(Ce[Ce.length-1]," 100%)")}e.getTrackBackground=F;function B(){}e.voidFn=B;function W(ge){throw new Error("Didn't expect to get here")}e.assertUnreachable=W;var J=function(ge,me,Ce,ue,L){L===void 0&&(L=function(se){return se});var he=Math.ceil(r([ge],Array.from(ge.children),!0).reduce(function(se,q){var ke=Math.ceil(q.getBoundingClientRect().width);if(q.innerText&&q.innerText.includes(Ce)&&q.childElementCount===0){var fe=q.cloneNode(!0);fe.innerHTML=L(me.toFixed(ue)),fe.style.visibility="hidden",document.body.appendChild(fe),ke=Math.ceil(fe.getBoundingClientRect().width),document.body.removeChild(fe)}return ke>se?ke:se},ge.getBoundingClientRect().width));return he},N=function(ge,me,Ce,ue,L,he,se){se===void 0&&(se=function(fe){return fe});var q=[],ke=function(fe){var De=J(Ce[fe],ue[fe],L,he,se),He=me[fe].x;me.forEach(function(ae,Ae){var We=ae.x,qe=J(Ce[Ae],ue[Ae],L,he,se);fe!==Ae&&(He>=We&&He<=We+qe||He+De>=We&&He+De<=We+qe)&&(q.includes(Ae)||(q.push(fe),q.push(Ae),q=r(r([],q,!0),[fe,Ae],!1),ke(Ae)))})};return ke(ge),Array.from(new Set(q.sort()))},ee=function(ge,me,Ce,ue,L,he){ue===void 0&&(ue=.1),L===void 0&&(L=" - "),he===void 0&&(he=function(Ae){return Ae});var se=(0,e.getStepDecimals)(ue),q=(0,s.useState)({}),ke=q[0],fe=q[1],De=(0,s.useState)(he(me[Ce].toFixed(se))),He=De[0],ae=De[1];return(0,s.useEffect)(function(){if(ge){var Ae=ge.getThumbs();if(Ae.length<1)return;var We={},qe=ge.getOffsets(),Fe=N(Ce,qe,Ae,me,L,se,he),rt=he(me[Ce].toFixed(se));if(Fe.length){var at=Fe.reduce(function(or,Mr,Er,pr){return or.length?r(r([],or,!0),[qe[pr[Er]].x],!1):[qe[pr[Er]].x]},[]);if(Math.min.apply(Math,at)===qe[Ce].x){var ot=[];Fe.forEach(function(or){ot.push(me[or].toFixed(se))}),rt=Array.from(new Set(ot.sort(function(or,Mr){return parseFloat(or)-parseFloat(Mr)}))).map(he).join(L);var Ft=Math.min.apply(Math,at),Ct=Math.max.apply(Math,at),ar=Ae[Fe[at.indexOf(Ct)]].getBoundingClientRect().width;We.left="".concat(Math.abs(Ft-(Ct+ar))/2,"px"),We.transform="translate(-50%, 0)"}else We.visibility="hidden"}ae(rt),fe(We)}},[ge,me]),[He,ke]};e.useThumbOverlap=ee;function Se(ge,me,Ce,ue){var L=ge.getBoundingClientRect(),he=L.left,se=L.top,q=L.width,ke=L.height;return x(ue)?Math.abs(Ce-(se+ke/2)):Math.abs(me-(he+q/2))}var ce=function(){var ge,me=((ge=navigator.userAgentData)===null||ge===void 0?void 0:ge.platform)||navigator.platform;return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(me)||navigator.userAgent.includes("Mac")&&"ontouchend"in document};e.isIOS=ce})(utils)),utils}var hasRequiredRange;function requireRange(){if(hasRequiredRange)return Range;hasRequiredRange=1;var e=Range&&Range.__extends||(function(){var v=function(R,O){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,k){C.__proto__=k}||function(C,k){for(var K in k)Object.prototype.hasOwnProperty.call(k,K)&&(C[K]=k[K])},v(R,O)};return function(R,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");v(R,O);function C(){this.constructor=R}R.prototype=O===null?Object.create(O):(C.prototype=O.prototype,new C)}})(),r=Range&&Range.__createBinding||(Object.create?(function(v,R,O,C){C===void 0&&(C=O);var k=Object.getOwnPropertyDescriptor(R,O);(!k||("get"in k?!R.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return R[O]}}),Object.defineProperty(v,C,k)}):(function(v,R,O,C){C===void 0&&(C=O),v[C]=R[O]})),s=Range&&Range.__setModuleDefault||(Object.create?(function(v,R){Object.defineProperty(v,"default",{enumerable:!0,value:R})}):function(v,R){v.default=R}),o=Range&&Range.__importStar||function(v){if(v&&v.__esModule)return v;var R={};if(v!=null)for(var O in v)O!=="default"&&Object.prototype.hasOwnProperty.call(v,O)&&r(R,v,O);return s(R,v),R},c=Range&&Range.__spreadArray||function(v,R,O){if(O||arguments.length===2)for(var C=0,k=R.length,K;C<k;C++)(K||!(C in R))&&(K||(K=Array.prototype.slice.call(R,0,C)),K[C]=R[C]);return v.concat(K||Array.prototype.slice.call(R))};Object.defineProperty(Range,"__esModule",{value:!0});var y=o(requireReact()),u=requireUtils(),p=requireTypes(),d=["ArrowRight","ArrowUp","k","PageUp"],x=["ArrowLeft","ArrowDown","j","PageDown"],w=(function(v){e(R,v);function R(O){var C=v.call(this,O)||this;if(C.trackRef=y.createRef(),C.thumbRefs=[],C.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(C.props.values.length).fill(0).map(function(k,K){return K}),isChanged:!1,markOffsets:[]},C.getOffsets=function(){var k=C.props,K=k.direction,Z=k.values,X=k.min,S=k.max,F=C.trackRef.current;if(!F)return console.warn("No track element found."),[];var B=F.getBoundingClientRect(),W=(0,u.getPaddingAndBorder)(F);return C.getThumbs().map(function(J,N){var ee={x:0,y:0},Se=J.getBoundingClientRect(),ce=(0,u.getMargin)(J);switch(K){case p.Direction.Right:return ee.x=(ce.left+W.left)*-1,ee.y=((Se.height-B.height)/2+W.top)*-1,ee.x+=B.width*(0,u.relativeValue)(Z[N],X,S)-Se.width/2,ee;case p.Direction.Left:return ee.x=(ce.right+W.right)*-1,ee.y=((Se.height-B.height)/2+W.top)*-1,ee.x+=B.width-B.width*(0,u.relativeValue)(Z[N],X,S)-Se.width/2,ee;case p.Direction.Up:return ee.x=((Se.width-B.width)/2+ce.left+W.left)*-1,ee.y=-W.left,ee.y+=B.height-B.height*(0,u.relativeValue)(Z[N],X,S)-Se.height/2,ee;case p.Direction.Down:return ee.x=((Se.width-B.width)/2+ce.left+W.left)*-1,ee.y=-W.left,ee.y+=B.height*(0,u.relativeValue)(Z[N],X,S)-Se.height/2,ee;default:return(0,u.assertUnreachable)(K)}})},C.getThumbs=function(){return C.trackRef&&C.trackRef.current?Array.from(C.trackRef.current.children).filter(function(k){return k.hasAttribute("aria-valuenow")}):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},C.getTargetIndex=function(k){return C.getThumbs().findIndex(function(K){return K===k.target||K.contains(k.target)})},C.addTouchEvents=function(k){document.addEventListener("touchmove",C.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",C.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",C.schdOnEnd,{passive:!1})},C.addMouseEvents=function(k){document.addEventListener("mousemove",C.schdOnMouseMove),document.addEventListener("mouseup",C.schdOnEnd)},C.onMouseDownTrack=function(k){var K;if(!(k.button!==0||(0,u.isIOS)()))if(k.persist(),k.preventDefault(),C.addMouseEvents(k.nativeEvent),C.props.values.length>1&&C.props.draggableTrack){if(C.thumbRefs.some(function(X){var S;return(S=X.current)===null||S===void 0?void 0:S.contains(k.target)}))return;C.setState({draggedTrackPos:[k.clientX,k.clientY]},function(){return C.onMove(k.clientX,k.clientY)})}else{var Z=(0,u.getClosestThumbIndex)(C.thumbRefs.map(function(X){return X.current}),k.clientX,k.clientY,C.props.direction);(K=C.thumbRefs[Z].current)===null||K===void 0||K.focus(),C.setState({draggedThumbIndex:Z},function(){return C.onMove(k.clientX,k.clientY)})}},C.onResize=function(){(0,u.translateThumbs)(C.getThumbs(),C.getOffsets(),C.props.rtl),C.calculateMarkOffsets()},C.onTouchStartTrack=function(k){var K;if(k.persist(),C.addTouchEvents(k.nativeEvent),C.props.values.length>1&&C.props.draggableTrack){if(C.thumbRefs.some(function(X){var S;return(S=X.current)===null||S===void 0?void 0:S.contains(k.target)}))return;C.setState({draggedTrackPos:[k.touches[0].clientX,k.touches[0].clientY]},function(){return C.onMove(k.touches[0].clientX,k.touches[0].clientY)})}else{var Z=(0,u.getClosestThumbIndex)(C.thumbRefs.map(function(X){return X.current}),k.touches[0].clientX,k.touches[0].clientY,C.props.direction);(K=C.thumbRefs[Z].current)===null||K===void 0||K.focus(),C.setState({draggedThumbIndex:Z},function(){return C.onMove(k.touches[0].clientX,k.touches[0].clientY)})}},C.onMouseOrTouchStart=function(k){if(!C.props.disabled){var K=(0,u.isTouchEvent)(k);if(!(!K&&k.button!==0)){var Z=C.getTargetIndex(k);Z!==-1&&(K?C.addTouchEvents(k):C.addMouseEvents(k),C.setState({draggedThumbIndex:Z,thumbZIndexes:C.state.thumbZIndexes.map(function(X,S){return S===Z?Math.max.apply(Math,C.state.thumbZIndexes):X<=C.state.thumbZIndexes[Z]?X:X-1})}))}}},C.onMouseMove=function(k){k.preventDefault(),C.onMove(k.clientX,k.clientY)},C.onTouchMove=function(k){k.preventDefault(),C.onMove(k.touches[0].clientX,k.touches[0].clientY)},C.onKeyDown=function(k){var K=C.props,Z=K.values,X=K.onChange,S=K.step,F=K.rtl,B=K.direction,W=C.state.isChanged,J=C.getTargetIndex(k.nativeEvent),N=F||B===p.Direction.Left||B===p.Direction.Down?-1:1;J!==-1&&(d.includes(k.key)?(k.preventDefault(),C.setState({draggedThumbIndex:J,isChanged:!0}),X((0,u.replaceAt)(Z,J,C.normalizeValue(Z[J]+N*(k.key==="PageUp"?S*10:S),J)))):x.includes(k.key)?(k.preventDefault(),C.setState({draggedThumbIndex:J,isChanged:!0}),X((0,u.replaceAt)(Z,J,C.normalizeValue(Z[J]-N*(k.key==="PageDown"?S*10:S),J)))):k.key==="Tab"?C.setState({draggedThumbIndex:-1},function(){W&&C.fireOnFinalChange()}):W&&C.fireOnFinalChange())},C.onKeyUp=function(k){var K=C.state.isChanged;C.setState({draggedThumbIndex:-1},function(){K&&C.fireOnFinalChange()})},C.onMove=function(k,K){var Z=C.state,X=Z.draggedThumbIndex,S=Z.draggedTrackPos,F=C.props,B=F.direction,W=F.min,J=F.max,N=F.onChange,ee=F.values,Se=F.step,ce=F.rtl;if(X===-1&&S[0]===-1&&S[1]===-1)return null;var ge=C.trackRef.current;if(!ge)return null;var me=ge.getBoundingClientRect(),Ce=(0,u.isVertical)(B)?me.height:me.width;if(S[0]!==-1&&S[1]!==-1){var ue=k-S[0],L=K-S[1],he=0;switch(B){case p.Direction.Right:case p.Direction.Left:he=ue/Ce*(J-W);break;case p.Direction.Down:case p.Direction.Up:he=L/Ce*(J-W);break;default:(0,u.assertUnreachable)(B)}if(ce&&(he*=-1),Math.abs(he)>=Se/2){for(var se=0;se<C.thumbRefs.length;se++){if(ee[se]===J&&Math.sign(he)===1||ee[se]===W&&Math.sign(he)===-1)return;var q=ee[se]+he;q>J?he=J-ee[se]:q<W&&(he=W-ee[se])}for(var ke=ee.slice(0),se=0;se<C.thumbRefs.length;se++)ke=(0,u.replaceAt)(ke,se,C.normalizeValue(ee[se]+he,se));C.setState({draggedTrackPos:[k,K]}),N(ke)}}else{var fe=0;switch(B){case p.Direction.Right:fe=(k-me.left)/Ce*(J-W)+W;break;case p.Direction.Left:fe=(Ce-(k-me.left))/Ce*(J-W)+W;break;case p.Direction.Down:fe=(K-me.top)/Ce*(J-W)+W;break;case p.Direction.Up:fe=(Ce-(K-me.top))/Ce*(J-W)+W;break;default:(0,u.assertUnreachable)(B)}ce&&(fe=J+W-fe),Math.abs(ee[X]-fe)>=Se/2&&N((0,u.replaceAt)(ee,X,C.normalizeValue(fe,X)))}},C.normalizeValue=function(k,K){var Z=C.props,X=Z.min,S=Z.max,F=Z.step,B=Z.allowOverlap,W=Z.values;return(0,u.normalizeValue)(k,K,X,S,F,B,W)},C.onEnd=function(k){if(k.preventDefault(),document.removeEventListener("mousemove",C.schdOnMouseMove),document.removeEventListener("touchmove",C.schdOnTouchMove),document.removeEventListener("mouseup",C.schdOnEnd),document.removeEventListener("touchend",C.schdOnEnd),document.removeEventListener("touchcancel",C.schdOnEnd),C.state.draggedThumbIndex===-1&&C.state.draggedTrackPos[0]===-1&&C.state.draggedTrackPos[1]===-1)return null;C.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},function(){C.fireOnFinalChange()})},C.fireOnFinalChange=function(){C.setState({isChanged:!1});var k=C.props,K=k.onFinalChange,Z=k.values;K&&K(Z)},C.updateMarkRefs=function(k){if(!k.renderMark){C.numOfMarks=void 0,C.markRefs=void 0;return}C.numOfMarks=(k.max-k.min)/C.props.step,C.markRefs=[];for(var K=0;K<C.numOfMarks+1;K++)C.markRefs[K]=y.createRef()},C.calculateMarkOffsets=function(){if(!(!C.props.renderMark||!C.trackRef||!C.numOfMarks||!C.markRefs||C.trackRef.current===null)){for(var k=window.getComputedStyle(C.trackRef.current),K=parseInt(k.width,10),Z=parseInt(k.height,10),X=parseInt(k.paddingLeft,10),S=parseInt(k.paddingTop,10),F=[],B=0;B<C.numOfMarks+1;B++){var W=9999,J=9999;if(C.markRefs[B].current){var N=C.markRefs[B].current.getBoundingClientRect();W=N.height,J=N.width}C.props.direction===p.Direction.Left||C.props.direction===p.Direction.Right?F.push([Math.round(K/C.numOfMarks*B+X-J/2),-Math.round((W-Z)/2)]):F.push([Math.round(Z/C.numOfMarks*B+S-W/2),-Math.round((J-K)/2)])}C.setState({markOffsets:F})}},O.step===0)throw new Error('"step" property should be a positive number');return C.schdOnMouseMove=(0,u.schd)(C.onMouseMove),C.schdOnTouchMove=(0,u.schd)(C.onTouchMove),C.schdOnEnd=(0,u.schd)(C.onEnd),C.thumbRefs=O.values.map(function(){return y.createRef()}),C.updateMarkRefs(O),C}return R.prototype.componentDidMount=function(){var O=this,C=this.props,k=C.values,K=C.min,Z=C.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",O.onResize)},unobserve:function(){return window.removeEventListener("resize",O.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),!this.props.allowOverlap&&(0,u.checkInitialOverlap)(this.props.values),this.props.values.forEach(function(X){return(0,u.checkBoundaries)(X,O.props.min,O.props.max)}),this.resizeObserver.observe(this.trackRef.current),(0,u.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),k.forEach(function(X){(0,u.isStepDivisible)(K,X,Z)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})},R.prototype.componentDidUpdate=function(O,C){var k=this.props,K=k.max,Z=k.min,X=k.step,S=k.values,F=k.rtl;(O.max!==K||O.min!==Z||O.step!==X)&&this.updateMarkRefs(this.props),(0,u.translateThumbs)(this.getThumbs(),this.getOffsets(),F),(O.max!==K||O.min!==Z||O.step!==X||C.markOffsets.length!==this.state.markOffsets.length)&&(this.calculateMarkOffsets(),S.forEach(function(B){(0,u.isStepDivisible)(Z,B,X)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},R.prototype.componentWillUnmount=function(){var O={passive:!1};document.removeEventListener("mousedown",this.onMouseOrTouchStart,O),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},R.prototype.render=function(){var O=this,C=this.props,k=C.label,K=C.labelledBy,Z=C.renderTrack,X=C.renderThumb,S=C.renderMark,F=S===void 0?function(){return null}:S,B=C.values,W=C.min,J=C.max,N=C.allowOverlap,ee=C.disabled,Se=this.state,ce=Se.draggedThumbIndex,ge=Se.thumbZIndexes,me=Se.markOffsets;return Z({props:{style:{transform:"scale(1)",cursor:ce>-1?"grabbing":this.props.draggableTrack?(0,u.isVertical)(this.props.direction)?"ns-resize":"ew-resize":B.length===1&&!ee?"pointer":"inherit"},onMouseDown:ee?u.voidFn:this.onMouseDownTrack,onTouchStart:ee?u.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:this.state.draggedThumbIndex>-1,disabled:ee,children:c(c([],me.map(function(Ce,ue,L){return F({props:{style:O.props.direction===p.Direction.Left||O.props.direction===p.Direction.Right?{position:"absolute",left:"".concat(Ce[0],"px"),marginTop:"".concat(Ce[1],"px")}:{position:"absolute",top:"".concat(Ce[0],"px"),marginLeft:"".concat(Ce[1],"px")},key:"mark".concat(ue),ref:O.markRefs[ue]},index:ue})}),!0),B.map(function(Ce,ue){var L=O.state.draggedThumbIndex===ue;return X({index:ue,value:Ce,isDragged:L,props:{style:{position:"absolute",zIndex:ge[ue],cursor:ee?"inherit":L?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:ue,tabIndex:ee?void 0:0,"aria-valuemax":N?J:B[ue+1]||J,"aria-valuemin":N?W:B[ue-1]||W,"aria-valuenow":Ce,draggable:!1,ref:O.thumbRefs[ue],"aria-label":k,"aria-labelledby":K,role:"slider",onKeyDown:ee?u.voidFn:O.onKeyDown,onKeyUp:ee?u.voidFn:O.onKeyUp}})}),!0)})},R.defaultProps={label:"Accessibility label",labelledBy:null,step:1,direction:p.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},R})(y.Component);return Range.default=w,Range}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,(function(e){var r=lib&&lib.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.checkValuesAgainstBoundaries=e.relativeValue=e.useThumbOverlap=e.Direction=e.getTrackBackground=e.Range=void 0;var s=r(requireRange());e.Range=s.default;var o=requireUtils();Object.defineProperty(e,"getTrackBackground",{enumerable:!0,get:function(){return o.getTrackBackground}}),Object.defineProperty(e,"useThumbOverlap",{enumerable:!0,get:function(){return o.useThumbOverlap}}),Object.defineProperty(e,"relativeValue",{enumerable:!0,get:function(){return o.relativeValue}}),Object.defineProperty(e,"checkValuesAgainstBoundaries",{enumerable:!0,get:function(){return o.checkValuesAgainstBoundaries}});var c=requireTypes();Object.defineProperty(e,"Direction",{enumerable:!0,get:function(){return c.Direction}})})(lib)),lib}var libExports=requireLib();const inputOverride=`w-12 text-center bg-transparent border-none outline-none p-0
             [&::-webkit-inner-spin-button]:appearance-none
             [&::-webkit-outer-spin-button]:appearance-none
             [-moz-appearance:textfield]`,sliderBgStyle="flex-1 h-2 bg-gray-300 rounded relative",sliderFgStyle="absolute h-2 bg-blue-500 rounded",sliderThumbStyle="w-4.5 h-4.5 bg-slate-100 border-2 border-slate-400 rounded-full transition-transform transform origin-center hover:scale-125";function RangeSlider({title:e,value:r,onChange:s,min:o,max:c}){const[y,u]=reactExports.useState(r.map(String));reactExports.useEffect(()=>{u(r.map(String))},[r]);const p=(x,w)=>{u(R=>{const O=[...R];return O[x]=w,O});const v=parseFloat(w);if(!isNaN(v)){let R=[...r];x===0?R[0]=Math.min(Math.max(v,o),r[1]):R[1]=Math.max(Math.min(v,c),r[0]),s(R)}},d=x=>{const w=parseFloat(y[x]);isNaN(w)&&u(v=>{const R=[...v];return R[x]=String(r[x]),R})};return jsxRuntimeExports.jsxs("div",{className:`${textNormal} p-2  pt-4`,children:[jsxRuntimeExports.jsx("label",{className:"block",children:e}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2.5 items-center",children:[jsxRuntimeExports.jsx("input",{type:"number",value:y[0],placeholder:o,min:o,max:r[1],onChange:x=>p(0,x.target.value),onBlur:()=>d(0),className:inputOverride}),jsxRuntimeExports.jsx(libExports.Range,{step:1,min:o,max:c,values:r,onChange:s,renderTrack:({props:x,children:w})=>jsxRuntimeExports.jsxs("div",{...x,className:sliderBgStyle,children:[jsxRuntimeExports.jsx("div",{className:sliderFgStyle,style:{left:`${(r[0]-o)/(c-o)*100}%`,width:`${(r[1]-r[0])/(c-o)*100}%`}}),w]}),renderThumb:({props:x})=>jsxRuntimeExports.jsx("div",{...x,className:"relative w-5 h-5 flex items-center",children:jsxRuntimeExports.jsx("div",{className:sliderThumbStyle})})}),jsxRuntimeExports.jsx("input",{type:"number",value:y[1],placeholder:c,min:r[0],max:c,onChange:x=>p(1,x.target.value),onBlur:()=>d(1),className:`${inputOverride} ${textSmall}`})]})]})}function buildQueryString(e,r,s,o,c){const y=[],u=[],p=[];for(const[d,x]of Object.entries(s))x===1&&u.push(d),x===2&&p.push(d);return p.length&&y.push(`NOT elements HAS ANY ${p.map(d=>`"${d}"`).join(", ")}`),u.length&&y.push(`elements HAS ALL ${u.map(d=>`"${d}"`).join(", ")}`),o[0]!==e[0]&&y.push(`nelements>=${o[0]}`),o[1]!==e[1]&&y.push(`nelements<=${o[1]}`),c[0]!==r[0]&&y.push(`nsites>=${c[0]}`),c[1]!==r[1]&&y.push(`nsites<=${c[1]}`),y.join(" AND ")}function OptimadeFilters({queryUrl:e,initialFilter:r,onSubmit:s}){const[o,c]=reactExports.useState([1,118]),[y,u]=reactExports.useState([1,1e3]),[p,d]=reactExports.useState({}),[x,w]=reactExports.useState(!1),[v,R]=reactExports.useState(r||""),O=buildQueryString([1,118],[1,1e3],p,o,y),C=x?v:O,k=()=>{s(C)},K=()=>{w(Z=>!Z),x||(R(O),d({}),c([1,118]),u([1,1e3]))};return reactExports.useEffect(()=>{r&&R(r)},[r]),jsxRuntimeExports.jsxs("div",{className:"pb-4 space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:x?"opacity-50 pointer-events-none":"",children:[jsxRuntimeExports.jsx(PTable,{providerUrl:e,selected:p,onSelectionChange:Z=>d(X=>({...X,...Z}))}),jsxRuntimeExports.jsx(RangeSlider,{title:"Number of elements",value:o,onChange:c,min:1,max:118}),jsxRuntimeExports.jsx(RangeSlider,{title:"Number of sites",value:y,onChange:u,min:0,max:1e3})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("input",{id:"manual-mode-toggle",type:"checkbox",checked:x,onChange:K,className:"hover:cursor-pointer h-4 w-4"}),jsxRuntimeExports.jsx("label",{htmlFor:"manual-mode-toggle",className:`${textSmall} text-gray-700 select-none`,children:"Unlock custom query"})]}),jsxRuntimeExports.jsx(QueryTextBox,{value:C,onChange:x?R:()=>{},onSubmit:k})]})}const sectionclassName="space-y-2";function OptimadeFAQs(){const[e,r]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:`${containerStyle} ${textSmall} [&>p]:pl-4 [&>section>p]:pl-1`,children:[jsxRuntimeExports.jsxs("section",{className:sectionclassName,children:[jsxRuntimeExports.jsxs("p",{children:["The Materials Cloud OPTIMADE Client is a tool to search through databases exposing an"," ",jsxRuntimeExports.jsx("a",{href:"https://www.optimade.org/",target:"_blank",className:textHyperlink,rel:"noopener noreferrer",children:"OPTIMADE RESTful API"}),". All providers are retrieved from the"," ",jsxRuntimeExports.jsx("a",{href:"https://providers.optimade.org/",target:"_blank",className:textHyperlink,rel:"noopener noreferrer",children:"official OPTIMADE consortium's list"}),"."]}),jsxRuntimeExports.jsxs("button",{className:`flex items-center px-2 mt-2 mb-1 ${textHyperlink} hover:cursor-pointer`,onClick:()=>r(!e),children:[jsxRuntimeExports.jsx("span",{className:textHyperlink,children:e?"Hide additional Info":"More info"}),jsxRuntimeExports.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${e?"rotate-90":"rotate-0"}`,fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]}),e&&jsxRuntimeExports.jsxs("section",{className:sectionclassName,children:[jsxRuntimeExports.jsx("h1",{className:textLarge,children:"Frequently asked questions"}),jsxRuntimeExports.jsx("h4",{className:textNormal,children:"Why is a given provider not shown in the client?"}),jsxRuntimeExports.jsxs("p",{children:["This webapp has filtered some providers for various reasons; some do not support open queries and others have no link to a meta-database. To check the validity of a particular provider visit"," ",jsxRuntimeExports.jsx("a",{href:"https://optimade.org/providers-dashboard/",target:"_blank",className:textHyperlink,rel:"noopener noreferrer",children:"the providers dashboard"}),". Querying of missing providers should still be possible through the 'Custom endpoint' method."]}),jsxRuntimeExports.jsx("h4",{className:textNormal,children:"Why does the structure visualiser not work for some structures?"}),jsxRuntimeExports.jsx("p",{children:"The visualiser is fairly primitive and the OPTIMADE specification is very broad. For complex structure data (assemblies, unknown positions, or partial occupancies), the JSON response is still fetched but the visualisation often fails."}),jsxRuntimeExports.jsxs("p",{className:"italic",children:["An earlier version of this tool was developed by Casper Welzel Andersen. See the source code"," ",jsxRuntimeExports.jsx("a",{href:"https://github.com/CasperWA/voila-optimade-client",target:"_blank",className:textHyperlink,rel:"noopener noreferrer",children:"here."})]})]})]})}const isBoolean=e=>typeof e=="boolean"||e instanceof Boolean,isNumber=e=>typeof e=="number"||e instanceof Number,isBigInt=e=>typeof e=="bigint"||e instanceof BigInt,isDate=e=>!!e&&e instanceof Date,isString=e=>typeof e=="string"||e instanceof String,isArray=e=>Array.isArray(e),isObject$1=e=>typeof e=="object"&&e!==null,isFunction=e=>!!e&&e instanceof Object&&typeof e=="function";function quoteString(e,r){return r===void 0&&(r=!1),!e||r?`"${e}"`:e}function quoteStringValue(e,r,s){return s?JSON.stringify(e):r?`"${e}"`:e}function ExpandableObject(e){let{field:r,value:s,data:o,lastElement:c,openBracket:y,closeBracket:u,level:p,style:d,shouldExpandNode:x,clickToExpandNode:w,outerRef:v,beforeExpandChange:R}=e;const O=reactExports.useRef(!1),[C,k]=reactExports.useState(()=>x(p,s,r)),K=reactExports.useRef(null);reactExports.useEffect(()=>{O.current?k(x(p,s,r)):O.current=!0},[x]);const Z=reactExports.useId();if(o.length===0)return EmptyObject({field:r,openBracket:y,closeBracket:u,lastElement:c,style:d});const X=C?d.collapseIcon:d.expandIcon,S=C?d.ariaLables.collapseJson:d.ariaLables.expandJson,F=p+1,B=o.length-1,W=ee=>{C!==ee&&(!R||R({level:p,value:s,field:r,newExpandValue:ee}))&&k(ee)},J=ee=>{if(ee.key==="ArrowRight"||ee.key==="ArrowLeft")ee.preventDefault(),W(ee.key==="ArrowRight");else if(ee.key==="ArrowUp"||ee.key==="ArrowDown"){ee.preventDefault();const Se=ee.key==="ArrowUp"?-1:1;if(!v.current)return;const ce=v.current.querySelectorAll("[role=button]");let ge=-1;for(let Ce=0;Ce<ce.length;Ce++)if(ce[Ce].tabIndex===0){ge=Ce;break}if(ge<0)return;const me=(ge+Se+ce.length)%ce.length;ce[ge].tabIndex=-1,ce[me].tabIndex=0,ce[me].focus()}},N=()=>{var ee;W(!C);const Se=K.current;if(!Se)return;const ce=(ee=v.current)===null||ee===void 0?void 0:ee.querySelector('[role=button][tabindex="0"]');ce&&(ce.tabIndex=-1),Se.tabIndex=0,Se.focus()};return reactExports.createElement("div",{className:d.basicChildStyle,role:"treeitem","aria-expanded":C,"aria-selected":void 0},reactExports.createElement("span",{className:X,onClick:N,onKeyDown:J,role:"button","aria-label":S,"aria-expanded":C,"aria-controls":C?Z:void 0,ref:K,tabIndex:p===0?0:-1}),(r||r==="")&&(w?reactExports.createElement("span",{className:d.clickableLabel,onClick:N,onKeyDown:J},quoteString(r,d.quotesForFieldNames),":"):reactExports.createElement("span",{className:d.label},quoteString(r,d.quotesForFieldNames),":")),reactExports.createElement("span",{className:d.punctuation},y),C?reactExports.createElement("ul",{id:Z,role:"group",className:d.childFieldsContainer},o.map((ee,Se)=>reactExports.createElement(DataRender,{key:ee[0]||Se,field:ee[0],value:ee[1],style:d,lastElement:Se===B,level:F,shouldExpandNode:x,clickToExpandNode:w,beforeExpandChange:R,outerRef:v}))):reactExports.createElement("span",{className:d.collapsedContent,onClick:N,onKeyDown:J}),reactExports.createElement("span",{className:d.punctuation},u),!c&&reactExports.createElement("span",{className:d.punctuation},","))}function EmptyObject(e){let{field:r,openBracket:s,closeBracket:o,lastElement:c,style:y}=e;return reactExports.createElement("div",{className:y.basicChildStyle,role:"treeitem","aria-selected":void 0},(r||r==="")&&reactExports.createElement("span",{className:y.label},quoteString(r,y.quotesForFieldNames),":"),reactExports.createElement("span",{className:y.punctuation},s),reactExports.createElement("span",{className:y.punctuation},o),!c&&reactExports.createElement("span",{className:y.punctuation},","))}function JsonObject(e){let{field:r,value:s,style:o,lastElement:c,shouldExpandNode:y,clickToExpandNode:u,level:p,outerRef:d,beforeExpandChange:x}=e;return ExpandableObject({field:r,value:s,lastElement:c||!1,level:p,openBracket:"{",closeBracket:"}",style:o,shouldExpandNode:y,clickToExpandNode:u,data:Object.keys(s).map(w=>[w,s[w]]),outerRef:d,beforeExpandChange:x})}function JsonArray(e){let{field:r,value:s,style:o,lastElement:c,level:y,shouldExpandNode:u,clickToExpandNode:p,outerRef:d,beforeExpandChange:x}=e;return ExpandableObject({field:r,value:s,lastElement:c||!1,level:y,openBracket:"[",closeBracket:"]",style:o,shouldExpandNode:u,clickToExpandNode:p,data:s.map(w=>[void 0,w]),outerRef:d,beforeExpandChange:x})}function JsonPrimitiveValue(e){let{field:r,value:s,style:o,lastElement:c}=e,y,u=o.otherValue;return s===null?(y="null",u=o.nullValue):s===void 0?(y="undefined",u=o.undefinedValue):isString(s)?(y=quoteStringValue(s,!o.noQuotesForStringValues,o.stringifyStringValues),u=o.stringValue):isBoolean(s)?(y=s?"true":"false",u=o.booleanValue):isNumber(s)?(y=s.toString(),u=o.numberValue):isBigInt(s)?(y=`${s.toString()}n`,u=o.numberValue):isDate(s)?y=s.toISOString():isFunction(s)?y="function() { }":y=s.toString(),reactExports.createElement("div",{className:o.basicChildStyle,role:"treeitem","aria-selected":void 0},(r||r==="")&&reactExports.createElement("span",{className:o.label},quoteString(r,o.quotesForFieldNames),":"),reactExports.createElement("span",{className:u},y),!c&&reactExports.createElement("span",{className:o.punctuation},","))}function DataRender(e){const r=e.value;return isArray(r)?reactExports.createElement(JsonArray,Object.assign({},e)):isObject$1(r)&&!isDate(r)&&!isFunction(r)?reactExports.createElement(JsonObject,Object.assign({},e)):reactExports.createElement(JsonPrimitiveValue,Object.assign({},e))}var styles={"container-light":"_2IvMF _GzYRV","basic-element-style":"_2bkNM","child-fields-container":"_1BXBN","label-light":"_1MGIk","clickable-label-light":"_2YKJg _1MGIk _1MFti","punctuation-light":"_3uHL6 _3eOF8","value-null-light":"_2T6PJ","value-undefined-light":"_1Gho6","value-string-light":"_vGjyY","value-number-light":"_1bQdo","value-boolean-light":"_3zQKs","value-other-light":"_1xvuR","collapse-icon-light":"_oLqym _f10Tu _1MFti _1LId0","expand-icon-light":"_2AXVT _f10Tu _1MFti _1UmXx","collapsed-content-light":"_2KJWg _1pNG9 _1MFti"};const defaultAriaLables={collapseJson:"collapse JSON",expandJson:"expand JSON"},defaultStyles={container:styles["container-light"],basicChildStyle:styles["basic-element-style"],childFieldsContainer:styles["child-fields-container"],label:styles["label-light"],clickableLabel:styles["clickable-label-light"],nullValue:styles["value-null-light"],undefinedValue:styles["value-undefined-light"],stringValue:styles["value-string-light"],booleanValue:styles["value-boolean-light"],numberValue:styles["value-number-light"],otherValue:styles["value-other-light"],punctuation:styles["punctuation-light"],collapseIcon:styles["collapse-icon-light"],expandIcon:styles["expand-icon-light"],collapsedContent:styles["collapsed-content-light"],noQuotesForStringValues:!1,quotesForFieldNames:!1,ariaLables:defaultAriaLables,stringifyStringValues:!1},allExpanded=()=>!0,JsonView=e=>{let{data:r,style:s=defaultStyles,shouldExpandNode:o=allExpanded,clickToExpandNode:c=!1,beforeExpandChange:y,compactTopLevel:u,...p}=e;const d=reactExports.useRef(null);return reactExports.createElement("div",Object.assign({"aria-label":"JSON view"},p,{className:s.container,ref:d,role:"tree"}),u&&isObject$1(r)?Object.entries(r).map(x=>{let[w,v]=x;return reactExports.createElement(DataRender,{key:w,field:w,value:v,style:{...defaultStyles,...s},lastElement:!0,level:1,shouldExpandNode:o,clickToExpandNode:c,beforeExpandChange:y,outerRef:d})}):reactExports.createElement(DataRender,{value:r,style:{...defaultStyles,...s},lastElement:!0,level:0,shouldExpandNode:o,clickToExpandNode:c,outerRef:d,beforeExpandChange:y}))},ControlBox=({viewerParams:e,onViewerParamChange:r,onViewerEvent:s})=>{const o=(u,p)=>{let d=e.supercell;d[u]=parseInt(p),r("supercell",d)},c=u=>{r(u,!e[u])},y=u=>{s("camera",u)};return jsxRuntimeExports.jsxs("div",{className:"control-box",children:[jsxRuntimeExports.jsxs("div",{className:"control-box-row",children:[jsxRuntimeExports.jsxs("div",{className:"supercell-container",children:[jsxRuntimeExports.jsx("label",{children:"Supercell: "}),jsxRuntimeExports.jsx("div",{style:{display:"flex"},children:[0,1,2].map(u=>jsxRuntimeExports.jsx("input",{className:"supercell-input",type:"number",min:"1",max:"99",value:e.supercell[u],onChange:p=>o(u,p.target.value)},u))})]}),jsxRuntimeExports.jsxs("div",{className:"camera-controls",children:[jsxRuntimeExports.jsx("label",{children:"Camera: "}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>y("x"),children:"x"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>y("y"),children:"y"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>y("z"),children:"z"})]})]}),jsxRuntimeExports.jsxs("div",{className:"control-box-row",style:{display:"flex"},children:[jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:e.bonds,onChange:()=>c("bonds")}),jsxRuntimeExports.jsx("span",{children:"Bonds"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:e.packedCell,onChange:()=>c("packedCell")}),jsxRuntimeExports.jsx("span",{children:"Packed cell"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:e.atomLabels,onChange:()=>c("atomLabels")}),jsxRuntimeExports.jsx("span",{children:"Atom labels"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:e.spaceFilling,onChange:()=>c("vdwRadius")}),jsxRuntimeExports.jsx("span",{children:"vdW radius"})]})]})]})};var _3DmolMin={exports:{}};var hasRequired_3DmolMin;function require_3DmolMin(){return hasRequired_3DmolMin||(hasRequired_3DmolMin=1,(function(module,exports$1){var factory;factory=()=>(()=>{var __webpack_modules__={3:(e,r,s)=>{var o=s(663),c=s(981),y=s(972),u=s(681),p=s(834),d=s(746),x=s(670),w=Object.prototype.toString;function v(O){if(!(this instanceof v))return new v(O);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},O||{});var C=this.options;C.raw&&C.windowBits>=0&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),!(C.windowBits>=0&&C.windowBits<16)||O&&O.windowBits||(C.windowBits+=32),C.windowBits>15&&C.windowBits<48&&(15&C.windowBits||(C.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var k=o.inflateInit2(this.strm,C.windowBits);if(k!==u.Z_OK)throw new Error(p[k]);if(this.header=new x,o.inflateGetHeader(this.strm,this.header),C.dictionary&&(typeof C.dictionary=="string"?C.dictionary=y.string2buf(C.dictionary):w.call(C.dictionary)==="[object ArrayBuffer]"&&(C.dictionary=new Uint8Array(C.dictionary)),C.raw&&(k=o.inflateSetDictionary(this.strm,C.dictionary))!==u.Z_OK))throw new Error(p[k])}function R(O,C){var k=new v(C);if(k.push(O,!0),k.err)throw k.msg||p[k.err];return k.result}v.prototype.push=function(O,C){var k,K,Z,X,S,F=this.strm,B=this.options.chunkSize,W=this.options.dictionary,J=!1;if(this.ended)return!1;K=C===~~C?C:C===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof O=="string"?F.input=y.binstring2buf(O):w.call(O)==="[object ArrayBuffer]"?F.input=new Uint8Array(O):F.input=O,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new c.Buf8(B),F.next_out=0,F.avail_out=B),(k=o.inflate(F,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&W&&(k=o.inflateSetDictionary(this.strm,W)),k===u.Z_BUF_ERROR&&J===!0&&(k=u.Z_OK,J=!1),k!==u.Z_STREAM_END&&k!==u.Z_OK)return this.onEnd(k),this.ended=!0,!1;F.next_out&&(F.avail_out!==0&&k!==u.Z_STREAM_END&&(F.avail_in!==0||K!==u.Z_FINISH&&K!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(Z=y.utf8border(F.output,F.next_out),X=F.next_out-Z,S=y.buf2string(F.output,Z),F.next_out=X,F.avail_out=B-X,X&&c.arraySet(F.output,F.output,Z,X,0),this.onData(S)):this.onData(c.shrinkBuf(F.output,F.next_out)))),F.avail_in===0&&F.avail_out===0&&(J=!0)}while((F.avail_in>0||F.avail_out===0)&&k!==u.Z_STREAM_END);return k===u.Z_STREAM_END&&(K=u.Z_FINISH),K===u.Z_FINISH?(k=o.inflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===u.Z_OK):K!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),F.avail_out=0,!0)},v.prototype.onData=function(O){this.chunks.push(O)},v.prototype.onEnd=function(O){O===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg},r.Inflate=v,r.inflate=R,r.inflateRaw=function(O,C){return(C=C||{}).raw=!0,R(O,C)},r.ungzip=R},16:(e,r,s)=>{s.r(r),s.d(r,{CAP:()=>o,CC:()=>x.CC,CONTEXTS_PER_VIEWPORT:()=>Lt,Color:()=>x.Color,CustomLinear:()=>w.CustomLinear,Cylinder:()=>p.Cylinder,GLDraw:()=>c,GLModel:()=>ur,GLShape:()=>ze,GLViewer:()=>Yt,GLVolumetricRender:()=>kt,Gradient:()=>w.Gradient,GradientType:()=>w.GradientType,Label:()=>Rt,LabelCount:()=>lt,MarchingCube:()=>E,MarchingCubeInitializer:()=>Bt,Matrix3:()=>d.Matrix3,Matrix4:()=>d.Matrix4,Parsers:()=>Ot,PausableTimer:()=>v.PausableTimer,PointGrid:()=>ne,ProteinSurface:()=>xe,Quaternion:()=>d.Quaternion,ROYGB:()=>w.ROYGB,RWB:()=>w.RWB,Ray:()=>d.Ray,Sinebow:()=>w.Sinebow,Sphere:()=>p.Sphere,SurfaceType:()=>Gr,Triangle:()=>p.Triangle,Vector2:()=>d.Vector2,Vector3:()=>d.Vector3,VolumeData:()=>Ve.VolumeData,adjustVolumeStyle:()=>v.adjustVolumeStyle,applyPartialCharges:()=>ri,autoinit:()=>_r,autoload:()=>Ri,base64ToArray:()=>v.base64ToArray,bondLength:()=>Fe.bondLength,builtinColorSchemes:()=>x.builtinColorSchemes,builtinGradients:()=>w.builtinGradients,chains:()=>x.chains,clamp:()=>d.clamp,conversionMatrix3:()=>d.conversionMatrix3,createStereoViewer:()=>Ur,createViewer:()=>Cr,createViewerGrid:()=>Ar,deepCopy:()=>v.deepCopy,degToRad:()=>d.degToRad,download:()=>v.download,drawCartoon:()=>ge,elementColors:()=>x.elementColors,extend:()=>v.extend,get:()=>v.get,getAtomProperty:()=>v.getAtomProperty,getColorFromStyle:()=>v.getColorFromStyle,getElement:()=>v.getElement,getExtent:()=>v.getExtent,getGradient:()=>w.getGradient,getPropertyRange:()=>v.getPropertyRange,getbin:()=>v.getbin,htmlColors:()=>x.htmlColors,inflateString:()=>v.inflateString,isEmptyObject:()=>v.isEmptyObject,isNumeric:()=>v.isNumeric,makeFunction:()=>v.makeFunction,mergeGeos:()=>v.mergeGeos,normalizeValue:()=>w.normalizeValue,partialCharges:()=>Zt,processing_autoinit:()=>Lr,residues:()=>x.residues,setBondLength:()=>Fe.setBondLength,setSyncSurface:()=>qi,specStringToObject:()=>v.specStringToObject,splitMesh:()=>yt,ssColors:()=>x.ssColors,subdivide_spline:()=>R,syncSurface:()=>Kr,viewers:()=>wr});var o,c,y=s(111),u=s(378),p=s(99),d=s(529),x=s(222);(function(oe){oe[oe.NONE=0]="NONE",oe[oe.FLAT=1]="FLAT",oe[oe.ROUND=2]="ROUND"})(o||(o={})),(function(oe){function n(f,T,_){var M,P,A,D,z,$=Math.hypot(f,T);$<1e-4?(P=0,A=1):(P=-f/$,A=T/$),T=-P*f+A*T,(M=Math.hypot(T,_))<1e-4?(D=0,z=1):(D=_/M,z=T/M);var U=new Float32Array(9);return U[0]=A,U[1]=P,U[2]=0,U[3]=-P*z,U[4]=A*z,U[5]=D,U[6]=P*D,U[7]=-A*D,U[8]=z,U}var a=new class{constructor(){this.cache={};let f,T=[],_=Math.pow(2,4),M=2,P=Math.pow(2,M),A=_/P;for(T[0]=new d.Vector3(-1,0,0),T[A]=new d.Vector3(0,0,1),T[2*A]=new d.Vector3(1,0,0),T[3*A]=new d.Vector3(0,0,-1),M=3;M<=4;M++){for(P=Math.pow(2,M-1),A=_/P,f=0;f<P-1;f++)T[A/2+f*A]=T[f*A].clone().add(T[(f+1)*A]).normalize();f=P-1,T[A/2+f*A]=T[f*A].clone().add(T[0]).normalize()}this.basisVectors=T}getVerticesForRadius(f,T,_){if(this.cache!==void 0&&this.cache[f]!==void 0&&this.cache[f][T+_]!==void 0)return this.cache[f][T+_];for(var M,P=this.basisVectors.length,A=[],D=[],z=0;z<P;z++)A.push(this.basisVectors[z].clone().multiplyScalar(f)),A.push(this.basisVectors[z].clone().multiplyScalar(f)),M=this.basisVectors[z].clone().normalize(),D.push(M),D.push(M);var $,U,V=[],H=10,G=P,Y=2*Math.PI,te=Math.PI,re=!1,de=!1;for(U=0;U<=H;U++){re=U===0||U===H,de=U===5;var le=[],ye=[];for($=0;$<=G;$++)if(de){var Pe=$<G?2*$:0;ye.push(Pe+1),le.push(Pe)}else{var Re=$/G,Me=U/H;if(re&&$!==0)re&&le.push(A.length-1);else if($<G){var we=new d.Vector3;we.x=-f*Math.cos(0+Re*Y)*Math.sin(0+Me*te),we.y=T==1?0:f*Math.cos(0+Me*te),we.z=f*Math.sin(0+Re*Y)*Math.sin(0+Me*te),Math.abs(we.x)<1e-5&&(we.x=0),Math.abs(we.y)<1e-5&&(we.y=0),Math.abs(we.z)<1e-5&&(we.z=0),T==o.FLAT?(M=new d.Vector3(0,Math.cos(0+Me*te),0)).normalize():(M=new d.Vector3(we.x,we.y,we.z)).normalize(),A.push(we),D.push(M),le.push(A.length-1)}else le.push(A.length-G)}de&&V.push(ye),V.push(le)}var Ue={vertices:A,normals:D,verticesRows:V,w:G,h:H};return f in this.cache||(this.cache[f]={}),this.cache[f][T+_]=Ue,Ue}};oe.drawCylinder=function(f,T,_,M,P,A=0,D=0){if(!T||!_)return;let z=function(_e){if(typeof _e=="string"){let ve=_e;return ve.toLowerCase()=="flat"?o.FLAT:ve.toLowerCase()=="round"?o.ROUND:o.NONE}return _e};A=z(A);var $=(D=z(D))||A;P=P||{r:0,g:0,b:0};var U,V,H,G,Y,te,re=n(_.x-T.x,_.y-T.y,_.z-T.z),de=a.getVerticesForRadius(M,D,"to"),le=de.w,ye=de.h,Pe=$?ye*le+2:2*le,Re=f.updateGeoGroup(Pe),Me=de.vertices,we=de.normals,Ue=de.verticesRows,Je=Ue[ye/2],tt=Ue[ye/2+1],Ye=Re.vertices,ut=Re.vertexArray,ft=Re.normalArray,Ze=Re.colorArray,pt=Re.faceArray;for(H=0;H<le;++H){var Be=2*H;G=re[0]*Me[Be].x+re[3]*Me[Be].y+re[6]*Me[Be].z,Y=re[1]*Me[Be].x+re[4]*Me[Be].y+re[7]*Me[Be].z,te=re[5]*Me[Be].y+re[8]*Me[Be].z,U=3*(Ye+Be),V=Re.faceidx,ut[U]=G+T.x,ut[U+1]=Y+T.y,ut[U+2]=te+T.z,ut[U+3]=G+_.x,ut[U+4]=Y+_.y,ut[U+5]=te+_.z,ft[U]=G,ft[U+3]=G,ft[U+1]=Y,ft[U+4]=Y,ft[U+2]=te,ft[U+5]=te,Ze[U]=P.r,Ze[U+3]=P.r,Ze[U+1]=P.g,Ze[U+4]=P.g,Ze[U+2]=P.b,Ze[U+5]=P.b,pt[V]=tt[H]+Ye,pt[V+1]=tt[H+1]+Ye,pt[V+2]=Je[H]+Ye,pt[V+3]=Je[H]+Ye,pt[V+4]=tt[H+1]+Ye,pt[V+5]=Je[H+1]+Ye,Re.faceidx+=6}if($){var et,St,st,wt,Et,it,Pt,Ht,Mt,ct,Jt,Nt,qt,Vt,Xt,yr,Fr,Tr,ii,Wr,br,$r,ci,ni,hi,Ii,xi,Oi,Hr,Xr,qr,ei,g=A?ye+1:ye/2+1;for(Y=D?0:ye/2;Y<g;Y++)if(Y!==ye/2){var Q=Y<=ye/2?_:T,b=a.getVerticesForRadius(M,D,"to"),be=a.getVerticesForRadius(M,A,"from");for(Q===_?(Me=b.vertices,we=b.normals,Ue=b.verticesRows):Q==T&&(Me=be.vertices,we=be.normals,Ue=be.verticesRows),G=0;G<le;G++)V=Re.faceidx,Hr=3*((et=Ue[Y][G+1])+Ye),Xr=3*((St=Ue[Y][G])+Ye),qr=3*((st=Ue[Y+1][G])+Ye),ei=3*((wt=Ue[Y+1][G+1])+Ye),Et=re[0]*Me[et].x+re[3]*Me[et].y+re[6]*Me[et].z,it=re[0]*Me[St].x+re[3]*Me[St].y+re[6]*Me[St].z,Pt=re[0]*Me[st].x+re[3]*Me[st].y+re[6]*Me[st].z,Ht=re[0]*Me[wt].x+re[3]*Me[wt].y+re[6]*Me[wt].z,Mt=re[1]*Me[et].x+re[4]*Me[et].y+re[7]*Me[et].z,ct=re[1]*Me[St].x+re[4]*Me[St].y+re[7]*Me[St].z,Jt=re[1]*Me[st].x+re[4]*Me[st].y+re[7]*Me[st].z,Nt=re[1]*Me[wt].x+re[4]*Me[wt].y+re[7]*Me[wt].z,qt=re[5]*Me[et].y+re[8]*Me[et].z,Vt=re[5]*Me[St].y+re[8]*Me[St].z,Xt=re[5]*Me[st].y+re[8]*Me[st].z,yr=re[5]*Me[wt].y+re[8]*Me[wt].z,ut[Hr]=Et+Q.x,ut[Xr]=it+Q.x,ut[qr]=Pt+Q.x,ut[ei]=Ht+Q.x,ut[Hr+1]=Mt+Q.y,ut[Xr+1]=ct+Q.y,ut[qr+1]=Jt+Q.y,ut[ei+1]=Nt+Q.y,ut[Hr+2]=qt+Q.z,ut[Xr+2]=Vt+Q.z,ut[qr+2]=Xt+Q.z,ut[ei+2]=yr+Q.z,Ze[Hr]=P.r,Ze[Xr]=P.r,Ze[qr]=P.r,Ze[ei]=P.r,Ze[Hr+1]=P.g,Ze[Xr+1]=P.g,Ze[qr+1]=P.g,Ze[ei+1]=P.g,Ze[Hr+2]=P.b,Ze[Xr+2]=P.b,Ze[qr+2]=P.b,Ze[ei+2]=P.b,Fr=re[0]*we[et].x+re[3]*we[et].y+re[6]*we[et].z,Tr=re[0]*we[St].x+re[3]*we[St].y+re[6]*we[St].z,ii=re[0]*we[st].x+re[3]*we[st].y+re[6]*we[st].z,Wr=re[0]*we[wt].x+re[3]*we[wt].y+re[6]*we[wt].z,br=re[1]*we[et].x+re[4]*we[et].y+re[7]*we[et].z,$r=re[1]*we[St].x+re[4]*we[St].y+re[7]*we[St].z,ci=re[1]*we[st].x+re[4]*we[st].y+re[7]*we[st].z,ni=re[1]*we[wt].x+re[4]*we[wt].y+re[7]*we[wt].z,hi=re[5]*we[et].y+re[8]*we[et].z,Ii=re[5]*we[St].y+re[8]*we[St].z,xi=re[5]*we[st].y+re[8]*we[st].z,Oi=re[5]*we[wt].y+re[8]*we[wt].z,Y===0?(ft[Hr]=Fr,ft[qr]=ii,ft[ei]=Wr,ft[Hr+1]=br,ft[qr+1]=ci,ft[ei+1]=ni,ft[Hr+2]=hi,ft[qr+2]=xi,ft[ei+2]=Oi,pt[V]=et+Ye,pt[V+1]=st+Ye,pt[V+2]=wt+Ye,Re.faceidx+=3):Y===g-1?(ft[Hr]=Fr,ft[Xr]=Tr,ft[qr]=ii,ft[Hr+1]=br,ft[Xr+1]=$r,ft[qr+1]=ci,ft[Hr+2]=hi,ft[Xr+2]=Ii,ft[qr+2]=xi,pt[V]=et+Ye,pt[V+1]=St+Ye,pt[V+2]=st+Ye,Re.faceidx+=3):(ft[Hr]=Fr,ft[Xr]=Tr,ft[ei]=Wr,ft[Hr+1]=br,ft[Xr+1]=$r,ft[ei+1]=ni,ft[Hr+2]=hi,ft[Xr+2]=Ii,ft[ei+2]=Oi,ft[Xr]=Tr,ft[qr]=ii,ft[ei]=Wr,ft[Xr+1]=$r,ft[qr+1]=ci,ft[ei+1]=ni,ft[Xr+2]=Ii,ft[qr+2]=xi,ft[ei+2]=Oi,pt[V]=et+Ye,pt[V+1]=St+Ye,pt[V+2]=wt+Ye,pt[V+3]=St+Ye,pt[V+4]=st+Ye,pt[V+5]=wt+Ye,Re.faceidx+=6)}}Re.vertices+=Pe},oe.drawCone=function(f,T,_,M,P){if(!T||!_)return;P=P||{r:0,g:0,b:0};let A=new d.Vector3(_.x-T.x,_.y-T.y,_.z-T.z);var D=n(A.x,A.y,A.z);A=A.normalize();var z,$,U,V,H,G,Y=a.basisVectors.length,te=a.basisVectors,re=Y+2,de=f.updateGeoGroup(re),le=de.vertices,ye=de.vertexArray,Pe=de.normalArray,Re=de.colorArray,Me=de.faceArray;for(ye[z=3*le]=T.x,ye[z+1]=T.y,ye[z+2]=T.z,Pe[z]=-A.x,Pe[z+1]=-A.y,Pe[z+2]=-A.z,Re[z]=P.r,Re[z+1]=P.g,Re[z+2]=P.b,ye[z+3]=_.x,ye[z+4]=_.y,ye[z+5]=_.z,Pe[z+3]=A.x,Pe[z+4]=A.y,Pe[z+5]=A.z,Re[z+3]=P.r,Re[z+4]=P.g,Re[z+5]=P.b,z+=6,U=0;U<Y;++U){var we=te[U].clone();we.multiplyScalar(M),V=D[0]*we.x+D[3]*we.y+D[6]*we.z,H=D[1]*we.x+D[4]*we.y+D[7]*we.z,G=D[5]*we.y+D[8]*we.z,ye[z]=V+T.x,ye[z+1]=H+T.y,ye[z+2]=G+T.z,Pe[z]=V,Pe[z+1]=H,Pe[z+2]=G,Re[z]=P.r,Re[z+1]=P.g,Re[z+2]=P.b,z+=3}for(de.vertices+=Y+2,$=de.faceidx,U=0;U<Y;U++){var Ue=le+2+U,Je=le+2+(U+1)%Y;Me[$]=Ue,Me[$+1]=Je,Me[$+2]=le,Me[$+=3]=Ue,Me[$+1]=Je,Me[$+2]=le+1,$+=3}de.faceidx+=6*Y};var h=new class{constructor(){this.cache=new Map}getVerticesForRadius(f,T){T=T||2,this.cache.has(T)||this.cache.set(T,new Map);let _=this.cache.get(T);if(_.has(f))return _.get(f);var M={vertices:[],verticesRows:[],normals:[]},P=16*T,A=10*T;f<1&&(P=10*T,A=8*T);var D,z,$=2*Math.PI,U=Math.PI;for(z=0;z<=A;z++){let H=[];for(D=0;D<=P;D++){let G=D/P,Y=z/A,te=-f*Math.cos(0+G*$)*Math.sin(0+Y*U),re=f*Math.cos(0+Y*U),de=f*Math.sin(0+G*$)*Math.sin(0+Y*U);var V=new d.Vector3(te,re,de);V.normalize(),M.vertices.push({x:te,y:re,z:de}),M.normals.push(V),H.push(M.vertices.length-1)}M.verticesRows.push(H)}return _.set(f,M),M}};oe.drawSphere=function(f,T,_,M,P){var A=h.getVerticesForRadius(_,P),D=A.vertices,z=A.normals,$=f.updateGeoGroup(D.length),U=$.vertices,V=$.vertexArray,H=$.colorArray,G=$.faceArray,Y=$.lineArray,te=$.normalArray;for(let le=0,ye=D.length;le<ye;++le){let Pe=3*(U+le),Re=D[le];V[Pe]=Re.x+T.x,V[Pe+1]=Re.y+T.y,V[Pe+2]=Re.z+T.z,H[Pe]=M.r,H[Pe+1]=M.g,H[Pe+2]=M.b}$.vertices+=D.length;let re=A.verticesRows,de=re.length-1;for(let le=0;le<de;le++){let ye=re[le].length-1;for(let Pe=0;Pe<ye;Pe++){let Re=$.faceidx,Me=$.lineidx,we=re[le][Pe+1]+U,Ue=3*we,Je=re[le][Pe]+U,tt=3*Je,Ye=re[le+1][Pe]+U,ut=3*Ye,ft=re[le+1][Pe+1]+U,Ze=3*ft,pt=z[we-U],Be=z[Je-U],et=z[Ye-U],St=z[ft-U];Math.abs(D[we-U].y)===_?(te[Ue]=pt.x,te[ut]=et.x,te[Ze]=St.x,te[Ue+1]=pt.y,te[ut+1]=et.y,te[Ze+1]=St.y,te[Ue+2]=pt.z,te[ut+2]=et.z,te[Ze+2]=St.z,G[Re]=we,G[Re+1]=Ye,G[Re+2]=ft,Y[Me]=we,Y[Me+1]=Ye,Y[Me+2]=we,Y[Me+3]=ft,Y[Me+4]=Ye,Y[Me+5]=ft,$.faceidx+=3,$.lineidx+=6):Math.abs(D[Ye-U].y)===_?(te[Ue]=pt.x,te[tt]=Be.x,te[ut]=et.x,te[Ue+1]=pt.y,te[tt+1]=Be.y,te[ut+1]=et.y,te[Ue+2]=pt.z,te[tt+2]=Be.z,te[ut+2]=et.z,G[Re]=we,G[Re+1]=Je,G[Re+2]=Ye,Y[Me]=we,Y[Me+1]=Je,Y[Me+2]=we,Y[Me+3]=Ye,Y[Me+4]=Je,Y[Me+5]=Ye,$.faceidx+=3,$.lineidx+=6):(te[Ue]=pt.x,te[tt]=Be.x,te[Ze]=St.x,te[Ue+1]=pt.y,te[tt+1]=Be.y,te[Ze+1]=St.y,te[Ue+2]=pt.z,te[tt+2]=Be.z,te[Ze+2]=St.z,te[tt]=Be.x,te[ut]=et.x,te[Ze]=St.x,te[tt+1]=Be.y,te[ut+1]=et.y,te[Ze+1]=St.y,te[tt+2]=Be.z,te[ut+2]=et.z,te[Ze+2]=St.z,G[Re]=we,G[Re+1]=Je,G[Re+2]=ft,G[Re+3]=Je,G[Re+4]=Ye,G[Re+5]=ft,Y[Me]=we,Y[Me+1]=Je,Y[Me+2]=we,Y[Me+3]=ft,Y[Me+4]=Je,Y[Me+5]=Ye,Y[Me+6]=Ye,Y[Me+7]=ft,$.faceidx+=6,$.lineidx+=8)}}}})(c||(c={}));var w=s(546),v=s(864);function R(oe,n){var a,h,f,T,_,M,P,A,D,z=[],$=oe;for(($=[]).push(oe[0]),a=1,h=oe.length-1;a<h;a++)if(_=oe[a],M=oe[a+1],_.smoothen){var U=new d.Vector3((_.x+M.x)/2,(_.y+M.y)/2,(_.z+M.z)/2);U.atom=_.atom,$.push(U)}else $.push(_);for($.push(oe[oe.length-1]),a=-1,f=$.length;a<=f-3;a++)if(T=$[a===-1?0:a],_=$[a+1],M=$[a+2],P=$[a===f-3?f-1:a+3],A=new d.Vector3().subVectors(M,T).multiplyScalar(.5),D=new d.Vector3().subVectors(P,_).multiplyScalar(.5),!M.skip)for(var V=0;V<n;V++){var H=1/n*V,G=_.x+H*A.x+H*H*(-3*_.x+3*M.x-2*A.x-D.x)+H*H*H*(2*_.x-2*M.x+A.x+D.x),Y=_.y+H*A.y+H*H*(-3*_.y+3*M.y-2*A.y-D.y)+H*H*H*(2*_.y-2*M.y+A.y+D.y),te=_.z+H*A.z+H*H*(-3*_.z+3*M.z-2*A.z-D.z)+H*H*H*(2*_.z-2*M.z+A.z+D.z),re=new d.Vector3(G,Y,te);re.atom=V<n/2?_.atom:M.atom,z.push(re)}return z.push($[$.length-1]),z}const O=.5,C=1.3,k=.8,K=.4,Z=.4;function X(oe,n,a,h){for(var f,T,_,M,P=0,A=n.length;P<A;P++){M=Math.round(P*(h.length-1)/A),_=x.CC.color(h[M]);var D=oe.updateGeoGroup(2),z=D.vertexArray,$=D.colorArray,U=D.faceArray;z[T=3*(f=D.vertices)]=n[P].x,z[T+1]=n[P].y,z[T+2]=n[P].z,z[T+3]=a[P].x,z[T+4]=a[P].y,z[T+5]=a[P].z;for(var V=0;V<6;++V)$[T+3*V]=_.r,$[T+1+3*V]=_.g,$[T+2+3*V]=_.b;if(P>0){var H=[f,f+1,f-1,f-2],G=D.faceidx;U[G]=H[0],U[G+1]=H[1],U[G+2]=H[3],U[G+3]=H[1],U[G+4]=H[2],U[G+5]=H[3],D.faceidx+=6}D.vertices+=2}}function S(oe,n,a,h,f,T,_){_&&_!=="default"||(_="rectangle"),_==="edged"?(function(M,P,A,D,z){if(!(P.length<2)){var $,U;if($=P[0],U=P[P.length-1],$=R($,D),U=R(U,D),!z)return X(M,$,U,A);var V,H,G,Y,te,re,de,le,ye,Pe,Re,Me,we,Ue,Je,tt,Ye,ut,ft,Ze,pt,Be,et=[],St=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]];for(we=0,Ue=$.length;we<Ue;we++){if(Pe=Math.round(we*(A.length-1)/Ue),ye=x.CC.color(A[Pe]),et.push(H=$[we]),et.push(H),et.push(G=U[we]),et.push(G),we<Ue-1){var st=$[we+1].clone().sub($[we]);V=U[we].clone().sub($[we]).cross(st).normalize().multiplyScalar(z)}for(et.push(Y=$[we].clone().add(V)),et.push(Y),et.push(te=U[we].clone().add(V)),et.push(te),H.atom!==void 0&&(Re=H.atom),Ze=(ft=M.updateGeoGroup(8)).vertexArray,pt=ft.colorArray,Be=ft.faceArray,Ze[de=3*(re=ft.vertices)]=H.x,Ze[de+1]=H.y,Ze[de+2]=H.z,Ze[de+3]=H.x,Ze[de+4]=H.y,Ze[de+5]=H.z,Ze[de+6]=G.x,Ze[de+7]=G.y,Ze[de+8]=G.z,Ze[de+9]=G.x,Ze[de+10]=G.y,Ze[de+11]=G.z,Ze[de+12]=Y.x,Ze[de+13]=Y.y,Ze[de+14]=Y.z,Ze[de+15]=Y.x,Ze[de+16]=Y.y,Ze[de+17]=Y.z,Ze[de+18]=te.x,Ze[de+19]=te.y,Ze[de+20]=te.z,Ze[de+21]=te.x,Ze[de+22]=te.y,Ze[de+23]=te.z,Je=0;Je<8;++Je)pt[de+3*Je]=ye.r,pt[de+1+3*Je]=ye.g,pt[de+2+3*Je]=ye.b;if(we>0){var wt=Me!==void 0&&Re!==void 0&&Me.serial!==Re.serial;for(Je=0;Je<4;Je++){var Et=[re+St[Je][0],re+St[Je][1],re+St[Je][2],re+St[Je][3]];if(Be[le=ft.faceidx]=Et[0],Be[le+1]=Et[1],Be[le+2]=Et[3],Be[le+3]=Et[1],Be[le+4]=Et[2],Be[le+5]=Et[3],ft.faceidx+=6,Re.clickable||Me.clickable||Re.hoverable||Me.hoverable){var it=et[Et[3]].clone(),Pt=et[Et[0]].clone(),Ht=et[Et[2]].clone(),Mt=et[Et[1]].clone();if(it.atom=et[Et[3]].atom||null,Ht.atom=et[Et[2]].atom||null,Pt.atom=et[Et[0]].atom||null,Mt.atom=et[Et[1]].atom||null,wt){var ct=it.clone().add(Pt).multiplyScalar(.5),Jt=Ht.clone().add(Mt).multiplyScalar(.5),Nt=it.clone().add(Mt).multiplyScalar(.5);Je%2==0?((Me.clickable||Me.hoverable)&&(tt=new p.Triangle(ct,Nt,it),Ye=new p.Triangle(Jt,Ht,Nt),ut=new p.Triangle(Nt,Ht,it),Me.intersectionShape.triangle.push(tt),Me.intersectionShape.triangle.push(Ye),Me.intersectionShape.triangle.push(ut)),(Re.clickable||Re.hoverable)&&(tt=new p.Triangle(Pt,Mt,Nt),Ye=new p.Triangle(Mt,Jt,Nt),ut=new p.Triangle(Pt,Nt,ct),Re.intersectionShape.triangle.push(tt),Re.intersectionShape.triangle.push(Ye),Re.intersectionShape.triangle.push(ut))):((Re.clickable||Re.hoverable)&&(tt=new p.Triangle(ct,Nt,it),Ye=new p.Triangle(Jt,Ht,Nt),ut=new p.Triangle(Nt,Ht,it),Re.intersectionShape.triangle.push(tt),Re.intersectionShape.triangle.push(Ye),Re.intersectionShape.triangle.push(ut)),(Me.clickable||Me.hoverable)&&(tt=new p.Triangle(Pt,Mt,Nt),Ye=new p.Triangle(Mt,Jt,Nt),ut=new p.Triangle(Pt,Nt,ct),Me.intersectionShape.triangle.push(tt),Me.intersectionShape.triangle.push(Ye),Me.intersectionShape.triangle.push(ut)))}else(Re.clickable||Re.hoverable)&&(tt=new p.Triangle(Pt,Mt,it),Ye=new p.Triangle(Mt,Ht,it),Re.intersectionShape.triangle.push(tt),Re.intersectionShape.triangle.push(Ye))}}}ft.vertices+=8,Me=Re}var qt=et.length-8;for(Ze=(ft=M.updateGeoGroup(8)).vertexArray,pt=ft.colorArray,Be=ft.faceArray,de=3*(re=ft.vertices),le=ft.faceidx,we=0;we<4;we++){et.push(et[2*we]),et.push(et[qt+2*we]);var Vt=et[2*we],Xt=et[qt+2*we];Ze[de+6*we]=Vt.x,Ze[de+1+6*we]=Vt.y,Ze[de+2+6*we]=Vt.z,Ze[de+3+6*we]=Xt.x,Ze[de+4+6*we]=Xt.y,Ze[de+5+6*we]=Xt.z,pt[de+6*we]=ye.r,pt[de+1+6*we]=ye.g,pt[de+2+6*we]=ye.b,pt[de+3+6*we]=ye.r,pt[de+4+6*we]=ye.g,pt[de+5+6*we]=ye.b}qt+=8,tt=[re,re+2,re+6,re+4],Ye=[re+1,re+5,re+7,re+3],Be[le]=tt[0],Be[le+1]=tt[1],Be[le+2]=tt[3],Be[le+3]=tt[1],Be[le+4]=tt[2],Be[le+5]=tt[3],Be[le+6]=Ye[0],Be[le+7]=Ye[1],Be[le+8]=Ye[3],Be[le+9]=Ye[1],Be[le+10]=Ye[2],Be[le+11]=Ye[3],ft.faceidx+=12,ft.vertices+=8}})(oe,n,a,h,f):_!=="rectangle"&&_!=="oval"&&_!=="parabola"||(function(M,P,A,D,z,$,U){var V,H,G,Y,te,re,de,le,ye,Pe;if((G=P.length)<2||P[0].length<2)return;for(V=0;V<G;V++)P[V]=R(P[V],D);if(Y=P[0].length,!z)return X(M,P[0],P[G-1],A);var Re=[],Me=[],we=[];for(H=0;H<G;H++)Re.push(.25+1.5*Math.sqrt((G-1)*H-Math.pow(H,2))/(G-1)),Me.push(.5),we.push(2*(Math.pow(H/G,2)-H/G)+.6);var Ue,Je,tt,Ye,ut,ft,Ze,pt,Be,et,St=[];for(H=0;H<2*G-1;H++)St[H]=[H,H+1,H+1-2*G,H-2*G];St[2*G-1]=[H,H+1-2*G,H+1-4*G,H-2*G];let st=M.updateGeoGroup();for(V=0;V<Y;V++){let Pt=M.groups,Ht=!1;var wt,Et;for(st=M.updateGeoGroup(2*G),Pt!=M.groups&&V>0&&(V-=1,Ht=!0),ft=Math.round(V*(A.length-1)/Y),ut=x.CC.color(A[ft]),ye=de,Pe=le,de=[],le=[],te=[],P[0][V].atom!==void 0&&(Ye=P[0][V].atom,U==="oval"?re=Re:U==="rectangle"?re=Me:U==="parabola"&&(re=we)),re||(re=Me),H=0;H<G;H++)wt=V<Y-1?P[H][V+1].clone().sub(P[H][V]):P[H][V-1].clone().sub(P[H][V]).negate(),Et=H<G-1?P[H+1][V].clone().sub(P[H][V]):P[H-1][V].clone().sub(P[H][V]).negate(),te[H]=Et.cross(wt).normalize().multiplyScalar(z*re[H]);for(H=0;H<G;H++)de[H]=P[H][V].clone().add(te[H].clone().negate());for(H=0;H<G;H++)le[H]=P[H][V].clone().add(te[H]);for(Ze=st.vertexArray,pt=st.colorArray,Be=st.faceArray,Je=3*(Ue=st.vertices),H=0;H<G;H++)Ze[Je+3*H+0]=de[H].x,Ze[Je+3*H+1]=de[H].y,Ze[Je+3*H+2]=de[H].z;for(H=0;H<G;H++)Ze[Je+3*H+0+3*G]=le[G-1-H].x,Ze[Je+3*H+1+3*G]=le[G-1-H].y,Ze[Je+3*H+2+3*G]=le[G-1-H].z;for(H=0;H<2*G;++H)pt[Je+3*H+0]=ut.r,pt[Je+3*H+1]=ut.g,pt[Je+3*H+2]=ut.b;if(V>0&&!Ht){for(H=0;H<2*G;H++)et=[Ue+St[H][0],Ue+St[H][1],Ue+St[H][2],Ue+St[H][3]],Be[tt=st.faceidx]=et[0],Be[tt+1]=et[1],Be[tt+2]=et[3],Be[tt+3]=et[1],Be[tt+4]=et[2],Be[tt+5]=et[3],st.faceidx+=6;if(Ye.clickable||Ye.hoverable){var it=[];for(H in it.push(new p.Triangle(ye[0],de[0],de[G-1])),it.push(new p.Triangle(ye[0],de[G-1],ye[G-1])),it.push(new p.Triangle(ye[G-1],de[G-1],le[G-1])),it.push(new p.Triangle(ye[G-1],le[G-1],Pe[G-1])),it.push(new p.Triangle(le[0],Pe[0],Pe[G-1])),it.push(new p.Triangle(le[G-1],le[0],Pe[G-1])),it.push(new p.Triangle(de[0],ye[0],Pe[0])),it.push(new p.Triangle(le[0],de[0],Pe[0])),it)Ye.intersectionShape.triangle.push(it[H])}}st.vertices+=2*G}for(Ze=st.vertexArray,pt=st.colorArray,Be=st.faceArray,Je=3*(Ue=st.vertices),tt=st.faceidx,V=0;V<G-1;V++)et=[V,V+1,2*G-2-V,2*G-1-V],Be[tt=st.faceidx]=et[0],Be[tt+1]=et[1],Be[tt+2]=et[3],Be[tt+3]=et[1],Be[tt+4]=et[2],Be[tt+5]=et[3],st.faceidx+=6;for(V=0;V<G-1;V++)et=[Ue-1-V,Ue-2-V,Ue-2*G+V+1,Ue-2*G+V],Be[tt=st.faceidx]=et[0],Be[tt+1]=et[1],Be[tt+2]=et[3],Be[tt+3]=et[1],Be[tt+4]=et[2],Be[tt+5]=et[3],st.faceidx+=6})(oe,n,a,h,f,0,_)}function F(oe){return oe&&oe.elem==="C"&&oe.atom==="CA"}function B(oe,n){if(oe&&n&&oe.chain===n.chain){if(!(oe.hetflag||n.hetflag||oe.reschain!==n.reschain||oe.resi!==n.resi&&oe.resi!==n.resi-1))return!0;if(oe.resi<n.resi){var a=oe.x-n.x,h=oe.y-n.y,f=oe.z-n.z,T=a*a+h*h+f*f;if(oe.atom=="CA"&&n.atom=="CA"&&T<16||(oe.atom=="P"||n.atom=="P")&&T<64)return!0}}return!1}function W(oe,n,a,h,f){if(n!=null&&n.vertices!=0){f&&(n.initTypedArrays(),n.setUpNormals());var T=new u.MeshDoubleLambertMaterial;T.vertexColors=u.Coloring.FaceColors,typeof a=="number"&&a>=0&&a<1&&(T.transparent=!0,T.opacity=a),T.outline=h;var _=new u.Mesh(n,T);oe.add(_)}}function J(oe,n,a,h,f,T,_,M,P){var A,D,z,$,U,V;if(h&&f&&_){var H=f.sub(h);H.normalize();var G=M[P];for(D=P+1;D<M.length&&(G=M[D]).atom!=_.atom;D++);if((G=G?new d.Vector3(G.x,G.y,G.z):new d.Vector3(0,0,0)).sub(h),_.ss==="arrow start"){var Y=G.clone().multiplyScalar(.3).cross(f);h.add(Y);var te=G.clone().cross(H).normalize();H.rotateAboutVector(te,.43)}for(_.style.cartoon.ribbon?A=_.style.cartoon.thickness||K:_.style.cartoon.width?A=_.style.cartoon.width:_.ss==="c"?A=_.atom==="P"?k:O:_.ss==="arrow start"?(A=C,U=!0):A=_.ss==="arrow end"||_.ss==="h"&&_.style.cartoon.tubes||_.ss==="tube start"?O:C,T!=null&&H.dot(T)<0&&H.negate(),H.multiplyScalar(A),D=0;D<n;D++)z=2*D/(n-1)-1,($=new d.Vector3(h.x+z*H.x,h.y+z*H.y,h.z+z*H.z)).atom=_,_.ss==="s"&&($.smoothen=!0),oe[D].push($);if(U)for(H.multiplyScalar(2),D=0;D<n;D++)z=2*D/(n-1)-1,($=new d.Vector3(h.x+z*H.x,h.y+z*H.y,h.z+z*H.z)).atom=_,$.smoothen=!1,$.skip=!0,oe[D].push($);return V=_.style.cartoon.style||"default",oe.style?oe.style!=V&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),oe.style="default"):oe.style=V,_.ss!=="arrow start"&&_.ss!=="arrow end"||(_.ss="s"),U}}const N={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},ee={DA:!0,DG:!0,A:!0,G:!0},Se={DT:!0,DC:!0,U:!0,C:!0,T:!0},ce={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function ge(oe,n,a,h=10){let f=h,T=h;var _,M,P,A,D,z,$,U,V,H,G,Y,te,re,de,le,ye,Pe,Re=new u.Geometry(!0),Me=new u.Geometry(!0),we=[],Ue=[],Je=1,tt=!1,Ye={};for(var ut in w.Gradient.builtinGradients)w.Gradient.builtinGradients.hasOwnProperty(ut)&&(Ye[ut]=new w.Gradient.builtinGradients[ut](a[1],a[0]));var ft=function(Vt,Xt){return a&&Xt.color==="spectrum"?Xt.colorscheme in Ye?Ye[Xt.colorscheme].valueToHex(Vt.resi):Ye.sinebow.valueToHex(Vt.resi):(0,v.getColorFromStyle)(Vt,Xt).getHex()};for(U=0;U<f;U++)Ue[U]=[];var Ze=!1,pt=!1,Be=[];for(U in n){if((A=n[U]).elem==="C"&&A.atom==="CA"){var et=B(P,A);et&&A.ss==="s"?Ze=!0:Ze&&(P&&M&&P.style.cartoon.arrows&&M.style.cartoon.arrows&&(P.ss="arrow end",M.ss="arrow start"),Ze=!1),et&&(P.ss==="h"||P.ss=="tube start")&&P.style.cartoon.tubes?!pt&&P.ss!="tube start"&&A.style.cartoon.tubes&&(A.ss="tube start",pt=!0):pt&&(P.ss==="tube start"?P.ss="tube end":M&&M.style.cartoon.tubes&&(M.ss="tube end"),pt=!1),M=P,P=A}A&&A.atom in N&&Be.push(A)}pt&&P.style.cartoon.tubes&&(P.ss="tube end",pt=!1);var St=function(Vt){Ue[0].length>0&&S(Me,Ue,we,T,$,0,Ue.style);var Xt=[],yr=null;if(Vt){for(U=0;U<f;U++)Xt[U]=Ue[U][Ue[U].length-1];yr=we[we.length-1]}for(Ue=[],U=0;U<f;U++)Ue[U]=[];if(we=[],Vt){for(U=0;U<f;U++)Ue[U].push(Xt[U]);we.push(yr)}W(oe,Me,Je,tt,!0),W(oe,Re,Je,tt,!1),Me=new u.Geometry(!0),Re=new u.Geometry(!0)};P=void 0;let st=[];for(var wt=0;wt<Be.length;wt++){var Et=(A=Be[wt]).resn.trim(),it=Et in ce;if(Je=1,_=A.style.cartoon,P&&P.style.cartoon&&(Je=P.style.cartoon.opacity),P&&P.style.cartoon&&P.style.cartoon.outline&&(tt=P.style.cartoon.outline),!P||!P.style.cartoon||A.style.cartoon&&P.style.cartoon.opacity==A.style.cartoon.opacity||St(P.chain==A.chain),P&&A&&!B(P,A)&&P.chain&&P.chain==A.chain&&!P.hetflag&&!A.hetflag&&P.reschain+1==A.reschain&&st.push([P,A]),_.style==="trace"){if(!A.hetflag&&(A.elem==="C"&&A.atom==="CA"||it&&A.atom==="P"||A.atom==="BB")){if(z=ft(A,_),$=(0,v.isNumeric)(_.thickness)?_.thickness:K,B(P,A))if(z==D){var Pt=x.CC.color(z);c.drawCylinder(Re,P,A,$,Pt,2,2)}else{var Ht=new d.Vector3().addVectors(P,A).multiplyScalar(.5),Mt=x.CC.color(D),ct=x.CC.color(z);c.drawCylinder(Re,P,Ht,$,Mt,2,0),c.drawCylinder(Re,Ht,A,$,ct,0,2)}if((A.clickable===!0||A.hoverable)&&A.intersectionShape!==void 0){var Jt=new d.Vector3(A.x,A.y,A.z);A.intersectionShape.sphere.push(new p.Sphere(Jt,$))}P=A,D=z}}else{if(F(A)||it&&(A.atom==="P"||A.atom.indexOf("O5")==0)){if(Pe)if(A.ss==="tube end")Pe=!1,ye=new d.Vector3(A.x,A.y,A.z),c.drawCylinder(Re,le,ye,2,x.CC.color(D),1,1),A.ss="h";else{if(P.chain==A.chain&&P.ss!=="tube end")continue;Pe=!1,P.ss="h",ye=new d.Vector3(P.x,P.y,P.z),c.drawCylinder(Re,le,ye,2,x.CC.color(D),1,1)}if(P&&(!B(P,A)||P.ss==="tube start")){for(P.ss==="tube start"&&(Pe=!0,le=new d.Vector3(P.x,P.y,P.z),P.ss="h"),de&&(re=Y?new d.Vector3().addVectors(P,Y).multiplyScalar(.5):new d.Vector3(P.x,P.y,P.z),c.drawCylinder(Re,re,de,Z,x.CC.color(de.color),0,2),J(Ue,f,!0,Y,te,G,P,Be,wt),we.push(z),re=null,de=null),Ue[0].length>0&&S(Me,Ue,we,T,$,0,Ue.style),Ue=[],U=0;U<f;U++)Ue[U]=[];we=[]}if(P===void 0||P.rescode!=A.rescode||P.resi!=A.resi){if(de&&P!=null){var Nt=(re=new d.Vector3().addVectors(P,A).multiplyScalar(.5)).clone().sub(de).multiplyScalar(.02);re.add(Nt),c.drawCylinder(Re,re,de,Z,x.CC.color(de.color),0,2),re=null,de=null}z=ft(A,_),we.push(z),$=(0,v.isNumeric)(_.thickness)?_.thickness:K,P=A,(V=new d.Vector3(P.x,P.y,P.z)).resi=P.resi,D=z}A.clickable!==!0&&A.hoverable!==!0||A.intersectionShape!==void 0&&A.intersectionShape.triangle!==void 0||(A.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else P!=null&&(F(P)&&A.atom==="O"||it&&P.atom==="P"&&(A.atom==="OP2"||A.atom==="O2P")||it&&P.atom.indexOf("O5")==0&&A.atom.indexOf("C5")==0)?((H=new d.Vector3(A.x,A.y,A.z)).resi=A.resi,A.atom!=="OP2"&&A.atom!=="O2P"||(te=new d.Vector3(A.x,A.y,A.z))):it&&A.atom.indexOf("O3")==0?Y=new d.Vector3(A.x,A.y,A.z):(A.atom==="N1"&&Et in ee||A.atom==="N3"&&Et in Se)&&((de=new d.Vector3(A.x,A.y,A.z)).color=(0,v.getColorFromStyle)(A,_).getHex());H&&V&&H.resi===V.resi&&(J(Ue,f,!0,V,H,G,P,Be,wt),G=H,V=null,H=null,we.push(z))}}de&&(re=Y?new d.Vector3().addVectors(P,Y).multiplyScalar(.5):new d.Vector3(P.x,P.y,P.z),c.drawCylinder(Re,re,de,Z,x.CC.color(de.color),0,2),J(Ue,f,!0,Y,te,G,P,Be,wt),we.push(z)),St(!1);var qt=function(Vt,Xt){if(Vt.style.cartoon.gapcutoff&&Vt.style.cartoon.gapcutoff==Xt.style.cartoon.gapcutoff){let Fr=Vt.style.cartoon.gapcutoff,Tr=Xt.resi-Vt.resi;if(Tr>0&&Tr<Fr){let ii=.25,Wr=Xt.x-Vt.x,br=Xt.y-Vt.y,$r=Xt.z-Vt.z,ci=Math.sqrt(Wr*Wr+br*br+$r*$r),ni=ci/(2*Tr),hi=new d.Vector3(Vt.x,Vt.y,Vt.z),Ii=ci/ni,xi=new d.Vector3((Xt.x-Vt.x)/Ii,(Xt.y-Vt.y)/Ii,(Xt.z-Vt.z)/Ii);hi.add({x:xi.x/2,y:xi.y/2,z:xi.z/2});let Oi=hi.clone().add(xi);xi.multiplyScalar(2);let Hr=(0,v.extend)({},Vt);for(var yr=0;yr<Tr;yr++){Hr.resi+=1;let Xr=ft(Hr,Hr.style.cartoon);c.drawCylinder(Re,hi,Oi,ii,x.CC.color(Xr),o.FLAT,o.FLAT),hi.add(xi),Oi.add(xi)}St(!1)}}};for(let Vt of st)qt(Vt[0],Vt[1])}var me=s(797),Ce=s(865),ue=s(392);function L(oe,n){for(var a=[[]],h=(n=n||{}).assignBonds===void 0||n.assignBonds,f=oe.trimStart().split(/\r?\n|\r/);f.length>0&&!(f.length<3);){var T=parseInt(f[0]);if(isNaN(T)||T<=0||f.length<T+2)break;var _=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi.exec(f[1]);if(_!=null&&_.length>1){var M=new Float32Array(_[1].split(/\s+/)),P=new u.Matrix3(M[0],M[3],M[6],M[1],M[4],M[7],M[2],M[5],M[8]);a.modelData=[{cryst:{matrix:P}}]}for(var A=2,D=a[a.length-1].length,z=D+T,$=D;$<z;$++){var U=f[A++].trim().split(/\s+/),V={};V.serial=$;var H=U[0];V.atom=V.elem=H[0].toUpperCase()+H.substring(1,2).toLowerCase(),V.x=parseFloat(U[1]),V.y=parseFloat(U[2]),V.z=parseFloat(U[3]),V.hetflag=!0,V.bonds=[],V.bondOrder=[],V.properties={},a[a.length-1][$]=V,U.length>=7&&(V.dx=parseFloat(U[4]),V.dy=parseFloat(U[5]),V.dz=parseFloat(U[6]))}if(!n.multimodel)break;a.push([]),f.splice(0,A)}if(h)for(let Y=0;Y<a.length;Y++)(0,ue.assignBonds)(a[Y],n);if(n.onemol){var G=a;(a=[]).push(G[0]);for(let Y=1;Y<G.length;Y++){let te=a[0].length;for(let re=0;re<G[Y].length;re++){let de=G[Y][re];for(let le=0;le<de.bonds.length;le++)de.bonds[le]=de.bonds[le]+te;de.index=a[0].length,de.serial=a[0].length,a[0].push(de)}}}return a}function he(oe,n){var a="V2000",h=oe.split(/\r?\n|\r/);return h.length>3&&h[3].length>38&&(a=h[3].substring(34,39)),a==="V2000"?(function(f,T){var _=[[]],M=!1;for(T.keepH!==void 0&&(M=!T.keepH);f.length>0&&!(f.length<4);){var P=parseInt(f[3].substring(0,3));if(isNaN(P)||P<=0)break;var A=parseInt(f[3].substring(3,6)),D=4;if(f.length<4+P+A)break;var z,$,U=[],V=_[_.length-1].length,H=V+P;for(z=V;z<H;z++,D++){var G={},Y=($=f[D]).substring(31,34).replace(/ /g,"");G.atom=G.elem=Y[0].toUpperCase()+Y.substring(1).toLowerCase(),G.elem==="H"&&M||(G.serial=z,U[z]=_[_.length-1].length,G.x=parseFloat($.substring(0,10)),G.y=parseFloat($.substring(10,20)),G.z=parseFloat($.substring(20,30)),G.hetflag=!0,G.bonds=[],G.bondOrder=[],G.properties={},G.index=_[_.length-1].length,_[_.length-1].push(G))}for(z=0;z<A;z++,D++){$=f[D];var te=U[parseInt($.substring(0,3))-1+V],re=U[parseInt($.substring(3,6))-1+V],de=parseFloat($.substring(6));te!==void 0&&re!==void 0&&(_[_.length-1][te].bonds.push(re),_[_.length-1][te].bondOrder.push(de),_[_.length-1][re].bonds.push(te),_[_.length-1][re].bondOrder.push(de))}if(!T.multimodel)break;for(T.onemol||_.push([]);f[D]!=="$$$$"&&D<f.length;)D++;f.splice(0,++D)}return _})(h,n):a==="V3000"?(function(f,T){var _=[[]],M=!1;for(T.keepH!==void 0&&(M=!T.keepH);f.length>0&&!(f.length<8)&&f[4].startsWith("M  V30 BEGIN CTAB")&&f[5].startsWith("M  V30 COUNTS")&&!(f[5].length<14);){var P=f[5].substring(13).match(/\S+/g);if(P.length<2)break;var A=parseInt(P[0]);if(isNaN(A)||A<=0)break;var D=parseInt(P[1]),z=7;if(f.length<8+A+D)break;var $,U=[],V=_[_.length-1].length,H=V+A;for($=V;$<H;$++,z++){var G=f[z].substring(6).match(/\S+/g);if(G.length>4){var Y={},te=G[1].replace(/ /g,"");Y.atom=Y.elem=te[0].toUpperCase()+te.substring(1).toLowerCase(),Y.elem==="H"&&M||(Y.serial=$,U[$]=_[_.length-1].length,Y.x=parseFloat(G[2]),Y.y=parseFloat(G[3]),Y.z=parseFloat(G[4]),Y.hetflag=!0,Y.bonds=[],Y.bondOrder=[],Y.properties={},Y.index=_[_.length-1].length,_[_.length-1].push(Y))}}if(f[z]!=="M  V30 END ATOM"||(z++,D===0||f[z]!=="M  V30 BEGIN BOND"))break;for(z++,$=0;$<D;$++,z++){var re=f[z].substring(6).match(/\S+/g);if(re.length>3){var de=U[parseInt(re[2])-1+V],le=U[parseInt(re[3])-1+V],ye=parseFloat(re[1]);de!==void 0&&le!==void 0&&(_[_.length-1][de].bonds.push(le),_[_.length-1][de].bondOrder.push(ye),_[_.length-1][le].bonds.push(de),_[_.length-1][le].bondOrder.push(ye))}}if(!T.multimodel)break;for(T.onemol||_.push([]);f[z]!=="$$$$"&&z<f.length;)z++;f.splice(0,++z)}return _})(h,n):[[""]]}function se(oe,n){var a=[[]];typeof oe=="string"&&(oe=JSON.parse(oe));for(var h=oe.m,f=h[0].a,T=h[0].b,_=h[0].s,M=n!==void 0&&n.parseStyle!==void 0?n.parseStyle:_!==void 0,P=a[a.length-1].length,A=0;A<f.length;A++){var D=f[A],z={};z.id=D.i,z.x=D.x,z.y=D.y,z.z=D.z||0,z.bonds=[],z.bondOrder=[];var $=D.l||"C";z.elem=$[0].toUpperCase()+$.substring(1).toLowerCase(),z.serial=a[a.length-1].length,M&&(z.style=_[D.s||0]),a[a.length-1].push(z)}for(let U=0;U<T.length;U++){let V=T[U],H=V.b+P,G=V.e+P,Y=V.o||1,te=a[a.length-1][H],re=a[a.length-1][G];te.bonds.push(G),te.bondOrder.push(Y),re.bonds.push(H),re.bondOrder.push(Y)}return a}function q(oe,n){(function(A,D){const z=D||3.2,$=z*z,U=[];for(let V=0,H=A.length;V<H;V++){A[V].index=V;const G=A[V];G.hetflag||G.atom!=="N"&&G.atom!=="O"||(U.push(G),G.hbondOther=null,G.hbondDistanceSq=Number.POSITIVE_INFINITY)}U.sort(function(V,H){return V.z-H.z});for(let V=0,H=U.length;V<H;V++){const G=U[V];for(let Y=V+1;Y<H;Y++){const te=U[Y],re=te.z-G.z;if(re>z)break;if(te.atom==G.atom)continue;const de=Math.abs(te.y-G.y);if(de>z)continue;const le=Math.abs(te.x-G.x);if(le>z)continue;const ye=le*le+de*de+re*re;ye>$||te.chain==G.chain&&Math.abs(te.resi-G.resi)<4||(ye<G.hbondDistanceSq&&(G.hbondOther=te,G.hbondDistanceSq=ye),ye<te.hbondDistanceSq&&(te.hbondOther=G,te.hbondDistanceSq=ye))}}})(oe,n);const a={};let h,f,T,_,M,P;for(h=0,f=oe.length;h<f;h++)if(M=oe[h],a[M.chain]===void 0&&(a[M.chain]=[]),isFinite(M.hbondDistanceSq)){const A=M.hbondOther;a[A.chain]===void 0&&(a[A.chain]=[]),Math.abs(A.resi-M.resi)===4&&(a[M.chain][M.resi]="h")}for(T in a)for(_=1;_<a[T].length-1;_++){const A=a[T][_-1],D=a[T][_+1];P=a[T][_],A=="h"&&A==D&&P!=A&&(a[T][_]=A)}for(h=0,f=oe.length;h<f;h++)M=oe[h],isFinite(M.hbondDistanceSq)&&a[M.chain][M.resi]!="h"&&M.ss!=="h"&&(a[M.chain][M.resi]="maybesheet");for(let A=0,D=oe.length;A<D;A++)if(M=oe[A],isFinite(M.hbondDistanceSq)&&a[M.chain][M.resi]=="maybesheet"){let z=M.hbondOther,$=a[z.chain][z.resi];$!="maybesheet"&&$!="s"||(a[M.chain][M.resi]="s",a[z.chain][z.resi]="s")}for(let A in a){for(let D=1;D<a[A].length-1;D++){const z=a[A][D-1],$=a[A][D+1];P=a[A][D],z=="s"&&z==$&&P!=z&&(a[A][D]=z)}for(let D=0;D<a[A].length;D++){const z=a[A][D];z!="h"&&z!="s"||a[A][D-1]!=z&&a[A][D+1]!=z&&delete a[A][D]}}for(h=0,f=oe.length;h<f;h++)M=oe[h],P=a[M.chain][M.resi],delete M.hbondOther,delete M.hbondDistanceSq,P!==void 0&&P!=="maybesheet"&&(M.ss=P,a[M.chain][M.resi-1]!=P&&(M.ssbegin=!0),a[M.chain][M.resi+1]!=P&&(M.ssend=!0))}function ke(oe,n,a,h){const f=!a.duplicateAssemblyAtoms,T=n.length;let _=T,M=-1,P=null,A=null;(a.normalizeAssembly||a.wrapAtoms)&&h&&(P=(0,u.conversionMatrix3)(h.a,h.b,h.c,h.alpha,h.beta,h.gamma),A=new u.Matrix3,A.getInverse3(P));let D=function(U){let V=U.clone().applyMatrix3(A);const H=[V.x,V.y,V.z],G=[0,0,0];for(let te=0;te<3;te++){for(;H[te]<-.001;)H[te]+=1,G[te]+=1;for(;H[te]>1.001;)H[te]-=1,G[te]-=1}const Y=new u.Vector3(G[0],G[1],G[2]);return Y.applyMatrix3(P),Y};if(a.normalizeAssembly&&h)for(let U=0;U<oe.length;U++){const V=new u.Vector3(0,0,0);for(let G=0;G<T;G++){const Y=new u.Vector3(n[G].x,n[G].y,n[G].z);Y.applyMatrix4(oe[U]),V.add(Y)}V.divideScalar(T);const H=D(V);oe[U].isNearlyIdentity()&&H.lengthSq()>.001&&(M=U),oe[U].translate(H)}if(f){if(oe.length>1)for(let U=0;U<n.length;U++){var z=[];for(let V=0;V<oe.length;V++)if(!oe[V].isNearlyIdentity()){var $=new u.Vector3;$.set(n[U].x,n[U].y,n[U].z),$.applyMatrix4(oe[V]),z.push($)}n[U].symmetries=z}}else{for(let U=0;U<T;U++)n[U].sym=-1;for(let U=0;U<oe.length;U++)if(oe[U].isNearlyIdentity()||M==U)for(let V=0;V<T;V++)n[V].sym=U;else{let V=new u.Vector3;for(let H=0;H<T;H++){const G=[];for(let te=0;te<n[H].bonds.length;te++)G.push(n[H].bonds[te]+_);if(V.set(n[H].x,n[H].y,n[H].z),V.applyMatrix4(oe[U]),a.wrapAtoms&&h){let te=D(V);V.add(te)}const Y={};for(const te in n[H])Y[te]=n[H][te];Y.x=V.x,Y.y=V.y,Y.z=V.z,Y.bonds=G,Y.sym=U,Y.index=n.length,n.push(Y)}_=n.length}if(a.wrapAtoms&&h){let U=new u.Vector3;for(let V=0;V<T;V++){U.set(n[V].x,n[V].y,n[V].z);let H=D(U);U.add(H),n[V].x=U.x,n[V].y=U.y,n[V].z=U.z}}if(M>=0){const U=new u.Vector3;for(let V=0;V<T;V++)U.set(n[V].x,n[V].y,n[V].z),U.applyMatrix4(oe[M]),n[V].x=U.x,n[V].y=U.y,n[V].z=U.z}oe.length=0}}var fe=s(408);const De=new Set(["ABU","ACD","ALA","ALB","ALI","ARG","AR0","ASN","ASP","ASX","BAS","CYS","CYH","CYX","CSS","CSH","GLN","GLU","GLX","GLY","HIS","HIE","HID","HIP","HYP","ILE","ILU","LEU","LYS","MET","PCA","PGA","PHE","PR0","PRO","PRZ","SER","THR","TRP","TYR","VAL","A","1MA","C","5MC","OMC","G","1MG","2MG","M2G","7MG","OMG","YG","I","T","U","+U","H2U","5MU","PSU","ACE","F0R","H2O","HOH","WAT"]);function He(oe,n){const a=[],h=[];for(let M=0,P=oe.length;M<P;M++){const A=oe[M];A.index=M,A.hetflag||!De.has(A.resn)?h.push(A):a.push(A)}(0,ue.assignBonds)(h,n),a.sort(function(M,P){return M.chain!==P.chain?M.chain<P.chain?-1:1:M.resi-P.resi});let f,T=-1,_=-1;for(let M=0,P=a.length;M<P;M++){const A=a[M];A.resi!==T&&(T=A.resi,f||_++,f=!1),A.reschain=_;for(let D=M+1;D<a.length;D++){const z=a[D];if(z.chain!==A.chain||z.resi-A.resi>1)break;(0,fe.areConnected)(A,z,n)&&(A.bonds.indexOf(z.index)===-1&&(A.bonds.push(z.index),A.bondOrder.push(1),z.bonds.push(A.index),z.bondOrder.push(1)),A.resi!==z.resi&&(f=!0))}}}const ae=function(oe,n,a,h){return new u.Vector3(n,a,h).applyMatrix3(oe)};function Ae(oe,n={}){const a=[],h=!n.doAssembly,f=a.modelData=[],T=n.assignBonds===void 0||n.assignBonds;function _($,U){const V=[];let H=0,G=0;for(;G<$.length;){for(;$.substring(G,G+U.length)!==U&&G<$.length;)if($[G]==="'"){for(G++;G<$.length&&$[G]!=="'";)G++;for(;$.substring(G,G+U.length)!==U&&G<$.length;)G++}else if($[G]==='"'){for(G++;G<$.length&&$[G]!=='"';)G++;G++}else G++;V.push($.substring(H,G)),H=G+=U.length}return V}const M=oe.split(/\r?\n|\r/),P=[];let A=!1;for(let $=0;$<M.length;$++){var D=M[$].split("#")[0];if(A?D[0]===";"&&(A=!1):D[0]===";"&&(A=!0),A||D!==""){if(!A&&(D=D.trim())[0]==="_"){const U=D.split(/\s/)[0].indexOf(".");if(U>-1){let V=D.split("");V[U]="_",D=(D=V.join("")).substring(0,U)+"_"+D.substring(U+1)}}P.push(D)}}let z=0;for(;z<P.length;){for(;!P[z].startsWith("data_")||P[z]==="data_global";)z++;z++;const $={};for(;z<P.length&&!P[z].startsWith("data_");)if(P[z][0]===void 0)z++;else if(P[z][0]==="_"){const G=P[z].split(/\s/)[0].toLowerCase(),Y=$[G]=$[G]||[],te=P[z].substring(P[z].indexOf(G)+G.length);if(te==="")if(z++,P[z][0]===";"){let re=P[z].substring(1);for(z++;P[z]!==";";)re=re+`
`+P[z],z++;Y.push(re)}else Y.push(P[z]);else Y.push(te.trim());z++}else if(P[z].substring(0,5)==="loop_"){z++;const G=[];for(;P[z]===""||P[z][0]==="_";){if(P[z]!==""){let te=P[z].split(/\s/)[0].toLowerCase(),re=$[te]=$[te]||[];G.push(re)}z++}let Y=0;for(;z<P.length&&P[z][0]!=="_"&&!P[z].startsWith("loop_")&&!P[z].startsWith("data_");){let te=_(P[z]," ");for(let re=0;re<te.length;re++)te[re]!==""&&(G[Y].push(te[re]),Y=(Y+1)%G.length);z++}}else z++;f.push({symmetries:[]}),a.push([]);const U=$._atom_site_id!==void 0?$._atom_site_id.length:$._atom_site_label.length;let V;if($._cell_length_a!==void 0){const G=parseFloat($._cell_length_a),Y=parseFloat($._cell_length_b),te=parseFloat($._cell_length_c),re=parseFloat($._cell_angle_alpha)||90,de=parseFloat($._cell_angle_beta)||90,le=parseFloat($._cell_angle_gamma)||90;V=(0,u.conversionMatrix3)(G,Y,te,re,de,le),f[f.length-1].cryst={a:G,b:Y,c:te,alpha:re,beta:de,gamma:le}}for(let G=0;G<U;G++){if($._atom_site_group_pdb!==void 0&&$._atom_site_group_pdb[G]==="TER")continue;const Y={};if($._atom_site_cartn_x!==void 0)Y.x=parseFloat($._atom_site_cartn_x[G]),Y.y=parseFloat($._atom_site_cartn_y[G]),Y.z=parseFloat($._atom_site_cartn_z[G]);else{const re=ae(V,parseFloat($._atom_site_fract_x[G]),parseFloat($._atom_site_fract_y[G]),parseFloat($._atom_site_fract_z[G]));Y.x=re.x,Y.y=re.y,Y.z=re.z}Y.chain=$._atom_site_auth_asym_id?$._atom_site_auth_asym_id[G]:$._atom_site_label_asym_id?$._atom_site_label_asym_id[G]:void 0,Y.lchain=$._atom_site_label_asym_id?$._atom_site_label_asym_id[G]:void 0,Y.resi=$._atom_site_auth_seq_id?parseInt($._atom_site_auth_seq_id[G]):$._atom_site_label_seq_id?$._atom_site_label_seq_id[G]:void 0,Y.resn=$._atom_site_auth_comp_id?$._atom_site_auth_comp_id[G].trim():$._atom_site_label_comp_id?$._atom_site_label_comp_id[G].trim():void 0,Y.atom=$._atom_site_auth_atom_id?$._atom_site_auth_atom_id[G].replace(/"/gm,""):$._atom_site_label_atom_id?$._atom_site_label_atom_id[G].replace(/"/gm,""):void 0,Y.hetflag=!$._atom_site_group_pdb||$._atom_site_group_pdb[G]==="HETA"||$._atom_site_group_pdb[G]==="HETATM",$._atom_site_b_iso_or_equiv&&(Y.b=parseFloat($._atom_site_b_iso_or_equiv[G]));let te="X";$._atom_site_type_symbol?te=$._atom_site_type_symbol[G].replace(/\(?\+?\d+.*/,""):$._atom_site_label&&(te=$._atom_site_label[G].split("_")[0].replace(/\(?\d+.*/,"")),Y.elem=te[0].toUpperCase()+te.substring(1,2).toLowerCase(),Y.bonds=[],Y.ss="c",Y.serial=G,Y.bondOrder=[],Y.properties={},a[a.length-1].push(Y)}if($._pdbx_struct_oper_list_id!==void 0&&!h)for(let G=0;G<$._pdbx_struct_oper_list_id.length;G++){const Y=parseFloat($["_pdbx_struct_oper_list_matrix[1][1]"][G]),te=parseFloat($["_pdbx_struct_oper_list_matrix[1][2]"][G]),re=parseFloat($["_pdbx_struct_oper_list_matrix[1][3]"][G]),de=parseFloat($["_pdbx_struct_oper_list_vector[1]"][G]),le=parseFloat($["_pdbx_struct_oper_list_matrix[2][1]"][G]),ye=parseFloat($["_pdbx_struct_oper_list_matrix[2][2]"][G]),Pe=parseFloat($["_pdbx_struct_oper_list_matrix[2][3]"][G]),Re=parseFloat($["_pdbx_struct_oper_list_vector[2]"][G]),Me=parseFloat($["_pdbx_struct_oper_list_matrix[3][1]"][G]),we=parseFloat($["_pdbx_struct_oper_list_matrix[3][2]"][G]),Ue=parseFloat($["_pdbx_struct_oper_list_matrix[3][3]"][G]),Je=parseFloat($["_pdbx_struct_oper_list_vector[3]"][G]),tt=new u.Matrix4(Y,te,re,de,le,ye,Pe,Re,Me,we,Ue,Je);f[f.length-1].symmetries.push(tt)}const H=function(G){const Y=G.match("-"),te=(G=G.replace(/[-xyz]/g,"")).split("/");let re,de;return de=te[1]===void 0?1:parseInt(te[1]),re=te[0]===""?1:parseInt(te[0]),re/de*(Y?-1:1)};if($._symmetry_equiv_pos_as_xyz!==void 0&&!h)for(let G=0;G<$._symmetry_equiv_pos_as_xyz.length;G++){const Y=$._symmetry_equiv_pos_as_xyz[G].replace(/["' ]/g,"").split(",").map(function(le){return le.replace(/-/g,"+-")});let te=new u.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let le=0;le<3;le++){const ye=Y[le].split("+");for(let Pe=0;Pe<ye.length;Pe++){const Re=ye[Pe];if(Re==="")continue;const Me=H(Re);Re.match("x")?te.elements[le+0]=Me:Re.match("y")?te.elements[le+4]=Me:Re.match("z")?te.elements[le+8]=Me:te.elements[le+12]=Me}}const re=V.getMatrix4(),de=new u.Matrix4().getInverse(re,!0);te=new u.Matrix4().multiplyMatrices(te,de),te=new u.Matrix4().multiplyMatrices(re,te),f[f.length-1].symmetries.push(te)}}for(let $=0;$<a.length;$++)!T||n.duplicateAssemblyAtoms&&!n.dontConnectDuplicatedAtoms||He(a[$],n),q(a[$],n.hbondCutoff),ke(f[$].symmetries,a[$],n,f[$].cryst),n.duplicateAssemblyAtoms&&!n.dontConnectDuplicatedAtoms&&T&&He(a[$],n);return a}let We={"C.1":"C",C1:"C","C.2":"C",C2:"C","C.3":"C",C3:"C","C.ar":"C",Car:"C","C.cat":"C",Ccat:"C","H.spc":"H",Hspc:"H","H.t3p":"H",Ht3p:"H","N.1":"N",N1:"N","N.2":"N",N2:"N","N.3":"N",N3:"N","N.4":"N",N4:"N","N.am":"N",Nam:"N","N.ar":"N",Nar:"N","N.p13":"N",Np13:"N","O.2":"O",O2:"O","O.3":"O",O3:"O","O.co2":"O",Oco2:"O","O.spc":"O",Ospc:"O","O.t3p":"O",Ot3p:"O","P.3":"P",P3:"P","S.2":"S",S2:"S","S.3":"S",S3:"S","S.o":"S",So:"S","S.o2":"S",So2:"S"};function qe(oe,n){var a=[[]],h=!1;n.keepH!==void 0&&(h=!n.keepH);var f=oe.search(/@<TRIPOS>MOLECULE/),T=oe.search(/@<TRIPOS>ATOM/);if(f==-1||T==-1)return a;for(var _=oe.substring(f).split(/\r?\n|\r/);_.length>0;){var M=[],P=_[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),A=parseInt(P[0]),D=0;P.length>1&&(D=parseInt(P[1]));var z,$=4;for(z=3;z<_.length;z++)if(_[z]=="@<TRIPOS>ATOM"){$=z+1;break}var U=a[a.length-1].length,V=U+A;for(z=U;z<V;z++){var H={},G=(P=_[$++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "))[5];if(G=We[G]!==void 0?We[G]:(G=G.split(".")[0])[0].toUpperCase()+G.substring(1).toLowerCase(),H.atom=P[1],H.elem=G,!(H.elem=="H"&&h)){var Y=a[a.length-1].length,te=parseInt(P[0]);H.serial=te,H.x=parseFloat(P[2]),H.y=parseFloat(P[3]),H.z=parseFloat(P[4]),H.atom=P[5];var re=parseFloat(P[8]);H.index=Y,H.bonds=[],H.bondOrder=[],H.properties={charge:re,partialCharge:re},M[te]=Y,a[a.length-1].push(H)}}for(var de=!1;$<_.length;)if(_[$++]=="@<TRIPOS>BOND"){de=!0;break}if(de&&D)for(z=0;z<D;z++){P=_[$++].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var le=parseInt(P[1]),ye=a[a.length-1][M[le]],Pe=parseInt(P[2]),Re=a[a.length-1][M[Pe]],Me=parseInt(P[3]);isNaN(Me)&&(Me=1),ye!==void 0&&Re!==void 0&&(ye.bonds.push(M[Pe]),ye.bondOrder.push(Me),Re.bonds.push(M[le]),Re.bondOrder.push(Me))}if(!n.multimodel)break;n.onemol||a.push([]),_.splice(0,$),oe=_.join(`
`)}return a}var Fe=s(40);function rt(oe,n){let a=oe.replace(/ /g,"");return a.length>0&&a[0]==="H"&&a!=="Hg"&&a!=="He"&&a!=="Hf"&&a!=="Hs"&&a!=="Ho"&&(a="H"),a.length>1&&(a=a[0].toUpperCase()+a.substring(1).toLowerCase(),Fe.bondTable[a]===void 0?a=a[0]:n&&(a==="Ca"||a==="Cd")&&(a="C")),a}function at(oe){for(const n in oe)return!1;return!0}function ot(oe,n,a){const h=[],f=n.assignBonds===void 0||n.assignBonds,T=!n.keepH,_=!!n.noSecondaryStructure,M=!n.noComputeSecondaryStructure,P=!n.doAssembly,A=n.altLoc?n.altLoc:"A",D={symmetries:[],cryst:void 0};let z,$=[];const U=[];let V;const H={};for(let G=0;G<oe.length;G++){V=oe[G].replace(/^\s*/,"");const Y=V.substring(0,6);let te,re,de;if(Y.indexOf("END")===0){if($=oe.slice(G+1),Y==="END")for(const le in a)a.hasOwnProperty(le)&&delete a[le];break}if(Y==="ATOM  "||Y==="HETATM"){let le,ye,Pe,Re,Me,we,Ue,Je,tt,Ye,ut,ft;if(ut=V.substring(16,17),ut!==" "&&ut!==A&&A!=="*"||(Ye=parseInt(V.substring(6,11)),z=V.substring(12,16).replace(/ /g,""),le=V.substring(17,20).replace(/ /g,""),ye=V.substring(21,22),Pe=parseInt(V.substring(22,26)),Re=V.substring(26,27),Me=parseFloat(V.substring(30,38)),we=parseFloat(V.substring(38,46)),Ue=parseFloat(V.substring(46,54)),ft=parseFloat(V.substring(60,68)),tt=V.substring(76,78).replace(/ /g,""),tt=tt===""||Fe.bondTable[tt]===void 0?rt(V.substring(12,14),V[0]=="A"):tt[0].toUpperCase()+tt.substring(1).toLowerCase(),tt==="H"&&T))continue;Je=Y[0]=="H",U[Ye]=h.length,h.push({resn:le,x:Me,y:we,z:Ue,elem:tt,hetflag:Je,altLoc:ut,chain:ye,resi:Pe,icode:Re,rescode:Pe+(Re!==" "?"^"+Re:""),serial:Ye,atom:z,bonds:[],ss:"c",bondOrder:[],properties:{},b:ft,pdbline:V})}else if(Y==="SHEET "){te=V.substring(21,22),re=parseInt(V.substring(22,26)),de=parseInt(V.substring(33,37)),te in a||(a[te]={}),a[te][re]="s1";for(let le=re+1;le<de;le++)a[te][le]="s";a[te][de]="s2"}else if(Y==="CONECT"){const le=U[parseInt(V.substring(6,11))],ye=h[le],Pe=[11,16,21,26];for(let Re=0;Re<4;Re++){const Me=U[parseInt(V.substring(Pe[Re],Pe[Re]+5))];let we=le+":"+Me;const Ue=h[Me];if(ye!==void 0&&Ue!==void 0)if(H[we]){H[we]+=1;for(let Je=0;Je<ye.bonds.length;Je++)if(ye.bonds[Je]==Me){const tt=H[we];ye.bondOrder[Je]=tt>=4?1:tt}}else H[we]=1,ye.bonds.length!=0&&ye.bonds[ye.bonds.length-1]===Me||(ye.bonds.push(Me),ye.bondOrder.push(1))}}else if(Y==="HELIX "){te=V.substring(19,20),re=parseInt(V.substring(21,25)),de=parseInt(V.substring(33,37)),te in a||(a[te]={}),a[te][re]="h1";for(let le=re+1;le<de;le++)a[te][le]="h";a[te][de]="h2"}else if(P||Y!=="REMARK"||V.substring(13,18)!=="BIOMT"){if(Y==="CRYST1"){let le,ye,Pe,Re,Me,we;le=parseFloat(V.substring(7,15)),ye=parseFloat(V.substring(16,24)),Pe=parseFloat(V.substring(25,33)),Re=parseFloat(V.substring(34,40)),Me=parseFloat(V.substring(41,47)),we=parseFloat(V.substring(48,54)),D.cryst={a:le,b:ye,c:Pe,alpha:Re,beta:Me,gamma:we}}else if(Y==="ANISOU"){const le=h[U[parseInt(V.substring(6,11))]];if(le){const ye=V.substring(30).trim().split(/\s+/),Pe={u11:parseInt(ye[0]),u22:parseInt(ye[1]),u33:parseInt(ye[2]),u12:parseInt(ye[3]),u13:parseInt(ye[4]),u23:parseInt(ye[5])};le.uMat=Pe}}}else{let le,ye=new u.Matrix4;for(le=1;le<=3;le++)if(V=oe[G].replace(/^\s*/,""),parseInt(V.substring(18,19))==le)ye.elements[le-1]=parseFloat(V.substring(23,33)),ye.elements[le-1+4]=parseFloat(V.substring(33,43)),ye.elements[le-1+8]=parseFloat(V.substring(43,53)),ye.elements[le-1+12]=parseFloat(V.substring(53)),G++;else for(;V.substring(13,18)==="BIOMT";)G++,V=oe[G].replace(/^\s*/,"");ye.elements[3]=0,ye.elements[7]=0,ye.elements[11]=0,ye.elements[15]=1,D.symmetries.push(ye),G--}}if((function(G,Y){for(let te=0,re=G.length;te<re;te++){const de=G[te];for(let le=0;le<de.bonds.length;le++){const ye=G[de.bonds[le]],Pe=Y[de.serial];ye&&Pe&&ye.bonds.indexOf(Pe)<0&&(ye.bonds.push(Pe),ye.bondOrder.push(de.bondOrder[le]))}}})(h,U),f&&He(h,n),P||ke(D.symmetries,h,n,D.cryst),M&&!_&&q(h,n.hbondCutoff),!at(a))for(let G=0;G<h.length;G++){const Y=h[G];if(Y!==void 0&&Y.chain in a&&Y.resi in a[Y.chain]){const te=a[Y.chain][Y.resi];Y.ss=te[0],te.length>1&&(te[1]=="1"?Y.ssbegin=!0:te[1]=="2"&&(Y.ssend=!0))}}return[h,D,$]}function Ft(oe,n){n=n||{};var a=[],h={};a.modelData=[];for(var f=oe.split(/\r?\n|\r/);f.length>0;){var T=ot(f,n,h),_=T[0],M=T[1];if(f=T[2],_.length!=0){if(n.multimodel&&n.onemol&&a.length>0)for(var P=a[0].length,A=0;A<_.length;A++){var D=_[A];D.index=A;for(var z=0;z<D.bonds.length;z++)D.bonds[z]+=P;a[0].push(D)}else a.modelData.push(M),a.push(_);if(!n.multimodel)break}}return a}function Ct(oe,n){var a=[[]],h=!n.noSecondaryStructure;a.modelData=[{symmetries:[]}];var f,T=[],_=oe.split(/\r?\n|\r/);for(let de=0;de<_.length;de++){var M=(f=_[de].replace(/^\s*/,"")).substring(0,6);if(M.indexOf("END")==0){if(n.multimodel){n.onemol||a.push([]);continue}break}if(M=="ATOM  "||M=="HETATM"){var P;let le=parseInt(f.substring(6,11)),ye=f.substring(12,16).replace(/ /g,""),Pe=f.substring(17,20).trim(),Re=f.substring(21,22),Me=parseInt(f.substring(22,26));var A=f.substring(30).trim().split(/\s+/),D=parseFloat(A[0]),z=parseFloat(A[1]),$=parseFloat(A[2]),U=parseFloat(A[3]),V=parseFloat(A[4]),H=ye[0];ye.length>1&&ye[1].toUpperCase()!=ye[1]&&(H=ye.substring(0,2)),P=f[0]=="H",T[le]=a[a.length-1].length,a[a.length-1].push({resn:Pe,x:D,y:z,z:$,elem:H,hetflag:P,chain:Re,resi:Me,serial:le,atom:ye,bonds:[],ss:"c",bondOrder:[],properties:{charge:U,partialCharge:U,radius:V},pdbline:f})}else if(M=="CONECT"){var G=parseInt(f.substring(6,11)),Y=a[a.length-1][T[G]];for(let le=0;le<4;le++){var te=parseInt(f.substring([11,16,21,26][le],[11,16,21,26][le]+5)),re=a[a.length-1][T[te]];Y!==void 0&&re!==void 0&&(Y.bonds.push(T[te]),Y.bondOrder.push(1))}}}for(let de=0;de<a.length;de++)He(a[de],n),h&&q(a[de],n.hbondCutoff);return a}var ar=s(471),or=function(oe){return String.fromCharCode.apply(null,oe).replace(/\0/g,"")},Mr=function(oe){return oe==0||oe==2||oe==4?"h":oe==3?"s":"c"};let Er=new Set(["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","NON-POLYMER","OTHER","PEPTIDE-LIKE","SACCHARIDE"]);function pr(oe,n){var a=!n.keepH,h=n.altLoc?n.altLoc:"A",f=!!n.noSecondaryStructure,T=!n.noComputeSecondaryStructure,_=!n.doAssembly,M=n.assemblyIndex?n.assemblyIndex:0;oe=typeof oe=="string"?(0,v.base64ToArray)(oe):new Uint8Array(oe);var P,A,D,z,$,U,V=ar.decode(oe),H=[[]],G=H.modelData=[],Y=0,te=0,re=0,de=V.secStructList,le=V.bFactorList,ye=V.altLocList,Pe=V.occupancyList,Re=V.bondAtomList,Me=V.bondOrderList,we=V.numModels;if(we==0)return H;n.multimodel||(we=1);var Ue=[];if(!_&&V.bioAssemblyList&&V.bioAssemblyList.length>0){var Je=V.bioAssemblyList[M].transformList;for(P=0,U=Je.length;P<U;P++){var tt=new u.Matrix4(Je[P].matrix);tt.transpose(),Ue.push(tt)}}var Ye=null;if(V.unitCell){var ut=V.unitCell;Ye={a:ut[0],b:ut[1],c:ut[2],alpha:ut[3],beta:ut[4],gamma:ut[5]}}let ft=[];V.entityList.forEach(Q=>{Q.chainIndexList.forEach(b=>{ft[b]=Q.type=="polymer"})});var Ze=0;for($=0;$<we;$++){var pt=V.chainsPerModel[$],Be=H[H.length-1],et=[];for(G.push({symmetries:Ue,cryst:Ye}),P=0;P<pt;++P){var St=V.groupsPerChain[Y],st=or(V.chainIdList.subarray(4*Y,4*Y+4));V.chainNameList&&(st=or(V.chainNameList.subarray(4*Y,4*Y+4)));var wt=te,Et="";for(A=0;A<St;++A){var it=V.groupList[V.groupTypeList[te]],Pt=it.atomNameList.length,Ht=0,Mt=!1,ct=!1;if(de){Ht=de[te];var Jt=Mr(Ht);te!=0&&Jt==Et||(Mt=!0),Et=Jt;var Nt=te+1;(Nt>=de.length||Mr(de[Nt]!=Jt))&&(ct=!0)}var qt=V.groupIdList[te],Vt=it.groupName;let Q=it.chemCompType;var Xt=re;let b=Er.has(Q)||!ft[Y];for(D=0;D<Pt;++D){var yr=it.elementList[D];if(a&&yr=="H")re+=1;else{var Fr="";le&&(Fr=le[re]);var Tr="";ye&&ye[re]&&(Tr=String.fromCharCode(ye[re]));var ii="";if(Pe&&(ii=Pe[re]),Tr==""||Tr==h||h=="*"){var Wr=V.atomIdList[re],br=it.atomNameList[D],$r=0;it.atomChargeList&&($r=it.atomChargeList[D]);var ci=V.xCoordList[re],ni=V.yCoordList[re],hi=V.zCoordList[re];et[re]=Be.length,Be.push({resn:Vt,x:ci,y:ni,z:hi,elem:yr,hetflag:b,chain:st,resi:qt,icode:Tr,rescode:qt+(Tr!=" "?"^"+Tr:""),serial:Wr,altLoc:Tr,index:re,atom:br,bonds:[],ss:Mr(Ht),ssbegin:Mt,ssend:ct,bondOrder:[],properties:{charge:$r,occupancy:ii},b:Fr}),re+=1}else re+=1}}var Ii=it.bondAtomList;for(D=0,z=it.bondOrderList.length;D<z;++D){var xi=Xt+Ii[2*D],Oi=Xt+Ii[2*D+1],Hr=it.bondOrderList[D],Xr=et[xi],qr=et[Oi],ei=Be[Xr],g=Be[qr];ei&&g&&(ei.bonds.push(qr),ei.bondOrder.push(Hr),g.bonds.push(Xr),g.bondOrder.push(Hr))}te+=1}for(te=wt,A=0;A<St;++A)te+=1;Y+=1}if(Re)for(let Q=Ze,b=Re.length;Q<b;Q+=2){let be=Re[Q],_e=Re[Q+1],ve=Me?Me[Q/2]:1;if(be>=re){Ze=Q;break}let $e=et[be],Ie=et[_e],gt=Be[$e],Ne=Be[Ie];gt&&Ne&&(gt.bonds.push(Ie),gt.bondOrder.push(ve),Ne.bonds.push($e),Ne.bondOrder.push(ve))}n.multimodel&&(n.onemol||H.push([]))}if(!_)for(let Q=0;Q<H.length;Q++)ke(G[Q].symmetries,H[Q],n,G[Q].cryst);return T&&!f&&q(H,n.hbondCutoff),H}function vr(oe){var n,a=[],h=0,f=oe.split(/\r?\n|\r/);if(!(f.length>0&&f[0].includes("VERSION")))return[];{var T=f.filter(function(V){return V.includes("POINTERS")||V.includes("ATOM_NAME")||V.includes("CHARGE")||V.includes("RADII")||V.includes("BONDS_INC_HYDROGEN")||V.includes("BONDS_WITHOUT_HYDROGEN")||V.includes("RESIDUE_LABEL")||V.includes("RESIDUE_POINTER")}),_=z("POINTERS");if(_==-1)return[];var M=$(_),P=parseInt(f[_+1].slice(0,M[1]));let U=parseInt(f[_+2].slice(M[1],M[0]+M[1]));if(isNaN(P)||P<=0)return[];if((_=z("ATOM_NAME"))==-1)return[];var A=(M=$(_))[0];for(let V=0;V<P/M[0];V++){V==parseInt(P/M[0])&&(A=P%M[0]);for(let H=0;H<A;H++){let G={},Y={charge:"",radii:""};G.serial=h,G.x=0,G.y=0,G.z=0,G.atom=f[_+1].slice(M[1]*H,M[1]*(H+1)).trim(),G.elem=f[_+1].slice(M[1]*H,M[1]*H+1).trim(),G.properties=Y,G.bonds=[],G.bondOrder=[],G.index=a.length,a.push(G),h++}_++}if((_=z("CHARGE"))!=-1){h=0,A=(M=$(_))[0];for(let V=0;V<P/M[0];V++){V==parseInt(P/M[0])&&(A=P%M[0]);for(let H=0;H<A;H++)a[h].properties.charge=parseFloat(f[_+1].slice(M[1]*H,M[1]*(H+1))),h++;_++}}var D=[];if((_=z("RESIDUE_POINTER"))!=-1){A=(M=$(_))[0],_+=1;for(let V=0;V<U/M[0];V++){V==parseInt(U/M[0])&&(A=U%M[0]);for(let H=0;H<A;H++)D.push(parseInt(f[_].slice(M[1]*H,M[1]*(H+1))));_++}if((_=z("RESIDUE_LABEL"))!=-1){let V=[];A=(M=$(_))[0],_+=1;for(let te=0;te<U/M[0];te++){te==parseInt(U/M[0])&&(A=U%M[0]);for(let re=0;re<A;re++)V.push(f[_].slice(M[1]*re,M[1]*(re+1)).trim());_++}let H=0,G=0,Y="";D.push(a.length+1);for(let te=0;te<a.length;te++)te+1>=D[H]&&(Y=V[H],H+=1,G+=1),a[te].resi=G,a[te].resn=Y}}if((_=z("RADII"))!=-1){h=0,A=(M=$(_))[0];for(let V=0;V<P/M[0];V++){V==parseInt(P/M[0])&&(A=P%M[0]);for(let H=0;H<A;H++)a[h].properties.radii=parseFloat(f[_+1].slice(M[1]*H,M[1]*(H+1))),h++;_++}}if((_=z("BONDS_WITHOUT_HYDROGEN"))!=-1)for(h=0,A=(M=$(_))[0],_+=1;!f[_].match(/^%FLAG/);){f[_+1].match(/^%FLAG/)&&(A=P%M[0]);for(let V=0;V<A;V++)h%3==0?n=parseInt(f[_].slice(M[1]*V,M[1]*(V+1))/3):h%3==1&&(a[n].bonds.push(parseInt(f[_].slice(M[1]*V,M[1]*(V+1))/3)),a[n].bondOrder.push(1)),h++;_++}if((_=z("BONDS_INC_HYDROGEN"))!=-1)for(h=0,A=(M=$(_))[0],_+=1;!f[_].match(/^%FLAG/);){f[_+1].match(/^%FLAG/)&&(A=P%M[0]);for(let V=0;V<A;V++)h%3==0?n=parseInt(f[_].slice(M[1]*V,M[1]*(V+1))/3):h%3==1&&(a[n].bonds.push(parseInt(f[_].slice(M[1]*V,M[1]*(V+1))/3)),a[n].bonds.push(1)),h++;_++}}function z(U){var V=f.indexOf(T.filter(function(H){return H.includes(U)})[0]);if(Number.isInteger(V)&&V>0){for(;!f[V].includes("FORMAT");)V++;return V}return-1}function $(U){var V=f[U].match(/\((\d*)\S*/),H=f[U].match(/[a-zA-Z](\d*)\)\s*/);return H==null&&(H=f[U].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[parseInt(V[1]),parseInt(H[1])]}return[a]}function xr(oe,n){const a=[],h=oe.split(/\r?\n|\r/);for(;h.length>0;){const f=parseInt(h[1]);if(h.length<3||isNaN(f)||f<=0||h.length<f+3)break;const T=[];a.push(T);let _=2;const M=T.length,P=M+f;for(let A=M;A<P;A++){const D=h[_++],z={};z.serial=A,z.atom=D.slice(10,15).trim(),z.elem=rt(z.atom,!0),z.x=10*parseFloat(D.slice(20,28)),z.y=10*parseFloat(D.slice(28,36)),z.z=10*parseFloat(D.slice(36,44)),z.resi=parseInt(D.slice(0,5)),z.resn=D.slice(5,10).trim(),z.bonds=[],z.bondOrder=[],z.properties={},D.length>44&&(z.dx=10*parseFloat(D.slice(44,52)),z.dy=10*parseFloat(D.slice(52,60)),z.dz=10*parseFloat(D.slice(60,68))),T[A]=z}if(h.length<=_+3){const A=h[_++].trim().split(/\s+/);if(A.length===3){for(let D=0;D<3;D++)A[D]=(10*parseFloat(A[D])).toString();a.box=A}}h.splice(0,++_)}for(let f=0;f<a.length;f++)He(a[f],n);return a}const fi={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};function Pr(oe,n){const a=[],h=oe.split(/\r?\n|\r/);let f=0,T=0,_=0;for(;_<h.length-9;){for(var M=_;M<h.length;M++)if(h[M].match(/ITEM: NUMBER OF ATOMS/)&&(T=parseInt(h[M+1])),h[M].match(/ITEM: ATOMS/)){f=M+1;break}const P=h[f-1].replace("ITEM: ATOMS ","").split(" ");a.push([]);for(let A=f;A<f+T;A++){const D={},z={},$=h[A].split(" ");for(let U=0;U<$.length;U++){const V=fi[P[U]];V!==void 0&&(V==="serial"?D[V]=parseInt($[U]):V==="x"||V==="y"||V==="z"?D[V]=parseFloat($[U]):V==="charge"||V==="radius"?z[V]=parseFloat($[U]):D[V]=$[U]),D.properties=z,D.bonds=[],D.bondOrder=[]}a[a.length-1][A-f]=D}_=f+T-1}if(n.assignBonds)for(let P=0;P<a.length;P++)(0,ue.assignBonds)(a[P],n);return a}var Or;(function(oe){(function(n){n[n.Int8=1]="Int8",n[n.Int16=2]="Int16",n[n.Int32=3]="Int32",n[n.Uint8=4]="Uint8",n[n.Uint16=5]="Uint16",n[n.Uint32=6]="Uint32"})(oe.IntDataType||(oe.IntDataType={})),(function(n){n[n.Float32=32]="Float32",n[n.Float64=33]="Float64"})(oe.FloatDataType||(oe.FloatDataType={})),oe.getDataType=function(n){let a;return a=n instanceof Int8Array?oe.IntDataType.Int8:n instanceof Int16Array?oe.IntDataType.Int16:n instanceof Int32Array?oe.IntDataType.Int32:n instanceof Uint8Array?oe.IntDataType.Uint8:n instanceof Uint16Array?oe.IntDataType.Uint16:n instanceof Uint32Array?oe.IntDataType.Uint32:n instanceof Float32Array?oe.FloatDataType.Float32:n instanceof Float64Array?oe.FloatDataType.Float64:oe.IntDataType.Int32,a},oe.isSignedIntegerDataType=function(n){if(n instanceof Int8Array||n instanceof Int16Array||n instanceof Int32Array)return!0;for(let a=0,h=n.length;a<h;a++)if(a<0)return!1;return!0}})(Or||(Or={}));const Di=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function wi(oe){let n=oe.data;for(let a=oe.encoding.length-1;a>=0;a--)n=Hi(n,oe.encoding[a]);return n}function Hi(oe,n){switch(n.kind){case"ByteArray":switch(n.type){case Or.IntDataType.Uint8:return oe;case Or.IntDataType.Int8:return(function(a){return new Int8Array(a.buffer,a.byteOffset)})(oe);case Or.IntDataType.Int16:return(function(a){return Oe(a,2,Int16Array)})(oe);case Or.IntDataType.Uint16:return(function(a){return Oe(a,2,Uint16Array)})(oe);case Or.IntDataType.Int32:return(function(a){return Oe(a,4,Int32Array)})(oe);case Or.IntDataType.Uint32:return(function(a){return Oe(a,4,Uint32Array)})(oe);case Or.FloatDataType.Float32:return(function(a){return Oe(a,4,Float32Array)})(oe);case Or.FloatDataType.Float64:return(function(a){return Oe(a,8,Float64Array)})(oe);default:throw new Error("unreachable")}case"FixedPoint":return(function(a,h){const f=a.length,T=Ee(h.srcType,f),_=1/h.factor;for(let M=0;M<f;M++)T[M]=_*a[M];return T})(oe,n);case"IntervalQuantization":return(function(a,h){const f=a.length,T=Ee(h.srcType,f),_=(h.max-h.min)/(h.numSteps-1),M=h.min;for(let P=0;P<f;P++)T[P]=M+_*a[P];return T})(oe,n);case"RunLength":return(function(a,h){const f=pe(h.srcType,h.srcSize);let T=0;for(let _=0,M=a.length;_<M;_+=2){const P=a[_],A=a[_+1];for(let D=0;D<A;++D)f[T++]=P}return f})(oe,n);case"Delta":return(function(a,h){const f=a.length,T=pe(h.srcType,f);if(!f)return a;T[0]=a[0]+(0|h.origin);for(let _=1;_<f;++_)T[_]=a[_]+T[_-1];return T})(oe,n);case"IntegerPacking":return(function(a,h){return a.length===h.srcSize?a:h.isUnsigned?(function(f,T){const _=T.byteCount===1?255:65535,M=f.length,P=new Int32Array(T.srcSize);let A=0,D=0;for(;A<M;){let z=0,$=f[A];for(;$===_;)z+=$,A++,$=f[A];z+=$,P[D]=z,A++,D++}return P})(a,h):(function(f,T){const _=T.byteCount===1?127:32767,M=-_-1,P=f.length,A=new Int32Array(T.srcSize);let D=0,z=0;for(;D<P;){let $=0,U=f[D];for(;U===_||U===M;)$+=U,D++,U=f[D];$+=U,A[z]=$,D++,z++}return A})(a,h)})(oe,n);case"StringArray":return(function(a,h){const f=wi({encoding:h.offsetEncoding,data:h.offsets}),T=wi({encoding:h.dataEncoding,data:a}),_=h.stringData,M=new Array(f.length);M[0]="";for(let D=1,z=f.length;D<z;D++)M[D]=_.substring(f[D-1],f[D]);let P=0;const A=new Array(T.length);for(let D=0,z=T.length;D<z;D++)A[P++]=M[T[D]+1];return A})(oe,n)}}function pe(oe,n){switch(oe){case Or.IntDataType.Int8:return new Int8Array(n);case Or.IntDataType.Int16:return new Int16Array(n);case Or.IntDataType.Int32:return new Int32Array(n);case Or.IntDataType.Uint8:return new Uint8Array(n);case Or.IntDataType.Uint16:return new Uint16Array(n);case Or.IntDataType.Uint32:return new Uint32Array(n);default:return new Int32Array(n)}}function Ee(oe,n){switch(oe){case Or.FloatDataType.Float32:return new Float32Array(n);case Or.FloatDataType.Float64:default:return new Float64Array(n)}}function Oe(oe,n,a){return oe.byteOffset==0&&oe.byteLength==oe.buffer.byteLength||(oe=new Uint8Array(oe)),new a(Di?oe.buffer:(function(h,f){const T=new ArrayBuffer(h.length),_=new Uint8Array(T);for(let M=0,P=h.length;M<P;M+=f)for(let A=0;A<f;A++)_[M+f-A-1]=h[M+A];return T})(oe,n))}function dt(oe){const n=Object.create(null),a=Object.create(null);for(const h of oe.columns)n[h.name]=h;return{rowCount:oe.rowCount,name:oe.name.substring(1),fieldNames:oe.columns.map(h=>h.name),getField(h){const f=n[h];if(f)return a[h]||(a[h]=wi(f.data)),a[h]}}}var nt=s(471);class It{constructor(n){if(this.C={},n){let a=n.getField("comp_id"),h=n.getField("atom_id_1"),f=n.getField("atom_id_2"),T=n.getField("value_order");for(let _=0;_<a.length;_++){let M=a[_],P=h[_],A=f[_],D=T[_],z=1;D=="doub"?z=2:D=="trip"&&(z=3),this.C[M]==null&&(this.C[M]={}),this.C[M][P]==null&&(this.C[M][P]={}),this.C[M][A]==null&&(this.C[M][A]={}),this.C[M][P][A]=z,this.C[M][A][P]=z}}}order(n,a,h){return this.C[n]!==void 0&&this.C[n][a]!==void 0&&this.C[n][a][h]!==void 0?this.C[n][a][h]:0}}class ht{constructor(n){if(this.C=[],n){let a=n.getField("conn_type_id"),h=n.getField("ptnr1_label_asym_id"),f=n.getField("ptnr1_label_seq_id"),T=n.getField("ptnr1_label_comp_id"),_=n.getField("ptnr1_label_atom_id"),M=n.getField("ptnr2_label_asym_id"),P=n.getField("ptnr2_label_seq_id"),A=n.getField("ptnr2_label_comp_id"),D=n.getField("ptnr2_label_atom_id"),z=n.getField("pdbx_value_order");for(let $=0;$<a.length;$++)if(a[$]=="disulf"||a[$]=="covale"){let U=z?z[$]==""?1:parseInt(z[$]):1;this.C.push([[h[$],f[$],T[$],_[$]],[M[$],P[$],A[$],D[$]],U])}}}}class zt{constructor(){this.R={}}add(n){this.R[n.lchain]==null&&(this.R[n.lchain]={}),this.R[n.lchain][n.lresi]==null&&(this.R[n.lchain][n.lresi]={}),this.R[n.lchain][n.lresi][n.lresn]==null&&(this.R[n.lchain][n.lresi][n.lresn]=[]),this.R[n.lchain][n.lresi][n.lresn].push(n),this.R[n.lchain][n.lresi][n.lresn][n.atom]=n}geta([n,a,h,f]){if(this.R[n]!==void 0&&this.R[n][a]!==void 0&&this.R[n][a][h]!==void 0)return this.R[n][a][h][f]}setBonds(n,a){for(let h in this.R)for(let f in this.R[h])for(let T in this.R[h][f]){let _=this.R[h][f][T];for(let M=0;M<_.length;M++)for(let P=M+1;P<_.length;P++){let A=_[M],D=_[P],z=n.order(T,A.atom,D.atom);A.altLoc!=D.altLoc&&A.altLoc!=""&&D.altLoc!=""&&(z=0),z>0&&(A.bonds.push(D.index),D.bonds.push(A.index),A.bondOrder.push(z),D.bondOrder.push(z))}}for(let h of a.C){let f=h[0],T=h[1],_=h[2],M=this.geta(f),P=this.geta(T);M!=null&&P!=null&&(M.bonds.push(P.index),P.bonds.push(M.index),M.bondOrder.push(_),P.bondOrder.push(_))}}}function Ut(oe,n){var a=!n.keepH,h=n.altLoc?n.altLoc:"A",f=!n.noComputeSecondaryStructure;const T=!n.doAssembly,_=n.assignBonds===void 0||n.assignBonds;if(typeof oe=="string")try{oe=(0,v.base64ToArray)(oe)}catch{oe=new TextEncoder().encode(oe)}else oe=new Uint8Array(oe);var M=nt.decodeMsgpack(oe);M==31&&(oe=(0,v.inflateString)(oe,!1),M=nt.decodeMsgpack(oe));var P=[],A=P.modelData=[],D=M.dataBlocks.length;if(D==0)return P;n.multimodel||(D=1);for(let z=0;z<D;z++){let $=P.length;const U=[];A.push({symmetries:[]}),P.push([]);const V=M.dataBlocks[z],H=Object.create(null);for(const Mt of V.categories)H[Mt.name.substr(1)]=dt(Mt);let G={},Y=H.struct_conf;if(Y){let Mt=Y.getField("conf_type_id"),ct=Y.getField("beg_label_asym_id"),Jt=Y.getField("beg_label_seq_id"),Nt=Y.getField("end_label_seq_id");for(let qt=0;qt<Mt.length;qt++)if(Mt[qt].startsWith("H")){let Vt=ct[qt],Xt=Jt[qt],yr=Nt[qt];Vt in G||(G[Vt]={}),G[Vt][Xt]="h1";for(let Fr=Xt+1;Fr<yr;Fr++)G[Vt][Fr]="h";G[Vt][yr]="h2"}}let te=H.struct_sheet_range;if(te){let Mt=te.getField("id"),ct=te.getField("beg_label_asym_id"),Jt=te.getField("beg_label_seq_id"),Nt=te.getField("end_label_seq_id");for(let qt=0;qt<Mt.length;qt++){let Vt=ct[qt],Xt=Jt[qt],yr=Nt[qt];Vt in G||(G[Vt]={}),G[Vt][Xt]="s1";for(let Fr=Xt+1;Fr<yr;Fr++)G[Vt][Fr]="s";G[Vt][yr]="s2"}}let re=H.pdbx_struct_oper_list,de=re.getField("id");if(de&&!T){let Mt=re.getField("matrix[1][1]"),ct=re.getField("matrix[1][2]"),Jt=re.getField("matrix[1][3]"),Nt=re.getField("matrix[2][1]"),qt=re.getField("matrix[2][2]"),Vt=re.getField("matrix[2][3]"),Xt=re.getField("matrix[3][1]"),yr=re.getField("matrix[3][2]"),Fr=re.getField("matrix[3][3]"),Tr=re.getField("vector[1]"),ii=re.getField("vector[2]"),Wr=re.getField("vector[3]");for(let br=0;br<de.length;br++){const $r=new u.Matrix4(Mt[br],ct[br],Jt[br],Tr[br],Nt[br],qt[br],Vt[br],ii[br],Xt[br],yr[br],Fr[br],Wr[br]);A[A.length-1].symmetries.push($r)}}let le=new It(H.chem_comp_bond),ye=new zt,Pe=new ht(H.struct_conn),Re=H.atom_site,Me=Re.rowCount,we=Re.getField("group_PDB"),Ue=Re.getField("Cartn_x"),Je=Re.getField("Cartn_y"),tt=Re.getField("Cartn_z"),Ye=Re.getField("auth_asym_id"),ut=Re.getField("label_asym_id"),ft=Re.getField("auth_seq_id"),Ze=Re.getField("label_seq_id"),pt=Re.getField("auth_comp_id"),Be=Re.getField("label_comp_id"),et=Re.getField("auth_atom_id"),St=Re.getField("label_atom_id"),st=Re.getField("type_symbol"),wt=Re.getField("B_iso_or_equiv"),Et=Re.getField("id"),it=Re.getField("label_alt_id"),Pt=Re.getField("pdbx_PDB_model_num"),Ht=Pt?Pt[0]:0;for(let Mt=0;Mt<Me;Mt++){if(we!==void 0&&we[Mt]==="TER")continue;if(Pt&&Pt[Mt]!=Ht){if(Ht=Pt[Mt],!n.multimodel)break;n.onemol||(P.push([]),A.push(A[A.length-1]),Ht=Pt[Mt],ye.setBonds(le,Pe),ye=new zt)}const ct={};ct.x=Ue[Mt],ct.y=Je[Mt],ct.z=tt[Mt],ct.chain=Ye?Ye[Mt]:ut?ut[Mt]:void 0,ct.lchain=ut?ut[Mt]:void 0,ct.resi=ft?ft[Mt]:Ze?Ze[Mt]:void 0,ct.lresi=Ze?Ze[Mt]:void 0,ct.resn=pt?pt[Mt].trim():Be?Be[Mt].trim():void 0,ct.lresn=Be?Be[Mt].trim():void 0,ct.atom=et?et[Mt].replace(/"/gm,""):St?St[Mt].replace(/"/gm,""):void 0,ct.icode=it?it[Mt]:void 0,ct.altLoc=ct.icode,ct.hetflag=!we||we[Mt]==="HETA"||we[Mt]==="HETATM";let Jt="X";st&&(Jt=st[Mt].replace(/\(?\+?\d+.*/,"")),ct.elem=Jt[0].toUpperCase()+Jt.substring(1,2).toLowerCase(),wt&&(ct.b=wt[Mt]),a&&ct.elem=="H"||ct.altLoc!=""&&ct.altLoc!=h&&h!="*"||(ct.bonds=[],ct.ss="c",ct.serial=Et[Mt],ct.model=Ht,ct.bondOrder=[],ct.properties={},ct.index=P[P.length-1].length,U[ct.serial]=[P.length,ct.index],P[P.length-1].push(ct),ye.add(ct))}if(ye.setBonds(le,Pe),!at(G))for(let Mt=$;Mt<P.length;Mt++){let ct=P[Mt];for(let Jt=0;Jt<ct.length;Jt++){const Nt=ct[Jt];if(Nt!==void 0&&Nt.lchain in G&&Nt.lresi in G[Nt.lchain]){const qt=G[Nt.lchain][Nt.lresi];Nt.ss=qt[0],qt.length>1&&(qt[1]=="1"?Nt.ssbegin=!0:qt[1]=="2"&&(Nt.ssend=!0))}}}n.multimodel&&z<D-1&&(n.onemol||(P.push([]),A.push({symmetries:[]})))}for(let z=0;z<P.length;z++)!_||n.duplicateAssemblyAtoms&&!n.dontConnectDuplicatedAtoms||He(P[z],n),f&&q(P[z],n.hbondCutoff),ke(A[z].symmetries,P[z],n,A[z].cryst),n.duplicateAssemblyAtoms&&!n.dontConnectDuplicatedAtoms&&_&&He(P[z],n);return P}const Ot={vasp:me.VASP,VASP:me.VASP,cube:Ce.CUBE,CUBE:Ce.CUBE,xyz:L,XYZ:L,sdf:he,SDF:he,json:se,cdjson:se,CDJSON:se,mcif:Ae,cif:Ae,CIF:Ae,mol2:qe,MOL2:qe,pdb:Ft,PDB:Ft,pdbqt:Ft,PDBQT:Ft,pqr:Ct,PQR:Ct,mmtf:pr,MMTF:pr,prmtop:vr,PRMTOP:vr,gro:xr,GRO:xr,lammpstrj:Pr,LAMMPSTRJ:Pr,bcif:Ut,BCIF:Ut};function mr(oe,n="utf8"){return new TextDecoder(n).decode(oe)}const li=new TextEncoder,Ci=(()=>{const oe=new Uint8Array(4);return!((new Uint32Array(oe.buffer)[0]=1)&oe[0])})(),ui={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class gi{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(n=8192,a={}){let h=!1;typeof n=="number"?n=new ArrayBuffer(n):(h=!0,this.lastWrittenByte=n.byteLength);const f=a.offset?a.offset>>>0:0,T=n.byteLength-f;let _=f;(ArrayBuffer.isView(n)||n instanceof gi)&&(n.byteLength!==n.buffer.byteLength&&(_=n.byteOffset+f),n=n.buffer),this.lastWrittenByte=h?T:0,this.buffer=n,this.length=T,this.byteLength=T,this.byteOffset=_,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,_,T),this._mark=0,this._marks=[]}available(n=1){return this.offset+n<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(n=1){return this.offset+=n,this}back(n=1){return this.offset-=n,this}seek(n){return this.offset=n,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const n=this._marks.pop();if(n===void 0)throw new Error("Mark stack empty");return this.seek(n),this}rewind(){return this.offset=0,this}ensureAvailable(n=1){if(!this.available(n)){const a=2*(this.offset+n),h=new Uint8Array(a);h.set(new Uint8Array(this.buffer)),this.buffer=h.buffer,this.length=a,this.byteLength=a,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(n=1){return this.readArray(n,"uint8")}readArray(n,a){const h=ui[a].BYTES_PER_ELEMENT*n,f=this.byteOffset+this.offset,T=this.buffer.slice(f,f+h);if(this.littleEndian===Ci&&a!=="uint8"&&a!=="int8"){const M=new Uint8Array(this.buffer.slice(f,f+h));M.reverse();const P=new ui[a](M.buffer);return this.offset+=h,P.reverse(),P}const _=new ui[a](T);return this.offset+=h,_}readInt16(){const n=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,n}readUint16(){const n=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,n}readInt32(){const n=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,n}readUint32(){const n=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat32(){const n=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat64(){const n=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,n}readBigInt64(){const n=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,n}readBigUint64(){const n=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,n}readChar(){return String.fromCharCode(this.readInt8())}readChars(n=1){let a="";for(let h=0;h<n;h++)a+=this.readChar();return a}readUtf8(n=1){return mr(this.readBytes(n))}decodeText(n=1,a="utf8"){return mr(this.readBytes(n),a)}writeBoolean(n){return this.writeUint8(n?255:0),this}writeInt8(n){return this.ensureAvailable(1),this._data.setInt8(this.offset++,n),this._updateLastWrittenByte(),this}writeUint8(n){return this.ensureAvailable(1),this._data.setUint8(this.offset++,n),this._updateLastWrittenByte(),this}writeByte(n){return this.writeUint8(n)}writeBytes(n){this.ensureAvailable(n.length);for(let a=0;a<n.length;a++)this._data.setUint8(this.offset++,n[a]);return this._updateLastWrittenByte(),this}writeInt16(n){return this.ensureAvailable(2),this._data.setInt16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(n){return this.ensureAvailable(2),this._data.setUint16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(n){return this.ensureAvailable(4),this._data.setInt32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(n){return this.ensureAvailable(4),this._data.setUint32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(n){return this.ensureAvailable(4),this._data.setFloat32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(n){return this.ensureAvailable(8),this._data.setFloat64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(n){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(n){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(n){return this.writeUint8(n.charCodeAt(0))}writeChars(n){for(let a=0;a<n.length;a++)this.writeUint8(n.charCodeAt(a));return this}writeUtf8(n){return this.writeBytes((function(a){return li.encode(a)})(n))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}const jr=1,zr=2,Dr=3,rr=4,vi=5,bi=6;function Ki(oe){switch(Number(oe)){case jr:return"byte";case zr:return"char";case Dr:return"short";case rr:return"int";case vi:return"float";case bi:return"double";default:return"undefined"}}function Ai(oe){switch(Number(oe)){case jr:case zr:return 1;case Dr:return 2;case rr:case vi:return 4;case bi:return 8;default:return-1}}function Ni(oe){switch(String(oe)){case"byte":return jr;case"char":return zr;case"short":return Dr;case"int":return rr;case"float":return vi;case"double":return bi;default:return-1}}function Ti(oe,n){if(oe!==1){const a=new Array(oe);for(let h=0;h<oe;h++)a[h]=n();return a}return n()}function pi(oe,n,a){switch(n){case jr:return Array.from(oe.readBytes(a));case zr:return(h=oe.readChars(a)).charCodeAt(h.length-1)===0?h.substring(0,h.length-1):h;case Dr:return Ti(a,oe.readInt16.bind(oe));case rr:return Ti(a,oe.readInt32.bind(oe));case vi:return Ti(a,oe.readFloat32.bind(oe));case bi:return Ti(a,oe.readFloat64.bind(oe));default:throw new Error(`non valid type ${n}`)}var h}function Br(oe,n){if(oe)throw new TypeError(`Not a valid NetCDF v3.x file: ${n}`)}function Yr(oe){oe.offset%4!=0&&oe.skip(4-oe.offset%4)}function Vi(oe){const n=oe.readUint32(),a=oe.readChars(n);return Yr(oe),a}function yi(oe,n){const a={version:n},h={length:oe.readUint32()},f=(function(_){const M={};let P,A;const D=_.readUint32();let z;if(D===0)return Br(_.readUint32()!==0,"wrong empty tag for list of dimensions"),[];{Br(D!==10,"wrong tag for list of dimensions");const $=_.readUint32();z=new Array($);for(let U=0;U<$;U++){const V=Vi(_),H=_.readUint32();H===0&&(P=U,A=V),z[U]={name:V,size:H}}}return P!==void 0&&(M.recordId=P),A!==void 0&&(M.recordName=A),M.dimensions=z,M})(oe);Array.isArray(f)||(h.id=f.recordId,h.name=f.recordName,a.dimensions=f.dimensions),a.globalAttributes=Wi(oe);const T=(function(_,M,P){const A=_.readUint32();let D,z=0;if(A===0)return Br(_.readUint32()!==0,"wrong empty tag for list of variables"),[];{Br(A!==11,"wrong tag for list of variables");const $=_.readUint32();D=new Array($);for(let U=0;U<$;U++){const V=Vi(_),H=_.readUint32(),G=new Array(H);for(let ye=0;ye<H;ye++)G[ye]=_.readUint32();const Y=Wi(_),te=_.readUint32();Br(te<1&&te>6,`non valid type ${te}`);const re=_.readUint32();let de=_.readUint32();P===2&&(Br(de>0,"offsets larger than 4GB not supported"),de=_.readUint32());let le=!1;M!==void 0&&G[0]===M&&(z+=re,le=!0),D[U]={name:V,dimensions:G,attributes:Y,type:Ki(te),size:re,offset:de,record:le}}}return{variables:D,recordStep:z}})(oe,h?.id,n);return Array.isArray(T)||(a.variables=T.variables,h.recordStep=T.recordStep),a.recordDimension=h,a}function Wi(oe){const n=oe.readUint32();let a;if(n===0)return Br(oe.readUint32()!==0,"wrong empty tag for list of attributes"),[];{Br(n!==12,"wrong tag for list of attributes");const h=oe.readUint32();a=new Array(h);for(let f=0;f<h;f++){const T=Vi(oe),_=oe.readUint32();Br(_<1||_>6,`non valid type ${_}`);const M=oe.readUint32(),P=pi(oe,_,M);Yr(oe),a[f]={name:T,type:Ki(_),value:P}}}return a}function tn(){const oe=[];oe.push("DIMENSIONS");for(const a of this.dimensions)oe.push(`  ${a.name.padEnd(30)} = size: ${a.size}`);oe.push(""),oe.push("GLOBAL ATTRIBUTES");for(const a of this.globalAttributes)oe.push(`  ${a.name.padEnd(30)} = ${a.value}`);const n=JSON.parse(JSON.stringify(this.variables));oe.push(""),oe.push("VARIABLES:");for(const a of n){a.value=this.getDataVariable(a);let h=JSON.stringify(a.value);h.length>50&&(h=h.substring(0,50)),isNaN(a.value.length)||(h+=` (length: ${a.value.length})`),oe.push(`  ${a.name.padEnd(30)} = ${h}`)}return oe.join(`
`)}class an{constructor(n){this.toString=tn;const a=new gi(n);a.setBigEndian(),Br(a.readChars(3)!=="CDF","should start with CDF");const h=a.readByte();Br(h>2,"unknown version"),this.header=yi(a,h),this.buffer=a}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(n){const a=this.globalAttributes.find(h=>h.name===n);return a?a.value:null}getDataVariableAsString(n){const a=this.getDataVariable(n);return a?a.join(""):null}get variables(){return this.header.variables}getDataVariable(n){let a;if(a=typeof n=="string"?this.header.variables.find(h=>h.name===n):n,a===void 0)throw new Error("Not a valid NetCDF v3.x file: variable not found");return this.buffer.seek(a.offset),a.record?(function(h,f,T){const _=Ni(f.type),M=f.size?f.size/Ai(_):1,P=T.length,A=new Array(P),D=T.recordStep;if(!D)throw new Error("recordDimension.recordStep is undefined");for(let z=0;z<P;z++){const $=h.offset;A[z]=pi(h,_,M),h.seek($+D)}return A})(this.buffer,a,this.header.recordDimension):(function(h,f){const T=Ni(f.type),_=f.size/Ai(T),M=new Array(_);for(let P=0;P<_;P++)M[P]=pi(h,T,1);return M})(this.buffer,a)}dataVariableExists(n){return this.header.variables.find(a=>a.name===n)!==void 0}attributeExists(n){return this.globalAttributes.find(a=>a.name===n)!==void 0}}class ur{static sameObj(n,a){return n&&a?JSON.stringify(n)==JSON.stringify(a):n==a}constructor(n,a,h){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new d.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=x.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=a||{},this.viewer=h,this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:x.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=n}getRadiusFromStyle(n,a){var h=this.defaultSphereRadius;if(a.radius!==void 0)h=a.radius;else if(ur.vdwRadii[n.elem])h=ur.vdwRadii[n.elem];else if(n.elem.length>1){let f=n.elem;f=f[0].toUpperCase()+f[1].toLowerCase(),ur.vdwRadii[f]&&(h=ur.vdwRadii[f])}return a.scale!==void 0&&(h*=a.scale),h}drawAtomCross(n,a){if(n.style.cross){var h=n.style.cross;if(!h.hidden){var f=h.linewidth||ur.defaultlineWidth;a[f]||(a[f]=new u.Geometry);var T=a[f].updateGeoGroup(6),_=this.getRadiusFromStyle(n,h),M=[[_,0,0],[-_,0,0],[0,_,0],[0,-_,0],[0,0,_],[0,0,-_]],P=n.clickable||n.hoverable;P&&n.intersectionShape===void 0&&(n.intersectionShape={sphere:[],cylinder:[],line:[]});for(var A=(0,v.getColorFromStyle)(n,h),D=T.vertexArray,z=T.colorArray,$=0;$<6;$++){var U=3*T.vertices;if(T.vertices++,D[U]=n.x+M[$][0],D[U+1]=n.y+M[$][1],D[U+2]=n.z+M[$][2],z[U]=A.r,z[U+1]=A.g,z[U+2]=A.b,P){var V=new d.Vector3(M[$][0],M[$][1],M[$][2]);V.multiplyScalar(.1),V.set(V.x+n.x,V.y+n.y,V.z+n.z),n.intersectionShape.line.push(V)}}}}}getGoodCross(n,a,h,f){for(var T=null,_=-1,M=0,P=n.bonds.length;M<P;M++)if(n.bonds[M]!=a.index){let D=n.bonds[M],z=this.atoms[D],$=new d.Vector3(z.x,z.y,z.z).clone();$.sub(h);let U=$.clone();U.cross(f);var A=U.lengthSq();if(A>_&&(T=U,(_=A)>.1))return T}return T}getSideBondV(n,a,h){var f,T,_,M,P=new d.Vector3(n.x,n.y,n.z),A=new d.Vector3(a.x,a.y,a.z).clone(),D=null;if(A.sub(P),n.bonds.length===1)a.bonds.length===1?(D=A.clone(),Math.abs(D.x)>1e-4?D.y+=1:D.x+=1):(f=(h+1)%a.bonds.length,T=a.bonds[f],(_=this.atoms[T]).index==n.index&&(f=(f+1)%a.bonds.length,T=a.bonds[f],_=this.atoms[T]),(M=new d.Vector3(_.x,_.y,_.z).clone()).sub(P),(D=M.clone()).cross(A));else if((D=this.getGoodCross(n,a,P,A)).lengthSq()<.01){var z=this.getGoodCross(a,n,P,A);z!=null&&(D=z)}return D.lengthSq()<.01&&(D=A.clone(),Math.abs(D.x)>1e-4?D.y+=1:D.x+=1),D.cross(A),D.normalize(),D}addLine(n,a,h,f,T,_){n[h]=f.x,n[h+1]=f.y,n[h+2]=f.z,a[h]=_.r,a[h+1]=_.g,a[h+2]=_.b,n[h+3]=T.x,n[h+4]=T.y,n[h+5]=T.z,a[h+3]=_.r,a[h+4]=_.g,a[h+5]=_.b}drawBondLines(n,a,h){if(n.style.line){var f=n.style.line;if(!f.hidden){var T,_,M,P,A=f.linewidth||ur.defaultlineWidth;h[A]||(h[A]=new u.Geometry);for(var D=h[A].updateGeoGroup(6*n.bonds.length),z=D.vertexArray,$=D.colorArray,U=0;U<n.bonds.length;U++){var V=a[n.bonds[U]];if(V.style.line&&!(n.index>=V.index)){var H=new d.Vector3(n.x,n.y,n.z),G=new d.Vector3(V.x,V.y,V.z),Y=H.clone().add(G).multiplyScalar(.5),te=!1,re=n.clickable||n.hoverable,de=V.clickable||V.hoverable;(re||de)&&(re&&(n.intersectionShape===void 0&&(n.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),n.intersectionShape.line.push(H),n.intersectionShape.line.push(Y)),de&&(V.intersectionShape===void 0&&(V.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),V.intersectionShape.line.push(Y),V.intersectionShape.line.push(G)));var le=(0,v.getColorFromStyle)(n,n.style.line),ye=(0,v.getColorFromStyle)(V,V.style.line);if(n.bondStyles&&n.bondStyles[U]){var Pe=n.bondStyles[U];if(!Pe.iswire)continue;Pe.singleBond&&(te=!0),Pe.color1!==void 0&&(le=x.CC.color(Pe.color1)),Pe.color2!==void 0&&(ye=x.CC.color(Pe.color2))}var Re,Me,we=3*D.vertices;if(n.bondOrder[U]>1&&n.bondOrder[U]<4&&!te){var Ue=this.getSideBondV(n,V,U),Je=G.clone();Je.sub(H),n.bondOrder[U]==2?(Ue.multiplyScalar(.1),(T=H.clone()).add(Ue),(_=H.clone()).sub(Ue),(M=T.clone()).add(Je),(P=_.clone()).add(Je),le==ye?(D.vertices+=4,this.addLine(z,$,we,T,M,le),this.addLine(z,$,we+6,_,P,le)):(D.vertices+=8,Je.multiplyScalar(.5),(Re=T.clone()).add(Je),(Me=_.clone()).add(Je),this.addLine(z,$,we,T,Re,le),this.addLine(z,$,we+6,Re,M,ye),this.addLine(z,$,we+12,_,Me,le),this.addLine(z,$,we+18,Me,P,ye))):n.bondOrder[U]==3&&(Ue.multiplyScalar(.1),(T=H.clone()).add(Ue),(_=H.clone()).sub(Ue),(M=T.clone()).add(Je),(P=_.clone()).add(Je),le==ye?(D.vertices+=6,this.addLine(z,$,we,H,G,le),this.addLine(z,$,we+6,T,M,le),this.addLine(z,$,we+12,_,P,le)):(D.vertices+=12,Je.multiplyScalar(.5),(Re=T.clone()).add(Je),(Me=_.clone()).add(Je),this.addLine(z,$,we,H,Y,le),this.addLine(z,$,we+6,Y,G,ye),this.addLine(z,$,we+12,T,Re,le),this.addLine(z,$,we+18,Re,M,ye),this.addLine(z,$,we+24,_,Me,le),this.addLine(z,$,we+30,Me,P,ye)))}else le==ye?(D.vertices+=2,this.addLine(z,$,we,H,G,le)):(D.vertices+=4,this.addLine(z,$,we,H,Y,le),this.addLine(z,$,we+6,Y,G,ye))}}}}}drawAtomSphere(n,a){if(n.style.sphere){var h=n.style.sphere;if(!h.hidden){var f=(0,v.getColorFromStyle)(n,h),T=this.getRadiusFromStyle(n,h);if((n.clickable===!0||n.hoverable)&&n.intersectionShape!==void 0){var _=new d.Vector3(n.x,n.y,n.z);n.intersectionShape.sphere.push(new p.Sphere(_,T))}c.drawSphere(a,n,T,f)}}}drawAtomClickSphere(n){if(n.style.clicksphere){var a=n.style.clicksphere;if(!a.hidden){var h=this.getRadiusFromStyle(n,a);if((n.clickable===!0||n.hoverable)&&n.intersectionShape!==void 0){var f=new d.Vector3(n.x,n.y,n.z);n.intersectionShape.sphere.push(new p.Sphere(f,h))}}}}drawAtomInstanced(n,a){if(n.style.sphere){var h=n.style.sphere;if(!h.hidden){var f=this.getRadiusFromStyle(n,h),T=(0,v.getColorFromStyle)(n,h),_=a.updateGeoGroup(1),M=_.vertices,P=3*M,A=_.vertexArray,D=_.colorArray,z=_.radiusArray;if(A[P]=n.x,A[P+1]=n.y,A[P+2]=n.z,D[P]=T.r,D[P+1]=T.g,D[P+2]=T.b,z[M]=f,(n.clickable===!0||n.hoverable)&&n.intersectionShape!==void 0){var $=new d.Vector3(n.x,n.y,n.z);n.intersectionShape.sphere.push(new p.Sphere($,f))}_.vertices+=1}}}drawSphereImposter(n,a,h,f){var T,_=n.updateGeoGroup(4),M=_.vertices,P=3*M,A=_.vertexArray,D=_.colorArray;for(T=0;T<4;T++)A[P+3*T]=a.x,A[P+3*T+1]=a.y,A[P+3*T+2]=a.z;var z=_.normalArray;for(T=0;T<4;T++)D[P+3*T]=f.r,D[P+3*T+1]=f.g,D[P+3*T+2]=f.b;z[P+0]=-h,z[P+1]=h,z[P+2]=0,z[P+3]=-h,z[P+4]=-h,z[P+5]=0,z[P+6]=h,z[P+7]=-h,z[P+8]=0,z[P+9]=h,z[P+10]=h,z[P+11]=0,_.vertices+=4;var $=_.faceArray,U=_.faceidx;$[U+0]=M,$[U+1]=M+1,$[U+2]=M+2,$[U+3]=M+2,$[U+4]=M+3,$[U+5]=M,_.faceidx+=6}drawAtomImposter(n,a){if(n.style.sphere){var h=n.style.sphere;if(!h.hidden){var f=this.getRadiusFromStyle(n,h),T=(0,v.getColorFromStyle)(n,h);if((n.clickable===!0||n.hoverable)&&n.intersectionShape!==void 0){var _=new d.Vector3(n.x,n.y,n.z);n.intersectionShape.sphere.push(new p.Sphere(_,f))}this.drawSphereImposter(a,n,f,T)}}}calculateDashes(n,a,h,f,T){var _=Math.sqrt(Math.pow(n.x-a.x,2)+Math.pow(n.y-a.y,2)+Math.pow(n.z-a.z,2));h=Math.max(h,0),T=Math.max(T,0)+2*h,(f=Math.max(f,.001))+T>_&&(f=_,T=0);var M,P=Math.floor((_-f)/(f+T))+1;T=(_-P*f)/P;for(var A=new d.Vector3(n.x,n.y,n.z),D=new d.Vector3((a.x-n.x)/(_/T),(a.y-n.y)/(_/T),(a.z-n.z)/(_/T)),z=new d.Vector3((a.x-n.x)/(_/f),(a.y-n.y)/(_/f),(a.z-n.z)/(_/f)),$=[],U=0;U<P;U++)M=new d.Vector3(A.x+z.x,A.y+z.y,A.z+z.z),$.push({from:A,to:M}),A=new d.Vector3(M.x+D.x,M.y+D.y,M.z+D.z);return $}static drawStickImposter(n,a,h,f,T,_=0,M=0){for(var P=n.updateGeoGroup(4),A=P.vertices,D=3*A,z=P.vertexArray,$=P.colorArray,U=P.radiusArray,V=P.normalArray,H=T.r,G=T.g,Y=T.b,te=function(Pe){var Re=-Pe;return Re==0&&(Re=-1e-4),Re},re=D,de=0;de<4;de++)z[re]=a.x,V[re]=h.x,$[re]=H,z[++re]=a.y,V[re]=h.y,$[re]=G,z[++re]=a.z,V[re]=h.z,$[re]=de<2?Y:te(Y),re++;P.vertices+=4,U[A]=-f,U[A+1]=f,U[A+2]=-f,U[A+3]=f;var le=P.faceArray,ye=P.faceidx;le[ye+0]=A,le[ye+1]=A+1,le[ye+2]=A+2,le[ye+3]=A+2,le[ye+4]=A+3,le[ye+5]=A,P.faceidx+=6}drawBondSticks(n,a,h){var f,T;if(n.style.stick){var _=n.style.stick;if(!_.hidden){var M,P,A,D,z,$,U,V,H,G,Y,te,re,de,le=_.radius||this.defaultStickRadius,ye=_.doubleBondScaling||.4,Pe=_.tripleBondScaling||.25,Re=((f=_.dashedBondConfig)===null||f===void 0?void 0:f.dashLength)||.1,Me=((T=_.dashedBondConfig)===null||T===void 0?void 0:T.gapLength)||.25,we=le,Ue=_.singleBonds||!1,Je=_.dashedBonds||!1,tt=0,Ye=0,ut=(0,v.getColorFromStyle)(n,_);!n.capDrawn&&n.bonds.length<4&&(tt=2);var ft=Wr=>{var br=h.imposter?ur.drawStickImposter:c.drawCylinder;return!Je&&Wr>=1?br:($r,ci,ni,hi,Ii,xi=0,Oi=0,Hr=.1,Xr=.25)=>{this.calculateDashes(ci,ni,hi,Hr,Xr).forEach(qr=>{br($r,qr.from,qr.to,hi,Ii,xi,Oi)})}};for(A=0;A<n.bonds.length;A++){var Ze=ft(n.bondOrder[A]),pt=a[n.bonds[A]];if(te=re=de=null,n.index<pt.index){var Be=pt.style;if(!Be.stick||Be.stick.hidden)continue;var et=(0,v.getColorFromStyle)(pt,Be.stick);if(we=le,D=Ue,n.bondStyles&&n.bondStyles[A]){if((z=n.bondStyles[A]).iswire)continue;z.radius&&(we=z.radius),z.singleBond&&(D=!0),z.color1!==void 0&&(ut=x.CC.color(z.color1)),z.color2!==void 0&&(et=x.CC.color(z.color2))}var St=new d.Vector3(n.x,n.y,n.z),st=new d.Vector3(pt.x,pt.y,pt.z);if(n.bondOrder[A]<=1||D||n.bondOrder[A]>3){if(n.bondOrder[A]<1&&(we*=n.bondOrder[A]),!pt.capDrawn&&pt.bonds.length<4&&(Ye=2),ut!=et?(te=new d.Vector3().addVectors(St,st).multiplyScalar(.5),Ze(h,St,te,we,ut,tt,0,Re,Me),Ze(h,te,st,we,et,0,Ye,Re,Me)):Ze(h,St,st,we,ut,tt,Ye,Re,Me),M=n.clickable||n.hoverable,P=pt.clickable||pt.hoverable,M||P){if(te||(te=new d.Vector3().addVectors(St,st).multiplyScalar(.5)),M){var wt=new p.Cylinder(St,te,we),Et=new p.Sphere(St,we);n.intersectionShape.cylinder.push(wt),n.intersectionShape.sphere.push(Et)}if(P){var it=new p.Cylinder(st,te,we),Pt=new p.Sphere(st,we);pt.intersectionShape.cylinder.push(it),pt.intersectionShape.sphere.push(Pt)}}}else if(n.bondOrder[A]>1){var Ht=0,Mt=0;we!=le&&(Ht=2,Mt=2);var ct,Jt,Nt,qt,Vt,Xt=st.clone(),yr=null;Xt.sub(St),yr=this.getSideBondV(n,pt,A),n.bondOrder[A]==2?(ct=we*ye,yr.multiplyScalar(1.5*ct),(Jt=St.clone()).add(yr),(Nt=St.clone()).sub(yr),(qt=Jt.clone()).add(Xt),(Vt=Nt.clone()).add(Xt),ut!=et?(te=new d.Vector3().addVectors(Jt,qt).multiplyScalar(.5),re=new d.Vector3().addVectors(Nt,Vt).multiplyScalar(.5),Ze(h,Jt,te,ct,ut,Ht,0),Ze(h,te,qt,ct,et,0,Mt),Ze(h,Nt,re,ct,ut,Ht,0),Ze(h,re,Vt,ct,et,0,Mt)):(Ze(h,Jt,qt,ct,ut,Ht,Mt),Ze(h,Nt,Vt,ct,ut,Ht,Mt)),M=n.clickable||n.hoverable,P=pt.clickable||pt.hoverable,(M||P)&&(te||(te=new d.Vector3().addVectors(Jt,qt).multiplyScalar(.5)),re||(re=new d.Vector3().addVectors(Nt,Vt).multiplyScalar(.5)),M&&($=new p.Cylinder(Jt,te,ct),U=new p.Cylinder(Nt,re,ct),n.intersectionShape.cylinder.push($),n.intersectionShape.cylinder.push(U)),P&&(H=new p.Cylinder(qt,te,ct),G=new p.Cylinder(Vt,re,ct),pt.intersectionShape.cylinder.push(H),pt.intersectionShape.cylinder.push(G)))):n.bondOrder[A]==3&&(ct=we*Pe,yr.cross(Xt),yr.normalize(),yr.multiplyScalar(3*ct),(Jt=St.clone()).add(yr),(Nt=St.clone()).sub(yr),(qt=Jt.clone()).add(Xt),(Vt=Nt.clone()).add(Xt),ut!=et?(te=new d.Vector3().addVectors(Jt,qt).multiplyScalar(.5),re=new d.Vector3().addVectors(Nt,Vt).multiplyScalar(.5),de=new d.Vector3().addVectors(St,st).multiplyScalar(.5),Ze(h,Jt,te,ct,ut,Ht,0),Ze(h,te,qt,ct,et,0,Mt),Ze(h,St,de,ct,ut,tt,0),Ze(h,de,st,ct,et,0,Ye),Ze(h,Nt,re,ct,ut,Ht,0),Ze(h,re,Vt,ct,et,0,Mt)):(Ze(h,Jt,qt,ct,ut,Ht,Mt),Ze(h,St,st,ct,ut,tt,Ye),Ze(h,Nt,Vt,ct,ut,Ht,Mt)),M=n.clickable||n.hoverable,P=pt.clickable||pt.hoverable,(M||P)&&(te||(te=new d.Vector3().addVectors(Jt,qt).multiplyScalar(.5)),re||(re=new d.Vector3().addVectors(Nt,Vt).multiplyScalar(.5)),de||(de=new d.Vector3().addVectors(St,st).multiplyScalar(.5)),M&&($=new p.Cylinder(Jt.clone(),te.clone(),ct),U=new p.Cylinder(Nt.clone(),re.clone(),ct),V=new p.Cylinder(St.clone(),de.clone(),ct),n.intersectionShape.cylinder.push($),n.intersectionShape.cylinder.push(U),n.intersectionShape.cylinder.push(V)),P&&(H=new p.Cylinder(qt.clone(),te.clone(),ct),G=new p.Cylinder(Vt.clone(),re.clone(),ct),Y=new p.Cylinder(st.clone(),de.clone(),ct),pt.intersectionShape.cylinder.push(H),pt.intersectionShape.cylinder.push(G),pt.intersectionShape.cylinder.push(Y))))}}}var Fr=!1,Tr=0,ii=!1;for(A=0;A<n.bonds.length;A++)D=Ue,n.bondStyles&&n.bondStyles[A]&&((z=n.bondStyles[A]).singleBond&&(D=!0),z.radius&&z.radius!=le&&(ii=!0)),(D||n.bondOrder[A]==1)&&Tr++;ii?Tr>0&&(Fr=!0):Tr==0&&(n.bonds.length>0||_.showNonBonded)&&(Fr=!0),Fr&&(we=le,h.imposter?this.drawSphereImposter(h.sphereGeometry,n,we,ut):c.drawSphere(h,n,we,ut))}}}createMolObj(n,a){a=a||{};var h,f,T,_,M=new u.Object3D,P=[],A={},D={},z=this.drawAtomSphere,$=null,U=null;a.supportsImposters?(z=this.drawAtomImposter,($=new u.Geometry(!0)).imposter=!0,(U=new u.Geometry(!0,!0)).imposter=!0,U.sphereGeometry=new u.Geometry(!0),U.sphereGeometry.imposter=!0,U.drawnCaps={}):a.supportsAIA?(z=this.drawAtomInstanced,($=new u.Geometry(!1,!0,!0)).instanced=!0,U=new u.Geometry(!0)):($=new u.Geometry(!0),U=new u.Geometry(!0));var V,H={},G=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(h=0,T=n.length;h<T;h++){var Y=n[h];if(Y&&Y.style){for(f in(Y.clickable||Y.hoverable)&&Y.intersectionShape===void 0&&(Y.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),_={line:void 0,cross:void 0,stick:void 0,sphere:void 0})Y.style[f]?Y.style[f].opacity?_[f]=parseFloat(Y.style[f].opacity):_[f]=1:_[f]=void 0,H[f]?_[f]!=null&&H[f]!=_[f]&&(console.log("Warning: "+f+" opacity is ambiguous"),H[f]=1):H[f]=_[f];z.call(this,Y,$),this.drawAtomClickSphere(Y),this.drawAtomCross(Y,D),this.drawBondLines(Y,n,A),this.drawBondSticks(Y,n,U),Y.style.cartoon===void 0||Y.style.cartoon.hidden||(Y.style.cartoon.color!=="spectrum"||typeof Y.resi!="number"||Y.hetflag||(Y.resi<G[0]&&(G[0]=Y.resi),Y.resi>G[1]&&(G[1]=Y.resi)),P.push(Y))}}if(P.length>0&&ge(M,P,G,this.defaultCartoonQuality),$&&$.vertices>0){$.initTypedArrays();var te=null,re=null;$.imposter?te=new u.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):$.instanced?(re=new u.Geometry(!0),c.drawSphere(re,{x:0,y:0,z:0},1,new x.Color(.5,.5,.5)),re.initTypedArrays(),te=new u.InstancedMaterial({sphereMaterial:new u.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:re})):te=new u.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),H.sphere<1&&H.sphere>=0&&(te.transparent=!0,te.opacity=H.sphere),re=new u.Mesh($,te),M.add(re)}if(U.vertices>0){var de=null,le=null,ye=U.sphereGeometry;ye&&ye.vertices!==void 0&&ye.vertices!=0||(ye=null),U.initTypedArrays(),ye&&ye.initTypedArrays();var Pe={ambient:0,vertexColors:!0,reflectivity:0};U.imposter?(de=new u.StickImposterMaterial(Pe),le=new u.SphereImposterMaterial(Pe)):(de=new u.MeshLambertMaterial(Pe),le=new u.MeshLambertMaterial(Pe),de.wireframe&&(U.setUpWireframe(),ye&&ye.setUpWireframe())),H.stick<1&&H.stick>=0&&(de.transparent=!0,de.opacity=H.stick,le.transparent=!0,le.opacity=H.stick);var Re=new u.Mesh(U,de);if(M.add(Re),ye){var Me=new u.Mesh(ye,le);M.add(Me)}}for(h in A)if(A.hasOwnProperty(h)){V=h;var we=new u.LineBasicMaterial({linewidth:V,vertexColors:!0});H.line<1&&H.line>=0&&(we.transparent=!0,we.opacity=H.line),A[h].initTypedArrays();var Ue=new u.Line(A[h],we,u.LineStyle.LinePieces);M.add(Ue)}for(h in D)if(D.hasOwnProperty(h)){V=h;var Je=new u.LineBasicMaterial({linewidth:V,vertexColors:!0});H.cross<1&&H.cross>=0&&(Je.transparent=!0,Je.opacity=H.cross),D[h].initTypedArrays();var tt=new u.Line(D[h],Je,u.LineStyle.LinePieces);M.add(tt)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var Ye,ut=new u.Object3D;for(Ye=0;Ye<this.modelData.symmetries.length;Ye++){var ft=new u.Object3D;(ft=M.clone()).matrix.copy(this.modelData.symmetries[Ye]),ft.matrixAutoUpdate=!1,ut.add(ft)}return ut}return M}getViewer(){return this.viewer}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(n){this.atoms=n.atoms,this.frames=n.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){const n=this.modelData.cryst;this.modelData.cryst.matrix=(0,d.conversionMatrix3)(n.a,n.b,n.c,n.alpha,n.beta,n.gamma)}return this.modelData.cryst}return null}setCrystData(n,a,h,f,T,_){n=n||1,a=a||1,h=h||1,f=f||90,T=T||90,_=_||90;const M=(0,d.conversionMatrix3)(n,a,h,f,T,_);this.modelData.cryst={a:n,b:a,c:h,alpha:f,beta:T,gamma:_,matrix:M}}setCrystMatrix(n){n=n||new d.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:n}}getSymmetries(){return this.modelData.symmetries===void 0&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(n){n===void 0?this.modelData.symmetries=[this.idMatrix]:(this.modelData.symmetries=n,this.molObj=null)}getID(){return this.id}getNumFrames(){return this.frames.numFrames!=null?this.frames.numFrames:this.frames.length}adjustCoord(n,a,h,f){var T=a-n;return T<-h?a+f:T>h?a-f:a}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var n=this.box[0],a=this.box[1],h=this.box[2],f=.9*n,T=.9*a,_=.9*h,M=0;M<this.atomdfs.length;M++)for(var P=this.atomdfs[M],A=1;A<P.length;A++){var D=this.atoms[P[A][0]],z=this.atoms[P[A][1]];D.x=this.adjustCoord(z.x,D.x,f,n),D.y=this.adjustCoord(z.y,D.y,T,a),D.z=this.adjustCoord(z.z,D.z,_,h)}}setFrame(n){var a=this.getNumFrames();let h=this,f=this.viewer;return new Promise(function(T,_){if(a==0&&T(),(n<0||n>=a)&&(n=a-1),h.frames.url!=null){var M=h.frames.url;(0,v.getbin)(M+"/traj/frame/"+n+"/"+h.frames.path,void 0,"POST",void 0).then(function(P){for(var A=new Float32Array(P,44),D=0,z=0;z<h.atoms.length;z++)h.atoms[z].x=A[D++],h.atoms[z].y=A[D++],h.atoms[z].z=A[D++];h.box&&h.atomdfs&&h.adjustCoordinatesToBox(),T()}).catch(_)}else h.atoms=h.frames[n],T();h.molObj=null,h.modelDatas&&n<h.modelDatas.length&&(h.modelData=h.modelDatas[n],h.unitCellObjects&&f&&(f.removeUnitCell(h),f.addUnitCell(h)))})}addFrame(n){this.frames.push(n)}vibrate(n=10,a=1,h=!1,f){var T=0,_=n;let M=this.viewer;h&&(T=-n,_=n),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),T<_&&(this.frames=[]),h&&(this.frames.origIndex=n);for(var P=T;P<_;P++){var A=[],D=this.frames.length;if(P!=0||f){for(var z=0;z<this.atoms.length;z++){var $=(0,v.getAtomProperty)(this.atoms[z],"dx"),U=(0,v.getAtomProperty)(this.atoms[z],"dy"),V=(0,v.getAtomProperty)(this.atoms[z],"dz"),H=new d.Vector3($,U,V),G=new d.Vector3(this.atoms[z].x,this.atoms[z].y,this.atoms[z].z),Y=P*a/n;H.multiplyScalar(Y),G.add(H);var te={};for(var re in this.atoms[z])te[re]=this.atoms[z][re];if(te.x=G.x,te.y=G.y,te.z=G.z,A.push(te),M&&f){var de=(0,v.extend)({},f),le=new d.Vector3($,U,V);if(le.multiplyScalar(a),le.add(G),de.start=G,de.end=le,de.frame=D,!de.color){var ye=te.style.sphere;ye||(ye=te.style.stick),ye||(ye=te.style.line),de.color=(0,v.getColorFromStyle)(te,ye)}M.addArrow(de)}}this.frames.push(A)}else this.frames.push(this.atoms)}}setAtomDefaults(n){for(let a=0;a<n.length;a++){let h=n[a];h&&(h.style=h.style||(0,v.deepCopy)(ur.defaultAtomStyle),h.color=h.color||this.ElementColors[h.elem]||this.defaultColor,h.model=this.id,(h.clickable||h.hoverable)&&(h.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(n,a,h={}){var f=ur.parseMolData(n,a,h);this.dontDuplicateAtoms=!h.duplicateAssemblyAtoms;var T=f.modelData;if(T&&(Array.isArray(T)?(this.modelData=T[0],h.frames&&(this.modelDatas=T)):this.modelData=T),f.box?this.box=f.box:this.box=null,this.frames.length==0){for(let M=0;M<f.length;M++)f[M].length!=0&&this.frames.push(f[M]);this.frames[0]&&(this.atoms=this.frames[0])}else if(h.frames)for(let M=0;M<f.length;M++)this.frames.push(f[M]);else for(var _=0;_<f.length;_++)this.addAtoms(f[_]);for(let M=0;M<this.frames.length;M++)this.setAtomDefaults(this.frames[M]);h.vibrate&&h.vibrate.frames&&h.vibrate.amplitude&&this.vibrate(h.vibrate.frames,h.vibrate.amplitude),h.style&&this.setStyle({},h.style)}setDontDuplicateAtoms(n){this.dontDuplicateAtoms=n}setModelData(n){this.modelData=n}propertyMatches(n,a){if(n==a)return!0;if(typeof a=="string"&&typeof n=="number"){var h=a.match(/(-?\d+)\s*-\s*(-?\d+)/);if(h){var f=parseInt(h[1]),T=parseInt(h[2]);if(h&&n>=f&&n<=T)return!0}}return!1}static deepCopyAndCache(n,a){if(typeof n!="object"||n==null||n instanceof ur||n.__cache_created)return n;const h={};for(const f in n){const T=n[f];if(Array.isArray(T)){h[f]=[];for(let _=0;_<T.length;_++)h[f].push(ur.deepCopyAndCache(T[_],a))}else h[f]=typeof T=="object"&&f!="properties"&&f!="model"?ur.deepCopyAndCache(T,a):T;if(f=="and"||f=="or"){const _=[];for(const M of h[f]){const P=new Set;for(const A of a.selectedAtoms(M))P.add(A.index);_.push(P)}if(f=="and"){const M=function(A,D){const z=new Set;for(const $ of D)A.has($)&&z.add($);return z};let P=new Set(_[0]);for(const A of _.splice(1))P=M(P,A);h[f].__cached_results=P}else if(f=="or"){const M=new Set;for(const P of _)for(const A of P)M.add(A);h[f].__cached_results=M}}}return h.__cache_created=!0,h}atomIsSelected(n,a){if(a===void 0)return!0;var h=!!a.invert,f=!0;for(var T in a)if(T=="and"||T=="or"||T=="not"){if(T=="not"){if(this.atomIsSelected(n,a[T])){f=!1;break}}else if(a[T].__cached_results===void 0&&(a=ur.deepCopyAndCache(a,this)),!(f=a[T].__cached_results.has(n.index)))break}else if(T==="predicate"){if(!a.predicate(n)){f=!1;break}}else if(T=="properties"&&n[T]){for(var _ in a.properties)if(!_.startsWith("__cache")){if(n.properties[_]===void 0){f=!1;break}if(n.properties[_]!=a.properties[_]){f=!1;break}}}else if(T=="model"){let A=a.model;if(typeof A=="number"&&A<0&&(A=this.viewer.getNextModelId()+A),Array.isArray(A)){let D=!1;for(let z=0;z<A.length;z++)if(A[z]==this||A[z]==this.id){D=!0;break}if(!D){f=!1;break}}else if(A!=this&&A!=this.id){f=!1;break}}else if(a.hasOwnProperty(T)&&!ur.ignoredKeys.has(T)&&!T.startsWith("__cache")){if(n[T]===void 0){f=!1;break}let A=!1;if(T==="bonds"){if(a[T]!=n.bonds.length){f=!1;break}}else if(Array.isArray(a[T])){var M=a[T],P=n[T];for(let D=0;D<M.length;D++)if(this.propertyMatches(P,M[D])){A=!0;break}if(!A){f=!1;break}}else{let D=a[T];if(!this.propertyMatches(n[T],D)){f=!1;break}}}return h?!f:f}static squaredDistance(n,a){var h=a.x-n.x,f=a.y-n.y,T=a.z-n.z;return h*h+f*f+T*T}expandAtomList(n,a){if(a<=0)return n;for(var h=(0,v.getExtent)(n,void 0),f=[[],[],[]],T=0;T<3;T++)f[0][T]=h[0][T]-a,f[1][T]=h[1][T]+a,f[2][T]=h[2][T];var _=[];for(let D=0;D<this.atoms.length;D++){var M=this.atoms[D].x,P=this.atoms[D].y,A=this.atoms[D].z;M>=f[0][0]&&M<=f[1][0]&&P>=f[0][1]&&P<=f[1][1]&&A>=f[0][2]&&A<=f[1][2]&&(M>=h[0][0]&&M<=h[1][0]&&P>=h[0][1]&&P<=h[1][1]&&A>=h[0][2]&&A<=h[1][2]||_.push(this.atoms[D]))}return _}static getFloat(n){return typeof n=="number"?n:parseFloat(n)}selectedAtoms(n,a){var h=[];n=ur.deepCopyAndCache(n||{},this),a||(a=this.atoms);for(var f=a.length,T=0;T<f;T++){var _=a[T];_&&this.atomIsSelected(_,n)&&h.push(_)}if(n.hasOwnProperty("expand")){const te=ur.getFloat(n.expand);let re=this.expandAtomList(h,te),de=h.length;const le=te*te;for(let ye=0;ye<re.length;ye++)for(let Pe=0;Pe<de;Pe++){var M=ur.squaredDistance(re[ye],h[Pe]);M<le&&M>0&&h.push(re[ye])}}if(n.hasOwnProperty("within")&&n.within.hasOwnProperty("sel")&&n.within.hasOwnProperty("distance")){var P=this.selectedAtoms(n.within.sel,this.atoms),A={};const te=ur.getFloat(n.within.distance),re=te*te;for(let de=0;de<P.length;de++)for(let le=0;le<h.length;le++){let ye=ur.squaredDistance(P[de],h[le]);ye<re&&ye>0&&(A[le]=1)}var D=[];if(n.within.invert)for(let de=0;de<h.length;de++)A[de]||D.push(h[de]);else for(let de in A)D.push(h[de]);h=D}if(n.hasOwnProperty("byres")){var z={},$=[],U=[];for(let te=0;te<h.length;te++){let re=h[te];var V=re.chain,H=re.resi;if(z[V]===void 0&&(z[V]={}),re.hasOwnProperty("resi")&&z[V][H]===void 0){for(z[V][H]=!0,U.push(re);U.length>0;)if(re=U.pop(),V=re.chain,H=re.resi,$[re.index]===void 0){$[re.index]=!0;for(var G=0;G<re.bonds.length;G++){var Y=this.atoms[re.bonds[G]];$[Y.index]===void 0&&Y.hasOwnProperty("resi")&&Y.chain==V&&Y.resi==H&&(U.push(Y),h.push(Y))}}}}}return h}addAtoms(n){this.molObj=null;var a,h=this.atoms.length,f=[];for(a=0;a<n.length;a++)n[a].index===void 0&&(n[a].index=a),n[a].serial===void 0&&(n[a].serial=a),f[n[a].index]=h+a;for(a=0;a<n.length;a++){var T=n[a],_=f[T.index],M=(0,v.extend)({},T);M.index=_,M.bonds=[],M.bondOrder=[],M.model=this.id,M.style=M.style||(0,v.deepCopy)(ur.defaultAtomStyle),M.color===void 0&&(M.color=this.ElementColors[M.elem]||this.defaultColor);for(var P=T.bonds?T.bonds.length:0,A=0;A<P;A++){var D=f[T.bonds[A]];D!==void 0&&(M.bonds.push(D),M.bondOrder.push(T.bondOrder?T.bondOrder[A]:1))}this.atoms.push(M)}}assignBonds(){(0,ue.assignBonds)(this.atoms,{assignBonds:!0})}removeAtoms(n){this.molObj=null;var a,h=[];for(a=0;a<n.length;a++)h[n[a].index]=!0;var f=[];for(a=0;a<this.atoms.length;a++){var T=this.atoms[a];h[T.index]||f.push(T)}this.atoms=[],this.addAtoms(f)}setStyle(n,a,h){a===void 0&&h===void 0&&(a=n,n={}),typeof a=="string"&&(a=(0,v.specStringToObject)(a));var f=!1,T=this,_=function(P){var A=T.selectedAtoms(n,P);for(let D=0;D<P.length;D++)P[D]&&(P[D].capDrawn=!1);for(let D=0;D<A.length;D++){f=!0,(A[D].clickable||A[D].hoverable)&&(A[D].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),h||(A[D].style={});for(let z in a)a.hasOwnProperty(z)&&(A[D].style[z]=A[D].style[z]||{},Object.assign(A[D].style[z],a[z]))}};if(n.frame!==void 0&&n.frame<this.frames.length){let P=n.frame;P<0&&(P=this.frames.length+P),_(this.frames[P])}else{_(this.atoms);for(var M=0;M<this.frames.length;M++)this.frames[M]!==this.atoms&&_(this.frames[M])}f&&(this.molObj=null)}setClickable(n,a,h){if(a=!!a,(h=(0,v.makeFunction)(h))!==null){var f=this.selectedAtoms(n,this.atoms),T=f.length;for(let _=0;_<T;_++)f[_].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},f[_].clickable=a,h&&(f[_].callback=h);T>0&&(this.molObj=null)}else console.log("Callback is not a function")}setHoverable(n,a,h,f){if(a=!!a,h=(0,v.makeFunction)(h),f=(0,v.makeFunction)(f),h!==null)if(f!==null){var T=this.selectedAtoms(n,this.atoms),_=T.length;for(let M=0;M<_;M++)T[M].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},T[M].hoverable=a,h&&(T[M].hover_callback=h),f&&(T[M].unhover_callback=f);_>0&&(this.molObj=null)}else console.log("Unhover_callback is not a function");else console.log("Hover_callback is not a function")}enableContextMenu(n,a){var h;a=!!a;var f=this.selectedAtoms(n,this.atoms),T=f.length;for(h=0;h<T;h++)f[h].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},f[h].contextMenuEnabled=a;T>0&&(this.molObj=null)}setColorByElement(n,a){if(this.molObj===null||!ur.sameObj(a,this.lastColors)){this.lastColors=a;var h=this.selectedAtoms(n,h);h.length>0&&(this.molObj=null);for(var f=0;f<h.length;f++){var T=h[f];a[T.elem]!==void 0&&(T.color=a[T.elem])}}}setColorByProperty(n,a,h,f){var T,_,M=this.selectedAtoms(n,M);for(this.lastColors=null,M.length>0&&(this.molObj=null),typeof h=="string"&&w.Gradient.builtinGradients[h]!==void 0&&(h=new w.Gradient.builtinGradients[h]),f||(f=h.range()),f||(f=(0,v.getPropertyRange)(M,a)),T=0;T<M.length;T++)_=M[T],(0,v.getAtomProperty)(_,a)!=null&&(_.color=h.valueToHex(parseFloat(_.properties[a]),f))}setColorByFunction(n,a){var h=this.selectedAtoms(n,h);if(typeof a=="function"){this.lastColors=null,h.length>0&&(this.molObj=null);for(let f=0;f<h.length;f++){let T=h[f];T.color=a(T)}}}toCDObject(n=!1){var a={a:[],b:[]};n&&(a.s=[]);for(let f=0;f<this.atoms.length;f++){let T={},_=this.atoms[f];if(T.x=_.x,T.y=_.y,T.z=_.z,_.elem!="C"&&(T.l=_.elem),n){for(var h=0;h<a.s.length&&JSON.stringify(_.style)!==JSON.stringify(a.s[h]);)h++;h===a.s.length&&a.s.push(_.style),h!==0&&(T.s=h)}a.a.push(T);for(let M=0;M<_.bonds.length;M++){let P=f,A=_.bonds[M];if(P>=A)continue;let D={b:P,e:A},z=_.bondOrder[M];z!=1&&(D.o=z),a.b.push(D)}}return a}globj(n,a){(this.molObj===null||a.regen)&&(this.molObj=this.createMolObj(this.atoms,a),this.renderedMolObj&&(n.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),n.add(this.renderedMolObj))}exportVRML(){return this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1}).vrml()}removegl(n){this.renderedMolObj&&(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),n.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(n,a,h){let f=this.selectedAtoms(a),T=this.viewer,_=(0,v.deepCopy)(h);for(let P=0;P<f.length;P++){let A=f[P];var M=null;A[n]!==void 0?M=String(A[n]):A.properties[n]!==void 0&&(M=String(A.properties[n])),M!=null&&(_.position=A,T.addLabel(M,_))}}addResLabels(n,a,h=!1){let f=this.viewer;var T=[],_=function(P,A){for(var D=P.selectedAtoms(n,D),z={},$=0;$<D.length;$++){var U=D[$],V=U.chain,H=U.resn+""+U.resi;z[V]||(z[V]={}),z[V][H]||(z[V][H]=[]),z[V][H].push(U)}var G=(0,v.deepCopy)(a);for(let te in z)if(z.hasOwnProperty(te)){var Y=z[te];for(let re in Y)if(Y.hasOwnProperty(re)){let de=Y[re],le=new d.Vector3(0,0,0);for(let Pe=0;Pe<de.length;Pe++){let Re=de[Pe];le.x+=Re.x,le.y+=Re.y,le.z+=Re.z}le.divideScalar(de.length),G.position=le,G.frame=A;let ye=f.addLabel(re,G,void 0,!0);T.push(ye)}}};if(h){var M=this.getNumFrames();let P=this.atoms;for(let A=0;A<M;A++)this.frames[A]&&(this.atoms=this.frames[A],_(this,A));this.atoms=P}else _(this);return T}setupDFS(){this.atomdfs=[];var n=this,a=new Int8Array(this.atoms.length);a.fill(0);for(var h=function(_,M,P){P.push([_,M]);var A=n.atoms[_];a[_]=1;for(var D=0;D<A.bonds.length;D++){var z=A.bonds[D];n.atoms[z]&&!a[z]&&h(z,_,P)}},f=0;f<this.atoms.length;f++)if(this.atoms[f]&&!a[f]){var T=[];h(f,-1,T),this.atomdfs.push(T)}}setCoordinatesFromURL(n,a){this.frames=[];var h=this;return this.box&&this.setupDFS(),n.startsWith("http")||(n="http://"+n),(0,v.get)(n+"/traj/numframes/"+a,function(f){if(!isNaN(parseInt(f)))return h.frames.push(h.atoms),h.frames.numFrames=f,h.frames.url=n,h.frames.path=a,h.setFrame(0)})}setCoordinates(n,a){if(!n)return[];if(/\.gz$/.test(a=a||"")){a=a.replace(/\.gz$/,"");try{n=(0,v.inflateString)(n)}catch(D){console.log(D)}}if({mdcrd:"",inpcrd:"",pdb:"",netcdf:"",array:""}.hasOwnProperty(a)){this.frames=[];for(var h=this.atoms.length,f=ur.parseCrd(n,a),T=0;T<f.length;){for(var _=[],M=0;M<h;M++){var P={};for(var A in this.atoms[M])P[A]=this.atoms[M][A];_[M]=P,_[M].x=f[T++],_[M].y=f[T++],_[M].z=f[T++]}this.frames.push(_)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(n){}static parseCrd(n,a){var h=[],f=0;if(a=="pdb")for(var T=n.indexOf(`
ATOM`);T!=-1;){for(;n.slice(T,T+5)==`
ATOM`||n.slice(T,T+7)==`
HETATM`;)h[f++]=parseFloat(n.slice(T+31,T+39)),h[f++]=parseFloat(n.slice(T+39,T+47)),h[f++]=parseFloat(n.slice(T+47,T+55)),T=n.indexOf(`
`,T+54),n.slice(T,T+4)==`
TER`&&(T=n.indexOf(`
`,T+5));T=n.indexOf(`
ATOM`,T)}else if(a=="netcdf"){var _=new an(n);h=[].concat.apply([],_.getDataVariable("coordinates"))}else{if(a=="array"||Array.isArray(n))return n.flat(2);{let M=n.indexOf(`
`);a=="inpcrd"&&(M=n.indexOf(`
`,M+1)),h=(n=n.slice(M+1)).match(/\S+/g).map(parseFloat)}}return h}static parseMolData(n,a="",h){if(!n)return[];if(/\.gz$/.test(a)){a=a.replace(/\.gz$/,"");try{n=a.match(/bcif/i)?(0,v.inflateString)(n,!1):(0,v.inflateString)(n)}catch(f){console.log(f)}}return Ot[a]===void 0&&(a=a.split(".").pop(),Ot[a]===void 0&&(console.log("Unknown format: "+a),a=n instanceof Uint8Array?"bcif":n.match(/^@<TRIPOS>MOLECULE/gm)?"mol2":n.match(/^data_/gm)&&n.match(/^loop_/gm)?"cif":n.match(/^HETATM/gm)||n.match(/^ATOM/gm)?"pdb":n.match(/ITEM: TIMESTEP/gm)?"lammpstrj":n.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?"sdf":n.match(/^%VERSION\s+VERSION_STAMP/gm)?"prmtop":"xyz",console.log("Best guess: "+a))),(0,Ot[a])(n,h)}}var Gr;ur.defaultAtomStyle={line:{}},ur.defaultlineWidth=1,ur.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86},ur.ignoredKeys=new Set(["props","invert","model","frame","byres","expand","within","and","or","not"]),(function(oe){oe[oe.VDW=1]="VDW",oe[oe.MS=2]="MS",oe[oe.SAS=3]="SAS",oe[oe.SES=4]="SES"})(Gr||(Gr={}));var Kr=!1;function qi(oe){Kr=oe}(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(Kr=!0);class Bt{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(n,a,h,f){let T=!!f.fulltable,_=f.hasOwnProperty("origin")&&f.origin.hasOwnProperty("x")?f.origin:{x:0,y:0,z:0},M=!!f.voxel,P=f.matrix,A=f.nX||0,D=f.nY||0,z=f.nZ||0,$=f.scale||1,U=null;U=f.unitCube?f.unitCube:{x:$,y:$,z:$};let V,H,G=new Int32Array(A*D*z);for(V=0,H=G.length;V<H;++V)G[V]=-1;let Y=function(le,ye,Pe,Re,Me,we){let Ue={x:0,y:0,z:0},Je=Me;if(!(Re&1<<Me)&&Re&1<<we&&(Je=we),1&Je&&Pe++,2&Je&&ye++,4&Je&&le++,P){let Ye=new d.Vector3(le,ye,Pe);Ye=Ye.applyMatrix4(P),Ue={x:Ye.x,y:Ye.y,z:Ye.z}}else Ue.x=_.x+U.x*le,Ue.y=_.y+U.y*ye,Ue.z=_.z+U.z*Pe;let tt=(D*le+ye)*z+Pe;return M?(a.push(Ue),a.length-1):(G[tt]<0&&(G[tt]=a.length,a.push(Ue)),G[tt])},te=new Int32Array(12),re=T?this.edgeTable2:this.edgeTable,de=T?this.triTable2:this.triTable;for(V=0;V<A-1;++V)for(let le=0;le<D-1;++le)for(let ye=0;ye<z-1;++ye){let Pe=0;for(let we=0;we<8;++we)Pe|=!!(n[(D*(V+((4&we)>>2))+le+((2&we)>>1))*z+ye+(1&we)]&this.ISDONE)<<we;if(Pe===0||Pe===255)continue;let Re=re[Pe];if(Re===0)continue;let Me=de[Pe];1&Re&&(te[0]=Y(V,le,ye,Pe,0,1)),2&Re&&(te[1]=Y(V,le,ye,Pe,1,3)),4&Re&&(te[2]=Y(V,le,ye,Pe,3,2)),8&Re&&(te[3]=Y(V,le,ye,Pe,2,0)),16&Re&&(te[4]=Y(V,le,ye,Pe,4,5)),32&Re&&(te[5]=Y(V,le,ye,Pe,5,7)),64&Re&&(te[6]=Y(V,le,ye,Pe,7,6)),128&Re&&(te[7]=Y(V,le,ye,Pe,6,4)),256&Re&&(te[8]=Y(V,le,ye,Pe,0,4)),512&Re&&(te[9]=Y(V,le,ye,Pe,1,5)),1024&Re&&(te[10]=Y(V,le,ye,Pe,3,7)),2048&Re&&(te[11]=Y(V,le,ye,Pe,2,6));for(let we=0;we<Me.length;we+=3){let Ue=te[Me[we]],Je=te[Me[we+1]],tt=te[Me[we+2]];M&&we>=3&&(a.push(a[Ue]),Ue=a.length-1,a.push(a[Je]),Je=a.length-1,a.push(a[tt]),tt=a.length-1),h.push(Ue),h.push(Je),h.push(tt)}}}laplacianSmooth(n,a,h){let f,T,_,M,P,A=new Array(a.length);for(f=0,T=a.length;f<T;f++)A[f]={x:0,y:0,z:0};let D,z=new Array(20);for(f=0;f<20;f++)z[f]=new Array(a.length);for(f=0,T=a.length;f<T;f++)z[0][f]=0;for(f=0,T=h.length/3;f<T;f++){let U=3*f,V=3*f+1,H=3*f+2;for(D=!0,_=0,M=z[0][h[U]];_<M;_++)if(h[V]==z[_+1][h[U]]){D=!1;break}for(D&&(z[0][h[U]]++,z[z[0][h[U]]][h[U]]=h[V]),D=!0,_=0,M=z[0][h[U]];_<M;_++)if(h[H]==z[_+1][h[U]]){D=!1;break}for(D&&(z[0][h[U]]++,z[z[0][h[U]]][h[U]]=h[H]),D=!0,_=0,M=z[0][h[V]];_<M;_++)if(h[U]==z[_+1][h[V]]){D=!1;break}for(D&&(z[0][h[V]]++,z[z[0][h[V]]][h[V]]=h[U]),D=!0,_=0,M=z[0][h[V]];_<M;_++)if(h[H]==z[_+1][h[V]]){D=!1;break}for(D&&(z[0][h[V]]++,z[z[0][h[V]]][h[V]]=h[H]),D=!0,_=0;_<z[0][h[H]];_++)if(h[U]==z[_+1][h[H]]){D=!1;break}for(D&&(z[0][h[H]]++,z[z[0][h[H]]][h[H]]=h[U]),D=!0,_=0,M=z[0][h[H]];_<M;_++)if(h[V]==z[_+1][h[H]]){D=!1;break}D&&(z[0][h[H]]++,z[z[0][h[H]]][h[H]]=h[V])}let $=.5;for(P=0;P<n;P++){for(f=0,T=a.length;f<T;f++)if(z[0][f]<3)A[f].x=a[f].x,A[f].y=a[f].y,A[f].z=a[f].z;else if(z[0][f]==3||z[0][f]==4){for(A[f].x=0,A[f].y=0,A[f].z=0,_=0,M=z[0][f];_<M;_++)A[f].x+=a[z[_+1][f]].x,A[f].y+=a[z[_+1][f]].y,A[f].z+=a[z[_+1][f]].z;A[f].x+=$*a[f].x,A[f].y+=$*a[f].y,A[f].z+=$*a[f].z,A[f].x/=$+z[0][f],A[f].y/=$+z[0][f],A[f].z/=$+z[0][f]}else{for(A[f].x=0,A[f].y=0,A[f].z=0,_=0,M=z[0][f];_<M;_++)A[f].x+=a[z[_+1][f]].x,A[f].y+=a[z[_+1][f]].y,A[f].z+=a[z[_+1][f]].z;A[f].x+=1*a[f].x,A[f].y+=1*a[f].y,A[f].z+=1*a[f].z,A[f].x/=1+z[0][f],A[f].y/=1+z[0][f],A[f].z/=1+z[0][f]}for(f=0,T=a.length;f<T;f++)a[f].x=A[f].x,a[f].y=A[f].y,a[f].z=A[f].z}}}let E=new Bt;class ne{constructor(n,a,h){this.data=new Int32Array(n*a*h*3),this.width=a,this.height=h}set(n,a,h,f){let T=3*((n*this.width+a)*this.height+h);this.data[T]=f.ix,this.data[T+1]=f.iy,this.data[T+2]=f.iz}get(n,a,h){let f=3*((n*this.width+a)*this.height+h);return{ix:this.data[f],iy:this.data[f+1],iz:this.data[f+2]}}}class xe{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])],xe.MarchingCube||(xe.MarchingCube=new Bt)}getVDWIndex(n){return n.elem&&this.vdwRadii[n.elem]!==void 0?n.elem:"X"}getFacesAndVertices(n){let a={};for(let T=0,_=n.length;T<_;T++)a[n[T]]=!0;let h=this.verts;for(let T=0,_=h.length;T<_;T++)h[T].x=h[T].x/this.scaleFactor-this.ptranx,h[T].y=h[T].y/this.scaleFactor-this.ptrany,h[T].z=h[T].z/this.scaleFactor-this.ptranz;let f=[];for(let T=0,_=this.faces.length;T<_;T+=3){let M=this.faces[T],P=this.faces[T+1],A=this.faces[T+2],D=h[M].atomid,z=h[P].atomid,$=h[A].atomid,U=D;z<U&&(U=z),$<U&&(U=$),a[U]&&M!==P&&P!==A&&M!==A&&(f.push(M),f.push(P),f.push(A))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:h,faces:f}}initparm(n,a,h){h>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let f=1/this.scaleFactor*5.5;this.pminx=n[0][0],this.pmaxx=n[1][0],this.pminy=n[0][1],this.pmaxy=n[1][1],this.pminz=n[0][2],this.pmaxz=n[1][2],a?(this.pminx-=this.probeRadius+f,this.pminy-=this.probeRadius+f,this.pminz-=this.probeRadius+f,this.pmaxx+=this.probeRadius+f,this.pmaxy+=this.probeRadius+f,this.pmaxz+=this.probeRadius+f):(this.pminx-=f,this.pminy-=f,this.pminz-=f,this.pmaxx+=f,this.pmaxy+=f,this.pmaxz+=f),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(a),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(n){let a={};for(const h in this.vdwRadii){let f=this.vdwRadii[h];a[h]=n?(f+this.probeRadius)*this.scaleFactor+.5:f*this.scaleFactor+.5;let T=a[h]*a[h];this.widxz[h]=Math.floor(a[h])+1,this.depty[h]=new Int32Array(this.widxz[h]*this.widxz[h]);let _=0;for(let M=0;M<this.widxz[h];M++)for(let P=0;P<this.widxz[h];P++){let A=M*M+P*P;if(A>T)this.depty[h][_]=-1;else{let D=Math.sqrt(T-A);this.depty[h][_]=Math.floor(D)}_++}}}fillvoxels(n,a){for(let h=0,f=this.vpBits.length;h<f;h++)this.vpBits[h]=0,this.vpDistance[h]=-1,this.vpAtomID[h]=-1;for(let h in a){let f=n[a[h]];f!==void 0&&this.fillAtom(f,n)}for(let h=0,f=this.vpBits.length;h<f;h++)this.vpBits[h]&this.INOUT&&(this.vpBits[h]|=this.ISDONE)}fillAtom(n,a){let h=Math.floor(.5+this.scaleFactor*(n.x+this.ptranx)),f=Math.floor(.5+this.scaleFactor*(n.y+this.ptrany)),T=Math.floor(.5+this.scaleFactor*(n.z+this.ptranz)),_=this.getVDWIndex(n),M=0,P=this.pWidth*this.pHeight;for(let A=0,D=this.widxz[_];A<D;A++)for(let z=0;z<D;z++){if(this.depty[_][M]!=-1){for(let $=-1;$<2;$++)for(let U=-1;U<2;U++)for(let V=-1;V<2;V++)if($!==0&&U!==0&&V!==0){let H=$*A,G=V*z;for(let Y=0;Y<=this.depty[_][M];Y++){let te=Y*U,re=h+H,de=f+te,le=T+G;if(re<0||de<0||le<0||re>=this.pLength||de>=this.pWidth||le>=this.pHeight)continue;let ye=re*P+de*this.pHeight+le;if(this.vpBits[ye]&this.INOUT){let Pe=a[this.vpAtomID[ye]];if(Pe.serial!=n.serial){let Re=h+H-Math.floor(.5+this.scaleFactor*(Pe.x+this.ptranx)),Me=f+te-Math.floor(.5+this.scaleFactor*(Pe.y+this.ptrany)),we=T+G-Math.floor(.5+this.scaleFactor*(Pe.z+this.ptranz));H*H+te*te+G*G<Re*Re+Me*Me+we*we&&(this.vpAtomID[ye]=n.serial)}}else this.vpBits[ye]|=this.INOUT,this.vpAtomID[ye]=n.serial}}}M++}}fillvoxelswaals(n,a){for(let h=0,f=this.vpBits.length;h<f;h++)this.vpBits[h]&=~this.ISDONE;for(let h in a){let f=n[a[h]];f!==void 0&&this.fillAtomWaals(f,n)}}fillAtomWaals(n,a){let h=0,f=Math.floor(.5+this.scaleFactor*(n.x+this.ptranx)),T=Math.floor(.5+this.scaleFactor*(n.y+this.ptrany)),_=Math.floor(.5+this.scaleFactor*(n.z+this.ptranz)),M=this.getVDWIndex(n),P=this.pWidth*this.pHeight;for(let A=0,D=this.widxz[M];A<D;A++)for(let z=0;z<D;z++){if(this.depty[M][h]!=-1){for(let $=-1;$<2;$++)for(let U=-1;U<2;U++)for(let V=-1;V<2;V++)if($!==0&&U!==0&&V!==0){let H=$*A,G=V*z;for(let Y=0;Y<=this.depty[M][h];Y++){let te=Y*U,re=f+H,de=T+te,le=_+G;if(re<0||de<0||le<0||re>=this.pLength||de>=this.pWidth||le>=this.pHeight)continue;let ye=re*P+de*this.pHeight+le;if(this.vpBits[ye]&this.ISDONE){let Pe=a[this.vpAtomID[ye]];if(Pe.serial!=n.serial){let Re=f+H-Math.floor(.5+this.scaleFactor*(Pe.x+this.ptranx)),Me=T+te-Math.floor(.5+this.scaleFactor*(Pe.y+this.ptrany)),we=_+G-Math.floor(.5+this.scaleFactor*(Pe.z+this.ptranz));H*H+te*te+G*G<Re*Re+Me*Me+we*we&&(this.vpAtomID[ye]=n.serial)}}else this.vpBits[ye]|=this.ISDONE,this.vpAtomID[ye]=n.serial}}}h++}}buildboundary(){let n=this.pWidth*this.pHeight;for(let a=0;a<this.pLength;a++)for(let h=0;h<this.pHeight;h++)for(let f=0;f<this.pWidth;f++){let T=a*n+f*this.pHeight+h;if(this.vpBits[T]&this.INOUT){let _=0;for(;_<26;){let M=a+this.nb[_][0],P=h+this.nb[_][2],A=f+this.nb[_][1];if(M>-1&&M<this.pLength&&A>-1&&A<this.pWidth&&P>-1&&P<this.pHeight&&!(this.vpBits[M*n+A*this.pHeight+P]&this.INOUT)){this.vpBits[T]|=this.ISBOUND;break}_++}}}}fastdistancemap(){let n,a=new ne(this.pLength,this.pWidth,this.pHeight),h=this.pWidth*this.pHeight,f=this.cutRadius*this.cutRadius,T=[],_=[];for(let A=0;A<this.pLength;A++)for(let D=0;D<this.pWidth;D++)for(let z=0;z<this.pHeight;z++)if(n=A*h+D*this.pHeight+z,this.vpBits[n]&=~this.ISDONE,this.vpBits[n]&this.INOUT&&this.vpBits[n]&this.ISBOUND){let $={ix:A,iy:D,iz:z};a.set(A,D,z,$),T.push($),this.vpDistance[n]=0,this.vpBits[n]|=this.ISDONE,this.vpBits[n]&=~this.ISBOUND}do{_=this.fastoneshell(T,a),T=[];for(let A=0,D=_.length;A<D;A++)n=h*_[A].ix+this.pHeight*_[A].iy+_[A].iz,this.vpBits[n]&=~this.ISBOUND,this.vpDistance[n]<=1.0404*f&&T.push({ix:_[A].ix,iy:_[A].iy,iz:_[A].iz})}while(T.length!==0);T=[],_=[],a=null;let M=this.scaleFactor-.5;M<0&&(M=0);let P=f-.5/(.1+M);for(let A=0;A<this.pLength;A++)for(let D=0;D<this.pWidth;D++)for(let z=0;z<this.pHeight;z++)n=A*h+D*this.pHeight+z,this.vpBits[n]&=~this.ISBOUND,this.vpBits[n]&this.INOUT&&(this.vpBits[n]&this.ISDONE&&!(this.vpBits[n]&this.ISDONE&&this.vpDistance[n]>=P)||(this.vpBits[n]|=this.ISBOUND))}fastoneshell(n,a){let h,f,T,_,M,P,A,D,z,$=[];if(n.length===0)return $;let U={ix:-1,iy:-1,iz:-1},V=this.pWidth*this.pHeight;for(let H=0,G=n.length;H<G;H++){h=n[H].ix,f=n[H].iy,T=n[H].iz,D=a.get(h,f,T);for(let Y=0;Y<6;Y++)U.ix=h+this.nb[Y][0],U.iy=f+this.nb[Y][1],U.iz=T+this.nb[Y][2],U.ix<this.pLength&&U.ix>-1&&U.iy<this.pWidth&&U.iy>-1&&U.iz<this.pHeight&&U.iz>-1&&(z=U.ix*V+this.pHeight*U.iy+U.iz,this.vpBits[z]&this.INOUT&&!(this.vpBits[z]&this.ISDONE)?(a.set(U.ix,U.iy,T+this.nb[Y][2],D),_=U.ix-D.ix,M=U.iy-D.iy,P=U.iz-D.iz,A=_*_+M*M+P*P,this.vpDistance[z]=A,this.vpBits[z]|=this.ISDONE,this.vpBits[z]|=this.ISBOUND,$.push({ix:U.ix,iy:U.iy,iz:U.iz})):this.vpBits[z]&this.INOUT&&this.vpBits[z]&this.ISDONE&&(_=U.ix-D.ix,M=U.iy-D.iy,P=U.iz-D.iz,A=_*_+M*M+P*P,A<this.vpDistance[z]&&(a.set(U.ix,U.iy,U.iz,D),this.vpDistance[z]=A,this.vpBits[z]&this.ISBOUND||(this.vpBits[z]|=this.ISBOUND,$.push({ix:U.ix,iy:U.iy,iz:U.iz})))))}for(let H=0,G=n.length;H<G;H++){h=n[H].ix,f=n[H].iy,T=n[H].iz,D=a.get(h,f,T);for(let Y=6;Y<18;Y++)U.ix=h+this.nb[Y][0],U.iy=f+this.nb[Y][1],U.iz=T+this.nb[Y][2],U.ix<this.pLength&&U.ix>-1&&U.iy<this.pWidth&&U.iy>-1&&U.iz<this.pHeight&&U.iz>-1&&(z=U.ix*V+this.pHeight*U.iy+U.iz,this.vpBits[z]&this.INOUT&&!(this.vpBits[z]&this.ISDONE)?(a.set(U.ix,U.iy,T+this.nb[Y][2],D),_=U.ix-D.ix,M=U.iy-D.iy,P=U.iz-D.iz,A=_*_+M*M+P*P,this.vpDistance[z]=A,this.vpBits[z]|=this.ISDONE,this.vpBits[z]|=this.ISBOUND,$.push({ix:U.ix,iy:U.iy,iz:U.iz})):this.vpBits[z]&this.INOUT&&this.vpBits[z]&this.ISDONE&&(_=U.ix-D.ix,M=U.iy-D.iy,P=U.iz-D.iz,A=_*_+M*M+P*P,A<this.vpDistance[z]&&(a.set(U.ix,U.iy,U.iz,D),this.vpDistance[z]=A,this.vpBits[z]&this.ISBOUND||(this.vpBits[z]|=this.ISBOUND,$.push({ix:U.ix,iy:U.iy,iz:U.iz})))))}for(let H=0,G=n.length;H<G;H++){h=n[H].ix,f=n[H].iy,T=n[H].iz,D=a.get(h,f,T);for(let Y=18;Y<26;Y++)U.ix=h+this.nb[Y][0],U.iy=f+this.nb[Y][1],U.iz=T+this.nb[Y][2],U.ix<this.pLength&&U.ix>-1&&U.iy<this.pWidth&&U.iy>-1&&U.iz<this.pHeight&&U.iz>-1&&(z=U.ix*V+this.pHeight*U.iy+U.iz,this.vpBits[z]&this.INOUT&&!(this.vpBits[z]&this.ISDONE)?(a.set(U.ix,U.iy,T+this.nb[Y][2],D),_=U.ix-D.ix,M=U.iy-D.iy,P=U.iz-D.iz,A=_*_+M*M+P*P,this.vpDistance[z]=A,this.vpBits[z]|=this.ISDONE,this.vpBits[z]|=this.ISBOUND,$.push({ix:U.ix,iy:U.iy,iz:U.iz})):this.vpBits[z]&this.INOUT&&this.vpBits[z]&this.ISDONE&&(_=U.ix-D.ix,M=U.iy-D.iy,P=U.iz-D.iz,A=_*_+M*M+P*P,A<this.vpDistance[z]&&(a.set(U.ix,U.iy,U.iz,D),this.vpDistance[z]=A,this.vpBits[z]&this.ISBOUND||(this.vpBits[z]|=this.ISBOUND,$.push({ix:U.ix,iy:U.iy,iz:U.iz})))))}return $}marchingcubeinit(n){for(let a=0,h=this.vpBits.length;a<h;a++)n==1?this.vpBits[a]&=~this.ISBOUND:n==4?(this.vpBits[a]&=~this.ISDONE,this.vpBits[a]&this.ISBOUND&&(this.vpBits[a]|=this.ISDONE),this.vpBits[a]&=~this.ISBOUND):n==2?this.vpBits[a]&this.ISBOUND&&this.vpBits[a]&this.ISDONE?this.vpBits[a]&=~this.ISBOUND:this.vpBits[a]&this.ISBOUND&&!(this.vpBits[a]&this.ISDONE)&&(this.vpBits[a]|=this.ISDONE):n==3&&(this.vpBits[a]&=~this.ISBOUND)}marchingcube(n){this.marchingcubeinit(n),this.verts=[],this.faces=[],xe.MarchingCube.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let a=this.pWidth*this.pHeight;for(let h=0,f=this.verts.length;h<f;h++)this.verts[h].atomid=this.vpAtomID[this.verts[h].x*a+this.pHeight*this.verts[h].y+this.verts[h].z];xe.MarchingCube.laplacianSmooth(1,this.verts,this.faces)}}xe.MarchingCube=new Bt;var Ve=s(848);class ze{static finalizeGeo(n){var a=n.updateGeoGroup(0);a.vertices>0&&a.truncateArrayBuffers(!0,!0)}static updateColor(n,a){var h,f,T;a=a||x.CC.color(a),n.colorsNeedUpdate=!0,a.constructor!==Array&&(h=a.r,f=a.g,T=a.b);for(let _ in n.geometryGroups){let M=n.geometryGroups[_],P=M.colorArray;for(let A=0,D=M.vertices;A<D;++A){if(a.constructor===Array){let z=a[A];h=z.r,f=z.g,T=z.b}P[3*A]=h,P[3*A+1]=f,P[3*A+2]=T}}}static drawArrow(n,a,h){var f=h.start,T=h.end,_=h.radius,M=h.radiusRatio,P=h.mid,A=h.midpos;if(!f||!T)return;var D=a.updateGeoGroup(51),z=new d.Vector3(T.x,T.y,T.z).sub(f);if(A){let hi=z.length();P=A>0?A/hi:(hi+A)/hi}z.multiplyScalar(P);var $=new d.Vector3(f.x,f.y,f.z).add(z),U=z.clone().negate();let V=new d.Vector3(f.x,f.y,f.z);n.intersectionShape.cylinder.push(new p.Cylinder(V,$.clone(),_)),n.intersectionShape.sphere.push(new p.Sphere(V,_));var H=[];H[0]=z.clone(),Math.abs(H[0].x)>1e-4?H[0].y+=1:H[0].x+=1,H[0].cross(z),H[0].normalize(),H[4]=H[0].clone(),H[4].crossVectors(H[0],z),H[4].normalize(),H[8]=H[0].clone().negate(),H[12]=H[4].clone().negate(),H[2]=H[0].clone().add(H[4]).normalize(),H[6]=H[4].clone().add(H[8]).normalize(),H[10]=H[8].clone().add(H[12]).normalize(),H[14]=H[12].clone().add(H[0]).normalize(),H[1]=H[0].clone().add(H[2]).normalize(),H[3]=H[2].clone().add(H[4]).normalize(),H[5]=H[4].clone().add(H[6]).normalize(),H[7]=H[6].clone().add(H[8]).normalize(),H[9]=H[8].clone().add(H[10]).normalize(),H[11]=H[10].clone().add(H[12]).normalize(),H[13]=H[12].clone().add(H[14]).normalize(),H[15]=H[14].clone().add(H[0]).normalize();var G,Y,te,re,de,le,ye,Pe,Re,Me,we,Ue,Je,tt,Ye,ut,ft,Ze,pt,Be,et,St,st=D.vertices,wt=D.vertexArray,Et=D.faceArray,it=D.normalArray,Pt=D.lineArray;for(Y=0,te=H.length;Y<te;++Y){G=3*(st+3*Y);var Ht=H[Y].clone().multiplyScalar(_).add(f),Mt=H[Y].clone().multiplyScalar(_).add($),ct=H[Y].clone().multiplyScalar(_*M).add($);if(wt[G]=Ht.x,wt[G+1]=Ht.y,wt[G+2]=Ht.z,wt[G+3]=Mt.x,wt[G+4]=Mt.y,wt[G+5]=Mt.z,wt[G+6]=ct.x,wt[G+7]=ct.y,wt[G+8]=ct.z,Y>0){var Jt=wt[G-3],Nt=wt[G-2],qt=wt[G-1],Vt=new d.Vector3(Jt,Nt,qt),Xt=new d.Vector3(T.x,T.y,T.z),yr=$.clone(),Fr=new d.Vector3(ct.x,ct.y,ct.z);n.intersectionShape.triangle.push(new p.Triangle(Fr,Xt,Vt)),n.intersectionShape.triangle.push(new p.Triangle(Vt.clone(),yr,Fr.clone()))}}D.vertices+=48,wt[G=3*D.vertices]=f.x,wt[G+1]=f.y,wt[G+2]=f.z,wt[G+3]=$.x,wt[G+4]=$.y,wt[G+5]=$.z,wt[G+6]=T.x,wt[G+7]=T.y,wt[G+8]=T.z,D.vertices+=3;var Tr=D.vertices-3,ii=D.vertices-2,Wr=D.vertices-1,br=3*Tr,$r=3*ii,ci=3*Wr;for(Y=0,te=H.length-1;Y<te;++Y){var ni=st+3*Y;G=3*ni,de=D.faceidx,le=D.lineidx,Je=3*(ye=ni),tt=3*(Pe=ni+1),Ye=3*(Re=ni+2),ut=3*(Me=ni+4),ft=3*(we=ni+5),Ze=3*(Ue=ni+3),pt=Be=H[Y],et=St=H[Y+1],it[Je]=pt.x,it[tt]=Be.x,it[Ze]=St.x,it[Je+1]=pt.y,it[tt+1]=Be.y,it[Ze+1]=St.y,it[Je+2]=pt.z,it[tt+2]=Be.z,it[Ze+2]=St.z,it[tt]=Be.x,it[ut]=et.x,it[Ze]=St.x,it[tt+1]=Be.y,it[ut+1]=et.y,it[Ze+1]=St.y,it[tt+2]=Be.z,it[ut+2]=et.z,it[Ze+2]=St.z,it[Ye]=Be.x,it[ft]=et.x,it[Ye+1]=Be.y,it[ft+1]=et.y,it[Ye+2]=Be.z,it[ft+2]=et.z,Et[de]=ye,Et[de+1]=Pe,Et[de+2]=Ue,Et[de+3]=Pe,Et[de+4]=Me,Et[de+5]=Ue,Et[de+6]=ye,Et[de+7]=Ue,Et[de+8]=Tr,Et[de+9]=Re,Et[de+10]=ii,Et[de+11]=we,Et[de+12]=Re,Et[de+13]=Wr,Et[de+14]=we,Pt[le]=ye,Pt[le+1]=Pe,Pt[le+2]=ye,Pt[le+3]=Ue,Pt[le+4]=Me,Pt[le+5]=Ue,Pt[le+6]=ye,Pt[le+7]=Ue,Pt[le+8]=Re,Pt[le+9]=Pe,Pt[le+10]=Re,Pt[le+11]=we,Pt[le+12]=Me,Pt[le+13]=we,Pt[le+14]=Re,Pt[le+15]=Wr,Pt[le+16]=Re,Pt[le+17]=we,Pt[le+18]=Wr,Pt[le+19]=we,D.faceidx+=15,D.lineidx+=20}re=[st+45,st+46,st+1,st,st+47,st+2],de=D.faceidx,le=D.lineidx,Je=3*(ye=re[0]),tt=3*(Pe=re[1]),Ye=3*(Re=re[4]),ut=3*(Me=re[2]),ft=3*(we=re[5]),Ze=3*(Ue=re[3]),pt=Be=H[15],et=St=H[0],it[Je]=pt.x,it[tt]=Be.x,it[Ze]=St.x,it[Je+1]=pt.y,it[tt+1]=Be.y,it[Ze+1]=St.y,it[Je+2]=pt.z,it[tt+2]=Be.z,it[Ze+2]=St.z,it[tt]=Be.x,it[ut]=et.x,it[Ze]=St.x,it[tt+1]=Be.y,it[ut+1]=et.y,it[Ze+1]=St.y,it[tt+2]=Be.z,it[ut+2]=et.z,it[Ze+2]=St.z,it[Ye]=Be.x,it[ft]=et.x,it[Ye+1]=Be.y,it[ft+1]=et.y,it[Ye+2]=Be.z,it[ft+2]=et.z,z.normalize(),U.normalize(),it[br]=U.x,it[$r]=it[ci]=z.x,it[br+1]=U.y,it[$r+1]=it[ci+1]=z.y,it[br+2]=U.z,it[$r+2]=it[ci+2]=z.z,Et[de]=ye,Et[de+1]=Pe,Et[de+2]=Ue,Et[de+3]=Pe,Et[de+4]=Me,Et[de+5]=Ue,Et[de+6]=ye,Et[de+7]=Ue,Et[de+8]=Tr,Et[de+9]=Re,Et[de+10]=ii,Et[de+11]=we,Et[de+12]=Re,Et[de+13]=Wr,Et[de+14]=we,Pt[le]=ye,Pt[le+1]=Pe,Pt[le+2]=ye,Pt[le+3]=Ue,Pt[le+4]=Me,Pt[le+5]=Ue,Pt[le+6]=ye,Pt[le+7]=Ue,Pt[le+8]=Re,Pt[le+9]=Pe,Pt[le+10]=Re,Pt[le+11]=we,Pt[le+12]=Me,Pt[le+13]=we,Pt[le+14]=Re,Pt[le+15]=Wr,Pt[le+16]=Re,Pt[le+17]=we,Pt[le+18]=Wr,Pt[le+19]=we,D.faceidx+=15,D.lineidx+=20}static updateBoundingFromPoints(n,a,h,f){n.center.set(0,0,0);let T=1/0,_=1/0,M=1/0,P=-1/0,A=-1/0,D=-1/0;n.box&&(T=n.box.min.x,P=n.box.max.x,_=n.box.min.y,A=n.box.max.y,M=n.box.min.z,D=n.box.max.z);for(let V=0,H=f;V<H;V++){var z=h[3*V],$=h[3*V+1],U=h[3*V+2];z<T&&(T=z),$<_&&(_=$),U<M&&(M=U),z>P&&(P=z),$>A&&(A=$),U>D&&(D=U)}n.center.set((P+T)/2,(A+_)/2,(D+M)/2),n.radius=n.center.distanceTo({x:P,y:A,z:D}),n.box={min:{x:T,y:_,z:M},max:{x:P,y:A,z:D}}}static addCustomGeo(n,a,h,f,T){var _,M,P,A,D,z,$,U,V,H=a.addGeoGroup(),G=h.vertexArr,Y=h.normalArr,te=h.faceArr;H.vertices=G.length,H.faceidx=te.length;var re=H.vertexArray,de=H.colorArray;for(f.constructor!==Array&&(U=f.r,V=f.g,A=f.b),z=0,$=H.vertices;z<$;++z)_=3*z,M=G[z],re[_]=M.x,re[_+1]=M.y,re[_+2]=M.z,f.constructor===Array&&(U=(D=f[z]).r,V=D.g,A=D.b),de[_]=U,de[_+1]=V,de[_+2]=A;if(T)for(z=0,$=H.faceidx/3;z<$;++z){P=te[_=3*z],A=te[_+1],D=te[_+2];var le=new d.Vector3,ye=new d.Vector3,Pe=new d.Vector3;n.intersectionShape.triangle.push(new p.Triangle(le.copy(G[P]),ye.copy(G[A]),Pe.copy(G[D])))}if(T){var Re=new d.Vector3(0,0,0),Me=0;for(let Je=0;Je<a.geometryGroups.length;Je++)Re.add(a.geometryGroups[Je].getCentroid()),Me++;Re.divideScalar(Me),ze.updateBoundingFromPoints(n.boundingSphere,{centroid:Re},re,H.vertices)}if(H.faceArray=new Uint16Array(te),H.truncateArrayBuffers(!0,!0),Y.length<H.vertices)H.setNormals();else{var we,Ue=H.normalArray=new Float32Array(3*H.vertices);for(z=0,$=H.vertices;z<$;++z)_=3*z,we=Y[z],Ue[_]=we.x,Ue[_+1]=we.y,Ue[_+2]=we.z}H.setLineIndices(),H.lineidx=H.lineArray.length}static updateFromStyle(n,a){a.color!==void 0?(n.color=a.color||new x.Color,a.color instanceof x.Color||(n.color=x.CC.color(a.color))):n.color=x.CC.color(0),n.wireframe=!!a.wireframe,n.opacity=a.alpha?(0,d.clamp)(a.alpha,0,1):1,a.opacity!==void 0&&(n.opacity=(0,d.clamp)(a.opacity,0,1)),n.side=a.side!==void 0?a.side:u.DoubleSide,n.linewidth=a.linewidth===void 0?1:a.linewidth,n.clickable=!!a.clickable,n.callback=(0,v.makeFunction)(a.callback),n.hoverable=!!a.hoverable,n.hover_callback=(0,v.makeFunction)(a.hover_callback),n.unhover_callback=(0,v.makeFunction)(a.unhover_callback),n.contextMenuEnabled=!!a.contextMenuEnabled,n.hidden=a.hidden,n.frame=a.frame}constructor(n){this.color=16777215,this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.contextMenuEnabled=!1,this.side=u.DoubleSide,this.stylespec=n||{},this.boundingSphere=new p.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},ze.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new u.Geometry(!0),this.linegeo=new u.Geometry(!0)}updateStyle(n){for(var a in n)this.stylespec[a]=n[a];if(ze.updateFromStyle(this,this.stylespec),n.voldata&&n.volscheme){(0,v.adjustVolumeStyle)(n);const h=n.volscheme,f=n.voldata,T=x.CC,_=h.range()||[-1,1];this.geo.setColors(function(M,P,A){let D=f.getVal(M,P,A);return T.color(h.valueToHex(D,_))}),delete this.color}}addCustom(n){n.vertexArr=n.vertexArr||[],n.faceArr=n.faceArr||[],n.normalArr=n.normalArr||[],ze.drawCustom(this,this.geo,n)}addSphere(n){n.center||(n.center=new d.Vector3(0,0,0)),n.radius=n.radius?(0,d.clamp)(n.radius,0,1/0):1.5,n.color=x.CC.color(n.color),this.intersectionShape.sphere.push(new p.Sphere(n.center,n.radius)),c.drawSphere(this.geo,n.center,n.radius,n.color,n.quality),this.components.push({centroid:new d.Vector3(n.center.x,n.center.y,n.center.z)});var a=this.geo.updateGeoGroup(0);ze.updateBoundingFromPoints(this.boundingSphere,this.components,a.vertexArray,a.vertices)}addBox(n){var a,h,f,T=n.dimensions||{w:1,h:1,d:1};a=typeof T.w=="number"?{x:T.w,y:0,z:0}:T.w,h=typeof T.h=="number"?{x:0,y:T.h,z:0}:T.h,f=typeof T.d=="number"?{x:0,y:0,z:T.d}:T.d;var _=n.corner;_==null&&(_=n.center!==void 0?{x:n.center.x-.5*(a.x+h.x+f.x),y:n.center.y-.5*(a.y+h.y+f.y),z:n.center.z-.5*(a.z+h.z+f.z)}:{x:0,y:0,z:0});var M=[{x:_.x,y:_.y,z:_.z},{x:_.x+a.x,y:_.y+a.y,z:_.z+a.z},{x:_.x+h.x,y:_.y+h.y,z:_.z+h.z},{x:_.x+a.x+h.x,y:_.y+a.y+h.y,z:_.z+a.z+h.z},{x:_.x+f.x,y:_.y+f.y,z:_.z+f.z},{x:_.x+a.x+f.x,y:_.y+a.y+f.y,z:_.z+a.z+f.z},{x:_.x+h.x+f.x,y:_.y+h.y+f.y,z:_.z+h.z+f.z},{x:_.x+a.x+h.x+f.x,y:_.y+a.y+h.y+f.y,z:_.z+a.z+h.z+f.z}],P=[],A=[];P.splice(P.length,0,M[0],M[1],M[2],M[3]),A.splice(A.length,0,0,2,1,1,2,3);var D=4;P.splice(P.length,0,M[2],M[3],M[6],M[7]),A.splice(A.length,0,D+0,D+2,D+1,D+1,D+2,D+3),D+=4,P.splice(P.length,0,M[4],M[5],M[0],M[1]),A.splice(A.length,0,D+0,D+2,D+1,D+1,D+2,D+3),D+=4,P.splice(P.length,0,M[6],M[7],M[4],M[5]),A.splice(A.length,0,D+0,D+2,D+1,D+1,D+2,D+3),D+=4,P.splice(P.length,0,M[3],M[1],M[7],M[5]),A.splice(A.length,0,D+0,D+2,D+1,D+1,D+2,D+3),D+=4,P.splice(P.length,0,M[2],M[6],M[0],M[4]),A.splice(A.length,0,D+0,D+2,D+1,D+1,D+2,D+3),D+=4;var z=(0,v.extend)({},n);z.vertexArr=P,z.faceArr=A,z.normalArr=[],ze.drawCustom(this,this.geo,z);var $=new d.Vector3;this.components.push({centroid:$.addVectors(M[0],M[7]).multiplyScalar(.5)});var U=this.geo.updateGeoGroup(0);ze.updateBoundingFromPoints(this.boundingSphere,this.components,U.vertexArray,U.vertices)}addCylinder(n){var a,h;a=n.start?new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0):new d.Vector3(0,0,0),n.end?(h=new d.Vector3(n.end.x,n.end.y||0,n.end.z||0)).x===void 0&&(h.x=3):h=new d.Vector3(0,0,0);var f=n.radius||.1,T=x.CC.color(n.color);this.intersectionShape.cylinder.push(new p.Cylinder(a,h,f)),c.drawCylinder(this.geo,a,h,f,T,n.fromCap,n.toCap);var _=new d.Vector3;this.components.push({centroid:_.addVectors(a,h).multiplyScalar(.5)});var M=this.geo.updateGeoGroup(0);ze.updateBoundingFromPoints(this.boundingSphere,this.components,M.vertexArray,M.vertices)}addDashedCylinder(n){var a,h;n.dashLength=n.dashLength||.25,n.gapLength=n.gapLength||.25,a=n.start?new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0):new d.Vector3(0,0,0),n.end?(h=new d.Vector3(n.end.x,n.end.y||0,n.end.z||0)).x===void 0&&(h.x=3):h=new d.Vector3(3,0,0);for(var f=n.radius||.1,T=x.CC.color(n.color),_=Math.sqrt(Math.pow(a.x-h.x,2)+Math.pow(a.y-h.y,2)+Math.pow(a.z-h.z,2)),M=_/(n.gapLength+n.dashLength),P=new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0),A=new d.Vector3(n.end.x,n.end.y||0,n.end.z||0),D=new d.Vector3((h.x-a.x)/(_/n.gapLength),(h.y-a.y)/(_/n.gapLength),(h.z-a.z)/(_/n.gapLength)),z=new d.Vector3((h.x-a.x)/(_/n.dashLength),(h.y-a.y)/(_/n.dashLength),(h.z-a.z)/(_/n.dashLength)),$=0;$<M;$++)A=new d.Vector3(P.x+z.x,P.y+z.y,P.z+z.z),this.intersectionShape.cylinder.push(new p.Cylinder(P,A,f)),c.drawCylinder(this.geo,P,A,f,T,n.fromCap,n.toCap),P=new d.Vector3(A.x+D.x,A.y+D.y,A.z+D.z);var U=new d.Vector3;this.components.push({centroid:U.addVectors(a,h).multiplyScalar(.5)});var V=this.geo.updateGeoGroup(0);ze.updateBoundingFromPoints(this.boundingSphere,this.components,V.vertexArray,V.vertices)}addCurve(n){n.points=n.points||[],n.smooth=n.smooth||10,n.fromCap===void 0&&(n.fromCap=2),n.toCap===void 0&&(n.toCap=2);var a=R(n.points,n.smooth);if(a.length<3)console.log("Too few points in addCurve");else{var h=n.radius||.1,f=x.CC.color(n.color),T=0,_=a.length-1,M=a[0].distanceTo(a[1]),P=Math.ceil(2*h/M);if(n.toArrow){let $={start:a[_-=P],end:a[a.length-1],radius:h,color:f,mid:1e-4};this.addArrow($)}if(n.fromArrow){let $={start:a[T+=P],end:a[0],radius:h,color:f,mid:1e-4};this.addArrow($)}for(var A=Math.ceil(a.length/2),D={radius:h,color:f,fromCap:2,toCap:2},z=T;z<_;z++)D.start=a[z],D.end=a[z+1],D.fromCap=2,D.toCap=2,z<A?(D.fromCap=2,D.toCap=0):z>A?(D.fromCap=0,D.toCap=2):(D.fromCap=2,D.toCap=2),this.addCylinder(D)}}addLine(n){var a,h;a=n.start?new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0):new d.Vector3(0,0,0),n.end?(h=new d.Vector3(n.end.x,n.end.y||0,n.end.z||0)).x===void 0&&(h.x=3):h=new d.Vector3(3,0,0);var f=this.geo.updateGeoGroup(2),T=f.vertices,_=3*T,M=f.vertexArray;M[_]=a.x,M[_+1]=a.y,M[_+2]=a.z,M[_+3]=h.x,M[_+4]=h.y,M[_+5]=h.z,f.vertices+=2;var P=f.lineArray,A=f.lineidx;P[A]=T,P[A+1]=T+1,f.lineidx+=2;var D=new d.Vector3;this.components.push({centroid:D.addVectors(a,h).multiplyScalar(.5)}),f=this.geo.updateGeoGroup(0),ze.updateBoundingFromPoints(this.boundingSphere,this.components,f.vertexArray,f.vertices)}addArrow(n){if(n.start?n.start=new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0):n.start=new d.Vector3(0,0,0),n.dir instanceof d.Vector3&&typeof n.length=="number"){var a=n.dir.clone().multiplyScalar(n.length).add(n.start);n.end=a}else n.end?(n.end=new d.Vector3(n.end.x,n.end.y||0,n.end.z||0),n.end.x===void 0&&(n.end.x=3)):n.end=new d.Vector3(3,0,0);n.radius=n.radius||.1,n.radiusRatio=n.radiusRatio||1.618034,n.mid=0<n.mid&&n.mid<1?n.mid:.618034,ze.drawArrow(this,this.geo,n);var h=new d.Vector3;this.components.push({centroid:h.addVectors(n.start,n.end).multiplyScalar(.5)});var f=this.geo.updateGeoGroup(0);ze.updateBoundingFromPoints(this.boundingSphere,this.components,f.vertexArray,f.vertices)}static distance_from(n,a){return Math.sqrt(Math.pow(n.x-a.x,2)+Math.pow(n.y-a.y,2)+Math.pow(n.z-a.z,2))}static inSelectedRegion(n,a,h){for(var f=0;f<a.length;f++)if(ze.distance_from(a[f],n)<=h)return!0;return!1}addIsosurface(n,a,h,f){var T,_,M=a.isoval!==void 0&&typeof a.isoval=="number"?a.isoval:0,P=!!a.voxel,A=a.smoothness===void 0?1:a.smoothness,D=n.size.x,z=n.size.y,$=n.size.z,U=new Int16Array(D*z*$),V=n.data;for(T=0,_=U.length;T<_;++T)U[T]=-1;var H=new Uint8Array(D*z*$);for(T=0,_=V.length;T<_;++T)(M>=0?V[T]-M:M-V[T])>0&&(H[T]|=ze.ISDONE);var G=[],Y=[];E.march(H,G,Y,{fulltable:!0,voxel:P,unitCube:n.unit,origin:n.origin,matrix:n.matrix,nX:D,nY:z,nZ:$}),!P&&A>0&&E.laplacianSmooth(A,G,Y);var te=[],re=[],de=[];if(a.selectedRegion&&a.coords===void 0&&(a.coords=a.selectedRegion),a.coords===void 0&&a.selection!==void 0&&(f?a.coords=f.selectedAtoms(a.selection):console.log("addIsosurface needs viewer is selection provided.")),a.coords!==void 0){var le=a.coords[0].x,ye=a.coords[0].y,Pe=a.coords[0].z,Re=a.coords[0].x,Me=a.coords[0].y,we=a.coords[0].z;for(let Be=0;Be<a.coords.length;Be++)a.coords[Be].x>le?le=a.coords[Be].x:a.coords[Be].x<Re&&(Re=a.coords[Be].x),a.coords[Be].y>ye?ye=a.coords[Be].y:a.coords[Be].y<Me&&(Me=a.coords[Be].y),a.coords[Be].z>Pe?Pe=a.coords[Be].z:a.coords[Be].z<we&&(we=a.coords[Be].z);var Ue=2;a.radius!==void 0&&(Ue=a.radius),a.selectedOffset!==void 0&&(Ue=a.selectedOffset),a.seldist!==void 0&&(Ue=a.seldist),Re-=Ue,le+=Ue,Me-=Ue,ye+=Ue,we-=Ue,Pe+=Ue;for(let Be=0;Be<G.length;Be++)G[Be].x>Re&&G[Be].x<le&&G[Be].y>Me&&G[Be].y<ye&&G[Be].z>we&&G[Be].z<Pe&&ze.inSelectedRegion(G[Be],a.coords,Ue)?(te.push(re.length),re.push(G[Be])):te.push(-1);for(let Be=0;Be+2<Y.length;Be+=3)te[Y[Be]]!==-1&&te[Y[Be+1]]!==-1&&te[Y[Be+2]]!==-1&&(de.push(Y[Be]-(Y[Be]-te[Y[Be]])),de.push(Y[Be+1]-(Y[Be+1]-te[Y[Be+1]])),de.push(Y[Be+2]-(Y[Be+2]-te[Y[Be+2]])));G=re,Y=de}ze.drawCustom(this,this.geo,{vertexArr:G,faceArr:Y,normalArr:[],clickable:a.clickable,hoverable:a.hoverable}),this.updateStyle(a);var Je=new d.Vector3(n.origin.x,n.origin.y,n.origin.z),tt=new d.Vector3(n.size.x*n.unit.x,n.size.y*n.unit.y,n.size.z*n.unit.z),Ye=new d.Vector3(0,0,0),ut=Je.clone(),ft=Je.clone().add(tt);for(let Be=0;Be<G.length;Be++)Ye.add(G[Be]),ut.max(G[Be]),ft.min(G[Be]);Ye.divideScalar(G.length);var Ze=Ye.distanceTo(ft),pt=Ye.distanceTo(ut);this.boundingSphere.center=Ye,this.boundingSphere.radius=Math.max(Ze,pt),typeof h=="function"&&h()}addVolumetricData(n,a,h){n=new Ve.VolumeData(n,a),this.addIsosurface(n,h)}finalize(){return ze.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(n){if(this.renderedShapeObj&&(n.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){ze.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),this.color!==void 0&&ze.updateColor(this.geo,this.color),this.shapeObj=new u.Object3D;var a=null;a=this.side==u.DoubleSide?new u.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:u.Coloring.VertexColors}):new u.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:u.Coloring.VertexColors});var h=new u.Mesh(this.geo,a);if(this.shapeObj.add(h),this.linegeo&&this.linegeo.vertices>0){var f=new u.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),T=new u.Line(this.linegeo,f,u.LineStyle.LinePieces);this.shapeObj.add(T)}this.renderedShapeObj=this.shapeObj.clone(),n.add(this.renderedShapeObj)}}removegl(n){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),n.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}function yt(oe){if(oe.vertexArr.length<64e3)return[oe];var n=[{vertexArr:[],normalArr:[],faceArr:[]}];oe.colorArr&&(n.colorArr=[]);var a=[],h=[],f=0,T=oe.faceArr;for(let M=0,P=T.length;M<P;M+=3){let A=n[f];for(let D=0;D<3;D++){var _=T[M+D];a[_]!==f&&(a[_]=f,h[_]=A.vertexArr.length,A.vertexArr.push(oe.vertexArr[_]),oe.normalArr&&oe.normalArr[_]&&A.normalArr.push(oe.normalArr[_]),oe.colorArr&&oe.colorArr[_]&&A.colorArr.push(oe.colorArr[_])),A.faceArr.push(h[_])}A.vertexArr.length>=64e3&&(n.push({vertexArr:[],normalArr:[],faceArr:[]}),oe.colorArr&&(n.colorArr=[]),f++)}return n}ze.ISDONE=2,ze.drawCustom=function(oe,n,a){var h=a,f=h.vertexArr,T=h.faceArr;f.length!==0&&T.length!==0||console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var _=a.color;_===void 0&&(_=oe.color),_=x.CC.color(_);for(var M=yt(h),P=0,A=M.length;P<A;P++)ze.addCustomGeo(oe,n,M[P],M[P].colorArr?M[P].colorArr:_,a.clickable)};let lt=0;function mt(oe,n,a){var h=a;return oe!==void 0&&(oe instanceof x.Color?h=oe.scaled():(h=x.CC.color(oe)).scaled!==void 0&&(h=h.scaled())),n!==void 0&&(h.a=parseFloat(n)),h}class Rt{constructor(n,a){this.id=lt++,this.stylespec=a||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new u.Sprite,this.text=n,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}hide(){this.sprite&&(this.sprite.visible=!1)}show(){this.sprite&&(this.sprite.visible=!0)}setContext(){var n=this.stylespec,a=n.useScreen!==void 0&&n.useScreen,h=n.showBackground;h!=="0"&&h!=="false"||(h=!1),h===void 0&&(h=!0);var f=n.font?n.font:"sans-serif",T=parseInt(n.fontSize)?parseInt(n.fontSize):18,_=mt(n.fontColor,n.fontOpacity,{r:255,g:255,b:255,a:1}),M=n.padding?n.padding:4,P=n.borderThickness?n.borderThickness:0,A=mt(n.backgroundColor,n.backgroundOpacity,{r:0,g:0,b:0,a:1}),D=mt(n.borderColor,n.borderOpacity,A),z=n.position?n.position:{x:-10,y:1,z:1},$=n.inFront===void 0||n.inFront;$!=="false"&&$!=="0"||($=!1);var U=n.alignment||u.SpriteAlignment.topLeft;typeof U=="string"&&U in u.SpriteAlignment&&(U=u.SpriteAlignment[U]);var V="";n.bold&&(V="bold "),this.context.font=V+T+"px  "+f;var H=this.context.measureText(this.text).width;h||(P=0);var G=H+2.5*P+2*M,Y=1.25*T+2*P+2*M;if(n.backgroundImage){var te=n.backgroundImage,re=n.backgroundWidth?n.backgroundWidth:te.width,de=n.backgroundHeight?n.backgroundHeight:te.height;re>G&&(G=re),de>Y&&(Y=de)}if(this.canvas.width=G,this.canvas.height=Y,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),V="",n.bold&&(V="bold "),this.context.font=V+T+"px  "+f,this.context.fillStyle="rgba("+A.r+","+A.g+","+A.b+","+A.a+")",this.context.strokeStyle="rgba("+D.r+","+D.g+","+D.b+","+D.a+")",n.backgroundGradient){let ye=this.context.createLinearGradient(0,Y/2,G,Y/2),Pe=w.Gradient.getGradient(n.backgroundGradient),Re=Pe.range(),Me=-1,we=1;Re&&(Me=Re[0],we=Re[1]);let Ue=we-Me;for(let Je=0;Je<1.01;Je+=.1){let tt=mt(Pe.valueToHex(Me+Ue*Je)),Ye="rgba("+tt.r+","+tt.g+","+tt.b+","+tt.a+")";ye.addColorStop(Je,Ye)}this.context.fillStyle=ye}this.context.lineWidth=P,h&&(function(ye,Pe,Re,Me,we,Ue,Je){ye.beginPath(),ye.moveTo(Pe+Ue,Re),ye.lineTo(Pe+Me-Ue,Re),ye.quadraticCurveTo(Pe+Me,Re,Pe+Me,Re+Ue),ye.lineTo(Pe+Me,Re+we-Ue),ye.quadraticCurveTo(Pe+Me,Re+we,Pe+Me-Ue,Re+we),ye.lineTo(Pe+Ue,Re+we),ye.quadraticCurveTo(Pe,Re+we,Pe,Re+we-Ue),ye.lineTo(Pe,Re+Ue),ye.quadraticCurveTo(Pe,Re,Pe+Ue,Re),ye.closePath(),ye.fill(),Je&&ye.stroke()})(this.context,P,P,G-2*P,Y-2*P,6,P>0),n.backgroundImage&&this.context.drawImage(te,0,0,G,Y),this.context.fillStyle="rgba("+_.r+","+_.g+","+_.b+","+_.a+")",this.context.fillText(this.text,P+M,T+P+M,H);var le=new u.Texture(this.canvas);le.needsUpdate=!0,this.sprite.material=new u.SpriteMaterial({map:le,useScreenCoordinates:a,alignment:U,depthTest:!$,screenOffset:n.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(z.x,z.y,z.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}class kt{static interpolateArray(n,a){function h(z,$,U){return z+($-z)*U}var f=[],T=(n.length-1)/(a-1);f[0]=n[0];for(var _=1;_<a-1;_++){var M=_*T,P=Math.floor(M),A=Math.ceil(M),D=M-P;f[_]=h(n[P],n[A],D)}return f[a-1]=n[n.length-1],f}constructor(n,a,h){this.hidden=!1,this.boundingSphere=new p.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,a=a||{};var f,T,_,M,P,A,D,z,$,U,V=Object.assign([],a.transferfn);this.subsamples=a.subsamples||5,V.forEach(function(G){G.value=parseFloat(G.value)}),V.sort(function(G,Y){return G.value-Y.value}),this.min=V[0].value,V.length==0&&V.push(V[0]),this.max=V[V.length-1].value;for(let G=0;G<V.length-1;G++)if(_=x.CC.color(V[G].color),M=x.CC.color(V[G+1].color),$=V[G].opacity,U=V[G+1].opacity,(f=Math.floor(256*(V[G].value-this.min)/(this.max-this.min)))!=(T=Math.floor(256*(V[G+1].value-this.min)/(this.max-this.min)))){P=kt.interpolateArray([255*_.r,255*M.r],T-f),A=kt.interpolateArray([255*_.g,255*M.g],T-f),D=kt.interpolateArray([255*_.b,255*M.b],T-f),z=kt.interpolateArray([255*$,255*U],T-f);for(let Y=0;Y<P.length;Y++)this.transferfunctionbuffer.push(P[Y]),this.transferfunctionbuffer.push(A[Y]),this.transferfunctionbuffer.push(D[Y]),this.transferfunctionbuffer.push(z[Y])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),n.matrix){let G=new d.Vector3(0,0,0),Y=new d.Vector3(n.size.x,n.size.y,n.size.z),te=new d.Vector3(1,1,1);G.applyMatrix4(n.matrix),Y.applyMatrix4(n.matrix),te.applyMatrix4(n.matrix).sub(G),this.extent=[[G.x,G.y,G.z],[Y.x,Y.y,Y.z]];for(let ye=1;ye<7;ye++)Y.x=1&ye?n.size.x:0,Y.y=2&ye?n.size.y:0,Y.z=4&ye?n.size.z:0,Y.applyMatrix4(n.matrix),this.extent[0][0]=Math.min(this.extent[0][0],Y.x),this.extent[0][1]=Math.min(this.extent[0][1],Y.y),this.extent[0][2]=Math.min(this.extent[0][2],Y.z),this.extent[1][0]=Math.max(this.extent[1][0],Y.x),this.extent[1][1]=Math.max(this.extent[1][1],Y.y),this.extent[1][2]=Math.max(this.extent[1][2],Y.z);let re=Y.x-G.x,de=Y.y-G.y,le=Y.z-G.z;this.maxdepth=Math.sqrt(re*re+de*de+le*le),this.minunit=Math.min(Math.min(te.x,te.y),te.z),this.texmatrix=new d.Matrix4().identity().scale({x:n.size.x,y:n.size.y,z:n.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(n.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new d.Matrix4().identity();let G=n.unit.x*n.size.x,Y=n.unit.y*n.size.y,te=n.unit.z*n.size.z;this.texmatrix.makeTranslation(-n.origin.x/G,-n.origin.y/Y,-n.origin.z/te),this.texmatrix.scale({x:1/G,y:1/Y,z:1/te}),this.minunit=Math.min(Math.min(n.unit.x,n.unit.y),n.unit.z),this.extent=[[n.origin.x,n.origin.y,n.origin.z],[n.origin.x+G,n.origin.y+Y,n.origin.z+te]],this.maxdepth=Math.sqrt(G*G+Y*Y+te*te)}var H=new ze({});if(H.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=H.finalize(),this.boundingSphere.center=new d.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,a.coords===void 0&&a.selection!==void 0&&(h?a.coords=h.selectedAtoms(a.selection):console.log("Need to provide viewer to volumetric renderer if selection specified.")),a.coords!==void 0&&a.seldist!==void 0){let G=new Uint8Array(n.data.length),Y=a.seldist,te=Y*Y;for(let re=0,de=a.coords.length;re<de;re++){let le=a.coords[re],ye=le.x-Y,Pe=le.y-Y,Re=le.z-Y,Me=le.x+Y,we=le.y+Y,Ue=le.z+Y;if(n.getIndex(ye,Pe,Re)>=0||n.getIndex(Me,we,Ue)>=0)for(let Je=ye;Je<Me;Je+=this.minunit)for(let tt=Pe;tt<we;tt+=this.minunit)for(let Ye=Re;Ye<Ue;Ye+=this.minunit){let ut=n.getIndex(Je,tt,Ye);ut>=0&&!G[ut]&&(Je-le.x)*(Je-le.x)+(tt-le.y)*(tt-le.y)+(Ye-le.z)*(Ye-le.z)<te&&(G[ut]=1)}}for(let re=0,de=n.data.length;re<de;re++)G[re]==0&&(n.data[re]=1/0)}this.data=n}globj(n){if(this.renderedShapeObj&&(n.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new u.Object3D;var a,h=new u.Texture(this.data,!0),f=new u.Texture(this.transferfunctionbuffer,!1);h.needsUpdate=!0,f.needsUpdate=!0,f.flipY=!1,a=new u.VolumetricMaterial({transferfn:f,transfermin:this.min,transfermax:this.max,map:h,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var T=new u.Mesh(this.geo,a);this.shapeObj.add(T),this.renderedShapeObj=this.shapeObj.clone(),n.add(this.renderedShapeObj)}}removegl(n){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),n.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}const Lt=16;class gr extends Array{constructor(n){super(...n)}getSymmetries(){if(this.length==0)return[];let n=this[0];return n.symmetries===void 0&&this.setSymmetries([new d.Matrix4]),n.symmetries}setSymmetries(n){n===void 0&&(n=[new d.Matrix4]);for(let a of this)a.symmetries=n,a.finished=!1}}class Yt{getWidth(){let n=this.container,a=n.offsetWidth;if(a==0&&n.style.display==="none"){let h=n.style.position,f=n.style.visibility;n.style.display="block",n.style.visibility="hidden",n.style.position="absolute",a=n.offsetWidth,n.style.display="none",n.style.visibility=f,n.style.position=h}return a}getHeight(){let n=this.container,a=n.offsetHeight;if(a==0&&n.style.display==="none"){let h=n.style.position,f=n.style.visibility;n.style.display="block",n.style.visibility="hidden",n.style.position="absolute",a=n.offsetHeight,n.style.display="none",n.style.visibility=f,n.style.position=h}return a}setupRenderer(){let n=Object.assign(Object.assign({},this.config),{preserveDrawingBuffer:!0,premultipliedAlpha:!1,containerWidth:this.WIDTH,containerHeight:this.HEIGHT});this.renderer=new u.Renderer(n),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.renderer.domElement.style.padding="0",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.renderer.domElement.style.zIndex="0"}initializeScene(){this.scene=new u.Scene,this.scene.fog=new u.Fog(this.bgColor,100,200),this.modelGroup=new u.Object3D,this.rotationGroup=new u.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new d.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var n=new u.Light(16777215);n.position=new d.Vector3(.2,.2,1).normalize(),n.intensity=1,this.scene.add(n)}_handleLostContext(n){const a=function(h){const f=h.getBoundingClientRect();return!(f.right<0||f.bottom<0||f.top>(window.innerHeight||document.documentElement.clientHeight)||f.left>(window.innerWidth||document.documentElement.clientWidth))};if(a(this.container)){let h=0;for(let f of document.getElementsByTagName("canvas"))if(a(f)&&f._3dmol_viewer!=null&&(f._3dmol_viewer.resize(),h+=1,h>=Lt))break}}initContainer(n){this.container=n,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.glDOM._3dmol_viewer=this,this.glDOM.addEventListener("webglcontextlost",this._handleLostContext.bind(this)),this.nomouse||(this.glDOM.addEventListener("mousedown",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("touchstart",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("wheel",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener("mousemove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("touchmove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("contextmenu",this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var n=0;for(let h in this.surfaces)if(this.surfaces.hasOwnProperty(h)){var a=parseInt(h);isNaN(a)||a>n&&(n=a)}return n+1}setSlabAndFog(){let n=this.camera.position.z-this.rotationGroup.position.z;n<1&&(n=1),this.camera.near=n+this.slabNear,!this.camera.ortho&&this.camera.near<1&&(this.camera.near=1),this.camera.far=n+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=n*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.near+this.fogEnd*(this.camera.far-this.camera.near),this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(n){if(this.renderer.setViewport(),this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!n&&this.linkedViewers.length>0))for(var a=this._viewer.getView(),h=0;h<this.linkedViewers.length;h++)this.linkedViewers[h].setView(a,!0)}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledObjects.splice(0,this.contextMenuEnabledObjects.length);for(let n=0,a=this.models.length;n<a;n++){let h=this.models[n];if(h){let f=h.selectedAtoms({clickable:!0}),T=h.selectedAtoms({hoverable:!0}),_=h.selectedAtoms({contextMenuEnabled:!0});for(let M=0;M<T.length;M++)this.hoverables.push(T[M]);for(let M=0;M<f.length;M++)this.clickables.push(f[M]);for(let M=0;M<_.length;M++)this.contextMenuEnabledObjects.push(_[M])}}for(let n=0,a=this.shapes.length;n<a;n++){let h=this.shapes[n];h&&h.clickable&&this.clickables.push(h),h&&h.hoverable&&this.hoverables.push(h),h&&h.contextMenuEnabled&&this.contextMenuEnabledObjects.push(h)}}handleClickSelection(n,a,h){let f=this.targetedObjects(n,a,this.clickables);if(f.length){var T=f[0].clickable;T.callback!==void 0&&(typeof T.callback!="function"&&(T.callback=(0,v.makeFunction)(T.callback)),typeof T.callback=="function")&&(this.mouseButton===3&&this.contextMenuEnabledObjects.includes(T)&&this.userContextMenuHandler||T.callback(T,this._viewer,h,this.container,f))}}canvasOffset(){let n=this.glDOM,a=n.getBoundingClientRect(),h=n.ownerDocument,f=h.documentElement,T=h.defaultView;return{top:a.top+T.pageYOffset-f.clientTop,left:a.left+T.pageXOffset-f.clientLeft}}setHover(n,a,h){this.current_hover!=n&&(this.current_hover&&(typeof this.current_hover.unhover_callback!="function"&&(this.current_hover.unhover_callback=(0,v.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,a,this.container,h)),this.current_hover=n,n&&n.hover_callback!==void 0&&(typeof n.hover_callback!="function"&&(n.hover_callback=(0,v.makeFunction)(n.hover_callback)),typeof n.hover_callback=="function"&&n.hover_callback(n,this._viewer,a,this.container,h)))}handleHoverSelection(n,a,h){if(this.hoverables.length==0)return;let f=this.targetedObjects(n,a,this.hoverables);if(f.length){var T=f[0].clickable;this.setHover(T,h,f),this.current_hover=T}else this.setHover(null)}handleHoverContinue(n,a){let h=this.targetedObjects(n,a,this.hoverables);h.length!=0&&h[0]!==void 0||this.setHover(null),h[0]!==void 0&&h[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(n,{allowTolerance:a=n.targetTouches,tolerance:h=5}={}){const f=this.getX(n),T=this.getY(n);if(a){const _=Math.abs(f-this.mouseStartX),M=Math.abs(T-this.mouseStartY);return _<=h&&M<=h}return f===this.mouseStartX&&T===this.mouseStartY}calcTouchDistance(n){var a=n.targetTouches[0].pageX-n.targetTouches[1].pageX,h=n.targetTouches[0].pageY-n.targetTouches[1].pageY;return Math.hypot(a,h)}getX(n){var a=n.pageX;return a==null&&(a=n.pageX),n.targetTouches&&n.targetTouches[0]?a=n.targetTouches[0].pageX:n.changedTouches&&n.changedTouches[0]&&(a=n.changedTouches[0].pageX),a}getY(n){var a=n.pageY;return a==null&&(a=n.pageY),n.targetTouches&&n.targetTouches[0]?a=n.targetTouches[0].pageY:n.changedTouches&&n.changedTouches[0]&&(a=n.changedTouches[0].pageY),a}isInViewer(n,a){if(this.viewers!=null){var h=this.WIDTH/this.cols,f=this.HEIGHT/this.rows,T=this.canvasOffset(),_=n-T.left,M=a-T.top,P=this.rows-Math.floor(M/f)-1,A=Math.floor(_/h);if(P!=this.row||A!=this.col)return!1}return!0}adjustZoomToLimits(n){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let a=this.CAMERA_Z-this.config.lowerZoomLimit;n>a&&(n=a)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let a=this.CAMERA_Z-this.config.upperZoomLimit;n<a&&(n=a)}return n>this.CAMERA_Z-1&&(n=this.CAMERA_Z-1),n}static slerp(n,a,h){if(h==1)return a.clone();if(h==0)return n.clone();let f=n.x*a.x+n.y*a.y+n.z*a.z+n.w*a.w;if(f>.9995){let D=new d.Quaternion(n.x+h*(a.x-n.x),n.y+h*(a.y-n.y),n.z+h*(a.z-n.z),n.w+h*(a.w-n.w));return D.normalize(),D}f<0&&(a=a.clone().multiplyScalar(-1),f=-f),f>1?f=1:f<-1&&(f=-1);var T=Math.acos(f)*h,_=a.clone();_.sub(n.clone().multiplyScalar(f)),_.normalize();var M=Math.cos(T),P=Math.sin(T),A=new d.Quaternion(n.x*M+_.x*P,n.y*M+_.y*P,n.z*M+_.z*P,n.w*M+_.w*P);return A.normalize(),A}constructor(n,a={}){if(this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledObjects=[],this.current_hover=null,this.hoverDuration=500,this.longTouchDuration=1e3,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.fogEnd=1,this.slabNear=-50,this.slabFar=50,this.cq=new d.Quaternion(0,0,0,1),this.dq=new d.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=a,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=x.elementColors.defaultColors),this.nomouse=!!this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||"#ffffff",this.config.backgroundColor!==void 0&&(this.bgColor=x.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,this.config.camerax!==void 0&&(this.camerax=typeof this.config.camerax=="string"?parseFloat(this.config.camerax):this.config.camerax),this._viewer=this,this.container=n,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row==null?0:this.config.row,this.col=this.config.col==null?0:this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new u.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new d.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new d.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new u.Raycaster(new d.Vector3(0,0,0),new d.Vector3(0,0,0)),this.projector=new u.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=x.CC.color(this.bgColor),document.body.addEventListener("mouseup",this._handleMouseUp.bind(this)),document.body.addEventListener("touchend",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener("resize",this.resize.bind(this)),window.ResizeObserver!==void 0&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container)),window.IntersectionObserver!==void 0){let h=(f,T)=>{f.forEach(_=>{_.isIntersecting&&this.resize()})};this.intwatcher=new window.IntersectionObserver(h),this.intwatcher.observe(this.container)}try{typeof this.callback=="function"&&this.callback(this)}catch(h){console.log("error with glviewer callback: "+h)}}targetedObjects(n,a,h){var f={x:n,y:a,z:-1};return Array.isArray(h)||(h=this.selectedAtoms(h)),h.length==0?[]:(this.raycaster.setFromCamera(f,this.camera),this.raycaster.intersectObjects(this.modelGroup,h))}modelToScreen(n){let a=!1;Array.isArray(n)||(n=[n],a=!0);let h=this.renderer.getXRatio(),f=this.renderer.getYRatio(),T=this.col,_=this.row,M=T*(this.WIDTH/h),P=(f-_-1)*(this.HEIGHT/f),A=[],D=this.canvasOffset();return n.forEach(z=>{let $=new d.Vector3(z.x,z.y,z.z);$.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector($,this.camera);let U=this.WIDTH/h*($.x+1)/2+D.left+M,V=-this.HEIGHT/f*($.y-1)/2+D.top+P;A.push({x:U,y:V})}),a&&(A=A[0]),A}screenOffsetToModel(n,a,h){var f=n/this.WIDTH,T=a/this.HEIGHT,_=h===void 0?this.rotationGroup.position.z:h,M=this.rotationGroup.quaternion,P=new d.Vector3(0,0,_);return this.projector.projectVector(P,this.camera),P.x+=2*f,P.y-=2*T,this.projector.unprojectVector(P,this.camera),P.z=0,P.applyQuaternion(M),P}screenToModelDistance(n,a){let h=this.canvasOffset(),f=new d.Vector3(a.x,a.y,a.z);f.applyMatrix4(this.modelGroup.matrixWorld);let T=f.clone();this.projector.projectVector(f,this.camera);let _=new d.Vector3(2*(n.x-h.left)/this.WIDTH-1,2*(n.y-h.top)/-this.HEIGHT+1,f.z);return this.projector.unprojectVector(_,this.camera),_.distanceTo(T)}setViewChangeCallback(n){typeof n!="function"&&n!=null||(this.viewChangeCallback=n)}setStateChangeCallback(n){typeof n!="function"&&n!=null||(this.stateChangeCallback=n)}getConfig(){return this.config}setConfig(n){this.config=n,n.ambientOcclusion&&this.renderer.enableAmbientOcclusion(n.ambientOcclusion)}getInternalState(){var n={models:[],surfaces:[],shapes:[],labels:[]};for(let a=0;a<this.models.length;a++)this.models[a]&&(n.models[a]=this.models[a].getInternalState());return n}setInternalState(n){this.clear();var a=n.models;for(let h=0;h<a.length;h++)a[h]&&(this.models[h]=new ur(h,void 0,this),this.models[h].setInternalState(a[h]));this.render()}setZoomLimits(n,a){n!==void 0&&(this.config.lowerZoomLimit=n),a&&(this.config.upperZoomLimit=a),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(n){n.fov!==void 0&&(this.fov=n.fov,this.camera.fov=this.fov),n.z!==void 0&&(this.CAMERA_Z=n.z,this.camera.z=this.CAMERA_Z),n.orthographic!==void 0&&(this.camera.ortho=n.orthographic),this.setSlabAndFog()}_handleMouseDown(n){if(n.preventDefault(),!this.scene)return;var a=this.getX(n),h=this.getY(n);if(a===void 0)return;this.isDragging=!0,this.mouseButton=n.which,this.mouseStartX=a,this.mouseStartY=h,this.touchHold=!0,this.touchDistanceStart=0,n.targetTouches&&n.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(n)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let f=this;n.targetTouches&&n.targetTouches.length===1&&(this.longTouchTimeout=setTimeout(function(){if(f.touchHold==1){f.glDOM=f.renderer.domElement;const T=n.targetTouches[0],_=new PointerEvent("contextmenu",Object.assign(Object.assign({},n),{pageX:T.pageX,pageY:T.pageY,screenX:T.screenX,screenY:T.screenY,clientX:T.clientX,clientY:T.clientY}));f.glDOM.dispatchEvent(_)}},this.longTouchDuration))}_handleMouseUp(n){if(this.touchHold=!1,this.isDragging&&this.scene){var a=this.getX(n),h=this.getY(n);if(this.closeEnoughForClick(n)&&this.isInViewer(a,h)){let f=this.mouseXY(a,h);this.handleClickSelection(f.x,f.y,n)}}this.isDragging=!1}_handleMouseScroll(n){if(n.preventDefault(),this.scene){var a=this.getX(n),h=this.getY(n);if(a!==void 0&&(this.control_all||this.isInViewer(a,h))){var f=.85*(this.CAMERA_Z-this.rotationGroup.position.z),T=1;if(n.ctrlKey&&(T=-1),n.detail)this.rotationGroup.position.z+=T*f*n.detail/10;else if(n.wheelDelta){let _=600*n.wheelDelta/(n.wheelDelta+600);this.rotationGroup.position.z-=T*f*_/400}this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL("image/png")}apngURI(n){let a=this;return n=n||1,new Promise(function(h){let f=0,T=a.viewChangeCallback,_=[],M=[],P=Date.now();a.viewChangeCallback=function(){M.push(Date.now()-P),P=Date.now(),_.push(new Promise(A=>{a.getCanvas().toBlob(function(D){D.arrayBuffer().then(A)},"image/png")})),f+=1,f==n&&(a.viewChangeCallback=T,Promise.all(_).then(A=>{let D=[];for(let G=0;G<A.length;G++){let Y=(0,y.decode)(A[G]);D.push((0,y.toRGBA8)(Y)[0])}let z=a.getCanvas().width,$=a.getCanvas().height,U=(0,y.encode)(D,z,$,0,M),V=new Blob([U],{type:"image/png"}),H=new FileReader;H.onload=function(G){h(G.target.result)},H.readAsDataURL(V)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(n){this.hoverDuration=n}mouseXY(n,a){let h=this.canvasOffset(),f=this.renderer.getXRatio(),T=this.renderer.getYRatio(),_=this.col,M=this.row,P=_*(this.WIDTH/f),A=(T-M-1)*(this.HEIGHT/T);return{x:(n-h.left-P)/(this.WIDTH/f)*2-1,y:-(a-h.top-A)/(this.HEIGHT/T)*2+1}}_handleMouseMove(n){clearTimeout(this.hoverTimeout),n.preventDefault();let a=this.getX(n),h=this.getY(n);if(a===void 0)return;let f=this.renderer.getXRatio(),T=this.renderer.getYRatio(),_=this.mouseXY(a,h),M=this;this.current_hover!==null&&this.handleHoverContinue(_.x,_.y);var P=0;if((this.control_all||this.isInViewer(a,h))&&this.scene&&(this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){M.handleHoverSelection(_.x,_.y,n)},this.hoverDuration)),this.isDragging)){n.targetTouches&&(n.targetTouches.length>1||n.targetTouches.length===1&&!this.closeEnoughForClick(n))&&clearTimeout(this.longTouchTimeout);var A=(a-this.mouseStartX)/this.WIDTH,D=(h-this.mouseStartY)/this.HEIGHT;this.touchDistanceStart!=0&&n.targetTouches&&n.targetTouches.length==2?(P=2,D=2*(this.calcTouchDistance(n)-this.touchDistanceStart)/(this.WIDTH+this.HEIGHT)):n.targetTouches&&n.targetTouches.length==3&&(P=1),A*=f,D*=T;var z,$=Math.hypot(A,D);if(P==3||this.mouseButton==3&&n.ctrlKey)this.slabNear=this.cslabNear+100*A,this.slabFar=this.cslabFar-100*D;else if(P==2||this.mouseButton==3||n.shiftKey)(z=.85*(this.CAMERA_Z-this.rotationGroup.position.z))<80&&(z=80),this.rotationGroup.position.z=this.cz+D*z,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(P==1||this.mouseButton==2||n.ctrlKey){var U=this.screenOffsetToModel(f*(a-this.mouseStartX),T*(h-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,U)}else if((P===0||this.mouseButton==1)&&$!==0){var V=Math.sin($*Math.PI)/$;this.dq.x=Math.cos($*Math.PI),this.dq.y=0,this.dq.z=V*A,this.dq.w=-V*D,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}_handleContextMenu(n){if(n.preventDefault(),this.closeEnoughForClick(n)){var a=this.mouseStartX,h=this.mouseStartY,f=this.canvasOffset();let _=this.mouseXY(a,h),M=_.x,P=_.y,A=this.targetedObjects(M,P,this.contextMenuEnabledObjects);var T=null;A.length&&(T=A[0].clickable),f=this.canvasOffset(),a=this.mouseStartX-f.left,h=this.mouseStartY-f.top,this.userContextMenuHandler&&(this.userContextMenuHandler(T,a,h,A,n),this.isDragging=!1)}}setContainer(n){let a=(0,v.getElement)(n)||this.container;return this.initContainer(a),this}setBackgroundColor(n,a){(a===void 0||a<0||a>1)&&(a=1);var h=x.CC.color(n);return this.scene.fog.color=h,this.bgColor=h.getHex(),this.renderer.setClearColorHex(h.getHex(),a),this.show(),this}setProjection(n){this.camera.ortho=n==="orthographic",this.setSlabAndFog()}setViewStyle(n){if((n=n||{}).style=n.style||"",n.style.includes("outline")?this.renderer.enableOutline(n):this.renderer.disableOutline(),n.style.includes("ambientOcclusion")){var a={};n.strength&&(a.strength=n.strength),n.radius&&(a.radius=n.radius),this.renderer.enableAmbientOcclusion(a)}else this.renderer.disableAmbientOcclusion();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(n){return this.WIDTH=n||this.WIDTH,this.updateSize(),this}setHeight(n){return this.HEIGHT=n||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let n=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0){let a=!1,h=this.container.querySelector("canvas");h&&h!=this.renderer.getCanvas()?this.config.canvas=h:(h.remove(),this.config&&this.config.canvas!=null&&(delete this.config.canvas,a=!0)),this.setupRenderer(),this.initContainer(this.container),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),n=!0,a&&(this.config.canvas=this.renderer.getCanvas())}if(this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),n){let a=this.renderer.supportedExtensions();if(a.regen=!0,this.viewers)for(let h=0,f=this.viewers.length;h<f;h++)for(let T=0,_=this.viewers[h].length;T<_;T++)this.viewers[h][T].render(null,a);this._viewer.render(null,a)}else this.WIDTH>0&&this.HEIGHT>0&&this.show();return this}getModel(n){return n===void 0?this.models.length==0?null:this.models[this.models.length-1]:n instanceof ur?n:n in this.models?this.models[n]:this.models.length==0?null:this.models[this.models.length-1]}spin(n,a=1,h=!1){if(clearInterval(this.spinInterval),n===void 0&&(n="y"),typeof n=="boolean"){if(!n)return;n="y"}Array.isArray(n)&&(n={x:n[0],y:n[1],z:n[2]});var f=this;this.spinInterval=setInterval(function(){!f.getCanvas().isConnected&&f.renderer.isLost()&&clearInterval(f.spinInterval),(!h||f.container.checkVisibility&&f.container.checkVisibility())&&f.rotate(1*a,n)},25)}animateMotion(n,a,h,f,T,_){var M=Math.ceil(n/20);M<1&&(M=1),this.incAnim();var P={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(a){let z=new Array(M);for(let H=0;H<M;H++){let G=(H+1)/M,Y={mpos:P.mpos,rz:P.rz,rot:P.rot};Y.mpos=h.clone().sub(P.mpos).multiplyScalar(G).add(P.mpos),Y.rz=P.rz+G*(f-P.rz),Y.rot=Yt.slerp(P.rot,T,G),Y.cam=_.clone().sub(P.cam).multiplyScalar(G).add(P.cam),z[H]=Y}let $=0,U=this,V=function(){var H=z[$];$+=1,U.modelGroup.position=H.mpos,U.rotationGroup.position.z=H.rz,U.rotationGroup.quaternion=H.rot,U.camera.lookAt(H.cam),$<z.length?setTimeout(V,20):U.decAnim(),U.show()};setTimeout(V,20)}else{var A={};let z=1/M;if(h&&(A.mpos=h.clone().sub(P.mpos).multiplyScalar(z)),f!==void 0&&f!=null&&(A.rz=z*(f-P.rz)),T){var D=Yt.slerp(P.rot,T,z);A.rot=P.rot.clone().inverse().multiply(D)}_&&(A.cam=_.clone().sub(P.cam).multiplyScalar(z));let $=0,U=this,V=function(){$+=1,A.mpos&&U.modelGroup.position.add(A.mpos),A.rz&&(U.rotationGroup.position.z+=A.rz),A.rot&&U.rotationGroup.quaternion.multiply(A.rot),A.cam&&(U.lookingAt.add(A.cam),U.camera.lookAt(U.lookingAt)),$<M?setTimeout(V,20):U.decAnim(),U.show()};setTimeout(V,20)}}rotate(n,a="y",h=0,f=!1){if(a=="x"?a={x:1,y:0,z:0}:a=="y"?a={x:0,y:1,z:0}:a=="z"&&(a={x:0,y:0,z:1}),a=="vx"?a={vx:1,vy:0,vz:0}:a=="vy"?a={vx:0,vy:1,vz:0}:a=="vz"&&(a={vx:0,vy:0,vz:1}),a.vx!==void 0){var T=new d.Vector3(a.vx,a.vy,a.vz);T.applyQuaternion(this.rotationGroup.quaternion),a={x:T.x,y:T.y,z:T.z}}var _=(function(P){var A,D,z,$=Math.sin(P/2),U=Math.cos(P/2);return A=a.x*$,D=a.y*$,z=a.z*$,new d.Quaternion(A,D,z,U).normalize()})(Math.PI*n/180);if(h){var M=new d.Quaternion().copy(this.rotationGroup.quaternion).multiply(_);this.animateMotion(h,f,this.modelGroup.position,this.rotationGroup.position.z,M,this.lookingAt)}else this.rotationGroup.quaternion.multiply(_),this.show();return this}surfacesFinished(){for(var n in this.surfaces)if(!this.surfaces[n][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var n=this.modelGroup.position,a=this.rotationGroup.quaternion;return[n.x,n.y,n.z,this.rotationGroup.position.z,a.x,a.y,a.z,a.w]}setView(n,a){return n!==void 0&&(n instanceof Array||n.length!==8)&&this.modelGroup&&this.rotationGroup?(this.modelGroup.position.x=n[0],this.modelGroup.position.y=n[1],this.modelGroup.position.z=n[2],this.rotationGroup.position.z=n[3],this.rotationGroup.quaternion.x=n[4],this.rotationGroup.quaternion.y=n[5],this.rotationGroup.quaternion.z=n[6],this.rotationGroup.quaternion.w=n[7],n[8]!==void 0&&(this.rotationGroup.position.x=n[8],this.rotationGroup.position.y=n[9]),this.show(a),this):this}render(n,a){this.renderer.setViewport(),this.updateClickables();var h,f,T=this.getView();for(this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState()),a||(a=this.renderer.supportedExtensions()),h=0;h<this.models.length;h++)this.models[h]&&this.models[h].globj(this.modelGroup,a);for(h=0;h<this.shapes.length;h++)this.shapes[h]&&(this.shapes[h].frame===void 0||this.viewer_frame<0||this.shapes[h].frame<0||this.shapes[h].frame==this.viewer_frame?this.shapes[h].globj(this.modelGroup,a):this.shapes[h].removegl(this.modelGroup));for(h=0;h<this.labels.length;h++)a.regen&&(this.labels[h].dispose(),this.modelGroup.remove(this.labels[h].sprite),this.labels[h].setContext(),this.modelGroup.add(this.labels[h].sprite)),this.labels[h]&&this.labels[h].frame!==void 0&&this.labels[h].frame>=0&&(this.modelGroup.remove(this.labels[h].sprite),(this.viewer_frame<0||this.labels[h].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[h].sprite));for(h in this.surfaces)if(this.surfaces.hasOwnProperty(h)){var _=this.surfaces[h];for(f=0;f<_.length;f++)if(_.hasOwnProperty(f)){var M=_[f].geo;if(!_[f].finished||a.regen){M.verticesNeedUpdate=!0,M.elementsNeedUpdate=!0,M.normalsNeedUpdate=!0,M.colorsNeedUpdate=!0,M.buffersNeedUpdate=!0,_[f].mat.needsUpdate=!0,_[f].done&&(_[f].finished=!0),_[f].lastGL&&this.modelGroup.remove(_[f].lastGL);var P=null;if(_[f].mat instanceof u.LineBasicMaterial?P=new u.Line(M,_[f].mat):("wireframe"in _.style&&_.style.wireframe&&M.setUpWireframe(),P=new u.Mesh(M,_[f].mat)),_[f].mat.transparent&&_[f].mat.opacity==0?P.visible=!1:P.visible=!0,_[f].symmetries.length>1||_[f].symmetries.length==1&&!_[f].symmetries[0].isIdentity()){var A,D=new u.Object3D;for(A=0;A<_[f].symmetries.length;A++){var z=P.clone();z.matrix=_[f].symmetries[A],z.matrixAutoUpdate=!1,D.add(z)}_[f].lastGL=D,this.modelGroup.add(D)}else _[f].lastGL=P,this.modelGroup.add(P)}}}return this.setView(T),typeof n=="function"&&n(this),this}getModelList(n){let a=[];if(n===void 0||n.model===void 0)for(let f=0;f<this.models.length;f++)this.models[f]&&a.push(this.models[f]);else{let f=n.model;Array.isArray(f)||(f=[f]);for(let T=0;T<f.length;T++)if(typeof f[T]=="number"){var h=f[T];h<0&&(h+=this.models.length),a.push(this.models[h])}else a.push(f[T])}return a}getAtomsFromSel(n){var a=[];n===void 0&&(n={});var h=this.getModelList(n);for(let f=0;f<h.length;f++)a=a.concat(h[f].selectedAtoms(n));return a}atomIsSelected(n,a){a===void 0&&(a={});for(var h=this.getModelList(a),f=0;f<h.length;f++)if(h[f].atomIsSelected(n,a))return!0;return!1}selectedAtoms(n){return this.getAtomsFromSel(n)}getUniqueValues(n,a){a===void 0&&(a={});var h=this.getAtomsFromSel(a),f={};for(var T in h)h[T].hasOwnProperty(n)&&(f[h[T][n]]=!0);return Object.keys(f)}pdbData(n){for(var a=this.getAtomsFromSel(n),h="",f=0,T=a.length;f<T;++f)h+=a[f].pdbline+`
`;return h}zoom(n=2,a=0,h=!1){var f=(this.CAMERA_Z-this.rotationGroup.position.z)/n,T=this.CAMERA_Z-f;return a>0?this.animateMotion(a,h,this.modelGroup.position,this.adjustZoomToLimits(T),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(T),this.show()),this}translate(n,a,h=0,f=!1){var T=n/this.WIDTH,_=a/this.HEIGHT,M=new d.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(M,this.camera),M.x-=T,M.y-=_,this.projector.unprojectVector(M,this.camera),M.z=0;var P=this.lookingAt.clone().add(M);return h>0?this.animateMotion(h,f,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,P):(this.lookingAt=P,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(n,a,h=0,f=!1){var T=this.screenOffsetToModel(n,a),_=this.modelGroup.position.clone().add(T);return h>0?this.animateMotion(h,f,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=_,this.show()),this}fitSlab(n){n=n||{};var a=this.getAtomsFromSel(n),h=(0,v.getExtent)(a),f=h[1][0]-h[0][0],T=h[1][1]-h[0][1],_=h[1][2]-h[0][2],M=Math.hypot(f,T,_);return M<5&&(M=5),this.slabNear=-M/1.9,this.slabFar=M/2,this}center(n={},a=0,h=!1){var f,T,_=this.getAtomsFromSel(n),M=(0,v.getExtent)(_);(0,v.isEmptyObject)(n)?(this.shapes.forEach(Y=>{if(Y&&Y.boundingSphere&&Y.boundingSphere.center){var te=Y.boundingSphere.center,re=Y.boundingSphere.radius;re>0?(_.push(new d.Vector3(te.x+re,te.y,te.z)),_.push(new d.Vector3(te.x-re,te.y,te.z)),_.push(new d.Vector3(te.x,te.y+re,te.z)),_.push(new d.Vector3(te.x,te.y-re,te.z)),_.push(new d.Vector3(te.x,te.y,te.z+re)),_.push(new d.Vector3(te.x,te.y,te.z-re))):_.push(te)}}),M=(0,v.getExtent)(_),f=_,T=M):(f=this.getAtomsFromSel({}),T=(0,v.getExtent)(f));var P=new d.Vector3(M[2][0],M[2][1],M[2][2]),A=T[1][0]-T[0][0],D=T[1][1]-T[0][1],z=T[1][2]-T[0][2],$=Math.hypot(A,D,z);$<5&&($=5),this.slabNear=-$/1.9,this.slabFar=$/2,A=M[1][0]-M[0][0],D=M[1][1]-M[0][1],z=M[1][2]-M[0][2],($=Math.hypot(A,D,z))<5&&($=5);for(var U=25,V=0;V<_.length;V++)if(_[V]){var H=P.distanceToSquared(_[V]);H>U&&(U=H)}$=2*Math.sqrt(U);var G=P.clone().multiplyScalar(-1);return a>0?this.animateMotion(a,h,G,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=G,this.show()),this}zoomTo(n={},a=0,h=!1){let f=this.getAtomsFromSel(n),T=(0,v.getExtent)(f),_=T;if((0,v.isEmptyObject)(n)){let te=f&&f.length;if(this.shapes.forEach(re=>{if(re&&re.boundingSphere){if(re.boundingSphere.box){let ye=re.boundingSphere.box;f.push(new d.Vector3(ye.min.x,ye.min.y,ye.min.z)),f.push(new d.Vector3(ye.max.x,ye.max.y,ye.max.z))}else if(re.boundingSphere.center){var de=re.boundingSphere.center,le=re.boundingSphere.radius;le>0?(f.push(new d.Vector3(de.x+le,de.y,de.z)),f.push(new d.Vector3(de.x-le,de.y,de.z)),f.push(new d.Vector3(de.x,de.y+le,de.z)),f.push(new d.Vector3(de.x,de.y-le,de.z)),f.push(new d.Vector3(de.x,de.y,de.z+le)),f.push(new d.Vector3(de.x,de.y,de.z-le))):f.push(de)}}}),_=(0,v.getExtent)(f),!te)for(let re=0;re<3;re++)T[2][re]=(_[0][re]+_[1][re])/2}else{let te=this.getAtomsFromSel({});_=(0,v.getExtent)(te)}var M=new d.Vector3(T[2][0],T[2][1],T[2][2]),P=_[1][0]-_[0][0],A=_[1][1]-_[0][1],D=_[1][2]-_[0][2],z=Math.hypot(P,A,D);z<5&&(z=5),this.slabNear=-z/1.9,this.slabFar=z/2,Object.keys(n).length===0&&(this.slabNear=Math.min(2*-z,-50),this.slabFar=Math.max(2*z,50));var $=this.config.minimumZoomToDistance||5;P=T[1][0]-T[0][0],A=T[1][1]-T[0][1],D=T[1][2]-T[0][2],(z=Math.hypot(P,A,D))<$&&(z=$);for(var U=$*$,V=0;V<f.length;V++)if(f[V]){var H=M.distanceToSquared(f[V]);H>U&&(U=H)}z=2*Math.sqrt(U);var G=M.clone().multiplyScalar(-1),Y=-(.5*z/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return Y=this.adjustZoomToLimits(Y),a>0?this.animateMotion(a,h,G,Y,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=G,this.rotationGroup.position.z=Y,this.show()),this}setSlab(n,a){this.slabNear=n,this.slabFar=a}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(n,a={},h,f=!1){if(h){var T=(0,v.getExtent)(this.getAtomsFromSel(h));a.position={x:T[2][0],y:T[2][1],z:T[2][2]}}var _=new Rt(n,a);return _.setContext(),this.modelGroup.add(_.sprite),this.labels.push(_),f||this.show(),_}addResLabels(n,a,h=!1){let f=this.labels.length;return this.applyToModels("addResLabels",n,a,h),this.show(),this.labels.slice(f)}addPropertyLabels(n,a,h){return this.applyToModels("addPropertyLabels",n,a,h),this.show(),this}removeLabel(n){for(var a=0;a<this.labels.length;a++)if(this.labels[a]==n){this.labels.splice(a,1),n.dispose(),this.modelGroup.remove(n.sprite);break}return this.show(),this}removeAllLabels(){for(var n=0;n<this.labels.length;n++)this.labels[n]&&this.labels[n].sprite&&this.modelGroup.remove(this.labels[n].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}hideAllLabels(){for(var n=0;n<this.labels.length;n++)this.labels[n]&&this.labels[n].hide();return this.show(),this}showAllLabels(){for(var n=0;n<this.labels.length;n++)this.labels[n]&&this.labels[n].show();return this.show(),this}setLabelStyle(n,a){return this.modelGroup.remove(n.sprite),n.dispose(),n.stylespec=a,n.setContext(),this.modelGroup.add(n.sprite),this.show(),n}setLabelText(n,a){return this.modelGroup.remove(n.sprite),n.dispose(),n.text=a,n.setContext(),this.modelGroup.add(n.sprite),this.show(),n}addShape(n){var a=new ze(n=n||{});return a.shapePosition=this.shapes.length,this.shapes.push(a),a}removeShape(n){if(!n)return this;for(n.removegl(this.modelGroup),delete this.shapes[n.shapePosition];this.shapes.length>0&&this.shapes[this.shapes.length-1]===void 0;)this.shapes.pop();return this}removeAllShapes(){for(var n=0;n<this.shapes.length;n++){var a=this.shapes[n];a&&a.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(n){if(n.hasOwnProperty("x")&&n.hasOwnProperty("y")&&n.hasOwnProperty("z"))return n;var a=this.getAtomsFromSel(n);if(a.length==0)return{x:0,y:0,z:0};var h=(0,v.getExtent)(a);return{x:h[0][0]+(h[1][0]-h[0][0])/2,y:h[0][1]+(h[1][1]-h[0][1])/2,z:h[0][2]+(h[1][2]-h[0][2])/2}}addSphere(n){(n=n||{}).center=this.getSelectionCenter(n.center);var a=new ze(n);return a.shapePosition=this.shapes.length,a.addSphere(n),this.shapes.push(a),a.finalize(),a}addBox(n={}){n.corner!=null&&(n.corner=this.getSelectionCenter(n.corner)),n.center!=null&&(n.center=this.getSelectionCenter(n.center));var a=new ze(n);return a.shapePosition=this.shapes.length,a.addBox(n),this.shapes.push(a),a.finalize(),a}addArrow(n={}){n.start=this.getSelectionCenter(n.start),n.end=this.getSelectionCenter(n.end);var a=new ze(n);return a.shapePosition=this.shapes.length,a.addArrow(n),this.shapes.push(a),a.finalize(),a}addCylinder(n={}){n.start=this.getSelectionCenter(n.start),n.end=this.getSelectionCenter(n.end);var a=new ze(n);return a.shapePosition=this.shapes.length,n.dashed?a.addDashedCylinder(n):a.addCylinder(n),this.shapes.push(a),a.finalize(),a}addCurve(n={}){var a=new ze(n);return a.shapePosition=this.shapes.length,a.addCurve(n),this.shapes.push(a),a.finalize(),a}addLine(n={}){n.start=this.getSelectionCenter(n.start),n.end=this.getSelectionCenter(n.end),n.wireframe=!0;var a=new ze(n);return a.shapePosition=this.shapes.length,n.dashed?a=this.addLineDashed(n,a):a.addLine(n),this.shapes.push(a),a.finalize(),a}addUnitCell(n,a){n=this.getModel(n),(a=a||{alabel:"a",blabel:"b",clabel:"c"}).box=a.box||{},a.astyle=a.astyle||{color:"red",radius:.1,midpos:-1},a.bstyle=a.bstyle||{color:"green",radius:.1,midpos:-1},a.cstyle=a.cstyle||{color:"blue",radius:.1,midpos:-1},a.alabelstyle=a.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1},a.blabelstyle=a.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1},a.clabelstyle=a.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1},n.unitCellObjects&&this.removeUnitCell(n),n.unitCellObjects={shapes:[],labels:[]};var h=n.getCrystData(),f=null;if(h){if(h.matrix)f=h.matrix;else{var T,_,M,P=h.a,A=h.b,D=h.c,z=h.alpha,$=h.beta,U=h.gamma;z=z*Math.PI/180,$=$*Math.PI/180,U=U*Math.PI/180,T=Math.cos($),_=(Math.cos(z)-Math.cos($)*Math.cos(U))/Math.sin(U),M=Math.sqrt(Math.max(0,1-T*T-_*_)),f=new d.Matrix3(P,A*Math.cos(U),D*T,0,A*Math.sin(U),D*_,0,0,D*M)}var V=[new d.Vector3(0,0,0),new d.Vector3(1,0,0),new d.Vector3(0,1,0),new d.Vector3(0,0,1),new d.Vector3(1,1,0),new d.Vector3(0,1,1),new d.Vector3(1,0,1),new d.Vector3(1,1,1)];if(h.matrix4)for(let G=0;G<V.length;G++)h.size&&V[G].multiplyVectors(V[G],h.size),V[G]=V[G].applyMatrix4(h.matrix4);else for(let G=0;G<V.length;G++)V[G]=V[G].applyMatrix3(f);if(a.box&&!a.box.hidden){a.box.wireframe=!0;var H=new ze(a.box);H.shapePosition=this.shapes.length,H.addLine({start:V[0],end:V[1]}),H.addLine({start:V[0],end:V[2]}),H.addLine({start:V[1],end:V[4]}),H.addLine({start:V[2],end:V[4]}),H.addLine({start:V[0],end:V[3]}),H.addLine({start:V[3],end:V[5]}),H.addLine({start:V[2],end:V[5]}),H.addLine({start:V[1],end:V[6]}),H.addLine({start:V[4],end:V[7]}),H.addLine({start:V[6],end:V[7]}),H.addLine({start:V[3],end:V[6]}),H.addLine({start:V[5],end:V[7]}),this.shapes.push(H),n.unitCellObjects.shapes.push(H),H.finalize()}if(!a.astyle.hidden){a.astyle.start=V[0],a.astyle.end=V[1];let G=this.addArrow(a.astyle);n.unitCellObjects.shapes.push(G)}if(!a.bstyle.hidden){a.bstyle.start=V[0],a.bstyle.end=V[2];let G=this.addArrow(a.bstyle);n.unitCellObjects.shapes.push(G)}if(!a.cstyle.hidden){a.cstyle.start=V[0],a.cstyle.end=V[3];let G=this.addArrow(a.cstyle);n.unitCellObjects.shapes.push(G)}if(a.alabel){a.alabelstyle.position=V[1];let G=this.addLabel(a.alabel,a.alabelstyle);n.unitCellObjects.labels.push(G)}if(a.blabel){a.blabelstyle.position=V[2];let G=this.addLabel(a.blabel,a.blabelstyle);n.unitCellObjects.labels.push(G)}if(a.clabel){a.clabelstyle.position=V[3];let G=this.addLabel(a.clabel,a.clabelstyle);n.unitCellObjects.labels.push(G)}}}removeUnitCell(n){if((n=this.getModel(n)).unitCellObjects){let a=this;n.unitCellObjects.shapes.forEach(function(h){a.removeShape(h)}),n.unitCellObjects.labels.forEach(function(h){a.removeLabel(h)})}delete n.unitCellObjects}replicateUnitCell(n=3,a=n,h=a,f,T,_){let M=(f=this.getModel(f)).getCrystData();if(M){const P=f.selectedAtoms({}),A=M.matrix;let D=function($){return $%2==0?-$/2:Math.ceil($/2)};n<=1&&a<=1&&h<=1&&(_=!0,n=a=h=3);let z=function($,U,V){return!1};if(_){const $=new d.Matrix3().getInverse3(A);z=function(U,V,H){let G=new d.Vector3(U,V,H).applyMatrix3($);return!(G.x>-1e-4&&G.x<1.0001&&G.y>-1e-4&&G.y<1.0001&&G.z>-1e-4&&G.z<1.0001)}}for(let $=0;$<n;$++)for(let U=0;U<a;U++)for(let V=0;V<h;V++){if($==0&&U==0&&V==0)continue;let H=new d.Vector3(D($),D(U),D(V));H.applyMatrix3(A);let G=[];for(let Y=0;Y<P.length;Y++){let te=P[Y].x+H.x,re=P[Y].y+H.y,de=P[Y].z+H.z;if(z(te,re,de))continue;let le={};for(let ye in P[Y])le[ye]=P[Y][ye];le.x=te,le.y=re,le.z=de,G.push(le)}f.addAtoms(G)}T&&f.assignBonds()}}addLineDashed(n,a){var h,f;n.dashLength=n.dashLength||.5,n.gapLength=n.gapLength||.5,h=n.start?new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0):new d.Vector3(0,0,0),f=n.end?new d.Vector3(n.end.x,n.end.y||0,n.end.z||0):new d.Vector3(0,0,0);var T,_,M,P=new d.Vector3,A=new d.Vector3,D=new d.Vector3,z=h.clone(),$=0;for(P.subVectors(f,h),T=P.length(),P.normalize(),A=P.clone(),D=P.clone(),A.multiplyScalar(n.dashLength),D.multiplyScalar(n.gapLength),_=A.length(),M=D.length();$<T;){if($+_>T){n.start=h,n.end=f,a.addLine(n);break}z.addVectors(h,A),n.start=h,n.end=z,a.addLine(n),h=z.clone(),$+=_,z.addVectors(h,D),h=z.clone(),$+=M}return a.finalize(),a}addCustom(n){var a=new ze(n=n||{});return a.shapePosition=this.shapes.length,a.addCustom(n),this.shapes.push(a),a.finalize(),a}addVolumetricData(n,a,h={}){var f=new Ve.VolumeData(n,a);return h.hasOwnProperty("transferfn")?this.addVolumetricRender(f,h):this.addIsosurface(f,h)}addIsosurface(n,a={},h){var f=new ze(a);return f.shapePosition=this.shapes.length,f.addIsosurface(n,a,h,this),this.shapes.push(f),f}addVolumetricRender(n,a){var h=new kt(n,a=a||{},this);return h.shapePosition=this.shapes.length,this.shapes.push(h),h}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(n){if(n){this.scene.fog=new u.Fog(this.bgColor,100,200),this.config.disableFog=!1;const a=n;a.fogStart==null?this.fogStart=.4:this.fogStart=a.fogStart,a.fogEnd==null?this.fogEnd=1:this.fogEnd=a.fogEnd}else this.config.disableFog=!0,this.show()}setFrame(n){this.viewer_frame=n;let a=this;return new Promise(function(h){var f=a.models.map(function(T){return T.setFrame(n)});Promise.all(f).then(function(){h()})})}getFrame(){return this.viewer_frame}getNumFrames(){var n=0;for(let a=0;a<this.models.length;a++)this.models[a].getNumFrames()>n&&(n=this.models[a].getNumFrames());for(let a=0;a<this.shapes.length;a++)this.shapes[a].frame&&this.shapes[a].frame>=n&&(n=this.shapes[a].frame+1);for(let a=0;a<this.labels.length;a++)this.labels[a].frame&&this.labels[a].frame>=n&&(n=this.labels[a].frame+1);return n}getNextModelId(){return this.models.length}animate(n){this.incAnim();var a=100,h="forward",f=1/0;(n=n||{}).interval&&(a=n.interval),n.loop&&(h=n.loop),n.reps&&(f=n.reps);var T=this.getNumFrames(),_=this,M=0;n.startFrame&&(M=n.startFrame%T);var P=1;n.step&&(f/=P=n.step);var A,D,z=0,$=T*f,U=new Date,V=function(H){U=new Date,H=="forward"?_.setFrame(M).then(function(){M=(M+P)%T,A()}):H=="backward"?_.setFrame(T-1-M).then(function(){M=(M+P)%T,A()}):_.setFrame(M).then(function(){P*=(M+=P)%(T-1)==0?-1:1,A()})};return A=function(){if(_.render(),_.getCanvas().isConnected)if(++z>=$||!_.isAnimated())D.cancel(),_.animationTimers.delete(D),_.decAnim();else{var H=a-(new Date().getTime()-U.getTime());H=H>0?H:0,D.cancel(),_.animationTimers.delete(D),D=new v.PausableTimer(V,H,h),_.animationTimers.add(D)}else _.stopAnimate()},D=new v.PausableTimer(V,0,h),this.animationTimers.add(D),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(n){n.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(n){n.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(n){n.resume()}),this}isAnimated(){return this.animated>0}getModelOpt(n){return n&&!n.defaultcolors?(n.defaultcolors=this.defaultcolors,n.cartoonQuality=n.cartoonQuality||this.config.cartoonQuality):n===void 0&&(n={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality}),n}addModel(n,a="",h){h=this.getModelOpt(h);var f=new ur(this.models.length,h,this);return f.addMolData(n,a,h),this.models.push(f),f}addModels(n,a,h){(h=this.getModelOpt(h)).multimodel=!0,h.frames=!0;for(var f=ur.parseMolData(n,a,h),T=0;T<f.length;T++){var _=new ur(this.models.length,h,this);_.setAtomDefaults(f[T]),_.addFrame(f[T]),_.setFrame(0),f.modelData&&_.setModelData(f.modelData[T]),_.setDontDuplicateAtoms(!h.duplicateAssemblyAtoms),this.models.push(_)}return this.models}addModelsAsFrames(n,a,h){(h=this.getModelOpt(h)).multimodel=!0,h.frames=!0;var f=new ur(this.models.length,h,this);return f.addMolData(n,a,h),this.models.push(f),f}addAsOneMolecule(n,a,h){(h=this.getModelOpt(h)).multimodel=!0,h.onemol=!0;var f=new ur(this.models.length,h,this);return f.addMolData(n,a,h),this.models.push(f),f}removeModel(n){if(n=this.getModel(n)){for(n.removegl(this.modelGroup),delete this.models[n.getID()];this.models.length>0&&this.models[this.models.length-1]===void 0;)this.models.pop();return this}}removeAllModels(){for(var n=0;n<this.models.length;n++){var a=this.models[n];a&&a.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(n,a){var h={};return h.m=a===void 0?this.models.map(function(f){return f.toCDObject(n)}):[this.models[a].toCDObject()],JSON.stringify(h)}exportVRML(){var n=this.modelGroup;this.applyToModels("removegl",this.modelGroup),this.modelGroup=new u.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var a=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels("removegl",this.modelGroup),this.modelGroup=n,a}createModelFrom(n,a=!1){for(var h=new ur(this.models.length,this.defaultcolors,this),f=0;f<this.models.length;f++)if(this.models[f]){var T=this.models[f].selectedAtoms(n);h.addAtoms(T),a&&this.models[f].removeAtoms(T)}return this.models.push(h),h}applyToModels(n,a,h,f,T,_,M){for(var P=this.getModelList(a),A=0;A<P.length;A++)P[A][n](a,h,f,T,_,M)}setStyle(n,a){return a===void 0&&(a=n,n={}),this.applyToModels("setStyle",n,a,!1),this}addStyle(n,a){return a===void 0&&(a=n,n={}),this.applyToModels("setStyle",n,a,!0),this}setClickable(n,a,h){return this.applyToModels("setClickable",n,a,h),this}setHoverable(n,a,h,f){return this.applyToModels("setHoverable",n,a,h,f),this}enableContextMenu(n,a){return this.applyToModels("enableContextMenu",n,a),this}vibrate(n,a,h,f){return this.applyToModels("vibrate",n,a,h,f),this}setColorByProperty(n,a,h,f){return this.applyToModels("setColorByProperty",n,a,h,f),this}setColorByElement(n,a){return this.applyToModels("setColorByElement",n,a),this}static getAtomsWithin(n,a){var h=[];for(let T=0;T<n.length;T++){var f=n[T];f!==void 0&&(f.x<a[0][0]||f.x>a[1][0]||f.y<a[0][1]||f.y>a[1][1]||f.z<a[0][2]||f.z>a[1][2]||h.push(f))}return h}static volume(n){return(n[1][0]-n[0][0])*(n[1][1]-n[0][1])*(n[1][2]-n[0][2])}carveUpExtent(n,a,h){let f=[],T={};for(let D=0,z=a.length;D<z;D++)T[a[D].index]=D;let _=function(D){let z=[];for(let $=0,U=D.length;$<U;$++)D[$].index in T&&z.push(T[D[$].index]);return z},M=function(D){let z=[];return z[0]=[D[0][0],D[0][1],D[0][2]],z[1]=[D[1][0],D[1][1],D[1][2]],z},P=function(D){if(Yt.volume(D)<Yt.maxVolume)return[D];var z,$=D[1][0]-D[0][0],U=D[1][1]-D[0][1],V=D[1][2]-D[0][2];z=$>U&&$>V?0:U>$&&U>V?1:2;var H=M(D),G=M(D),Y=(D[1][z]-D[0][z])/2+D[0][z];H[1][z]=Y,G[0][z]=Y;var te=P(H),re=P(G);return te.concat(re)},A=P(n);for(let D=0,z=A.length;D<z;D++){let $=M(A[D]);$[0][0]-=6,$[0][1]-=6,$[0][2]-=6,$[1][0]+=6,$[1][1]+=6,$[1][2]+=6;let U=Yt.getAtomsWithin(a,$),V=Yt.getAtomsWithin(h,A[D]);f.push({extent:A[D],atoms:_(U),toshow:_(V)})}return f}static generateSurfaceMesh(n,a,h){var f=new u.Geometry(!0),T=f.updateGeoGroup(0),_=[];for(let Me=0,we=n.length;Me<we;Me++){var M=n[Me];M&&(M.surfaceColor!==void 0?_[Me]=M.surfaceColor:M.color&&(_[Me]=x.CC.color(M.color)))}var P=T.vertexArray,A=a.vertices;for(let Me=0,we=A.length;Me<we;Me++){let Ue=3*T.vertices;P[Ue]=A[Me].x,P[Ue+1]=A[Me].y,P[Ue+2]=A[Me].z,T.vertices++}var D=T.colorArray;let z=T.atomArray;if(h.voldata&&h.volscheme){var $=h.volscheme,U=h.voldata,V=$.range()||[-1,1];for(let Me=0,we=A.length;Me<we;Me++){let Ue=A[Me].atomid,Je=U.getVal(A[Me].x,A[Me].y,A[Me].z),tt=x.CC.color($.valueToHex(Je,V)),Ye=3*Me;D[Ye]=tt.r,D[Ye+1]=tt.g,D[Ye+2]=tt.b,z[Me]=n[Ue]}}else if(_.length>0)for(let Me=0,we=A.length;Me<we;Me++){let Ue=A[Me].atomid,Je=3*Me;D[Je]=_[Ue].r,D[Je+1]=_[Ue].g,D[Je+2]=_[Ue].b,z[Me]=n[Ue]}var H=a.faces;T.faceidx=H.length,f.initTypedArrays();var G,Y,te,re,de=T.vertexArray,le=T.normalArray;for(let Me=0,we=H.length;Me<we;Me+=3){var ye=3*H[Me],Pe=3*H[Me+1],Re=3*H[Me+2];G=new d.Vector3(de[ye],de[ye+1],de[ye+2]),Y=new d.Vector3(de[Pe],de[Pe+1],de[Pe+2]),(te=new d.Vector3(de[Re],de[Re+1],de[Re+2])).subVectors(te,Y),G.subVectors(G,Y),te.cross(G),(re=te).normalize(),le[ye]+=re.x,le[Pe]+=re.x,le[Re]+=re.x,le[ye+1]+=re.y,le[Pe+1]+=re.y,le[Re+1]+=re.y,le[ye+2]+=re.z,le[Pe+2]+=re.z,le[Re+2]+=re.z}return T.faceArray=new Uint16Array(H),new u.Mesh(f,h)}static generateMeshSyncHelper(n,a,h,f,T,_){var M=new xe;return M.initparm(a,n!==1,_),M.fillvoxels(T,h),M.buildboundary(),n!=Gr.SES&&n!=Gr.MS||(M.fastdistancemap(),M.boundingatom(!1),M.fillvoxelswaals(T,h)),M.marchingcube(n),M.getFacesAndVertices(f)}static getMatWithStyle(n){let a=null;for(var h in a=n.onesided?new u.MeshLambertMaterial:new u.MeshDoubleLambertMaterial,a.vertexColors=u.Coloring.VertexColors,n)h==="color"||h==="map"||n.hasOwnProperty(h)&&(a[h]=n[h]);return n.opacity!==void 0&&(n.opacity===1?a.transparent=!1:a.transparent=!0),n.wireframe!==void 0&&(a.wireframe=n.wireframe),a}addMesh(n){let a={geo:n.geometry,mat:n.material,done:!0,finished:!1};var h=this.nextSurfID();return this.surfaces[h]=new gr([a]),h}static shallowCopy(n){var a=[];let h=n.length;for(let f=0;f<h;f++)a[f]=(0,v.extend)({},n[f]);return a}addSurface(n,a={},h={},f,T,_){let M=this.nextSurfID(),P=null,A=this,D=Gr.VDW;typeof n=="string"?Yt.surfaceTypeMap[n.toUpperCase()]!==void 0?D=Yt.surfaceTypeMap[n]:console.log("Surface type : "+n+" is not recognized"):typeof n=="number"&&(D=n);var z=null,$=null,U=Yt.shallowCopy(this.getAtomsFromSel(h));z=f?Yt.shallowCopy(this.getAtomsFromSel(f)):U,(0,v.adjustVolumeStyle)(a);var V,H=!1;for(V=0;V<this.models.length;V++)if(this.models[V]){var G=this.models[V].getSymmetries();if(G.length>1||G.length==1&&!G[0].isIdentity()){H=!0;break}}var Y=function(Pe,Re,Me){var we;$=T?Yt.shallowCopy(A.getAtomsFromSel(T)):Me;var Ue=(0,v.getExtent)(Me,!0);if(a.map&&a.map.prop){var Je=a.map.prop;let st=(0,w.getGradient)(a.map.scheme||a.map.gradient||new w.Gradient.RWB),wt=st.range();wt||(wt=(0,v.getPropertyRange)(Me,Je)),a.colorscheme={prop:Je,gradient:st}}for(let st=0,wt=Re.length;st<wt;st++)(we=Re[st]).surfaceColor=(0,v.getColorFromStyle)(we,a);var tt=Yt.volume(Ue),Ye=A.carveUpExtent(Ue,Re,Me);if($&&$.length&&$.length>0){var ut=(0,v.getExtent)($,!0);Ye.sort(function(st,wt){var Et=function(it,Pt){var Ht=it.extent,Mt=Ht[1][0]-Ht[0][0],ct=Ht[1][1]-Ht[0][1],Jt=Ht[1][2]-Ht[0][2],Nt=Mt-Pt[2][0];Nt*=Nt;var qt=ct-Pt[2][1];qt*=qt;var Vt=Jt-Pt[2][2];return Nt+qt+(Vt*=Vt)};return Et(st,ut)-Et(wt,ut)})}var ft=[];for(let st=0,wt=Re.length;st<wt;st++)we=Re[st],ft[st]={x:we.x,y:we.y,z:we.z,serial:st,elem:we.elem};var Ze=!!Kr;if(typeof $3Dmol<"u"&&$3Dmol.SurfaceWorker!==void 0||(console.log("$3Dmol.SurfaceWorker is not defined, using synchronous surface generation."),Ze=!0),Ze){var pt=function(st){return new Promise(function(wt){for(var Et=Yt.generateMeshSyncHelper(D,Ye[st].extent,Ye[st].atoms,Ye[st].toshow,ft,tt),it=yt({vertexArr:Et.vertices,faceArr:Et.faces}),Pt=0,Ht=it.length;Pt<Ht;Pt++){Et={vertices:it[Pt].vertexArr,faces:it[Pt].faceArr};var Mt=Yt.generateSurfaceMesh(Re,Et,P);(0,v.mergeGeos)(Pe.geo,Mt)}A.render(),wt()})},Be=[];for(let st=0;st<Ye.length;st++)Be.push(pt(st));return Promise.all(Be).then(function(){return Pe.done=!0,A.render(),Promise.resolve(M)})}var et=[];D<0&&(D=0);for(let st=0,wt=Yt.numWorkers;st<wt;st++){var St=new Worker($3Dmol.SurfaceWorker);et.push(St),St.postMessage({type:-1,atoms:ft,volume:tt})}return new Promise(function(st,wt){var Et=0,it=function(){et&&et.length&&et.forEach(function(ct){ct&&ct.terminate&&ct.terminate()})},Pt=function(ct){for(var Jt=yt({vertexArr:ct.data.vertices,faceArr:ct.data.faces}),Nt=0,qt=Jt.length;Nt<qt;Nt++){var Vt={vertices:Jt[Nt].vertexArr,faces:Jt[Nt].faceArr},Xt=Yt.generateSurfaceMesh(Re,Vt,P);(0,v.mergeGeos)(Pe.geo,Xt)}A.render(),++Et==Ye.length&&(Pe.done=!0,it(),st(M))},Ht=function(ct){it(),console.log(ct.message+" ("+ct.filename+":"+ct.lineno+")"),wt(ct)};for(let ct=0;ct<Ye.length;ct++){var Mt=et[ct%et.length];Mt.onmessage=Pt,Mt.onerror=Ht,Mt.postMessage({type:D,expandedExtent:Ye[ct].extent,extendedAtoms:Ye[ct].atoms,atomsToShow:Ye[ct].toshow})}})};a=a||{},P=Yt.getMatWithStyle(a);let te=new gr([]);te.style=a,te.atomsel=h,te.allsel=f,te.focus=T;var re=null;if(H){var de={},le={};for(V=0;V<this.models.length;V++)de[V]=[],le[V]=[];for(V=0;V<z.length;V++)de[z[V].model].push(z[V]);for(V=0;V<U.length;V++)le[U[V].model].push(U[V]);var ye=[];for(V=0;V<this.models.length;V++)le[V].length>0&&(te.push({geo:new u.Geometry(!0),mat:P,done:!1,finished:!1,symmetries:this.models[V].getSymmetries()}),ye.push(Y(te[te.length-1],de[V],le[V])));re=Promise.all(ye)}else te.push({geo:new u.Geometry(!0),mat:P,done:!1,finished:!1,symmetries:[new d.Matrix4]}),re=Y(te[te.length-1],z,U);return this.surfaces[M]=te,re.surfid=M,_&&typeof _=="function"?(re.then(function(Pe){_(Pe)}),M):re}setSurfaceMaterialStyle(n,a){if((0,v.adjustVolumeStyle)(a),this.surfaces[n]){var h=this.surfaces[n];for(let T=0;T<h.length;T++){var f=h[T].mat=Yt.getMatWithStyle(a);if(h[T].mat.side=u.FrontSide,a.wireframe&&h[T].geo.setUpWireframe(),a.color){h[T].mat.color=x.CC.color(a.color),h[T].geo.colorsNeedUpdate=!0;const _=x.CC.color(a.color);h[T].geo.setColor(_)}else if(f.voldata&&f.volscheme){const _=f.volscheme,M=f.voldata,P=x.CC,A=_.range()||[-1,1];h[T].geo.setColors(function(D,z,$){let U=M.getVal(D,z,$);return P.color(_.valueToHex(U,A))})}else{h[T].geo.colorsNeedUpdate=!0;for(let _ of h[T].geo.geometryGroups)for(let M=0;M<_.vertices;M++){let P=(0,v.getColorFromStyle)(_.atomArray[M],a),A=3*M;_.colorArray[A]=P.r,_.colorArray[A+1]=P.g,_.colorArray[A+2]=P.b}}h[T].finished=!1}}return this}getSurface(n){return this.surfaces[n]}removeSurface(n){for(var a=this.surfaces[n],h=0;h<a.length;h++)a[h]&&a[h].lastGL&&(a[h].geo!==void 0&&a[h].geo.dispose(),a[h].mat!==void 0&&a[h].mat.dispose(),this.modelGroup.remove(a[h].lastGL));return delete this.surfaces[n],this.show(),this}removeAllSurfaces(){for(var n in this.surfaces)if(this.surfaces.hasOwnProperty(n)){for(var a=this.surfaces[n],h=0;h<a.length;h++)a[h]&&a[h].lastGL&&(a[h].geo!==void 0&&a[h].geo.dispose(),a[h].mat!==void 0&&a[h].mat.dispose(),this.modelGroup.remove(a[h].lastGL));delete this.surfaces[n]}return this.show(),this}jmolMoveTo(){var n=this.modelGroup.position,a="center { "+-n.x+" "+-n.y+" "+-n.z+" }; ",h=this.rotationGroup.quaternion;return a+="moveto .5 quaternion { "+h.x+" "+h.y+" "+h.z+" "+h.w+" };"}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(n,a){a=a||{};var h=this.getAtomsFromSel(a);if(typeof n=="function")for(let _=0,M=h.length;_<M;_++)n(h[_]);else for(let _=0,M=h.length;_<M;_++){var f=h[_];for(let P=0,A=n.length;P<A;P++){let D=n[P];if(D.props)for(var T in D.props)D.props.hasOwnProperty(T)&&this.atomIsSelected(f,D)&&(f.properties||(f.properties={}),f.properties[T]=D.props[T])}}return this}linkViewer(n){return this.linkedViewers.push(n),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(n){this.rotationGroup.position.z=this.CAMERA_Z-n}setAutoEyeSeparation(n,a){var h=this.getPerceivedDistance();return a||(a=5),n||this.camera.position.x>0?this.camera.position.x=h*Math.tan(Math.PI/180*a):this.camera.position.x=-h*Math.tan(Math.PI/180*a),this.camera.lookAt(new d.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(n){this.config.cartoonQuality=n}}function Cr(oe,n){if(oe=(0,v.getElement)(oe)){n=n||{};try{return new Yt(oe,n)}catch(a){throw"error creating viewer: "+a}}}function Ar(oe,n={},a={}){if(oe=(0,v.getElement)(oe)){var h=[],f=document.createElement("canvas");a.rows=n.rows,a.cols=n.cols,a.control_all=n.control_all!=null&&n.control_all,oe.appendChild(f);try{for(var T=0;T<n.rows;T++){for(var _=[],M=0;M<n.cols;M++){a.row=T,a.col=M,a.canvas=f,a.viewers=h,a.control_all=n.control_all;var P=Cr(oe,(0,v.extend)({},a));_.push(P)}h.unshift(_)}}catch(A){throw"error creating viewer grid: "+A}return h}}function Ur(oe){var n=this;if(oe=(0,v.getElement)(oe)){var a=Ar(oe,{rows:1,cols:2,control_all:!0});this.glviewer1=a[0][0],this.glviewer2=a[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var h=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function(T){return typeof n.glviewer1[T]=="function"}),f=0;f<h.length;f++)this[h[f]]=(function(T){return function(){return[this.glviewer1[T].apply(this.glviewer1,arguments),this.glviewer2[T].apply(this.glviewer2,arguments)]}})(h[f]);this.setCoordinates=function(T,_,M){for(var P=0;P<T.length;P++)T[P].setCoordinates(_,M)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(T){this.glviewer1.render(),this.glviewer2.render(),T&&T(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}Yt.numWorkers=4,Yt.maxVolume=64e3,Yt.surfaceTypeMap={VDW:Gr.VDW,MS:Gr.MS,SAS:Gr.SAS,SES:Gr.SES};var _r=!1,Lr=!1,wr={};function Ri(oe,n){var a,h,f;if(document.querySelector(".viewer_3Dmoljs")!=null&&(_r=!0),_r){Lr=!0,oe=oe??null;var T=0;document.querySelectorAll(".viewer_3Dmoljs").forEach(_=>{var M=[],P=[],A="";_.style.position=="static"&&(_.style.position="relative");var D=null;if(f=null,_.dataset.pdb)M.push("https://files.rcsb.org/view/"+_.dataset.pdb+".pdb"),P.push("pdb");else if(_.dataset.cid)P.push("sdf"),M.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+_.dataset.cid+"/SDF?record_type=3d");else if(_.dataset.href||_.dataset.url){if(A=_.dataset.href?_.dataset.href:_.dataset.url,M.push(A),(f=A.substring(A.lastIndexOf(".")+1))=="gz"){let st=A.substring(0,A.lastIndexOf(".")).lastIndexOf(".");f=A.substring(st+1)}P.push(f);var z=A.substring(A.lastIndexOf("/")+1,A.lastIndexOf("."));z=="/"&&(z=A.substring(A.lastIndexOf("/")+1)),_.dataset[P[P.length-1]]=z}let $=_.dataset;for(a in $)a.substring(0,3)==="pdb"&&a!=="pdb"?(M.push("https://files.rcsb.org/view/"+$[a]+".pdb"),P.push("pdb")):a.substring(0,4)==="href"&&a!=="href"?(A=$[a],M.push(A),P.push(A.substring(A.lastIndexOf(".")+1))):a.substring(0,3)==="cid"&&a!=="cid"&&(M.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+$[a]+"/SDF?record_type=3d"),P.push("sdf"));var U={};_.dataset.options&&(U=(0,v.specStringToObject)(_.dataset.options));var V=x.CC.color(_.dataset.backgroundcolor),H=_.dataset.backgroundalpha;H=H==null?1:parseFloat(H);var G={line:{}};_.dataset.style&&(G=(0,v.specStringToObject)(_.dataset.style));var Y={};_.dataset.select&&(Y=(0,v.specStringToObject)(_.dataset.select));var te=[],re=[],de=[],le={},ye=null,Pe=_.dataset,Re=/style(.+)/,Me=/surface(.*)/,we=/labelres(.*)/,Ue=[];for(h in Pe)Object.prototype.hasOwnProperty.call(Pe,h)&&Ue.push(h);for(Ue.sort(),a=0;a<Ue.length;a++){h=Ue[a];var Je,tt,Ye,ut=Re.exec(h);ut&&(Je="select"+ut[1],tt=(0,v.specStringToObject)(Pe[Je]),Ye=(0,v.specStringToObject)(Pe[h]),te.push([tt,Ye])),(ut=Me.exec(h))&&(Je="select"+ut[1],tt=(0,v.specStringToObject)(Pe[Je]),Ye=(0,v.specStringToObject)(Pe[h]),re.push([tt,Ye])),(ut=we.exec(h))&&(Je="select"+ut[1],tt=(0,v.specStringToObject)(Pe[Je]),Ye=(0,v.specStringToObject)(Pe[h]),de.push([tt,Ye])),h=="zoomto"&&(le=(0,v.specStringToObject)(Pe[h])),h=="spin"&&(ye=(0,v.specStringToObject)(Pe[h]))}var ft=function(st){for(st.setStyle(Y,G),D&&D.createSelectionAndStyle(Y,G),a=0;a<te.length;a++){let wt=te[a][0]||{},Et=te[a][1]||{line:{}};st.setStyle(wt,Et),D&&D.createSelectionAndStyle(Y,G)}for(a=0;a<re.length;a++){let wt=re[a][0]||{},Et=re[a][1]||{};D?st.addSurface(Gr.VDW,Et,wt,wt).then(it=>{D.loadSurface("VDW",wt,Et,it)}):st.addSurface(Gr.VDW,Et,wt,wt)}for(a=0;a<de.length;a++){let wt=de[a][0]||{},Et=de[a][1]||{};st.addResLabels(wt,Et)}st.render(),st.zoomTo(le),ye&&st.spin(ye.axis,ye.speed)};let Ze=oe;try{var pt=(0,v.specStringToObject)(_.dataset.config)||{};pt.backgroundColor===void 0&&(pt.backgroundColor=V),pt.backgroundAlpha===void 0&&(pt.backgroundAlpha=H),Ze==null?Ze=wr[_.id||T++]=Cr(_,pt):(Ze.setBackgroundColor(V,H),Ze.setConfig(pt),D&&D.initiateUI()),_.dataset.ui&&$3Dmol.StateManager&&(D=new $3Dmol.StateManager(Ze))}catch(st){console.log(st),_.textContent="WebGL appears to be disabled."}if(M.length!=0){let st=0,wt=((Et,it)=>function(Pt){A=M[st];var Ht=Et.dataset.type||Et.dataset.datatype||P[st];if(it.addModel(Pt,Ht,U),D){var Mt=Et.dataset[P[st]];D.setModelTitle(Mt)}st+=1,st<M.length?(0,v.get)(M[st]).then(wt):(ft(it),Et.dataset.callback&&(0,v.makeFunction)(Et.dataset.callback)(it),Lr=!1,n&&n(it))})(_,Ze);f&&f.endsWith("gz")?(0,v.getbin)(M[0]).then(wt):(0,v.get)(M[0]).then(wt)}else{if(_.dataset.element){var Be="#"+_.dataset.element,et=document.querySelector(Be),St=et?et.textContent:"";f=_.dataset.type||_.dataset.datatype,Ze.addModel(St,f,U)}ft(Ze),_.dataset.callback&&(0,v.makeFunction)(_.dataset.callback)(Ze),Lr=!1,n&&n(Ze)}})}}document.onreadystatechange=()=>{document.readyState==="complete"&&Ri()};const Zt={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function ri(oe,n){if((!n||oe.partialCharge===void 0)&&oe.resn&&oe.atom){var a=oe.resn+":"+oe.atom;oe.properties.partialCharge=Zt[a]}}window&&(window.$3Dmol=r)},40:(e,r,s)=>{s.r(r),s.d(r,{bondLength:()=>c,bondTable:()=>o,setBondLength:()=>y});let o={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function c(u){return o[u]||1.6}function y(u,p){p<0&&(p=0),o[u]=p}},71:(e,r,s)=>{var o=s(107),c=s(981),y=s(972),u=s(834),p=s(746),d=Object.prototype.toString;function x(v){if(!(this instanceof x))return new x(v);this.options=c.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},v||{});var R=this.options;R.raw&&R.windowBits>0?R.windowBits=-R.windowBits:R.gzip&&R.windowBits>0&&R.windowBits<16&&(R.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var O=o.deflateInit2(this.strm,R.level,R.method,R.windowBits,R.memLevel,R.strategy);if(O!==0)throw new Error(u[O]);if(R.header&&o.deflateSetHeader(this.strm,R.header),R.dictionary){var C;if(C=typeof R.dictionary=="string"?y.string2buf(R.dictionary):d.call(R.dictionary)==="[object ArrayBuffer]"?new Uint8Array(R.dictionary):R.dictionary,(O=o.deflateSetDictionary(this.strm,C))!==0)throw new Error(u[O]);this._dict_set=!0}}function w(v,R){var O=new x(R);if(O.push(v,!0),O.err)throw O.msg||u[O.err];return O.result}x.prototype.push=function(v,R){var O,C,k=this.strm,K=this.options.chunkSize;if(this.ended)return!1;C=R===~~R?R:R===!0?4:0,typeof v=="string"?k.input=y.string2buf(v):d.call(v)==="[object ArrayBuffer]"?k.input=new Uint8Array(v):k.input=v,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new c.Buf8(K),k.next_out=0,k.avail_out=K),(O=o.deflate(k,C))!==1&&O!==0)return this.onEnd(O),this.ended=!0,!1;k.avail_out!==0&&(k.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(y.buf2binstring(c.shrinkBuf(k.output,k.next_out))):this.onData(c.shrinkBuf(k.output,k.next_out)))}while((k.avail_in>0||k.avail_out===0)&&O!==1);return C===4?(O=o.deflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===0):C!==2||(this.onEnd(0),k.avail_out=0,!0)},x.prototype.onData=function(v){this.chunks.push(v)},x.prototype.onEnd=function(v){v===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},r.Deflate=x,r.deflate=w,r.deflateRaw=function(v,R){return(R=R||{}).raw=!0,w(v,R)},r.gzip=function(v,R){return(R=R||{}).gzip=!0,w(v,R)}},75:(e,r,s)=>{function o(g){let Q=g.length;for(;--Q>=0;)g[Q]=0}s.r(r),s.d(r,{Deflate:()=>ci,Inflate:()=>xi,constants:()=>qr,default:()=>ei,deflate:()=>ni,deflateRaw:()=>hi,gzip:()=>Ii,inflate:()=>Oi,inflateRaw:()=>Hr,ungzip:()=>Xr});const c=256,y=286,u=30,p=15,d=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),x=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),w=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),v=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),R=new Array(576);o(R);const O=new Array(60);o(O);const C=new Array(512);o(C);const k=new Array(256);o(k);const K=new Array(29);o(K);const Z=new Array(u);function X(g,Q,b,be,_e){this.static_tree=g,this.extra_bits=Q,this.extra_base=b,this.elems=be,this.max_length=_e,this.has_stree=g&&g.length}let S,F,B;function W(g,Q){this.dyn_tree=g,this.max_code=0,this.stat_desc=Q}o(Z);const J=g=>g<256?C[g]:C[256+(g>>>7)],N=(g,Q)=>{g.pending_buf[g.pending++]=255&Q,g.pending_buf[g.pending++]=Q>>>8&255},ee=(g,Q,b)=>{g.bi_valid>16-b?(g.bi_buf|=Q<<g.bi_valid&65535,N(g,g.bi_buf),g.bi_buf=Q>>16-g.bi_valid,g.bi_valid+=b-16):(g.bi_buf|=Q<<g.bi_valid&65535,g.bi_valid+=b)},Se=(g,Q,b)=>{ee(g,b[2*Q],b[2*Q+1])},ce=(g,Q)=>{let b=0;do b|=1&g,g>>>=1,b<<=1;while(--Q>0);return b>>>1},ge=(g,Q,b)=>{const be=new Array(16);let _e,ve,$e=0;for(_e=1;_e<=p;_e++)$e=$e+b[_e-1]<<1,be[_e]=$e;for(ve=0;ve<=Q;ve++){let Ie=g[2*ve+1];Ie!==0&&(g[2*ve]=ce(be[Ie]++,Ie))}},me=g=>{let Q;for(Q=0;Q<y;Q++)g.dyn_ltree[2*Q]=0;for(Q=0;Q<u;Q++)g.dyn_dtree[2*Q]=0;for(Q=0;Q<19;Q++)g.bl_tree[2*Q]=0;g.dyn_ltree[512]=1,g.opt_len=g.static_len=0,g.sym_next=g.matches=0},Ce=g=>{g.bi_valid>8?N(g,g.bi_buf):g.bi_valid>0&&(g.pending_buf[g.pending++]=g.bi_buf),g.bi_buf=0,g.bi_valid=0},ue=(g,Q,b,be)=>{const _e=2*Q,ve=2*b;return g[_e]<g[ve]||g[_e]===g[ve]&&be[Q]<=be[b]},L=(g,Q,b)=>{const be=g.heap[b];let _e=b<<1;for(;_e<=g.heap_len&&(_e<g.heap_len&&ue(Q,g.heap[_e+1],g.heap[_e],g.depth)&&_e++,!ue(Q,be,g.heap[_e],g.depth));)g.heap[b]=g.heap[_e],b=_e,_e<<=1;g.heap[b]=be},he=(g,Q,b)=>{let be,_e,ve,$e,Ie=0;if(g.sym_next!==0)do be=255&g.pending_buf[g.sym_buf+Ie++],be+=(255&g.pending_buf[g.sym_buf+Ie++])<<8,_e=g.pending_buf[g.sym_buf+Ie++],be===0?Se(g,_e,Q):(ve=k[_e],Se(g,ve+c+1,Q),$e=d[ve],$e!==0&&(_e-=K[ve],ee(g,_e,$e)),be--,ve=J(be),Se(g,ve,b),$e=x[ve],$e!==0&&(be-=Z[ve],ee(g,be,$e)));while(Ie<g.sym_next);Se(g,256,Q)},se=(g,Q)=>{const b=Q.dyn_tree,be=Q.stat_desc.static_tree,_e=Q.stat_desc.has_stree,ve=Q.stat_desc.elems;let $e,Ie,gt,Ne=-1;for(g.heap_len=0,g.heap_max=573,$e=0;$e<ve;$e++)b[2*$e]!==0?(g.heap[++g.heap_len]=Ne=$e,g.depth[$e]=0):b[2*$e+1]=0;for(;g.heap_len<2;)gt=g.heap[++g.heap_len]=Ne<2?++Ne:0,b[2*gt]=1,g.depth[gt]=0,g.opt_len--,_e&&(g.static_len-=be[2*gt+1]);for(Q.max_code=Ne,$e=g.heap_len>>1;$e>=1;$e--)L(g,b,$e);gt=ve;do $e=g.heap[1],g.heap[1]=g.heap[g.heap_len--],L(g,b,1),Ie=g.heap[1],g.heap[--g.heap_max]=$e,g.heap[--g.heap_max]=Ie,b[2*gt]=b[2*$e]+b[2*Ie],g.depth[gt]=(g.depth[$e]>=g.depth[Ie]?g.depth[$e]:g.depth[Ie])+1,b[2*$e+1]=b[2*Ie+1]=gt,g.heap[1]=gt++,L(g,b,1);while(g.heap_len>=2);g.heap[--g.heap_max]=g.heap[1],((Xe,dr)=>{const Wt=dr.dyn_tree,_t=dr.max_code,si=dr.stat_desc.static_tree,Rr=dr.stat_desc.has_stree,er=dr.stat_desc.extra_bits,Ir=dr.stat_desc.extra_base,lr=dr.stat_desc.max_length;let At,sr,kr,Dt,Sr,cr,tr=0;for(Dt=0;Dt<=p;Dt++)Xe.bl_count[Dt]=0;for(Wt[2*Xe.heap[Xe.heap_max]+1]=0,At=Xe.heap_max+1;At<573;At++)sr=Xe.heap[At],Dt=Wt[2*Wt[2*sr+1]+1]+1,Dt>lr&&(Dt=lr,tr++),Wt[2*sr+1]=Dt,sr>_t||(Xe.bl_count[Dt]++,Sr=0,sr>=Ir&&(Sr=er[sr-Ir]),cr=Wt[2*sr],Xe.opt_len+=cr*(Dt+Sr),Rr&&(Xe.static_len+=cr*(si[2*sr+1]+Sr)));if(tr!==0){do{for(Dt=lr-1;Xe.bl_count[Dt]===0;)Dt--;Xe.bl_count[Dt]--,Xe.bl_count[Dt+1]+=2,Xe.bl_count[lr]--,tr-=2}while(tr>0);for(Dt=lr;Dt!==0;Dt--)for(sr=Xe.bl_count[Dt];sr!==0;)kr=Xe.heap[--At],kr>_t||(Wt[2*kr+1]!==Dt&&(Xe.opt_len+=(Dt-Wt[2*kr+1])*Wt[2*kr],Wt[2*kr+1]=Dt),sr--)}})(g,Q),ge(b,Ne,g.bl_count)},q=(g,Q,b)=>{let be,_e,ve=-1,$e=Q[1],Ie=0,gt=7,Ne=4;for($e===0&&(gt=138,Ne=3),Q[2*(b+1)+1]=65535,be=0;be<=b;be++)_e=$e,$e=Q[2*(be+1)+1],++Ie<gt&&_e===$e||(Ie<Ne?g.bl_tree[2*_e]+=Ie:_e!==0?(_e!==ve&&g.bl_tree[2*_e]++,g.bl_tree[32]++):Ie<=10?g.bl_tree[34]++:g.bl_tree[36]++,Ie=0,ve=_e,$e===0?(gt=138,Ne=3):_e===$e?(gt=6,Ne=3):(gt=7,Ne=4))},ke=(g,Q,b)=>{let be,_e,ve=-1,$e=Q[1],Ie=0,gt=7,Ne=4;for($e===0&&(gt=138,Ne=3),be=0;be<=b;be++)if(_e=$e,$e=Q[2*(be+1)+1],!(++Ie<gt&&_e===$e)){if(Ie<Ne)do Se(g,_e,g.bl_tree);while(--Ie!==0);else _e!==0?(_e!==ve&&(Se(g,_e,g.bl_tree),Ie--),Se(g,16,g.bl_tree),ee(g,Ie-3,2)):Ie<=10?(Se(g,17,g.bl_tree),ee(g,Ie-3,3)):(Se(g,18,g.bl_tree),ee(g,Ie-11,7));Ie=0,ve=_e,$e===0?(gt=138,Ne=3):_e===$e?(gt=6,Ne=3):(gt=7,Ne=4)}};let fe=!1;const De=(g,Q,b,be)=>{ee(g,0+(be?1:0),3),Ce(g),N(g,b),N(g,~b),b&&g.pending_buf.set(g.window.subarray(Q,Q+b),g.pending),g.pending+=b};var He=(g,Q,b,be)=>{let _e,ve,$e=0;g.level>0?(g.strm.data_type===2&&(g.strm.data_type=(Ie=>{let gt,Ne=4093624447;for(gt=0;gt<=31;gt++,Ne>>>=1)if(1&Ne&&Ie.dyn_ltree[2*gt]!==0)return 0;if(Ie.dyn_ltree[18]!==0||Ie.dyn_ltree[20]!==0||Ie.dyn_ltree[26]!==0)return 1;for(gt=32;gt<c;gt++)if(Ie.dyn_ltree[2*gt]!==0)return 1;return 0})(g)),se(g,g.l_desc),se(g,g.d_desc),$e=(Ie=>{let gt;for(q(Ie,Ie.dyn_ltree,Ie.l_desc.max_code),q(Ie,Ie.dyn_dtree,Ie.d_desc.max_code),se(Ie,Ie.bl_desc),gt=18;gt>=3&&Ie.bl_tree[2*v[gt]+1]===0;gt--);return Ie.opt_len+=3*(gt+1)+5+5+4,gt})(g),_e=g.opt_len+3+7>>>3,ve=g.static_len+3+7>>>3,ve<=_e&&(_e=ve)):_e=ve=b+5,b+4<=_e&&Q!==-1?De(g,Q,b,be):g.strategy===4||ve===_e?(ee(g,2+(be?1:0),3),he(g,R,O)):(ee(g,4+(be?1:0),3),((Ie,gt,Ne,Xe)=>{let dr;for(ee(Ie,gt-257,5),ee(Ie,Ne-1,5),ee(Ie,Xe-4,4),dr=0;dr<Xe;dr++)ee(Ie,Ie.bl_tree[2*v[dr]+1],3);ke(Ie,Ie.dyn_ltree,gt-1),ke(Ie,Ie.dyn_dtree,Ne-1)})(g,g.l_desc.max_code+1,g.d_desc.max_code+1,$e+1),he(g,g.dyn_ltree,g.dyn_dtree)),me(g),be&&Ce(g)},ae={_tr_init:g=>{fe||((()=>{let Q,b,be,_e,ve;const $e=new Array(16);for(be=0,_e=0;_e<28;_e++)for(K[_e]=be,Q=0;Q<1<<d[_e];Q++)k[be++]=_e;for(k[be-1]=_e,ve=0,_e=0;_e<16;_e++)for(Z[_e]=ve,Q=0;Q<1<<x[_e];Q++)C[ve++]=_e;for(ve>>=7;_e<u;_e++)for(Z[_e]=ve<<7,Q=0;Q<1<<x[_e]-7;Q++)C[256+ve++]=_e;for(b=0;b<=p;b++)$e[b]=0;for(Q=0;Q<=143;)R[2*Q+1]=8,Q++,$e[8]++;for(;Q<=255;)R[2*Q+1]=9,Q++,$e[9]++;for(;Q<=279;)R[2*Q+1]=7,Q++,$e[7]++;for(;Q<=287;)R[2*Q+1]=8,Q++,$e[8]++;for(ge(R,287,$e),Q=0;Q<u;Q++)O[2*Q+1]=5,O[2*Q]=ce(Q,5);S=new X(R,d,257,y,p),F=new X(O,x,0,u,p),B=new X(new Array(0),w,0,19,7)})(),fe=!0),g.l_desc=new W(g.dyn_ltree,S),g.d_desc=new W(g.dyn_dtree,F),g.bl_desc=new W(g.bl_tree,B),g.bi_buf=0,g.bi_valid=0,me(g)},_tr_stored_block:De,_tr_flush_block:He,_tr_tally:(g,Q,b)=>(g.pending_buf[g.sym_buf+g.sym_next++]=Q,g.pending_buf[g.sym_buf+g.sym_next++]=Q>>8,g.pending_buf[g.sym_buf+g.sym_next++]=b,Q===0?g.dyn_ltree[2*b]++:(g.matches++,Q--,g.dyn_ltree[2*(k[b]+c+1)]++,g.dyn_dtree[2*J(Q)]++),g.sym_next===g.sym_end),_tr_align:g=>{ee(g,2,3),Se(g,256,R),(Q=>{Q.bi_valid===16?(N(Q,Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0):Q.bi_valid>=8&&(Q.pending_buf[Q.pending++]=255&Q.bi_buf,Q.bi_buf>>=8,Q.bi_valid-=8)})(g)}},Ae=(g,Q,b,be)=>{let _e=65535&g,ve=g>>>16&65535,$e=0;for(;b!==0;){$e=b>2e3?2e3:b,b-=$e;do _e=_e+Q[be++]|0,ve=ve+_e|0;while(--$e);_e%=65521,ve%=65521}return _e|ve<<16};const We=new Uint32Array((()=>{let g,Q=[];for(var b=0;b<256;b++){g=b;for(var be=0;be<8;be++)g=1&g?3988292384^g>>>1:g>>>1;Q[b]=g}return Q})());var qe=(g,Q,b,be)=>{const _e=We,ve=be+b;g^=-1;for(let $e=be;$e<ve;$e++)g=g>>>8^_e[255&(g^Q[$e])];return-1^g},Fe={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},rt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:at,_tr_stored_block:ot,_tr_flush_block:Ft,_tr_tally:Ct,_tr_align:ar}=ae,{Z_NO_FLUSH:or,Z_PARTIAL_FLUSH:Mr,Z_FULL_FLUSH:Er,Z_FINISH:pr,Z_BLOCK:vr,Z_OK:xr,Z_STREAM_END:fi,Z_STREAM_ERROR:Pr,Z_DATA_ERROR:Or,Z_BUF_ERROR:Di,Z_DEFAULT_COMPRESSION:wi,Z_FILTERED:Hi,Z_HUFFMAN_ONLY:pe,Z_RLE:Ee,Z_FIXED:Oe,Z_DEFAULT_STRATEGY:dt,Z_UNKNOWN:nt,Z_DEFLATED:It}=rt,ht=258,zt=262,Ut=42,Ot=113,mr=666,li=(g,Q)=>(g.msg=Fe[Q],Q),Ci=g=>2*g-(g>4?9:0),ui=g=>{let Q=g.length;for(;--Q>=0;)g[Q]=0},gi=g=>{let Q,b,be,_e=g.w_size;Q=g.hash_size,be=Q;do b=g.head[--be],g.head[be]=b>=_e?b-_e:0;while(--Q);Q=_e,be=Q;do b=g.prev[--be],g.prev[be]=b>=_e?b-_e:0;while(--Q)};let jr=(g,Q,b)=>(Q<<g.hash_shift^b)&g.hash_mask;const zr=g=>{const Q=g.state;let b=Q.pending;b>g.avail_out&&(b=g.avail_out),b!==0&&(g.output.set(Q.pending_buf.subarray(Q.pending_out,Q.pending_out+b),g.next_out),g.next_out+=b,Q.pending_out+=b,g.total_out+=b,g.avail_out-=b,Q.pending-=b,Q.pending===0&&(Q.pending_out=0))},Dr=(g,Q)=>{Ft(g,g.block_start>=0?g.block_start:-1,g.strstart-g.block_start,Q),g.block_start=g.strstart,zr(g.strm)},rr=(g,Q)=>{g.pending_buf[g.pending++]=Q},vi=(g,Q)=>{g.pending_buf[g.pending++]=Q>>>8&255,g.pending_buf[g.pending++]=255&Q},bi=(g,Q,b,be)=>{let _e=g.avail_in;return _e>be&&(_e=be),_e===0?0:(g.avail_in-=_e,Q.set(g.input.subarray(g.next_in,g.next_in+_e),b),g.state.wrap===1?g.adler=Ae(g.adler,Q,_e,b):g.state.wrap===2&&(g.adler=qe(g.adler,Q,_e,b)),g.next_in+=_e,g.total_in+=_e,_e)},Ki=(g,Q)=>{let b,be,_e=g.max_chain_length,ve=g.strstart,$e=g.prev_length,Ie=g.nice_match;const gt=g.strstart>g.w_size-zt?g.strstart-(g.w_size-zt):0,Ne=g.window,Xe=g.w_mask,dr=g.prev,Wt=g.strstart+ht;let _t=Ne[ve+$e-1],si=Ne[ve+$e];g.prev_length>=g.good_match&&(_e>>=2),Ie>g.lookahead&&(Ie=g.lookahead);do if(b=Q,Ne[b+$e]===si&&Ne[b+$e-1]===_t&&Ne[b]===Ne[ve]&&Ne[++b]===Ne[ve+1]){ve+=2,b++;do;while(Ne[++ve]===Ne[++b]&&Ne[++ve]===Ne[++b]&&Ne[++ve]===Ne[++b]&&Ne[++ve]===Ne[++b]&&Ne[++ve]===Ne[++b]&&Ne[++ve]===Ne[++b]&&Ne[++ve]===Ne[++b]&&Ne[++ve]===Ne[++b]&&ve<Wt);if(be=ht-(Wt-ve),ve=Wt-ht,be>$e){if(g.match_start=Q,$e=be,be>=Ie)break;_t=Ne[ve+$e-1],si=Ne[ve+$e]}}while((Q=dr[Q&Xe])>gt&&--_e!==0);return $e<=g.lookahead?$e:g.lookahead},Ai=g=>{const Q=g.w_size;let b,be,_e;do{if(be=g.window_size-g.lookahead-g.strstart,g.strstart>=Q+(Q-zt)&&(g.window.set(g.window.subarray(Q,Q+Q-be),0),g.match_start-=Q,g.strstart-=Q,g.block_start-=Q,g.insert>g.strstart&&(g.insert=g.strstart),gi(g),be+=Q),g.strm.avail_in===0)break;if(b=bi(g.strm,g.window,g.strstart+g.lookahead,be),g.lookahead+=b,g.lookahead+g.insert>=3)for(_e=g.strstart-g.insert,g.ins_h=g.window[_e],g.ins_h=jr(g,g.ins_h,g.window[_e+1]);g.insert&&(g.ins_h=jr(g,g.ins_h,g.window[_e+3-1]),g.prev[_e&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=_e,_e++,g.insert--,!(g.lookahead+g.insert<3)););}while(g.lookahead<zt&&g.strm.avail_in!==0)},Ni=(g,Q)=>{let b,be,_e,ve=g.pending_buf_size-5>g.w_size?g.w_size:g.pending_buf_size-5,$e=0,Ie=g.strm.avail_in;do{if(b=65535,_e=g.bi_valid+42>>3,g.strm.avail_out<_e||(_e=g.strm.avail_out-_e,be=g.strstart-g.block_start,b>be+g.strm.avail_in&&(b=be+g.strm.avail_in),b>_e&&(b=_e),b<ve&&(b===0&&Q!==pr||Q===or||b!==be+g.strm.avail_in)))break;$e=Q===pr&&b===be+g.strm.avail_in?1:0,ot(g,0,0,$e),g.pending_buf[g.pending-4]=b,g.pending_buf[g.pending-3]=b>>8,g.pending_buf[g.pending-2]=~b,g.pending_buf[g.pending-1]=~b>>8,zr(g.strm),be&&(be>b&&(be=b),g.strm.output.set(g.window.subarray(g.block_start,g.block_start+be),g.strm.next_out),g.strm.next_out+=be,g.strm.avail_out-=be,g.strm.total_out+=be,g.block_start+=be,b-=be),b&&(bi(g.strm,g.strm.output,g.strm.next_out,b),g.strm.next_out+=b,g.strm.avail_out-=b,g.strm.total_out+=b)}while($e===0);return Ie-=g.strm.avail_in,Ie&&(Ie>=g.w_size?(g.matches=2,g.window.set(g.strm.input.subarray(g.strm.next_in-g.w_size,g.strm.next_in),0),g.strstart=g.w_size,g.insert=g.strstart):(g.window_size-g.strstart<=Ie&&(g.strstart-=g.w_size,g.window.set(g.window.subarray(g.w_size,g.w_size+g.strstart),0),g.matches<2&&g.matches++,g.insert>g.strstart&&(g.insert=g.strstart)),g.window.set(g.strm.input.subarray(g.strm.next_in-Ie,g.strm.next_in),g.strstart),g.strstart+=Ie,g.insert+=Ie>g.w_size-g.insert?g.w_size-g.insert:Ie),g.block_start=g.strstart),g.high_water<g.strstart&&(g.high_water=g.strstart),$e?4:Q!==or&&Q!==pr&&g.strm.avail_in===0&&g.strstart===g.block_start?2:(_e=g.window_size-g.strstart,g.strm.avail_in>_e&&g.block_start>=g.w_size&&(g.block_start-=g.w_size,g.strstart-=g.w_size,g.window.set(g.window.subarray(g.w_size,g.w_size+g.strstart),0),g.matches<2&&g.matches++,_e+=g.w_size,g.insert>g.strstart&&(g.insert=g.strstart)),_e>g.strm.avail_in&&(_e=g.strm.avail_in),_e&&(bi(g.strm,g.window,g.strstart,_e),g.strstart+=_e,g.insert+=_e>g.w_size-g.insert?g.w_size-g.insert:_e),g.high_water<g.strstart&&(g.high_water=g.strstart),_e=g.bi_valid+42>>3,_e=g.pending_buf_size-_e>65535?65535:g.pending_buf_size-_e,ve=_e>g.w_size?g.w_size:_e,be=g.strstart-g.block_start,(be>=ve||(be||Q===pr)&&Q!==or&&g.strm.avail_in===0&&be<=_e)&&(b=be>_e?_e:be,$e=Q===pr&&g.strm.avail_in===0&&b===be?1:0,ot(g,g.block_start,b,$e),g.block_start+=b,zr(g.strm)),$e?3:1)},Ti=(g,Q)=>{let b,be;for(;;){if(g.lookahead<zt){if(Ai(g),g.lookahead<zt&&Q===or)return 1;if(g.lookahead===0)break}if(b=0,g.lookahead>=3&&(g.ins_h=jr(g,g.ins_h,g.window[g.strstart+3-1]),b=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),b!==0&&g.strstart-b<=g.w_size-zt&&(g.match_length=Ki(g,b)),g.match_length>=3)if(be=Ct(g,g.strstart-g.match_start,g.match_length-3),g.lookahead-=g.match_length,g.match_length<=g.max_lazy_match&&g.lookahead>=3){g.match_length--;do g.strstart++,g.ins_h=jr(g,g.ins_h,g.window[g.strstart+3-1]),b=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart;while(--g.match_length!==0);g.strstart++}else g.strstart+=g.match_length,g.match_length=0,g.ins_h=g.window[g.strstart],g.ins_h=jr(g,g.ins_h,g.window[g.strstart+1]);else be=Ct(g,0,g.window[g.strstart]),g.lookahead--,g.strstart++;if(be&&(Dr(g,!1),g.strm.avail_out===0))return 1}return g.insert=g.strstart<2?g.strstart:2,Q===pr?(Dr(g,!0),g.strm.avail_out===0?3:4):g.sym_next&&(Dr(g,!1),g.strm.avail_out===0)?1:2},pi=(g,Q)=>{let b,be,_e;for(;;){if(g.lookahead<zt){if(Ai(g),g.lookahead<zt&&Q===or)return 1;if(g.lookahead===0)break}if(b=0,g.lookahead>=3&&(g.ins_h=jr(g,g.ins_h,g.window[g.strstart+3-1]),b=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),g.prev_length=g.match_length,g.prev_match=g.match_start,g.match_length=2,b!==0&&g.prev_length<g.max_lazy_match&&g.strstart-b<=g.w_size-zt&&(g.match_length=Ki(g,b),g.match_length<=5&&(g.strategy===Hi||g.match_length===3&&g.strstart-g.match_start>4096)&&(g.match_length=2)),g.prev_length>=3&&g.match_length<=g.prev_length){_e=g.strstart+g.lookahead-3,be=Ct(g,g.strstart-1-g.prev_match,g.prev_length-3),g.lookahead-=g.prev_length-1,g.prev_length-=2;do++g.strstart<=_e&&(g.ins_h=jr(g,g.ins_h,g.window[g.strstart+3-1]),b=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart);while(--g.prev_length!==0);if(g.match_available=0,g.match_length=2,g.strstart++,be&&(Dr(g,!1),g.strm.avail_out===0))return 1}else if(g.match_available){if(be=Ct(g,0,g.window[g.strstart-1]),be&&Dr(g,!1),g.strstart++,g.lookahead--,g.strm.avail_out===0)return 1}else g.match_available=1,g.strstart++,g.lookahead--}return g.match_available&&(be=Ct(g,0,g.window[g.strstart-1]),g.match_available=0),g.insert=g.strstart<2?g.strstart:2,Q===pr?(Dr(g,!0),g.strm.avail_out===0?3:4):g.sym_next&&(Dr(g,!1),g.strm.avail_out===0)?1:2};function Br(g,Q,b,be,_e){this.good_length=g,this.max_lazy=Q,this.nice_length=b,this.max_chain=be,this.func=_e}const Yr=[new Br(0,0,0,0,Ni),new Br(4,4,8,4,Ti),new Br(4,5,16,8,Ti),new Br(4,6,32,32,Ti),new Br(4,4,16,16,pi),new Br(8,16,32,32,pi),new Br(8,16,128,128,pi),new Br(8,32,128,256,pi),new Br(32,128,258,1024,pi),new Br(32,258,258,4096,pi)];function Vi(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=It,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ui(this.dyn_ltree),ui(this.dyn_dtree),ui(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ui(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ui(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const yi=g=>{if(!g)return 1;const Q=g.state;return!Q||Q.strm!==g||Q.status!==Ut&&Q.status!==57&&Q.status!==69&&Q.status!==73&&Q.status!==91&&Q.status!==103&&Q.status!==Ot&&Q.status!==mr?1:0},Wi=g=>{if(yi(g))return li(g,Pr);g.total_in=g.total_out=0,g.data_type=nt;const Q=g.state;return Q.pending=0,Q.pending_out=0,Q.wrap<0&&(Q.wrap=-Q.wrap),Q.status=Q.wrap===2?57:Q.wrap?Ut:Ot,g.adler=Q.wrap===2?0:1,Q.last_flush=-2,at(Q),xr},tn=g=>{const Q=Wi(g);var b;return Q===xr&&((b=g.state).window_size=2*b.w_size,ui(b.head),b.max_lazy_match=Yr[b.level].max_lazy,b.good_match=Yr[b.level].good_length,b.nice_match=Yr[b.level].nice_length,b.max_chain_length=Yr[b.level].max_chain,b.strstart=0,b.block_start=0,b.lookahead=0,b.insert=0,b.match_length=b.prev_length=2,b.match_available=0,b.ins_h=0),Q},an=(g,Q,b,be,_e,ve)=>{if(!g)return Pr;let $e=1;if(Q===wi&&(Q=6),be<0?($e=0,be=-be):be>15&&($e=2,be-=16),_e<1||_e>9||b!==It||be<8||be>15||Q<0||Q>9||ve<0||ve>Oe||be===8&&$e!==1)return li(g,Pr);be===8&&(be=9);const Ie=new Vi;return g.state=Ie,Ie.strm=g,Ie.status=Ut,Ie.wrap=$e,Ie.gzhead=null,Ie.w_bits=be,Ie.w_size=1<<Ie.w_bits,Ie.w_mask=Ie.w_size-1,Ie.hash_bits=_e+7,Ie.hash_size=1<<Ie.hash_bits,Ie.hash_mask=Ie.hash_size-1,Ie.hash_shift=~~((Ie.hash_bits+3-1)/3),Ie.window=new Uint8Array(2*Ie.w_size),Ie.head=new Uint16Array(Ie.hash_size),Ie.prev=new Uint16Array(Ie.w_size),Ie.lit_bufsize=1<<_e+6,Ie.pending_buf_size=4*Ie.lit_bufsize,Ie.pending_buf=new Uint8Array(Ie.pending_buf_size),Ie.sym_buf=Ie.lit_bufsize,Ie.sym_end=3*(Ie.lit_bufsize-1),Ie.level=Q,Ie.strategy=ve,Ie.method=b,tn(g)};var ur={deflateInit:(g,Q)=>an(g,Q,It,15,8,dt),deflateInit2:an,deflateReset:tn,deflateResetKeep:Wi,deflateSetHeader:(g,Q)=>yi(g)||g.state.wrap!==2?Pr:(g.state.gzhead=Q,xr),deflate:(g,Q)=>{if(yi(g)||Q>vr||Q<0)return g?li(g,Pr):Pr;const b=g.state;if(!g.output||g.avail_in!==0&&!g.input||b.status===mr&&Q!==pr)return li(g,g.avail_out===0?Di:Pr);const be=b.last_flush;if(b.last_flush=Q,b.pending!==0){if(zr(g),g.avail_out===0)return b.last_flush=-1,xr}else if(g.avail_in===0&&Ci(Q)<=Ci(be)&&Q!==pr)return li(g,Di);if(b.status===mr&&g.avail_in!==0)return li(g,Di);if(b.status===Ut&&b.wrap===0&&(b.status=Ot),b.status===Ut){let _e=It+(b.w_bits-8<<4)<<8,ve=-1;if(ve=b.strategy>=pe||b.level<2?0:b.level<6?1:b.level===6?2:3,_e|=ve<<6,b.strstart!==0&&(_e|=32),_e+=31-_e%31,vi(b,_e),b.strstart!==0&&(vi(b,g.adler>>>16),vi(b,65535&g.adler)),g.adler=1,b.status=Ot,zr(g),b.pending!==0)return b.last_flush=-1,xr}if(b.status===57){if(g.adler=0,rr(b,31),rr(b,139),rr(b,8),b.gzhead)rr(b,(b.gzhead.text?1:0)+(b.gzhead.hcrc?2:0)+(b.gzhead.extra?4:0)+(b.gzhead.name?8:0)+(b.gzhead.comment?16:0)),rr(b,255&b.gzhead.time),rr(b,b.gzhead.time>>8&255),rr(b,b.gzhead.time>>16&255),rr(b,b.gzhead.time>>24&255),rr(b,b.level===9?2:b.strategy>=pe||b.level<2?4:0),rr(b,255&b.gzhead.os),b.gzhead.extra&&b.gzhead.extra.length&&(rr(b,255&b.gzhead.extra.length),rr(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(g.adler=qe(g.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=69;else if(rr(b,0),rr(b,0),rr(b,0),rr(b,0),rr(b,0),rr(b,b.level===9?2:b.strategy>=pe||b.level<2?4:0),rr(b,3),b.status=Ot,zr(g),b.pending!==0)return b.last_flush=-1,xr}if(b.status===69){if(b.gzhead.extra){let _e=b.pending,ve=(65535&b.gzhead.extra.length)-b.gzindex;for(;b.pending+ve>b.pending_buf_size;){let Ie=b.pending_buf_size-b.pending;if(b.pending_buf.set(b.gzhead.extra.subarray(b.gzindex,b.gzindex+Ie),b.pending),b.pending=b.pending_buf_size,b.gzhead.hcrc&&b.pending>_e&&(g.adler=qe(g.adler,b.pending_buf,b.pending-_e,_e)),b.gzindex+=Ie,zr(g),b.pending!==0)return b.last_flush=-1,xr;_e=0,ve-=Ie}let $e=new Uint8Array(b.gzhead.extra);b.pending_buf.set($e.subarray(b.gzindex,b.gzindex+ve),b.pending),b.pending+=ve,b.gzhead.hcrc&&b.pending>_e&&(g.adler=qe(g.adler,b.pending_buf,b.pending-_e,_e)),b.gzindex=0}b.status=73}if(b.status===73){if(b.gzhead.name){let _e,ve=b.pending;do{if(b.pending===b.pending_buf_size){if(b.gzhead.hcrc&&b.pending>ve&&(g.adler=qe(g.adler,b.pending_buf,b.pending-ve,ve)),zr(g),b.pending!==0)return b.last_flush=-1,xr;ve=0}_e=b.gzindex<b.gzhead.name.length?255&b.gzhead.name.charCodeAt(b.gzindex++):0,rr(b,_e)}while(_e!==0);b.gzhead.hcrc&&b.pending>ve&&(g.adler=qe(g.adler,b.pending_buf,b.pending-ve,ve)),b.gzindex=0}b.status=91}if(b.status===91){if(b.gzhead.comment){let _e,ve=b.pending;do{if(b.pending===b.pending_buf_size){if(b.gzhead.hcrc&&b.pending>ve&&(g.adler=qe(g.adler,b.pending_buf,b.pending-ve,ve)),zr(g),b.pending!==0)return b.last_flush=-1,xr;ve=0}_e=b.gzindex<b.gzhead.comment.length?255&b.gzhead.comment.charCodeAt(b.gzindex++):0,rr(b,_e)}while(_e!==0);b.gzhead.hcrc&&b.pending>ve&&(g.adler=qe(g.adler,b.pending_buf,b.pending-ve,ve))}b.status=103}if(b.status===103){if(b.gzhead.hcrc){if(b.pending+2>b.pending_buf_size&&(zr(g),b.pending!==0))return b.last_flush=-1,xr;rr(b,255&g.adler),rr(b,g.adler>>8&255),g.adler=0}if(b.status=Ot,zr(g),b.pending!==0)return b.last_flush=-1,xr}if(g.avail_in!==0||b.lookahead!==0||Q!==or&&b.status!==mr){let _e=b.level===0?Ni(b,Q):b.strategy===pe?((ve,$e)=>{let Ie;for(;;){if(ve.lookahead===0&&(Ai(ve),ve.lookahead===0)){if($e===or)return 1;break}if(ve.match_length=0,Ie=Ct(ve,0,ve.window[ve.strstart]),ve.lookahead--,ve.strstart++,Ie&&(Dr(ve,!1),ve.strm.avail_out===0))return 1}return ve.insert=0,$e===pr?(Dr(ve,!0),ve.strm.avail_out===0?3:4):ve.sym_next&&(Dr(ve,!1),ve.strm.avail_out===0)?1:2})(b,Q):b.strategy===Ee?((ve,$e)=>{let Ie,gt,Ne,Xe;const dr=ve.window;for(;;){if(ve.lookahead<=ht){if(Ai(ve),ve.lookahead<=ht&&$e===or)return 1;if(ve.lookahead===0)break}if(ve.match_length=0,ve.lookahead>=3&&ve.strstart>0&&(Ne=ve.strstart-1,gt=dr[Ne],gt===dr[++Ne]&&gt===dr[++Ne]&&gt===dr[++Ne])){Xe=ve.strstart+ht;do;while(gt===dr[++Ne]&&gt===dr[++Ne]&&gt===dr[++Ne]&&gt===dr[++Ne]&&gt===dr[++Ne]&&gt===dr[++Ne]&&gt===dr[++Ne]&&gt===dr[++Ne]&&Ne<Xe);ve.match_length=ht-(Xe-Ne),ve.match_length>ve.lookahead&&(ve.match_length=ve.lookahead)}if(ve.match_length>=3?(Ie=Ct(ve,1,ve.match_length-3),ve.lookahead-=ve.match_length,ve.strstart+=ve.match_length,ve.match_length=0):(Ie=Ct(ve,0,ve.window[ve.strstart]),ve.lookahead--,ve.strstart++),Ie&&(Dr(ve,!1),ve.strm.avail_out===0))return 1}return ve.insert=0,$e===pr?(Dr(ve,!0),ve.strm.avail_out===0?3:4):ve.sym_next&&(Dr(ve,!1),ve.strm.avail_out===0)?1:2})(b,Q):Yr[b.level].func(b,Q);if(_e!==3&&_e!==4||(b.status=mr),_e===1||_e===3)return g.avail_out===0&&(b.last_flush=-1),xr;if(_e===2&&(Q===Mr?ar(b):Q!==vr&&(ot(b,0,0,!1),Q===Er&&(ui(b.head),b.lookahead===0&&(b.strstart=0,b.block_start=0,b.insert=0))),zr(g),g.avail_out===0))return b.last_flush=-1,xr}return Q!==pr?xr:b.wrap<=0?fi:(b.wrap===2?(rr(b,255&g.adler),rr(b,g.adler>>8&255),rr(b,g.adler>>16&255),rr(b,g.adler>>24&255),rr(b,255&g.total_in),rr(b,g.total_in>>8&255),rr(b,g.total_in>>16&255),rr(b,g.total_in>>24&255)):(vi(b,g.adler>>>16),vi(b,65535&g.adler)),zr(g),b.wrap>0&&(b.wrap=-b.wrap),b.pending!==0?xr:fi)},deflateEnd:g=>{if(yi(g))return Pr;const Q=g.state.status;return g.state=null,Q===Ot?li(g,Or):xr},deflateSetDictionary:(g,Q)=>{let b=Q.length;if(yi(g))return Pr;const be=g.state,_e=be.wrap;if(_e===2||_e===1&&be.status!==Ut||be.lookahead)return Pr;if(_e===1&&(g.adler=Ae(g.adler,Q,b,0)),be.wrap=0,b>=be.w_size){_e===0&&(ui(be.head),be.strstart=0,be.block_start=0,be.insert=0);let gt=new Uint8Array(be.w_size);gt.set(Q.subarray(b-be.w_size,b),0),Q=gt,b=be.w_size}const ve=g.avail_in,$e=g.next_in,Ie=g.input;for(g.avail_in=b,g.next_in=0,g.input=Q,Ai(be);be.lookahead>=3;){let gt=be.strstart,Ne=be.lookahead-2;do be.ins_h=jr(be,be.ins_h,be.window[gt+3-1]),be.prev[gt&be.w_mask]=be.head[be.ins_h],be.head[be.ins_h]=gt,gt++;while(--Ne);be.strstart=gt,be.lookahead=2,Ai(be)}return be.strstart+=be.lookahead,be.block_start=be.strstart,be.insert=be.lookahead,be.lookahead=0,be.match_length=be.prev_length=2,be.match_available=0,g.next_in=$e,g.input=Ie,g.avail_in=ve,be.wrap=_e,xr},deflateInfo:"pako deflate (from Nodeca project)"};const Gr=(g,Q)=>Object.prototype.hasOwnProperty.call(g,Q);var Kr=function(g){const Q=Array.prototype.slice.call(arguments,1);for(;Q.length;){const b=Q.shift();if(b){if(typeof b!="object")throw new TypeError(b+"must be non-object");for(const be in b)Gr(b,be)&&(g[be]=b[be])}}return g},qi=g=>{let Q=0;for(let be=0,_e=g.length;be<_e;be++)Q+=g[be].length;const b=new Uint8Array(Q);for(let be=0,_e=0,ve=g.length;be<ve;be++){let $e=g[be];b.set($e,_e),_e+=$e.length}return b};let Bt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Bt=!1}const E=new Uint8Array(256);for(let g=0;g<256;g++)E[g]=g>=252?6:g>=248?5:g>=240?4:g>=224?3:g>=192?2:1;E[254]=E[254]=1;var ne=g=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(g);let Q,b,be,_e,ve,$e=g.length,Ie=0;for(_e=0;_e<$e;_e++)b=g.charCodeAt(_e),(64512&b)==55296&&_e+1<$e&&(be=g.charCodeAt(_e+1),(64512&be)==56320&&(b=65536+(b-55296<<10)+(be-56320),_e++)),Ie+=b<128?1:b<2048?2:b<65536?3:4;for(Q=new Uint8Array(Ie),ve=0,_e=0;ve<Ie;_e++)b=g.charCodeAt(_e),(64512&b)==55296&&_e+1<$e&&(be=g.charCodeAt(_e+1),(64512&be)==56320&&(b=65536+(b-55296<<10)+(be-56320),_e++)),b<128?Q[ve++]=b:b<2048?(Q[ve++]=192|b>>>6,Q[ve++]=128|63&b):b<65536?(Q[ve++]=224|b>>>12,Q[ve++]=128|b>>>6&63,Q[ve++]=128|63&b):(Q[ve++]=240|b>>>18,Q[ve++]=128|b>>>12&63,Q[ve++]=128|b>>>6&63,Q[ve++]=128|63&b);return Q},xe=(g,Q)=>{const b=Q||g.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(g.subarray(0,Q));let be,_e;const ve=new Array(2*b);for(_e=0,be=0;be<b;){let $e=g[be++];if($e<128){ve[_e++]=$e;continue}let Ie=E[$e];if(Ie>4)ve[_e++]=65533,be+=Ie-1;else{for($e&=Ie===2?31:Ie===3?15:7;Ie>1&&be<b;)$e=$e<<6|63&g[be++],Ie--;Ie>1?ve[_e++]=65533:$e<65536?ve[_e++]=$e:($e-=65536,ve[_e++]=55296|$e>>10&1023,ve[_e++]=56320|1023&$e)}}return(($e,Ie)=>{if(Ie<65534&&$e.subarray&&Bt)return String.fromCharCode.apply(null,$e.length===Ie?$e:$e.subarray(0,Ie));let gt="";for(let Ne=0;Ne<Ie;Ne++)gt+=String.fromCharCode($e[Ne]);return gt})(ve,_e)},Ve=(g,Q)=>{(Q=Q||g.length)>g.length&&(Q=g.length);let b=Q-1;for(;b>=0&&(192&g[b])==128;)b--;return b<0||b===0?Q:b+E[g[b]]>Q?b:Q},ze=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const yt=Object.prototype.toString,{Z_NO_FLUSH:lt,Z_SYNC_FLUSH:mt,Z_FULL_FLUSH:Rt,Z_FINISH:kt,Z_OK:Lt,Z_STREAM_END:gr,Z_DEFAULT_COMPRESSION:Yt,Z_DEFAULT_STRATEGY:Cr,Z_DEFLATED:Ar}=rt;function Ur(g){this.options=Kr({level:Yt,method:Ar,chunkSize:16384,windowBits:15,memLevel:8,strategy:Cr},g||{});let Q=this.options;Q.raw&&Q.windowBits>0?Q.windowBits=-Q.windowBits:Q.gzip&&Q.windowBits>0&&Q.windowBits<16&&(Q.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ze,this.strm.avail_out=0;let b=ur.deflateInit2(this.strm,Q.level,Q.method,Q.windowBits,Q.memLevel,Q.strategy);if(b!==Lt)throw new Error(Fe[b]);if(Q.header&&ur.deflateSetHeader(this.strm,Q.header),Q.dictionary){let be;if(be=typeof Q.dictionary=="string"?ne(Q.dictionary):yt.call(Q.dictionary)==="[object ArrayBuffer]"?new Uint8Array(Q.dictionary):Q.dictionary,b=ur.deflateSetDictionary(this.strm,be),b!==Lt)throw new Error(Fe[b]);this._dict_set=!0}}function _r(g,Q){const b=new Ur(Q);if(b.push(g,!0),b.err)throw b.msg||Fe[b.err];return b.result}Ur.prototype.push=function(g,Q){const b=this.strm,be=this.options.chunkSize;let _e,ve;if(this.ended)return!1;for(ve=Q===~~Q?Q:Q===!0?kt:lt,typeof g=="string"?b.input=ne(g):yt.call(g)==="[object ArrayBuffer]"?b.input=new Uint8Array(g):b.input=g,b.next_in=0,b.avail_in=b.input.length;;)if(b.avail_out===0&&(b.output=new Uint8Array(be),b.next_out=0,b.avail_out=be),(ve===mt||ve===Rt)&&b.avail_out<=6)this.onData(b.output.subarray(0,b.next_out)),b.avail_out=0;else{if(_e=ur.deflate(b,ve),_e===gr)return b.next_out>0&&this.onData(b.output.subarray(0,b.next_out)),_e=ur.deflateEnd(this.strm),this.onEnd(_e),this.ended=!0,_e===Lt;if(b.avail_out!==0){if(ve>0&&b.next_out>0)this.onData(b.output.subarray(0,b.next_out)),b.avail_out=0;else if(b.avail_in===0)break}else this.onData(b.output)}return!0},Ur.prototype.onData=function(g){this.chunks.push(g)},Ur.prototype.onEnd=function(g){g===Lt&&(this.result=qi(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg};var Lr={Deflate:Ur,deflate:_r,deflateRaw:function(g,Q){return(Q=Q||{}).raw=!0,_r(g,Q)},gzip:function(g,Q){return(Q=Q||{}).gzip=!0,_r(g,Q)}};const wr=16209;var Ri=function(g,Q){let b,be,_e,ve,$e,Ie,gt,Ne,Xe,dr,Wt,_t,si,Rr,er,Ir,lr,At,sr,kr,Dt,Sr,cr,tr;const fr=g.state;b=g.next_in,cr=g.input,be=b+(g.avail_in-5),_e=g.next_out,tr=g.output,ve=_e-(Q-g.avail_out),$e=_e+(g.avail_out-257),Ie=fr.dmax,gt=fr.wsize,Ne=fr.whave,Xe=fr.wnext,dr=fr.window,Wt=fr.hold,_t=fr.bits,si=fr.lencode,Rr=fr.distcode,er=(1<<fr.lenbits)-1,Ir=(1<<fr.distbits)-1;e:do{_t<15&&(Wt+=cr[b++]<<_t,_t+=8,Wt+=cr[b++]<<_t,_t+=8),lr=si[Wt&er];t:for(;;){if(At=lr>>>24,Wt>>>=At,_t-=At,At=lr>>>16&255,At===0)tr[_e++]=65535&lr;else{if(!(16&At)){if(64&At){if(32&At){fr.mode=16191;break e}g.msg="invalid literal/length code",fr.mode=wr;break e}lr=si[(65535&lr)+(Wt&(1<<At)-1)];continue t}for(sr=65535&lr,At&=15,At&&(_t<At&&(Wt+=cr[b++]<<_t,_t+=8),sr+=Wt&(1<<At)-1,Wt>>>=At,_t-=At),_t<15&&(Wt+=cr[b++]<<_t,_t+=8,Wt+=cr[b++]<<_t,_t+=8),lr=Rr[Wt&Ir];;){if(At=lr>>>24,Wt>>>=At,_t-=At,At=lr>>>16&255,16&At){if(kr=65535&lr,At&=15,_t<At&&(Wt+=cr[b++]<<_t,_t+=8,_t<At&&(Wt+=cr[b++]<<_t,_t+=8)),kr+=Wt&(1<<At)-1,kr>Ie){g.msg="invalid distance too far back",fr.mode=wr;break e}if(Wt>>>=At,_t-=At,At=_e-ve,kr>At){if(At=kr-At,At>Ne&&fr.sane){g.msg="invalid distance too far back",fr.mode=wr;break e}if(Dt=0,Sr=dr,Xe===0){if(Dt+=gt-At,At<sr){sr-=At;do tr[_e++]=dr[Dt++];while(--At);Dt=_e-kr,Sr=tr}}else if(Xe<At){if(Dt+=gt+Xe-At,At-=Xe,At<sr){sr-=At;do tr[_e++]=dr[Dt++];while(--At);if(Dt=0,Xe<sr){At=Xe,sr-=At;do tr[_e++]=dr[Dt++];while(--At);Dt=_e-kr,Sr=tr}}}else if(Dt+=Xe-At,At<sr){sr-=At;do tr[_e++]=dr[Dt++];while(--At);Dt=_e-kr,Sr=tr}for(;sr>2;)tr[_e++]=Sr[Dt++],tr[_e++]=Sr[Dt++],tr[_e++]=Sr[Dt++],sr-=3;sr&&(tr[_e++]=Sr[Dt++],sr>1&&(tr[_e++]=Sr[Dt++]))}else{Dt=_e-kr;do tr[_e++]=tr[Dt++],tr[_e++]=tr[Dt++],tr[_e++]=tr[Dt++],sr-=3;while(sr>2);sr&&(tr[_e++]=tr[Dt++],sr>1&&(tr[_e++]=tr[Dt++]))}break}if(64&At){g.msg="invalid distance code",fr.mode=wr;break e}lr=Rr[(65535&lr)+(Wt&(1<<At)-1)]}}break}}while(b<be&&_e<$e);sr=_t>>3,b-=sr,_t-=sr<<3,Wt&=(1<<_t)-1,g.next_in=b,g.next_out=_e,g.avail_in=b<be?be-b+5:5-(b-be),g.avail_out=_e<$e?$e-_e+257:257-(_e-$e),fr.hold=Wt,fr.bits=_t};const Zt=15,ri=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),oe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),a=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var h=(g,Q,b,be,_e,ve,$e,Ie)=>{const gt=Ie.bits;let Ne,Xe,dr,Wt,_t,si,Rr=0,er=0,Ir=0,lr=0,At=0,sr=0,kr=0,Dt=0,Sr=0,cr=0,tr=null;const fr=new Uint16Array(16),zi=new Uint16Array(16);let Wn,as,$n,Xn=null;for(Rr=0;Rr<=Zt;Rr++)fr[Rr]=0;for(er=0;er<be;er++)fr[Q[b+er]]++;for(At=gt,lr=Zt;lr>=1&&fr[lr]===0;lr--);if(At>lr&&(At=lr),lr===0)return _e[ve++]=20971520,_e[ve++]=20971520,Ie.bits=1,0;for(Ir=1;Ir<lr&&fr[Ir]===0;Ir++);for(At<Ir&&(At=Ir),Dt=1,Rr=1;Rr<=Zt;Rr++)if(Dt<<=1,Dt-=fr[Rr],Dt<0)return-1;if(Dt>0&&(g===0||lr!==1))return-1;for(zi[1]=0,Rr=1;Rr<Zt;Rr++)zi[Rr+1]=zi[Rr]+fr[Rr];for(er=0;er<be;er++)Q[b+er]!==0&&($e[zi[Q[b+er]]++]=er);if(g===0?(tr=Xn=$e,si=20):g===1?(tr=ri,Xn=oe,si=257):(tr=n,Xn=a,si=0),cr=0,er=0,Rr=Ir,_t=ve,sr=At,kr=0,dr=-1,Sr=1<<At,Wt=Sr-1,g===1&&Sr>852||g===2&&Sr>592)return 1;for(;;){Wn=Rr-kr,$e[er]+1<si?(as=0,$n=$e[er]):$e[er]>=si?(as=Xn[$e[er]-si],$n=tr[$e[er]-si]):(as=96,$n=0),Ne=1<<Rr-kr,Xe=1<<sr,Ir=Xe;do Xe-=Ne,_e[_t+(cr>>kr)+Xe]=Wn<<24|as<<16|$n;while(Xe!==0);for(Ne=1<<Rr-1;cr&Ne;)Ne>>=1;if(Ne!==0?(cr&=Ne-1,cr+=Ne):cr=0,er++,--fr[Rr]===0){if(Rr===lr)break;Rr=Q[b+$e[er]]}if(Rr>At&&(cr&Wt)!==dr){for(kr===0&&(kr=At),_t+=Ir,sr=Rr-kr,Dt=1<<sr;sr+kr<lr&&(Dt-=fr[sr+kr],!(Dt<=0));)sr++,Dt<<=1;if(Sr+=1<<sr,g===1&&Sr>852||g===2&&Sr>592)return 1;dr=cr&Wt,_e[dr]=At<<24|sr<<16|_t-ve}}return cr!==0&&(_e[_t+cr]=Rr-kr<<24|64<<16),Ie.bits=At,0};const{Z_FINISH:f,Z_BLOCK:T,Z_TREES:_,Z_OK:M,Z_STREAM_END:P,Z_NEED_DICT:A,Z_STREAM_ERROR:D,Z_DATA_ERROR:z,Z_MEM_ERROR:$,Z_BUF_ERROR:U,Z_DEFLATED:V}=rt,H=16180,G=16190,Y=16191,te=16192,re=16194,de=16199,le=16200,ye=16206,Pe=16209,Re=g=>(g>>>24&255)+(g>>>8&65280)+((65280&g)<<8)+((255&g)<<24);function Me(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const we=g=>{if(!g)return 1;const Q=g.state;return!Q||Q.strm!==g||Q.mode<H||Q.mode>16211?1:0},Ue=g=>{if(we(g))return D;const Q=g.state;return g.total_in=g.total_out=Q.total=0,g.msg="",Q.wrap&&(g.adler=1&Q.wrap),Q.mode=H,Q.last=0,Q.havedict=0,Q.flags=-1,Q.dmax=32768,Q.head=null,Q.hold=0,Q.bits=0,Q.lencode=Q.lendyn=new Int32Array(852),Q.distcode=Q.distdyn=new Int32Array(592),Q.sane=1,Q.back=-1,M},Je=g=>{if(we(g))return D;const Q=g.state;return Q.wsize=0,Q.whave=0,Q.wnext=0,Ue(g)},tt=(g,Q)=>{let b;if(we(g))return D;const be=g.state;return Q<0?(b=0,Q=-Q):(b=5+(Q>>4),Q<48&&(Q&=15)),Q&&(Q<8||Q>15)?D:(be.window!==null&&be.wbits!==Q&&(be.window=null),be.wrap=b,be.wbits=Q,Je(g))},Ye=(g,Q)=>{if(!g)return D;const b=new Me;g.state=b,b.strm=g,b.window=null,b.mode=H;const be=tt(g,Q);return be!==M&&(g.state=null),be};let ut,ft,Ze=!0;const pt=g=>{if(Ze){ut=new Int32Array(512),ft=new Int32Array(32);let Q=0;for(;Q<144;)g.lens[Q++]=8;for(;Q<256;)g.lens[Q++]=9;for(;Q<280;)g.lens[Q++]=7;for(;Q<288;)g.lens[Q++]=8;for(h(1,g.lens,0,288,ut,0,g.work,{bits:9}),Q=0;Q<32;)g.lens[Q++]=5;h(2,g.lens,0,32,ft,0,g.work,{bits:5}),Ze=!1}g.lencode=ut,g.lenbits=9,g.distcode=ft,g.distbits=5},Be=(g,Q,b,be)=>{let _e;const ve=g.state;return ve.window===null&&(ve.wsize=1<<ve.wbits,ve.wnext=0,ve.whave=0,ve.window=new Uint8Array(ve.wsize)),be>=ve.wsize?(ve.window.set(Q.subarray(b-ve.wsize,b),0),ve.wnext=0,ve.whave=ve.wsize):(_e=ve.wsize-ve.wnext,_e>be&&(_e=be),ve.window.set(Q.subarray(b-be,b-be+_e),ve.wnext),(be-=_e)?(ve.window.set(Q.subarray(b-be,b),0),ve.wnext=be,ve.whave=ve.wsize):(ve.wnext+=_e,ve.wnext===ve.wsize&&(ve.wnext=0),ve.whave<ve.wsize&&(ve.whave+=_e))),0};var et={inflateReset:Je,inflateReset2:tt,inflateResetKeep:Ue,inflateInit:g=>Ye(g,15),inflateInit2:Ye,inflate:(g,Q)=>{let b,be,_e,ve,$e,Ie,gt,Ne,Xe,dr,Wt,_t,si,Rr,er,Ir,lr,At,sr,kr,Dt,Sr,cr=0;const tr=new Uint8Array(4);let fr,zi;const Wn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(we(g)||!g.output||!g.input&&g.avail_in!==0)return D;b=g.state,b.mode===Y&&(b.mode=te),$e=g.next_out,_e=g.output,gt=g.avail_out,ve=g.next_in,be=g.input,Ie=g.avail_in,Ne=b.hold,Xe=b.bits,dr=Ie,Wt=gt,Sr=M;e:for(;;)switch(b.mode){case H:if(b.wrap===0){b.mode=te;break}for(;Xe<16;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(2&b.wrap&&Ne===35615){b.wbits===0&&(b.wbits=15),b.check=0,tr[0]=255&Ne,tr[1]=Ne>>>8&255,b.check=qe(b.check,tr,2,0),Ne=0,Xe=0,b.mode=16181;break}if(b.head&&(b.head.done=!1),!(1&b.wrap)||(((255&Ne)<<8)+(Ne>>8))%31){g.msg="incorrect header check",b.mode=Pe;break}if((15&Ne)!==V){g.msg="unknown compression method",b.mode=Pe;break}if(Ne>>>=4,Xe-=4,Dt=8+(15&Ne),b.wbits===0&&(b.wbits=Dt),Dt>15||Dt>b.wbits){g.msg="invalid window size",b.mode=Pe;break}b.dmax=1<<b.wbits,b.flags=0,g.adler=b.check=1,b.mode=512&Ne?16189:Y,Ne=0,Xe=0;break;case 16181:for(;Xe<16;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(b.flags=Ne,(255&b.flags)!==V){g.msg="unknown compression method",b.mode=Pe;break}if(57344&b.flags){g.msg="unknown header flags set",b.mode=Pe;break}b.head&&(b.head.text=Ne>>8&1),512&b.flags&&4&b.wrap&&(tr[0]=255&Ne,tr[1]=Ne>>>8&255,b.check=qe(b.check,tr,2,0)),Ne=0,Xe=0,b.mode=16182;case 16182:for(;Xe<32;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}b.head&&(b.head.time=Ne),512&b.flags&&4&b.wrap&&(tr[0]=255&Ne,tr[1]=Ne>>>8&255,tr[2]=Ne>>>16&255,tr[3]=Ne>>>24&255,b.check=qe(b.check,tr,4,0)),Ne=0,Xe=0,b.mode=16183;case 16183:for(;Xe<16;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}b.head&&(b.head.xflags=255&Ne,b.head.os=Ne>>8),512&b.flags&&4&b.wrap&&(tr[0]=255&Ne,tr[1]=Ne>>>8&255,b.check=qe(b.check,tr,2,0)),Ne=0,Xe=0,b.mode=16184;case 16184:if(1024&b.flags){for(;Xe<16;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}b.length=Ne,b.head&&(b.head.extra_len=Ne),512&b.flags&&4&b.wrap&&(tr[0]=255&Ne,tr[1]=Ne>>>8&255,b.check=qe(b.check,tr,2,0)),Ne=0,Xe=0}else b.head&&(b.head.extra=null);b.mode=16185;case 16185:if(1024&b.flags&&(_t=b.length,_t>Ie&&(_t=Ie),_t&&(b.head&&(Dt=b.head.extra_len-b.length,b.head.extra||(b.head.extra=new Uint8Array(b.head.extra_len)),b.head.extra.set(be.subarray(ve,ve+_t),Dt)),512&b.flags&&4&b.wrap&&(b.check=qe(b.check,be,_t,ve)),Ie-=_t,ve+=_t,b.length-=_t),b.length))break e;b.length=0,b.mode=16186;case 16186:if(2048&b.flags){if(Ie===0)break e;_t=0;do Dt=be[ve+_t++],b.head&&Dt&&b.length<65536&&(b.head.name+=String.fromCharCode(Dt));while(Dt&&_t<Ie);if(512&b.flags&&4&b.wrap&&(b.check=qe(b.check,be,_t,ve)),Ie-=_t,ve+=_t,Dt)break e}else b.head&&(b.head.name=null);b.length=0,b.mode=16187;case 16187:if(4096&b.flags){if(Ie===0)break e;_t=0;do Dt=be[ve+_t++],b.head&&Dt&&b.length<65536&&(b.head.comment+=String.fromCharCode(Dt));while(Dt&&_t<Ie);if(512&b.flags&&4&b.wrap&&(b.check=qe(b.check,be,_t,ve)),Ie-=_t,ve+=_t,Dt)break e}else b.head&&(b.head.comment=null);b.mode=16188;case 16188:if(512&b.flags){for(;Xe<16;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(4&b.wrap&&Ne!==(65535&b.check)){g.msg="header crc mismatch",b.mode=Pe;break}Ne=0,Xe=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0),g.adler=b.check=0,b.mode=Y;break;case 16189:for(;Xe<32;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}g.adler=b.check=Re(Ne),Ne=0,Xe=0,b.mode=G;case G:if(b.havedict===0)return g.next_out=$e,g.avail_out=gt,g.next_in=ve,g.avail_in=Ie,b.hold=Ne,b.bits=Xe,A;g.adler=b.check=1,b.mode=Y;case Y:if(Q===T||Q===_)break e;case te:if(b.last){Ne>>>=7&Xe,Xe-=7&Xe,b.mode=ye;break}for(;Xe<3;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}switch(b.last=1&Ne,Ne>>>=1,Xe-=1,3&Ne){case 0:b.mode=16193;break;case 1:if(pt(b),b.mode=de,Q===_){Ne>>>=2,Xe-=2;break e}break;case 2:b.mode=16196;break;case 3:g.msg="invalid block type",b.mode=Pe}Ne>>>=2,Xe-=2;break;case 16193:for(Ne>>>=7&Xe,Xe-=7&Xe;Xe<32;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if((65535&Ne)!=(Ne>>>16^65535)){g.msg="invalid stored block lengths",b.mode=Pe;break}if(b.length=65535&Ne,Ne=0,Xe=0,b.mode=re,Q===_)break e;case re:b.mode=16195;case 16195:if(_t=b.length,_t){if(_t>Ie&&(_t=Ie),_t>gt&&(_t=gt),_t===0)break e;_e.set(be.subarray(ve,ve+_t),$e),Ie-=_t,ve+=_t,gt-=_t,$e+=_t,b.length-=_t;break}b.mode=Y;break;case 16196:for(;Xe<14;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(b.nlen=257+(31&Ne),Ne>>>=5,Xe-=5,b.ndist=1+(31&Ne),Ne>>>=5,Xe-=5,b.ncode=4+(15&Ne),Ne>>>=4,Xe-=4,b.nlen>286||b.ndist>30){g.msg="too many length or distance symbols",b.mode=Pe;break}b.have=0,b.mode=16197;case 16197:for(;b.have<b.ncode;){for(;Xe<3;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}b.lens[Wn[b.have++]]=7&Ne,Ne>>>=3,Xe-=3}for(;b.have<19;)b.lens[Wn[b.have++]]=0;if(b.lencode=b.lendyn,b.lenbits=7,fr={bits:b.lenbits},Sr=h(0,b.lens,0,19,b.lencode,0,b.work,fr),b.lenbits=fr.bits,Sr){g.msg="invalid code lengths set",b.mode=Pe;break}b.have=0,b.mode=16198;case 16198:for(;b.have<b.nlen+b.ndist;){for(;cr=b.lencode[Ne&(1<<b.lenbits)-1],er=cr>>>24,Ir=cr>>>16&255,lr=65535&cr,!(er<=Xe);){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(lr<16)Ne>>>=er,Xe-=er,b.lens[b.have++]=lr;else{if(lr===16){for(zi=er+2;Xe<zi;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(Ne>>>=er,Xe-=er,b.have===0){g.msg="invalid bit length repeat",b.mode=Pe;break}Dt=b.lens[b.have-1],_t=3+(3&Ne),Ne>>>=2,Xe-=2}else if(lr===17){for(zi=er+3;Xe<zi;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}Ne>>>=er,Xe-=er,Dt=0,_t=3+(7&Ne),Ne>>>=3,Xe-=3}else{for(zi=er+7;Xe<zi;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}Ne>>>=er,Xe-=er,Dt=0,_t=11+(127&Ne),Ne>>>=7,Xe-=7}if(b.have+_t>b.nlen+b.ndist){g.msg="invalid bit length repeat",b.mode=Pe;break}for(;_t--;)b.lens[b.have++]=Dt}}if(b.mode===Pe)break;if(b.lens[256]===0){g.msg="invalid code -- missing end-of-block",b.mode=Pe;break}if(b.lenbits=9,fr={bits:b.lenbits},Sr=h(1,b.lens,0,b.nlen,b.lencode,0,b.work,fr),b.lenbits=fr.bits,Sr){g.msg="invalid literal/lengths set",b.mode=Pe;break}if(b.distbits=6,b.distcode=b.distdyn,fr={bits:b.distbits},Sr=h(2,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,fr),b.distbits=fr.bits,Sr){g.msg="invalid distances set",b.mode=Pe;break}if(b.mode=de,Q===_)break e;case de:b.mode=le;case le:if(Ie>=6&&gt>=258){g.next_out=$e,g.avail_out=gt,g.next_in=ve,g.avail_in=Ie,b.hold=Ne,b.bits=Xe,Ri(g,Wt),$e=g.next_out,_e=g.output,gt=g.avail_out,ve=g.next_in,be=g.input,Ie=g.avail_in,Ne=b.hold,Xe=b.bits,b.mode===Y&&(b.back=-1);break}for(b.back=0;cr=b.lencode[Ne&(1<<b.lenbits)-1],er=cr>>>24,Ir=cr>>>16&255,lr=65535&cr,!(er<=Xe);){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(Ir&&!(240&Ir)){for(At=er,sr=Ir,kr=lr;cr=b.lencode[kr+((Ne&(1<<At+sr)-1)>>At)],er=cr>>>24,Ir=cr>>>16&255,lr=65535&cr,!(At+er<=Xe);){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}Ne>>>=At,Xe-=At,b.back+=At}if(Ne>>>=er,Xe-=er,b.back+=er,b.length=lr,Ir===0){b.mode=16205;break}if(32&Ir){b.back=-1,b.mode=Y;break}if(64&Ir){g.msg="invalid literal/length code",b.mode=Pe;break}b.extra=15&Ir,b.mode=16201;case 16201:if(b.extra){for(zi=b.extra;Xe<zi;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}b.length+=Ne&(1<<b.extra)-1,Ne>>>=b.extra,Xe-=b.extra,b.back+=b.extra}b.was=b.length,b.mode=16202;case 16202:for(;cr=b.distcode[Ne&(1<<b.distbits)-1],er=cr>>>24,Ir=cr>>>16&255,lr=65535&cr,!(er<=Xe);){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(!(240&Ir)){for(At=er,sr=Ir,kr=lr;cr=b.distcode[kr+((Ne&(1<<At+sr)-1)>>At)],er=cr>>>24,Ir=cr>>>16&255,lr=65535&cr,!(At+er<=Xe);){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}Ne>>>=At,Xe-=At,b.back+=At}if(Ne>>>=er,Xe-=er,b.back+=er,64&Ir){g.msg="invalid distance code",b.mode=Pe;break}b.offset=lr,b.extra=15&Ir,b.mode=16203;case 16203:if(b.extra){for(zi=b.extra;Xe<zi;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}b.offset+=Ne&(1<<b.extra)-1,Ne>>>=b.extra,Xe-=b.extra,b.back+=b.extra}if(b.offset>b.dmax){g.msg="invalid distance too far back",b.mode=Pe;break}b.mode=16204;case 16204:if(gt===0)break e;if(_t=Wt-gt,b.offset>_t){if(_t=b.offset-_t,_t>b.whave&&b.sane){g.msg="invalid distance too far back",b.mode=Pe;break}_t>b.wnext?(_t-=b.wnext,si=b.wsize-_t):si=b.wnext-_t,_t>b.length&&(_t=b.length),Rr=b.window}else Rr=_e,si=$e-b.offset,_t=b.length;_t>gt&&(_t=gt),gt-=_t,b.length-=_t;do _e[$e++]=Rr[si++];while(--_t);b.length===0&&(b.mode=le);break;case 16205:if(gt===0)break e;_e[$e++]=b.length,gt--,b.mode=le;break;case ye:if(b.wrap){for(;Xe<32;){if(Ie===0)break e;Ie--,Ne|=be[ve++]<<Xe,Xe+=8}if(Wt-=gt,g.total_out+=Wt,b.total+=Wt,4&b.wrap&&Wt&&(g.adler=b.check=b.flags?qe(b.check,_e,Wt,$e-Wt):Ae(b.check,_e,Wt,$e-Wt)),Wt=gt,4&b.wrap&&(b.flags?Ne:Re(Ne))!==b.check){g.msg="incorrect data check",b.mode=Pe;break}Ne=0,Xe=0}b.mode=16207;case 16207:if(b.wrap&&b.flags){for(;Xe<32;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(4&b.wrap&&Ne!==(4294967295&b.total)){g.msg="incorrect length check",b.mode=Pe;break}Ne=0,Xe=0}b.mode=16208;case 16208:Sr=P;break e;case Pe:Sr=z;break e;case 16210:return $;default:return D}return g.next_out=$e,g.avail_out=gt,g.next_in=ve,g.avail_in=Ie,b.hold=Ne,b.bits=Xe,(b.wsize||Wt!==g.avail_out&&b.mode<Pe&&(b.mode<ye||Q!==f))&&Be(g,g.output,g.next_out,Wt-g.avail_out),dr-=g.avail_in,Wt-=g.avail_out,g.total_in+=dr,g.total_out+=Wt,b.total+=Wt,4&b.wrap&&Wt&&(g.adler=b.check=b.flags?qe(b.check,_e,Wt,g.next_out-Wt):Ae(b.check,_e,Wt,g.next_out-Wt)),g.data_type=b.bits+(b.last?64:0)+(b.mode===Y?128:0)+(b.mode===de||b.mode===re?256:0),(dr===0&&Wt===0||Q===f)&&Sr===M&&(Sr=U),Sr},inflateEnd:g=>{if(we(g))return D;let Q=g.state;return Q.window&&(Q.window=null),g.state=null,M},inflateGetHeader:(g,Q)=>{if(we(g))return D;const b=g.state;return 2&b.wrap?(b.head=Q,Q.done=!1,M):D},inflateSetDictionary:(g,Q)=>{const b=Q.length;let be,_e,ve;return we(g)?D:(be=g.state,be.wrap!==0&&be.mode!==G?D:be.mode===G&&(_e=1,_e=Ae(_e,Q,b,0),_e!==be.check)?z:(ve=Be(g,Q,b,b),ve?(be.mode=16210,$):(be.havedict=1,M)))},inflateInfo:"pako inflate (from Nodeca project)"},St=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const st=Object.prototype.toString,{Z_NO_FLUSH:wt,Z_FINISH:Et,Z_OK:it,Z_STREAM_END:Pt,Z_NEED_DICT:Ht,Z_STREAM_ERROR:Mt,Z_DATA_ERROR:ct,Z_MEM_ERROR:Jt}=rt;function Nt(g){this.options=Kr({chunkSize:65536,windowBits:15,to:""},g||{});const Q=this.options;Q.raw&&Q.windowBits>=0&&Q.windowBits<16&&(Q.windowBits=-Q.windowBits,Q.windowBits===0&&(Q.windowBits=-15)),!(Q.windowBits>=0&&Q.windowBits<16)||g&&g.windowBits||(Q.windowBits+=32),Q.windowBits>15&&Q.windowBits<48&&(15&Q.windowBits||(Q.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ze,this.strm.avail_out=0;let b=et.inflateInit2(this.strm,Q.windowBits);if(b!==it)throw new Error(Fe[b]);if(this.header=new St,et.inflateGetHeader(this.strm,this.header),Q.dictionary&&(typeof Q.dictionary=="string"?Q.dictionary=ne(Q.dictionary):st.call(Q.dictionary)==="[object ArrayBuffer]"&&(Q.dictionary=new Uint8Array(Q.dictionary)),Q.raw&&(b=et.inflateSetDictionary(this.strm,Q.dictionary),b!==it)))throw new Error(Fe[b])}function qt(g,Q){const b=new Nt(Q);if(b.push(g),b.err)throw b.msg||Fe[b.err];return b.result}Nt.prototype.push=function(g,Q){const b=this.strm,be=this.options.chunkSize,_e=this.options.dictionary;let ve,$e,Ie;if(this.ended)return!1;for($e=Q===~~Q?Q:Q===!0?Et:wt,st.call(g)==="[object ArrayBuffer]"?b.input=new Uint8Array(g):b.input=g,b.next_in=0,b.avail_in=b.input.length;;){for(b.avail_out===0&&(b.output=new Uint8Array(be),b.next_out=0,b.avail_out=be),ve=et.inflate(b,$e),ve===Ht&&_e&&(ve=et.inflateSetDictionary(b,_e),ve===it?ve=et.inflate(b,$e):ve===ct&&(ve=Ht));b.avail_in>0&&ve===Pt&&b.state.wrap>0&&g[b.next_in]!==0;)et.inflateReset(b),ve=et.inflate(b,$e);switch(ve){case Mt:case ct:case Ht:case Jt:return this.onEnd(ve),this.ended=!0,!1}if(Ie=b.avail_out,b.next_out&&(b.avail_out===0||ve===Pt))if(this.options.to==="string"){let gt=Ve(b.output,b.next_out),Ne=b.next_out-gt,Xe=xe(b.output,gt);b.next_out=Ne,b.avail_out=be-Ne,Ne&&b.output.set(b.output.subarray(gt,gt+Ne),0),this.onData(Xe)}else this.onData(b.output.length===b.next_out?b.output:b.output.subarray(0,b.next_out));if(ve!==it||Ie!==0){if(ve===Pt)return ve=et.inflateEnd(this.strm),this.onEnd(ve),this.ended=!0,!0;if(b.avail_in===0)break}}return!0},Nt.prototype.onData=function(g){this.chunks.push(g)},Nt.prototype.onEnd=function(g){g===it&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=qi(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg};var Vt={Inflate:Nt,inflate:qt,inflateRaw:function(g,Q){return(Q=Q||{}).raw=!0,qt(g,Q)},ungzip:qt};const{Deflate:Xt,deflate:yr,deflateRaw:Fr,gzip:Tr}=Lr,{Inflate:ii,inflate:Wr,inflateRaw:br,ungzip:$r}=Vt;var ci=Xt,ni=yr,hi=Fr,Ii=Tr,xi=ii,Oi=Wr,Hr=br,Xr=$r,qr=rt,ei={Deflate:Xt,deflate:yr,deflateRaw:Fr,gzip:Tr,Inflate:ii,inflate:Wr,inflateRaw:br,ungzip:$r,constants:rt}},99:(e,r,s)=>{s.r(r),s.d(r,{Cylinder:()=>u,Sphere:()=>c,Triangle:()=>d});var o=s(529);class c{constructor(w={x:0,y:0,z:0},v=0){this.center=new o.Vector3(w.x,w.y,w.z),this.radius=v}set(w,v){return this.center.copy(w),this.radius=v,this}copy(w){return this.center.copy(w.center),this.radius=w.radius,this}applyMatrix4(w){return this.center.applyMatrix4(w),this.radius=this.radius*w.getMaxScaleOnAxis(),this}translate(w){return this.center.add(w),this}equals(w){return w.center.equals(this.center)&&w.radius===this.radius}clone(){return new c().copy(this)}}let y=new o.Vector3;class u{constructor(w=new o.Vector3,v=new o.Vector3,R=0){this.c1=w,this.c2=v,this.radius=R,this.direction=new o.Vector3().subVectors(this.c2,this.c1).normalize()}copy(w){return this.c1.copy(w.c1),this.c2.copy(w.c2),this.direction.copy(w.direction),this.radius=w.radius,this}lengthSq(){return y.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(w){return this.direction.add(this.c1).applyMatrix4(w),this.c1.applyMatrix4(w),this.c2.applyMatrix4(w),this.direction.sub(this.c1).normalize(),this.radius=this.radius*w.getMaxScaleOnAxis(),this}}const p=new o.Vector3;class d{constructor(w=new o.Vector3,v=new o.Vector3,R=new o.Vector3){this.a=w,this.b=v,this.c=R}copy(w){return this.a.copy(w.a),this.b.copy(w.b),this.c.copy(w.c),this}applyMatrix4(w){return this.a.applyMatrix4(w),this.b.applyMatrix4(w),this.c.applyMatrix4(w),this}getNormal(){var w=this.a.clone();return w.sub(this.b),p.subVectors(this.c,this.b),w.cross(p),w.normalize(),w}}},107:(e,r,s)=>{var o,c=s(981),y=s(697),u=s(701),p=s(407),d=s(834),x=-2,w=258,v=262,R=103,O=113,C=666;function k(L,he){return L.msg=d[he],he}function K(L){return(L<<1)-(L>4?9:0)}function Z(L){for(var he=L.length;--he>=0;)L[he]=0}function X(L){var he=L.state,se=he.pending;se>L.avail_out&&(se=L.avail_out),se!==0&&(c.arraySet(L.output,he.pending_buf,he.pending_out,se,L.next_out),L.next_out+=se,he.pending_out+=se,L.total_out+=se,L.avail_out-=se,he.pending-=se,he.pending===0&&(he.pending_out=0))}function S(L,he){y._tr_flush_block(L,L.block_start>=0?L.block_start:-1,L.strstart-L.block_start,he),L.block_start=L.strstart,X(L.strm)}function F(L,he){L.pending_buf[L.pending++]=he}function B(L,he){L.pending_buf[L.pending++]=he>>>8&255,L.pending_buf[L.pending++]=255&he}function W(L,he,se,q){var ke=L.avail_in;return ke>q&&(ke=q),ke===0?0:(L.avail_in-=ke,c.arraySet(he,L.input,L.next_in,ke,se),L.state.wrap===1?L.adler=u(L.adler,he,ke,se):L.state.wrap===2&&(L.adler=p(L.adler,he,ke,se)),L.next_in+=ke,L.total_in+=ke,ke)}function J(L,he){var se,q,ke=L.max_chain_length,fe=L.strstart,De=L.prev_length,He=L.nice_match,ae=L.strstart>L.w_size-v?L.strstart-(L.w_size-v):0,Ae=L.window,We=L.w_mask,qe=L.prev,Fe=L.strstart+w,rt=Ae[fe+De-1],at=Ae[fe+De];L.prev_length>=L.good_match&&(ke>>=2),He>L.lookahead&&(He=L.lookahead);do if(Ae[(se=he)+De]===at&&Ae[se+De-1]===rt&&Ae[se]===Ae[fe]&&Ae[++se]===Ae[fe+1]){fe+=2,se++;do;while(Ae[++fe]===Ae[++se]&&Ae[++fe]===Ae[++se]&&Ae[++fe]===Ae[++se]&&Ae[++fe]===Ae[++se]&&Ae[++fe]===Ae[++se]&&Ae[++fe]===Ae[++se]&&Ae[++fe]===Ae[++se]&&Ae[++fe]===Ae[++se]&&fe<Fe);if(q=w-(Fe-fe),fe=Fe-w,q>De){if(L.match_start=he,De=q,q>=He)break;rt=Ae[fe+De-1],at=Ae[fe+De]}}while((he=qe[he&We])>ae&&--ke!==0);return De<=L.lookahead?De:L.lookahead}function N(L){var he,se,q,ke,fe,De=L.w_size;do{if(ke=L.window_size-L.lookahead-L.strstart,L.strstart>=De+(De-v)){c.arraySet(L.window,L.window,De,De,0),L.match_start-=De,L.strstart-=De,L.block_start-=De,he=se=L.hash_size;do q=L.head[--he],L.head[he]=q>=De?q-De:0;while(--se);he=se=De;do q=L.prev[--he],L.prev[he]=q>=De?q-De:0;while(--se);ke+=De}if(L.strm.avail_in===0)break;if(se=W(L.strm,L.window,L.strstart+L.lookahead,ke),L.lookahead+=se,L.lookahead+L.insert>=3)for(fe=L.strstart-L.insert,L.ins_h=L.window[fe],L.ins_h=(L.ins_h<<L.hash_shift^L.window[fe+1])&L.hash_mask;L.insert&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[fe+3-1])&L.hash_mask,L.prev[fe&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=fe,fe++,L.insert--,!(L.lookahead+L.insert<3)););}while(L.lookahead<v&&L.strm.avail_in!==0)}function ee(L,he){for(var se,q;;){if(L.lookahead<v){if(N(L),L.lookahead<v&&he===0)return 1;if(L.lookahead===0)break}if(se=0,L.lookahead>=3&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+3-1])&L.hash_mask,se=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),se!==0&&L.strstart-se<=L.w_size-v&&(L.match_length=J(L,se)),L.match_length>=3)if(q=y._tr_tally(L,L.strstart-L.match_start,L.match_length-3),L.lookahead-=L.match_length,L.match_length<=L.max_lazy_match&&L.lookahead>=3){L.match_length--;do L.strstart++,L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+3-1])&L.hash_mask,se=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart;while(--L.match_length!==0);L.strstart++}else L.strstart+=L.match_length,L.match_length=0,L.ins_h=L.window[L.strstart],L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+1])&L.hash_mask;else q=y._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++;if(q&&(S(L,!1),L.strm.avail_out===0))return 1}return L.insert=L.strstart<2?L.strstart:2,he===4?(S(L,!0),L.strm.avail_out===0?3:4):L.last_lit&&(S(L,!1),L.strm.avail_out===0)?1:2}function Se(L,he){for(var se,q,ke;;){if(L.lookahead<v){if(N(L),L.lookahead<v&&he===0)return 1;if(L.lookahead===0)break}if(se=0,L.lookahead>=3&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+3-1])&L.hash_mask,se=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),L.prev_length=L.match_length,L.prev_match=L.match_start,L.match_length=2,se!==0&&L.prev_length<L.max_lazy_match&&L.strstart-se<=L.w_size-v&&(L.match_length=J(L,se),L.match_length<=5&&(L.strategy===1||L.match_length===3&&L.strstart-L.match_start>4096)&&(L.match_length=2)),L.prev_length>=3&&L.match_length<=L.prev_length){ke=L.strstart+L.lookahead-3,q=y._tr_tally(L,L.strstart-1-L.prev_match,L.prev_length-3),L.lookahead-=L.prev_length-1,L.prev_length-=2;do++L.strstart<=ke&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+3-1])&L.hash_mask,se=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart);while(--L.prev_length!==0);if(L.match_available=0,L.match_length=2,L.strstart++,q&&(S(L,!1),L.strm.avail_out===0))return 1}else if(L.match_available){if((q=y._tr_tally(L,0,L.window[L.strstart-1]))&&S(L,!1),L.strstart++,L.lookahead--,L.strm.avail_out===0)return 1}else L.match_available=1,L.strstart++,L.lookahead--}return L.match_available&&(q=y._tr_tally(L,0,L.window[L.strstart-1]),L.match_available=0),L.insert=L.strstart<2?L.strstart:2,he===4?(S(L,!0),L.strm.avail_out===0?3:4):L.last_lit&&(S(L,!1),L.strm.avail_out===0)?1:2}function ce(L,he,se,q,ke){this.good_length=L,this.max_lazy=he,this.nice_length=se,this.max_chain=q,this.func=ke}function ge(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(1146),this.dyn_dtree=new c.Buf16(122),this.bl_tree=new c.Buf16(78),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(16),this.heap=new c.Buf16(573),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(573),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function me(L){var he;return L&&L.state?(L.total_in=L.total_out=0,L.data_type=2,(he=L.state).pending=0,he.pending_out=0,he.wrap<0&&(he.wrap=-he.wrap),he.status=he.wrap?42:O,L.adler=he.wrap===2?0:1,he.last_flush=0,y._tr_init(he),0):k(L,x)}function Ce(L){var he,se=me(L);return se===0&&((he=L.state).window_size=2*he.w_size,Z(he.head),he.max_lazy_match=o[he.level].max_lazy,he.good_match=o[he.level].good_length,he.nice_match=o[he.level].nice_length,he.max_chain_length=o[he.level].max_chain,he.strstart=0,he.block_start=0,he.lookahead=0,he.insert=0,he.match_length=he.prev_length=2,he.match_available=0,he.ins_h=0),se}function ue(L,he,se,q,ke,fe){if(!L)return x;var De=1;if(he===-1&&(he=6),q<0?(De=0,q=-q):q>15&&(De=2,q-=16),ke<1||ke>9||se!==8||q<8||q>15||he<0||he>9||fe<0||fe>4)return k(L,x);q===8&&(q=9);var He=new ge;return L.state=He,He.strm=L,He.wrap=De,He.gzhead=null,He.w_bits=q,He.w_size=1<<He.w_bits,He.w_mask=He.w_size-1,He.hash_bits=ke+7,He.hash_size=1<<He.hash_bits,He.hash_mask=He.hash_size-1,He.hash_shift=~~((He.hash_bits+3-1)/3),He.window=new c.Buf8(2*He.w_size),He.head=new c.Buf16(He.hash_size),He.prev=new c.Buf16(He.w_size),He.lit_bufsize=1<<ke+6,He.pending_buf_size=4*He.lit_bufsize,He.pending_buf=new c.Buf8(He.pending_buf_size),He.d_buf=1*He.lit_bufsize,He.l_buf=3*He.lit_bufsize,He.level=he,He.strategy=fe,He.method=se,Ce(L)}o=[new ce(0,0,0,0,function(L,he){var se=65535;for(se>L.pending_buf_size-5&&(se=L.pending_buf_size-5);;){if(L.lookahead<=1){if(N(L),L.lookahead===0&&he===0)return 1;if(L.lookahead===0)break}L.strstart+=L.lookahead,L.lookahead=0;var q=L.block_start+se;if((L.strstart===0||L.strstart>=q)&&(L.lookahead=L.strstart-q,L.strstart=q,S(L,!1),L.strm.avail_out===0)||L.strstart-L.block_start>=L.w_size-v&&(S(L,!1),L.strm.avail_out===0))return 1}return L.insert=0,he===4?(S(L,!0),L.strm.avail_out===0?3:4):(L.strstart>L.block_start&&(S(L,!1),L.strm.avail_out),1)}),new ce(4,4,8,4,ee),new ce(4,5,16,8,ee),new ce(4,6,32,32,ee),new ce(4,4,16,16,Se),new ce(8,16,32,32,Se),new ce(8,16,128,128,Se),new ce(8,32,128,256,Se),new ce(32,128,258,1024,Se),new ce(32,258,258,4096,Se)],r.deflateInit=function(L,he){return ue(L,he,8,15,8,0)},r.deflateInit2=ue,r.deflateReset=Ce,r.deflateResetKeep=me,r.deflateSetHeader=function(L,he){return L&&L.state?L.state.wrap!==2?x:(L.state.gzhead=he,0):x},r.deflate=function(L,he){var se,q,ke,fe;if(!L||!L.state||he>5||he<0)return L?k(L,x):x;if(q=L.state,!L.output||!L.input&&L.avail_in!==0||q.status===C&&he!==4)return k(L,L.avail_out===0?-5:x);if(q.strm=L,se=q.last_flush,q.last_flush=he,q.status===42)if(q.wrap===2)L.adler=0,F(q,31),F(q,139),F(q,8),q.gzhead?(F(q,(q.gzhead.text?1:0)+(q.gzhead.hcrc?2:0)+(q.gzhead.extra?4:0)+(q.gzhead.name?8:0)+(q.gzhead.comment?16:0)),F(q,255&q.gzhead.time),F(q,q.gzhead.time>>8&255),F(q,q.gzhead.time>>16&255),F(q,q.gzhead.time>>24&255),F(q,q.level===9?2:q.strategy>=2||q.level<2?4:0),F(q,255&q.gzhead.os),q.gzhead.extra&&q.gzhead.extra.length&&(F(q,255&q.gzhead.extra.length),F(q,q.gzhead.extra.length>>8&255)),q.gzhead.hcrc&&(L.adler=p(L.adler,q.pending_buf,q.pending,0)),q.gzindex=0,q.status=69):(F(q,0),F(q,0),F(q,0),F(q,0),F(q,0),F(q,q.level===9?2:q.strategy>=2||q.level<2?4:0),F(q,3),q.status=O);else{var De=8+(q.w_bits-8<<4)<<8;De|=(q.strategy>=2||q.level<2?0:q.level<6?1:q.level===6?2:3)<<6,q.strstart!==0&&(De|=32),De+=31-De%31,q.status=O,B(q,De),q.strstart!==0&&(B(q,L.adler>>>16),B(q,65535&L.adler)),L.adler=1}if(q.status===69)if(q.gzhead.extra){for(ke=q.pending;q.gzindex<(65535&q.gzhead.extra.length)&&(q.pending!==q.pending_buf_size||(q.gzhead.hcrc&&q.pending>ke&&(L.adler=p(L.adler,q.pending_buf,q.pending-ke,ke)),X(L),ke=q.pending,q.pending!==q.pending_buf_size));)F(q,255&q.gzhead.extra[q.gzindex]),q.gzindex++;q.gzhead.hcrc&&q.pending>ke&&(L.adler=p(L.adler,q.pending_buf,q.pending-ke,ke)),q.gzindex===q.gzhead.extra.length&&(q.gzindex=0,q.status=73)}else q.status=73;if(q.status===73)if(q.gzhead.name){ke=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>ke&&(L.adler=p(L.adler,q.pending_buf,q.pending-ke,ke)),X(L),ke=q.pending,q.pending===q.pending_buf_size)){fe=1;break}fe=q.gzindex<q.gzhead.name.length?255&q.gzhead.name.charCodeAt(q.gzindex++):0,F(q,fe)}while(fe!==0);q.gzhead.hcrc&&q.pending>ke&&(L.adler=p(L.adler,q.pending_buf,q.pending-ke,ke)),fe===0&&(q.gzindex=0,q.status=91)}else q.status=91;if(q.status===91)if(q.gzhead.comment){ke=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>ke&&(L.adler=p(L.adler,q.pending_buf,q.pending-ke,ke)),X(L),ke=q.pending,q.pending===q.pending_buf_size)){fe=1;break}fe=q.gzindex<q.gzhead.comment.length?255&q.gzhead.comment.charCodeAt(q.gzindex++):0,F(q,fe)}while(fe!==0);q.gzhead.hcrc&&q.pending>ke&&(L.adler=p(L.adler,q.pending_buf,q.pending-ke,ke)),fe===0&&(q.status=R)}else q.status=R;if(q.status===R&&(q.gzhead.hcrc?(q.pending+2>q.pending_buf_size&&X(L),q.pending+2<=q.pending_buf_size&&(F(q,255&L.adler),F(q,L.adler>>8&255),L.adler=0,q.status=O)):q.status=O),q.pending!==0){if(X(L),L.avail_out===0)return q.last_flush=-1,0}else if(L.avail_in===0&&K(he)<=K(se)&&he!==4)return k(L,-5);if(q.status===C&&L.avail_in!==0)return k(L,-5);if(L.avail_in!==0||q.lookahead!==0||he!==0&&q.status!==C){var He=q.strategy===2?(function(ae,Ae){for(var We;;){if(ae.lookahead===0&&(N(ae),ae.lookahead===0)){if(Ae===0)return 1;break}if(ae.match_length=0,We=y._tr_tally(ae,0,ae.window[ae.strstart]),ae.lookahead--,ae.strstart++,We&&(S(ae,!1),ae.strm.avail_out===0))return 1}return ae.insert=0,Ae===4?(S(ae,!0),ae.strm.avail_out===0?3:4):ae.last_lit&&(S(ae,!1),ae.strm.avail_out===0)?1:2})(q,he):q.strategy===3?(function(ae,Ae){for(var We,qe,Fe,rt,at=ae.window;;){if(ae.lookahead<=w){if(N(ae),ae.lookahead<=w&&Ae===0)return 1;if(ae.lookahead===0)break}if(ae.match_length=0,ae.lookahead>=3&&ae.strstart>0&&(qe=at[Fe=ae.strstart-1])===at[++Fe]&&qe===at[++Fe]&&qe===at[++Fe]){rt=ae.strstart+w;do;while(qe===at[++Fe]&&qe===at[++Fe]&&qe===at[++Fe]&&qe===at[++Fe]&&qe===at[++Fe]&&qe===at[++Fe]&&qe===at[++Fe]&&qe===at[++Fe]&&Fe<rt);ae.match_length=w-(rt-Fe),ae.match_length>ae.lookahead&&(ae.match_length=ae.lookahead)}if(ae.match_length>=3?(We=y._tr_tally(ae,1,ae.match_length-3),ae.lookahead-=ae.match_length,ae.strstart+=ae.match_length,ae.match_length=0):(We=y._tr_tally(ae,0,ae.window[ae.strstart]),ae.lookahead--,ae.strstart++),We&&(S(ae,!1),ae.strm.avail_out===0))return 1}return ae.insert=0,Ae===4?(S(ae,!0),ae.strm.avail_out===0?3:4):ae.last_lit&&(S(ae,!1),ae.strm.avail_out===0)?1:2})(q,he):o[q.level].func(q,he);if(He!==3&&He!==4||(q.status=C),He===1||He===3)return L.avail_out===0&&(q.last_flush=-1),0;if(He===2&&(he===1?y._tr_align(q):he!==5&&(y._tr_stored_block(q,0,0,!1),he===3&&(Z(q.head),q.lookahead===0&&(q.strstart=0,q.block_start=0,q.insert=0))),X(L),L.avail_out===0))return q.last_flush=-1,0}return he!==4?0:q.wrap<=0?1:(q.wrap===2?(F(q,255&L.adler),F(q,L.adler>>8&255),F(q,L.adler>>16&255),F(q,L.adler>>24&255),F(q,255&L.total_in),F(q,L.total_in>>8&255),F(q,L.total_in>>16&255),F(q,L.total_in>>24&255)):(B(q,L.adler>>>16),B(q,65535&L.adler)),X(L),q.wrap>0&&(q.wrap=-q.wrap),q.pending!==0?0:1)},r.deflateEnd=function(L){var he;return L&&L.state?(he=L.state.status)!==42&&he!==69&&he!==73&&he!==91&&he!==R&&he!==O&&he!==C?k(L,x):(L.state=null,he===O?k(L,-3):0):x},r.deflateSetDictionary=function(L,he){var se,q,ke,fe,De,He,ae,Ae,We=he.length;if(!L||!L.state||(fe=(se=L.state).wrap)===2||fe===1&&se.status!==42||se.lookahead)return x;for(fe===1&&(L.adler=u(L.adler,he,We,0)),se.wrap=0,We>=se.w_size&&(fe===0&&(Z(se.head),se.strstart=0,se.block_start=0,se.insert=0),Ae=new c.Buf8(se.w_size),c.arraySet(Ae,he,We-se.w_size,se.w_size,0),he=Ae,We=se.w_size),De=L.avail_in,He=L.next_in,ae=L.input,L.avail_in=We,L.next_in=0,L.input=he,N(se);se.lookahead>=3;){q=se.strstart,ke=se.lookahead-2;do se.ins_h=(se.ins_h<<se.hash_shift^se.window[q+3-1])&se.hash_mask,se.prev[q&se.w_mask]=se.head[se.ins_h],se.head[se.ins_h]=q,q++;while(--ke);se.strstart=q,se.lookahead=2,N(se)}return se.strstart+=se.lookahead,se.block_start=se.strstart,se.insert=se.lookahead,se.lookahead=0,se.match_length=se.prev_length=2,se.match_available=0,L.next_in=He,L.input=ae,L.avail_in=De,se.wrap=fe,0},r.deflateInfo="pako deflate (from Nodeca project)"},111:(e,r,s)=>{var o;o={},e.exports=o,(function(c,y){c.toRGBA8=function(u){var p=u.width,d=u.height;if(u.tabs.acTL==null)return[c.toRGBA8.decodeImage(u.data,p,d,u).buffer];var x=[];u.frames[0].data==null&&(u.frames[0].data=u.data);for(var w,v=new Uint8Array(p*d*4),R=0;R<u.frames.length;R++){var O=u.frames[R],C=O.rect.x,k=O.rect.y,K=O.rect.width,Z=O.rect.height,X=c.toRGBA8.decodeImage(O.data,K,Z,u);if(R==0?w=X:O.blend==0?c._copyTile(X,K,Z,w,p,d,C,k,0):O.blend==1&&c._copyTile(X,K,Z,w,p,d,C,k,1),x.push(w.buffer),w=w.slice(0),O.dispose!=0){if(O.dispose==1)c._copyTile(v,K,Z,w,p,d,C,k,0);else if(O.dispose==2){for(var S=R-1;u.frames[S].dispose==2;)S--;w=new Uint8Array(x[S]).slice(0)}}}return x},c.toRGBA8.decodeImage=function(u,p,d,x){var w=p*d,v=c.decode._getBPP(x),R=Math.ceil(p*v/8),O=new Uint8Array(4*w),C=new Uint32Array(O.buffer),k=x.ctype,K=x.depth,Z=c._bin.readUshort;if(k==6){var X=w<<2;if(K==8)for(var S=0;S<X;S++)O[S]=u[S];if(K==16)for(S=0;S<X;S++)O[S]=u[S<<1]}else if(k==2){var F=x.tabs.tRNS,B=-1,W=-1,J=-1;if(F&&(B=F[0],W=F[1],J=F[2]),K==8)for(S=0;S<w;S++){var N=3*S;O[ue=S<<2]=u[N],O[ue+1]=u[N+1],O[ue+2]=u[N+2],O[ue+3]=255,B!=-1&&u[N]==B&&u[N+1]==W&&u[N+2]==J&&(O[ue+3]=0)}if(K==16)for(S=0;S<w;S++)N=6*S,O[ue=S<<2]=u[N],O[ue+1]=u[N+2],O[ue+2]=u[N+4],O[ue+3]=255,B!=-1&&Z(u,N)==B&&Z(u,N+2)==W&&Z(u,N+4)==J&&(O[ue+3]=0)}else if(k==3){var ee=x.tabs.PLTE,Se=x.tabs.tRNS,ce=Se?Se.length:0;if(K==1)for(var ge=0;ge<d;ge++){var me=ge*R,Ce=ge*p;for(S=0;S<p;S++){var ue=Ce+S<<2,L=3*(he=u[me+(S>>3)]>>7-(7&S)&1);O[ue]=ee[L],O[ue+1]=ee[L+1],O[ue+2]=ee[L+2],O[ue+3]=he<ce?Se[he]:255}}if(K==2)for(ge=0;ge<d;ge++)for(me=ge*R,Ce=ge*p,S=0;S<p;S++)ue=Ce+S<<2,L=3*(he=u[me+(S>>2)]>>6-((3&S)<<1)&3),O[ue]=ee[L],O[ue+1]=ee[L+1],O[ue+2]=ee[L+2],O[ue+3]=he<ce?Se[he]:255;if(K==4)for(ge=0;ge<d;ge++)for(me=ge*R,Ce=ge*p,S=0;S<p;S++)ue=Ce+S<<2,L=3*(he=u[me+(S>>1)]>>4-((1&S)<<2)&15),O[ue]=ee[L],O[ue+1]=ee[L+1],O[ue+2]=ee[L+2],O[ue+3]=he<ce?Se[he]:255;if(K==8)for(S=0;S<w;S++){var he;ue=S<<2,L=3*(he=u[S]),O[ue]=ee[L],O[ue+1]=ee[L+1],O[ue+2]=ee[L+2],O[ue+3]=he<ce?Se[he]:255}}else if(k==4){if(K==8)for(S=0;S<w;S++){ue=S<<2;var se=u[q=S<<1];O[ue]=se,O[ue+1]=se,O[ue+2]=se,O[ue+3]=u[q+1]}if(K==16)for(S=0;S<w;S++){var q;ue=S<<2,se=u[q=S<<2],O[ue]=se,O[ue+1]=se,O[ue+2]=se,O[ue+3]=u[q+2]}}else if(k==0){if(B=x.tabs.tRNS?x.tabs.tRNS:-1,K==1)for(S=0;S<w;S++){var ke=(se=255*(u[S>>3]>>7-(7&S)&1))==255*B?0:255;C[S]=ke<<24|se<<16|se<<8|se}if(K==2)for(S=0;S<w;S++)ke=(se=85*(u[S>>2]>>6-((3&S)<<1)&3))==85*B?0:255,C[S]=ke<<24|se<<16|se<<8|se;if(K==4)for(S=0;S<w;S++)ke=(se=17*(u[S>>1]>>4-((1&S)<<2)&15))==17*B?0:255,C[S]=ke<<24|se<<16|se<<8|se;if(K==8)for(S=0;S<w;S++)ke=(se=u[S])==B?0:255,C[S]=ke<<24|se<<16|se<<8|se;if(K==16)for(S=0;S<w;S++)se=u[S<<1],ke=Z(u,S<<1)==B?0:255,C[S]=ke<<24|se<<16|se<<8|se}return O},c.decode=function(u){for(var p,d=new Uint8Array(u),x=8,w=c._bin,v=w.readUshort,R=w.readUint,O={tabs:{},frames:[]},C=new Uint8Array(d.length),k=0,K=0,Z=[137,80,78,71,13,10,26,10],X=0;X<8;X++)if(d[X]!=Z[X])throw"The input is not a PNG file!";for(;x<d.length;){var S=w.readUint(d,x);x+=4;var F=w.readASCII(d,x,4);if(x+=4,F=="IHDR")c.decode._IHDR(d,x,O);else if(F=="IDAT"){for(X=0;X<S;X++)C[k+X]=d[x+X];k+=S}else if(F=="acTL")O.tabs[F]={num_frames:R(d,x),num_plays:R(d,x+4)},p=new Uint8Array(d.length);else if(F=="fcTL"){K!=0&&((me=O.frames[O.frames.length-1]).data=c.decode._decompress(O,p.slice(0,K),me.rect.width,me.rect.height),K=0);var B={x:R(d,x+12),y:R(d,x+16),width:R(d,x+4),height:R(d,x+8)},W=v(d,x+22);W=v(d,x+20)/(W==0?100:W);var J={rect:B,delay:Math.round(1e3*W),dispose:d[x+24],blend:d[x+25]};O.frames.push(J)}else if(F=="fdAT"){for(X=0;X<S-4;X++)p[K+X]=d[x+X+4];K+=S-4}else if(F=="pHYs")O.tabs[F]=[w.readUint(d,x),w.readUint(d,x+4),d[x+8]];else if(F=="cHRM")for(O.tabs[F]=[],X=0;X<8;X++)O.tabs[F].push(w.readUint(d,x+4*X));else if(F=="tEXt"){O.tabs[F]==null&&(O.tabs[F]={});var N=w.nextZero(d,x),ee=w.readASCII(d,x,N-x),Se=w.readASCII(d,N+1,x+S-N-1);O.tabs[F][ee]=Se}else if(F=="iTXt"){O.tabs[F]==null&&(O.tabs[F]={}),N=0;var ce=x;N=w.nextZero(d,ce),ee=w.readASCII(d,ce,N-ce),d[ce=N+1],d[ce+1],ce+=2,N=w.nextZero(d,ce),w.readASCII(d,ce,N-ce),ce=N+1,N=w.nextZero(d,ce),w.readUTF8(d,ce,N-ce),ce=N+1,Se=w.readUTF8(d,ce,S-(ce-x)),O.tabs[F][ee]=Se}else if(F=="PLTE")O.tabs[F]=w.readBytes(d,x,S);else if(F=="hIST"){var ge=O.tabs.PLTE.length/3;for(O.tabs[F]=[],X=0;X<ge;X++)O.tabs[F].push(v(d,x+2*X))}else if(F=="tRNS")O.ctype==3?O.tabs[F]=w.readBytes(d,x,S):O.ctype==0?O.tabs[F]=v(d,x):O.ctype==2&&(O.tabs[F]=[v(d,x),v(d,x+2),v(d,x+4)]);else if(F=="gAMA")O.tabs[F]=w.readUint(d,x)/1e5;else if(F=="sRGB")O.tabs[F]=d[x];else if(F=="bKGD")O.ctype==0||O.ctype==4?O.tabs[F]=[v(d,x)]:O.ctype==2||O.ctype==6?O.tabs[F]=[v(d,x),v(d,x+2),v(d,x+4)]:O.ctype==3&&(O.tabs[F]=d[x]);else if(F=="IEND"){var me;K!=0&&((me=O.frames[O.frames.length-1]).data=c.decode._decompress(O,p.slice(0,K),me.rect.width,me.rect.height),K=0),O.data=c.decode._decompress(O,C,O.width,O.height);break}x+=S,w.readUint(d,x),x+=4}return delete O.compress,delete O.interlace,delete O.filter,O},c.decode._decompress=function(u,p,d,x){return u.compress==0&&(p=c.decode._inflate(p)),u.interlace==0?p=c.decode._filterZero(p,u,0,d,x):u.interlace==1&&(p=c.decode._readInterlace(p,u)),p},c.decode._inflate=function(u){return y.inflate(u)},c.decode._readInterlace=function(u,p){for(var d=p.width,x=p.height,w=c.decode._getBPP(p),v=w>>3,R=Math.ceil(d*w/8),O=new Uint8Array(x*R),C=0,k=[0,0,4,0,2,0,1],K=[0,4,0,2,0,1,0],Z=[8,8,8,4,4,2,2],X=[8,8,4,4,2,2,1],S=0;S<7;){for(var F=Z[S],B=X[S],W=0,J=0,N=k[S];N<x;)N+=F,J++;for(var ee=K[S];ee<d;)ee+=B,W++;var Se=Math.ceil(W*w/8);c.decode._filterZero(u,p,C,W,J);for(var ce=0,ge=k[S];ge<x;){for(var me=K[S],Ce=C+ce*Se<<3;me<d;){var ue;if(w==1&&(ue=(ue=u[Ce>>3])>>7-(7&Ce)&1,O[ge*R+(me>>3)]|=ue<<7-(3&me)),w==2&&(ue=(ue=u[Ce>>3])>>6-(7&Ce)&3,O[ge*R+(me>>2)]|=ue<<6-((3&me)<<1)),w==4&&(ue=(ue=u[Ce>>3])>>4-(7&Ce)&15,O[ge*R+(me>>1)]|=ue<<4-((1&me)<<2)),w>=8)for(var L=ge*R+me*v,he=0;he<v;he++)O[L+he]=u[(Ce>>3)+he];Ce+=w,me+=B}ce++,ge+=F}W*J!=0&&(C+=J*(1+Se)),S+=1}return O},c.decode._getBPP=function(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth},c.decode._filterZero=function(u,p,d,x,w){var v=c.decode._getBPP(p),R=Math.ceil(x*v/8),O=c.decode._paeth;v=Math.ceil(v/8);for(var C=0;C<w;C++){var k=d+C*R,K=k+C+1,Z=u[K-1];if(Z==0)for(var X=0;X<R;X++)u[k+X]=u[K+X];else if(Z==1){for(X=0;X<v;X++)u[k+X]=u[K+X];for(X=v;X<R;X++)u[k+X]=u[K+X]+u[k+X-v]&255}else if(C==0){for(X=0;X<v;X++)u[k+X]=u[K+X];if(Z==2)for(X=v;X<R;X++)u[k+X]=255&u[K+X];if(Z==3)for(X=v;X<R;X++)u[k+X]=u[K+X]+(u[k+X-v]>>1)&255;if(Z==4)for(X=v;X<R;X++)u[k+X]=u[K+X]+O(u[k+X-v],0,0)&255}else{if(Z==2)for(X=0;X<R;X++)u[k+X]=u[K+X]+u[k+X-R]&255;if(Z==3){for(X=0;X<v;X++)u[k+X]=u[K+X]+(u[k+X-R]>>1)&255;for(X=v;X<R;X++)u[k+X]=u[K+X]+(u[k+X-R]+u[k+X-v]>>1)&255}if(Z==4){for(X=0;X<v;X++)u[k+X]=u[K+X]+O(0,u[k+X-R],0)&255;for(X=v;X<R;X++)u[k+X]=u[K+X]+O(u[k+X-v],u[k+X-R],u[k+X-v-R])&255}}}return u},c.decode._paeth=function(u,p,d){var x=u+p-d,w=Math.abs(x-u),v=Math.abs(x-p),R=Math.abs(x-d);return w<=v&&w<=R?u:v<=R?p:d},c.decode._IHDR=function(u,p,d){var x=c._bin;d.width=x.readUint(u,p),p+=4,d.height=x.readUint(u,p),p+=4,d.depth=u[p],p++,d.ctype=u[p],p++,d.compress=u[p],p++,d.filter=u[p],p++,d.interlace=u[p],p++},c._bin={nextZero:function(u,p){for(;u[p]!=0;)p++;return p},readUshort:function(u,p){return u[p]<<8|u[p+1]},writeUshort:function(u,p,d){u[p]=d>>8&255,u[p+1]=255&d},readUint:function(u,p){return 16777216*u[p]+(u[p+1]<<16|u[p+2]<<8|u[p+3])},writeUint:function(u,p,d){u[p]=d>>24&255,u[p+1]=d>>16&255,u[p+2]=d>>8&255,u[p+3]=255&d},readASCII:function(u,p,d){for(var x="",w=0;w<d;w++)x+=String.fromCharCode(u[p+w]);return x},writeASCII:function(u,p,d){for(var x=0;x<d.length;x++)u[p+x]=d.charCodeAt(x)},readBytes:function(u,p,d){for(var x=[],w=0;w<d;w++)x.push(u[p+w]);return x},pad:function(u){return u.length<2?"0"+u:u},readUTF8:function(u,p,d){for(var x,w="",v=0;v<d;v++)w+="%"+c._bin.pad(u[p+v].toString(16));try{x=decodeURIComponent(w)}catch{return c._bin.readASCII(u,p,d)}return x}},c._copyTile=function(u,p,d,x,w,v,R,O,C){for(var k=Math.min(p,w),K=Math.min(d,v),Z=0,X=0,S=0;S<K;S++)for(var F=0;F<k;F++)if(R>=0&&O>=0?(Z=S*p+F<<2,X=(O+S)*w+R+F<<2):(Z=(-O+S)*p-R+F<<2,X=S*w+F<<2),C==0)x[X]=u[Z],x[X+1]=u[Z+1],x[X+2]=u[Z+2],x[X+3]=u[Z+3];else if(C==1){var B=u[Z+3]*.00392156862745098,W=u[Z]*B,J=u[Z+1]*B,N=u[Z+2]*B,ee=x[X+3]*(1/255),Se=x[X]*ee,ce=x[X+1]*ee,ge=x[X+2]*ee,me=1-B,Ce=B+ee*me,ue=Ce==0?0:1/Ce;x[X+3]=255*Ce,x[X+0]=(W+Se*me)*ue,x[X+1]=(J+ce*me)*ue,x[X+2]=(N+ge*me)*ue}else if(C==2)B=u[Z+3],W=u[Z],J=u[Z+1],N=u[Z+2],ee=x[X+3],Se=x[X],ce=x[X+1],ge=x[X+2],B==ee&&W==Se&&J==ce&&N==ge?(x[X]=0,x[X+1]=0,x[X+2]=0,x[X+3]=0):(x[X]=W,x[X+1]=J,x[X+2]=N,x[X+3]=B);else if(C==3){if(B=u[Z+3],W=u[Z],J=u[Z+1],N=u[Z+2],ee=x[X+3],Se=x[X],ce=x[X+1],ge=x[X+2],B==ee&&W==Se&&J==ce&&N==ge)continue;if(B<220&&ee>20)return!1}return!0},c.encode=function(u,p,d,x,w,v){x==null&&(x=0),v==null&&(v=!1);for(var R=new Uint8Array(u[0].byteLength*u.length+100),O=[137,80,78,71,13,10,26,10],C=0;C<8;C++)R[C]=O[C];var k=8,K=c._bin,Z=c.crc.crc,X=K.writeUint,S=K.writeUshort,F=K.writeASCII,B=c.encode.compressPNG(u,p,d,x,v);X(R,k,13),F(R,k+=4,"IHDR"),X(R,k+=4,p),X(R,k+=4,d),R[k+=4]=B.depth,R[++k]=B.ctype,R[++k]=0,R[++k]=0,R[++k]=0,X(R,++k,Z(R,k-17,17)),X(R,k+=4,1),F(R,k+=4,"sRGB"),R[k+=4]=1,X(R,++k,Z(R,k-5,5)),k+=4;var W=u.length>1;if(W&&(X(R,k,8),F(R,k+=4,"acTL"),X(R,k+=4,u.length),X(R,k+=4,0),X(R,k+=4,Z(R,k-12,12)),k+=4),B.ctype==3){for(X(R,k,3*(ue=B.plte.length)),F(R,k+=4,"PLTE"),k+=4,C=0;C<ue;C++){var J=3*C,N=B.plte[C],ee=255&N,Se=N>>8&255,ce=N>>16&255;R[k+J+0]=ee,R[k+J+1]=Se,R[k+J+2]=ce}if(X(R,k+=3*ue,Z(R,k-3*ue-4,3*ue+4)),k+=4,B.gotAlpha){for(X(R,k,ue),F(R,k+=4,"tRNS"),k+=4,C=0;C<ue;C++)R[k+C]=B.plte[C]>>24&255;X(R,k+=ue,Z(R,k-ue-4,ue+4)),k+=4}}for(var ge=0,me=0;me<B.frames.length;me++){var Ce=B.frames[me];W&&(X(R,k,26),F(R,k+=4,"fcTL"),X(R,k+=4,ge++),X(R,k+=4,Ce.rect.width),X(R,k+=4,Ce.rect.height),X(R,k+=4,Ce.rect.x),X(R,k+=4,Ce.rect.y),S(R,k+=4,w[me]),S(R,k+=2,1e3),R[k+=2]=Ce.dispose,R[++k]=Ce.blend,X(R,++k,Z(R,k-30,30)),k+=4);var ue,L=Ce.cimg;X(R,k,(ue=L.length)+(me==0?0:4));var he=k+=4;for(F(R,k,me==0?"IDAT":"fdAT"),k+=4,me!=0&&(X(R,k,ge++),k+=4),C=0;C<ue;C++)R[k+C]=L[C];X(R,k+=ue,Z(R,he,k-he)),k+=4}return X(R,k,0),F(R,k+=4,"IEND"),X(R,k+=4,Z(R,k-4,4)),k+=4,R.buffer.slice(0,k)},c.encode.compressPNG=function(u,p,d,x,w){for(var v=c.encode.compress(u,p,d,x,!1,w),R=0;R<u.length;R++){var O=v.frames[R],C=(O.rect.width,O.rect.height),k=O.bpl,K=O.bpp,Z=new Uint8Array(C*k+C);O.cimg=c.encode._filterZero(O.img,C,K,k,Z)}return v},c.encode.compress=function(u,p,d,x,w,v){v==null&&(v=!1);for(var R=6,O=8,C=4,k=255,K=0;K<u.length;K++)for(var Z=new Uint8Array(u[K]),X=Z.length,S=0;S<X;S+=4)k&=Z[S+3];var F=k!=255,B={},W=[];if(u.length!=0&&(B[0]=0,W.push(0),x!=0&&x--),x!=0){var J=c.quantize(u,x,w);for(u=J.bufs,S=0;S<J.plte.length;S++)B[ee=J.plte[S].est.rgba]==null&&(B[ee]=W.length,W.push(ee))}else for(K=0;K<u.length;K++){var N=new Uint32Array(u[K]);for(X=N.length,S=0;S<X;S++){var ee=N[S];if((S<p||ee!=N[S-1]&&ee!=N[S-p])&&B[ee]==null&&(B[ee]=W.length,W.push(ee),W.length>=300))break}}var Se=!!F&&w,ce=W.length;ce<=256&&v==0&&(O=ce<=2?1:ce<=4?2:ce<=16?4:8,w&&(O=8),F=!0);var ge=[];for(K=0;K<u.length;K++){var me=new Uint8Array(u[K]),Ce=new Uint32Array(me.buffer),ue=0,L=0,he=p,se=d,q=0;if(K!=0&&!Se){for(var ke=w||K==1||ge[ge.length-2].dispose==2?1:2,fe=0,De=1e9,He=0;He<ke;He++){for(var ae=new Uint8Array(u[K-1-He]),Ae=new Uint32Array(u[K-1-He]),We=p,qe=d,Fe=-1,rt=-1,at=0;at<d;at++)for(var ot=0;ot<p;ot++)Ce[S=at*p+ot]!=Ae[S]&&(ot<We&&(We=ot),ot>Fe&&(Fe=ot),at<qe&&(qe=at),at>rt&&(rt=at));var Ft=Fe==-1?1:(Fe-We+1)*(rt-qe+1);Ft<De&&(De=Ft,fe=He,Fe==-1?(ue=L=0,he=se=1):(ue=We,L=qe,he=Fe-We+1,se=rt-qe+1))}ae=new Uint8Array(u[K-1-fe]),fe==1&&(ge[ge.length-1].dispose=2);var Ct=new Uint8Array(he*se*4);new Uint32Array(Ct.buffer),c._copyTile(ae,p,d,Ct,he,se,-ue,-L,0),c._copyTile(me,p,d,Ct,he,se,-ue,-L,3)?(c._copyTile(me,p,d,Ct,he,se,-ue,-L,2),q=1):(c._copyTile(me,p,d,Ct,he,se,-ue,-L,0),q=0),me=Ct,Ce=new Uint32Array(me.buffer)}var ar=4*he;if(ce<=256&&v==0){for(ar=Math.ceil(O*he/8),Ct=new Uint8Array(ar*se),at=0;at<se;at++){S=at*ar;var or=at*he;if(O==8)for(ot=0;ot<he;ot++)Ct[S+ot]=B[Ce[or+ot]];else if(O==4)for(ot=0;ot<he;ot++)Ct[S+(ot>>1)]|=B[Ce[or+ot]]<<4-4*(1&ot);else if(O==2)for(ot=0;ot<he;ot++)Ct[S+(ot>>2)]|=B[Ce[or+ot]]<<6-2*(3&ot);else if(O==1)for(ot=0;ot<he;ot++)Ct[S+(ot>>3)]|=B[Ce[or+ot]]<<7-1*(7&ot)}me=Ct,R=3,C=1}else if(F==0&&u.length==1){Ct=new Uint8Array(he*se*3);var Mr=he*se;for(S=0;S<Mr;S++){var Er=3*S,pr=4*S;Ct[Er]=me[pr],Ct[Er+1]=me[pr+1],Ct[Er+2]=me[pr+2]}me=Ct,R=2,C=3,ar=3*he}ge.push({rect:{x:ue,y:L,width:he,height:se},img:me,bpl:ar,bpp:C,blend:q,dispose:Se?1:0})}return{ctype:R,depth:O,plte:W,gotAlpha:F,frames:ge}},c.encode._filterZero=function(u,p,d,x,w){for(var v=[],R=0;R<5;R++)if(!(p*x>5e5)||R!=2&&R!=3&&R!=4){for(var O=0;O<p;O++)c.encode._filterLine(w,u,O,x,d,R);if(v.push(y.deflate(w)),d==1)break}for(var C,k=1e9,K=0;K<v.length;K++)v[K].length<k&&(C=K,k=v[K].length);return v[C]},c.encode._filterLine=function(u,p,d,x,w,v){var R=d*x,O=R+d,C=c.decode._paeth;if(u[O]=v,O++,v==0)for(var k=0;k<x;k++)u[O+k]=p[R+k];else if(v==1){for(k=0;k<w;k++)u[O+k]=p[R+k];for(k=w;k<x;k++)u[O+k]=p[R+k]-p[R+k-w]+256&255}else if(d==0){for(k=0;k<w;k++)u[O+k]=p[R+k];if(v==2)for(k=w;k<x;k++)u[O+k]=p[R+k];if(v==3)for(k=w;k<x;k++)u[O+k]=p[R+k]-(p[R+k-w]>>1)+256&255;if(v==4)for(k=w;k<x;k++)u[O+k]=p[R+k]-C(p[R+k-w],0,0)+256&255}else{if(v==2)for(k=0;k<x;k++)u[O+k]=p[R+k]+256-p[R+k-x]&255;if(v==3){for(k=0;k<w;k++)u[O+k]=p[R+k]+256-(p[R+k-x]>>1)&255;for(k=w;k<x;k++)u[O+k]=p[R+k]+256-(p[R+k-x]+p[R+k-w]>>1)&255}if(v==4){for(k=0;k<w;k++)u[O+k]=p[R+k]+256-C(0,p[R+k-x],0)&255;for(k=w;k<x;k++)u[O+k]=p[R+k]+256-C(p[R+k-w],p[R+k-x],p[R+k-w-x])&255}}},c.crc={table:(function(){for(var u=new Uint32Array(256),p=0;p<256;p++){for(var d=p,x=0;x<8;x++)1&d?d=3988292384^d>>>1:d>>>=1;u[p]=d}return u})(),update:function(u,p,d,x){for(var w=0;w<x;w++)u=c.crc.table[255&(u^p[d+w])]^u>>>8;return u},crc:function(u,p,d){return 4294967295^c.crc.update(4294967295,u,p,d)}},c.quantize=function(u,p,d){for(var x=[],w=0,v=0;v<u.length;v++)x.push(c.encode.alphaMul(new Uint8Array(u[v]),d)),w+=u[v].byteLength;var R=new Uint8Array(w),O=new Uint32Array(R.buffer),C=0;for(v=0;v<x.length;v++){for(var k=x[v],K=k.length,Z=0;Z<K;Z++)R[C+Z]=k[Z];C+=K}var X={i0:0,i1:R.length,bst:null,est:null,tdst:0,left:null,right:null};X.bst=c.quantize.stats(R,X.i0,X.i1),X.est=c.quantize.estats(X.bst);for(var S=[X];S.length<p;){var F=0,B=0;for(v=0;v<S.length;v++)S[v].est.L>F&&(F=S[v].est.L,B=v);if(F<.001)break;var W=S[B],J=c.quantize.splitPixels(R,O,W.i0,W.i1,W.est.e,W.est.eMq255),N={i0:W.i0,i1:J,bst:null,est:null,tdst:0,left:null,right:null};N.bst=c.quantize.stats(R,N.i0,N.i1),N.est=c.quantize.estats(N.bst);var ee={i0:J,i1:W.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ee.bst={R:[],m:[],N:W.bst.N-N.bst.N},v=0;v<16;v++)ee.bst.R[v]=W.bst.R[v]-N.bst.R[v];for(v=0;v<4;v++)ee.bst.m[v]=W.bst.m[v]-N.bst.m[v];ee.est=c.quantize.estats(ee.bst),W.left=N,W.right=ee,S[B]=N,S.push(ee)}S.sort(function(ke,fe){return fe.bst.N-ke.bst.N});for(var Se=0;Se<x.length;Se++){var ce=c.quantize.planeDst,ge=new Uint8Array(x[Se].buffer),me=new Uint32Array(x[Se].buffer),Ce=ge.length;for(v=0;v<Ce;v+=4){for(var ue=ge[v]*.00392156862745098,L=ge[v+1]*.00392156862745098,he=ge[v+2]*.00392156862745098,se=ge[v+3]*.00392156862745098,q=X;q.left;)q=ce(q.est,ue,L,he,se)<=0?q.left:q.right;me[v>>2]=q.est.rgba}x[Se]=me.buffer}return{bufs:x,plte:S}},c.quantize.getNearest=function(u,p,d,x,w){if(u.left==null)return u.tdst=c.quantize.dist(u.est.q,p,d,x,w),u;var v=c.quantize.planeDst(u.est,p,d,x,w),R=u.left,O=u.right;v>0&&(R=u.right,O=u.left);var C=c.quantize.getNearest(R,p,d,x,w);if(C.tdst<=v*v)return C;var k=c.quantize.getNearest(O,p,d,x,w);return k.tdst<C.tdst?k:C},c.quantize.planeDst=function(u,p,d,x,w){var v=u.e;return v[0]*p+v[1]*d+v[2]*x+v[3]*w-u.eMq},c.quantize.dist=function(u,p,d,x,w){var v=p-u[0],R=d-u[1],O=x-u[2],C=w-u[3];return v*v+R*R+O*O+C*C},c.quantize.splitPixels=function(u,p,d,x,w,v){var R=c.quantize.vecDot;for(x-=4;d<x;){for(;R(u,d,w)<=v;)d+=4;for(;R(u,x,w)>v;)x-=4;if(d>=x)break;var O=p[d>>2];p[d>>2]=p[x>>2],p[x>>2]=O,d+=4,x-=4}for(;R(u,d,w)>v;)d-=4;return d+4},c.quantize.vecDot=function(u,p,d){return u[p]*d[0]+u[p+1]*d[1]+u[p+2]*d[2]+u[p+3]*d[3]},c.quantize.stats=function(u,p,d){for(var x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=[0,0,0,0],v=d-p>>2,R=p;R<d;R+=4){var O=u[R]*.00392156862745098,C=u[R+1]*(1/255),k=u[R+2]*(1/255),K=u[R+3]*(1/255);w[0]+=O,w[1]+=C,w[2]+=k,w[3]+=K,x[0]+=O*O,x[1]+=O*C,x[2]+=O*k,x[3]+=O*K,x[5]+=C*C,x[6]+=C*k,x[7]+=C*K,x[10]+=k*k,x[11]+=k*K,x[15]+=K*K}return x[4]=x[1],x[8]=x[2],x[12]=x[3],x[9]=x[6],x[13]=x[7],x[14]=x[11],{R:x,m:w,N:v}},c.quantize.estats=function(u){var p=u.R,d=u.m,x=u.N,w=d[0],v=d[1],R=d[2],O=d[3],C=x==0?0:1/x,k=[p[0]-w*w*C,p[1]-w*v*C,p[2]-w*R*C,p[3]-w*O*C,p[4]-v*w*C,p[5]-v*v*C,p[6]-v*R*C,p[7]-v*O*C,p[8]-R*w*C,p[9]-R*v*C,p[10]-R*R*C,p[11]-R*O*C,p[12]-O*w*C,p[13]-O*v*C,p[14]-O*R*C,p[15]-O*O*C],K=k,Z=c.M4,X=[.5,.5,.5,.5],S=0,F=0;if(x!=0)for(var B=0;B<10&&(X=Z.multVec(K,X),F=Math.sqrt(Z.dot(X,X)),X=Z.sml(1/F,X),!(Math.abs(F-S)<1e-9));B++)S=F;var W=[w*C,v*C,R*C,O*C],J=Z.dot(Z.sml(255,W),X),N=W[3]<.001?0:1/W[3];return{Cov:k,q:W,e:X,L:S,eMq255:J,eMq:Z.dot(X,W),rgba:(Math.round(255*W[3])<<24|Math.round(255*W[2]*N)<<16|Math.round(255*W[1]*N)<<8|Math.round(255*W[0]*N))>>>0}},c.M4={multVec:function(u,p){return[u[0]*p[0]+u[1]*p[1]+u[2]*p[2]+u[3]*p[3],u[4]*p[0]+u[5]*p[1]+u[6]*p[2]+u[7]*p[3],u[8]*p[0]+u[9]*p[1]+u[10]*p[2]+u[11]*p[3],u[12]*p[0]+u[13]*p[1]+u[14]*p[2]+u[15]*p[3]]},dot:function(u,p){return u[0]*p[0]+u[1]*p[1]+u[2]*p[2]+u[3]*p[3]},sml:function(u,p){return[u*p[0],u*p[1],u*p[2],u*p[3]]}},c.encode.alphaMul=function(u,p){for(var d=new Uint8Array(u.length),x=u.length>>2,w=0;w<x;w++){var v=w<<2,R=u[v+3];p&&(R=R<128?0:255);var O=R*(1/255);d[v+0]=u[v+0]*O,d[v+1]=u[v+1]*O,d[v+2]=u[v+2]*O,d[v+3]=R}return d}})(o,s(788))},165:e=>{e.exports=function(r,s){var o,c,y,u,p,d,x,w,v,R,O,C,k,K,Z,X,S,F,B,W,J,N,ee,Se,ce;o=r.state,c=r.next_in,Se=r.input,y=c+(r.avail_in-5),u=r.next_out,ce=r.output,p=u-(s-r.avail_out),d=u+(r.avail_out-257),x=o.dmax,w=o.wsize,v=o.whave,R=o.wnext,O=o.window,C=o.hold,k=o.bits,K=o.lencode,Z=o.distcode,X=(1<<o.lenbits)-1,S=(1<<o.distbits)-1;e:do{k<15&&(C+=Se[c++]<<k,k+=8,C+=Se[c++]<<k,k+=8),F=K[C&X];t:for(;;){if(C>>>=B=F>>>24,k-=B,(B=F>>>16&255)==0)ce[u++]=65535&F;else{if(!(16&B)){if(64&B){if(32&B){o.mode=12;break e}r.msg="invalid literal/length code",o.mode=30;break e}F=K[(65535&F)+(C&(1<<B)-1)];continue t}for(W=65535&F,(B&=15)&&(k<B&&(C+=Se[c++]<<k,k+=8),W+=C&(1<<B)-1,C>>>=B,k-=B),k<15&&(C+=Se[c++]<<k,k+=8,C+=Se[c++]<<k,k+=8),F=Z[C&S];;){if(C>>>=B=F>>>24,k-=B,16&(B=F>>>16&255)){if(J=65535&F,k<(B&=15)&&(C+=Se[c++]<<k,(k+=8)<B&&(C+=Se[c++]<<k,k+=8)),(J+=C&(1<<B)-1)>x){r.msg="invalid distance too far back",o.mode=30;break e}if(C>>>=B,k-=B,J>(B=u-p)){if((B=J-B)>v&&o.sane){r.msg="invalid distance too far back",o.mode=30;break e}if(N=0,ee=O,R===0){if(N+=w-B,B<W){W-=B;do ce[u++]=O[N++];while(--B);N=u-J,ee=ce}}else if(R<B){if(N+=w+R-B,(B-=R)<W){W-=B;do ce[u++]=O[N++];while(--B);if(N=0,R<W){W-=B=R;do ce[u++]=O[N++];while(--B);N=u-J,ee=ce}}}else if(N+=R-B,B<W){W-=B;do ce[u++]=O[N++];while(--B);N=u-J,ee=ce}for(;W>2;)ce[u++]=ee[N++],ce[u++]=ee[N++],ce[u++]=ee[N++],W-=3;W&&(ce[u++]=ee[N++],W>1&&(ce[u++]=ee[N++]))}else{N=u-J;do ce[u++]=ce[N++],ce[u++]=ce[N++],ce[u++]=ce[N++],W-=3;while(W>2);W&&(ce[u++]=ce[N++],W>1&&(ce[u++]=ce[N++]))}break}if(64&B){r.msg="invalid distance code",o.mode=30;break e}F=Z[(65535&F)+(C&(1<<B)-1)]}}break}}while(c<y&&u<d);c-=W=k>>3,C&=(1<<(k-=W<<3))-1,r.next_in=c,r.next_out=u,r.avail_in=c<y?y-c+5:5-(c-y),r.avail_out=u<d?d-u+257:257-(u-d),o.hold=C,o.bits=k}},185:()=>{$3Dmol.workerString=(function(){self.onmessage=function(e){var r=e.data,s=r.type;if(s<0)self.atomData=r.atoms,self.volume=r.volume,self.ps=new ProteinSurface;else{var o=self.ps;o.initparm(r.expandedExtent,s!=1,self.volume),o.fillvoxels(self.atomData,r.extendedAtoms),o.buildboundary(),s!==4&&s!==2||(o.fastdistancemap(),o.boundingatom(!1),o.fillvoxelswaals(self.atomData,r.extendedAtoms)),o.marchingcube(s);var c=o.getFacesAndVertices(r.atomsToShow);self.postMessage(c)}}}).toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+=`;
function _classCallCheck() {};`,$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;

`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):void 0},222:(e,r,s)=>{s.r(r),s.d(r,{CC:()=>c,Color:()=>o,builtinColorSchemes:()=>v,chains:()=>w,elementColors:()=>d,htmlColors:()=>y,residues:()=>x,ssColors:()=>u});class o{constructor(O,C,k){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof O=="number"?(this.r=O||0,this.g=C||0,this.b=k||0,this):this.set(O||0)}set(O){return O instanceof o?O.clone():(typeof O=="number"?this.setHex(O):typeof O=="object"&&(this.r=O?.r||0,this.g=O?.g||0,this.b=O?.b||0),this)}setHex(O){return O=Math.floor(O),this.r=(O>>16&255)/255,this.g=(O>>8&255)/255,this.b=(255&O)/255,this}getHex(){return Math.round(255*this.r)<<16|Math.round(255*this.g)<<8|Math.round(255*this.b)}clone(){return new o(this.r,this.g,this.b)}copy(O){return this.r=O.r,this.g=O.g,this.b=O.b,this}scaled(){var O={};return O.r=Math.round(255*this.r),O.g=Math.round(255*this.g),O.b=Math.round(255*this.b),O.a=1,O}}class c{static color(O){if(!O)return c.cache[0];if(O instanceof o)return O;if(typeof O=="number"&&c.cache[O]!==void 0)return c.cache[O];if(O&&Array.isArray(O))return O.map(c.color);let C=c.getHex(O),k=new o(C);return c.cache[C]=k,k}static getHex(O){if(Array.isArray(O))return O.map(c.getHex);if(typeof O=="string"){let C=O;if(!isNaN(parseInt(C)))return parseInt(C);if(C=C.trim(),C.length==4&&C[0]=="#"&&(C="#"+C[1]+C[1]+C[2]+C[2]+C[3]+C[3]),C.length==7&&C[0]=="#")return parseInt(C.substring(1),16);let k=c.rgbRegEx.exec(C);if(k){k[1]!=""&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");let Z=0;for(let X=2;X<5;X++){Z*=256;let S=k[X].endsWith("%")?255*parseFloat(k[X])/100:parseFloat(k[X]);Z+=Math.round(S)}return Z}let K=y[C.toLowerCase()];return K!==void 0?K:(console.error("color not found",O.toLowerCase(),y),0)}return O}}c.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,c.cache={0:new o(0)};const y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074,b:255,g:32768,r:16711680,c:49087,m:12517567,y:12566272,k:0,w:16777215},u={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},p={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},d={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:p,defaultColors:Object.assign({},p),greenCarbon:Object.assign(Object.assign({},p),{C:65280}),cyanCarbon:Object.assign(Object.assign({},p),{C:65535}),magentaCarbon:Object.assign(Object.assign({},p),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},p),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},p),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},p),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},p),{C:8388736}),blueCarbon:Object.assign(Object.assign({},p),{C:255})},x={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},w={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},v={ssPyMol:{prop:"ss",map:u.pyMol},ssJmol:{prop:"ss",map:u.Jmol},Jmol:{prop:"elem",map:d.Jmol},amino:{prop:"resn",map:x.amino},shapely:{prop:"resn",map:x.shapely},nucleic:{prop:"resn",map:x.nucleic},chain:{prop:"chain",map:w.atom},rasmol:{prop:"elem",map:d.rasmol},default:{prop:"elem",map:d.defaultColors},greenCarbon:{prop:"elem",map:d.greenCarbon},chainHetatm:{prop:"chain",map:w.hetatm},cyanCarbon:{prop:"elem",map:d.cyanCarbon},magentaCarbon:{prop:"elem",map:d.magentaCarbon},purpleCarbon:{prop:"elem",map:d.purpleCarbon},whiteCarbon:{prop:"elem",map:d.whiteCarbon},orangeCarbon:{prop:"elem",map:d.orangeCarbon},yellowCarbon:{prop:"elem",map:d.yellowCarbon},blueCarbon:{prop:"elem",map:d.blueCarbon}}},307:e=>{typeof e.exports=="object"&&(e.exports=window.$3Dmol)},358:(e,r,s)=>{var o=s(981),c=15,y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(x,w,v,R,O,C,k,K){var Z,X,S,F,B,W,J,N,ee,Se=K.bits,ce=0,ge=0,me=0,Ce=0,ue=0,L=0,he=0,se=0,q=0,ke=0,fe=null,De=0,He=new o.Buf16(16),ae=new o.Buf16(16),Ae=null,We=0;for(ce=0;ce<=c;ce++)He[ce]=0;for(ge=0;ge<R;ge++)He[w[v+ge]]++;for(ue=Se,Ce=c;Ce>=1&&He[Ce]===0;Ce--);if(ue>Ce&&(ue=Ce),Ce===0)return O[C++]=20971520,O[C++]=20971520,K.bits=1,0;for(me=1;me<Ce&&He[me]===0;me++);for(ue<me&&(ue=me),se=1,ce=1;ce<=c;ce++)if(se<<=1,(se-=He[ce])<0)return-1;if(se>0&&(x===0||Ce!==1))return-1;for(ae[1]=0,ce=1;ce<c;ce++)ae[ce+1]=ae[ce]+He[ce];for(ge=0;ge<R;ge++)w[v+ge]!==0&&(k[ae[w[v+ge]]++]=ge);if(x===0?(fe=Ae=k,W=19):x===1?(fe=y,De-=257,Ae=u,We-=257,W=256):(fe=p,Ae=d,W=-1),ke=0,ge=0,ce=me,B=C,L=ue,he=0,S=-1,F=(q=1<<ue)-1,x===1&&q>852||x===2&&q>592)return 1;for(;;){J=ce-he,k[ge]<W?(N=0,ee=k[ge]):k[ge]>W?(N=Ae[We+k[ge]],ee=fe[De+k[ge]]):(N=96,ee=0),Z=1<<ce-he,me=X=1<<L;do O[B+(ke>>he)+(X-=Z)]=J<<24|N<<16|ee;while(X!==0);for(Z=1<<ce-1;ke&Z;)Z>>=1;if(Z!==0?(ke&=Z-1,ke+=Z):ke=0,ge++,--He[ce]===0){if(ce===Ce)break;ce=w[v+k[ge]]}if(ce>ue&&(ke&F)!==S){for(he===0&&(he=ue),B+=me,se=1<<(L=ce-he);L+he<Ce&&!((se-=He[L+he])<=0);)L++,se<<=1;if(q+=1<<L,x===1&&q>852||x===2&&q>592)return 1;O[S=ke&F]=ue<<24|L<<16|B-C}}return ke!==0&&(O[B+ke]=ce-he<<24|4194304),K.bits=ue,0}},378:(e,r,s)=>{var o;s.r(r),s.d(r,{BackSide:()=>y,Camera:()=>Wi,ClampToEdgeWrapping:()=>w,Coloring:()=>o,Cylinder:()=>q.Cylinder,DoubleSide:()=>u,EventDispatcher:()=>F,FloatType:()=>k,Fog:()=>tn,FrontSide:()=>c,Geometry:()=>ce,GeometryGroup:()=>Se,GeometryIDCount:()=>ge,ImposterMaterial:()=>Mr,InstancedMaterial:()=>Er,Light:()=>L,Line:()=>Ee,LineBasicMaterial:()=>N,LineStyle:()=>pe,LinearFilter:()=>v,LinearMipMapLinearFilter:()=>O,Material:()=>W,MaterialIdCount:()=>J,Matrix3:()=>d.Matrix3,Matrix4:()=>d.Matrix4,Mesh:()=>Oe,MeshDoubleLambertMaterial:()=>vr,MeshLambertMaterial:()=>pr,MeshOutlineMaterial:()=>xr,NearestFilter:()=>R,Object3D:()=>Ce,Object3DIDCount:()=>me,Projector:()=>se,Quaternion:()=>d.Quaternion,R32Format:()=>X,RFormat:()=>Z,RGBAFormat:()=>K,Ray:()=>d.Ray,Raycaster:()=>De,Renderer:()=>qi,Scene:()=>ue,ShaderLib:()=>Yr,ShaderUtils:()=>yi,Shading:()=>p,Sphere:()=>q.Sphere,SphereImposterMaterial:()=>fi,SphereImposterOutlineMaterial:()=>Pr,Sprite:()=>dt,SpriteAlignment:()=>x,SpriteMaterial:()=>Or,SpritePlugin:()=>an,StickImposterMaterial:()=>Di,StickImposterOutlineMaterial:()=>wi,Texture:()=>ar,TextureIdCount:()=>or,TextureOperations:()=>S,Triangle:()=>q.Triangle,UVMapping:()=>Ct,UnsignedByteType:()=>C,Vector2:()=>d.Vector2,Vector3:()=>d.Vector3,VolumetricMaterial:()=>Hi,basic:()=>It,clamp:()=>d.clamp,clone:()=>Vi,conversionMatrix3:()=>d.conversionMatrix3,degToRad:()=>d.degToRad,instanced:()=>zt,intersectObject:()=>Ft,lambert:()=>Ot,lambertdouble:()=>li,outline:()=>ui,screen:()=>gi,screenaa:()=>jr,sphereimposter:()=>Dr,sphereimposteroutline:()=>vi,sprite:()=>bi,stickimposter:()=>Ni,stickimposteroutline:()=>Ti,volumetric:()=>Br}),(function(Bt){Bt[Bt.NoColors=0]="NoColors",Bt[Bt.FaceColors=1]="FaceColors",Bt[Bt.VertexColors=2]="VertexColors"})(o||(o={}));const c=0,y=1,u=2;var p;(function(Bt){Bt[Bt.NoShading=0]="NoShading",Bt[Bt.FlatShading=1]="FlatShading",Bt[Bt.SmoothShading=2]="SmoothShading"})(p||(p={}));var d=s(529);const x={topLeft:new d.Vector2(1,-1),topCenter:new d.Vector2(0,-1),topRight:new d.Vector2(-1,-1),centerLeft:new d.Vector2(1,0),center:new d.Vector2(0,0),centerRight:new d.Vector2(-1,0),bottomLeft:new d.Vector2(1,1),bottomCenter:new d.Vector2(0,1),bottomRight:new d.Vector2(-1,1)},w=1001,v=1006,R=1007,O=1008,C=1009,k=1010,K=1021,Z=1022,X=1023;var S;(function(Bt){Bt[Bt.MultiplyOperation=0]="MultiplyOperation",Bt[Bt.MixOperation=1]="MixOperation",Bt[Bt.AddOperation=2]="AddOperation"})(S||(S={}));class F{constructor(){this.listeners={}}dispatchEvent(E){var ne=this.listeners[E.type];if(ne!==void 0){E.target=this;for(var xe=0,Ve=ne.length;xe<Ve;xe++)ne[xe].call(this,E)}}removeEventListener(E,ne){if(ne){var xe=this.listeners[E].indexOf(ne);xe!==-1&&this.listeners[E].splice(xe,1)}else this.listeners[E]=[]}addEventListener(E,ne){this.listeners[E]===void 0&&(this.listeners[E]=[]),this.listeners[E].indexOf(ne)===-1&&this.listeners[E].push(ne)}}var B=s(222);class W extends F{constructor(){super(...arguments),this.id=J++,this.name="",this.side=c,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1,this.wireframe=!1,this.shaded=!1}setValues(E={}){if(E!==void 0)for(var ne in E){var xe=E[ne];if(xe!==void 0){if(ne in this){var Ve=this[ne];Ve instanceof B.Color&&xe instanceof B.Color?Ve.copy(xe):Ve instanceof B.Color?Ve.set(xe):Ve instanceof d.Vector3&&xe instanceof d.Vector3?Ve.copy(xe):this[ne]=xe}}else console.warn("$3Dmol.Material: '"+ne+"' parameter is undefined.")}}clone(E=new W){return E.name=this.name,E.side=this.side,E.opacity=this.opacity,E.transparent=this.transparent,E.depthTest=this.depthTest,E.depthWrite=this.depthWrite,E.polygonOffset=this.polygonOffset,E.polygonOffsetFactor=this.polygonOffsetFactor,E.polygonOffsetUnits=this.polygonOffsetUnits,E.alphaTest=this.alphaTest,E.overdraw=this.overdraw,E.visible=this.visible,E}makeShaded(E){this.shaded=!0,this.uniforms&&(this.uniforms.shading={type:"i",value:E},this.uniforms.vWidth={type:"f",value:1},this.uniforms.vHeight={type:"f",value:1})}dispose(){this.dispatchEvent({type:"dispose"})}}let J=0;class N extends W{constructor(E){super(),this.color=new B.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(E)}clone(E=new N){return super.clone.call(this,E),E.color.copy(this.color),E}}const ee=65535;class Se{constructor(E=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.atomArray=Array(),this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=E}setColor(E){var ne=this.vertexArray,xe=this.colorArray;if(!ne)throw new Error("vertex array not initialized");if(!xe)throw new Error("color array not initialized");let Ve=B.CC.color(E);for(var ze=0;ze<ne.length;ze+=3)xe[ze]=Ve.r,xe[ze+1]=Ve.g,xe[ze+2]=Ve.b}setColors(E){var ne=this.vertexArray,xe=this.colorArray;if(!ne)throw new Error("vertex array not initialized");if(!xe)throw new Error("color array not initialized");if(ne.length==xe.length)for(var Ve=0;Ve<ne.length;Ve+=3){var ze=E(ne[Ve],ne[Ve+1],ne[Ve+2]);ze instanceof B.Color||(ze=B.CC.color(ze)),xe[Ve]=ze.r,xe[Ve+1]=ze.g,xe[Ve+2]=ze.b}else console.log("Cannot re-color geometry group due to mismatched lengths.")}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw new Error("vertex array not initialized");for(var E,ne,xe,Ve,ze=new d.Vector3,yt=0;yt<this.vertices;++yt)E=3*yt,ne=this.vertexArray[E],xe=this.vertexArray[E+1],Ve=this.vertexArray[E+2],ze.x+=ne,ze.y+=xe,ze.z+=Ve;return ze.divideScalar(this.vertices),ze}setNormals(){var E=this.faceArray,ne=this.vertexArray,xe=this.normalArray;if(this.vertices&&this.faceidx){if(!E)throw new Error("face array not initialized");if(!ne)throw new Error("vertex array not initialized");if(!xe)throw new Error("normal array not initialized");for(var Ve,ze,yt,lt,mt,Rt,kt,Lt=0;Lt<E.length/3;++Lt)Ve=3*E[3*Lt],ze=3*E[3*Lt+1],yt=3*E[3*Lt+2],lt=new d.Vector3(ne[Ve],ne[Ve+1],ne[Ve+2]),mt=new d.Vector3(ne[ze],ne[ze+1],ne[ze+2]),Rt=new d.Vector3(ne[yt],ne[yt+1],ne[yt+2]),lt.subVectors(lt,mt),Rt.subVectors(Rt,mt),Rt.cross(lt),(kt=Rt).normalize(),xe[Ve]+=kt.x,xe[ze]+=kt.x,xe[yt]+=kt.x,xe[Ve+1]+=kt.y,xe[ze+1]+=kt.y,xe[yt+1]+=kt.y,xe[Ve+2]+=kt.z,xe[ze+2]+=kt.z,xe[yt+2]+=kt.z}}setLineIndices(){if(this.faceidx&&(!this.lineArray||this.lineArray.length!=2*this.faceidx||this.lineidx!=2*this.faceidx)){var E=this.faceArray,ne=this.lineArray=new Uint16Array(2*this.faceidx);if(this.lineidx=2*this.faceidx,!E)throw new Error("face array not initialized");for(var xe=0;xe<this.faceidx/3;++xe){var Ve=3*xe,ze=2*Ve,yt=E[Ve],lt=E[Ve+1],mt=E[Ve+2];ne[ze]=yt,ne[ze+1]=lt,ne[ze+2]=yt,ne[ze+3]=mt,ne[ze+4]=lt,ne[ze+5]=mt}}}vrml(E,ne){var xe,Ve,ze,yt,lt,mt,Rt,kt,Lt,gr,Yt,Cr,Ar,Ur,_r,Lr,wr,Ri,Zt="";if(Zt+=E+`Shape {
`+E+` appearance Appearance {
`+E+`  material Material {
`+E+"   diffuseColor "+((xe=ne?.color)===null||xe===void 0?void 0:xe.r)+" "+((Ve=ne?.color)===null||Ve===void 0?void 0:Ve.g)+" "+((ze=ne?.color)===null||ze===void 0?void 0:ze.b)+`
`,ne.wireframe&&this.colorArray){let oe=this.colorArray;Zt+=E+"    emissiveColor "+oe[0]+" "+oe[1]+" "+oe[2]+`
`}ne?.transparent&&(Zt+=E+"   transparency "+(1-ne.opacity)+`
`),Zt+=E+`  }
`,Zt+=E+` }
`;var ri=E;if(E+=" ",ne instanceof N||ne.wireframe){let oe,n,a;Zt+=E+`geometry IndexedLineSet {
`+E+` colorPerVertex TRUE
`+E+` coord Coordinate {
`+E+`  point [
`;for(let h=0;h<this.vertices;++h){let f=3*h;oe=(yt=this.vertexArray)===null||yt===void 0?void 0:yt[f],n=(lt=this.vertexArray)===null||lt===void 0?void 0:lt[f+1],a=(mt=this.vertexArray)===null||mt===void 0?void 0:mt[f+2],Zt+=E+"   "+oe+" "+n+" "+a+`,
`}if(Zt+=E+`  ]
`,Zt+=E+` }
`,this.colorArray&&!ne.wireframe){Zt+=E+` color Color {
`+E+`  color [
`;for(let h=0;h<this.vertices;++h){let f=3*h;oe=this.colorArray[f],n=this.colorArray[f+1],a=this.colorArray[f+2],Zt+=E+"   "+oe+" "+n+" "+a+`,
`}Zt+=E+`  ]
`,Zt+=E+` }
`}if(Zt+=E+` coordIndex [
`,ne.wireframe&&this.faceArray)for(let h=0;h<this.faceidx;h+=3)oe=(Rt=this.faceArray)===null||Rt===void 0?void 0:Rt[h],n=(kt=this.faceArray)===null||kt===void 0?void 0:kt[h+1],a=(Lt=this.faceArray)===null||Lt===void 0?void 0:Lt[h+2],Zt+=E+"  "+oe+", "+n+", "+a+`, -1,
`;else for(let h=0;h<this.vertices-1;h+=2)Zt+=E+"  "+h+", "+(h+1)+`, -1,
`;Zt+=E+` ]
`,Zt+=E+`}
`}else{let oe,n,a;Zt+=E+`geometry IndexedFaceSet {
`+E+` colorPerVertex TRUE
`+E+` normalPerVertex TRUE
`+E+` solid FALSE
`,Zt+=E+` coord Coordinate {
`+E+`  point [
`;for(let h=0;h<this.vertices;++h){let f=3*h;oe=(gr=this.vertexArray)===null||gr===void 0?void 0:gr[f],n=(Yt=this.vertexArray)===null||Yt===void 0?void 0:Yt[f+1],a=(Cr=this.vertexArray)===null||Cr===void 0?void 0:Cr[f+2],Zt+=E+"   "+oe+" "+n+" "+a+`,
`}Zt+=E+`  ]
`,Zt+=E+` }
`,Zt+=E+` normal Normal {
`+E+`  vector [
`;for(let h=0;h<this.vertices;++h){let f=3*h;oe=(Ar=this.normalArray)===null||Ar===void 0?void 0:Ar[f],n=(Ur=this.normalArray)===null||Ur===void 0?void 0:Ur[f+1],a=(_r=this.normalArray)===null||_r===void 0?void 0:_r[f+2],Zt+=E+"   "+oe+" "+n+" "+a+`,
`}if(Zt+=E+`  ]
`,Zt+=E+` }
`,this.colorArray){Zt+=E+` color Color {
`+E+`  color [
`;for(let h=0;h<this.vertices;++h){let f=3*h;oe=this.colorArray[f],n=this.colorArray[f+1],a=this.colorArray[f+2],Zt+=E+"   "+oe+" "+n+" "+a+`,
`}Zt+=E+`  ]
`,Zt+=E+` }
`}Zt+=E+` coordIndex [
`;for(let h=0;h<this.faceidx;h+=3)oe=(Lr=this.faceArray)===null||Lr===void 0?void 0:Lr[h],n=(wr=this.faceArray)===null||wr===void 0?void 0:wr[h+1],a=(Ri=this.faceArray)===null||Ri===void 0?void 0:Ri[h+2],Zt+=E+"  "+oe+", "+n+", "+a+`, -1,
`;Zt+=E+` ]
`,Zt+=E+`}
`}return Zt+=ri+"}"}truncateArrayBuffers(E=!0,ne=!1){var xe=this.vertexArray,Ve=this.colorArray,ze=this.normalArray,yt=this.faceArray,lt=this.lineArray,mt=this.radiusArray;this.vertexArray=xe?.subarray(0,3*this.vertices)||null,this.colorArray=Ve?.subarray(0,3*this.vertices)||null,E?(this.normalArray=ze?.subarray(0,3*this.vertices)||null,this.faceArray=yt?.subarray(0,this.faceidx)||null,this.lineidx>0?this.lineArray=lt?.subarray(0,this.lineidx)||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),mt&&(this.radiusArray=mt.subarray(0,this.vertices)),ne&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}class ce extends F{constructor(E=!1,ne=!1,xe=!1){super(),this.name="",this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=ge++,this.mesh=E,this.radii=ne,this.offset=xe}updateGeoGroup(E=0){var ne,xe=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!xe||xe.vertices+E>(((ne=xe?.vertexArray)===null||ne===void 0?void 0:ne.length)||0)/3)&&(xe=this.addGeoGroup()),xe}vrml(E,ne){for(var xe="",Ve=this.geometryGroups.length,ze=0;ze<Ve;ze++)xe+=this.geometryGroups[ze].vrml(E,ne)+`,
`;return xe}addGeoGroup(){var E=new Se(this.geometryGroups.length);return this.geometryGroups.push(E),this.groups=this.geometryGroups.length,E.vertexArray=new Float32Array(196605),E.colorArray=new Float32Array(196605),this.mesh&&(E.normalArray=new Float32Array(196605),E.faceArray=new Uint16Array(393210),E.lineArray=new Uint16Array(393210)),this.radii&&(E.radiusArray=new Float32Array(ee)),E.useOffset=this.offset,E}setUpNormals(...E){for(var ne=0;ne<this.groups;ne++)this.geometryGroups[ne].setNormals(...E)}setColors(...E){for(var ne=this.geometryGroups.length,xe=0;xe<ne;xe++)this.geometryGroups[xe].setColors(...E)}setColor(...E){let ne=this.geometryGroups.length;for(var xe=0;xe<ne;xe++)this.geometryGroups[xe].setColor(...E)}setUpWireframe(...E){let ne=this.geometryGroups.length;for(var xe=0;xe<ne;xe++)this.geometryGroups[xe].setLineIndices(...E)}initTypedArrays(){for(var E=0;E<this.groups;E++){var ne=this.geometryGroups[E];ne.__inittedArrays!==!0&&ne.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:"dispose"})}get vertices(){for(var E=0,ne=0;ne<this.groups;ne++)E+=this.geometryGroups[ne].vertices;return E}}let ge=0,me=0;class Ce{constructor(){this.id=me++,this.name="",this.children=[],this.position=new d.Vector3,this.rotation=new d.Vector3,this.matrix=new d.Matrix4,this.matrixWorld=new d.Matrix4,this.quaternion=new d.Quaternion,this.eulerOrder="XYZ",this.up=new d.Vector3(0,1,0),this.scale=new d.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(E){this.matrix.lookAt(E,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error("Unimplemented math operation."):this.rotation instanceof d.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(E){if(E!==this){E.parent=this,this.children.push(E);for(var ne=this;ne.parent!==void 0;)ne=ne.parent;ne!==void 0&&ne instanceof ue&&ne.__addObject(E)}else console.error("Can't add $3Dmol.Object3D to itself")}remove(E){var ne=this.children.indexOf(E);if(ne!==-1){E.parent=void 0,this.children.splice(ne,1);for(var xe=this;xe.parent!==void 0;)xe=xe.parent;xe!==void 0&&xe instanceof ue&&xe.__removeObject(E)}}vrml(E){E||(E=" ");var ne=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),xe=0,Ve=0,ze=0;if(ne!=0){let mt=Math.sin(ne/2);xe=this.quaternion.x/mt,Ve=this.quaternion.y/mt,ze=this.quaternion.z/mt}var yt=E+`Transform {
`+E+" center "+this.position.x+" "+this.position.y+" "+this.position.z+`
`+E+" rotation "+xe+" "+Ve+" "+ze+" "+ne+`
`+E+` children [
`;this.geometry&&(yt+=this.geometry.vrml(E,this.material));for(var lt=0;lt<this.children.length;lt++)yt+=this.children[lt].vrml(E+" ")+`,
`;return yt+=` ]
`,yt+="}"}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof d.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),this.scale.x===1&&this.scale.y===1&&this.scale.z===1||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(E){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&E!==!0||(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var ne=0;ne<this.children.length;ne++)this.children[ne].updateMatrixWorld(!0)}clone(E){E===void 0&&(E=new Ce),E.name=this.name,E.up.copy(this.up),E.position.copy(this.position),E.rotation instanceof d.Vector3&&this.rotation instanceof d.Vector3?E.rotation.copy(this.rotation):E.rotation=this.rotation,E.eulerOrder=this.eulerOrder,E.scale.copy(this.scale),E.rotationAutoUpdate=this.rotationAutoUpdate,E.matrix.copy(this.matrix),E.matrixWorld.copy(this.matrixWorld),E.quaternion.copy(this.quaternion),E.matrixAutoUpdate=this.matrixAutoUpdate,E.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,E.useQuaternion=this.useQuaternion,E.visible=this.visible;for(var ne=0;ne<this.children.length;ne++){var xe=this.children[ne];E.add(xe.clone())}return E}setVisible(E){this.visible=E;for(var ne=0;ne<this.children.length;ne++)this.children[ne].setVisible(E)}}class ue extends Ce{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(E){if(E instanceof L)this.__lights.indexOf(E)===-1&&this.__lights.push(E),E.target&&E.target.parent===void 0&&this.add(E.target);else if(this.__objects.indexOf(E)===-1){this.__objects.push(E),this.__objectsAdded.push(E);var ne=this.__objectsRemoved.indexOf(E);ne!==-1&&this.__objectsRemoved.splice(ne,1)}for(var xe=0;xe<E.children.length;xe++)this.__addObject(E.children[xe])}__removeObject(E){var ne;E instanceof L?(ne=this.__lights.indexOf(E))!==-1&&this.__lights.splice(ne,1):(ne=this.__objects.indexOf(E))!==-1&&(this.__objects.splice(ne,1),this.__objectsRemoved.push(E),this.__objectsAdded.indexOf(E)!==-1&&this.__objectsAdded.splice(ne,1));for(var xe=0;xe<E.children.length;xe++)this.__removeObject(E.children[xe])}}class L extends Ce{constructor(E,ne=1){super(),this.position=new d.Vector3(0,1,0),this.target=new Ce,this.castShadow=!1,this.onlyShadow=!1,this.color=new B.Color(E),this.intensity=ne}}const he=new d.Matrix4;class se{static unprojectVector(E,ne){return ne.projectionMatrixInverse.getInverse(ne.projectionMatrix),he.multiplyMatrices(ne.matrixWorld,ne.projectionMatrixInverse),E.applyProjection(he)}static projectVector(E,ne){return ne.matrixWorldInverse.getInverse(ne.matrixWorld),he.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),E.applyProjection(he)}projectVector(E,ne){return se.projectVector(E,ne)}unprojectVector(E,ne){return se.unprojectVector(E,ne)}}var q=s(99);const ke=(Bt,E)=>Bt.distance-E.distance,fe=new d.Matrix4;class De{constructor(E,ne,xe,Ve){this.precision=1e-4,this.linePrecision=.2,this.ray=new d.Ray(E,ne),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=Ve||0,this.far=xe||1/0}set(E,ne){this.ray.set(E,ne)}setFromCamera(E,ne){ne.ortho?(this.ray.origin.set(E.x,E.y,(ne.near+ne.far)/(ne.near-ne.far)).unproject(ne),this.ray.direction.set(0,0,-1).transformDirection(ne.matrixWorld)):(this.ray.origin.setFromMatrixPosition(ne.matrixWorld),this.ray.direction.set(E.x,E.y,E.z),ne.projectionMatrixInverse.getInverse(ne.projectionMatrix),fe.multiplyMatrices(ne.matrixWorld,ne.projectionMatrixInverse),this.ray.direction.applyProjection(fe),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects(E,ne){for(var xe=[],Ve=0,ze=ne.length;Ve<ze;Ve++)Ft(E,ne[Ve],this,xe);return xe.sort(ke),xe}}const He=Bt=>Math.min(Math.max(Bt,-1),1);var ae=new q.Sphere,Ae=new q.Cylinder,We=new q.Triangle,qe=new d.Vector3,Fe=new d.Vector3,rt=new d.Vector3,at=new d.Vector3,ot=new d.Vector3;function Ft(Bt,E,ne,xe){if(ot.getPositionFromMatrix(Bt.matrixWorld),E.intersectionShape===void 0||E.hidden)return xe;var Ve,ze,yt,lt,mt,Rt,kt,Lt,gr,Yt,Cr,Ar,Ur,_r,Lr=E.intersectionShape,wr=ne.linePrecision,Ri=(wr*=Bt.matrixWorld.getMaxScaleOnAxis())*wr;if(E.boundingSphere!==void 0&&E.boundingSphere instanceof q.Sphere&&(ae.copy(E.boundingSphere),ae.applyMatrix4(Bt.matrixWorld),!ne.ray.isIntersectionSphere(ae)))return xe;for(Ve=0,ze=Lr.triangle.length;Ve<ze;Ve++)if(Lr.triangle[Ve]instanceof q.Triangle){if(We.copy(Lr.triangle[Ve]),We.applyMatrix4(Bt.matrixWorld),yt=We.getNormal(),(lt=ne.ray.direction.dot(yt))>=0||(qe.subVectors(We.a,ne.ray.origin),(kt=yt.dot(qe)/lt)<0))continue;Fe.copy(ne.ray.direction).multiplyScalar(kt).add(ne.ray.origin),Fe.sub(We.a),rt.copy(We.b).sub(We.a),at.copy(We.c).sub(We.a);var Zt=rt.dot(at),ri=rt.lengthSq(),oe=at.lengthSq();if((Ar=(ri*Fe.dot(at)-Zt*Fe.dot(rt))/(ri*oe-Zt*Zt))<0||Ar>1||(Cr=(Fe.dot(rt)-Ar*Zt)/ri)<0||Cr>1||Cr+Ar>1)continue;xe.push({clickable:E,distance:kt})}for(Ve=0,ze=Lr.cylinder.length;Ve<ze;Ve++)if(Lr.cylinder[Ve]instanceof q.Cylinder){if(Ae.copy(Lr.cylinder[Ve]),Ae.applyMatrix4(Bt.matrixWorld),qe.subVectors(Ae.c1,ne.ray.origin),mt=qe.dot(Ae.direction),Rt=qe.dot(ne.ray.direction),(gr=1-(lt=He(ne.ray.direction.dot(Ae.direction)))*lt)==0)continue;Ur=(lt*Rt-mt)/gr,_r=(Rt-lt*mt)/gr,Fe.copy(Ae.direction).multiplyScalar(Ur).add(Ae.c1),rt.copy(ne.ray.direction).multiplyScalar(_r).add(ne.ray.origin),Lt=at.subVectors(Fe,rt).lengthSq();var n=Ae.radius*Ae.radius;if(Lt<=n){if((Cr=lt*(Ar=kt=(Yt=(lt*mt-Rt)*(lt*mt-Rt)-gr*(qe.lengthSq()-mt*mt-n))<=0?Math.sqrt(Lt):(Rt-lt*mt-Math.sqrt(Yt))/gr)-mt)<0||Cr*Cr>Ae.lengthSq()||Ar<0)continue;xe.push({clickable:E,distance:kt})}}for(Ve=0,ze=Lr.line.length;Ve<ze;Ve+=2){Fe.copy(Lr.line[Ve]),Fe.applyMatrix4(Bt.matrixWorld),rt.copy(Lr.line[Ve+1]),rt.applyMatrix4(Bt.matrixWorld),at.subVectors(rt,Fe);var a=at.lengthSq();at.normalize(),qe.subVectors(Fe,ne.ray.origin);var h=qe.dot(at);Rt=qe.dot(ne.ray.direction),(gr=1-(lt=He(ne.ray.direction.dot(at)))*lt)!=0&&(Ur=(lt*Rt-h)/gr,_r=(Rt-lt*h)/gr,Fe.add(at.multiplyScalar(Ur)),rt.copy(ne.ray.direction).multiplyScalar(_r).add(ne.ray.origin),(Lt=at.subVectors(rt,Fe).lengthSq())<Ri&&Ur*Ur<a&&xe.push({clickable:E,distance:_r}))}for(Ve=0,ze=Lr.sphere.length;Ve<ze;Ve++)if(Lr.sphere[Ve]instanceof q.Sphere&&(ae.copy(Lr.sphere[Ve]),ae.applyMatrix4(Bt.matrixWorld),ne.ray.isIntersectionSphere(ae))){Fe.subVectors(ae.center,ne.ray.origin);var f=Fe.dot(ne.ray.direction);if(Yt=f*f-(Fe.lengthSq()-ae.radius*ae.radius),f<0)return xe;kt=Yt<=0?f:f-Math.sqrt(Yt),xe.push({clickable:E,distance:kt})}return xe}class Ct{}class ar extends F{constructor(E,ne){super(),this.id=or++,this.name="",this.image=E,this.mapping=new Ct,this.wrapS=w,this.wrapT=w,this.anisotropy=1,ne?(this.format=Z,this.type=k,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=R,this.minFilter=R):(this.format=K,this.type=C,this.offset=new d.Vector2(0,0),this.repeat=new d.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=v,this.minFilter=O),this.needsUpdate=!1,this.onUpdate=null}clone(E=new ar){return E.image=this.image,E.mapping=this.mapping,E.wrapS=this.wrapS,E.wrapT=this.wrapT,E.magFilter=this.magFilter,E.minFilter=this.minFilter,E.anisotropy=this.anisotropy,E.format=this.format,E.type=this.type,E.offset.copy(this.offset),E.repeat.copy(this.repeat),E.premultiplyAlpha=this.premultiplyAlpha,E.flipY=this.flipY,E.unpackAlignment=this.unpackAlignment,E}dispose(){this.dispatchEvent({type:"dispose"})}}let or=0;class Mr extends W{constructor(E){super(),this.color=new B.Color(16777215),this.ambient=new B.Color(1048575),this.emissive=new B.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new d.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=p.SmoothShading,this.shaderID=null,this.vertexColors=o.NoColors,this.skinning=!1,this.setValues(E)}clone(E=new Mr){return super.clone.call(this,E),E.color.copy(this.color),E.ambient.copy(this.ambient),E.emissive.copy(this.emissive),E.wrapAround=this.wrapAround,E.wrapRGB.copy(this.wrapRGB),E.map=this.map,E.lightMap=this.lightMap,E.specularMap=this.specularMap,E.envMap=this.envMap,E.combine=this.combine,E.reflectivity=this.reflectivity,E.refractionRatio=this.refractionRatio,E.fog=this.fog,E.shading=this.shading,E.shaderID=this.shaderID,E.vertexColors=this.vertexColors,E.skinning=this.skinning,E.morphTargets=this.morphTargets,E.morphNormals=this.morphNormals,E}}class Er extends W{constructor(E){super(),this.color=new B.Color(16777215),this.ambient=new B.Color(1048575),this.emissive=new B.Color(0),this.wrapAround=!1,this.wrapRGB=new d.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=p.SmoothShading,this.shaderID="instanced",this.vertexColors=o.NoColors,this.skinning=!1,this.sphere=null,this.setValues(E)}clone(E=new Er){return super.clone.call(this,E),E.color.copy(this.color),E.ambient.copy(this.ambient),E.emissive.copy(this.emissive),E.wrapAround=this.wrapAround,E.wrapRGB.copy(this.wrapRGB),E.map=this.map,E.lightMap=this.lightMap,E.specularMap=this.specularMap,E.envMap=this.envMap,E.combine=this.combine,E.reflectivity=this.reflectivity,E.refractionRatio=this.refractionRatio,E.fog=this.fog,E.shading=this.shading,E.shaderID=this.shaderID,E.vertexColors=this.vertexColors,E.skinning=this.skinning,E.morphTargets=this.morphTargets,E.morphNormals=this.morphNormals,E.sphere=this.sphere,E}}class pr extends W{constructor(E){super(),this.color=new B.Color(16777215),this.ambient=new B.Color(1048575),this.emissive=new B.Color(0),this.wrapAround=!1,this.wrapRGB=new d.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=p.SmoothShading,this.shaderID="lambert",this.vertexColors=o.NoColors,this.skinning=!1,this.setValues(E)}clone(E=new pr){return super.clone.call(this,E),E.color.copy(this.color),E.ambient.copy(this.ambient),E.emissive.copy(this.emissive),E.wrapAround=this.wrapAround,E.wrapRGB.copy(this.wrapRGB),E.map=this.map,E.lightMap=this.lightMap,E.specularMap=this.specularMap,E.envMap=this.envMap,E.combine=this.combine,E.reflectivity=this.reflectivity,E.refractionRatio=this.refractionRatio,E.fog=this.fog,E.shading=this.shading,E.shaderID=this.shaderID,E.vertexColors=this.vertexColors,E.skinning=this.skinning,E.morphTargets=this.morphTargets,E.morphNormals=this.morphNormals,E}}class vr extends pr{constructor(E){super(E),this.shaderID="lambertdouble",this.side=u,this.outline=!1}clone(E=new vr){return super.clone.call(this,E),E}}class xr extends W{constructor(E){super(),E=E||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=B.CC.color(E.color||new B.Color(0,0,0)),this.outlineWidth=E.width||.1,this.outlinePushback=E.pushback||1,this.outlineMaxPixels=E.maxpixels||0}clone(E=new xr){return super.clone.call(this,E),E.fog=this.fog,E.shaderID=this.shaderID,E.wireframe=this.wireframe,E.outlineColor=this.outlineColor,E.outlineWidth=this.outlineWidth,E.outlinePushback=this.outlinePushback,E.outlineMaxPixels=this.outlineMaxPixels,E}}class fi extends Mr{constructor(E){super(E),this.shaderID="sphereimposter",this.setValues(E)}clone(E=new fi){return super.clone.call(this,E),E}}class Pr extends Mr{constructor(E){super(E),E=E||{},this.shaderID="sphereimposteroutline",this.outlineColor=B.CC.color(E.color||new B.Color(0,0,0)),this.outlineWidth=E.width||.1,this.outlinePushback=E.pushback||1,this.outlineMaxPixels=E.maxpixels||0,this.setValues(E)}clone(E=new Pr){return super.clone.call(this,E),E.outlineColor=this.outlineColor,E.outlineWidth=this.outlineWidth,E.outlinePushback=this.outlinePushback,E.outlineMaxPixels=this.outlineMaxPixels,E}}class Or extends W{constructor(E){super(),this.color=new B.Color(16777215),this.map=new ar,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new d.Vector2(0,0),this.uvScale=new d.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=x.center.clone(),this.setValues(E),(E=E||{}).depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),E.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),E.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(E=new Or){return super.clone.call(this,E),E.color.copy(this.color),E.map=this.map,E.useScreenCoordinates=this.useScreenCoordinates,E.screenOffset=this.screenOffset,E.sizeAttenuation=this.sizeAttenuation,E.scaleByViewport=this.scaleByViewPort,E.alignment.copy(this.alignment),E.uvOffset.copy(this.uvOffset),E}}class Di extends Mr{constructor(E){super(E),this.shaderID="stickimposter",this.setValues(E)}clone(E=new Di){return super.clone.call(this,E),E}}class wi extends Mr{constructor(E={}){super(E),this.shaderID="stickimposteroutline",this.outlineColor=new B.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,this.outlineMaxPixels=0,E.color&&(this.outlineColor=B.CC.color(E.color)),E.width&&(this.outlineWidth=E.width),E.pushback&&(this.outlinePushback=E.pushback),E.maxpixels&&(this.outlineMaxPixels=E.maxpixels),this.setValues(E)}clone(E=new wi){return super.clone.call(this,E),E.outlineColor=this.outlineColor,E.outlineWidth=this.outlineWidth,E.outlinePushback=this.outlinePushback,E.outlineMaxPixels=this.outlineMaxPixels,E}}class Hi extends W{constructor(E){super(),this.transparent=!1,this.volumetric=!0,this.color=new B.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID="volumetric",this.side=c,this.setValues(E)}clone(E=new Hi){return super.clone.call(this,E),E.transparent=this.transparent,E.volumetric=this.volumetric,E.color=this.color,E.transferfn=this.transferfn,E.map=this.map,E.extent=this.extent,E.maxdepth=this.maxdepth,E.unit=this.unit,E.texmatrix=this.texmatrix,E.transfermin=this.transfermin,E.transfermax=this.transfermax,E.subsamples=this.subsamples,E.shaderID=this.shaderID,E.side=this.side,E}}var pe;(function(Bt){Bt[Bt.LineStrip=0]="LineStrip",Bt[Bt.LinePieces=1]="LinePieces"})(pe||(pe={}));class Ee extends Ce{constructor(E,ne=new N({color:16777215*Math.random()}),xe=pe.LineStrip){super(),this.geometry=E,this.material=ne,this.type=xe}clone(E=new Ee(this.geometry,this.material,this.type)){return super.clone.call(this,E),E}}class Oe extends Ce{constructor(E,ne){super(),this.geometry=E,this.material=ne}clone(E){return E===void 0&&(E=new Oe(this.geometry,this.material)),super.clone.call(this,E),E}}class dt extends Ce{constructor(E=new Or){super(),this.material=E,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),this.scale.x===1&&this.scale.y===1||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(E=new dt(this.material)){return Ce.prototype.clone.call(this,E),E}}const nt={opacity:{type:"f",value:1},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}},It={vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;
varying vec4 mvPosition;

void main() {

    vColor = color;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`.replace("#define GLSLIFY 1",""),fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`.replace("#define GLSLIFY 1",""),uniforms:nt},ht={opacity:{type:"f",value:1},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},zt={fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`.replace("#define GLSLIFY 1",""),uniforms:ht},Ut={opacity:{type:"f",value:1},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Ot={fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
varying vec4 mvPosition;


//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}`.replace("#define GLSLIFY 1",""),vertexShader:`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`.replace("#define GLSLIFY 1",""),uniforms:Ut},mr={opacity:{type:"f",value:1},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},li={fragmentShader:`
#ifdef SHADED
uniform highp sampler2D shading;
#endif

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    vec3 color = vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( color, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`.replace("#define GLSLIFY 1",""),uniforms:mr},Ci={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new B.Color(0,0,0)},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}},ui={fragmentShader:`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec4 mvPosition;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float vWidth;
uniform float vHeight;
uniform float outlineMaxPixels;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec4 mvPosition;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    vec4 outpos = projectionMatrix * mvPosition;

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*modelViewMatrix * vec4( position, 1.0 );
        float w = outpos.w;
        //normalize homogeneous coords
        unadjusted /= unadjusted.w;
        outpos /= outpos.w;
        vec2 diff = outpos.xy-unadjusted.xy;
        //put into pixels
        diff.x *= vWidth;
        diff.y *= vHeight;
        if ( length(diff) > outlineMaxPixels) {
            vec2 ndiff = normalize(diff)*outlineMaxPixels;
            ndiff.x /= vWidth;
            ndiff.y /= vHeight;
            outpos.xy = unadjusted.xy;
            outpos.xy += ndiff;
        }
        outpos *= w; //if I don't do this things blow up
    }
    gl_Position = outpos;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`.replace("#define GLSLIFY 1",""),uniforms:Ci},gi={fragmentShader:`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);

   //gl_FragColor.g = gl_FragColor.b =  gl_FragColor.r; //debug shading 
}
        `.replace("#define GLSLIFY 1",""),vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `.replace("#define GLSLIFY 1",""),uniforms:{}},jr={fragmentShader:`
        
precision highp float;
precision highp int;
precision highp sampler2D;

uniform sampler2D tColor;
varying highp vec2 vTexCoords;

// adapted from https://github.com/kosua20/Rendu
// MIT License Copyright (c) 2017 Simon Rodriguez
// by way of molstar (https://github.com/molstar/molstar/blob/master/src/mol-gl/shader/fxaa.frag.ts)

#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))

float rgb2luma(vec3 rgb){
    return sqrt(dot(rgb, vec3(0.299, 0.587, 0.114)));
}

float sampleLuma(vec2 uv) {
    return rgb2luma(texture2D(tColor, uv).rgb);
}

float sampleLuma(vec2 uv, float uOffset, float vOffset) {
    uv += vec2(uOffset, vOffset);
    return sampleLuma(uv);
}

//DEFINEFRAGCOLOR
void main(void) {
    ivec2 dim = textureSize(tColor,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseScreenSize = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec2 coords = vTexCoords;

    vec4 colorCenter = texture2D(tColor, coords);
    float dEdgeThresholdMin = 0.0312;
    float dEdgeThresholdMax = 0.125;
    int dIterations = 12;
    float dSubpixelQuality = 0.3;

    // Luma at the current fragment
    float lumaCenter = rgb2luma(colorCenter.rgb);

    // Luma at the four direct neighbours of the current fragment.
    float lumaDown = sampleLuma(coords, 0.0, -inverseScreenSize.y);
    float lumaUp = sampleLuma(coords, 0.0, inverseScreenSize.y);
    float lumaLeft = sampleLuma(coords, -inverseScreenSize.x, 0.0);
    float lumaRight = sampleLuma(coords, inverseScreenSize.x, 0.0);

    // Find the maximum and minimum luma around the current fragment.
    float lumaMin = min(lumaCenter, min(min(lumaDown, lumaUp), min(lumaLeft, lumaRight)));
    float lumaMax = max(lumaCenter, max(max(lumaDown, lumaUp), max(lumaLeft, lumaRight)));

    // Compute the delta.
    float lumaRange = lumaMax - lumaMin;

    // If the luma variation is lower that a threshold (or if we are in a really dark area),
    // we are not on an edge, don't perform any AA.
    if (lumaRange < max(dEdgeThresholdMin, lumaMax * dEdgeThresholdMax)) {
        gl_FragColor = colorCenter;
        return;
    }

    // Query the 4 remaining corners lumas.
    float lumaDownLeft = sampleLuma(coords, -inverseScreenSize.x, -inverseScreenSize.y);
    float lumaUpRight = sampleLuma(coords, inverseScreenSize.x, inverseScreenSize.y);
    float lumaUpLeft = sampleLuma(coords, -inverseScreenSize.x, inverseScreenSize.y);
    float lumaDownRight = sampleLuma(coords, inverseScreenSize.x, -inverseScreenSize.y);

    // Combine the four edges lumas (using intermediary variables for future computations
    // with the same values).
    float lumaDownUp = lumaDown + lumaUp;
    float lumaLeftRight = lumaLeft + lumaRight;

    // Same for corners
    float lumaLeftCorners = lumaDownLeft + lumaUpLeft;
    float lumaDownCorners = lumaDownLeft + lumaDownRight;
    float lumaRightCorners = lumaDownRight + lumaUpRight;
    float lumaUpCorners = lumaUpRight + lumaUpLeft;

    // Compute an estimation of the gradient along the horizontal and vertical axis.
    float edgeHorizontal = abs(-2.0 * lumaLeft + lumaLeftCorners) + abs(-2.0 * lumaCenter + lumaDownUp) * 2.0 + abs(-2.0 * lumaRight + lumaRightCorners);
    float edgeVertical = abs(-2.0 * lumaUp + lumaUpCorners) + abs(-2.0 * lumaCenter + lumaLeftRight) * 2.0 + abs(-2.0 * lumaDown + lumaDownCorners);

    // Is the local edge horizontal or vertical ?
    bool isHorizontal = (edgeHorizontal >= edgeVertical);

    // Choose the step size (one pixel) accordingly.
    float stepLength = isHorizontal ? inverseScreenSize.y : inverseScreenSize.x;

    // Select the two neighboring texels lumas in the opposite direction to the local edge.
    float luma1 = isHorizontal ? lumaDown : lumaLeft;
    float luma2 = isHorizontal ? lumaUp : lumaRight;
    // Compute gradients in this direction.
    float gradient1 = luma1 - lumaCenter;
    float gradient2 = luma2 - lumaCenter;

    // Which direction is the steepest ?
    bool is1Steepest = abs(gradient1) >= abs(gradient2);

    // Gradient in the corresponding direction, normalized.
    float gradientScaled = 0.25 * max(abs(gradient1), abs(gradient2));

    // Average luma in the correct direction.
    float lumaLocalAverage = 0.0;
    if(is1Steepest){
        // Switch the direction
        stepLength = -stepLength;
        lumaLocalAverage = 0.5 * (luma1 + lumaCenter);
    } else {
        lumaLocalAverage = 0.5 * (luma2 + lumaCenter);
    }

    // Shift UV in the correct direction by half a pixel.
    vec2 currentUv = coords;
    if(isHorizontal){
        currentUv.y += stepLength * 0.5;
    } else {
        currentUv.x += stepLength * 0.5;
    }

    // Compute offset (for each iteration step) in the right direction.
    vec2 offset = isHorizontal ? vec2(inverseScreenSize.x, 0.0) : vec2(0.0, inverseScreenSize.y);
    // Compute UVs to explore on each side of the edge, orthogonally.
    // The QUALITY allows us to step faster.
    vec2 uv1 = currentUv - offset * QUALITY(0);
    vec2 uv2 = currentUv + offset * QUALITY(0);

    // Read the lumas at both current extremities of the exploration segment,
    // and compute the delta wrt to the local average luma.
    float lumaEnd1 = sampleLuma(uv1);
    float lumaEnd2 = sampleLuma(uv2);
    lumaEnd1 -= lumaLocalAverage;
    lumaEnd2 -= lumaLocalAverage;

    // If the luma deltas at the current extremities is larger than the local gradient,
    // we have reached the side of the edge.
    bool reached1 = abs(lumaEnd1) >= gradientScaled;
    bool reached2 = abs(lumaEnd2) >= gradientScaled;
    bool reachedBoth = reached1 && reached2;

    // If the side is not reached, we continue to explore in this direction.
    if(!reached1){
        uv1 -= offset * QUALITY(1);
    }
    if(!reached2){
        uv2 += offset * QUALITY(1);
    }

    // If both sides have not been reached, continue to explore.
    if(!reachedBoth){
        for(int i = 2; i < dIterations; i++){
            // If needed, read luma in 1st direction, compute delta.
            if(!reached1){
                lumaEnd1 = sampleLuma(uv1);
                lumaEnd1 = lumaEnd1 - lumaLocalAverage;
            }
            // If needed, read luma in opposite direction, compute delta.
            if(!reached2){
                lumaEnd2 = sampleLuma(uv2);
                lumaEnd2 = lumaEnd2 - lumaLocalAverage;
            }
            // If the luma deltas at the current extremities is larger than the local gradient,
            // we have reached the side of the edge.
            reached1 = abs(lumaEnd1) >= gradientScaled;
            reached2 = abs(lumaEnd2) >= gradientScaled;
            reachedBoth = reached1 && reached2;

            // If the side is not reached, we continue to explore in this direction,
            // with a variable quality.
            if(!reached1){
                uv1 -= offset * QUALITY(i);
            }
            if(!reached2){
                uv2 += offset * QUALITY(i);
            }

            // If both sides have been reached, stop the exploration.
            if(reachedBoth){
                break;
            }
        }
    }

    // Compute the distances to each side edge of the edge (!).
    float distance1 = isHorizontal ? (coords.x - uv1.x) : (coords.y - uv1.y);
    float distance2 = isHorizontal ? (uv2.x - coords.x) : (uv2.y - coords.y);

    // In which direction is the side of the edge closer ?
    bool isDirection1 = distance1 < distance2;
    float distanceFinal = min(distance1, distance2);

    // Thickness of the edge.
    float edgeThickness = (distance1 + distance2);

    // Is the luma at center smaller than the local average ?
    bool isLumaCenterSmaller = lumaCenter < lumaLocalAverage;

    // If the luma at center is smaller than at its neighbour,
    // the delta luma at each end should be positive (same variation).
    bool correctVariation1 = (lumaEnd1 < 0.0) != isLumaCenterSmaller;
    bool correctVariation2 = (lumaEnd2 < 0.0) != isLumaCenterSmaller;

    // Only keep the result in the direction of the closer side of the edge.
    bool correctVariation = isDirection1 ? correctVariation1 : correctVariation2;

    // UV offset: read in the direction of the closest side of the edge.
    float pixelOffset = - distanceFinal / edgeThickness + 0.5;

    // If the luma variation is incorrect, do not offset.
    float finalOffset = correctVariation ? pixelOffset : 0.0;

    // Sub-pixel shifting
    // Full weighted average of the luma over the 3x3 neighborhood.
    float lumaAverage = (1.0 / 12.0) * (2.0 * (lumaDownUp + lumaLeftRight) + lumaLeftCorners + lumaRightCorners);
    // Ratio of the delta between the global average and the center luma,
    // over the luma range in the 3x3 neighborhood.
    float subPixelOffset1 = clamp(abs(lumaAverage - lumaCenter) / lumaRange, 0.0, 1.0);
    float subPixelOffset2 = (-2.0 * subPixelOffset1 + 3.0) * subPixelOffset1 * subPixelOffset1;
    // Compute a sub-pixel offset based on this delta.
    float subPixelOffsetFinal = subPixelOffset2 * subPixelOffset2 * float(dSubpixelQuality);

    // Pick the biggest of the two offsets.
    finalOffset = max(finalOffset, subPixelOffsetFinal);

    // Compute the final UV coordinates.
    vec2 finalUv = coords;
    if(isHorizontal){
        finalUv.y += finalOffset * stepLength;
    } else {
        finalUv.x += finalOffset * stepLength;
    }

    // Read the color at the new UV coordinates, and use it.
    gl_FragColor = texture2D(tColor, finalUv);
}        

/* old fxaa implementation
uniform highp sampler2D colormap;
varying highp vec2 vTexCoords;


// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0


vec4 applyFXAA(vec2 fragCoord, highp sampler2D tex)
{
    vec4 color;
    ivec2 dim = textureSize(tex,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec4 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP);
    vec4 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP);
    vec4 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP);
    vec4 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP);
    vec4 rgbM  = texture2D(tex, fragCoord );
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW.xyz, luma);
    float lumaNE = dot(rgbNE.xyz, luma);
    float lumaSW = dot(rgbSW.xyz, luma);
    float lumaSE = dot(rgbSE.xyz, luma);
    float lumaM  = dot(rgbM.xyz,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec4 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)) +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)));
    vec4 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5) +
        texture2D(tex, fragCoord  + dir * 0.5));

    float lumaB = dot(rgbB.xyz, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = rgbA;
    else
        color = rgbB;

    return color;
}


//DEFINEFRAGCOLOR
void main (void) {
    ivec2 dim = textureSize(colormap,0);

  gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        
*/`.replace("#define GLSLIFY 1",""),vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `.replace("#define GLSLIFY 1",""),uniforms:{}},zr={opacity:{type:"f",value:1},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Dr={vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`.replace("#define GLSLIFY 1",""),fragmentShader:`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    vec3 color = vLight*vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
     
}

`.replace("#define GLSLIFY 1",""),uniforms:zr},rr={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new B.Color(0,0,0)},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}},vi={fragmentShader:`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform float vHeight;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);

    vec4 adjust = projectionMatrix* vec4(norm,normal.z,1.0); 
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+vec4(adjust.xy,0.0,0.0);

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*vec4(center.x+normal.x, center.y,center.z,1.0); 
        vec4 ccoord = projectionMatrix*vec4(center.xyz,1.0);
        adjust = projectionMatrix* vec4(center.x+norm.x,center.y,center.z,1.0); 
        //subtract center 
        unadjusted.xyz -= ccoord.xyz;
        adjust.xyz -= ccoord.xyz;
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth;
        if(diff > outlineMaxPixels) {
            
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth;
            //adjsut reval by ratio of lengths
            rval *= fixlen/abs(adjust.x);
        }

    }
}

`.replace("#define GLSLIFY 1",""),uniforms:rr},bi={fragmentShader:`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a <= alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogNear != fogFar) {

        float depth = gl_FragCoord.z / gl_FragCoord.w; //probably wrong
        float fogFactor = smoothstep(fogNear, fogFar, depth);        
        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);
    }
}

`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`.replace("#define GLSLIFY 1",""),uniforms:{}},Ki={opacity:{type:"f",value:1},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Ai=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`,Ni={fragmentShader:[Ai,`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    color *= light;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`].join(`
`),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
    bool isperspective = (projectionMatrix[3][3] == 0.0);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(isperspective) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(isperspective) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }

    if(isperspective) { //perspective
      vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
      vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    } else {
      vec3 cr = normalize(cross(vec3(0.0,0.0,-1.0),norm))*radius;
      vec3 doublecr = normalize(cross(vec3(0.0,0.0,-1.0),cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;     
    }

    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`,uniforms:Ki},Ti={fragmentShader:Ai+`
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`,vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform mat4 projinv;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);

    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    float scale = 1.0;
    if(projectionMatrix[3][3] != 0.0) { //orthographic
        to.z -= outlinePushback;
        pt.z -= outlinePushback;
    } else { //perspective
        vec4 midbefore = pt;
        if(length(to.xyz) < length(pt)) {
            midbefore = to;
        }
        vec4 midafter = midbefore;
        midafter.xyz += normalize(midbefore.xyz)*outlinePushback;

        to.xyz += normalize(to.xyz)*outlinePushback;
        pt.xyz += normalize(pt.xyz)*outlinePushback;

        //figure out a scaling factor for radius to account for perspective setback
        vec4 midbeforer = vec4(midbefore.x+rad,midbefore.y, midbefore.z, midbefore.w);
        vec4 midafterr = vec4(midafter.x+rad,midafter.y, midafter.z, midafter.w);

        vec4 mb = projectionMatrix*midbefore;
        vec4 mbr = projectionMatrix*midbeforer;
        vec4 ma = projectionMatrix*midafter;
        vec4 mar = projectionMatrix*midafterr;
        mb /= mb.w;
        mbr /= mbr.w;
        ma /= ma.w;
        mar /= mar.w;
        scale = abs((mbr.x-mb.x)/(mar.x-ma.x));
        rad *= scale;
        r = abs(rad);
    }
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }

    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }

    if(outlineMaxPixels > 0.0) {
        vec4 cpos = mvPosition;
        vec4 unadjusted = projectionMatrix*vec4(cpos.x+abs(scale*radius), cpos.y,cpos.z,cpos.w); 
        vec4 ccoord = projectionMatrix*cpos;
        vec4 adjust = projectionMatrix*vec4(cpos.x+r,cpos.y,cpos.z,cpos.w); 
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        unadjusted.xyz -= ccoord.xyz/ccoord.w;
        adjust.xyz -= ccoord.xyz/ccoord.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth; //this should now be in pixels
        if(diff > outlineMaxPixels) {
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth; 
            vec4 pcoord = ccoord;
            pcoord.x += fixlen*pcoord.w;
            vec4 altc = projinv*pcoord;
            r= abs(altc.x-cpos.x);
        }
    }

    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`,uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new B.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0},projinv:{type:"mat4",value:[]}}},pi={opacity:{type:"f",value:1},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}},Br={fragmentShader:`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `.replace("#define GLSLIFY 1",""),vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`.replace("#define GLSLIFY 1",""),uniforms:pi},Yr={basic:It,blur:{fragmentShader:`const float INV_TOTAL_SAMPLES_FACTOR = 1.0 / 9.0;
uniform highp sampler2D inTex;
varying highp vec2 vTexCoords;
    
void main() {
 
 vec2 texelSize = 1.0 / vec2(textureSize(inTex,0));
 float blurred_visibility_factor = 0.0f;
 for (int t = -1; t <= 1; ++t) {
  for (int s = -1; s <= 1; ++s) {
   vec2 offset = vec2(float(s), float(t)) * texelSize;
   blurred_visibility_factor += texture2D(inTex, vTexCoords + offset).r;
  }
 }
    
 gl_FragDepthEXT = blurred_visibility_factor * INV_TOTAL_SAMPLES_FACTOR;
 
}`,vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `,uniforms:{}},instanced:zt,lambert:Ot,lambertdouble:li,outline:ui,screen:gi,screenaa:jr,ssao:{fragmentShader:`uniform sampler2D depthmap;
varying highp vec2 vTexCoords;
uniform float vWidth;
uniform float vHeight;
uniform float total_strength;
uniform float radius;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

//code for pseudorandom vector from chatgpt
float hash(vec3 p) {
    p = fract(p * vec3(0.1031, 0.1030, 0.0973));
    p += dot(p, p.yzx + 33.33);
    return fract((p.x + p.y) * p.z);
}

// Generate a pseudorandom vec3 from a seed vec3
vec3 pseudorandomVec3(vec3 seed) {
    vec3 randomVec;
    randomVec.x = hash(seed);
    randomVec.y = hash(seed + vec3(1.0, 0.0, 17.1));
    randomVec.z = hash(seed + vec3(0.0, 13.23, 0.0));
    return randomVec;
}

void main(void)
{   
   const float base = 0.2;
   const float area = 0.75;
   const int cycles = 1;

   const int samples = 64;
   vec3 sample_sphere[64] = vec3[](
      vec3(0.091258,-0.510164,0.000000),
      vec3(-0.204347,-0.872967,0.187199),
      vec3(0.009690,-0.263696,-0.110414),
      vec3(0.175208,-0.563987,0.228527),
      vec3(-0.001824,-0.003113,-0.000323),
      vec3(0.411134,-0.719869,-0.261530),
      vec3(-0.074272,-0.377368,0.276290),
      vec3(-0.147773,-0.381587,-0.284529),
      vec3(0.173317,-0.199635,0.063295),
      vec3(-0.186452,-0.199460,0.076965),
      vec3(0.143985,-0.308160,-0.307687),
      vec3(0.053194,-0.148286,0.169589),
      vec3(-0.547656,-0.486476,-0.317378),
      vec3(0.020804,-0.015092,-0.004574),
      vec3(-0.038006,-0.043165,0.054059),
      vec3(-0.094795,-0.443908,-0.731525),
      vec3(0.547552,-0.396466,0.461477),
      vec3(-0.176886,-0.089989,0.007315),
      vec3(0.074401,-0.048840,-0.074039),
      vec3(-0.008240,-0.075697,0.178197),
      vec3(-0.307880,-0.185053,-0.368943),
      vec3(0.309520,-0.108483,0.041646),
      vec3(-0.773478,-0.292946,0.538166),
      vec3(0.184487,-0.231594,-0.820065),
      vec3(0.207318,-0.100531,0.361797),
      vec3(-0.173306,-0.037737,-0.055289),
      vec3(0.548102,-0.105342,-0.253237),
      vec3(-0.119342,-0.043907,0.285162),
      vec3(-0.270247,-0.087861,-0.751357),
      vec3(0.449312,-0.039777,0.236146),
      vec3(-0.743773,-0.036095,0.196056),
      vec3(0.148819,-0.004300,-0.231448),
      vec3(0.008773,0.000809,0.051047),
      vec3(-0.461467,0.027390,-0.357386),
      vec3(0.169626,0.013338,-0.014053),
      vec3(-0.043786,0.007095,0.047331),
      vec3(0.004821,0.140371,-0.988260),
      vec3(0.092402,0.023994,0.101860),
      vec3(-0.295335,0.061530,-0.027372),
      vec3(0.024903,0.007537,-0.018901),
      vec3(-0.081463,0.125402,0.447794),
      vec3(-0.397119,0.231805,-0.631062),
      vec3(0.163853,0.059014,0.044905),
      vec3(-0.495220,0.214357,0.254139),
      vec3(0.306123,0.373687,-0.825715),
      vec3(0.021665,0.026737,0.053220),
      vec3(-0.208231,0.117129,-0.098685),
      vec3(0.139749,0.080968,-0.043086),
      vec3(-0.153599,0.182814,0.262090),
      vec3(-0.159673,0.496777,-0.743568),
      vec3(0.134797,0.117152,0.095753),
      vec3(-0.155626,0.120533,0.019395),
      vec3(0.042311,0.054462,-0.049709),
      vec3(0.001257,0.031288,0.034468),
      vec3(-0.002271,0.003199,-0.002304),
      vec3(0.662104,0.717307,0.033854),
      vec3(-0.373100,0.576021,0.308274),
      vec3(0.024233,0.231316,-0.173688),
      vec3(0.161311,0.420217,0.234273),
      vec3(-0.045248,0.078031,-0.010411),
      vec3(0.167453,0.376942,-0.094872),
      vec3(-0.056194,0.433247,0.173218),
      vec3(-0.016224,0.123149,-0.035569),
      vec3(0.067127,0.407641,0.028479)
   );

   float depth = texture2D(depthmap, vTexCoords).r;
   if(depth == 1.0) {
      discard;
   }

   vec4 screen_position = vec4(vTexCoords, depth,1.0);
   vec4 pos = projinv*screen_position;
   pos /= pos.w;
   vec3 position = pos.xyz;

   //approximate the normal from the depth map; I find this simpler
   //than trying to recompute the exact normal within every possible object shader

   //pixel offset positions in screen space
   ivec2 dim = textureSize(depthmap,0);
   vec2 offset1 = vec2(0.0,1.0/float(dim.y));
   vec2 offset2 = vec2(1.0/float(dim.x),0.0);
   float depth1 = texture2D(depthmap, vTexCoords + offset1).r;
   float depth2 = texture2D(depthmap, vTexCoords + offset2).r;
   
   vec3 p1 = vec3(screen_position.xy+offset1, depth1 - depth);
   vec3 p2 = vec3(screen_position.xy+offset2, depth2 - depth);

   //convert to model space
   vec4 pos1 = projinv*vec4(p1,1);
   pos1 /= pos1.w;
   vec4 pos2 = projinv*vec4(p2,1);
   pos2 /= pos2.w;

   vec3 normal = normalize(cross(pos1.xyz-position, pos2.xyz-position)); //model normal, important we normalize in model space

   //pseudo random number

   float occlusion = 0.0;
   for(int c = 0; c < cycles; c++) {
   vec3 random = normalize(pseudorandomVec3(position+float(c)));
   for(int i=0; i < samples; i++) {

      vec3 ray = radius * reflect(sample_sphere[i],random);
      vec3 hemi_ray = position + sign(dot(ray,normal)) * ray; //model space
      vec4 hemi_screen = projectionMatrix*vec4(hemi_ray,1.0);
      hemi_screen /= hemi_screen.w;
      
      float occ_depth = texture2D(depthmap, clamp(hemi_screen.xy,0.0,1.0)).r;
      float difference = hemi_screen.z - occ_depth;
      
      occlusion += step(0.0, difference) * (1.0-smoothstep(0.0, area, difference));
   }
   }
   float ao = 1.0 - total_strength * occlusion * (1.0 / float(cycles*samples));
   gl_FragDepthEXT = clamp(ao+base,0.0,1.0);

}`,vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `,uniforms:{total_strength:{type:"f",value:1},radius:{type:"f",value:5},projinv:{type:"mat4",value:[]}}},sphereimposter:Dr,sphereimposteroutline:vi,sprite:bi,stickimposter:Ni,stickimposteroutline:Ti,volumetric:Br};function Vi(Bt){let E={};for(const xe in Bt){E[xe]={},E[xe].type=Bt[xe].type;var ne=Bt[xe].value;ne instanceof B.Color?E[xe].value=ne.clone():typeof ne=="number"?E[xe].value=ne:ne instanceof Array?E[xe].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return E}const yi={clone:Vi};class Wi extends Ce{constructor(E=50,ne=1,xe=.1,Ve=2e3,ze=!1){super(),this.projectionMatrix=new d.Matrix4,this.projectionMatrixInverse=new d.Matrix4,this.matrixWorldInverse=new d.Matrix4,this.fov=E,this.aspect=ne,this.near=xe,this.far=Ve;var yt=this.position.z;this.right=yt*Math.tan(Math.PI/180*E),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!ze,this.updateProjectionMatrix()}lookAt(E){this.matrix.lookAt(this.position,E,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof d.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error("Unimplemented math operation."))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}class tn{constructor(E,ne=1,xe=1e3){this.name="",this.color=new B.Color(E),this.near=ne,this.far=xe}clone(){return new tn(this.color.getHex(),this.near,this.far)}}class an{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(E){this.gl=E.context,this.renderer=E,this.precision=E.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var ne=0;this.sprite.vertices[ne++]=-1,this.sprite.vertices[ne++]=-1,this.sprite.vertices[ne++]=0,this.sprite.vertices[ne++]=0,this.sprite.vertices[ne++]=1,this.sprite.vertices[ne++]=-1,this.sprite.vertices[ne++]=1,this.sprite.vertices[ne++]=0,this.sprite.vertices[ne++]=1,this.sprite.vertices[ne++]=1,this.sprite.vertices[ne++]=1,this.sprite.vertices[ne++]=1,this.sprite.vertices[ne++]=-1,this.sprite.vertices[ne++]=1,this.sprite.vertices[ne++]=0,this.sprite.vertices[ne++]=1,ne=0,this.sprite.faces[ne++]=0,this.sprite.faces[ne++]=1,this.sprite.faces[ne++]=2,this.sprite.faces[ne++]=0,this.sprite.faces[ne++]=2,this.sprite.faces[ne++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(Yr.sprite,this.precision||1),this.sprite.attributes={};const xe={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,"position"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,"uv"),xe.uvOffset=this.gl.getUniformLocation(this.sprite.program,"uvOffset"),xe.uvScale=this.gl.getUniformLocation(this.sprite.program,"uvScale"),xe.rotation=this.gl.getUniformLocation(this.sprite.program,"rotation"),xe.scale=this.gl.getUniformLocation(this.sprite.program,"scale"),xe.alignment=this.gl.getUniformLocation(this.sprite.program,"alignment"),xe.color=this.gl.getUniformLocation(this.sprite.program,"color"),xe.map=this.gl.getUniformLocation(this.sprite.program,"map"),xe.opacity=this.gl.getUniformLocation(this.sprite.program,"opacity"),xe.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,"useScreenCoordinates"),xe.screenPosition=this.gl.getUniformLocation(this.sprite.program,"screenPosition"),xe.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,"modelViewMatrix"),xe.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,"projectionMatrix"),xe.fogNear=this.gl.getUniformLocation(this.sprite.program,"fogNear"),xe.fogFar=this.gl.getUniformLocation(this.sprite.program,"fogFar"),xe.fogColor=this.gl.getUniformLocation(this.sprite.program,"fogColor"),xe.alphaTest=this.gl.getUniformLocation(this.sprite.program,"alphaTest"),this.sprite.uniforms=xe}render(E,ne,xe,Ve,ze){var yt,lt,mt,Rt,kt,Lt,gr,Yt,Cr,Ar;if(!this.gl)throw new Error("WebGLRenderer not initialized");let Ur=[];(yt=E?.__webglSprites)===null||yt===void 0||yt.forEach(M=>{(ze&&M.material.depthTest==0||!ze&&M.material.depthTest)&&Ur.push(M)});let _r=Ur.length;if(!_r)return;const Lr=this.sprite.attributes,wr=this.sprite.uniforms;if(!wr)throw new Error("Uniforms not defined");var Ri=.5*xe,Zt=.5*Ve;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(Lr.position),this.gl.enableVertexAttribArray(Lr.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(Lr.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(Lr.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv(wr.projectionMatrix,!1,ne.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i(wr.map,0);var ri,oe=E.fog;let n,a,h;oe?(this.gl.uniform3f(wr.fogColor,oe.color.r,oe.color.g,oe.color.b),this.gl.uniform1f(wr.fogNear,oe.near),this.gl.uniform1f(wr.fogFar,oe.far)):(this.gl.uniform1f(wr.fogNear,0),this.gl.uniform1f(wr.fogFar,0));let f=[];for(ri=0;ri<_r;ri++)n=Ur[ri],a=n.material,a&&(a.depthTest!=0||ze)&&n.visible&&a.opacity!==0&&(a.useScreenCoordinates?n.z=-n.position.z:(n._modelViewMatrix.multiplyMatrices(ne.matrixWorldInverse,n.matrixWorld),n.z=-n._modelViewMatrix.elements[14]));for(Ur.sort(ur),ri=0;ri<_r;ri++)if(n=Ur[ri],a=n.material,a&&n.visible&&a.opacity!==0&&a.map&&a.map.image&&a.map.image.width){this.gl.uniform1f(wr?.alphaTest||null,a.alphaTest);var T=a.map.image.width,_=a.map.image.height;f[0]=T*this.renderer.devicePixelRatio/xe,f[1]=_*this.renderer.devicePixelRatio/Ve,a.useScreenCoordinates===!0?(this.gl.uniform1i(wr.useScreenCoordinates,1),this.gl.uniform3f(wr.screenPosition,(n.position.x*this.renderer.devicePixelRatio-Ri)/Ri,(Zt-n.position.y*this.renderer.devicePixelRatio)/Zt,Math.max(0,Math.min(1,n.position.z)))):(this.gl.uniform1i(wr.useScreenCoordinates,0),this.gl.uniformMatrix4fv(wr.modelViewMatrix,!1,n._modelViewMatrix.elements)),h=1/(a.scaleByViewport?Ve:1),f[0]*=h*n.scale.x,f[1]*=h*n.scale.y;let M=(lt=a?.alignment)===null||lt===void 0?void 0:lt.x,P=(mt=a?.alignment)===null||mt===void 0?void 0:mt.y;a.screenOffset&&(M=(M||0)+2*a.screenOffset.x/T,P=(P||0)+2*a.screenOffset.y/_),this.gl.uniform2f(wr.uvScale,((Rt=a?.uvScale)===null||Rt===void 0?void 0:Rt.x)||1,((kt=a?.uvScale)===null||kt===void 0?void 0:kt.y)||1),this.gl.uniform2f(wr.uvOffset,((Lt=a?.uvOffset)===null||Lt===void 0?void 0:Lt.x)||0,((gr=a?.uvOffset)===null||gr===void 0?void 0:gr.y)||0),this.gl.uniform2f(wr.alignment,M||0,P||0),this.gl.uniform1f(wr.opacity,a.opacity),this.gl.uniform3f(wr.color,((Yt=a?.color)===null||Yt===void 0?void 0:Yt.r)||0,((Cr=a?.color)===null||Cr===void 0?void 0:Cr.g)||0,((Ar=a?.color)===null||Ar===void 0?void 0:Ar.b)||0),this.gl.uniform1f(wr.rotation,n.rotation),this.gl.uniform2fv(wr.scale,f),this.renderer.setDepthTest(a.depthTest),this.renderer.setDepthWrite(a.depthWrite),this.renderer.setTexture(a.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(E,ne){if(!this.gl)throw new Error("WebGL Rendering context not found");var xe=this.gl.createProgram();if(!xe)throw new Error("Error creating webgl program");var Ve=this.gl.createShader(this.gl.FRAGMENT_SHADER),ze=this.gl.createShader(this.gl.VERTEX_SHADER);if(!Ve)throw new Error("Unable to create fragment shader SpritePlugin.createProgram");if(!ze)throw new Error("Unable to create vertex shader SpritePlugin.createProgram");var yt="precision "+ne+` float;
`;if(this.gl.shaderSource(Ve,yt+E.fragmentShader),this.gl.shaderSource(ze,yt+E.vertexShader),this.gl.compileShader(Ve),this.gl.compileShader(ze),!this.gl.getShaderParameter(Ve,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(ze,this.gl.COMPILE_STATUS))throw new Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(Ve)} 
      ${this.gl.getShaderInfoLog(ze)}`);return this.gl.attachShader(xe,Ve),this.gl.attachShader(xe,ze),this.gl.linkProgram(xe),this.gl.getProgramParameter(xe,this.gl.LINK_STATUS)||console.error("Could not initialize shader"),xe}}function ur(Bt,E){return Bt.z!==E.z?E.z-Bt.z:E.id-Bt.id}var Gr=null,Kr=null;class qi{constructor(E){this.context=null,this.devicePixelRatio=1,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._offscreen=null,this._bitmap=null,this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._vector3=new d.Vector3,this._worldInverse=new d.Matrix4,this._projInverse=new d.Matrix4,this._textureMatrix=new d.Matrix4,this._fullProjModelMatrix=new d.Matrix4,this._fullProjModelMatrixInv=new d.Matrix4,this._direction=new d.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new an,this._screenshader=null,this._AOshader=null,this._blurshader=null,this._vertexattribpos=null,this._aovertexattribpos=null,this._blurvertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,this._shadingTexture=null,this._scratchTexture=null,this._upscale=null,this._AOstrength=1,this._AOradius=5,this.SHADE_TEXTURE=3,E=E||{},this.row=E.row,this.col=E.col,this.rows=E.rows,this.cols=E.cols,this._canvas=E.canvas!==void 0?E.canvas:document.createElement("canvas"),this._precision=E.precision!==void 0?E.precision:"highp",this._alpha=E.alpha===void 0||E.alpha,this._premultipliedAlpha=E.premultipliedAlpha===void 0||E.premultipliedAlpha,this._antialias=E.antialias!==void 0&&E.antialias,this._upscale=E.upscale!==void 0?E.upscale:this._antialias,this._preserveDrawingBuffer=E.preserveDrawingBuffer!==void 0&&E.preserveDrawingBuffer,this._clearColor=E.clearColor!==void 0?new B.Color(E.clearColor):new B.Color(0),this._clearAlpha=E.clearAlpha!==void 0?E.clearAlpha:0,this._outlineMaterial=new xr(E.outline),this._outlineSphereImposterMaterial=new Pr(E.outline),this._outlineStickImposterMaterial=new wi(E.outline),this._outlineEnabled=!!E.outline,this._AOEnabled=!!E.ambientOcclusion,E.ambientOcclusion&&E.ambientOcclusion.strength!==void 0&&(this._AOstrength=parseFloat(E.ambientOcclusion.strength)),this._AOstrength==0&&(this._AOEnabled=!1),E.ambientOcclusion&&E.ambientOcclusion.radius!==void 0&&(this._AOradius=parseFloat(E.ambientOcclusion.radius)),this.domElement=this._canvas,this._canvas.id=E.id,E.containerWidth!=0&&E.containerHeight!=0&&(this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension("ANGLE_instanced_arrays"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension("EXT_frag_depth"),this._extFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._extColorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this.sprites.init(this))}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1(),regen:!1}}getContext(){return this._gl}getCanvas(){return this._canvas}isLost(){return this._gl==null||this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(E,ne){this._clearColor.setHex(E),this._clearAlpha=ne,this.isLost()||this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(E){this._outlineMaterial=new xr(E),this._outlineSphereImposterMaterial=new Pr(E),this._outlineStickImposterMaterial=new wi(E),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}enableAmbientOcclusion(E){E&&(E.strength&&(this._AOstrength=E.strength),E.scale&&(this._AOradius=E.scale)),this._AOEnabled=this._AOstrength>0}disableAmbientOcclusion(){this._AOEnabled=!1}setViewport(){if(this._offscreen&&(this._offscreen.width=this._canvas.width,this._offscreen.height=this._canvas.height),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&!this.isLost()){var E=this._gl.drawingBufferWidth/this.cols,ne=this._gl.drawingBufferHeight/this.rows;this._viewportWidth=E,this._viewportHeight=ne,this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(E*this.col,ne*this.row,E,ne),this._gl.viewport(E*this.col,ne*this.row,E,ne)}}setSize(E,ne){this.devicePixelRatio=window.devicePixelRatio!==void 0?window.devicePixelRatio:1,this._upscale&&this.devicePixelRatio<2&&(this.devicePixelRatio=2),this._canvas.width=E*this.devicePixelRatio,this._canvas.height=ne*this.devicePixelRatio,this._canvas.style.width=E+"px",this._canvas.style.height=ne+"px",this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null?(this.isLost()||(this._viewportWidth=this._gl.drawingBufferWidth/this.cols,this._viewportHeight=this._gl.drawingBufferHeight/this.rows),this.setViewport()):(this._viewportWidth=this._canvas.width,this._viewportHeight=this._canvas.height,this.isLost()||this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight)),this.initFrameBuffer()}clear(E,ne,xe){var Ve=0;(E===void 0||E)&&(Ve|=this._gl.COLOR_BUFFER_BIT),(ne===void 0||ne)&&(Ve|=this._gl.DEPTH_BUFFER_BIT),(xe===void 0||xe)&&(Ve|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(Ve)}setMaterialFaces(E,ne){var xe=E.side===u,Ve=E.side===y;E.imposter||(Ve=ne?!Ve:Ve),this._oldDoubleSided!==xe&&(xe?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=xe),this._oldFlipSided!==Ve&&(Ve?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=Ve),this._gl.cullFace(this._gl.BACK)}setDepthTest(E){this._oldDepthTest!==E&&(E?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=E)}setDepthWrite(E){this._oldDepthWrite!==E&&(this._gl.depthMask(E),this._oldDepthWrite=E)}setBlending(E){E?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND)}initMaterial(E,ne,xe,Ve){var ze,yt;if(E.addEventListener("dispose",this.onMaterialDispose.bind(this)),yt=E.shaderID){var lt=Yr[yt];E.vertexShader=lt.vertexShader,E.fragmentShader=lt.fragmentShader,E.uniforms=yi.clone(lt.uniforms),E.shaded&&E.makeShaded(this.SHADE_TEXTURE)}ze={wireframe:E.wireframe,fragdepth:E.imposter,volumetric:E.volumetric,shaded:E.shaded},E.program=this.buildProgram(E.fragmentShader,E.vertexShader,E.uniforms,ze)}renderBuffer(E,ne,xe,Ve,ze,yt){var lt,mt;if(Ve.visible&&(lt=this.setProgram(E,ne,xe,Ve,yt,this))){mt=lt.attributes;var Rt,kt,Lt=!1,gr=Ve.wireframe?1:0,Yt=16777215*ze.id+2*lt.id+gr;if(Yt!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=Yt,Lt=!0),Lt&&(this.disableAttributes(),mt.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,ze.__webglVertexBuffer),this.enableAttribute(mt.position),this._gl.vertexAttribPointer(mt.position,3,this._gl.FLOAT,!1,0,0)),mt.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,ze.__webglColorBuffer),this.enableAttribute(mt.color),this._gl.vertexAttribPointer(mt.color,3,this._gl.FLOAT,!1,0,0)),mt.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,ze.__webglNormalBuffer),this.enableAttribute(mt.normal),this._gl.vertexAttribPointer(mt.normal,3,this._gl.FLOAT,!1,0,0)),mt.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,ze.__webglOffsetBuffer),this.enableAttribute(mt.offset),this._gl.vertexAttribPointer(mt.offset,3,this._gl.FLOAT,!1,0,0)),mt.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,ze.__webglRadiusBuffer),this.enableAttribute(mt.radius),this._gl.vertexAttribPointer(mt.radius,1,this._gl.FLOAT,!1,0,0))),yt instanceof Oe){if(Ve.shaderID==="instanced"){var Cr=Ve.sphere.geometryGroups[0];Lt&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,ze.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Cr.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,ze.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Cr.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,ze.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,Cr.faceArray,this._gl.STATIC_DRAW)),Rt=Cr.faceidx,this._extInstanced.vertexAttribDivisorANGLE(mt.offset,1),this._extInstanced.vertexAttribDivisorANGLE(mt.radius,1),this._extInstanced.vertexAttribDivisorANGLE(mt.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,Rt,this._gl.UNSIGNED_SHORT,0,ze.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(mt.offset,0),this._extInstanced.vertexAttribDivisorANGLE(mt.radius,0),this._extInstanced.vertexAttribDivisorANGLE(mt.color,0)}else Ve.wireframe?(kt=ze.lineidx,this.setLineWidth(Ve.wireframeLinewidth),Lt&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,ze.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,kt,this._gl.UNSIGNED_SHORT,0)):(Rt=ze.faceidx,Lt&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,ze.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,Rt,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=Rt,this.info.render.faces+=Rt/3}else yt instanceof Ee&&(kt=ze.vertices,this.setLineWidth(Ve.linewidth),this._gl.drawArrays(this._gl.LINES,0,kt),this.info.render.calls++)}}clearShading(){this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}setShading(E,ne,xe){let Ve=E.__lights,ze=E.fog,yt=[];for(let Rt=0,kt=E.__webglObjects.length;Rt<kt;Rt++){let Lt=E.__webglObjects[Rt];Lt.render&&Lt[xe]&&yt.push(Lt)}if(yt.length==0)return;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,null,0),this.renderObjects(E.__webglObjects,!0,xe+"Depth",ne,Ve,ze,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._scratchTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._AOshader),this._currentProgram=this._AOshader,this.setDepthTest(-1),this.setDepthWrite(-1);let lt=this._AOshader.uniforms;this._gl.uniform1f(lt.total_strength,this._AOstrength),this._gl.uniform1f(lt.radius,this._AOradius),this._fullProjModelMatrix=new d.Matrix4,this._fullProjModelMatrixInv=new d.Matrix4;let mt=yt[0].object;this._fullProjModelMatrix.multiplyMatrices(ne.projectionMatrix,mt._modelViewMatrix),this._fullProjModelMatrixInv.getInverse(this._fullProjModelMatrix),this._gl.uniformMatrix4fv(lt.projectionMatrix,!1,this._fullProjModelMatrix.elements),this._gl.uniformMatrix4fv(lt.projinv,!1,this._fullProjModelMatrixInv.elements),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._aovertexattribpos),this._gl.vertexAttribPointer(this._aovertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._blurshader),this._currentProgram=this._blurshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._blurvertexattribpos),this._gl.vertexAttribPointer(this._blurvertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}render(E,ne){if(ne instanceof Wi==0)return void console.error("Renderer.render: camera is not an instance of Camera.");var xe,Ve,ze,yt,lt,mt=E.__lights,Rt=E.fog;if(this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&E.updateMatrixWorld(),ne.parent===void 0&&ne.updateMatrixWorld(),ne.matrixWorldInverse.getInverse(ne.matrixWorld),this.isLost())return;this.autoUpdateObjects&&this.initWebGLObjects(E),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(!0,!0,!0),lt=E.__webglObjects;let kt=!1,Lt=this._AOEnabled;for(xe=0,Ve=lt.length;xe<Ve;xe++)yt=(ze=lt[xe]).object,ze.render=!1,yt.visible&&(this.setupMatrices(yt,ne),this.unrollBufferMaterial(ze),ze.render=!0,ze.volumetric&&(kt=!0),ze.hasAO&&(Lt=!0));if(this.setBlending(!1),Lt&&this.setShading(E,ne,"opaque"),this.renderObjects(E.__webglObjects,!0,"opaque",ne,mt,Rt,!1),Lt&&this.clearShading(),this.renderSprites(E,ne,!1),this.renderObjects(E.__webglObjects,!0,"transparentDepth",ne,mt,Rt,!0),this.renderObjects(E.__webglObjects,!1,"transparent",ne,mt,Rt,!0),kt&&this._fb&&(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,null,0),this.renderObjects(E.__webglObjects,!1,"volumetric",ne,mt,Rt,!0)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(E,ne,!0),this._bitmap){const gr=this._offscreen.transferToImageBitmap();this._bitmap.transferFromImageBitmap(gr),gr.close()}}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let E=this._viewportWidth,ne=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,E,ne),this._gl.viewport(0,0,E,ne),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,E,ne,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,E,ne,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._shadingTexture&&(this._gl.deleteTexture(this._shadingTexture),this._shadingTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,E,ne,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.deleteTexture(this._scratchTexture),this._scratchTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,E,ne,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.clearDepth(1),this._gl.clear(this._gl.DEPTH_BUFFER_BIT),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let E=this._viewportWidth,ne=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,E,ne),this._gl.viewport(0,0,E,ne),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._shadingTexture=this._gl.createTexture(),this._scratchTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var xe=this._antialias?Yr.screenaa:Yr.screen;this._screenshader=this.buildProgram(xe.fragmentShader,xe.vertexShader,xe.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,"vertexPosition"),this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array([1,1,-1,1,-1,-1,-1,-1,1,-1,1,1]),this._gl.STATIC_DRAW);let Ve=Yr.ssao;this._AOshader=this.buildProgram(Ve.fragmentShader,Ve.vertexShader,Ve.uniforms,{}),this._aovertexattribpos=this._gl.getAttribLocation(this._AOshader,"vertexPosition");let ze=Yr.blur;this._blurshader=this.buildProgram(ze.fragmentShader,ze.vertexShader,ze.uniforms,{}),this._blurvertexattribpos=this._gl.getAttribLocation(this._blurshader,"vertexPosition")}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(E){if(E.__webglObjects||(E.__webglObjects=[],E.__webglObjectsImmediate=[],E.__webglSprites=[],E.__webglFlares=[]),E.__objectsAdded.length){for(;E.__objectsAdded.length;)this.addObject(E.__objectsAdded[0],E),E.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;E.__objectsRemoved.length;)this.removeObject(E.__objectsRemoved[0],E),E.__objectsRemoved.splice(0,1);for(var ne=0,xe=E.__webglObjects.length;ne<xe;ne++)this.updateObject(E.__webglObjects[ne].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(E,ne){E!=null&&ne!=null||(E=this._canvas.width,ne=this._canvas.height);var xe=E/ne;return this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&(xe=E/this.cols/(ne/this.rows)),xe}setTexture(E,ne,xe){if(E.needsUpdate){E.__webglInit||(E.__webglInit=!0,E.addEventListener("dispose",this.onTextureDispose.bind(this)),E.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+ne);var Ve=xe?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(Ve,E.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,E.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,E.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,E.unpackAlignment);var ze=this.paramToGL(E.format),yt=this.paramToGL(E.type);if(xe)this.setTextureParameters(this._gl.TEXTURE_3D,E),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,E.image.size.z,E.image.size.y,E.image.size.x,0,this._gl.RED,this._gl.FLOAT,E.image.data);else{var lt=E.image,mt=lt.width,Rt=lt.height;mt===void 0&&(mt=lt.length,ze==this._gl.RGBA&&(mt/=4),Rt=1),this.setTextureParameters(this._gl.TEXTURE_2D,E),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,ze,ze,yt,E.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,ze,mt,Rt,0,ze,yt,E.image)}E.needsUpdate=!1,E.onUpdate&&E.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+ne),xe?this._gl.bindTexture(this._gl.TEXTURE_3D,E.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,E.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(E){this._enabledAttributes[E]||(this._gl.enableVertexAttribArray(E),this._enabledAttributes[E]=!0)}disableAttributes(){for(let E in this._enabledAttributes)this._enabledAttributes[E]&&(this._gl.disableVertexAttribArray(E),this._enabledAttributes[E]=!1)}setPolygonOffset(E,ne,xe){this._oldPolygonOffset!==E&&(E?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(E){E!==this._oldLineWidth&&(this._gl.lineWidth(E),this._oldLineWidth=E)}deallocateGeometry(E){if(E.__webglInit=void 0,E.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(E.__webglVertexBuffer),E.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(E.__webglColorBuffer),E.geometryGroups!==void 0)for(var ne=0,xe=E.groups;ne<xe;ne++){var Ve=E.geometryGroups[ne];Ve.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(Ve.__webglVertexBuffer),Ve.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(Ve.__webglColorBuffer),Ve.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(Ve.__webglNormalBuffer),Ve.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(Ve.__webglFaceBuffer),Ve.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(Ve.__webglLineBuffer)}}deallocateMaterial(E){var ne=E.program;if(ne!==void 0){var xe,Ve,ze;E.program=void 0;var yt=!1;for(xe=0,Ve=this._programs.length;xe<Ve;xe++)if((ze=this._programs[xe]).program===ne){ze.usedTimes--,ze.usedTimes===0&&(yt=!0);break}if(yt===!0){var lt=[];for(xe=0,Ve=this._programs.length;xe<Ve;xe++)(ze=this._programs[xe]).program!==ne&&lt.push(ze);this._programs=lt,this._gl.deleteProgram(ne),this.info.memory.programs--}}}deallocateTexture(E){if(E.image&&E.image.__webglTextureCube)this._gl.deleteTexture(E.image.__webglTextureCube);else{if(!E.__webglInit)return;E.__webglInit=!1,this._gl.deleteTexture(E.__webglTexture)}}onGeometryDispose(E){var ne=E.target;ne.removeEventListener("dispose",this.onGeometryDispose),this.deallocateGeometry(ne),this.info.memory.geometries--}onTextureDispose(E){var ne=E.target;ne.removeEventListener("dispose",this.onTextureDispose),this.deallocateTexture(ne),this.info.memory.textures--}onMaterialDispose(E){var ne=E.target;ne.removeEventListener("dispose",this.onMaterialDispose),this.deallocateMaterial(ne)}getShader(E,ne){var xe;return this.isWebGL1()||ne.startsWith("#version")||(ne=ne.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),ne=`#version 300 es
`+(ne=(ne=(ne=(ne=(ne=E=="fragment"?ne.replace(/varying/g,"in"):ne.replace(/varying/g,"out")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;")).replace(/gl_FragColor/g,"glFragColor"))),E==="fragment"?xe=this._gl.createShader(this._gl.FRAGMENT_SHADER):E==="vertex"&&(xe=this._gl.createShader(this._gl.VERTEX_SHADER)),xe==null?null:(this._gl.shaderSource(xe,ne),this._gl.compileShader(xe),this._gl.getShaderParameter(xe,this._gl.COMPILE_STATUS)?xe:(console.error(this._gl.getShaderInfoLog(xe)),console.error("could not initialize shader"),null))}buildProgram(E,ne,xe,Ve){var ze,yt,lt,mt,Rt=[];for(ze in Rt.push(E),Rt.push(ne),Ve)Rt.push(ze),Rt.push(Ve[ze]);for(mt=Rt.join(),ze=0,yt=this._programs.length;ze<yt;ze++){var kt=this._programs[ze];if(kt.code===mt)return kt.usedTimes++,kt.program}if(this.isWebGL1()&&Ve.volumetric)throw new Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");if((lt=this._gl.createProgram())==null)return null;var Lt,gr,Yt,Cr="precision "+this._precision+" float;",Ar=[Ve.volumetric?"#version 300 es":"",Cr].join(`
`),Ur=[Ve.volumetric?"#version 300 es":"",Ve.fragdepth&&this.isWebGL1()?"#extension GL_EXT_frag_depth: enable":"",Ve.shaded?"#define SHADED 1":"",Ve.wireframe?"#define WIREFRAME 1":"",Cr].join(`
`),_r=this.getShader("fragment",Ur+E),Lr=this.getShader("vertex",Ar+ne);for(gr in Lr!=null&&this._gl.attachShader(lt,Lr),_r!=null&&this._gl.attachShader(lt,_r),this._gl.linkProgram(lt),this._gl.getProgramParameter(lt,this._gl.LINK_STATUS)||console.error("Could not initialize shader"),lt.uniforms={},lt.attributes={},Lt=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","vWidth","vHeight"],xe)Lt.push(gr);for(Yt=0;Yt<Lt.length;Yt++){var wr=Lt[Yt];lt.uniforms[wr]=this._gl.getUniformLocation(lt,wr)}for(Lt=["position","normal","color","lineDistance","offset","radius"],Yt=0;Yt<Lt.length;Yt++){var Ri=Lt[Yt];lt.attributes[Ri]=this._gl.getAttribLocation(lt,Ri)}return lt.id=this._programs_counter++,this._programs.push({program:lt,code:mt,usedTimes:1}),this.info.memory.programs=this._programs.length,lt}setProgram(E,ne,xe,Ve,ze,yt){if(Ve.needsUpdate&&(Ve.program&&this.deallocateMaterial(Ve),this.initMaterial(Ve,ne,xe,ze),Ve.needsUpdate=!1),Ve.program==null)return null;var lt=!1,mt=Ve.program,Rt=mt.uniforms,kt=Ve.uniforms;if(mt!=this._currentProgram&&(this._gl.useProgram(mt),this._currentProgram=mt,lt=!0),Ve.id!=this._currentMaterialId&&(this._currentMaterialId=Ve.id,lt=!0),E!=this._currentCamera&&(this._currentCamera=E,lt=!0),Rt.projectionMatrix&&this._gl.uniformMatrix4fv(Rt.projectionMatrix,!1,E.projectionMatrix.elements),Rt.modelViewMatrix&&this._gl.uniformMatrix4fv(Rt.modelViewMatrix,!1,ze._modelViewMatrix.elements),Rt.normalMatrix&&this._gl.uniformMatrix3fv(Rt.normalMatrix,!1,ze._normalMatrix.elements),Rt.projinv&&(this._projInverse.getInverse(E.projectionMatrix),this._gl.uniformMatrix4fv(Rt.projinv,!1,this._projInverse.elements)),Rt.viewMatrix&&this._gl.uniformMatrix4fv(Rt.viewMatrix,!1,E.matrixWorldInverse.elements),Rt.vWidth&&this._gl.uniform1f(Rt.vWidth,this._viewportWidth),Rt.vHeight&&this._gl.uniform1f(Rt.vHeight,this._viewportHeight),lt){if(kt.fogColor.value=xe.color,kt.fogNear.value=xe.near,kt.fogFar.value=xe.far,Ve.shaderID.startsWith("lambert")||Ve.shaderID==="instanced"||Ve.shaderID.endsWith("imposter"))this._lightsNeedUpdate&&(this.setupLights(mt,ne),this._lightsNeedUpdate=!1),kt.directionalLightColor.value=this._lights.directional.colors,kt.directionalLightDirection.value=this._lights.directional.positions;else if(Ve.shaderID.endsWith("outline"))kt.outlineColor.value=Ve.outlineColor,kt.outlineWidth.value=Ve.outlineWidth,kt.outlinePushback.value=Ve.outlinePushback,kt.outlineMaxPixels.value=Ve.outlineMaxPixels*this.devicePixelRatio;else if(Ve.shaderID==="volumetric"){ze._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse(ze._modelViewMatrix),this._projInverse.getInverse(E.projectionMatrix),this._textureMatrix.multiplyMatrices(ze.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(Rt.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(Rt.projinv,!1,this._projInverse.elements);let Lt=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);kt.step.value=ze.material.unit*Lt,kt.maxdepth.value=ze.material.maxdepth*Lt,kt.transfermax.value=ze.material.transfermax,kt.transfermin.value=ze.material.transfermin,kt.subsamples.value=ze.material.subsamples,yt.setTexture(ze.material.transferfn,4,!1),yt.setTexture(ze.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}kt.opacity.value=Ve.opacity,this.loadMaterialUniforms(Rt,kt)}return kt.shading&&(kt.shading.value==3?(this._gl.activeTexture(this._gl.TEXTURE0+this.SHADE_TEXTURE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture)):console.error("Invalid shading textures.")),mt}loadMaterialUniforms(E,ne){var xe,Ve,ze,yt;for(xe in ne)E[xe]&&(Ve=ne[xe].type,ze=ne[xe].value,yt=E[xe],Ve==="f"?this._gl.uniform1f(yt,ze):Ve==="i"?this._gl.uniform1i(yt,ze):Ve==="fv"?this._gl.uniform3fv(yt,ze):Ve==="c"?this._gl.uniform3f(yt,ze.r,ze.g,ze.b):Ve==="f4"&&this._gl.uniform4f(yt,ze[0],ze[1],ze[2],ze[3]))}addObject(E,ne){var xe,Ve,ze,yt;if(!E.__webglInit&&(E.__webglInit=!0,E._modelViewMatrix=new d.Matrix4,E._normalMatrix=new d.Matrix3,E.geometry!==void 0&&E.geometry.__webglInit===void 0&&(E.geometry.__webglInit=!0,E.geometry.addEventListener("dispose",this.onGeometryDispose.bind(this))),E instanceof Oe||E instanceof Ee))for(xe=0,Ve=(ze=E.geometry).geometryGroups.length;xe<Ve;xe++)(yt=ze.geometryGroups[xe]).id=this._geometryGroupCounter++,yt.__webglVertexBuffer||(E instanceof Oe?(this.createMeshBuffers(yt),ze.elementsNeedUpdate=!0,ze.normalsNeedUpdate=!0):E instanceof Ee&&this.createLineBuffers(yt),ze.verticesNeedUpdate=!0,ze.colorsNeedUpdate=!0);if(!E.__webglActive){if(E instanceof Oe||E instanceof Ee)for(xe=0,Ve=(ze=E.geometry).geometryGroups.length;xe<Ve;xe++)yt=ze.geometryGroups[xe],this.addBuffer(ne.__webglObjects,yt,E);else E instanceof dt&&ne.__webglSprites.push(E);E.__webglActive=!0}}updateObject(E){var ne,xe=E.geometry;if(E instanceof Oe||E instanceof Ee){for(var Ve=0,ze=xe.geometryGroups.length;Ve<ze;Ve++)ne=xe.geometryGroups[Ve],(xe.verticesNeedUpdate||xe.elementsNeedUpdate||xe.colorsNeedUpdate||xe.normalsNeedUpdate)&&this.setBuffers(ne,this._gl.STATIC_DRAW);xe.verticesNeedUpdate=!1,xe.elementsNeedUpdate=!1,xe.normalsNeedUpdate=!1,xe.colorsNeedUpdate=!1,xe.buffersNeedUpdate=!1}}removeObject(E,ne){E instanceof Oe||E instanceof Ee?this.removeInstances(ne.__webglObjects,E):E instanceof dt&&this.removeInstancesDirect(ne.__webglSprites,E),E.__webglActive=!1}removeInstances(E,ne){for(var xe=E.length-1;xe>=0;--xe)E[xe].object===ne&&E.splice(xe,1)}removeInstancesDirect(E,ne){for(var xe=E.length-1;xe>=0;--xe)E[xe]===ne&&E.splice(xe,1)}unrollBufferMaterial(E){var ne=E.object.material;if(ne.volumetric)E.opaque=null,E.transparent=null,E.volumetric=ne;else if(ne.transparent){if(E.opaque=null,E.volumetric=null,E.transparent=ne,!ne.wireframe){let xe=ne.clone();xe.opacity=0,E.transparentDepth=xe}}else{if(E.opaque=ne,E.transparent=null,E.volumetric=null,!ne.wireframe){let xe=ne.clone();xe.opacity=0,E.opaqueDepth=xe}ne.hasAO&&(E.hasAO=!0),(this._AOEnabled||E.hasAO)&&(E.opaqueShaded=ne.clone(),E.opaqueShaded.shaded=!0)}}setBuffers(E,ne){var xe=E.vertexArray,Ve=E.colorArray;if(E.__webglOffsetBuffer!==void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,E.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,xe,ne)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,E.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,xe,ne)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,E.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Ve,ne),E.normalArray&&E.__webglNormalBuffer!==void 0){var ze=E.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,E.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,ze,ne)}if(E.radiusArray&&E.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,E.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,E.radiusArray,ne)),E.faceArray&&E.__webglFaceBuffer!==void 0){var yt=E.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,E.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,yt,ne)}if(E.lineArray&&E.__webglLineBuffer!==void 0){var lt=E.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,E.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,lt,ne)}}createMeshBuffers(E){E.radiusArray&&(E.__webglRadiusBuffer=this._gl.createBuffer()),E.useOffset&&(E.__webglOffsetBuffer=this._gl.createBuffer()),E.__webglVertexBuffer=this._gl.createBuffer(),E.__webglNormalBuffer=this._gl.createBuffer(),E.__webglColorBuffer=this._gl.createBuffer(),E.__webglFaceBuffer=this._gl.createBuffer(),E.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(E){E.__webglVertexBuffer=this._gl.createBuffer(),E.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(E,ne,xe){E.push({buffer:ne,object:xe,opaque:null,transparent:null})}setupMatrices(E,ne){E._modelViewMatrix.multiplyMatrices(ne.matrixWorldInverse,E.matrixWorld),E._normalMatrix.getInverse(E._modelViewMatrix),E._normalMatrix.transpose()}filterFallback(E){return this._gl.LINEAR}setTextureParameters(E,ne){E==this._gl.TEXTURE_2D?(this._gl.texParameteri(E,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(E,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(E,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(ne.magFilter)),this._gl.texParameteri(E,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(ne.minFilter))):(this._gl.texParameteri(E,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(E,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(E,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(E,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(E,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(E,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(E,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(E){return E===C?this._gl.UNSIGNED_BYTE:E===K?this._gl.RGBA:E===R?this._gl.NEAREST:0}setupLights(E,ne){var xe,Ve,ze,yt,lt,mt=this._lights,Rt=mt.directional.colors,kt=mt.directional.positions,Lt=0,gr=0;for(xe=0,Ve=ne.length;xe<Ve;xe++)if(yt=(ze=ne[xe]).color,lt=ze.intensity,ze instanceof L){if(this._direction.getPositionFromMatrix(ze.matrixWorld),this._vector3.getPositionFromMatrix(ze.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;kt[gr]=this._direction.x,kt[gr+1]=this._direction.y,kt[gr+2]=this._direction.z,Rt[gr]=yt.r*lt,Rt[gr+1]=yt.g*lt,Rt[gr+2]=yt.b*lt,gr+=3,Lt++}mt.ambient[0]=0,mt.ambient[1]=0,mt.ambient[2]=0,mt.directional.length=Lt}initGL(){try{if(!OffscreenCanvas||this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){if(!(this._gl=this._canvas.getContext("webgl2",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("experimental-webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw"Error creating WebGL context."}else(Kr==null||Kr.isContextLost())&&(Gr=new OffscreenCanvas(this._canvas.width,this._canvas.height),Kr=Gr.getContext("webgl2",{alpha:!0,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})),this._offscreen=Gr,this._gl=Kr,this._bitmap=this._canvas.getContext("bitmaprenderer",{alpha:!0});var E=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(E[6])}catch(ne){console.error(ne)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(E,ne,xe,Ve,ze,yt,lt){var mt,Rt,kt,Lt,gr,Yt,Cr;ne?(gr=E.length-1,Yt=-1,Cr=-1):(gr=0,Yt=E.length,Cr=1);for(var Ar=gr;Ar!==Yt;Ar+=Cr)if((mt=E[Ar]).render){if(Rt=mt.object,kt=mt.buffer,Lt=mt[xe],(mt.hasAO||this._AOEnabled)&&mt[xe+"Shaded"]&&(Lt=mt[xe+"Shaded"]),!Lt)continue;this.setBlending(lt),this.setDepthTest(Lt.depthTest),this.setDepthWrite(Lt.depthWrite),this.setPolygonOffset(Lt.polygonOffset,Lt.polygonOffsetFactor,Lt.polygonOffsetUnits);var Ur=Rt._modelViewMatrix.isReflected();if(this.setMaterialFaces(Lt,Ur),this.renderBuffer(Ve,ze,yt,Lt,kt,Rt),(this._outlineEnabled||Lt.outline)&&!Lt.wireframe&&Lt.shaderID!=="basic"&&Lt.opacity!==0){let _r=this._outlineMaterial;Lt.shaderID=="sphereimposter"?_r=this._outlineSphereImposterMaterial:Lt.shaderID=="stickimposter"&&(_r=this._outlineStickImposterMaterial),this.renderBuffer(Ve,ze,yt,_r,kt,Rt)}}}renderSprites(E,ne,xe){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(E,ne,this._currentWidth,this._currentHeight,xe),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}},392:(e,r,s)=>{s.r(r),s.d(r,{assignBonds:()=>u});var o=s(408);const c=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],y=4.95;function u(p,d){for(let v=0,R=p.length;v<R;v++)p[v].index||(p[v].index=v);const x={x:{y:{z:[]}}};for(let v=0;v<p.length;v++){const R=p[v],O=Math.floor(R.x/y),C=Math.floor(R.y/y),k=Math.floor(R.z/y);x[O]||(x[O]={}),x[O][C]||(x[O][C]={}),x[O][C][k]||(x[O][C][k]=[]),x[O][C][k].push(R)}function w(v,R){for(let O=0;O<v.length;O++){const C=v[O];for(let k=0;k<R.length;k++){const K=R[k];if((0,o.areConnected)(C,K,d)){const Z=C.bonds.indexOf(K.index),X=K.bonds.indexOf(C.index);Z===-1&&X===-1?(C.bonds.push(K.index),C.bondOrder.push(1),K.bonds.push(C.index),K.bondOrder.push(1)):Z===-1?(C.bonds.push(K.index),C.bondOrder.push(K.bondOrder[X])):X===-1&&(K.bonds.push(C.index),K.bondOrder.push(C.bondOrder[Z]))}}}}for(let v in x){const R=parseInt(v);for(let O in x[R]){const C=parseInt(O);for(let k in x[R][C]){const K=parseInt(k),Z=x[R][C][K];for(let X=0;X<Z.length;X++){const S=Z[X];for(let F=X+1;F<Z.length;F++){const B=Z[F];(0,o.areConnected)(S,B,d)&&S.bonds.indexOf(B.index)==-1&&(S.bonds.push(B.index),S.bondOrder.push(1),B.bonds.push(S.index),B.bondOrder.push(1))}}for(let X=0;X<c.length;X++){const S=c[X];x[R+S.x]&&x[R+S.x][C+S.y]&&x[R+S.x][C+S.y][K+S.z]&&w(Z,x[R+S.x][C+S.y][K+S.z])}}}}}},407:e=>{var r=(function(){for(var s,o=[],c=0;c<256;c++){s=c;for(var y=0;y<8;y++)s=1&s?3988292384^s>>>1:s>>>1;o[c]=s}return o})();e.exports=function(s,o,c,y){var u=r,p=y+c;s^=-1;for(var d=y;d<p;d++)s=s>>>8^u[255&(s^o[d])];return-1^s}},408:(e,r,s)=>{s.r(r),s.d(r,{areConnected:()=>y});var o=s(40);const c=new Set(["Na","K","Ca","Mg","Mn","Sr"]);function y(u,p,d){if(d&&d.unboundCations&&(c.has(u.elem)||c.has(p.elem)))return!1;let x=(0,o.bondLength)(u.elem)+(0,o.bondLength)(p.elem);x+=.25,x*=x;let w=u.x-p.x;if(w*=w,w>x)return!1;let v=u.y-p.y;if(v*=v,v>x)return!1;let R=u.z-p.z;if(R*=R,R>x)return!1;const O=w+v+R;return!(isNaN(O)||O<.5||O>x||u.altLoc!==p.altLoc&&u.altLoc.trim()!==""&&p.altLoc.trim()!=="")}},471:function(e,r){(function(s){function o(pe,Ee,Oe){for(var dt=(pe.byteLength,0),nt=Oe.length;nt>dt;dt++){var It=Oe.charCodeAt(dt);if(128>It)pe.setUint8(Ee++,It>>>0&127);else if(2048>It)pe.setUint8(Ee++,It>>>6&31|192),pe.setUint8(Ee++,It>>>0&63|128);else if(65536>It)pe.setUint8(Ee++,It>>>12&15|224),pe.setUint8(Ee++,It>>>6&63|128),pe.setUint8(Ee++,It>>>0&63|128);else{if(!(1114112>It))throw new Error("bad codepoint "+It);pe.setUint8(Ee++,It>>>18&7|240),pe.setUint8(Ee++,It>>>12&63|128),pe.setUint8(Ee++,It>>>6&63|128),pe.setUint8(Ee++,It>>>0&63|128)}}}function c(pe){for(var Ee=0,Oe=0,dt=pe.length;dt>Oe;Oe++){var nt=pe.charCodeAt(Oe);if(128>nt)Ee+=1;else if(2048>nt)Ee+=2;else if(65536>nt)Ee+=3;else{if(!(1114112>nt))throw new Error("bad codepoint "+nt);Ee+=4}}return Ee}function y(pe,Ee,Oe){var dt=typeof pe;if(dt==="string"){if(32>(nt=c(pe)))return Ee.setUint8(Oe,160|nt),o(Ee,Oe+1,pe),1+nt;if(256>nt)return Ee.setUint8(Oe,217),Ee.setUint8(Oe+1,nt),o(Ee,Oe+2,pe),2+nt;if(65536>nt)return Ee.setUint8(Oe,218),Ee.setUint16(Oe+1,nt),o(Ee,Oe+3,pe),3+nt;if(4294967296>nt)return Ee.setUint8(Oe,219),Ee.setUint32(Oe+1,nt),o(Ee,Oe+5,pe),5+nt}if(pe instanceof Uint8Array){var nt=pe.byteLength,It=new Uint8Array(Ee.buffer);if(256>nt)return Ee.setUint8(Oe,196),Ee.setUint8(Oe+1,nt),It.set(pe,Oe+2),2+nt;if(65536>nt)return Ee.setUint8(Oe,197),Ee.setUint16(Oe+1,nt),It.set(pe,Oe+3),3+nt;if(4294967296>nt)return Ee.setUint8(Oe,198),Ee.setUint32(Oe+1,nt),It.set(pe,Oe+5),5+nt}if(dt==="number"){if(!isFinite(pe))throw new Error("Number not finite: "+pe);if(Math.floor(pe)!==pe)return Ee.setUint8(Oe,203),Ee.setFloat64(Oe+1,pe),9;if(pe>=0){if(128>pe)return Ee.setUint8(Oe,pe),1;if(256>pe)return Ee.setUint8(Oe,204),Ee.setUint8(Oe+1,pe),2;if(65536>pe)return Ee.setUint8(Oe,205),Ee.setUint16(Oe+1,pe),3;if(4294967296>pe)return Ee.setUint8(Oe,206),Ee.setUint32(Oe+1,pe),5;throw new Error("Number too big 0x"+pe.toString(16))}if(pe>=-32)return Ee.setInt8(Oe,pe),1;if(pe>=-128)return Ee.setUint8(Oe,208),Ee.setInt8(Oe+1,pe),2;if(pe>=-32768)return Ee.setUint8(Oe,209),Ee.setInt16(Oe+1,pe),3;if(pe>=-2147483648)return Ee.setUint8(Oe,210),Ee.setInt32(Oe+1,pe),5;throw new Error("Number too small -0x"+(-pe).toString(16).substr(1))}if(pe===null)return Ee.setUint8(Oe,192),1;if(dt==="boolean")return Ee.setUint8(Oe,pe?195:194),1;if(dt==="object"){var ht=0,zt=Array.isArray(pe);if(zt)nt=pe.length;else{var Ut=Object.keys(pe);nt=Ut.length}if(16>nt?(Ee.setUint8(Oe,nt|(zt?144:128)),ht=1):65536>nt?(Ee.setUint8(Oe,zt?220:222),Ee.setUint16(Oe+1,nt),ht=3):4294967296>nt&&(Ee.setUint8(Oe,zt?221:223),Ee.setUint32(Oe+1,nt),ht=5),zt)for(var Ot=0;nt>Ot;Ot++)ht+=y(pe[Ot],Ee,Oe+ht);else for(Ot=0;nt>Ot;Ot++){var mr=Ut[Ot];ht+=y(mr,Ee,Oe+ht),ht+=y(pe[mr],Ee,Oe+ht)}return ht}throw new Error("Unknown type "+dt)}function u(pe){var Ee=typeof pe;if(Ee==="string"){if(32>(Oe=c(pe)))return 1+Oe;if(256>Oe)return 2+Oe;if(65536>Oe)return 3+Oe;if(4294967296>Oe)return 5+Oe}if(pe instanceof Uint8Array){if(256>(Oe=pe.byteLength))return 2+Oe;if(65536>Oe)return 3+Oe;if(4294967296>Oe)return 5+Oe}if(Ee==="number"){if(Math.floor(pe)!==pe)return 9;if(pe>=0){if(128>pe)return 1;if(256>pe)return 2;if(65536>pe)return 3;if(4294967296>pe)return 5;throw new Error("Number too big 0x"+pe.toString(16))}if(pe>=-32)return 1;if(pe>=-128)return 2;if(pe>=-32768)return 3;if(pe>=-2147483648)return 5;throw new Error("Number too small -0x"+pe.toString(16).substr(1))}if(Ee==="boolean"||pe===null)return 1;if(Ee==="object"){var Oe,dt=0;if(Array.isArray(pe)){Oe=pe.length;for(var nt=0;Oe>nt;nt++)dt+=u(pe[nt])}else{var It=Object.keys(pe);for(Oe=It.length,nt=0;Oe>nt;nt++){var ht=It[nt];dt+=u(ht)+u(pe[ht])}}if(16>Oe)return 1+dt;if(65536>Oe)return 3+dt;if(4294967296>Oe)return 5+dt;throw new Error("Array or object too long 0x"+Oe.toString(16))}throw new Error("Unknown type "+Ee)}function p(pe){var Ee=new ArrayBuffer(u(pe));return y(pe,new DataView(Ee),0),new Uint8Array(Ee)}function d(pe,Ee,Oe){return Ee?new pe(Ee.buffer,Ee.byteOffset,Ee.byteLength/(Oe||1)):void 0}function x(pe){return d(DataView,pe)}function w(pe){return d(Uint8Array,pe)}function v(pe){return d(Int8Array,pe)}function R(pe){return d(Int32Array,pe,4)}function O(pe){return d(Float32Array,pe,4)}function C(pe,Ee){var Oe=pe.length/2;Ee||(Ee=new Int16Array(Oe));for(var dt=0,nt=0;Oe>dt;++dt,nt+=2)Ee[dt]=pe[nt]<<8^pe[nt+1];return Ee}function k(pe,Ee){var Oe=pe.length;Ee||(Ee=new Uint8Array(2*Oe));for(var dt=x(Ee),nt=0;Oe>nt;++nt)dt.setInt16(2*nt,pe[nt]);return w(Ee)}function K(pe,Ee){var Oe=pe.length/4;Ee||(Ee=new Int32Array(Oe));for(var dt=0,nt=0;Oe>dt;++dt,nt+=4)Ee[dt]=pe[nt]<<24^pe[nt+1]<<16^pe[nt+2]<<8^pe[nt+3];return Ee}function Z(pe,Ee){var Oe=pe.length;Ee||(Ee=new Uint8Array(4*Oe));for(var dt=x(Ee),nt=0;Oe>nt;++nt)dt.setInt32(4*nt,pe[nt]);return w(Ee)}function X(pe,Ee){var Oe=pe.length;Ee||(Ee=new Float32Array(Oe/4));for(var dt=x(Ee),nt=x(pe),It=0,ht=0,zt=Oe/4;zt>It;++It,ht+=4)dt.setFloat32(ht,nt.getFloat32(ht),!0);return Ee}function S(pe,Ee,Oe){var dt=pe.length,nt=1/Ee;Oe||(Oe=new Float32Array(dt));for(var It=0;dt>It;++It)Oe[It]=pe[It]*nt;return Oe}function F(pe,Ee,Oe){var dt=pe.length;Oe||(Oe=new Int32Array(dt));for(var nt=0;dt>nt;++nt)Oe[nt]=Math.round(pe[nt]*Ee);return Oe}function B(pe,Ee){var Oe,dt;if(!Ee){var nt=0;for(Oe=0,dt=pe.length;dt>Oe;Oe+=2)nt+=pe[Oe+1];Ee=new pe.constructor(nt)}var It=0;for(Oe=0,dt=pe.length;dt>Oe;Oe+=2)for(var ht=pe[Oe],zt=pe[Oe+1],Ut=0;zt>Ut;++Ut)Ee[It]=ht,++It;return Ee}function W(pe){if(pe.length===0)return new Int32Array;var Ee,Oe,dt=2;for(Ee=1,Oe=pe.length;Oe>Ee;++Ee)pe[Ee-1]!==pe[Ee]&&(dt+=2);var nt=new Int32Array(dt),It=0,ht=1;for(Ee=1,Oe=pe.length;Oe>Ee;++Ee)pe[Ee-1]!==pe[Ee]?(nt[It]=pe[Ee-1],nt[It+1]=ht,ht=1,It+=2):++ht;return nt[It]=pe[pe.length-1],nt[It+1]=ht,nt}function J(pe,Ee){var Oe=pe.length;Ee||(Ee=new pe.constructor(Oe)),Oe&&(Ee[0]=pe[0]);for(var dt=1;Oe>dt;++dt)Ee[dt]=pe[dt]+Ee[dt-1];return Ee}function N(pe,Ee){var Oe=pe.length;Ee||(Ee=new pe.constructor(Oe)),Ee[0]=pe[0];for(var dt=1;Oe>dt;++dt)Ee[dt]=pe[dt]-pe[dt-1];return Ee}function ee(pe,Ee){var Oe,dt,nt=pe instanceof Int8Array?127:32767,It=-nt-1,ht=pe.length;if(!Ee){var zt=0;for(Oe=0;ht>Oe;++Oe)pe[Oe]<nt&&pe[Oe]>It&&++zt;Ee=new Int32Array(zt)}for(Oe=0,dt=0;ht>Oe;){for(var Ut=0;pe[Oe]===nt||pe[Oe]===It;)Ut+=pe[Oe],++Oe;Ut+=pe[Oe],++Oe,Ee[dt]=Ut,++dt}return Ee}function Se(pe,Ee){var Oe,dt=32767,nt=-dt-1,It=pe.length,ht=0;for(Oe=0;It>Oe;++Oe)(Ot=pe[Oe])===0?++ht:Ot>0?(ht+=Math.ceil(Ot/dt),Ot%dt===0&&(ht+=1)):(ht+=Math.ceil(Ot/nt),Ot%nt===0&&(ht+=1));var zt=new Int16Array(ht),Ut=0;for(Oe=0;It>Oe;++Oe){var Ot;if((Ot=pe[Oe])>=0)for(;Ot>=dt;)zt[Ut]=dt,++Ut,Ot-=dt;else for(;nt>=Ot;)zt[Ut]=nt,++Ut,Ot-=nt;zt[Ut]=Ot,++Ut}return zt}function ce(pe,Ee){return J(B(pe),Ee)}function ge(pe){return W(N(pe))}function me(pe,Ee,Oe){return S(B(pe,R(Oe)),Ee,Oe)}function Ce(pe,Ee){return W(F(pe,Ee))}function ue(pe,Ee,Oe){return S(J(pe,R(Oe)),Ee,Oe)}function L(pe,Ee,Oe){return N(F(pe,Ee),Oe)}function he(pe,Ee,Oe){return S(ee(pe,R(Oe)),Ee,Oe)}function se(pe,Ee,Oe){var dt=ee(pe,R(Oe));return ue(dt,Ee,O(dt))}function q(pe,Ee,Oe){return Se(L(pe,Ee))}function ke(pe){var Ee=x(pe),Oe=Ee.getInt32(0),dt=Ee.getInt32(4),nt=pe.subarray(8,12);return[Oe,pe=pe.subarray(12),dt,nt]}function fe(pe,Ee,Oe,dt){var nt=new ArrayBuffer(12+dt.byteLength),It=new Uint8Array(nt),ht=new DataView(nt);return ht.setInt32(0,pe),ht.setInt32(4,Ee),Oe&&It.set(Oe,8),It.set(dt,12),It}function De(pe){return fe(2,pe.length,void 0,w(pe))}function He(pe){return fe(4,pe.length,void 0,Z(pe))}function ae(pe,Ee){return fe(5,pe.length/Ee,Z([Ee]),w(pe))}function Ae(pe){return fe(6,pe.length,void 0,Z(W(pe)))}function We(pe){return fe(8,pe.length,void 0,Z(ge(pe)))}function qe(pe,Ee){return fe(9,pe.length,Z([Ee]),Z(Ce(pe,Ee)))}function Fe(pe,Ee){return fe(10,pe.length,Z([Ee]),k(q(pe,Ee)))}function rt(pe){var Ee={};return xr.forEach(function(Oe){pe[Oe]!==void 0&&(Ee[Oe]=pe[Oe])}),pe.bondAtomList&&(Ee.bondAtomList=He(pe.bondAtomList)),pe.bondOrderList&&(Ee.bondOrderList=De(pe.bondOrderList)),Ee.xCoordList=Fe(pe.xCoordList,1e3),Ee.yCoordList=Fe(pe.yCoordList,1e3),Ee.zCoordList=Fe(pe.zCoordList,1e3),pe.bFactorList&&(Ee.bFactorList=Fe(pe.bFactorList,100)),pe.atomIdList&&(Ee.atomIdList=We(pe.atomIdList)),pe.altLocList&&(Ee.altLocList=Ae(pe.altLocList)),pe.occupancyList&&(Ee.occupancyList=qe(pe.occupancyList,100)),Ee.groupIdList=We(pe.groupIdList),Ee.groupTypeList=He(pe.groupTypeList),pe.secStructList&&(Ee.secStructList=De(pe.secStructList)),pe.insCodeList&&(Ee.insCodeList=Ae(pe.insCodeList)),pe.sequenceIndexList&&(Ee.sequenceIndexList=We(pe.sequenceIndexList)),Ee.chainIdList=ae(pe.chainIdList,4),pe.chainNameList&&(Ee.chainNameList=ae(pe.chainNameList,4)),Ee}function at(pe){function Ee(Ut){for(var Ot={},mr=0;Ut>mr;mr++)Ot[It()]=It();return Ot}function Oe(Ut){var Ot=pe.subarray(ht,ht+Ut);return ht+=Ut,Ot}function dt(Ut){var Ot=pe.subarray(ht,ht+Ut);ht+=Ut;var mr=65535;if(Ut>mr){for(var li=[],Ci=0;Ci<Ot.length;Ci+=mr)li.push(String.fromCharCode.apply(null,Ot.subarray(Ci,Ci+mr)));return li.join("")}return String.fromCharCode.apply(null,Ot)}function nt(Ut){for(var Ot=new Array(Ut),mr=0;Ut>mr;mr++)Ot[mr]=It();return Ot}function It(){var Ut,Ot,mr=pe[ht];if(!(128&mr))return ht++,mr;if((240&mr)==128)return ht++,Ee(Ot=15&mr);if((240&mr)==144)return ht++,nt(Ot=15&mr);if((224&mr)==160)return ht++,dt(Ot=31&mr);if(!(224&~mr))return Ut=zt.getInt8(ht),ht++,Ut;switch(mr){case 192:return ht++,null;case 194:return ht++,!1;case 195:return ht++,!0;case 196:return Ot=zt.getUint8(ht+1),ht+=2,Oe(Ot);case 197:return Ot=zt.getUint16(ht+1),ht+=3,Oe(Ot);case 198:return Ot=zt.getUint32(ht+1),ht+=5,Oe(Ot);case 202:return Ut=zt.getFloat32(ht+1),ht+=5,Ut;case 203:return Ut=zt.getFloat64(ht+1),ht+=9,Ut;case 204:return Ut=pe[ht+1],ht+=2,Ut;case 205:return Ut=zt.getUint16(ht+1),ht+=3,Ut;case 206:return Ut=zt.getUint32(ht+1),ht+=5,Ut;case 208:return Ut=zt.getInt8(ht+1),ht+=2,Ut;case 209:return Ut=zt.getInt16(ht+1),ht+=3,Ut;case 210:return Ut=zt.getInt32(ht+1),ht+=5,Ut;case 217:return Ot=zt.getUint8(ht+1),ht+=2,dt(Ot);case 218:return Ot=zt.getUint16(ht+1),ht+=3,dt(Ot);case 219:return Ot=zt.getUint32(ht+1),ht+=5,dt(Ot);case 220:return Ot=zt.getUint16(ht+1),ht+=3,nt(Ot);case 221:return Ot=zt.getUint32(ht+1),ht+=5,nt(Ot);case 222:return Ot=zt.getUint16(ht+1),ht+=3,Ee(Ot);case 223:return Ot=zt.getUint32(ht+1),ht+=5,Ee(Ot)}throw new Error("Unknown type 0x"+mr.toString(16))}var ht=0,zt=new DataView(pe.buffer);return It()}function ot(pe,Ee,Oe,dt){switch(pe){case 1:return X(Ee);case 2:return v(Ee);case 3:return C(Ee);case 4:return K(Ee);case 5:return w(Ee);case 6:return B(K(Ee),new Uint8Array(Oe));case 7:return B(K(Ee));case 8:return ce(K(Ee));case 9:return me(K(Ee),K(dt)[0]);case 10:return se(C(Ee),K(dt)[0]);case 11:return S(C(Ee),K(dt)[0]);case 12:return he(C(Ee),K(dt)[0]);case 13:return he(v(Ee),K(dt)[0]);case 14:return ee(C(Ee));case 15:return ee(v(Ee))}}function Ft(pe,Ee){var Oe=(Ee=Ee||{}).ignoreFields,dt={};return Pr.forEach(function(nt){var It=!!Oe&&Oe.indexOf(nt)!==-1,ht=pe[nt];It||ht===void 0||(ht instanceof Uint8Array?dt[nt]=ot.apply(null,ke(ht)):dt[nt]=ht)}),dt}function Ct(pe){return String.fromCharCode.apply(null,pe).replace(/\0/g,"")}function ar(pe,Ee,Oe){var dt,nt,It,ht,zt,Ut,Ot=(Oe=Oe||{}).firstModelOnly,mr=Ee.onModel,li=Ee.onChain,Ci=Ee.onGroup,ui=Ee.onAtom,gi=Ee.onBond,jr=0,zr=0,Dr=0,rr=0,vi=0,bi=-1,Ki=pe.chainNameList,Ai=pe.secStructList,Ni=pe.insCodeList,Ti=pe.sequenceIndexList,pi=pe.atomIdList,Br=pe.bFactorList,Yr=pe.altLocList,Vi=pe.occupancyList,yi=pe.bondAtomList,Wi=pe.bondOrderList;for(dt=0,nt=pe.chainsPerModel.length;nt>dt&&!(Ot&&jr>0);++dt){var tn=pe.chainsPerModel[jr];for(mr&&mr({chainCount:tn,modelIndex:jr}),It=0;tn>It;++It){var an=pe.groupsPerChain[zr];if(li){var ur=Ct(pe.chainIdList.subarray(4*zr,4*zr+4)),Gr=null;Ki&&(Gr=Ct(Ki.subarray(4*zr,4*zr+4))),li({groupCount:an,chainIndex:zr,modelIndex:jr,chainId:ur,chainName:Gr})}for(ht=0;an>ht;++ht){var Kr=pe.groupList[pe.groupTypeList[Dr]],qi=Kr.atomNameList.length;if(Ci){var Bt=null;Ai&&(Bt=Ai[Dr]);var E=null;pe.insCodeList&&(E=String.fromCharCode(Ni[Dr]));var ne=null;Ti&&(ne=Ti[Dr]),Ci({atomCount:qi,groupIndex:Dr,chainIndex:zr,modelIndex:jr,groupId:pe.groupIdList[Dr],groupType:pe.groupTypeList[Dr],groupName:Kr.groupName,singleLetterCode:Kr.singleLetterCode,chemCompType:Kr.chemCompType,secStruct:Bt,insCode:E,sequenceIndex:ne})}for(zt=0;qi>zt;++zt){if(ui){var xe=null;pi&&(xe=pi[rr]);var Ve=null;Br&&(Ve=Br[rr]);var ze=null;Yr&&(ze=String.fromCharCode(Yr[rr]));var yt=null;Vi&&(yt=Vi[rr]),ui({atomIndex:rr,groupIndex:Dr,chainIndex:zr,modelIndex:jr,atomId:xe,element:Kr.elementList[zt],atomName:Kr.atomNameList[zt],formalCharge:Kr.formalChargeList[zt],xCoord:pe.xCoordList[rr],yCoord:pe.yCoordList[rr],zCoord:pe.zCoordList[rr],bFactor:Ve,altLoc:ze,occupancy:yt})}rr+=1}if(gi){var lt=Kr.bondAtomList;for(zt=0,Ut=Kr.bondOrderList.length;Ut>zt;++zt)gi({atomIndex1:rr-qi+lt[2*zt],atomIndex2:rr-qi+lt[2*zt+1],bondOrder:Kr.bondOrderList[zt]})}Dr+=1}zr+=1}if(vi=bi+1,bi=rr-1,gi&&yi)for(zt=0,Ut=yi.length;Ut>zt;zt+=2){var mt=yi[zt],Rt=yi[zt+1];(mt>=vi&&bi>=mt||Rt>=vi&&bi>=Rt)&&gi({atomIndex1:mt,atomIndex2:Rt,bondOrder:Wi?Wi[zt/2]:null})}jr+=1}}function or(pe){return p(rt(pe))}function Mr(pe,Ee){return pe instanceof ArrayBuffer&&(pe=new Uint8Array(pe)),Ft(pe instanceof Uint8Array?at(pe):pe,Ee)}function Er(pe,Ee,Oe,dt){function nt(){try{var ht=Mr(It.response);Oe(ht)}catch(zt){dt(zt)}}var It=new XMLHttpRequest;It.addEventListener("load",nt,!0),It.addEventListener("error",dt,!0),It.responseType="arraybuffer",It.open("GET",Ee+pe.toUpperCase()),It.send()}function pr(pe,Ee,Oe){Er(pe,wi,Ee,Oe)}function vr(pe,Ee,Oe){Er(pe,Hi,Ee,Oe)}var xr=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],fi=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],Pr=xr.concat(fi),Or="v1.0.1",Di="//mmtf.rcsb.org/v1.0/",wi=Di+"full/",Hi=Di+"reduced/";s.encode=or,s.decode=Mr,s.traverse=ar,s.fetch=pr,s.fetchReduced=vr,s.version=Or,s.fetchUrl=wi,s.fetchReducedUrl=Hi,s.encodeMsgpack=p,s.encodeMmtf=rt,s.decodeMsgpack=at,s.decodeMmtf=Ft})(r)},529:(e,r,s)=>{s.r(r),s.d(r,{Matrix3:()=>k,Matrix4:()=>O,Quaternion:()=>o,Ray:()=>K,Vector2:()=>c,Vector3:()=>C,clamp:()=>y,conversionMatrix3:()=>Z,degToRad:()=>p});class o{constructor(S,F,B,W){this.x=S||0,this.y=F||0,this.z=B||0,this.w=W!==void 0?W:1}set(S,F,B,W){return this.x=S,this.y=F,this.z=B,this.w=W,this}copy(S){return this.x=S.x,this.y=S.y,this.z=S.z,this.w=S.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let S=this.length();return S===0?(this.x=0,this.y=0,this.z=0,this.w=1):(S=1/S,this.x*=S,this.y*=S,this.z*=S,this.w*=S),this}multiply(S){return this.multiplyQuaternions(this,S)}multiplyScalar(S){return this.x*=S,this.y*=S,this.z*=S,this.w*=S,this}multiplyQuaternions(S,F){const B=S.x,W=S.y,J=S.z,N=S.w,ee=F.x,Se=F.y,ce=F.z,ge=F.w;return this.x=B*ge+N*ee+W*ce-J*Se,this.y=W*ge+N*Se+J*ee-B*ce,this.z=J*ge+N*ce+B*Se-W*ee,this.w=N*ge-B*ee-W*Se-J*ce,this}sub(S){return this.x-=S.x,this.y-=S.y,this.z-=S.z,this.w-=S.w,this}clone(){return new o(this.x,this.y,this.z,this.w)}setFromEuler(S){const F=Math.cos(S.x/2),B=Math.cos(S.y/2),W=Math.cos(S.z/2),J=Math.sin(S.x/2),N=Math.sin(S.y/2),ee=Math.sin(S.z/2);return this.x=J*B*W+F*N*ee,this.y=F*N*W-J*B*ee,this.z=F*B*ee+J*N*W,this.w=F*B*W-J*N*ee,this}}class c{constructor(S,F){this.x=S||0,this.y=F||0}set(S,F){return this.x=S,this.y=F,this}subVectors(S,F){return this.x=S.x-F.x,this.y=S.y-F.y,this}copy(S){return this.x=S.x,this.y=S.y,this}clone(){return new c(this.x,this.y)}}function y(X,S,F){return Math.min(Math.max(X,S),F)}const u=Math.PI/180;function p(X){return X*u}var d,x,w,v,R;class O{constructor(S=1,F=0,B=0,W=0,J=0,N=1,ee=0,Se=0,ce=0,ge=0,me=1,Ce=0,ue=0,L=0,he=0,se=1){S!==void 0&&typeof S!="number"?this.elements=new Float32Array(S):(this.elements=new Float32Array(16),this.elements[0]=S,this.elements[4]=F,this.elements[8]=B,this.elements[12]=W,this.elements[1]=J,this.elements[5]=N,this.elements[9]=ee,this.elements[13]=Se,this.elements[2]=ce,this.elements[6]=ge,this.elements[10]=me,this.elements[14]=Ce,this.elements[3]=ue,this.elements[7]=L,this.elements[11]=he,this.elements[15]=se)}makeScale(S,F,B){throw new Error("Method not implemented.")}set(S,F,B,W,J,N,ee,Se,ce,ge,me,Ce,ue,L,he,se){const q=this.elements;return q[0]=S,q[4]=F,q[8]=B,q[12]=W,q[1]=J,q[5]=N,q[9]=ee,q[13]=Se,q[2]=ce,q[6]=ge,q[10]=me,q[14]=Ce,q[3]=ue,q[7]=L,q[11]=he,q[15]=se,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(S){const F=S.elements;return this.set(F[0],F[4],F[8],F[12],F[1],F[5],F[9],F[13],F[2],F[6],F[10],F[14],F[3],F[7],F[11],F[15]),this}matrix3FromTopLeft(){const S=this.elements;return new k(S[0],S[4],S[8],S[1],S[5],S[9],S[2],S[6],S[10])}setRotationFromEuler(S,F){const B=this.elements,{x:W,y:J,z:N}=S,ee=Math.cos(W),Se=Math.sin(W),ce=Math.cos(J),ge=Math.sin(J),me=Math.cos(N),Ce=Math.sin(N);if(F===void 0||F==="XYZ"){const ue=ee*me,L=ee*Ce,he=Se*me,se=Se*Ce;B[0]=ce*me,B[4]=-ce*Ce,B[8]=ge,B[1]=L+he*ge,B[5]=ue-se*ge,B[9]=-Se*ce,B[2]=se-ue*ge,B[6]=he+L*ge,B[10]=ee*ce}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${F}`);return this}setRotationFromQuaternion(S){const F=this.elements,{x:B,y:W,z:J,w:N}=S,ee=B+B,Se=W+W,ce=J+J,ge=B*ee,me=B*Se,Ce=B*ce,ue=W*Se,L=W*ce,he=J*ce,se=N*ee,q=N*Se,ke=N*ce;return F[0]=1-(ue+he),F[4]=me-ke,F[8]=Ce+q,F[1]=me+ke,F[5]=1-(ge+he),F[9]=L-se,F[2]=Ce-q,F[6]=L+se,F[10]=1-(ge+ue),this}multiplyMatrices(S,F){const B=S.elements,W=F.elements,J=this.elements,N=B[0],ee=B[4],Se=B[8],ce=B[12],ge=B[1],me=B[5],Ce=B[9],ue=B[13],L=B[2],he=B[6],se=B[10],q=B[14],ke=B[3],fe=B[7],De=B[11],He=B[15],ae=W[0],Ae=W[4],We=W[8],qe=W[12],Fe=W[1],rt=W[5],at=W[9],ot=W[13],Ft=W[2],Ct=W[6],ar=W[10],or=W[14],Mr=W[3],Er=W[7],pr=W[11],vr=W[15];return J[0]=N*ae+ee*Fe+Se*Ft+ce*Mr,J[4]=N*Ae+ee*rt+Se*Ct+ce*Er,J[8]=N*We+ee*at+Se*ar+ce*pr,J[12]=N*qe+ee*ot+Se*or+ce*vr,J[1]=ge*ae+me*Fe+Ce*Ft+ue*Mr,J[5]=ge*Ae+me*rt+Ce*Ct+ue*Er,J[9]=ge*We+me*at+Ce*ar+ue*pr,J[13]=ge*qe+me*ot+Ce*or+ue*vr,J[2]=L*ae+he*Fe+se*Ft+q*Mr,J[6]=L*Ae+he*rt+se*Ct+q*Er,J[10]=L*We+he*at+se*ar+q*pr,J[14]=L*qe+he*ot+se*or+q*vr,J[3]=ke*ae+fe*Fe+De*Ft+He*Mr,J[7]=ke*Ae+fe*rt+De*Ct+He*Er,J[11]=ke*We+fe*at+De*ar+He*pr,J[15]=ke*qe+fe*ot+De*or+He*vr,this}multiplyScalar(S){const F=this.elements;return F[0]*=S,F[4]*=S,F[8]*=S,F[12]*=S,F[1]*=S,F[5]*=S,F[9]*=S,F[13]*=S,F[2]*=S,F[6]*=S,F[10]*=S,F[14]*=S,F[3]*=S,F[7]*=S,F[11]*=S,F[15]*=S,this}makeTranslation(S,F,B){return this.set(1,0,0,S,0,1,0,F,0,0,1,B,0,0,0,1),this}snap(S){const F=Math.pow(10,4),B=this.elements;for(let W=0;W<16;W++){const J=Math.round(B[W]);J===Math.round(B[W]*F)/F&&(B[W]=J)}return this}transpose(){const S=this.elements;let F;return F=S[1],S[1]=S[4],S[4]=F,F=S[2],S[2]=S[8],S[8]=F,F=S[6],S[6]=S[9],S[9]=F,F=S[3],S[3]=S[12],S[12]=F,F=S[7],S[7]=S[13],S[13]=F,F=S[11],S[11]=S[14],S[14]=F,this}setPosition(S){const F=this.elements;return F[12]=S.x,F[13]=S.y,F[14]=S.z,this}translate(S){const F=this.elements;return F[12]+=S.x,F[13]+=S.y,F[14]+=S.z,this}getInverse(S,F){const B=this.elements,W=S.elements,J=W[0],N=W[4],ee=W[8],Se=W[12],ce=W[1],ge=W[5],me=W[9],Ce=W[13],ue=W[2],L=W[6],he=W[10],se=W[14],q=W[3],ke=W[7],fe=W[11],De=W[15];B[0]=me*se*ke-Ce*he*ke+Ce*L*fe-ge*se*fe-me*L*De+ge*he*De,B[4]=Se*he*ke-ee*se*ke-Se*L*fe+N*se*fe+ee*L*De-N*he*De,B[8]=ee*Ce*ke-Se*me*ke+Se*ge*fe-N*Ce*fe-ee*ge*De+N*me*De,B[12]=Se*me*L-ee*Ce*L-Se*ge*he+N*Ce*he+ee*ge*se-N*me*se,B[1]=Ce*he*q-me*se*q-Ce*ue*fe+ce*se*fe+me*ue*De-ce*he*De,B[5]=ee*se*q-Se*he*q+Se*ue*fe-J*se*fe-ee*ue*De+J*he*De,B[9]=Se*me*q-ee*Ce*q-Se*ce*fe+J*Ce*fe+ee*ce*De-J*me*De,B[13]=ee*Ce*ue-Se*me*ue+Se*ce*he-J*Ce*he-ee*ce*se+J*me*se,B[2]=ge*se*q-Ce*L*q+Ce*ue*ke-ce*se*ke-ge*ue*De+ce*L*De,B[6]=Se*L*q-N*se*q-Se*ue*ke+J*se*ke+N*ue*De-J*L*De,B[10]=N*Ce*q-Se*ge*q+Se*ce*ke-J*Ce*ke-N*ce*De+J*ge*De,B[14]=Se*ge*ue-N*Ce*ue-Se*ce*L+J*Ce*L+N*ce*se-J*ge*se,B[3]=me*L*q-ge*he*q-me*ue*ke+ce*he*ke+ge*ue*fe-ce*L*fe,B[7]=N*he*q-ee*L*q+ee*ue*ke-J*he*ke-N*ue*fe+J*L*fe,B[11]=ee*ge*q-N*me*q-ee*ce*ke+J*me*ke+N*ce*fe-J*ge*fe,B[15]=N*me*ue-ee*ge*ue+ee*ce*L-J*me*L-N*ce*he+J*ge*he;const He=J*B[0]+ce*B[4]+ue*B[8]+q*B[12];if(He===0){const ae="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(F)throw new Error(ae);return console.warn(ae),this.identity(),this}return this.multiplyScalar(1/He),this}isReflected(){const S=this.elements,F=S[0],B=S[4],W=S[8],J=S[1],N=S[5],ee=S[9],Se=S[2],ce=S[6],ge=S[10];return F*N*ge+J*ce*W+Se*B*ee-Se*N*W-J*B*ge-F*ce*ee<0}scale(S){const F=this.elements,{x:B}=S,{y:W}=S,{z:J}=S;return F[0]*=B,F[4]*=W,F[8]*=J,F[1]*=B,F[5]*=W,F[9]*=J,F[2]*=B,F[6]*=W,F[10]*=J,F[3]*=B,F[7]*=W,F[11]*=J,this}getMaxScaleOnAxis(){const S=this.elements,F=S[0]*S[0]+S[1]*S[1]+S[2]*S[2],B=S[4]*S[4]+S[5]*S[5]+S[6]*S[6],W=S[8]*S[8]+S[9]*S[9]+S[10]*S[10];return Math.sqrt(Math.max(F,Math.max(B,W)))}makeFrustum(S,F,B,W,J,N){const ee=this.elements,Se=2*J/(F-S),ce=2*J/(W-B),ge=(F+S)/(F-S),me=(W+B)/(W-B),Ce=-(N+J)/(N-J),ue=-2*N*J/(N-J);return ee[0]=Se,ee[4]=0,ee[8]=ge,ee[12]=0,ee[1]=0,ee[5]=ce,ee[9]=me,ee[13]=0,ee[2]=0,ee[6]=0,ee[10]=Ce,ee[14]=ue,ee[3]=0,ee[7]=0,ee[11]=-1,ee[15]=0,this}makePerspective(S,F,B,W){const J=B*Math.tan(p(.5*S)),N=-J,ee=N*F,Se=J*F;return this.makeFrustum(ee,Se,N,J,B,W)}makeOrthographic(S,F,B,W,J,N){const ee=this.elements,Se=1/(F-S),ce=1/(B-W),ge=1/(N-J),me=(F+S)*Se,Ce=(B+W)*ce,ue=(N+J)*ge;return ee[0]=2*Se,ee[4]=0,ee[8]=0,ee[12]=-me,ee[1]=0,ee[5]=2*ce,ee[9]=0,ee[13]=-Ce,ee[2]=0,ee[6]=0,ee[10]=-2*ge,ee[14]=-ue,ee[3]=0,ee[7]=0,ee[11]=0,ee[15]=1,this}isEqual(S){const F=S.elements,B=this.elements;return B[0]===F[0]&&B[4]===F[4]&&B[8]===F[8]&&B[12]===F[12]&&B[1]===F[1]&&B[5]===F[5]&&B[9]===F[9]&&B[13]===F[13]&&B[2]===F[2]&&B[6]===F[6]&&B[10]===F[10]&&B[14]===F[14]&&B[3]===F[3]&&B[7]===F[7]&&B[11]===F[11]&&B[15]===F[15]}clone(){const S=this.elements;return new O(S[0],S[4],S[8],S[12],S[1],S[5],S[9],S[13],S[2],S[6],S[10],S[14],S[3],S[7],S[11],S[15])}isIdentity(){const S=this.elements;return S[0]===1&&S[4]===0&&S[8]===0&&S[12]===0&&S[1]===0&&S[5]===1&&S[9]===0&&S[13]===0&&S[2]===0&&S[6]===0&&S[10]===1&&S[14]===0&&S[3]===0&&S[7]===0&&S[11]===0&&S[15]===1}isNearlyIdentity(S){return this.clone().snap(S).isIdentity()}getScale(S){const F=this.elements;return S=S||new C,w.set(F[0],F[1],F[2]),v.set(F[4],F[5],F[6]),R.set(F[8],F[9],F[10]),S.x=w.length(),S.y=v.length(),S.z=R.length(),S}lookAt(S,F,B){const W=this.elements;return R.subVectors(S,F).normalize(),R.length()===0&&(R.z=1),w.crossVectors(B,R).normalize(),w.length()===0&&(R.x+=1e-4,w.crossVectors(B,R).normalize()),v.crossVectors(R,w),W[0]=w.x,W[4]=v.x,W[8]=R.x,W[1]=w.y,W[5]=v.y,W[9]=R.y,W[2]=w.z,W[6]=v.z,W[10]=R.z,this}compose(S,F,B){const W=this.elements;return d.identity(),d.setRotationFromQuaternion(F),x.makeScale(B.x,B.y,B.z),this.multiplyMatrices(d,x),W[12]=S.x,W[13]=S.y,W[14]=S.z,this}}d=new O,x=new O;class C{constructor(S,F,B){this.x=S||0,this.y=F||0,this.z=B||0,this.atomid=void 0}set(S,F,B){return this.x=S,this.y=F,this.z=B,this}copy(S){return this.x=S.x,this.y=S.y,this.z=S.z,this}add(S){return this.x+=S.x,this.y+=S.y,this.z+=S.z,this}addVectors(S,F){return this.x=S.x+F.x,this.y=S.y+F.y,this.z=S.z+F.z,this}multiplyVectors(S,F){return this.x=S.x*F.x,this.y=S.y*F.y,this.z=S.z*F.z,this}sub(S){return this.x-=S.x,this.y-=S.y,this.z-=S.z,this}subVectors(S,F){return this.x=S.x-F.x,this.y=S.y-F.y,this.z=S.z-F.z,this}multiplyScalar(S){return this.x*=S,this.y*=S,this.z*=S,this}divideScalar(S){return S!==0?(this.x/=S,this.y/=S,this.z/=S):(this.x=0,this.y=0,this.z=0),this}max(S){return this.x=Math.max(this.x,S.x),this.y=Math.max(this.y,S.y),this.z=Math.max(this.z,S.z),this}min(S){return this.x=Math.min(this.x,S.x),this.y=Math.min(this.y,S.y),this.z=Math.min(this.z,S.z),this}distanceTo(S){return Math.sqrt(this.distanceToSquared(S))}distanceToSquared(S){const F=this.x-S.x,B=this.y-S.y,W=this.z-S.z;return F*F+B*B+W*W}applyMatrix3(S){const{x:F}=this,{y:B}=this,{z:W}=this,J=S.elements;return this.x=J[0]*F+J[3]*B+J[6]*W,this.y=J[1]*F+J[4]*B+J[7]*W,this.z=J[2]*F+J[5]*B+J[8]*W,this}applyMatrix4(S){const{x:F}=this,{y:B}=this,{z:W}=this,J=S.elements;return this.x=J[0]*F+J[4]*B+J[8]*W+J[12],this.y=J[1]*F+J[5]*B+J[9]*W+J[13],this.z=J[2]*F+J[6]*B+J[10]*W+J[14],this}applyProjection(S){const{x:F}=this,{y:B}=this,{z:W}=this,J=S.elements,N=J[3]*F+J[7]*B+J[11]*W+J[15];return this.x=(J[0]*F+J[4]*B+J[8]*W+J[12])/N,this.y=(J[1]*F+J[5]*B+J[9]*W+J[13])/N,this.z=(J[2]*F+J[6]*B+J[10]*W+J[14])/N,this}applyQuaternion(S){const{x:F}=this,{y:B}=this,{z:W}=this,J=S.x,N=S.y,ee=S.z,Se=S.w,ce={};ce.x=2*(B*ee-W*N),ce.y=2*(W*J-F*ee),ce.z=2*(F*N-B*J);const ge={};return ge.x=ce.y*ee-ce.z*N,ge.y=ce.z*J-ce.x*ee,ge.z=ce.x*N-ce.y*J,this.x=F+Se*ce.x+ge.x,this.y=B+Se*ce.y+ge.y,this.z=W+Se*ce.z+ge.z,this}negate(){return this.multiplyScalar(-1)}dot(S){return this.x*S.x+this.y*S.y+this.z*S.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(S){const{x:F}=this,{y:B}=this,{z:W}=this;return this.x=B*S.z-W*S.y,this.y=W*S.x-F*S.z,this.z=F*S.y-B*S.x,this}crossVectors(S,F){return this.x=S.y*F.z-S.z*F.y,this.y=S.z*F.x-S.x*F.z,this.z=S.x*F.y-S.y*F.x,this}equals(S){return this.x==S.x&&this.y==S.y&&this.z==S.z}getPositionFromMatrix(S){return this.x=S.elements[12],this.y=S.elements[13],this.z=S.elements[14],this}setEulerFromRotationMatrix(S,F){const B=S.elements,W=B[0],J=B[4],N=B[8],ee=B[5],Se=B[9],ce=B[6],ge=B[10];return F===void 0||F==="XYZ"?(this.y=Math.asin(y(N,-1,1)),Math.abs(N)<.99999?(this.x=Math.atan2(-Se,ge),this.z=Math.atan2(-J,W)):(this.x=Math.atan2(ce,ee),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${F}`),this}rotateAboutVector(S,F){S.normalize();const B=Math.cos(F),W=Math.sin(F),J=this.clone().multiplyScalar(B),N=S.clone().cross(this).multiplyScalar(W),ee=S.clone().multiplyScalar(S.clone().dot(this)).multiplyScalar(1-B),Se=J.add(N).add(ee);return this.x=Se.x,this.y=Se.y,this.z=Se.z,this}setFromMatrixPosition(S){const F=S.elements;return this.x=F[12],this.y=F[13],this.z=F[14],this}transformDirection(S){const{x:F}=this,{y:B}=this,{z:W}=this,J=S.elements;return this.x=J[0]*F+J[4]*B+J[8]*W,this.y=J[1]*F+J[5]*B+J[9]*W,this.z=J[2]*F+J[6]*B+J[10]*W,this.normalize()}clone(){return new C(this.x,this.y,this.z)}unproject(S){const F=d;return F.multiplyMatrices(S.matrixWorld,F.getInverse(S.projectionMatrix)),this.applyMatrix4(F)}}w=new C,v=new C,R=new C;class k{constructor(S=1,F=0,B=0,W=0,J=1,N=0,ee=0,Se=0,ce=1){this.elements=new Float32Array(9),this.set(S,F,B,W,J,N,ee,Se,ce)}set(S,F,B,W,J,N,ee,Se,ce){const ge=this.elements;return ge[0]=S,ge[3]=F,ge[6]=B,ge[1]=W,ge[4]=J,ge[7]=N,ge[2]=ee,ge[5]=Se,ge[8]=ce,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(S){const F=S.elements;this.set(F[0],F[3],F[6],F[1],F[4],F[7],F[2],F[5],F[8])}multiplyScalar(S){const F=this.elements;return F[0]*=S,F[3]*=S,F[6]*=S,F[1]*=S,F[4]*=S,F[7]*=S,F[2]*=S,F[5]*=S,F[8]*=S,this}getInverse3(S){const F=S.elements,B=this.elements;B[0]=F[4]*F[8]-F[5]*F[7],B[3]=F[6]*F[5]-F[3]*F[8],B[6]=F[3]*F[7]-F[6]*F[4],B[1]=F[7]*F[2]-F[1]*F[8],B[4]=F[0]*F[8]-F[6]*F[2],B[7]=F[1]*F[6]-F[0]*F[7],B[2]=F[1]*F[5]-F[2]*F[4],B[5]=F[2]*F[3]-F[0]*F[5],B[8]=F[0]*F[4]-F[1]*F[3];const W=F[0]*B[0]+F[3]*B[1]+F[6]*B[2];return this.multiplyScalar(1/W),this}getInverse(S,F){const B=S.elements,W=this.elements;W[0]=B[10]*B[5]-B[6]*B[9],W[1]=-B[10]*B[1]+B[2]*B[9],W[2]=B[6]*B[1]-B[2]*B[5],W[3]=-B[10]*B[4]+B[6]*B[8],W[4]=B[10]*B[0]-B[2]*B[8],W[5]=-B[6]*B[0]+B[2]*B[4],W[6]=B[9]*B[4]-B[5]*B[8],W[7]=-B[9]*B[0]+B[1]*B[8],W[8]=B[5]*B[0]-B[1]*B[4];const J=B[0]*W[0]+B[1]*W[3]+B[2]*W[6];if(J===0){const N="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(F)throw new Error(N);return console.warn(N),this.identity(),this}return this.multiplyScalar(1/J),this}getDeterminant(){const S=this.elements;return S[0]*S[4]*S[8]+S[1]*S[5]*S[6]+S[2]*S[3]*S[7]-S[2]*S[4]*S[6]-S[1]*S[3]*S[8]-S[0]*S[5]*S[7]}transpose(){let S;const F=this.elements;return S=F[1],F[1]=F[3],F[3]=S,S=F[2],F[2]=F[6],F[6]=S,S=F[5],F[5]=F[7],F[7]=S,this}clone(){const S=this.elements;return new k(S[0],S[3],S[6],S[1],S[4],S[7],S[2],S[5],S[8])}getMatrix4(){const S=this.elements;return new O(S[0],S[3],S[6],0,S[1],S[4],S[7],0,S[2],S[5],S[8],0)}}class K{constructor(S,F){this.origin=S!==void 0?S:new C,this.direction=F!==void 0?F:new C}set(S,F){return this.origin.copy(S),this.direction.copy(F),this}copy(S){return this.origin.copy(S.origin),this.direction.copy(S.direction),this}at(S,F){return(F||new C).copy(this.direction).multiplyScalar(S).add(this.origin)}recast(S){const F=w;return this.origin.copy(this.at(S,F)),this}closestPointToPoint(S,F){const B=F||new C;B.subVectors(S,this.origin);const W=B.dot(this.direction);return B.copy(this.direction).multiplyScalar(W).add(this.origin)}distanceToPoint(S){const F=w,B=F.subVectors(S,this.origin).dot(this.direction);return F.copy(this.direction).multiplyScalar(B).add(this.origin),F.distanceTo(S)}isIntersectionCylinder(){}isIntersectionSphere(S){return this.distanceToPoint(S.center)<=S.radius}isIntersectionPlane(S){return S.normal.dot(this.direction)!==0||S.distanceToPoint(this.origin)===0}distanceToPlane(S){const F=S.normal.dot(this.direction);return F===0?S.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(S.normal)+S.constant)/F}intersectPlane(S,F){const B=this.distanceToPlane(S);if(B!==void 0)return this.at(B,F)}applyMatrix4(S){return this.direction.add(this.origin).applyMatrix4(S),this.origin.applyMatrix4(S),this.direction.sub(this.origin),this}clone(){return new K().copy(this)}}function Z(X,S,F,B,W,J){B=B*Math.PI/180,W=W*Math.PI/180,J=J*Math.PI/180;const N=me=>me*me,ee=Math.cos(B),Se=Math.cos(W),ce=Math.cos(J),ge=Math.sin(J);return new k(X,S*ce,F*Se,0,S*ge,F*(ee-Se*ce)/ge,0,0,F*Math.sqrt(1-N(ee)-N(Se)-N(ce)+2*ee*Se*ce)/ge)}},546:(e,r,s)=>{s.r(r),s.d(r,{CustomLinear:()=>w,Gradient:()=>R,GradientType:()=>c,ROYGB:()=>d,RWB:()=>p,Sinebow:()=>x,builtinGradients:()=>v,getGradient:()=>u,normalizeValue:()=>y});var o=s(222);class c{}function y(O,C,k){return C>=O?(k<O&&(k=O),k>C&&(k=C),{lo:O,hi:C,val:k}):(k>O&&(k=O),k<C&&(k=C),{lo:C,hi:O,val:k=O-k+C})}function u(O){if(O instanceof c)return O;if(O.gradient!==void 0&&v[O.gradient]){let C=O.min===void 0?-1:O.min,k=O.max===void 0?1:O.max;return O.mid===void 0?O.colors===void 0?new v[O.gradient](C,k):new v[O.gradient](C,k,O.colors):new v[O.gradient](C,k,O.mid)}if(typeof O.gradient=="string"&&O.gradient.startsWith("linear_")){let C=O.gradient.split("_");C.shift();let k=O.min===void 0?-1:O.min,K=O.max===void 0?1:O.max;return new w(k,K,C)}return O}class p extends c{constructor(C,k,K){super(),this.gradient="RWB",this.mult=1,this.mid=K,this.min=C,this.max=k,k===void 0&&Array.isArray(C)&&C.length>=2?(this.max=C[1],this.min=C[0]):C&&k&&!Array.isArray(C)&&(this.min=C,this.max=k)}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}valueToHex(C,k){var K,Z;if(C=this.mult*C,k?(K=k[0],Z=k[1]):(K=this.min,Z=this.max),C===void 0)return 16777215;var X=y(K,Z,C);K=X.lo;var S,F=((Z=X.hi)+K)/2;return(C=X.val)<(F=k&&k[2]!==void 0?k[2]:this.mid!==void 0?this.mid:(K+Z)/2)?16711680+256*(S=Math.floor(255*Math.sqrt((C-K)/(F-K))))+S:C>F?65536*(S=Math.floor(255*Math.sqrt(1-(C-F)/(Z-F))))+256*S+255:16777215}}class d extends c{constructor(C,k){super(),this.gradient="ROYGB",this.mult=1,this.min=C,this.max=k,k===void 0&&Array.isArray(C)&&C.length>=2?(this.max=C[1],this.min=C[0]):C&&k&&!Array.isArray(C)&&(this.min=C,this.max=k)}valueToHex(C,k){var K,Z;if(C=this.mult*C,k?(K=k[0],Z=k[1]):(K=this.min,Z=this.max),C===void 0)return 16777215;var X=y(K,Z,C),S=((K=X.lo)+(Z=X.hi))/2,F=(K+S)/2,B=(S+Z)/2;return(C=X.val)<F?16711680+256*Math.floor(255*Math.sqrt((C-K)/(F-K)))+0:C<S?65536*Math.floor(255*Math.sqrt(1-(C-F)/(S-F)))+65280+0:C<B?65280+1*Math.floor(255*Math.sqrt((C-S)/(B-S))):0+256*Math.floor(255*Math.sqrt(1-(C-B)/(Z-B)))+255}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}}class x extends c{constructor(C,k){super(),this.gradient="Sinebow",this.mult=1,this.min=C,this.max=k,k===void 0&&Array.isArray(C)&&C.length>=2&&(this.max=C[1],this.min=C[0]),k<C&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex(C,k){var K,Z;if(C=this.mult*C,k?(K=k[0],Z=k[1]):(K=this.min,Z=this.max),C===void 0)return 16777215;var X=R.normalizeValue(K,Z,C);K=X.lo,Z=X.hi;var S=((C=X.val)-K)/(Z-K)*5/6+.5,F=Math.sin(Math.PI*S);F*=255*F;var B=Math.sin(Math.PI*(S+1/3));B*=255*B;var W=Math.sin(Math.PI*(S+2/3));return W*=255*W,65536*Math.floor(F)+256*Math.floor(W)+1*Math.floor(B)}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}}class w extends c{constructor(C,k,K){var Z;if(super(),this.gradient="linear",this.colors=new Array,Array.isArray(C)&&C.length>=2?(this.max=C[1],this.min=C[0],Z=k):(this.min=C,this.max=k,Z=K),Z)for(let X of Z)this.colors.push(o.CC.color(X));else this.colors.push(o.CC.color(0))}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}valueToHex(C,k){var K,Z;if(k?(K=k[0],Z=k[1]):(K=this.min,Z=this.max),C===void 0)return 16777215;var X=y(K,Z,C);K=X.lo,Z=X.hi,C=X.val;let S=this.colors.length,F=(Z-K)/S,B=Math.min(Math.floor((C-K)/F),S-1),W=Math.min(B+1,S-1),J=(C-K-B*F)/F,N=this.colors[B],ee=this.colors[W];return new o.Color(N.r+J*(ee.r-N.r),N.g+J*(ee.g-N.g),N.b+J*(ee.b-N.b)).getHex()}}const v={rwb:p,RWB:p,roygb:d,ROYGB:d,sinebow:x,linear:w};class R extends c{valueToHex(C,k){return 0}range(){return null}}R.RWB=p,R.ROYGB=d,R.Sinebow=x,R.CustomLinear=w,R.builtinGradients=v,R.normalizeValue=y,R.getGradient=u},663:(e,r,s)=>{var o=s(981),c=s(701),y=s(407),u=s(165),p=s(358),d=-2,x=12,w=30;function v(W){return(W>>>24&255)+(W>>>8&65280)+((65280&W)<<8)+((255&W)<<24)}function R(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function O(W){var J;return W&&W.state?(J=W.state,W.total_in=W.total_out=J.total=0,W.msg="",J.wrap&&(W.adler=1&J.wrap),J.mode=1,J.last=0,J.havedict=0,J.dmax=32768,J.head=null,J.hold=0,J.bits=0,J.lencode=J.lendyn=new o.Buf32(852),J.distcode=J.distdyn=new o.Buf32(592),J.sane=1,J.back=-1,0):d}function C(W){var J;return W&&W.state?((J=W.state).wsize=0,J.whave=0,J.wnext=0,O(W)):d}function k(W,J){var N,ee;return W&&W.state?(ee=W.state,J<0?(N=0,J=-J):(N=1+(J>>4),J<48&&(J&=15)),J&&(J<8||J>15)?d:(ee.window!==null&&ee.wbits!==J&&(ee.window=null),ee.wrap=N,ee.wbits=J,C(W))):d}function K(W,J){var N,ee;return W?(ee=new R,W.state=ee,ee.window=null,(N=k(W,J))!==0&&(W.state=null),N):d}var Z,X,S=!0;function F(W){if(S){var J;for(Z=new o.Buf32(512),X=new o.Buf32(32),J=0;J<144;)W.lens[J++]=8;for(;J<256;)W.lens[J++]=9;for(;J<280;)W.lens[J++]=7;for(;J<288;)W.lens[J++]=8;for(p(1,W.lens,0,288,Z,0,W.work,{bits:9}),J=0;J<32;)W.lens[J++]=5;p(2,W.lens,0,32,X,0,W.work,{bits:5}),S=!1}W.lencode=Z,W.lenbits=9,W.distcode=X,W.distbits=5}function B(W,J,N,ee){var Se,ce=W.state;return ce.window===null&&(ce.wsize=1<<ce.wbits,ce.wnext=0,ce.whave=0,ce.window=new o.Buf8(ce.wsize)),ee>=ce.wsize?(o.arraySet(ce.window,J,N-ce.wsize,ce.wsize,0),ce.wnext=0,ce.whave=ce.wsize):((Se=ce.wsize-ce.wnext)>ee&&(Se=ee),o.arraySet(ce.window,J,N-ee,Se,ce.wnext),(ee-=Se)?(o.arraySet(ce.window,J,N-ee,ee,0),ce.wnext=ee,ce.whave=ce.wsize):(ce.wnext+=Se,ce.wnext===ce.wsize&&(ce.wnext=0),ce.whave<ce.wsize&&(ce.whave+=Se))),0}r.inflateReset=C,r.inflateReset2=k,r.inflateResetKeep=O,r.inflateInit=function(W){return K(W,15)},r.inflateInit2=K,r.inflate=function(W,J){var N,ee,Se,ce,ge,me,Ce,ue,L,he,se,q,ke,fe,De,He,ae,Ae,We,qe,Fe,rt,at,ot,Ft=0,Ct=new o.Buf8(4),ar=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!W||!W.state||!W.output||!W.input&&W.avail_in!==0)return d;(N=W.state).mode===x&&(N.mode=13),ge=W.next_out,Se=W.output,Ce=W.avail_out,ce=W.next_in,ee=W.input,me=W.avail_in,ue=N.hold,L=N.bits,he=me,se=Ce,rt=0;e:for(;;)switch(N.mode){case 1:if(N.wrap===0){N.mode=13;break}for(;L<16;){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}if(2&N.wrap&&ue===35615){N.check=0,Ct[0]=255&ue,Ct[1]=ue>>>8&255,N.check=y(N.check,Ct,2,0),ue=0,L=0,N.mode=2;break}if(N.flags=0,N.head&&(N.head.done=!1),!(1&N.wrap)||(((255&ue)<<8)+(ue>>8))%31){W.msg="incorrect header check",N.mode=w;break}if((15&ue)!=8){W.msg="unknown compression method",N.mode=w;break}if(L-=4,Fe=8+(15&(ue>>>=4)),N.wbits===0)N.wbits=Fe;else if(Fe>N.wbits){W.msg="invalid window size",N.mode=w;break}N.dmax=1<<Fe,W.adler=N.check=1,N.mode=512&ue?10:x,ue=0,L=0;break;case 2:for(;L<16;){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}if(N.flags=ue,(255&N.flags)!=8){W.msg="unknown compression method",N.mode=w;break}if(57344&N.flags){W.msg="unknown header flags set",N.mode=w;break}N.head&&(N.head.text=ue>>8&1),512&N.flags&&(Ct[0]=255&ue,Ct[1]=ue>>>8&255,N.check=y(N.check,Ct,2,0)),ue=0,L=0,N.mode=3;case 3:for(;L<32;){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}N.head&&(N.head.time=ue),512&N.flags&&(Ct[0]=255&ue,Ct[1]=ue>>>8&255,Ct[2]=ue>>>16&255,Ct[3]=ue>>>24&255,N.check=y(N.check,Ct,4,0)),ue=0,L=0,N.mode=4;case 4:for(;L<16;){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}N.head&&(N.head.xflags=255&ue,N.head.os=ue>>8),512&N.flags&&(Ct[0]=255&ue,Ct[1]=ue>>>8&255,N.check=y(N.check,Ct,2,0)),ue=0,L=0,N.mode=5;case 5:if(1024&N.flags){for(;L<16;){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}N.length=ue,N.head&&(N.head.extra_len=ue),512&N.flags&&(Ct[0]=255&ue,Ct[1]=ue>>>8&255,N.check=y(N.check,Ct,2,0)),ue=0,L=0}else N.head&&(N.head.extra=null);N.mode=6;case 6:if(1024&N.flags&&((q=N.length)>me&&(q=me),q&&(N.head&&(Fe=N.head.extra_len-N.length,N.head.extra||(N.head.extra=new Array(N.head.extra_len)),o.arraySet(N.head.extra,ee,ce,q,Fe)),512&N.flags&&(N.check=y(N.check,ee,q,ce)),me-=q,ce+=q,N.length-=q),N.length))break e;N.length=0,N.mode=7;case 7:if(2048&N.flags){if(me===0)break e;q=0;do Fe=ee[ce+q++],N.head&&Fe&&N.length<65536&&(N.head.name+=String.fromCharCode(Fe));while(Fe&&q<me);if(512&N.flags&&(N.check=y(N.check,ee,q,ce)),me-=q,ce+=q,Fe)break e}else N.head&&(N.head.name=null);N.length=0,N.mode=8;case 8:if(4096&N.flags){if(me===0)break e;q=0;do Fe=ee[ce+q++],N.head&&Fe&&N.length<65536&&(N.head.comment+=String.fromCharCode(Fe));while(Fe&&q<me);if(512&N.flags&&(N.check=y(N.check,ee,q,ce)),me-=q,ce+=q,Fe)break e}else N.head&&(N.head.comment=null);N.mode=9;case 9:if(512&N.flags){for(;L<16;){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}if(ue!==(65535&N.check)){W.msg="header crc mismatch",N.mode=w;break}ue=0,L=0}N.head&&(N.head.hcrc=N.flags>>9&1,N.head.done=!0),W.adler=N.check=0,N.mode=x;break;case 10:for(;L<32;){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}W.adler=N.check=v(ue),ue=0,L=0,N.mode=11;case 11:if(N.havedict===0)return W.next_out=ge,W.avail_out=Ce,W.next_in=ce,W.avail_in=me,N.hold=ue,N.bits=L,2;W.adler=N.check=1,N.mode=x;case x:if(J===5||J===6)break e;case 13:if(N.last){ue>>>=7&L,L-=7&L,N.mode=27;break}for(;L<3;){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}switch(N.last=1&ue,L-=1,3&(ue>>>=1)){case 0:N.mode=14;break;case 1:if(F(N),N.mode=20,J===6){ue>>>=2,L-=2;break e}break;case 2:N.mode=17;break;case 3:W.msg="invalid block type",N.mode=w}ue>>>=2,L-=2;break;case 14:for(ue>>>=7&L,L-=7&L;L<32;){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}if((65535&ue)!=(ue>>>16^65535)){W.msg="invalid stored block lengths",N.mode=w;break}if(N.length=65535&ue,ue=0,L=0,N.mode=15,J===6)break e;case 15:N.mode=16;case 16:if(q=N.length){if(q>me&&(q=me),q>Ce&&(q=Ce),q===0)break e;o.arraySet(Se,ee,ce,q,ge),me-=q,ce+=q,Ce-=q,ge+=q,N.length-=q;break}N.mode=x;break;case 17:for(;L<14;){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}if(N.nlen=257+(31&ue),ue>>>=5,L-=5,N.ndist=1+(31&ue),ue>>>=5,L-=5,N.ncode=4+(15&ue),ue>>>=4,L-=4,N.nlen>286||N.ndist>30){W.msg="too many length or distance symbols",N.mode=w;break}N.have=0,N.mode=18;case 18:for(;N.have<N.ncode;){for(;L<3;){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}N.lens[ar[N.have++]]=7&ue,ue>>>=3,L-=3}for(;N.have<19;)N.lens[ar[N.have++]]=0;if(N.lencode=N.lendyn,N.lenbits=7,at={bits:N.lenbits},rt=p(0,N.lens,0,19,N.lencode,0,N.work,at),N.lenbits=at.bits,rt){W.msg="invalid code lengths set",N.mode=w;break}N.have=0,N.mode=19;case 19:for(;N.have<N.nlen+N.ndist;){for(;He=(Ft=N.lencode[ue&(1<<N.lenbits)-1])>>>16&255,ae=65535&Ft,!((De=Ft>>>24)<=L);){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}if(ae<16)ue>>>=De,L-=De,N.lens[N.have++]=ae;else{if(ae===16){for(ot=De+2;L<ot;){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}if(ue>>>=De,L-=De,N.have===0){W.msg="invalid bit length repeat",N.mode=w;break}Fe=N.lens[N.have-1],q=3+(3&ue),ue>>>=2,L-=2}else if(ae===17){for(ot=De+3;L<ot;){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}L-=De,Fe=0,q=3+(7&(ue>>>=De)),ue>>>=3,L-=3}else{for(ot=De+7;L<ot;){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}L-=De,Fe=0,q=11+(127&(ue>>>=De)),ue>>>=7,L-=7}if(N.have+q>N.nlen+N.ndist){W.msg="invalid bit length repeat",N.mode=w;break}for(;q--;)N.lens[N.have++]=Fe}}if(N.mode===w)break;if(N.lens[256]===0){W.msg="invalid code -- missing end-of-block",N.mode=w;break}if(N.lenbits=9,at={bits:N.lenbits},rt=p(1,N.lens,0,N.nlen,N.lencode,0,N.work,at),N.lenbits=at.bits,rt){W.msg="invalid literal/lengths set",N.mode=w;break}if(N.distbits=6,N.distcode=N.distdyn,at={bits:N.distbits},rt=p(2,N.lens,N.nlen,N.ndist,N.distcode,0,N.work,at),N.distbits=at.bits,rt){W.msg="invalid distances set",N.mode=w;break}if(N.mode=20,J===6)break e;case 20:N.mode=21;case 21:if(me>=6&&Ce>=258){W.next_out=ge,W.avail_out=Ce,W.next_in=ce,W.avail_in=me,N.hold=ue,N.bits=L,u(W,se),ge=W.next_out,Se=W.output,Ce=W.avail_out,ce=W.next_in,ee=W.input,me=W.avail_in,ue=N.hold,L=N.bits,N.mode===x&&(N.back=-1);break}for(N.back=0;He=(Ft=N.lencode[ue&(1<<N.lenbits)-1])>>>16&255,ae=65535&Ft,!((De=Ft>>>24)<=L);){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}if(He&&!(240&He)){for(Ae=De,We=He,qe=ae;He=(Ft=N.lencode[qe+((ue&(1<<Ae+We)-1)>>Ae)])>>>16&255,ae=65535&Ft,!(Ae+(De=Ft>>>24)<=L);){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}ue>>>=Ae,L-=Ae,N.back+=Ae}if(ue>>>=De,L-=De,N.back+=De,N.length=ae,He===0){N.mode=26;break}if(32&He){N.back=-1,N.mode=x;break}if(64&He){W.msg="invalid literal/length code",N.mode=w;break}N.extra=15&He,N.mode=22;case 22:if(N.extra){for(ot=N.extra;L<ot;){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}N.length+=ue&(1<<N.extra)-1,ue>>>=N.extra,L-=N.extra,N.back+=N.extra}N.was=N.length,N.mode=23;case 23:for(;He=(Ft=N.distcode[ue&(1<<N.distbits)-1])>>>16&255,ae=65535&Ft,!((De=Ft>>>24)<=L);){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}if(!(240&He)){for(Ae=De,We=He,qe=ae;He=(Ft=N.distcode[qe+((ue&(1<<Ae+We)-1)>>Ae)])>>>16&255,ae=65535&Ft,!(Ae+(De=Ft>>>24)<=L);){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}ue>>>=Ae,L-=Ae,N.back+=Ae}if(ue>>>=De,L-=De,N.back+=De,64&He){W.msg="invalid distance code",N.mode=w;break}N.offset=ae,N.extra=15&He,N.mode=24;case 24:if(N.extra){for(ot=N.extra;L<ot;){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}N.offset+=ue&(1<<N.extra)-1,ue>>>=N.extra,L-=N.extra,N.back+=N.extra}if(N.offset>N.dmax){W.msg="invalid distance too far back",N.mode=w;break}N.mode=25;case 25:if(Ce===0)break e;if(q=se-Ce,N.offset>q){if((q=N.offset-q)>N.whave&&N.sane){W.msg="invalid distance too far back",N.mode=w;break}q>N.wnext?(q-=N.wnext,ke=N.wsize-q):ke=N.wnext-q,q>N.length&&(q=N.length),fe=N.window}else fe=Se,ke=ge-N.offset,q=N.length;q>Ce&&(q=Ce),Ce-=q,N.length-=q;do Se[ge++]=fe[ke++];while(--q);N.length===0&&(N.mode=21);break;case 26:if(Ce===0)break e;Se[ge++]=N.length,Ce--,N.mode=21;break;case 27:if(N.wrap){for(;L<32;){if(me===0)break e;me--,ue|=ee[ce++]<<L,L+=8}if(se-=Ce,W.total_out+=se,N.total+=se,se&&(W.adler=N.check=N.flags?y(N.check,Se,se,ge-se):c(N.check,Se,se,ge-se)),se=Ce,(N.flags?ue:v(ue))!==N.check){W.msg="incorrect data check",N.mode=w;break}ue=0,L=0}N.mode=28;case 28:if(N.wrap&&N.flags){for(;L<32;){if(me===0)break e;me--,ue+=ee[ce++]<<L,L+=8}if(ue!==(4294967295&N.total)){W.msg="incorrect length check",N.mode=w;break}ue=0,L=0}N.mode=29;case 29:rt=1;break e;case w:rt=-3;break e;case 31:return-4;default:return d}return W.next_out=ge,W.avail_out=Ce,W.next_in=ce,W.avail_in=me,N.hold=ue,N.bits=L,(N.wsize||se!==W.avail_out&&N.mode<w&&(N.mode<27||J!==4))&&B(W,W.output,W.next_out,se-W.avail_out)?(N.mode=31,-4):(he-=W.avail_in,se-=W.avail_out,W.total_in+=he,W.total_out+=se,N.total+=se,N.wrap&&se&&(W.adler=N.check=N.flags?y(N.check,Se,se,W.next_out-se):c(N.check,Se,se,W.next_out-se)),W.data_type=N.bits+(N.last?64:0)+(N.mode===x?128:0)+(N.mode===20||N.mode===15?256:0),(he===0&&se===0||J===4)&&rt===0&&(rt=-5),rt)},r.inflateEnd=function(W){if(!W||!W.state)return d;var J=W.state;return J.window&&(J.window=null),W.state=null,0},r.inflateGetHeader=function(W,J){var N;return W&&W.state&&2&(N=W.state).wrap?(N.head=J,J.done=!1,0):d},r.inflateSetDictionary=function(W,J){var N,ee=J.length;return W&&W.state?(N=W.state).wrap!==0&&N.mode!==11?d:N.mode===11&&c(1,J,ee,0)!==N.check?-3:B(W,J,ee,ee)?(N.mode=31,-4):(N.havedict=1,0):d},r.inflateInfo="pako inflate (from Nodeca project)"},670:e=>{e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},681:e=>{e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},697:(e,r,s)=>{var o=s(981);function c(ae){for(var Ae=ae.length;--Ae>=0;)ae[Ae]=0}var y=256,u=286,p=30,d=15,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O=new Array(576);c(O);var C=new Array(60);c(C);var k=new Array(512);c(k);var K=new Array(256);c(K);var Z=new Array(29);c(Z);var X,S,F,B=new Array(p);function W(ae,Ae,We,qe,Fe){this.static_tree=ae,this.extra_bits=Ae,this.extra_base=We,this.elems=qe,this.max_length=Fe,this.has_stree=ae&&ae.length}function J(ae,Ae){this.dyn_tree=ae,this.max_code=0,this.stat_desc=Ae}function N(ae){return ae<256?k[ae]:k[256+(ae>>>7)]}function ee(ae,Ae){ae.pending_buf[ae.pending++]=255&Ae,ae.pending_buf[ae.pending++]=Ae>>>8&255}function Se(ae,Ae,We){ae.bi_valid>16-We?(ae.bi_buf|=Ae<<ae.bi_valid&65535,ee(ae,ae.bi_buf),ae.bi_buf=Ae>>16-ae.bi_valid,ae.bi_valid+=We-16):(ae.bi_buf|=Ae<<ae.bi_valid&65535,ae.bi_valid+=We)}function ce(ae,Ae,We){Se(ae,We[2*Ae],We[2*Ae+1])}function ge(ae,Ae){var We=0;do We|=1&ae,ae>>>=1,We<<=1;while(--Ae>0);return We>>>1}function me(ae,Ae,We){var qe,Fe,rt=new Array(16),at=0;for(qe=1;qe<=d;qe++)rt[qe]=at=at+We[qe-1]<<1;for(Fe=0;Fe<=Ae;Fe++){var ot=ae[2*Fe+1];ot!==0&&(ae[2*Fe]=ge(rt[ot]++,ot))}}function Ce(ae){var Ae;for(Ae=0;Ae<u;Ae++)ae.dyn_ltree[2*Ae]=0;for(Ae=0;Ae<p;Ae++)ae.dyn_dtree[2*Ae]=0;for(Ae=0;Ae<19;Ae++)ae.bl_tree[2*Ae]=0;ae.dyn_ltree[512]=1,ae.opt_len=ae.static_len=0,ae.last_lit=ae.matches=0}function ue(ae){ae.bi_valid>8?ee(ae,ae.bi_buf):ae.bi_valid>0&&(ae.pending_buf[ae.pending++]=ae.bi_buf),ae.bi_buf=0,ae.bi_valid=0}function L(ae,Ae,We,qe){var Fe=2*Ae,rt=2*We;return ae[Fe]<ae[rt]||ae[Fe]===ae[rt]&&qe[Ae]<=qe[We]}function he(ae,Ae,We){for(var qe=ae.heap[We],Fe=We<<1;Fe<=ae.heap_len&&(Fe<ae.heap_len&&L(Ae,ae.heap[Fe+1],ae.heap[Fe],ae.depth)&&Fe++,!L(Ae,qe,ae.heap[Fe],ae.depth));)ae.heap[We]=ae.heap[Fe],We=Fe,Fe<<=1;ae.heap[We]=qe}function se(ae,Ae,We){var qe,Fe,rt,at,ot=0;if(ae.last_lit!==0)do qe=ae.pending_buf[ae.d_buf+2*ot]<<8|ae.pending_buf[ae.d_buf+2*ot+1],Fe=ae.pending_buf[ae.l_buf+ot],ot++,qe===0?ce(ae,Fe,Ae):(ce(ae,(rt=K[Fe])+y+1,Ae),(at=x[rt])!==0&&Se(ae,Fe-=Z[rt],at),ce(ae,rt=N(--qe),We),(at=w[rt])!==0&&Se(ae,qe-=B[rt],at));while(ot<ae.last_lit);ce(ae,256,Ae)}function q(ae,Ae){var We,qe,Fe,rt=Ae.dyn_tree,at=Ae.stat_desc.static_tree,ot=Ae.stat_desc.has_stree,Ft=Ae.stat_desc.elems,Ct=-1;for(ae.heap_len=0,ae.heap_max=573,We=0;We<Ft;We++)rt[2*We]!==0?(ae.heap[++ae.heap_len]=Ct=We,ae.depth[We]=0):rt[2*We+1]=0;for(;ae.heap_len<2;)rt[2*(Fe=ae.heap[++ae.heap_len]=Ct<2?++Ct:0)]=1,ae.depth[Fe]=0,ae.opt_len--,ot&&(ae.static_len-=at[2*Fe+1]);for(Ae.max_code=Ct,We=ae.heap_len>>1;We>=1;We--)he(ae,rt,We);Fe=Ft;do We=ae.heap[1],ae.heap[1]=ae.heap[ae.heap_len--],he(ae,rt,1),qe=ae.heap[1],ae.heap[--ae.heap_max]=We,ae.heap[--ae.heap_max]=qe,rt[2*Fe]=rt[2*We]+rt[2*qe],ae.depth[Fe]=(ae.depth[We]>=ae.depth[qe]?ae.depth[We]:ae.depth[qe])+1,rt[2*We+1]=rt[2*qe+1]=Fe,ae.heap[1]=Fe++,he(ae,rt,1);while(ae.heap_len>=2);ae.heap[--ae.heap_max]=ae.heap[1],(function(ar,or){var Mr,Er,pr,vr,xr,fi,Pr=or.dyn_tree,Or=or.max_code,Di=or.stat_desc.static_tree,wi=or.stat_desc.has_stree,Hi=or.stat_desc.extra_bits,pe=or.stat_desc.extra_base,Ee=or.stat_desc.max_length,Oe=0;for(vr=0;vr<=d;vr++)ar.bl_count[vr]=0;for(Pr[2*ar.heap[ar.heap_max]+1]=0,Mr=ar.heap_max+1;Mr<573;Mr++)(vr=Pr[2*Pr[2*(Er=ar.heap[Mr])+1]+1]+1)>Ee&&(vr=Ee,Oe++),Pr[2*Er+1]=vr,Er>Or||(ar.bl_count[vr]++,xr=0,Er>=pe&&(xr=Hi[Er-pe]),fi=Pr[2*Er],ar.opt_len+=fi*(vr+xr),wi&&(ar.static_len+=fi*(Di[2*Er+1]+xr)));if(Oe!==0){do{for(vr=Ee-1;ar.bl_count[vr]===0;)vr--;ar.bl_count[vr]--,ar.bl_count[vr+1]+=2,ar.bl_count[Ee]--,Oe-=2}while(Oe>0);for(vr=Ee;vr!==0;vr--)for(Er=ar.bl_count[vr];Er!==0;)(pr=ar.heap[--Mr])>Or||(Pr[2*pr+1]!==vr&&(ar.opt_len+=(vr-Pr[2*pr+1])*Pr[2*pr],Pr[2*pr+1]=vr),Er--)}})(ae,Ae),me(rt,Ct,ae.bl_count)}function ke(ae,Ae,We){var qe,Fe,rt=-1,at=Ae[1],ot=0,Ft=7,Ct=4;for(at===0&&(Ft=138,Ct=3),Ae[2*(We+1)+1]=65535,qe=0;qe<=We;qe++)Fe=at,at=Ae[2*(qe+1)+1],++ot<Ft&&Fe===at||(ot<Ct?ae.bl_tree[2*Fe]+=ot:Fe!==0?(Fe!==rt&&ae.bl_tree[2*Fe]++,ae.bl_tree[32]++):ot<=10?ae.bl_tree[34]++:ae.bl_tree[36]++,ot=0,rt=Fe,at===0?(Ft=138,Ct=3):Fe===at?(Ft=6,Ct=3):(Ft=7,Ct=4))}function fe(ae,Ae,We){var qe,Fe,rt=-1,at=Ae[1],ot=0,Ft=7,Ct=4;for(at===0&&(Ft=138,Ct=3),qe=0;qe<=We;qe++)if(Fe=at,at=Ae[2*(qe+1)+1],!(++ot<Ft&&Fe===at)){if(ot<Ct)do ce(ae,Fe,ae.bl_tree);while(--ot!==0);else Fe!==0?(Fe!==rt&&(ce(ae,Fe,ae.bl_tree),ot--),ce(ae,16,ae.bl_tree),Se(ae,ot-3,2)):ot<=10?(ce(ae,17,ae.bl_tree),Se(ae,ot-3,3)):(ce(ae,18,ae.bl_tree),Se(ae,ot-11,7));ot=0,rt=Fe,at===0?(Ft=138,Ct=3):Fe===at?(Ft=6,Ct=3):(Ft=7,Ct=4)}}c(B);var De=!1;function He(ae,Ae,We,qe){Se(ae,0+(qe?1:0),3),(function(Fe,rt,at,ot){ue(Fe),ee(Fe,at),ee(Fe,~at),o.arraySet(Fe.pending_buf,Fe.window,rt,at,Fe.pending),Fe.pending+=at})(ae,Ae,We)}r._tr_init=function(ae){De||((function(){var Ae,We,qe,Fe,rt,at=new Array(16);for(qe=0,Fe=0;Fe<28;Fe++)for(Z[Fe]=qe,Ae=0;Ae<1<<x[Fe];Ae++)K[qe++]=Fe;for(K[qe-1]=Fe,rt=0,Fe=0;Fe<16;Fe++)for(B[Fe]=rt,Ae=0;Ae<1<<w[Fe];Ae++)k[rt++]=Fe;for(rt>>=7;Fe<p;Fe++)for(B[Fe]=rt<<7,Ae=0;Ae<1<<w[Fe]-7;Ae++)k[256+rt++]=Fe;for(We=0;We<=d;We++)at[We]=0;for(Ae=0;Ae<=143;)O[2*Ae+1]=8,Ae++,at[8]++;for(;Ae<=255;)O[2*Ae+1]=9,Ae++,at[9]++;for(;Ae<=279;)O[2*Ae+1]=7,Ae++,at[7]++;for(;Ae<=287;)O[2*Ae+1]=8,Ae++,at[8]++;for(me(O,287,at),Ae=0;Ae<p;Ae++)C[2*Ae+1]=5,C[2*Ae]=ge(Ae,5);X=new W(O,x,257,u,d),S=new W(C,w,0,p,d),F=new W(new Array(0),v,0,19,7)})(),De=!0),ae.l_desc=new J(ae.dyn_ltree,X),ae.d_desc=new J(ae.dyn_dtree,S),ae.bl_desc=new J(ae.bl_tree,F),ae.bi_buf=0,ae.bi_valid=0,Ce(ae)},r._tr_stored_block=He,r._tr_flush_block=function(ae,Ae,We,qe){var Fe,rt,at=0;ae.level>0?(ae.strm.data_type===2&&(ae.strm.data_type=(function(ot){var Ft,Ct=4093624447;for(Ft=0;Ft<=31;Ft++,Ct>>>=1)if(1&Ct&&ot.dyn_ltree[2*Ft]!==0)return 0;if(ot.dyn_ltree[18]!==0||ot.dyn_ltree[20]!==0||ot.dyn_ltree[26]!==0)return 1;for(Ft=32;Ft<y;Ft++)if(ot.dyn_ltree[2*Ft]!==0)return 1;return 0})(ae)),q(ae,ae.l_desc),q(ae,ae.d_desc),at=(function(ot){var Ft;for(ke(ot,ot.dyn_ltree,ot.l_desc.max_code),ke(ot,ot.dyn_dtree,ot.d_desc.max_code),q(ot,ot.bl_desc),Ft=18;Ft>=3&&ot.bl_tree[2*R[Ft]+1]===0;Ft--);return ot.opt_len+=3*(Ft+1)+5+5+4,Ft})(ae),Fe=ae.opt_len+3+7>>>3,(rt=ae.static_len+3+7>>>3)<=Fe&&(Fe=rt)):Fe=rt=We+5,We+4<=Fe&&Ae!==-1?He(ae,Ae,We,qe):ae.strategy===4||rt===Fe?(Se(ae,2+(qe?1:0),3),se(ae,O,C)):(Se(ae,4+(qe?1:0),3),(function(ot,Ft,Ct,ar){var or;for(Se(ot,Ft-257,5),Se(ot,Ct-1,5),Se(ot,ar-4,4),or=0;or<ar;or++)Se(ot,ot.bl_tree[2*R[or]+1],3);fe(ot,ot.dyn_ltree,Ft-1),fe(ot,ot.dyn_dtree,Ct-1)})(ae,ae.l_desc.max_code+1,ae.d_desc.max_code+1,at+1),se(ae,ae.dyn_ltree,ae.dyn_dtree)),Ce(ae),qe&&ue(ae)},r._tr_tally=function(ae,Ae,We){return ae.pending_buf[ae.d_buf+2*ae.last_lit]=Ae>>>8&255,ae.pending_buf[ae.d_buf+2*ae.last_lit+1]=255&Ae,ae.pending_buf[ae.l_buf+ae.last_lit]=255&We,ae.last_lit++,Ae===0?ae.dyn_ltree[2*We]++:(ae.matches++,Ae--,ae.dyn_ltree[2*(K[We]+y+1)]++,ae.dyn_dtree[2*N(Ae)]++),ae.last_lit===ae.lit_bufsize-1},r._tr_align=function(ae){Se(ae,2,3),ce(ae,256,O),(function(Ae){Ae.bi_valid===16?(ee(Ae,Ae.bi_buf),Ae.bi_buf=0,Ae.bi_valid=0):Ae.bi_valid>=8&&(Ae.pending_buf[Ae.pending++]=255&Ae.bi_buf,Ae.bi_buf>>=8,Ae.bi_valid-=8)})(ae)}},701:e=>{e.exports=function(r,s,o,c){for(var y=65535&r,u=r>>>16&65535,p=0;o!==0;){o-=p=o>2e3?2e3:o;do u=u+(y=y+s[c++]|0)|0;while(--p);y%=65521,u%=65521}return y|u<<16}},746:e=>{e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},788:(e,r,s)=>{var o={};(0,s(981).assign)(o,s(71),s(3),s(681)),e.exports=o},797:(e,r,s)=>{s.r(r),s.d(r,{VASP:()=>y});var o=s(378),c=s(392);function y(u,p={}){var d=[[]],x={};const w=p.assignBonds===void 0||p.assignBonds;var v=u.replace(/^\s+/,"").split(/\r?\n/);if(v.length<3)return d;if(!v[1].match(/\d+/))return console.log("Warning: second line of the vasp structure file must be a number"),d;if(x.length=parseFloat(v[1]),x.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),d;x.xVec=new Float32Array(v[2].replace(/^\s+/,"").split(/\s+/)),x.yVec=new Float32Array(v[3].replace(/^\s+/,"").split(/\s+/)),x.zVec=new Float32Array(v[4].replace(/^\s+/,"").split(/\s+/));var R=new o.Matrix3(x.xVec[0],x.xVec[1],x.xVec[2],x.yVec[0],x.yVec[1],x.yVec[2],x.zVec[0],x.zVec[1],x.zVec[2]);R.multiplyScalar(x.length),d.modelData=[{symmetries:[],cryst:{matrix:R}}];var O=v[5].trim().split(/\s+/),C=new Int16Array(v[6].trim().split(/\s+/)),k=v[7].trim(),K=!1;if(k.match(/S/)&&(K=!0,k=v[8].trim()),k.toLowerCase()[0]=="c")k="cartesian";else{if(k.toLowerCase()[0]!="d")return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),d;k="direct"}if(O.length!=C.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(O),console.log(C),d;K?v.splice(0,9):v.splice(0,8);for(var Z=0,X=0,S=O.length;X<S;X++){for(var F=O[X],B=0,W=C[X];B<W;B++){var J=new Float32Array(v[Z+B].trim().split(/\s+/)),N={};N.elem=F,k=="cartesian"?(N.x=x.length*J[0],N.y=x.length*J[1],N.z=x.length*J[2]):(N.x=x.length*(J[0]*x.xVec[0]+J[1]*x.yVec[0]+J[2]*x.zVec[0]),N.y=x.length*(J[0]*x.xVec[1]+J[1]*x.yVec[1]+J[2]*x.zVec[1]),N.z=x.length*(J[0]*x.xVec[2]+J[1]*x.yVec[2]+J[2]*x.zVec[2])),N.bonds=[],N.bondOrder=[],d[0].push(N)}Z+=C[X]}if(w)for(let ee=0;ee<d.length;ee++)(0,c.assignBonds)(d[ee],p);return d}},834:e=>{e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},848:(e,r,s)=>{s.r(r),s.d(r,{VolumeData:()=>d});var o=s(864),c=s(529),y=s(797),u=s(865),p=s(75);class d{constructor(w,v,R){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set(["ccp4","CCP4"]),this.getCoordinates=function(Z){var X=Z/(this.size.y*this.size.z),S=Z%(this.size.y*this.size.z),F=Z%this.size.z;return X*=this.unit.x,S*=this.unit.y,F*=this.unit.z,{x:X+=this.origin.x,y:S+=this.origin.y,z:F+=this.origin.z}},this.vasp=function(Z){var X=Z.replace(/^\s+/,"").split(/[\n\r]/),S=(0,y.VASP)(Z)[0].length;if(S==0)return console.warn("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),void(this.data=[]);var F,B=1.889725992,W=parseFloat(X[1]);F=X[2].replace(/^\s+/,"").split(/\s+/);var J=new c.Vector3(parseFloat(F[0]),parseFloat(F[1]),parseFloat(F[2])).multiplyScalar(W*B);F=X[3].replace(/^\s+/,"").split(/\s+/);var N=new c.Vector3(parseFloat(F[0]),parseFloat(F[1]),parseFloat(F[2])).multiplyScalar(W*B);F=X[4].replace(/^\s+/,"").split(/\s+/);var ee=new c.Vector3(parseFloat(F[0]),parseFloat(F[1]),parseFloat(F[2])).multiplyScalar(W*B),Se=J.x*(N.y*ee.z-ee.y*N.z)-N.x*(J.y*ee.z-ee.y*J.z)+ee.x*(J.y*N.z-N.y*J.z),ce=1/(Se=Math.abs(Se)/Math.pow(B,3));X.splice(0,8+S+1);var ge=X[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),me=Math.abs(parseFloat(ge[0])),Ce=Math.abs(parseFloat(ge[1])),ue=Math.abs(parseFloat(ge[2])),L=this.origin=new c.Vector3(0,0,0);this.size={x:me,y:Ce,z:ue},this.unit=new c.Vector3(J.x,N.y,ee.z),J=J.multiplyScalar(1/(B*me)),N=N.multiplyScalar(1/(B*Ce)),ee=ee.multiplyScalar(1/(B*ue)),J.y==0&&J.z==0&&N.x==0&&N.z==0&&ee.x==0&&ee.y==0||(this.matrix=new c.Matrix4(J.x,N.x,ee.x,0,J.y,N.y,ee.y,0,J.z,N.z,ee.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new c.Matrix4().makeTranslation(L.x,L.y,L.z)),this.origin=new c.Vector3(0,0,0),this.unit=new c.Vector3(1,1,1)),X.splice(0,1);var he=X.join(" "),se=(he=he.replace(/^\s+/,"")).split(/[\s\r]+/);se.splice(me*Ce*ue+1);for(var q=Float32Array.from(se,parseFloat),ke=0;ke<q.length;ke++)q[ke]=q[ke]*ce*.036749309;this.data=q},this.dx=function(Z){var X,S=Z.split(/[\n\r]+/),F=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,B=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,W=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,J=/data follows/,N=0;for(N=0;N<S.length;N++){var ee=S[N];if(X=F.exec(ee)){var Se=parseInt(X[1]),ce=parseInt(X[2]),ge=parseInt(X[3]);this.size={x:Se,y:ce,z:ge}}else if(X=W.exec(ee)){var me=parseFloat(X[1]);if(parseFloat(X[2])==0&&parseFloat(X[3])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),ee=S[N+=1],(X=W.exec(ee))==null)return void console.error("Parse error in dx delta matrix");var Ce=parseFloat(X[2]);if(parseFloat(X[1])==0&&parseFloat(X[3])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),ee=S[N+=1],(X=W.exec(ee))==null)return void console.error("Parse error in dx delta matrix");var ue=parseFloat(X[3]);parseFloat(X[1])==0&&parseFloat(X[2])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new c.Vector3(me,Ce,ue)}else if(X=B.exec(ee)){var L=parseFloat(X[1]),he=parseFloat(X[2]),se=parseFloat(X[3]);this.origin=new c.Vector3(L,he,se)}else if(X=J.exec(ee))break}if(N+=1,this.size&&this.origin&&this.unit&&this.size){var q=S.splice(N).join(" ").split(/[\s\r]+/);this.data=Float32Array.from(q,parseFloat)}else console.error("Error parsing dx format")},v=v.toLowerCase(),/\.gz$/.test(v)){v=v.replace(/\.gz$/,"");try{this[v]&&this.isbinary.has(v)?(typeof w=="string"&&(w=(0,o.base64ToArray)(w)),w=(0,p.inflate)(w)):w=new TextDecoder("utf-8").decode((0,p.inflate)(w))}catch(Z){console.error(Z)}}if(this[v]&&(this.isbinary.has(v)&&typeof w=="string"&&(w=(0,o.base64ToArray)(w)),this[v](w)),R){if(R.negate)for(let Z=0,X=this.data.length;Z<X;Z++)this.data[Z]=-this.data[Z];if(R.normalize){var O=0;for(let Z=0,X=this.data.length;Z<X;Z++)O+=this.data[Z];var C=O/this.data.length;O=0;for(let Z=0,X=this.data.length;Z<X;Z++){var k=this.data[Z]-C;O+=k*k}var K=O/this.data.length;for(let Z=0,X=this.data.length;Z<X;Z++)this.data[Z]=(this.data[Z]-C)/K}}}getIndex(w,v,R){if(this.matrix){this.inversematrix==null&&(this.inversematrix=new c.Matrix4().getInverse(this.matrix));var O=new c.Vector3(w,v,R);w=(O=O.applyMatrix4(this.inversematrix)).x,v=O.y,R=O.z}else w-=this.origin.x,v-=this.origin.y,R-=this.origin.z,w/=this.unit.x,v/=this.unit.y,R/=this.unit.z;return w=Math.round(w),v=Math.round(v),R=Math.round(R),w<0||w>=this.size.x||v<0||v>=this.size.y||R<0||R>=this.size.z?-1:w*this.size.y*this.size.z+v*this.size.z+R}getVal(w,v,R){let O=this.getIndex(w,v,R);return O<0?0:this.data[O]}cube(w){var v=w.split(/\r?\n/);if(!(v.length<6)){var R=(0,u.CUBE)(w,{}).modelData[0].cryst,O=v[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),C=parseFloat(O[0]),k=Math.abs(C);this.origin=R.origin,this.size=R.size,this.unit=R.unit,this.matrix=R.matrix4;var K=6;C<0&&K++;var Z=v.splice(k+K).join(" "),X=(Z=Z.replace(/^\s+/,"")).split(/[\s\r]+/);this.data=Float32Array.from(X,parseFloat)}}ccp4(w){var v={};w=new Int8Array(w);var R=new Int32Array(w.buffer,0,56),O=new Float32Array(w.buffer,0,56),C=new DataView(w.buffer);if(v.MAP=String.fromCharCode(C.getUint8(208),C.getUint8(209),C.getUint8(210),C.getUint8(211)),v.MACHST=[C.getUint8(212),C.getUint8(213)],v.MACHST[0]===17&&v.MACHST[1]===17)for(var k=w.byteLength,K=0;K<k;K+=4)C.setFloat32(K,C.getFloat32(K),!0);v.NX=R[0],v.NY=R[1],v.NZ=R[2],v.MODE=R[3],v.NXSTART=R[4],v.NYSTART=R[5],v.NZSTART=R[6],v.MX=R[7],v.MY=R[8],v.MZ=R[9],v.xlen=O[10],v.ylen=O[11],v.zlen=O[12],v.alpha=O[13],v.beta=O[14],v.gamma=O[15],v.MAPC=R[16],v.MAPR=R[17],v.MAPS=R[18],v.DMIN=O[19],v.DMAX=O[20],v.DMEAN=O[21],v.ISPG=R[22],v.NSYMBT=R[23],v.LSKFLG=R[24],v.originX=O[49],v.originY=O[50],v.originZ=O[51],v.ARMS=O[54];var Z=v,X=[Z.xlen,0,0],S=[Z.ylen*Math.cos(Math.PI/180*Z.gamma),Z.ylen*Math.sin(Math.PI/180*Z.gamma),0],F=[Z.zlen*Math.cos(Math.PI/180*Z.beta),Z.zlen*(Math.cos(Math.PI/180*Z.alpha)-Math.cos(Math.PI/180*Z.gamma)*Math.cos(Math.PI/180*Z.beta))/Math.sin(Math.PI/180*Z.gamma),0];F[2]=Math.sqrt(Z.zlen*Z.zlen*Math.sin(Math.PI/180*Z.beta)*Math.sin(Math.PI/180*Z.beta)-F[1]*F[1]);var B=[0,X,S,F],W=[0,Z.MX,Z.MY,Z.MZ],J=[0,Z.MAPC,Z.MAPR,Z.MAPS];this.matrix=new c.Matrix4,this.matrix.set(B[J[1]][0]/W[J[1]],B[J[2]][0]/W[J[2]],B[J[3]][0]/W[J[3]],0,B[J[1]][1]/W[J[1]],B[J[2]][1]/W[J[2]],B[J[3]][1]/W[J[3]],0,B[J[1]][2]/W[J[1]],B[J[2]][2]/W[J[2]],B[J[3]][2]/W[J[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new c.Matrix4().makeTranslation(Z.NXSTART+Z.originX,Z.NYSTART+Z.originY,Z.NZSTART+Z.originZ)),this.origin=new c.Vector3(0,0,0),this.unit=new c.Vector3(1,1,1),this.size={x:v.NX,y:v.NY,z:v.NZ},this.dimensionorder=[v.MAPC,v.MAPR,v.MAPS];var N=new Float32Array(w.buffer,1024+v.NSYMBT),ee=v.NX,Se=v.NY,ce=v.NZ;this.data=new Float32Array(ee*Se*ce);for(let ge=0;ge<ee;ge++)for(let me=0;me<Se;me++)for(let Ce=0;Ce<ce;Ce++)this.data[(ge*Se+me)*ce+Ce]=N[(Ce*Se+me)*ee+ge]}}},864:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,inflateString:()=>inflateString,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(546),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(848),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(222),pako__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(75);function extend(e,r){for(var s in r)r.hasOwnProperty(s)&&r[s]!==void 0&&(e[s]=r[s]);return e}function deepCopy(e){let r,s,o;if(e==null)return{};if(typeof e!="object"||e===null)return e;for(o in r=Array.isArray(e)?[]:{},e)s=e[o],r[o]=deepCopy(s);return r}function isNumeric(e){var r=typeof e;return(r==="number"||r==="string")&&!isNaN(e-parseFloat(e))}function isEmptyObject(e){return Object.keys(e).length===0}function makeFunction(callback){return callback&&typeof callback=="string"&&(callback=eval("("+callback+")")),callback&&typeof callback!="function"?(console.warn("Invalid callback provided."),()=>{}):callback}function adjustVolumeStyle(e){e&&(!e.volformat||e.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData||(e.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(e.voldata,e.volformat)),e.volscheme&&(e.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(e.volscheme)))}function getExtent(e,r){var s,o,c,y,u,p,d,x,w,v,R=!r;if(s=o=c=9999,y=u=p=-9999,d=x=w=v=0,e.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var O=0;O<e.length;O++){var C=e[O];if(C!==void 0&&isFinite(C.x)&&isFinite(C.y)&&isFinite(C.z)&&(v++,d+=C.x,x+=C.y,w+=C.z,s=s<C.x?s:C.x,o=o<C.y?o:C.y,c=c<C.z?c:C.z,y=y>C.x?y:C.x,u=u>C.y?u:C.y,p=p>C.z?p:C.z,C.symmetries&&R))for(var k=0;k<C.symmetries.length;k++)v++,d+=C.symmetries[k].x,x+=C.symmetries[k].y,w+=C.symmetries[k].z,s=s<C.symmetries[k].x?s:C.symmetries[k].x,o=o<C.symmetries[k].y?o:C.symmetries[k].y,c=c<C.symmetries[k].z?c:C.symmetries[k].z,y=y>C.symmetries[k].x?y:C.symmetries[k].x,u=u>C.symmetries[k].y?u:C.symmetries[k].y,p=p>C.symmetries[k].z?p:C.symmetries[k].z}return[[s,o,c],[y,u,p],[d/v,x/v,w/v]]}function getPropertyRange(e,r){for(var s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,c=0,y=e.length;c<y;c++){var u=getAtomProperty(e[c],r);u!=null&&(u<s&&(s=u),u>o&&(o=u))}return isFinite(s)||isFinite(o)?isFinite(s)?isFinite(o)||(o=s):s=o:s=o=0,[s,o]}class PausableTimer{constructor(r,s,o){this.total_time_run=0,this.fn=r,this.arg=o,this.countdown=s,this.start_time=new Date().getTime(),this.ident=setTimeout(r,s,o)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(e){for(var r=window.atob(e),s=r.length,o=new Uint8Array(s),c=0;c<s;c++)o[c]=r.charCodeAt(c);return o}function getAtomProperty(e,r){var s=null;return e.properties&&e.properties[r]!==void 0?s=e.properties[r]:e[r]!==void 0&&(s=e[r]),s}function mergeGeos(e,r){var s=r.geometry;s!==void 0&&e.geometryGroups.push(s.geometryGroups[0])}function specStringToObject(e){if(typeof e=="object"||e===void 0||e==null)return e;try{return JSON.parse(e)}catch{}var r=function(R){return isNumeric(R)?Math.floor(parseFloat(R))==parseInt(R)||R.indexOf(".")>=0?parseFloat(R):parseInt(R):R==="true"||R!=="false"&&R},s={};if((e=e.replace(/%7E/g,"~"))==="all")return s;for(var o=e.split(";"),c=0;c<o.length;c++){var y=o[c].split(":"),u=y[0],p={},d=y[1];if(d)if((d=d.replace(/~/g,"=")).indexOf("=")!==-1)for(var x=d.split(","),w=0;w<x.length;w++){var v=x[w].split("=",2);p[v[0]]=r(v[1])}else p=d.indexOf(",")!==-1?d.split(","):r(d);s[u]=p}return s}function checkStatus(e){if(!e.ok)throw new Error(`HTTP ${e.status} - ${e.statusText}`);return e}function get(e,r){var s=fetch(e).then(checkStatus).then(o=>o.text());return r?s.then(r):s}function getbin(e,r,s,o){var c;return c=s=="POST"?fetch(e,{method:"POST",body:o}).then(y=>checkStatus(y)).then(y=>y.arrayBuffer()):fetch(e).then(y=>checkStatus(y)).then(y=>y.arrayBuffer()),r?c.then(r):c}function download(e,r,s,o){var c="",y="",u="",p=null,d=r.addModel();if(e.indexOf(":")<0&&(e=e.length==4?"pdb:"+e:isNaN(e)?"url:"+e:"cid:"+e),e.substring(0,5)=="mmtf:"&&(console.warn("WARNING: MMTF now deprecated.  Reverting to bcif."),e="bcif:"+e.slice(5)),e.substring(0,5)==="bcif:")e=e.substring(5).toUpperCase(),u="https://models.rcsb.org/"+e+".bcif.gz",s&&s.noComputeSecondaryStructure===void 0&&(s.noComputeSecondaryStructure=!0),p=new Promise(function(w){getbin(u).then(function(v){d.addMolData(v,"bcif.gz",s),r.zoomTo(),r.render(),w(d)},function(){console.error("fetch of "+u+" failed.")})});else{if(e.substring(0,4)==="pdb:"){if(c="bcif",s&&s.format&&(c=s.format),s&&s.noComputeSecondaryStructure===void 0&&(s.noComputeSecondaryStructure=!0),!(e=e.substring(4).toUpperCase()).match(/^[1-9][A-Za-z0-9]{3}$/))return void alert("Wrong PDB ID");c=="bcif"?u="https://models.rcsb.org/"+e.toUpperCase()+".bcif.gz":(y=s&&s.pdbUri?s.pdbUri:"https://files.rcsb.org/view/",u=y+e+"."+c)}else if(e.substring(0,4)=="cid:"){if(c="sdf",!(e=e.substring(4)).match(/^[0-9]+$/))return void alert("Wrong Compound ID");u="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+e+"/SDF?record_type=3d"}else e.substring(0,4)=="url:"&&(u=e.substring(4),c=u);var x=function(w){d.addMolData(w,c,s),r.zoomTo(),r.render()};p=new Promise(function(w){c=="bcif"?getbin(u).then(function(v){x(v),w(d)}).catch(function(){y=s&&s.pdbUri?s.pdbUri:"https://files.rcsb.org/view/",u=y+e+".pdb",c="pdb",console.warn("falling back to pdb format"),get(u).then(function(v){x(v),w(d)}).catch(function(v){x(""),w(d),console.error("fetch of "+u+" failed: "+v.statusText)})}):get(u).then(function(v){x(v),w(d)}).catch(function(v){x(""),w(d),console.error("fetch of "+u+" failed: "+v.statusText)})})}return o?(p.then(function(w){o(w)}),d):p}function getColorFromStyle(e,r){let s=r.colorscheme;if(_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s]!==void 0)s=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s];else if(typeof s=="string"&&s.endsWith("Carbon")){let y=s.substring(0,s.lastIndexOf("Carbon")).toLowerCase();if(_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[y]!==void 0){let u=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);u.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[y],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s]={prop:"elem",map:u},s=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s]}}let o=e.color;if(r.color!==void 0&&r.color!="spectrum"&&(o=r.color),s!==void 0){let y,u;if(_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[s]!==void 0)s=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[s],s[e[s.prop]]!==void 0&&(o=s.map[e[s.prop]]);else if(s[e[s.prop]]!==void 0)o=s.map[e[s.prop]];else if(s.prop!==void 0&&s.gradient!==void 0){y=s.prop;var c=s.gradient;c instanceof _Gradient__WEBPACK_IMPORTED_MODULE_0__.GradientType||(c=(0,_Gradient__WEBPACK_IMPORTED_MODULE_0__.getGradient)(s));let p=c.range()||[-1,1];u=getAtomProperty(e,y),u!=null&&(o=c.valueToHex(u,p))}else s.prop!==void 0&&s.map!==void 0?(y=s.prop,u=getAtomProperty(e,y),s.map[u]!==void 0&&(o=s.map[u])):r.colorscheme[e.elem]!==void 0?o=r.colorscheme[e.elem]:console.warn("Could not interpret colorscheme "+s)}else r.colorfunc!==void 0&&(o=r.colorfunc(e));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(o)}function getElement(e){let r=e;return typeof e=="string"?r=document.querySelector("#"+e):typeof e=="object"&&e.get&&(r=e.get(0)),r}function inflateString(e,r=!0){let s;return s=typeof e=="string"?new TextEncoder().encode(e):new Uint8Array(e),(0,pako__WEBPACK_IMPORTED_MODULE_3__.inflate)(s,{to:r?"string":null})}},865:(e,r,s)=>{s.r(r),s.d(r,{CUBE:()=>u});var o=s(378),c=s(392);const y={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"};function u(p,d){d=d||{};const x=[[]];let w=p.split(/\r?\n/);const v=d.assignBonds===void 0||d.assignBonds;if(w.length<6)return x;let R=w[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const O=Math.abs(parseFloat(R[0]));let C={origin:void 0,size:void 0,unit:void 0,matrix4:void 0,matrix:void 0};const k=C.origin=new o.Vector3(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3]));R=w[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),R=w[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const K=R[0]>0?.529177:1;k.multiplyScalar(K);const Z=Math.abs(R[0]),X=new o.Vector3(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3])).multiplyScalar(K);R=w[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const S=Math.abs(R[0]),F=new o.Vector3(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3])).multiplyScalar(K);R=w[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const B=Math.abs(R[0]),W=new o.Vector3(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3])).multiplyScalar(K);if(C.size={x:Z,y:S,z:B},C.unit=new o.Vector3(X.x,F.y,W.z),X.y!=0||X.z!=0||F.x!=0||F.z!=0||W.x!=0||W.y!=0){C.matrix4=new o.Matrix4(X.x,F.x,W.x,0,X.y,F.y,W.y,0,X.z,F.z,W.z,0,0,0,0,1);let ge=new o.Matrix4().makeTranslation(k.x,k.y,k.z);C.matrix4=C.matrix4.multiplyMatrices(ge,C.matrix4),C.matrix=C.matrix4.matrix3FromTopLeft(),C.origin=new o.Vector3(0,0,0),C.unit=new o.Vector3(1,1,1)}x.modelData=[{cryst:C}],w=w.splice(6,O);for(var J=x[x.length-1].length,N=J+w.length,ee=J;ee<N;++ee){var Se={};Se.serial=ee;var ce=w[ee-J].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");Se.elem=y[ce[0]],Se.x=parseFloat(ce[2])*K,Se.y=parseFloat(ce[3])*K,Se.z=parseFloat(ce[4])*K,Se.hetflag=!0,Se.bonds=[],Se.bondOrder=[],Se.properties={},x[x.length-1].push(Se)}if(v)for(let ge=0;ge<x.length;ge++)(0,c.assignBonds)(x[ge],d);return x}},972:(e,r,s)=>{var o=s(981),c=!0,y=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{y=!1}for(var u=new o.Buf8(256),p=0;p<256;p++)u[p]=p>=252?6:p>=248?5:p>=240?4:p>=224?3:p>=192?2:1;function d(x,w){if(w<65534&&(x.subarray&&y||!x.subarray&&c))return String.fromCharCode.apply(null,o.shrinkBuf(x,w));for(var v="",R=0;R<w;R++)v+=String.fromCharCode(x[R]);return v}u[254]=u[254]=1,r.string2buf=function(x){var w,v,R,O,C,k=x.length,K=0;for(O=0;O<k;O++)(64512&(v=x.charCodeAt(O)))==55296&&O+1<k&&(64512&(R=x.charCodeAt(O+1)))==56320&&(v=65536+(v-55296<<10)+(R-56320),O++),K+=v<128?1:v<2048?2:v<65536?3:4;for(w=new o.Buf8(K),C=0,O=0;C<K;O++)(64512&(v=x.charCodeAt(O)))==55296&&O+1<k&&(64512&(R=x.charCodeAt(O+1)))==56320&&(v=65536+(v-55296<<10)+(R-56320),O++),v<128?w[C++]=v:v<2048?(w[C++]=192|v>>>6,w[C++]=128|63&v):v<65536?(w[C++]=224|v>>>12,w[C++]=128|v>>>6&63,w[C++]=128|63&v):(w[C++]=240|v>>>18,w[C++]=128|v>>>12&63,w[C++]=128|v>>>6&63,w[C++]=128|63&v);return w},r.buf2binstring=function(x){return d(x,x.length)},r.binstring2buf=function(x){for(var w=new o.Buf8(x.length),v=0,R=w.length;v<R;v++)w[v]=x.charCodeAt(v);return w},r.buf2string=function(x,w){var v,R,O,C,k=w||x.length,K=new Array(2*k);for(R=0,v=0;v<k;)if((O=x[v++])<128)K[R++]=O;else if((C=u[O])>4)K[R++]=65533,v+=C-1;else{for(O&=C===2?31:C===3?15:7;C>1&&v<k;)O=O<<6|63&x[v++],C--;C>1?K[R++]=65533:O<65536?K[R++]=O:(O-=65536,K[R++]=55296|O>>10&1023,K[R++]=56320|1023&O)}return d(K,R)},r.utf8border=function(x,w){var v;for((w=w||x.length)>x.length&&(w=x.length),v=w-1;v>=0&&(192&x[v])==128;)v--;return v<0||v===0?w:v+u[x[v]]>w?v:w}},981:(e,r)=>{var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function o(u,p){return Object.prototype.hasOwnProperty.call(u,p)}r.assign=function(u){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var d=p.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var x in d)o(d,x)&&(u[x]=d[x])}}return u},r.shrinkBuf=function(u,p){return u.length===p?u:u.subarray?u.subarray(0,p):(u.length=p,u)};var c={arraySet:function(u,p,d,x,w){if(p.subarray&&u.subarray)u.set(p.subarray(d,d+x),w);else for(var v=0;v<x;v++)u[w+v]=p[d+v]},flattenChunks:function(u){var p,d,x,w,v,R;for(x=0,p=0,d=u.length;p<d;p++)x+=u[p].length;for(R=new Uint8Array(x),w=0,p=0,d=u.length;p<d;p++)v=u[p],R.set(v,w),w+=v.length;return R}},y={arraySet:function(u,p,d,x,w){for(var v=0;v<x;v++)u[w+v]=p[d+v]},flattenChunks:function(u){return[].concat.apply([],u)}};r.setTyped=function(u){u?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,c)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,y))},r.setTyped(s)}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];if(r!==void 0)return r.exports;var s=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(s.exports,s,s.exports,__webpack_require__),s.exports}__webpack_require__.d=(e,r)=>{for(var s in r)__webpack_require__.o(r,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:r[s]})},__webpack_require__.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),__webpack_require__.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__(16),__webpack_require__(185);var __webpack_exports__=__webpack_require__(307);return __webpack_exports__})(),module.exports=factory()})(_3DmolMin)),_3DmolMin.exports}require_3DmolMin();const covalentRadii={H:.31,He:.28,Li:1.28,Be:.96,B:.84,C:.76,N:.71,O:.66,F:.57,Ne:.58,Na:1.66,Mg:1.41,Al:1.21,Si:1.11,P:1.07,S:1.05,Cl:1.02,Ar:1.06,K:2.03,Ca:1.76,Sc:1.7,Ti:1.6,V:1.53,Cr:1.39,Mn:1.61,Fe:1.52,Co:1.5,Ni:1.24,Cu:1.32,Zn:1.22,Ga:1.22,Ge:1.2,As:1.19,Se:1.2,Br:1.2,Kr:1.16,Rb:2.2,Sr:1.95,Y:1.9,Zr:1.75,Nb:1.64,Mo:1.54,Tc:1.47,Ru:1.46,Rh:1.42,Pd:1.39,Ag:1.45,Cd:1.44,In:1.42,Sn:1.39,Sb:1.39,Te:1.38,I:1.39,Xe:1.4,Cs:2.44,Ba:2.15,La:2.07,Ce:2.04,Pr:2.03,Nd:2.01,Pm:1.99,Sm:1.98,Eu:1.98,Gd:1.96,Tb:1.94,Dy:1.92,Ho:1.92,Er:1.89,Tm:1.9,Yb:1.87,Lu:1.75,Hf:1.87,Ta:1.7,W:1.62,Re:1.51,Os:1.44,Ir:1.41,Pt:1.36,Au:1.36,Hg:1.32,Tl:1.45,Pb:1.46,Bi:1.48,Po:1.4,At:1.5,Rn:1.5,Fr:2.6,Ra:2.21,Ac:2.15,Th:2.06,Pa:2,U:1.96,Np:1.9,Pu:1.87,Am:1.8,Cm:1.69},$3Dmol$1=window.$3Dmol;function mod(e,r){return(e%r+r)%r}function setCustomBondLengths(){function e(r,s){$3Dmol$1.setBondLength(r,s)}Object.keys(covalentRadii).forEach(r=>{e(r,1.05*covalentRadii[r])})}const Visualizer3dmol=reactExports.forwardRef(({viewerParams:e,cifText:r},s)=>{const o=reactExports.useRef(null),c=reactExports.useRef(null),y=reactExports.useRef("gldiv-"+(Math.random()+1).toString(36).substring(7));reactExports.useEffect(()=>{setCustomBondLengths()},[]);const u=()=>{if(c.current=o.current.addModel(),r){let x=$3Dmol$1.Parsers.CIF(r),w=x[0],v=x.modelData[0].cryst;c.current.setCrystData(v.a,v.b,v.c,v.alpha,v.beta,v.gamma);let R=c.current.modelData.cryst.matrix,O=new $3Dmol$1.Matrix3().getInverse3(R),C=[],k=[];w.forEach(X=>{let S=new $3Dmol$1.Vector3(X.x,X.y,X.z);if(e.packedCell){let F=S.clone().applyMatrix3(O);S=new $3Dmol$1.Vector3(mod(F.x,1),mod(F.y,1),mod(F.z,1)).applyMatrix3(R)}k.push({elem:X.elem,x:S.x,y:S.y,z:S.z})});let K=.03,Z=e.supercell;for(let X=-1;X<Z[0]+1;X++)for(let S=-1;S<Z[1]+1;S++)for(let F=-1;F<Z[2]+1;F++){let B=new $3Dmol$1.Vector3(X,S,F);if(B.applyMatrix3(R),X==-1||X==Z[0]||S==-1||S==Z[1]||F==-1||F==Z[2])if(e.packedCell)k.forEach(W=>{let J=new $3Dmol$1.Vector3(W.x,W.y,W.z);J.add(B);let N=J.clone().applyMatrix3(O);N.x>-K&&N.x<Z[0]+K&&N.y>-K&&N.y<Z[1]+K&&N.z>-K&&N.z<Z[2]+K&&C.push({elem:W.elem,x:J.x,y:J.y,z:J.z})});else continue;else k.forEach(W=>{C.push({elem:W.elem,x:W.x+B.x,y:W.y+B.y,z:W.z+B.z})})}c.current.addAtoms(C)}},p=()=>{o.current.removeAllModels(),u();let x={sphere:{scale:.3,colorscheme:"Jmol"}};e.vdwRadius&&(x.sphere.scale=1),e.bonds&&(x.stick={radius:.15,colorscheme:"Jmol"}),o.current.setStyle(x),o.current.addUnitCell(c.current),c.current.assignBonds(),o.current.removeAllLabels(),e.atomLabels&&c.current.atoms.forEach(w=>{o.current.addLabel(w.elem,{position:{x:w.x,y:w.y,z:w.z},fontColor:"black",bold:!0,fontSize:18,showBackground:!1,backgroundOpacity:1,inFront:!0},null,!0)}),o.current.zoomTo(),o.current.zoom(1.4),o.current.render()},d=(x,w)=>{x=="camera"&&(w=="x"&&o.current.setView([0,0,0,0,-.5,-.5,-.5,.5]),w=="y"&&o.current.setView([0,0,0,0,.5,.5,.5,.5]),w=="z"&&o.current.setView([0,0,0,0,0,0,0,1]),o.current.zoomTo(),o.current.zoom(1.4))};return reactExports.useImperativeHandle(s,()=>({handleEvent:d})),reactExports.useEffect(()=>{let x={backgroundColor:"white",orthographic:!0};o.current=$3Dmol$1.createViewer(y.current,x),p()},[]),reactExports.useEffect(()=>{o.current&&p()},[e,r]),jsxRuntimeExports.jsx("div",{id:y.current,className:"gldiv",children:"No data!"})});Visualizer3dmol.displayName="Visualizer3dmol";const StructureWindow=({mouseEnabled:e,setMouseEnabledState:r,visualizerRef:s,viewerParams:o,cifText:c})=>{let y="structure-window";e||(y+=" disable-mouse");let u="Click to interact",p="mouse-disabled-note";return e&&(p="mouse-disabled-note on"),jsxRuntimeExports.jsxs("div",{className:"structure-window-outer",children:[jsxRuntimeExports.jsx("div",{className:"structure-window-click-handler",onClick:()=>r(!0),children:jsxRuntimeExports.jsx("div",{className:y,children:jsxRuntimeExports.jsx(Visualizer3dmol,{ref:s,viewerParams:o,cifText:c})})}),jsxRuntimeExports.jsx("div",{className:p,onClick:()=>r(!e),children:u})]})},StructureVisualizer=e=>{const[r,s]=reactExports.useState({supercell:e.initSupercell||[2,2,2],bonds:!0,packedCell:!0,atomLabels:!1,vdwRadius:!1}),[o,c]=reactExports.useState(!1),y=reactExports.useRef(null),u=reactExports.useRef(null);reactExports.useEffect(()=>{const w=v=>{u&&!u.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[]);const p=w=>{c(w)},d=(w,v)=>{s(R=>({...R,[w]:v}))},x=(w,v)=>{y.current.handleEvent(w,v)};return jsxRuntimeExports.jsxs("div",{ref:u,className:"structure-visualizer",children:[jsxRuntimeExports.jsx(StructureWindow,{visualizerRef:y,viewerParams:r,cifText:e.cifText,mouseEnabled:o,setMouseEnabledState:p}),jsxRuntimeExports.jsx(ControlBox,{viewerParams:r,onViewerParamChange:d,onViewerEvent:x})]})};function DownloadIcon({size:e=14,className:r=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[jsxRuntimeExports.jsx("path",{d:"M12 15V3"}),jsxRuntimeExports.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),jsxRuntimeExports.jsx("path",{d:"m7 10 5 5 5-5"})]})}function NextIcon({size:e=14,className:r=""}){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,hegiht:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:jsxRuntimeExports.jsx("path",{d:"m9 18 6-6-6-6"})})}function PreviousIcon({size:e=14,className:r=""}){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,hegiht:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:jsxRuntimeExports.jsx("path",{d:"m15 18-6-6 6-6"})})}function FirstIcon({size:e=14,className:r=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,hegiht:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[jsxRuntimeExports.jsx("path",{d:"m17 18-6-6 6-6"}),jsxRuntimeExports.jsx("path",{d:"M7 6v12"})]})}function LastIcon({size:e=14,className:r=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,hegiht:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[jsxRuntimeExports.jsx("path",{d:"m7 18 6-6-6-6"}),jsxRuntimeExports.jsx("path",{d:"M17 6v12"})]})}var ARRAY_TYPE=typeof Float32Array<"u"?Float32Array:Array;function create$1(){var e=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function fromValues$1(e,r,s,o,c,y,u,p,d){var x=new ARRAY_TYPE(9);return x[0]=e,x[1]=r,x[2]=s,x[3]=o,x[4]=c,x[5]=y,x[6]=u,x[7]=p,x[8]=d,x}function invert(e,r){var s=r[0],o=r[1],c=r[2],y=r[3],u=r[4],p=r[5],d=r[6],x=r[7],w=r[8],v=w*u-p*x,R=-w*y+p*d,O=x*y-u*d,C=s*v+o*R+c*O;return C?(C=1/C,e[0]=v*C,e[1]=(-w*o+c*x)*C,e[2]=(p*o-c*u)*C,e[3]=R*C,e[4]=(w*s-c*d)*C,e[5]=(-p*s+c*y)*C,e[6]=O*C,e[7]=(-x*s+o*d)*C,e[8]=(u*s-o*y)*C,e):null}function create(){var e=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function length(e){var r=e[0],s=e[1],o=e[2];return Math.sqrt(r*r+s*s+o*o)}function fromValues(e,r,s){var o=new ARRAY_TYPE(3);return o[0]=e,o[1]=r,o[2]=s,o}function dot(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}function transformMat3(e,r,s){var o=r[0],c=r[1],y=r[2];return e[0]=o*s[0]+c*s[3]+y*s[6],e[1]=o*s[1]+c*s[4]+y*s[7],e[2]=o*s[2]+c*s[5]+y*s[8],e}(function(){var e=create();return function(r,s,o,c,y,u){var p,d;for(s||(s=3),o||(o=0),c?d=Math.min(c*s+o,r.length):d=r.length,p=o;p<d;p+=s)e[0]=r[p],e[1]=r[p+1],e[2]=r[p+2],y(e,e,u),r[p]=e[0],r[p+1]=e[1],r[p+2]=e[2];return r}})();function vecLength(e){return length(e)}function radToDeg$1(e){return e*180/Math.PI}function cartesianToFractional(e,r){const s=r[0],o=r[1],c=r[2],y=fromValues$1(s[0],s[1],s[2],o[0],o[1],o[2],c[0],c[1],c[2]),u=create$1();if(!invert(u,y))throw new Error("Singular lattice matrix");return e.map(p=>{const d=fromValues(p.x,p.y,p.z),x=create();return transformMat3(x,d,u),{element:p.element,x:x[0],y:x[1],z:x[2]}})}function latticeMatrixToCIFParams(e){const r=fromValues(...e[0]),s=fromValues(...e[1]),o=fromValues(...e[2]),c=vecLength(r),y=vecLength(s),u=vecLength(o),p=Math.min(1,Math.max(-1,dot(s,o)/(y*u))),d=Math.min(1,Math.max(-1,dot(r,o)/(c*u))),x=Math.min(1,Math.max(-1,dot(r,s)/(c*y))),w=radToDeg$1(Math.acos(p)),v=radToDeg$1(Math.acos(d)),R=radToDeg$1(Math.acos(x));return{a:c,b:y,c:u,alpha:w,beta:v,gamma:R}}function generateCIFfromMatrix(e){const{lattice:r,sites:s}=e,o=cartesianToFractional(s,r),{a:c,b:y,c:u,alpha:p,beta:d,gamma:x}=latticeMatrixToCIFParams(r);let w=`data_generated_structure
_symmetry_space_group_name_H-M   'P 1'
_cell_length_a   ${c.toFixed(6)}
_cell_length_b   ${y.toFixed(6)}
_cell_length_c   ${u.toFixed(6)}
_cell_angle_alpha   ${p.toFixed(6)}
_cell_angle_beta    ${d.toFixed(6)}
_cell_angle_gamma   ${x.toFixed(6)}

loop_
_atom_site_label
_atom_site_type_symbol
_atom_site_fract_x
_atom_site_fract_y
_atom_site_fract_z
`;return o.forEach((v,R)=>{w+=`${v.element}${R+1} ${v.element} ${v.x.toFixed(6)} ${v.y.toFixed(6)} ${v.z.toFixed(6)}
`}),w}function generateXYZ(e){const{lattice:r,sites:s}=e,o=s.length,c=r.flat().map(u=>u.toFixed(6)).join(" ");let y=`${o}
`;return y+=`Lattice="${c}" Properties=species:S:1:pos:R:3
`,s.forEach(u=>{y+=`${u.element} ${u.x.toFixed(6)} ${u.y.toFixed(6)} ${u.z.toFixed(6)}
`}),y}function generatePOSCAR(e){const{lattice:r,sites:s}=e,o=[...new Set(s.map(p=>p.element))],c=o.map(p=>s.filter(d=>d.element===p).length),y=r.map(p=>p.map(d=>d.toFixed(6)).join(" ")).join(`
`),u=o.flatMap(p=>s.filter(d=>d.element===p).map(d=>`${d.x.toFixed(6)} ${d.y.toFixed(6)} ${d.z.toFixed(6)}`));return["Generated structure from OPTIMADE CLIENT","1.0",y,o.join(" "),c.join(" "),"Cartesian",...u].join(`
`)}function generateXSF(e){const{lattice:r,sites:s}=e;let o=`CRYSTAL
PRIMVEC
`;return r.forEach(c=>{o+=c.map(y=>y.toFixed(6)).join(" ")+`
`}),o+=`PRIMCOORD
${s.length} 1
`,s.forEach(c=>{o+=`${c.element} ${c.x.toFixed(6)} ${c.y.toFixed(6)} ${c.z.toFixed(6)}
`}),o}const defaultFormats=[{format:"json",label:"JSON"},{format:"cif",label:"CIF"},{format:"xyz",label:"XYZ"},{format:"xsf",label:"XSF"},{format:"poscar",label:"VASP"}];function downloadFile(e,r){const s=new Blob([e],{type:"text/plain"}),o=URL.createObjectURL(s),c=document.createElement("a");c.href=o,c.download=r,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(o)}function StructureDownload({OptimadeStructure:e,download_formats:r}){const[s,o]=reactExports.useState(!1),c=reactExports.useRef(null),y=r||defaultFormats,u=e.attributes.lattice_vectors,p=e?.attributes?.cartesian_site_positions||[],d=e.attributes.species_at_sites,x=p.map((R,O)=>({element:d[O],x:R[0],y:R[1],z:R[2]})),w={lattice:u,sites:x},v=R=>{let O="",C="structure";R==="cif"?(O=generateCIFfromMatrix(w),C+=".cif"):R==="xyz"?(O=generateXYZ(w),C+=".xyz"):R==="poscar"?(O=generatePOSCAR(w),C+=".vasp"):R==="xsf"?(O=generateXSF(w),C+=".xsf"):R==="json"&&(O=JSON.stringify(e,null,2),C+=".json"),O&&downloadFile(O,C),o(!1)};return reactExports.useEffect(()=>{const R=O=>{c.current&&!c.current.contains(O.target)&&o(!1)};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]),jsxRuntimeExports.jsxs("div",{className:"relative inline-block",ref:c,children:[jsxRuntimeExports.jsx("div",{onClick:()=>o(R=>!R),className:`${baseButtonStyle} ${textSmall} py-2! px-2!`,title:"Download",children:jsxRuntimeExports.jsx(DownloadIcon,{})}),s&&jsxRuntimeExports.jsx("div",{className:"absolute right-0 mt-0.5 bg-white rounded-sm shadow-sm ring-1 ring-slate-500 z-100",children:jsxRuntimeExports.jsx("ul",{children:y.map(({format:R,label:O})=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{onClick:()=>v(R),className:`${textSmall} w-full text-left px-3 py-1.25 text-slate-700 hover:bg-gray-100 hover:cursor-pointer`,children:O})},R))})})]})}function StructureViewerWithDownload({OptimadeStructure:e}){const r=e.attributes.lattice_vectors,s=e?.attributes?.cartesian_site_positions||null,o=e.attributes.species_at_sites;let c=[];s&&(c=s.map((p,d)=>({element:o[d],x:p[0],y:p[1],z:p[2]})));const y={lattice:r,sites:c},u=reactExports.useMemo(()=>generateCIFfromMatrix(y),[y]);return s?jsxRuntimeExports.jsxs("div",{className:"relative min-h-[450px] ",children:[jsxRuntimeExports.jsx("div",{className:"w-full h-[450px]",children:jsxRuntimeExports.jsx(StructureVisualizer,{cifText:u},u)}),jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2 z-10",children:jsxRuntimeExports.jsx(StructureDownload,{OptimadeStructure:e})})]}):jsxRuntimeExports.jsx("div",{className:`${containerStyle} min-h-[450px] flex items-center justify-center`,children:jsxRuntimeExports.jsxs("div",{className:textError,children:[jsxRuntimeExports.jsx("p",{children:"Unexpected or malformed data format found. "}),jsxRuntimeExports.jsx("p",{children:"--"}),jsxRuntimeExports.jsx("p",{children:"Crystal structure rendering skipped..."})]})})}function QEInputButton({cifText:e}){const r="https://qeinputgenerator.materialscloud.io",s=async()=>{if(!e){alert("No CIF data available");return}const o=window.open("","_blank");try{const c=new FormData;c.append("fileformat","cif-ase"),c.append("structurefile",new Blob([e],{type:"text/plain;charset=utf-8"}),"structure.cif");const y=await fetch(`${r}/compute/upload_structure/`,{method:"POST",body:c});if(!y.ok)throw new Error(`Upload failed: ${y.statusText}`);const u=await y.json();u.redirect?o.location=`${r}${u.redirect}`:(o.close(),alert("Unexpected response from server"))}catch(c){console.error(c),o.close(),alert("Failed to upload structure.")}};return jsxRuntimeExports.jsx("button",{onClick:s,disabled:!e,title:"Use the chosen structure in the QE Input Generator Tool",className:`${baseButtonStyle} ${textNormal}`,children:"Use in QE Input Generator"})}function ResultViewer({selectedResult:e}){const r=e?.attributes?.lattice_vectors??[],s=e?.attributes?.cartesian_site_positions??[],o=e?.attributes?.species_at_sites??[],c=s.map((p,d)=>({element:o[d],x:p[0],y:p[1],z:p[2]})),y=reactExports.useMemo(()=>({lattice:r,sites:c}),[r,c]),u=reactExports.useMemo(()=>generateCIFfromMatrix(y),[y]);return jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col",children:[e&&jsxRuntimeExports.jsxs("div",{className:"@container w-full flex flex-col md:flex-row gap-2 md:gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-full md:w-1/2",children:jsxRuntimeExports.jsx(StructureViewerWithDownload,{OptimadeStructure:e,cifText:u})}),jsxRuntimeExports.jsx("div",{className:containerStyleHalf,children:jsxRuntimeExports.jsx(JsonView,{data:e,compactTopLevel:!0,shouldExpandNode:p=>p<2,style:{backgroundColor:""}})})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 md:mt-4 flex justify-center",children:jsxRuntimeExports.jsx(QEInputButton,{cifText:u})})]})}const slateDropdown=`min-w-[325]
  w-full border-2 border-slate-300
  bg-slate-200 py-1 px-3 rounded shadow hover:cursor-pointer
  hover:bg-slate-300 disabled:cursor-not-allowed
  disabled:bg-gray-100 text-sm md:text-base
`,longSlateDropdown=slateDropdown+" min-w-[300px] max-w-[700px]";function ResultsDropdown({results:e,selectedResult:r,setSelectedResult:s}){const o=c=>{const y=e?.find(u=>String(u.id)===c.target.value);y&&s(y)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select a result"}),jsxRuntimeExports.jsx("select",{className:`${slateDropdown} w-full`,value:r?.id||"",onChange:o,disabled:!e?.length,children:e?.length?e.map(c=>jsxRuntimeExports.jsx("option",{value:c.id,children:`${c.attributes?.chemical_formula_descriptive||c.attributes?.chemical_formula_hill||"Unknown"} (${c.id})`},c.id)):jsxRuntimeExports.jsx("option",{value:"",children:"No results for current query"})})]})}var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},defaultTimeoutProvider={setTimeout:(e,r)=>setTimeout(e,r),clearTimeout:e=>clearTimeout(e),setInterval:(e,r)=>setInterval(e,r),clearInterval:e=>clearInterval(e)},TimeoutManager=class{#e=defaultTimeoutProvider;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,r){return this.#e.setTimeout(e,r)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,r){return this.#e.setInterval(e,r)}clearInterval(e){this.#e.clearInterval(e)}},timeoutManager=new TimeoutManager;function systemSetTimeoutZero(e){setTimeout(e,0)}var isServer=typeof window>"u"||"Deno"in globalThis;function noop$1(){}function functionalUpdate(e,r){return typeof e=="function"?e(r):e}function isValidTimeout(e){return typeof e=="number"&&e>=0&&e!==1/0}function timeUntilStale(e,r){return Math.max(e+(r||0)-Date.now(),0)}function resolveStaleTime(e,r){return typeof e=="function"?e(r):e}function resolveEnabled(e,r){return typeof e=="function"?e(r):e}function matchQuery(e,r){const{type:s="all",exact:o,fetchStatus:c,predicate:y,queryKey:u,stale:p}=e;if(u){if(o){if(r.queryHash!==hashQueryKeyByOptions(u,r.options))return!1}else if(!partialMatchKey(r.queryKey,u))return!1}if(s!=="all"){const d=r.isActive();if(s==="active"&&!d||s==="inactive"&&d)return!1}return!(typeof p=="boolean"&&r.isStale()!==p||c&&c!==r.state.fetchStatus||y&&!y(r))}function matchMutation(e,r){const{exact:s,status:o,predicate:c,mutationKey:y}=e;if(y){if(!r.options.mutationKey)return!1;if(s){if(hashKey(r.options.mutationKey)!==hashKey(y))return!1}else if(!partialMatchKey(r.options.mutationKey,y))return!1}return!(o&&r.state.status!==o||c&&!c(r))}function hashQueryKeyByOptions(e,r){return(r?.queryKeyHashFn||hashKey)(e)}function hashKey(e){return JSON.stringify(e,(r,s)=>isPlainObject(s)?Object.keys(s).sort().reduce((o,c)=>(o[c]=s[c],o),{}):s)}function partialMatchKey(e,r){return e===r?!0:typeof e!=typeof r?!1:e&&r&&typeof e=="object"&&typeof r=="object"?Object.keys(r).every(s=>partialMatchKey(e[s],r[s])):!1}var hasOwn=Object.prototype.hasOwnProperty;function replaceEqualDeep(e,r,s=0){if(e===r)return e;if(s>500)return r;const o=isPlainArray(e)&&isPlainArray(r);if(!o&&!(isPlainObject(e)&&isPlainObject(r)))return r;const y=(o?e:Object.keys(e)).length,u=o?r:Object.keys(r),p=u.length,d=o?new Array(p):{};let x=0;for(let w=0;w<p;w++){const v=o?w:u[w],R=e[v],O=r[v];if(R===O){d[v]=R,(o?w<y:hasOwn.call(e,v))&&x++;continue}if(R===null||O===null||typeof R!="object"||typeof O!="object"){d[v]=O;continue}const C=replaceEqualDeep(R,O,s+1);d[v]=C,C===R&&x++}return y===p&&x===y?e:d}function shallowEqualObjects(e,r){if(!r||Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}function isPlainArray(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function isPlainObject(e){if(!hasObjectPrototype(e))return!1;const r=e.constructor;if(r===void 0)return!0;const s=r.prototype;return!(!hasObjectPrototype(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function hasObjectPrototype(e){return Object.prototype.toString.call(e)==="[object Object]"}function sleep(e){return new Promise(r=>{timeoutManager.setTimeout(r,e)})}function replaceData(e,r,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,r):s.structuralSharing!==!1?replaceEqualDeep(e,r):r}function addToEnd(e,r,s=0){const o=[...e,r];return s&&o.length>s?o.slice(1):o}function addToStart(e,r,s=0){const o=[r,...e];return s&&o.length>s?o.slice(0,-1):o}var skipToken=Symbol();function ensureQueryFn(e,r){return!e.queryFn&&r?.initialPromise?()=>r.initialPromise:!e.queryFn||e.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function shouldThrowError(e,r){return typeof e=="function"?e(...r):!!e}function addConsumeAwareSignal(e,r,s){let o=!1,c;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(c??=r(),o||(o=!0,c.aborted?s():c.addEventListener("abort",s,{once:!0})),c)}),e}var FocusManager=class extends Subscribable{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!isServer&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},focusManager=new FocusManager;function pendingThenable(){let e,r;const s=new Promise((c,y)=>{e=c,r=y});s.status="pending",s.catch(()=>{});function o(c){Object.assign(s,c),delete s.resolve,delete s.reject}return s.resolve=c=>{o({status:"fulfilled",value:c}),e(c)},s.reject=c=>{o({status:"rejected",reason:c}),r(c)},s}var defaultScheduler=systemSetTimeoutZero;function createNotifyManager(){let e=[],r=0,s=p=>{p()},o=p=>{p()},c=defaultScheduler;const y=p=>{r?e.push(p):c(()=>{s(p)})},u=()=>{const p=e;e=[],p.length&&c(()=>{o(()=>{p.forEach(d=>{s(d)})})})};return{batch:p=>{let d;r++;try{d=p()}finally{r--,r||u()}return d},batchCalls:p=>(...d)=>{y(()=>{p(...d)})},schedule:y,setNotifyFunction:p=>{s=p},setBatchNotifyFunction:p=>{o=p},setScheduler:p=>{c=p}}}var notifyManager=createNotifyManager(),OnlineManager=class extends Subscribable{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!isServer&&window.addEventListener){const r=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(s=>{s(e)}))}isOnline(){return this.#e}},onlineManager=new OnlineManager;function defaultRetryDelay(e){return Math.min(1e3*2**e,3e4)}function canFetch(e){return(e??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function createRetryer(e){let r=!1,s=0,o;const c=pendingThenable(),y=()=>c.status!=="pending",u=k=>{if(!y()){const K=new CancelledError(k);R(K),e.onCancel?.(K)}},p=()=>{r=!0},d=()=>{r=!1},x=()=>focusManager.isFocused()&&(e.networkMode==="always"||onlineManager.isOnline())&&e.canRun(),w=()=>canFetch(e.networkMode)&&e.canRun(),v=k=>{y()||(o?.(),c.resolve(k))},R=k=>{y()||(o?.(),c.reject(k))},O=()=>new Promise(k=>{o=K=>{(y()||x())&&k(K)},e.onPause?.()}).then(()=>{o=void 0,y()||e.onContinue?.()}),C=()=>{if(y())return;let k;const K=s===0?e.initialPromise:void 0;try{k=K??e.fn()}catch(Z){k=Promise.reject(Z)}Promise.resolve(k).then(v).catch(Z=>{if(y())return;const X=e.retry??(isServer?0:3),S=e.retryDelay??defaultRetryDelay,F=typeof S=="function"?S(s,Z):S,B=X===!0||typeof X=="number"&&s<X||typeof X=="function"&&X(s,Z);if(r||!B){R(Z);return}s++,e.onFail?.(s,Z),sleep(F).then(()=>x()?void 0:O()).then(()=>{r?R(Z):C()})})};return{promise:c,status:()=>c.status,cancel:u,continue:()=>(o?.(),c),cancelRetry:p,continueRetry:d,canStart:w,start:()=>(w()?C():O().then(C),c)}}var Removable=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&(this.#e=timeoutManager.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(isServer?1/0:300*1e3))}clearGcTimeout(){this.#e&&(timeoutManager.clearTimeout(this.#e),this.#e=void 0)}},Query=class extends Removable{#e;#t;#r;#n;#i;#o;#a;constructor(e){super(),this.#a=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#r=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=getDefaultState$1(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=getDefaultState$1(this.options);r.data!==void 0&&(this.setState(successState(r.data,r.dataUpdatedAt)),this.#e=r)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,r){const s=replaceData(this.state.data,e,this.options);return this.#s({data:s,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),s}setState(e,r){this.#s({type:"setState",state:e,setStateOptions:r})}cancel(e){const r=this.#i?.promise;return this.#i?.cancel(e),r?r.then(noop$1).catch(noop$1):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>resolveEnabled(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>resolveStaleTime(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!timeUntilStale(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(r=>r.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(r=>r.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(this.#i&&(this.#a?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,r){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&r?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(d=>d.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,o=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(this.#a=!0,s.signal)})},c=()=>{const p=ensureQueryFn(this.options,r),x=(()=>{const w={client:this.#n,queryKey:this.queryKey,meta:this.meta};return o(w),w})();return this.#a=!1,this.options.persister?this.options.persister(p,x,this):p(x)},u=(()=>{const p={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:c};return o(p),p})();this.options.behavior?.onFetch(u,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==u.fetchOptions?.meta)&&this.#s({type:"fetch",meta:u.fetchOptions?.meta}),this.#i=createRetryer({initialPromise:r?.initialPromise,fn:u.fetchFn,onCancel:p=>{p instanceof CancelledError&&p.revert&&this.setState({...this.#t,fetchStatus:"idle"}),s.abort()},onFail:(p,d)=>{this.#s({type:"failed",failureCount:p,error:d})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0});try{const p=await this.#i.start();if(p===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(p),this.#r.config.onSuccess?.(p,this),this.#r.config.onSettled?.(p,this.state.error,this),p}catch(p){if(p instanceof CancelledError){if(p.silent)return this.#i.promise;if(p.revert){if(this.state.data===void 0)throw p;return this.state.data}}throw this.#s({type:"error",error:p}),this.#r.config.onError?.(p,this),this.#r.config.onSettled?.(this.state.data,p,this),p}finally{this.scheduleGc()}}#s(e){const r=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...fetchState(s.data,this.options),fetchMeta:e.meta??null};case"success":const o={...s,...successState(e.data,e.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?o:void 0,o;case"error":const c=e.error;return{...s,error:c,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=r(this.state),notifyManager.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function fetchState(e,r){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(r.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function successState(e,r){return{data:e,dataUpdatedAt:r??Date.now(),error:null,isInvalidated:!1,status:"success"}}function getDefaultState$1(e){const r=typeof e.initialData=="function"?e.initialData():e.initialData,s=r!==void 0,o=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:r,dataUpdateCount:0,dataUpdatedAt:s?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var QueryObserver=class extends Subscribable{constructor(e,r){super(),this.options=r,this.#e=e,this.#s=null,this.#a=pendingThenable(),this.bindMethods(),this.setOptions(r)}#e;#t=void 0;#r=void 0;#n=void 0;#i;#o;#a;#s;#m;#d;#f;#u;#c;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),shouldFetchOnMount(this.#t,this.options)?this.#h():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const r=this.options,s=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof resolveEnabled(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#b(),this.#t.setOptions(this.options),r._defaulted&&!shallowEqualObjects(this.options,r)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const o=this.hasListeners();o&&shouldFetchOptionally(this.#t,s,this.options,r)&&this.#h(),this.updateResult(),o&&(this.#t!==s||resolveEnabled(this.options.enabled,this.#t)!==resolveEnabled(r.enabled,this.#t)||resolveStaleTime(this.options.staleTime,this.#t)!==resolveStaleTime(r.staleTime,this.#t))&&this.#g();const c=this.#v();o&&(this.#t!==s||resolveEnabled(this.options.enabled,this.#t)!==resolveEnabled(r.enabled,this.#t)||c!==this.#l)&&this.#y(c)}getOptimisticResult(e){const r=this.#e.getQueryCache().build(this.#e,e),s=this.createResult(r,e);return shouldAssignObserverCurrentProperties(this,s)&&(this.#n=s,this.#o=this.options,this.#i=this.#t.state),s}getCurrentResult(){return this.#n}trackResult(e,r){return new Proxy(e,{get:(s,o)=>(this.trackProp(o),r?.(o),o==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,o))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,r);return s.fetch().then(()=>this.createResult(s,r))}fetch(e){return this.#h({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#h(e){this.#b();let r=this.#t.fetch(this.options,e);return e?.throwOnError||(r=r.catch(noop$1)),r}#g(){this.#_();const e=resolveStaleTime(this.options.staleTime,this.#t);if(isServer||this.#n.isStale||!isValidTimeout(e))return;const s=timeUntilStale(this.#n.dataUpdatedAt,e)+1;this.#u=timeoutManager.setTimeout(()=>{this.#n.isStale||this.updateResult()},s)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#w(),this.#l=e,!(isServer||resolveEnabled(this.options.enabled,this.#t)===!1||!isValidTimeout(this.#l)||this.#l===0)&&(this.#c=timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&this.#h()},this.#l))}#x(){this.#g(),this.#y(this.#v())}#_(){this.#u&&(timeoutManager.clearTimeout(this.#u),this.#u=void 0)}#w(){this.#c&&(timeoutManager.clearInterval(this.#c),this.#c=void 0)}createResult(e,r){const s=this.#t,o=this.options,c=this.#n,y=this.#i,u=this.#o,d=e!==s?e.state:this.#r,{state:x}=e;let w={...x},v=!1,R;if(r._optimisticResults){const N=this.hasListeners(),ee=!N&&shouldFetchOnMount(e,r),Se=N&&shouldFetchOptionally(e,s,r,o);(ee||Se)&&(w={...w,...fetchState(x.data,e.options)}),r._optimisticResults==="isRestoring"&&(w.fetchStatus="idle")}let{error:O,errorUpdatedAt:C,status:k}=w;R=w.data;let K=!1;if(r.placeholderData!==void 0&&R===void 0&&k==="pending"){let N;c?.isPlaceholderData&&r.placeholderData===u?.placeholderData?(N=c.data,K=!0):N=typeof r.placeholderData=="function"?r.placeholderData(this.#f?.state.data,this.#f):r.placeholderData,N!==void 0&&(k="success",R=replaceData(c?.data,N,r),v=!0)}if(r.select&&R!==void 0&&!K)if(c&&R===y?.data&&r.select===this.#m)R=this.#d;else try{this.#m=r.select,R=r.select(R),R=replaceData(c?.data,R,r),this.#d=R,this.#s=null}catch(N){this.#s=N}this.#s&&(O=this.#s,R=this.#d,C=Date.now(),k="error");const Z=w.fetchStatus==="fetching",X=k==="pending",S=k==="error",F=X&&Z,B=R!==void 0,J={status:k,fetchStatus:w.fetchStatus,isPending:X,isSuccess:k==="success",isError:S,isInitialLoading:F,isLoading:F,data:R,dataUpdatedAt:w.dataUpdatedAt,error:O,errorUpdatedAt:C,failureCount:w.fetchFailureCount,failureReason:w.fetchFailureReason,errorUpdateCount:w.errorUpdateCount,isFetched:w.dataUpdateCount>0||w.errorUpdateCount>0,isFetchedAfterMount:w.dataUpdateCount>d.dataUpdateCount||w.errorUpdateCount>d.errorUpdateCount,isFetching:Z,isRefetching:Z&&!X,isLoadingError:S&&!B,isPaused:w.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:S&&B,isStale:isStale(e,r),refetch:this.refetch,promise:this.#a,isEnabled:resolveEnabled(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const N=J.data!==void 0,ee=J.status==="error"&&!N,Se=me=>{ee?me.reject(J.error):N&&me.resolve(J.data)},ce=()=>{const me=this.#a=J.promise=pendingThenable();Se(me)},ge=this.#a;switch(ge.status){case"pending":e.queryHash===s.queryHash&&Se(ge);break;case"fulfilled":(ee||J.data!==ge.value)&&ce();break;case"rejected":(!ee||J.error!==ge.reason)&&ce();break}}return J}updateResult(){const e=this.#n,r=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#o=this.options,this.#i.data!==void 0&&(this.#f=this.#t),shallowEqualObjects(r,e))return;this.#n=r;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,c=typeof o=="function"?o():o;if(c==="all"||!c&&!this.#p.size)return!0;const y=new Set(c??this.#p);return this.options.throwOnError&&y.add("error"),Object.keys(this.#n).some(u=>{const p=u;return this.#n[p]!==e[p]&&y.has(p)})};this.#S({listeners:s()})}#b(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const r=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(r?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#S(e){notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function shouldLoadOnMount(e,r){return resolveEnabled(r.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&r.retryOnMount===!1)}function shouldFetchOnMount(e,r){return shouldLoadOnMount(e,r)||e.state.data!==void 0&&shouldFetchOn(e,r,r.refetchOnMount)}function shouldFetchOn(e,r,s){if(resolveEnabled(r.enabled,e)!==!1&&resolveStaleTime(r.staleTime,e)!=="static"){const o=typeof s=="function"?s(e):s;return o==="always"||o!==!1&&isStale(e,r)}return!1}function shouldFetchOptionally(e,r,s,o){return(e!==r||resolveEnabled(o.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&isStale(e,s)}function isStale(e,r){return resolveEnabled(r.enabled,e)!==!1&&e.isStaleByTime(resolveStaleTime(r.staleTime,e))}function shouldAssignObserverCurrentProperties(e,r){return!shallowEqualObjects(e.getCurrentResult(),r)}function infiniteQueryBehavior(e){return{onFetch:(r,s)=>{const o=r.options,c=r.fetchOptions?.meta?.fetchMore?.direction,y=r.state.data?.pages||[],u=r.state.data?.pageParams||[];let p={pages:[],pageParams:[]},d=0;const x=async()=>{let w=!1;const v=C=>{addConsumeAwareSignal(C,()=>r.signal,()=>w=!0)},R=ensureQueryFn(r.options,r.fetchOptions),O=async(C,k,K)=>{if(w)return Promise.reject();if(k==null&&C.pages.length)return Promise.resolve(C);const X=(()=>{const W={client:r.client,queryKey:r.queryKey,pageParam:k,direction:K?"backward":"forward",meta:r.options.meta};return v(W),W})(),S=await R(X),{maxPages:F}=r.options,B=K?addToStart:addToEnd;return{pages:B(C.pages,S,F),pageParams:B(C.pageParams,k,F)}};if(c&&y.length){const C=c==="backward",k=C?getPreviousPageParam:getNextPageParam,K={pages:y,pageParams:u},Z=k(o,K);p=await O(K,Z,C)}else{const C=e??y.length;do{const k=d===0?u[0]??o.initialPageParam:getNextPageParam(o,p);if(d>0&&k==null)break;p=await O(p,k),d++}while(d<C)}return p};r.options.persister?r.fetchFn=()=>r.options.persister?.(x,{client:r.client,queryKey:r.queryKey,meta:r.options.meta,signal:r.signal},s):r.fetchFn=x}}}function getNextPageParam(e,{pages:r,pageParams:s}){const o=r.length-1;return r.length>0?e.getNextPageParam(r[o],r,s[o],s):void 0}function getPreviousPageParam(e,{pages:r,pageParams:s}){return r.length>0?e.getPreviousPageParam?.(r[0],r,s[0],s):void 0}var Mutation=class extends Removable{#e;#t;#r;#n;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||getDefaultState(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(r=>r!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(e){const r=()=>{this.#i({type:"continue"})},s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#n=createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(y,u)=>{this.#i({type:"failed",failureCount:y,error:u})},onPause:()=>{this.#i({type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const o=this.state.status==="pending",c=!this.#n.canStart();try{if(o)r();else{this.#i({type:"pending",variables:e,isPaused:c}),await this.#r.config.onMutate?.(e,this,s);const u=await this.options.onMutate?.(e,s);u!==this.state.context&&this.#i({type:"pending",context:u,variables:e,isPaused:c})}const y=await this.#n.start();return await this.#r.config.onSuccess?.(y,e,this.state.context,this,s),await this.options.onSuccess?.(y,e,this.state.context,s),await this.#r.config.onSettled?.(y,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(y,null,e,this.state.context,s),this.#i({type:"success",data:y}),y}catch(y){try{await this.#r.config.onError?.(y,e,this.state.context,this,s)}catch(u){Promise.reject(u)}try{await this.options.onError?.(y,e,this.state.context,s)}catch(u){Promise.reject(u)}try{await this.#r.config.onSettled?.(void 0,y,this.state.variables,this.state.context,this,s)}catch(u){Promise.reject(u)}try{await this.options.onSettled?.(void 0,y,e,this.state.context,s)}catch(u){Promise.reject(u)}throw this.#i({type:"error",error:y}),y}finally{this.#r.runNext(this)}}#i(e){const r=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),notifyManager.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var MutationCache=class extends Subscribable{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,r,s){const o=new Mutation({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(r),state:s});return this.add(o),o}add(e){this.#e.add(e);const r=scopeFor(e);if(typeof r=="string"){const s=this.#t.get(r);s?s.push(e):this.#t.set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const r=scopeFor(e);if(typeof r=="string"){const s=this.#t.get(r);if(s)if(s.length>1){const o=s.indexOf(e);o!==-1&&s.splice(o,1)}else s[0]===e&&this.#t.delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=scopeFor(e);if(typeof r=="string"){const o=this.#t.get(r)?.find(c=>c.state.status==="pending");return!o||o===e}else return!0}runNext(e){const r=scopeFor(e);return typeof r=="string"?this.#t.get(r)?.find(o=>o!==e&&o.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){notifyManager.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const r={exact:!0,...e};return this.getAll().find(s=>matchMutation(r,s))}findAll(e={}){return this.getAll().filter(r=>matchMutation(e,r))}notify(e){notifyManager.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return notifyManager.batch(()=>Promise.all(e.map(r=>r.continue().catch(noop$1))))}};function scopeFor(e){return e.options.scope?.id}var QueryCache=class extends Subscribable{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,r,s){const o=r.queryKey,c=r.queryHash??hashQueryKeyByOptions(o,r);let y=this.get(c);return y||(y=new Query({client:e,queryKey:o,queryHash:c,options:e.defaultQueryOptions(r),state:s,defaultOptions:e.getQueryDefaults(o)}),this.add(y)),y}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=this.#e.get(e.queryHash);r&&(e.destroy(),r===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const r={exact:!0,...e};return this.getAll().find(s=>matchQuery(r,s))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(s=>matchQuery(e,s)):r}notify(e){notifyManager.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},QueryClient=class{#e;#t;#r;#n;#i;#o;#a;#s;constructor(e={}){this.#e=e.queryCache||new QueryCache,this.#t=e.mutationCache||new MutationCache,this.#r=e.defaultOptions||{},this.#n=new Map,this.#i=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=focusManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=onlineManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const r=this.defaultQueryOptions({queryKey:e});return this.#e.get(r.queryHash)?.state.data}ensureQueryData(e){const r=this.defaultQueryOptions(e),s=this.#e.build(this,r),o=s.state.data;return o===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(resolveStaleTime(r.staleTime,s))&&this.prefetchQuery(r),Promise.resolve(o))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:r,state:s})=>{const o=s.data;return[r,o]})}setQueryData(e,r,s){const o=this.defaultQueryOptions({queryKey:e}),y=this.#e.get(o.queryHash)?.state.data,u=functionalUpdate(r,y);if(u!==void 0)return this.#e.build(this,o).setData(u,{...s,manual:!0})}setQueriesData(e,r,s){return notifyManager.batch(()=>this.#e.findAll(e).map(({queryKey:o})=>[o,this.setQueryData(o,r,s)]))}getQueryState(e){const r=this.defaultQueryOptions({queryKey:e});return this.#e.get(r.queryHash)?.state}removeQueries(e){const r=this.#e;notifyManager.batch(()=>{r.findAll(e).forEach(s=>{r.remove(s)})})}resetQueries(e,r){const s=this.#e;return notifyManager.batch(()=>(s.findAll(e).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...e},r)))}cancelQueries(e,r={}){const s={revert:!0,...r},o=notifyManager.batch(()=>this.#e.findAll(e).map(c=>c.cancel(s)));return Promise.all(o).then(noop$1).catch(noop$1)}invalidateQueries(e,r={}){return notifyManager.batch(()=>(this.#e.findAll(e).forEach(s=>{s.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},r)))}refetchQueries(e,r={}){const s={...r,cancelRefetch:r.cancelRefetch??!0},o=notifyManager.batch(()=>this.#e.findAll(e).filter(c=>!c.isDisabled()&&!c.isStatic()).map(c=>{let y=c.fetch(void 0,s);return s.throwOnError||(y=y.catch(noop$1)),c.state.fetchStatus==="paused"?Promise.resolve():y}));return Promise.all(o).then(noop$1)}fetchQuery(e){const r=this.defaultQueryOptions(e);r.retry===void 0&&(r.retry=!1);const s=this.#e.build(this,r);return s.isStaleByTime(resolveStaleTime(r.staleTime,s))?s.fetch(r):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(noop$1).catch(noop$1)}fetchInfiniteQuery(e){return e.behavior=infiniteQueryBehavior(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(noop$1).catch(noop$1)}ensureInfiniteQueryData(e){return e.behavior=infiniteQueryBehavior(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return onlineManager.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,r){this.#n.set(hashKey(e),{queryKey:e,defaultOptions:r})}getQueryDefaults(e){const r=[...this.#n.values()],s={};return r.forEach(o=>{partialMatchKey(e,o.queryKey)&&Object.assign(s,o.defaultOptions)}),s}setMutationDefaults(e,r){this.#i.set(hashKey(e),{mutationKey:e,defaultOptions:r})}getMutationDefaults(e){const r=[...this.#i.values()],s={};return r.forEach(o=>{partialMatchKey(e,o.mutationKey)&&Object.assign(s,o.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const r={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return r.queryHash||(r.queryHash=hashQueryKeyByOptions(r.queryKey,r)),r.refetchOnReconnect===void 0&&(r.refetchOnReconnect=r.networkMode!=="always"),r.throwOnError===void 0&&(r.throwOnError=!!r.suspense),!r.networkMode&&r.persister&&(r.networkMode="offlineFirst"),r.queryFn===skipToken&&(r.enabled=!1),r}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},QueryClientContext=reactExports.createContext(void 0),useQueryClient=e=>{const r=reactExports.useContext(QueryClientContext);if(!r)throw new Error("No QueryClient set, use QueryClientProvider to set one");return r},QueryClientProvider=({client:e,children:r})=>(reactExports.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:e,children:r})),IsRestoringContext=reactExports.createContext(!1),useIsRestoring=()=>reactExports.useContext(IsRestoringContext);IsRestoringContext.Provider;function createValue(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var QueryErrorResetBoundaryContext=reactExports.createContext(createValue()),useQueryErrorResetBoundary=()=>reactExports.useContext(QueryErrorResetBoundaryContext),ensurePreventErrorBoundaryRetry=(e,r,s)=>{const o=s?.state.error&&typeof e.throwOnError=="function"?shouldThrowError(e.throwOnError,[s.state.error,s]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||o)&&(r.isReset()||(e.retryOnMount=!1))},useClearResetErrorBoundary=e=>{reactExports.useEffect(()=>{e.clearReset()},[e])},getHasError=({result:e,errorResetBoundary:r,throwOnError:s,query:o,suspense:c})=>e.isError&&!r.isReset()&&!e.isFetching&&o&&(c&&e.data===void 0||shouldThrowError(s,[e.error,o])),ensureSuspenseTimers=e=>{if(e.suspense){const s=c=>c==="static"?c:Math.max(c??1e3,1e3),o=e.staleTime;e.staleTime=typeof o=="function"?(...c)=>s(o(...c)):s(o),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},willFetch=(e,r)=>e.isLoading&&e.isFetching&&!r,shouldSuspend=(e,r)=>e?.suspense&&r.isPending,fetchOptimistic=(e,r,s)=>r.fetchOptimistic(e).catch(()=>{s.clearReset()});function useBaseQuery(e,r,s){const o=useIsRestoring(),c=useQueryErrorResetBoundary(),y=useQueryClient(),u=y.defaultQueryOptions(e);y.getDefaultOptions().queries?._experimental_beforeQuery?.(u);const p=y.getQueryCache().get(u.queryHash);u._optimisticResults=o?"isRestoring":"optimistic",ensureSuspenseTimers(u),ensurePreventErrorBoundaryRetry(u,c,p),useClearResetErrorBoundary(c);const d=!y.getQueryCache().get(u.queryHash),[x]=reactExports.useState(()=>new r(y,u)),w=x.getOptimisticResult(u),v=!o&&e.subscribed!==!1;if(reactExports.useSyncExternalStore(reactExports.useCallback(R=>{const O=v?x.subscribe(notifyManager.batchCalls(R)):noop$1;return x.updateResult(),O},[x,v]),()=>x.getCurrentResult(),()=>x.getCurrentResult()),reactExports.useEffect(()=>{x.setOptions(u)},[u,x]),shouldSuspend(u,w))throw fetchOptimistic(u,x,c);if(getHasError({result:w,errorResetBoundary:c,throwOnError:u.throwOnError,query:p,suspense:u.suspense}))throw w.error;return y.getDefaultOptions().queries?._experimental_afterQuery?.(u,w),u.experimental_prefetchInRender&&!isServer&&willFetch(w,o)&&(d?fetchOptimistic(u,x,c):p?.promise)?.catch(noop$1).finally(()=>{x.updateResult()}),u.notifyOnChangeProps?w:x.trackResult(w)}function useQuery(e,r){return useBaseQuery(e,QueryObserver)}const tableTitleclassName="font-semibold border-b [&>th]:px-2",tableRowclassName="border-b border-slate-300 *:py-0.5 *:pl-2 pr-8 *:break-words";function OptimadeProviderInfo({queryUrl:e}){const{data:r,isLoading:s,isError:o,error:c}=useQuery({queryKey:["provider-info",e],queryFn:()=>getInfo({providerUrl:e}),enabled:!!e,staleTime:1/0}),y=r?.customProps??{},u=o?[c]:[],[p,d]=reactExports.useState(!1),x=reactExports.useRef(null),[w,v]=reactExports.useState("0px");return reactExports.useEffect(()=>{x.current&&v(p?`${x.current.scrollHeight}px`:"0px")},[p,y,u,s]),!e||u.length>0&&!s?null:jsxRuntimeExports.jsxs("div",{className:containerStyleDropdown,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>d(!p),className:"w-full flex justify-between p-3 bg-slate-100 hover:bg-slate-200 hover:cursor-pointer transition",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Custom attributes in selected database"}),jsxRuntimeExports.jsx("span",{children:p?"":""})]}),jsxRuntimeExports.jsx("div",{ref:x,style:{maxHeight:w},className:"transition-[max-height] duration-300 ease-in-out",children:jsxRuntimeExports.jsxs("div",{className:"pt-2 max-h-96 overflow-y-auto",children:[s&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-4",children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 border-2 border-t-2 border-gray-400 border-t-blue-500 rounded-full animate-spin mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"Loading provider info"})]}),y&&!s&&jsxRuntimeExports.jsxs("table",{className:"w-full table-fixed text-left border-collapse",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:tableTitleclassName,children:[jsxRuntimeExports.jsx("th",{children:"Field"}),jsxRuntimeExports.jsx("th",{children:"Description"}),jsxRuntimeExports.jsx("th",{children:"Unit"})]})}),jsxRuntimeExports.jsx("tbody",{children:Object.entries(y).map(([R,O])=>jsxRuntimeExports.jsxs("tr",{className:tableRowclassName,children:[jsxRuntimeExports.jsx("td",{children:R}),jsxRuntimeExports.jsx("td",{children:O.description||"-"}),jsxRuntimeExports.jsx("td",{children:O.unit||"-"})]},R))})]})]})})]})}const buttonClassName="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 hover:cursor-pointer disabled:bg-gray-200 disabled:opacity-50 disabled:cursor-default";function PaginationHandler({currentPage:e,totalPages:r,metaData:s,onPageChange:o}){if(!r||r<1)return null;const c=s?.data_returned||"N/A",y=e>1;let u=!1;return(s?.more_data_available===!0||e<r)&&(u=!0),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-slate-700 text-sm text-center w-full md:w-auto",children:`Filtered results: ${c} of ${s.data_available} | Showing page ${e} of ${r}`}),jsxRuntimeExports.jsx("button",{onClick:()=>o(1),disabled:e===1,className:buttonClassName,children:jsxRuntimeExports.jsx(FirstIcon,{})}),jsxRuntimeExports.jsx("button",{onClick:()=>o(e-1),disabled:!y,className:buttonClassName,children:jsxRuntimeExports.jsx(PreviousIcon,{})}),jsxRuntimeExports.jsx("button",{onClick:()=>o(e+1),disabled:!u,className:buttonClassName,children:jsxRuntimeExports.jsx(NextIcon,{})}),jsxRuntimeExports.jsx("button",{onClick:()=>o(r),disabled:e===r,className:buttonClassName,children:jsxRuntimeExports.jsx(LastIcon,{})})]})}const LayoutGroupContext=reactExports.createContext({});function useConstant(e){const r=reactExports.useRef(null);return r.current===null&&(r.current=e()),r.current}const isBrowser$1=typeof window<"u",useIsomorphicLayoutEffect=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(e,r){e.indexOf(r)===-1&&e.push(r)}function removeItem(e,r){const s=e.indexOf(r);s>-1&&e.splice(s,1)}const clamp=(e,r,s)=>s>r?r:s<e?e:s;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function isObject(e){return typeof e=="object"&&e!==null}const isZeroValueString=e=>/^0[^.\s]+$/u.test(e);function memo(e){let r;return()=>(r===void 0&&(r=e()),r)}const noop=e=>e,combineFunctions=(e,r)=>s=>r(e(s)),pipe=(...e)=>e.reduce(combineFunctions),progress=(e,r,s)=>{const o=r-e;return o===0?1:(s-e)/o};class SubscriptionManager{constructor(){this.subscriptions=[]}add(r){return addUniqueItem(this.subscriptions,r),()=>removeItem(this.subscriptions,r)}notify(r,s,o){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](r,s,o);else for(let y=0;y<c;y++){const u=this.subscriptions[y];u&&u(r,s,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=e=>e*1e3,millisecondsToSeconds=e=>e/1e3;function velocityPerSecond(e,r){return r?e*(1e3/r):0}const calcBezier=(e,r,s)=>(((1-3*s+3*r)*e+(3*s-6*r))*e+3*r)*e,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(e,r,s,o,c){let y,u,p=0;do u=r+(s-r)/2,y=calcBezier(u,o,c)-e,y>0?s=u:r=u;while(Math.abs(y)>subdivisionPrecision&&++p<subdivisionMaxIterations);return u}function cubicBezier(e,r,s,o){if(e===r&&s===o)return noop;const c=y=>binarySubdivide(y,0,1,e,s);return y=>y===0||y===1?y:calcBezier(c(y),r,o)}const mirrorEasing=e=>r=>r<=.5?e(2*r)/2:(2-e(2*(1-r)))/2,reverseEasing=e=>r=>1-e(1-r),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=e=>(e*=2)<1?.5*backIn(e):.5*(2-Math.pow(2,-10*(e-1))),circIn=e=>1-Math.sin(Math.acos(e)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=e=>Array.isArray(e)&&typeof e[0]!="number",isBezierDefinition=e=>Array.isArray(e)&&typeof e[0]=="number",easingLookup={linear:noop,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=e=>typeof e=="string",easingDefinitionToFunction=e=>{if(isBezierDefinition(e)){invariant(e.length===4);const[r,s,o,c]=e;return cubicBezier(r,s,o,c)}else if(isValidEasing(e))return easingLookup[e];return e},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(e,r){let s=new Set,o=new Set,c=!1,y=!1;const u=new WeakSet;let p={delta:0,timestamp:0,isProcessing:!1};function d(w){u.has(w)&&(x.schedule(w),e()),w(p)}const x={schedule:(w,v=!1,R=!1)=>{const C=R&&c?s:o;return v&&u.add(w),C.has(w)||C.add(w),w},cancel:w=>{o.delete(w),u.delete(w)},process:w=>{if(p=w,c){y=!0;return}c=!0,[s,o]=[o,s],s.forEach(d),s.clear(),c=!1,y&&(y=!1,x.process(w))}};return x}const maxElapsed=40;function createRenderBatcher(e,r){let s=!1,o=!0;const c={delta:0,timestamp:0,isProcessing:!1},y=()=>s=!0,u=stepsOrder.reduce((S,F)=>(S[F]=createRenderStep(y),S),{}),{setup:p,read:d,resolveKeyframes:x,preUpdate:w,update:v,preRender:R,render:O,postRender:C}=u,k=()=>{const S=MotionGlobalConfig.useManualTiming?c.timestamp:performance.now();s=!1,MotionGlobalConfig.useManualTiming||(c.delta=o?1e3/60:Math.max(Math.min(S-c.timestamp,maxElapsed),1)),c.timestamp=S,c.isProcessing=!0,p.process(c),d.process(c),x.process(c),w.process(c),v.process(c),R.process(c),O.process(c),C.process(c),c.isProcessing=!1,s&&r&&(o=!1,e(k))},K=()=>{s=!0,o=!0,c.isProcessing||e(k)};return{schedule:stepsOrder.reduce((S,F)=>{const B=u[F];return S[F]=(W,J=!1,N=!1)=>(s||K(),B.schedule(W,J,N)),S},{}),cancel:S=>{for(let F=0;F<stepsOrder.length;F++)u[stepsOrder[F]].cancel(S)},state:c,steps:u}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop,!0);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:e=>{now=e,queueMicrotask(clearTime)}},checkStringStartsWith=e=>r=>typeof r=="string"&&r.startsWith(e),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=e=>startsAsVariableToken(e)?singleCssVariableRegex.test(e.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function containsCSSVariable(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const number={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},alpha={...number,transform:e=>clamp(0,1,e)},scale={...number,default:1},sanitize=e=>Math.round(e*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(e){return e==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(e,r)=>s=>!!(typeof s=="string"&&singleColorRegex.test(s)&&s.startsWith(e)||r&&!isNullish(s)&&Object.prototype.hasOwnProperty.call(s,r)),splitColor=(e,r,s)=>o=>{if(typeof o!="string")return o;const[c,y,u,p]=o.match(floatRegex);return{[e]:parseFloat(c),[r]:parseFloat(y),[s]:parseFloat(u),alpha:p!==void 0?parseFloat(p):1}},clampRgbUnit=e=>clamp(0,255,e),rgbUnit={...number,transform:e=>Math.round(clampRgbUnit(e))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:e,green:r,blue:s,alpha:o=1})=>"rgba("+rgbUnit.transform(e)+", "+rgbUnit.transform(r)+", "+rgbUnit.transform(s)+", "+sanitize(alpha.transform(o))+")"};function parseHex(e){let r="",s="",o="",c="";return e.length>5?(r=e.substring(1,3),s=e.substring(3,5),o=e.substring(5,7),c=e.substring(7,9)):(r=e.substring(1,2),s=e.substring(2,3),o=e.substring(3,4),c=e.substring(4,5),r+=r,s+=s,o+=o,c+=c),{red:parseInt(r,16),green:parseInt(s,16),blue:parseInt(o,16),alpha:c?parseInt(c,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=e=>({test:r=>typeof r=="string"&&r.endsWith(e)&&r.split(" ").length===1,parse:parseFloat,transform:r=>`${r}${e}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:e=>percent.parse(e)/100,transform:e=>percent.transform(e*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:e,saturation:r,lightness:s,alpha:o=1})=>"hsla("+Math.round(e)+", "+percent.transform(sanitize(r))+", "+percent.transform(sanitize(s))+", "+sanitize(alpha.transform(o))+")"},color={test:e=>rgba.test(e)||hex.test(e)||hsla.test(e),parse:e=>rgba.test(e)?rgba.parse(e):hsla.test(e)?hsla.parse(e):hex.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?rgba.transform(e):hsla.transform(e),getAnimatableNone:e=>{const r=color.parse(e);return r.alpha=0,color.transform(r)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(e){return isNaN(e)&&typeof e=="string"&&(e.match(floatRegex)?.length||0)+(e.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(e){const r=e.toString(),s=[],o={color:[],number:[],var:[]},c=[];let y=0;const p=r.replace(complexRegex,d=>(color.test(d)?(o.color.push(y),c.push(COLOR_TOKEN),s.push(color.parse(d))):d.startsWith(VAR_FUNCTION_TOKEN)?(o.var.push(y),c.push(VAR_TOKEN),s.push(d)):(o.number.push(y),c.push(NUMBER_TOKEN),s.push(parseFloat(d))),++y,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:s,split:p,indexes:o,types:c}}function parseComplexValue(e){return analyseComplexValue(e).values}function createTransformer(e){const{split:r,types:s}=analyseComplexValue(e),o=r.length;return c=>{let y="";for(let u=0;u<o;u++)if(y+=r[u],c[u]!==void 0){const p=s[u];p===NUMBER_TOKEN?y+=sanitize(c[u]):p===COLOR_TOKEN?y+=color.transform(c[u]):y+=c[u]}return y}}const convertNumbersToZero=e=>typeof e=="number"?0:color.test(e)?color.getAnimatableNone(e):e;function getAnimatableNone$1(e){const r=parseComplexValue(e);return createTransformer(e)(r.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(e,r,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(r-e)*6*s:s<1/2?r:s<2/3?e+(r-e)*(2/3-s)*6:e}function hslaToRgba({hue:e,saturation:r,lightness:s,alpha:o}){e/=360,r/=100,s/=100;let c=0,y=0,u=0;if(!r)c=y=u=s;else{const p=s<.5?s*(1+r):s+r-s*r,d=2*s-p;c=hueToRgb(d,p,e+1/3),y=hueToRgb(d,p,e),u=hueToRgb(d,p,e-1/3)}return{red:Math.round(c*255),green:Math.round(y*255),blue:Math.round(u*255),alpha:o}}function mixImmediate(e,r){return s=>s>0?r:e}const mixNumber$1=(e,r,s)=>e+(r-e)*s,mixLinearColor=(e,r,s)=>{const o=e*e,c=s*(r*r-o)+o;return c<0?0:Math.sqrt(c)},colorTypes=[hex,rgba,hsla],getColorType=e=>colorTypes.find(r=>r.test(e));function asRGBA(e){const r=getColorType(e);if(!r)return!1;let s=r.parse(e);return r===hsla&&(s=hslaToRgba(s)),s}const mixColor=(e,r)=>{const s=asRGBA(e),o=asRGBA(r);if(!s||!o)return mixImmediate(e,r);const c={...s};return y=>(c.red=mixLinearColor(s.red,o.red,y),c.green=mixLinearColor(s.green,o.green,y),c.blue=mixLinearColor(s.blue,o.blue,y),c.alpha=mixNumber$1(s.alpha,o.alpha,y),rgba.transform(c))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(e,r){return invisibleValues.has(e)?s=>s<=0?e:r:s=>s>=1?r:e}function mixNumber(e,r){return s=>mixNumber$1(e,r,s)}function getMixer(e){return typeof e=="number"?mixNumber:typeof e=="string"?isCSSVariableToken(e)?mixImmediate:color.test(e)?mixColor:mixComplex:Array.isArray(e)?mixArray:typeof e=="object"?color.test(e)?mixColor:mixObject:mixImmediate}function mixArray(e,r){const s=[...e],o=s.length,c=e.map((y,u)=>getMixer(y)(y,r[u]));return y=>{for(let u=0;u<o;u++)s[u]=c[u](y);return s}}function mixObject(e,r){const s={...e,...r},o={};for(const c in s)e[c]!==void 0&&r[c]!==void 0&&(o[c]=getMixer(e[c])(e[c],r[c]));return c=>{for(const y in o)s[y]=o[y](c);return s}}function matchOrder(e,r){const s=[],o={color:0,var:0,number:0};for(let c=0;c<r.values.length;c++){const y=r.types[c],u=e.indexes[y][o[y]],p=e.values[u]??0;s[c]=p,o[y]++}return s}const mixComplex=(e,r)=>{const s=complex.createTransformer(r),o=analyseComplexValue(e),c=analyseComplexValue(r);return o.indexes.var.length===c.indexes.var.length&&o.indexes.color.length===c.indexes.color.length&&o.indexes.number.length>=c.indexes.number.length?invisibleValues.has(e)&&!c.values.length||invisibleValues.has(r)&&!o.values.length?mixVisibility(e,r):pipe(mixArray(matchOrder(o,c),c.values),s):mixImmediate(e,r)};function mix(e,r,s){return typeof e=="number"&&typeof r=="number"&&typeof s=="number"?mixNumber$1(e,r,s):getMixer(e)(e,r)}const frameloopDriver=e=>{const r=({timestamp:s})=>e(s);return{start:(s=!0)=>frame.update(r,s),stop:()=>cancelFrame(r),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(e,r,s=10)=>{let o="";const c=Math.max(Math.round(r/s),2);for(let y=0;y<c;y++)o+=Math.round(e(y/(c-1))*1e4)/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(e){let r=0;const s=50;let o=e.next(r);for(;!o.done&&r<maxGeneratorDuration;)r+=s,o=e.next(r);return r>=maxGeneratorDuration?1/0:r}function createGeneratorEasing(e,r=100,s){const o=s({...e,keyframes:[0,r]}),c=Math.min(calcGeneratorDuration(o),maxGeneratorDuration);return{type:"keyframes",ease:y=>o.next(c*y).value/r,duration:millisecondsToSeconds(c)}}const velocitySampleDuration=5;function calcGeneratorVelocity(e,r,s){const o=Math.max(r-velocitySampleDuration,0);return velocityPerSecond(s-e(o),r-o)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:e=springDefaults.duration,bounce:r=springDefaults.bounce,velocity:s=springDefaults.velocity,mass:o=springDefaults.mass}){let c,y,u=1-r;u=clamp(springDefaults.minDamping,springDefaults.maxDamping,u),e=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(e)),u<1?(c=x=>{const w=x*u,v=w*e,R=w-s,O=calcAngularFreq(x,u),C=Math.exp(-v);return safeMin-R/O*C},y=x=>{const v=x*u*e,R=v*s+s,O=Math.pow(u,2)*Math.pow(x,2)*e,C=Math.exp(-v),k=calcAngularFreq(Math.pow(x,2),u);return(-c(x)+safeMin>0?-1:1)*((R-O)*C)/k}):(c=x=>{const w=Math.exp(-x*e),v=(x-s)*e+1;return-safeMin+w*v},y=x=>{const w=Math.exp(-x*e),v=(s-x)*(e*e);return w*v});const p=5/e,d=approximateRoot(c,y,p);if(e=secondsToMilliseconds(e),isNaN(d))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:e};{const x=Math.pow(d,2)*o;return{stiffness:x,damping:u*2*Math.sqrt(o*x),duration:e}}}const rootIterations=12;function approximateRoot(e,r,s){let o=s;for(let c=1;c<rootIterations;c++)o=o-e(o)/r(o);return o}function calcAngularFreq(e,r){return e*Math.sqrt(1-r*r)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(e,r){return r.some(s=>e[s]!==void 0)}function getSpringOptions(e){let r={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...e};if(!isSpringType(e,physicsKeys)&&isSpringType(e,durationKeys))if(e.visualDuration){const s=e.visualDuration,o=2*Math.PI/(s*1.2),c=o*o,y=2*clamp(.05,1,1-(e.bounce||0))*Math.sqrt(c);r={...r,mass:springDefaults.mass,stiffness:c,damping:y}}else{const s=findSpring(e);r={...r,...s,mass:springDefaults.mass},r.isResolvedFromDuration=!0}return r}function spring(e=springDefaults.visualDuration,r=springDefaults.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:r}:e;let{restSpeed:o,restDelta:c}=s;const y=s.keyframes[0],u=s.keyframes[s.keyframes.length-1],p={done:!1,value:y},{stiffness:d,damping:x,mass:w,duration:v,velocity:R,isResolvedFromDuration:O}=getSpringOptions({...s,velocity:-millisecondsToSeconds(s.velocity||0)}),C=R||0,k=x/(2*Math.sqrt(d*w)),K=u-y,Z=millisecondsToSeconds(Math.sqrt(d/w)),X=Math.abs(K)<5;o||(o=X?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),c||(c=X?springDefaults.restDelta.granular:springDefaults.restDelta.default);let S;if(k<1){const B=calcAngularFreq(Z,k);S=W=>{const J=Math.exp(-k*Z*W);return u-J*((C+k*Z*K)/B*Math.sin(B*W)+K*Math.cos(B*W))}}else if(k===1)S=B=>u-Math.exp(-Z*B)*(K+(C+Z*K)*B);else{const B=Z*Math.sqrt(k*k-1);S=W=>{const J=Math.exp(-k*Z*W),N=Math.min(B*W,300);return u-J*((C+k*Z*K)*Math.sinh(N)+B*K*Math.cosh(N))/B}}const F={calculatedDuration:O&&v||null,next:B=>{const W=S(B);if(O)p.done=B>=v;else{let J=B===0?C:0;k<1&&(J=B===0?secondsToMilliseconds(C):calcGeneratorVelocity(S,B,W));const N=Math.abs(J)<=o,ee=Math.abs(u-W)<=c;p.done=N&&ee}return p.value=p.done?u:W,p},toString:()=>{const B=Math.min(calcGeneratorDuration(F),maxGeneratorDuration),W=generateLinearEasing(J=>F.next(B*J).value,B,30);return B+"ms "+W},toTransition:()=>{}};return F}spring.applyToOptions=e=>{const r=createGeneratorEasing(e,100,spring);return e.ease=r.ease,e.duration=secondsToMilliseconds(r.duration),e.type="keyframes",e};function inertia({keyframes:e,velocity:r=0,power:s=.8,timeConstant:o=325,bounceDamping:c=10,bounceStiffness:y=500,modifyTarget:u,min:p,max:d,restDelta:x=.5,restSpeed:w}){const v=e[0],R={done:!1,value:v},O=N=>p!==void 0&&N<p||d!==void 0&&N>d,C=N=>p===void 0?d:d===void 0||Math.abs(p-N)<Math.abs(d-N)?p:d;let k=s*r;const K=v+k,Z=u===void 0?K:u(K);Z!==K&&(k=Z-v);const X=N=>-k*Math.exp(-N/o),S=N=>Z+X(N),F=N=>{const ee=X(N),Se=S(N);R.done=Math.abs(ee)<=x,R.value=R.done?Z:Se};let B,W;const J=N=>{O(R.value)&&(B=N,W=spring({keyframes:[R.value,C(R.value)],velocity:calcGeneratorVelocity(S,N,R.value),damping:c,stiffness:y,restDelta:x,restSpeed:w}))};return J(0),{calculatedDuration:null,next:N=>{let ee=!1;return!W&&B===void 0&&(ee=!0,F(N),J(N)),B!==void 0&&N>=B?W.next(N-B):(!ee&&F(N),R)}}}function createMixers(e,r,s){const o=[],c=s||MotionGlobalConfig.mix||mix,y=e.length-1;for(let u=0;u<y;u++){let p=c(e[u],e[u+1]);if(r){const d=Array.isArray(r)?r[u]||noop:r;p=pipe(d,p)}o.push(p)}return o}function interpolate(e,r,{clamp:s=!0,ease:o,mixer:c}={}){const y=e.length;if(invariant(y===r.length),y===1)return()=>r[0];if(y===2&&r[0]===r[1])return()=>r[1];const u=e[0]===e[1];e[0]>e[y-1]&&(e=[...e].reverse(),r=[...r].reverse());const p=createMixers(r,o,c),d=p.length,x=w=>{if(u&&w<e[0])return r[0];let v=0;if(d>1)for(;v<e.length-2&&!(w<e[v+1]);v++);const R=progress(e[v],e[v+1],w);return p[v](R)};return s?w=>x(clamp(e[0],e[y-1],w)):x}function fillOffset(e,r){const s=e[e.length-1];for(let o=1;o<=r;o++){const c=progress(0,r,o);e.push(mixNumber$1(s,1,c))}}function defaultOffset(e){const r=[0];return fillOffset(r,e.length-1),r}function convertOffsetToTimes(e,r){return e.map(s=>s*r)}function defaultEasing(e,r){return e.map(()=>r||easeInOut).splice(0,e.length-1)}function keyframes({duration:e=300,keyframes:r,times:s,ease:o="easeInOut"}){const c=isEasingArray(o)?o.map(easingDefinitionToFunction):easingDefinitionToFunction(o),y={done:!1,value:r[0]},u=convertOffsetToTimes(s&&s.length===r.length?s:defaultOffset(r),e),p=interpolate(u,r,{ease:Array.isArray(c)?c:defaultEasing(r,c)});return{calculatedDuration:e,next:d=>(y.value=p(d),y.done=d>=e,y)}}const isNotNull$1=e=>e!==null;function getFinalKeyframe$1(e,{repeat:r,repeatType:s="loop"},o,c=1){const y=e.filter(isNotNull$1),p=c<0||r&&s!=="loop"&&r%2===1?0:y.length-1;return!p||o===void 0?y[p]:o}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(e){typeof e.type=="string"&&(e.type=transitionTypeMap[e.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(r=>{this.resolve=r})}notifyFinished(){this.resolve()}then(r,s){return this.finished.then(r,s)}}const percentToProgress=e=>e/100;class JSAnimation extends WithPromise{constructor(r){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=r,this.initAnimation(),this.play(),r.autoplay===!1&&this.pause()}initAnimation(){const{options:r}=this;replaceTransitionType(r);const{type:s=keyframes,repeat:o=0,repeatDelay:c=0,repeatType:y,velocity:u=0}=r;let{keyframes:p}=r;const d=s||keyframes;d!==keyframes&&typeof p[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(p[0],p[1])),p=[0,100]);const x=d({...r,keyframes:p});y==="mirror"&&(this.mirroredGenerator=d({...r,keyframes:[...p].reverse(),velocity:-u})),x.calculatedDuration===null&&(x.calculatedDuration=calcGeneratorDuration(x));const{calculatedDuration:w}=x;this.calculatedDuration=w,this.resolvedDuration=w+c,this.totalDuration=this.resolvedDuration*(o+1)-c,this.generator=x}updateTime(r){const s=Math.round(r-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(r,s=!1){const{generator:o,totalDuration:c,mixKeyframes:y,mirroredGenerator:u,resolvedDuration:p,calculatedDuration:d}=this;if(this.startTime===null)return o.next(0);const{delay:x=0,keyframes:w,repeat:v,repeatType:R,repeatDelay:O,type:C,onUpdate:k,finalKeyframe:K}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,r):this.speed<0&&(this.startTime=Math.min(r-c/this.speed,this.startTime)),s?this.currentTime=r:this.updateTime(r);const Z=this.currentTime-x*(this.playbackSpeed>=0?1:-1),X=this.playbackSpeed>=0?Z<0:Z>c;this.currentTime=Math.max(Z,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let S=this.currentTime,F=o;if(v){const N=Math.min(this.currentTime,c)/p;let ee=Math.floor(N),Se=N%1;!Se&&N>=1&&(Se=1),Se===1&&ee--,ee=Math.min(ee,v+1),ee%2&&(R==="reverse"?(Se=1-Se,O&&(Se-=O/p)):R==="mirror"&&(F=u)),S=clamp(0,1,Se)*p}const B=X?{done:!1,value:w[0]}:F.next(S);y&&(B.value=y(B.value));let{done:W}=B;!X&&d!==null&&(W=this.playbackSpeed>=0?this.currentTime>=c:this.currentTime<=0);const J=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&W);return J&&C!==inertia&&(B.value=getFinalKeyframe$1(w,this.options,K,this.speed)),k&&k(B.value),J&&this.finish(),B}then(r,s){return this.finished.then(r,s)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get iterationDuration(){const{delay:r=0}=this.options||{};return this.duration+millisecondsToSeconds(r)}get time(){return millisecondsToSeconds(this.currentTime)}set time(r){r=secondsToMilliseconds(r),this.currentTime=r,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=r:this.driver&&(this.startTime=this.driver.now()-r/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(r){this.updateTime(time.now());const s=this.playbackSpeed!==r;this.playbackSpeed=r,s&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:r=frameloopDriver,startTime:s}=this.options;this.driver||(this.driver=r(c=>this.tick(c))),this.options.onPlay?.();const o=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=o):this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime||(this.startTime=s??o),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(r){return this.startTime=0,this.tick(r,!0)}attachTimeline(r){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),r.observe(this)}}function fillWildcards(e){for(let r=1;r<e.length;r++)e[r]??(e[r]=e[r-1])}const radToDeg=e=>e*180/Math.PI,rotate=e=>{const r=radToDeg(Math.atan2(e[1],e[0]));return rebaseAngle(r)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate,rotateZ:rotate,skewX:e=>radToDeg(Math.atan(e[1])),skewY:e=>radToDeg(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},rebaseAngle=e=>(e=e%360,e<0&&(e+=360),e),rotateZ=rotate,scaleX=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),scaleY=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:e=>(scaleX(e)+scaleY(e))/2,rotateX:e=>rebaseAngle(radToDeg(Math.atan2(e[6],e[5]))),rotateY:e=>rebaseAngle(radToDeg(Math.atan2(-e[2],e[0]))),rotateZ,rotate:rotateZ,skewX:e=>radToDeg(Math.atan(e[4])),skewY:e=>radToDeg(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function defaultTransformValue(e){return e.includes("scale")?1:0}function parseValueFromTransform(e,r){if(!e||e==="none")return defaultTransformValue(r);const s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,c;if(s)o=matrix3dParsers,c=s;else{const p=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=matrix2dParsers,c=p}if(!c)return defaultTransformValue(r);const y=o[r],u=c[1].split(",").map(convertTransformToNumber);return typeof y=="function"?y(u):u[y]}const readTransformValue=(e,r)=>{const{transform:s="none"}=getComputedStyle(e);return parseValueFromTransform(s,r)};function convertTransformToNumber(e){return parseFloat(e.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=e=>e===number||e===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(e=>!transformKeys.has(e));function removeNonTranslationalTransform(e){const r=[];return nonTranslationalTransformKeys.forEach(s=>{const o=e.getValue(s);o!==void 0&&(r.push([s,o.get()]),o.set(s.startsWith("scale")?1:0))}),r}const positionalValues={width:({x:e},{paddingLeft:r="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(r)-parseFloat(s),height:({y:e},{paddingTop:r="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(r)-parseFloat(s),top:(e,{top:r})=>parseFloat(r),left:(e,{left:r})=>parseFloat(r),bottom:({y:e},{top:r})=>parseFloat(r)+(e.max-e.min),right:({x:e},{left:r})=>parseFloat(r)+(e.max-e.min),x:(e,{transform:r})=>parseValueFromTransform(r,"x"),y:(e,{transform:r})=>parseValueFromTransform(r,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const e=Array.from(toResolve).filter(o=>o.needsMeasurement),r=new Set(e.map(o=>o.element)),s=new Map;r.forEach(o=>{const c=removeNonTranslationalTransform(o);c.length&&(s.set(o,c),o.render())}),e.forEach(o=>o.measureInitialState()),r.forEach(o=>{o.render();const c=s.get(o);c&&c.forEach(([y,u])=>{o.getValue(y)?.set(u)})}),e.forEach(o=>o.measureEndState()),e.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(e=>e.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(r,s,o,c,y,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...r],this.onComplete=s,this.name=o,this.motionValue=c,this.element=y,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:r,name:s,element:o,motionValue:c}=this;if(r[0]===null){const y=c?.get(),u=r[r.length-1];if(y!==void 0)r[0]=y;else if(o&&s){const p=o.readValue(s,u);p!=null&&(r[0]=p)}r[0]===void 0&&(r[0]=u),c&&y===void 0&&c.set(r[0])}fillWildcards(r)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(r=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,r),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=e=>e.startsWith("--");function setStyle(e,r,s){isCSSVar(r)?e.style.setProperty(r,s):e.style[r]=s}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(e,r){const s=memo(e);return()=>supportsFlags[r]??s()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([e,r,s,o])=>`cubic-bezier(${e}, ${r}, ${s}, ${o})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(e,r){if(e)return typeof e=="function"?supportsLinearEasing()?generateLinearEasing(e,r):"ease-out":isBezierDefinition(e)?cubicBezierAsString(e):Array.isArray(e)?e.map(s=>mapEasingToNativeEasing(s,r)||supportedWaapiEasing.easeOut):supportedWaapiEasing[e]}function startWaapiAnimation(e,r,s,{delay:o=0,duration:c=300,repeat:y=0,repeatType:u="loop",ease:p="easeOut",times:d}={},x=void 0){const w={[r]:s};d&&(w.offset=d);const v=mapEasingToNativeEasing(p,c);Array.isArray(v)&&(w.easing=v);const R={delay:o,duration:c,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:y+1,direction:u==="reverse"?"alternate":"normal"};return x&&(R.pseudoElement=x),e.animate(w,R)}function isGenerator(e){return typeof e=="function"&&"applyToOptions"in e}function applyGeneratorOptions({type:e,...r}){return isGenerator(e)&&supportsLinearEasing()?e.applyToOptions(r):(r.duration??(r.duration=300),r.ease??(r.ease="easeOut"),r)}class NativeAnimation extends WithPromise{constructor(r){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!r)return;const{element:s,name:o,keyframes:c,pseudoElement:y,allowFlatten:u=!1,finalKeyframe:p,onComplete:d}=r;this.isPseudoElement=!!y,this.allowFlatten=u,this.options=r,invariant(typeof r.type!="string");const x=applyGeneratorOptions(r);this.animation=startWaapiAnimation(s,o,c,x,y),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!y){const w=getFinalKeyframe$1(c,this.options,p,this.speed);this.updateMotionValue?this.updateMotionValue(w):setStyle(s,o,w),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:r}=this;r==="idle"||r==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const r=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(r))}get iterationDuration(){const{delay:r=0}=this.options||{};return this.duration+millisecondsToSeconds(r)}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(r){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(r)}get speed(){return this.animation.playbackRate}set speed(r){r<0&&(this.finishedTime=null),this.animation.playbackRate=r}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(r){this.manualStartTime=this.animation.startTime=r}attachTimeline({timeline:r,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,r&&supportsScrollTimeline()?(this.animation.timeline=r,noop):s(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(e){return e in unsupportedEasingFunctions}function replaceStringEasing(e){typeof e.ease=="string"&&isUnsupportedEase(e.ease)&&(e.ease=unsupportedEasingFunctions[e.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(r){replaceStringEasing(r),replaceTransitionType(r),super(r),r.startTime!==void 0&&(this.startTime=r.startTime),this.options=r}updateMotionValue(r){const{motionValue:s,onUpdate:o,onComplete:c,element:y,...u}=this.options;if(!s)return;if(r!==void 0){s.set(r);return}const p=new JSAnimation({...u,autoplay:!1}),d=Math.max(sampleDelta,time.now()-this.startTime),x=clamp(0,sampleDelta,d-sampleDelta);s.setWithVelocity(p.sample(Math.max(0,d-x)).value,p.sample(d).value,x),p.stop()}}const isAnimatable=(e,r)=>r==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(complex.test(e)||e==="0")&&!e.startsWith("url("));function hasKeyframesChanged(e){const r=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==r)return!0}function canAnimate(e,r,s,o){const c=e[0];if(c===null)return!1;if(r==="display"||r==="visibility")return!0;const y=e[e.length-1],u=isAnimatable(c,r),p=isAnimatable(y,r);return!u||!p?!1:hasKeyframesChanged(e)||(s==="spring"||isGenerator(s))&&o}function makeAnimationInstant(e){e.duration=0,e.type="keyframes"}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(e){const{motionValue:r,name:s,repeatDelay:o,repeatType:c,damping:y,type:u}=e;if(!(r?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:x}=r.owner.getProps();return supportsWaapi()&&s&&acceleratedValues.has(s)&&(s!=="transform"||!x)&&!d&&!o&&c!=="mirror"&&y!==0&&u!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:r=!0,delay:s=0,type:o="keyframes",repeat:c=0,repeatDelay:y=0,repeatType:u="loop",keyframes:p,name:d,motionValue:x,element:w,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();const R={autoplay:r,delay:s,type:o,repeat:c,repeatDelay:y,repeatType:u,name:d,motionValue:x,element:w,...v},O=w?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new O(p,(C,k,K)=>this.onKeyframesResolved(C,k,R,!K),d,x,w),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(r,s,o,c){this.keyframeResolver=void 0;const{name:y,type:u,velocity:p,delay:d,isHandoff:x,onUpdate:w}=o;this.resolvedAt=time.now(),canAnimate(r,y,u,p)||((MotionGlobalConfig.instantAnimations||!d)&&w?.(getFinalKeyframe$1(r,o,s)),r[0]=r[r.length-1],makeAnimationInstant(o),o.repeat=0);const R={startTime:c?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...o,keyframes:r},O=!x&&supportsBrowserAnimation(R)?new NativeAnimationExtended({...R,element:R.motionValue.owner.current}):new JSAnimation(R);O.finished.then(()=>this.notifyFinished()).catch(noop),this.pendingTimeline&&(this.stopTimeline=O.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=O}get finished(){return this._animation?this.animation.finished:this._finished}then(r,s){return this.finished.finally(r).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(r){this.animation.time=r}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(r){this.animation.speed=r}get startTime(){return this.animation.startTime}attachTimeline(r){return this._animation?this.stopTimeline=this.animation.attachTimeline(r):this.pendingTimeline=r,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(e){const r=splitCSSVariableRegex.exec(e);if(!r)return[,];const[,s,o,c]=r;return[`--${s??o}`,c]}function getVariableValue(e,r,s=1){const[o,c]=parseCSSVariable(e);if(!o)return;const y=window.getComputedStyle(r).getPropertyValue(o);if(y){const u=y.trim();return isNumericalString(u)?parseFloat(u):u}return isCSSVariableToken(c)?getVariableValue(c,r,s+1):c}function getValueTransition(e,r){return e?.[r]??e?.default??e}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(e,{keyframes:r})=>r.length>2?keyframesTransition:transformProps.has(e)?e.startsWith("scale")?criticallyDampedSpring(r[1]):underDampedSpring:ease;function isTransitionDefined({when:e,delay:r,delayChildren:s,staggerChildren:o,staggerDirection:c,repeat:y,repeatType:u,repeatDelay:p,from:d,elapsed:x,...w}){return!!Object.keys(w).length}const isNotNull=e=>e!==null;function getFinalKeyframe(e,{repeat:r,repeatType:s="loop"},o){const c=e.filter(isNotNull),y=r&&s!=="loop"&&r%2===1?0:c.length-1;return c[y]}function calcChildStagger(e,r,s,o=0,c=1){const y=Array.from(e).sort((x,w)=>x.sortNodePosition(w)).indexOf(r),u=e.size,p=(u-1)*o;return typeof s=="function"?s(y,u):c===1?y*o:p-y*o}const animateMotionValue=(e,r,s,o={},c,y)=>u=>{const p=getValueTransition(o,e)||{},d=p.delay||o.delay||0;let{elapsed:x=0}=o;x=x-secondsToMilliseconds(d);const w={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:r.getVelocity(),...p,delay:-x,onUpdate:R=>{r.set(R),p.onUpdate&&p.onUpdate(R)},onComplete:()=>{u(),p.onComplete&&p.onComplete()},name:e,motionValue:r,element:y?void 0:c};isTransitionDefined(p)||Object.assign(w,getDefaultTransition(e,w)),w.duration&&(w.duration=secondsToMilliseconds(w.duration)),w.repeatDelay&&(w.repeatDelay=secondsToMilliseconds(w.repeatDelay)),w.from!==void 0&&(w.keyframes[0]=w.from);let v=!1;if((w.type===!1||w.duration===0&&!w.repeatDelay)&&(makeAnimationInstant(w),w.delay===0&&(v=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(v=!0,makeAnimationInstant(w),w.delay=0),w.allowFlatten=!p.type&&!p.ease,v&&!y&&r.get()!==void 0){const R=getFinalKeyframe(w.keyframes,p);if(R!==void 0){frame.update(()=>{w.onUpdate(R),w.onComplete()});return}}return p.isSync?new JSAnimation(w):new AsyncMotionValueAnimation(w)},positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),MAX_VELOCITY_DELTA=30,isFloat=e=>!isNaN(parseFloat(e));class MotionValue{constructor(r,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=o=>{const c=time.now();if(this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const y of this.dependents)y.dirty()},this.hasAnimated=!1,this.setCurrent(r),this.owner=s.owner}setCurrent(r){this.current=r,this.updatedAt=time.now(),this.canTrackVelocity===null&&r!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(r=this.current){this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt}onChange(r){return this.on("change",r)}on(r,s){this.events[r]||(this.events[r]=new SubscriptionManager);const o=this.events[r].add(s);return r==="change"?()=>{o(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const r in this.events)this.events[r].clear()}attach(r,s){this.passiveEffect=r,this.stopPassiveEffect=s}set(r){this.passiveEffect?this.passiveEffect(r,this.updateAndNotify):this.updateAndNotify(r)}setWithVelocity(r,s,o){this.set(s),this.prev=void 0,this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt-o}jump(r,s=!0){this.updateAndNotify(r),this.prev=r,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(r){this.dependents||(this.dependents=new Set),this.dependents.add(r)}removeDependent(r){this.dependents&&this.dependents.delete(r)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const r=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||r-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(r){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=r(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(e,r){return new MotionValue(e,r)}function getValueState(e){const r=[{},{}];return e?.values.forEach((s,o)=>{r[0][o]=s.get(),r[1][o]=s.getVelocity()}),r}function resolveVariantFromProps(e,r,s,o){if(typeof r=="function"){const[c,y]=getValueState(o);r=r(s!==void 0?s:e.custom,c,y)}if(typeof r=="string"&&(r=e.variants&&e.variants[r]),typeof r=="function"){const[c,y]=getValueState(o);r=r(s!==void 0?s:e.custom,c,y)}return r}function resolveVariant(e,r,s){const o=e.getProps();return resolveVariantFromProps(o,r,s!==void 0?s:o.custom,e)}const isKeyframesTarget=e=>Array.isArray(e);function setMotionValue(e,r,s){e.hasValue(r)?e.getValue(r).set(s):e.addValue(r,motionValue(s))}function resolveFinalValueInKeyframes(e){return isKeyframesTarget(e)?e[e.length-1]||0:e}function setTarget(e,r){const s=resolveVariant(e,r);let{transitionEnd:o={},transition:c={},...y}=s||{};y={...y,...o};for(const u in y){const p=resolveFinalValueInKeyframes(y[u]);setMotionValue(e,u,p)}}const isMotionValue=e=>!!(e&&e.getVelocity);function isWillChangeMotionValue(e){return!!(isMotionValue(e)&&e.add)}function addValueToWillChange(e,r){const s=e.getValue("willChange");if(isWillChangeMotionValue(s))return s.add(r);if(!s&&MotionGlobalConfig.WillChange){const o=new MotionGlobalConfig.WillChange("auto");e.addValue("willChange",o),o.add(r)}}function camelToDash(e){return e.replace(/([A-Z])/g,r=>`-${r.toLowerCase()}`)}const optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(e){return e.props[optimizedAppearDataAttribute]}function shouldBlockAnimation({protectedKeys:e,needsAnimating:r},s){const o=e.hasOwnProperty(s)&&r[s]!==!0;return r[s]=!1,o}function animateTarget(e,r,{delay:s=0,transitionOverride:o,type:c}={}){let{transition:y=e.getDefaultTransition(),transitionEnd:u,...p}=r;o&&(y=o);const d=[],x=c&&e.animationState&&e.animationState.getState()[c];for(const w in p){const v=e.getValue(w,e.latestValues[w]??null),R=p[w];if(R===void 0||x&&shouldBlockAnimation(x,w))continue;const O={delay:s,...getValueTransition(y||{},w)},C=v.get();if(C!==void 0&&!v.isAnimating&&!Array.isArray(R)&&R===C&&!O.velocity)continue;let k=!1;if(window.MotionHandoffAnimation){const Z=getOptimisedAppearId(e);if(Z){const X=window.MotionHandoffAnimation(Z,w,frame);X!==null&&(O.startTime=X,k=!0)}}addValueToWillChange(e,w),v.start(animateMotionValue(w,v,R,e.shouldReduceMotion&&positionalKeys.has(w)?{type:!1}:O,e,k));const K=v.animation;K&&d.push(K)}return u&&Promise.all(d).then(()=>{frame.update(()=>{u&&setTarget(e,u)})}),d}function animateVariant(e,r,s={}){const o=resolveVariant(e,r,s.type==="exit"?e.presenceContext?.custom:void 0);let{transition:c=e.getDefaultTransition()||{}}=o||{};s.transitionOverride&&(c=s.transitionOverride);const y=o?()=>Promise.all(animateTarget(e,o,s)):()=>Promise.resolve(),u=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:x=0,staggerChildren:w,staggerDirection:v}=c;return animateChildren(e,r,d,x,w,v,s)}:()=>Promise.resolve(),{when:p}=c;if(p){const[d,x]=p==="beforeChildren"?[y,u]:[u,y];return d().then(()=>x())}else return Promise.all([y(),u(s.delay)])}function animateChildren(e,r,s=0,o=0,c=0,y=1,u){const p=[];for(const d of e.variantChildren)d.notify("AnimationStart",r),p.push(animateVariant(d,r,{...u,delay:s+(typeof o=="function"?0:o)+calcChildStagger(e.variantChildren,d,o,c,y)}).then(()=>d.notify("AnimationComplete",r)));return Promise.all(p)}function animateVisualElement(e,r,s={}){e.notify("AnimationStart",r);let o;if(Array.isArray(r)){const c=r.map(y=>animateVariant(e,y,s));o=Promise.all(c)}else if(typeof r=="string")o=animateVariant(e,r,s);else{const c=typeof r=="function"?resolveVariant(e,r,s.custom):r;o=Promise.all(animateTarget(e,c,s))}return o.then(()=>{e.notify("AnimationComplete",r)})}const auto={test:e=>e==="auto",parse:e=>e},testValueType=e=>r=>r.test(e),dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=e=>dimensionValueTypes.find(testValueType(e));function isNone(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||isZeroValueString(e):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(e){const[r,s]=e.slice(0,-1).split("(");if(r==="drop-shadow")return e;const[o]=s.match(floatRegex)||[];if(!o)return e;const c=s.replace(o,"");let y=maxDefaults.has(r)?1:0;return o!==s&&(y*=100),r+"("+y+c+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:e=>{const r=e.match(functionRegex);return r?r.map(applyDefaultFilter).join(" "):e}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,inset:px,insetBlock:px,insetBlockStart:px,insetBlockEnd:px,insetInline:px,insetInlineStart:px,insetInlineEnd:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,paddingBlock:px,paddingBlockStart:px,paddingBlockEnd:px,paddingInline:px,paddingInlineStart:px,paddingInlineEnd:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,marginBlock:px,marginBlockStart:px,marginBlockEnd:px,marginInline:px,marginInlineStart:px,marginInlineEnd:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=e=>defaultValueTypes[e];function getAnimatableNone(e,r){let s=getDefaultValueType(e);return s!==filter&&(s=complex),s.getAnimatableNone?s.getAnimatableNone(r):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(e,r,s){let o=0,c;for(;o<e.length&&!c;){const y=e[o];typeof y=="string"&&!invalidTemplates.has(y)&&analyseComplexValue(y).values.length&&(c=e[o]),o++}if(c&&s)for(const y of r)e[y]=getAnimatableNone(s,c)}class DOMKeyframesResolver extends KeyframeResolver{constructor(r,s,o,c,y){super(r,s,o,c,y,!0)}readKeyframes(){const{unresolvedKeyframes:r,element:s,name:o}=this;if(!s||!s.current)return;super.readKeyframes();for(let w=0;w<r.length;w++){let v=r[w];if(typeof v=="string"&&(v=v.trim(),isCSSVariableToken(v))){const R=getVariableValue(v,s.current);R!==void 0&&(r[w]=R),w===r.length-1&&(this.finalKeyframe=v)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(o)||r.length!==2)return;const[c,y]=r,u=findDimensionValueType(c),p=findDimensionValueType(y),d=containsCSSVariable(c),x=containsCSSVariable(y);if(d!==x&&positionalValues[o]){this.needsMeasurement=!0;return}if(u!==p)if(isNumOrPxType(u)&&isNumOrPxType(p))for(let w=0;w<r.length;w++){const v=r[w];typeof v=="string"&&(r[w]=parseFloat(v))}else positionalValues[o]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:r,name:s}=this,o=[];for(let c=0;c<r.length;c++)(r[c]===null||isNone(r[c]))&&o.push(c);o.length&&makeNoneKeyframesAnimatable(r,o,s)}measureInitialState(){const{element:r,unresolvedKeyframes:s,name:o}=this;if(!r||!r.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[o](r.measureViewportBox(),window.getComputedStyle(r.current)),s[0]=this.measuredOrigin;const c=s[s.length-1];c!==void 0&&r.getValue(o,c).jump(c,!1)}measureEndState(){const{element:r,name:s,unresolvedKeyframes:o}=this;if(!r||!r.current)return;const c=r.getValue(s);c&&c.jump(this.measuredOrigin,!1);const y=o.length-1,u=o[y];o[y]=positionalValues[s](r.measureViewportBox(),window.getComputedStyle(r.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([p,d])=>{r.getValue(p).set(d)}),this.resolveNoneKeyframes()}}function resolveElements(e,r,s){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let o=document;const c=s?.[e]??o.querySelectorAll(e);return c?Array.from(c):[]}return Array.from(e)}const getValueAsType=(e,r)=>r&&typeof e=="number"?r.transform(e):e;function isHTMLElement(e){return isObject(e)&&"offsetHeight"in e}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(e){return e==="x"||e==="y"?isDragging[e]?null:(isDragging[e]=!0,()=>{isDragging[e]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(e,r){const s=resolveElements(e),o=new AbortController,c={passive:!0,...r,signal:o.signal};return[s,c,()=>o.abort()]}function isValidHover(e){return!(e.pointerType==="touch"||isDragActive())}function hover(e,r,s={}){const[o,c,y]=setupGesture(e,s),u=p=>{if(!isValidHover(p))return;const{target:d}=p,x=r(d,p);if(typeof x!="function"||!d)return;const w=v=>{isValidHover(v)&&(x(v),d.removeEventListener("pointerleave",w))};d.addEventListener("pointerleave",w,c)};return o.forEach(p=>{p.addEventListener("pointerenter",u,c)}),y}const isNodeOrChild=(e,r)=>r?e===r?!0:isNodeOrChild(e,r.parentElement):!1,isPrimaryPointer=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,interactiveElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(e){return interactiveElements.has(e.tagName)||e.isContentEditable===!0}const isPressing=new WeakSet;function filterEvents(e){return r=>{r.key==="Enter"&&e(r)}}function firePointerEvent(e,r){e.dispatchEvent(new PointerEvent("pointer"+r,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(e,r)=>{const s=e.currentTarget;if(!s)return;const o=filterEvents(()=>{if(isPressing.has(s))return;firePointerEvent(s,"down");const c=filterEvents(()=>{firePointerEvent(s,"up")}),y=()=>firePointerEvent(s,"cancel");s.addEventListener("keyup",c,r),s.addEventListener("blur",y,r)});s.addEventListener("keydown",o,r),s.addEventListener("blur",()=>s.removeEventListener("keydown",o),r)};function isValidPressEvent(e){return isPrimaryPointer(e)&&!isDragActive()}function press(e,r,s={}){const[o,c,y]=setupGesture(e,s),u=p=>{const d=p.currentTarget;if(!isValidPressEvent(p))return;isPressing.add(d);const x=r(d,p),w=(O,C)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",R),isPressing.has(d)&&isPressing.delete(d),isValidPressEvent(O)&&typeof x=="function"&&x(O,{success:C})},v=O=>{w(O,d===window||d===document||s.useGlobalTarget||isNodeOrChild(d,O.target))},R=O=>{w(O,!1)};window.addEventListener("pointerup",v,c),window.addEventListener("pointercancel",R,c)};return o.forEach(p=>{(s.useGlobalTarget?window:p).addEventListener("pointerdown",u,c),isHTMLElement(p)&&(p.addEventListener("focus",x=>enableKeyboardPress(x,c)),!isElementKeyboardAccessible(p)&&!p.hasAttribute("tabindex")&&(p.tabIndex=0))}),y}function isSVGElement(e){return isObject(e)&&"ownerSVGElement"in e}function isSVGSVGElement(e){return isSVGElement(e)&&e.tagName==="svg"}const valueTypes=[...dimensionValueTypes,color,complex],findValueType=e=>valueTypes.find(testValueType(e)),createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1},isBrowser=typeof window<"u";function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),r=()=>prefersReducedMotion.current=e.matches;e.addEventListener("change",r),r()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function isAnimationControls(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function isVariantLabel(e){return typeof e=="string"||Array.isArray(e)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(e){return isAnimationControls(e.animate)||variantProps.some(r=>isVariantLabel(e[r]))}function isVariantNode(e){return!!(isControllingVariants(e)||e.variants)}function updateMotionValuesFromProps(e,r,s){for(const o in r){const c=r[o],y=s[o];if(isMotionValue(c))e.addValue(o,c);else if(isMotionValue(y))e.addValue(o,motionValue(c,{owner:e}));else if(y!==c)if(e.hasValue(o)){const u=e.getValue(o);u.liveStyle===!0?u.jump(c):u.hasAnimated||u.set(c)}else{const u=e.getStaticValue(o);e.addValue(o,motionValue(u!==void 0?u:c,{owner:e}))}}for(const o in s)r[o]===void 0&&e.removeValue(o);return r}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let featureDefinitions={};function setFeatureDefinitions(e){featureDefinitions=e}function getFeatureDefinitions(){return featureDefinitions}class VisualElement{scrapeMotionValuesFromProps(r,s,o){return{}}constructor({parent:r,props:s,presenceContext:o,reducedMotionConfig:c,blockInitialAnimation:y,visualState:u},p={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const R=time.now();this.renderScheduledAt<R&&(this.renderScheduledAt=R,frame.render(this.render,!1,!0))};const{latestValues:d,renderState:x}=u;this.latestValues=d,this.baseTarget={...d},this.initialValues=s.initial?{...d}:{},this.renderState=x,this.parent=r,this.props=s,this.presenceContext=o,this.depth=r?r.depth+1:0,this.reducedMotionConfig=c,this.options=p,this.blockInitialAnimation=!!y,this.isControllingVariants=isControllingVariants(s),this.isVariantNode=isVariantNode(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(r&&r.current);const{willChange:w,...v}=this.scrapeMotionValuesFromProps(s,{},this);for(const R in v){const O=v[R];d[R]!==void 0&&isMotionValue(O)&&O.set(d[R])}}mount(r){this.current=r,visualElementStore.set(r,this),this.projection&&!this.projection.instance&&this.projection.mount(r),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=prefersReducedMotion.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const s=this.features[r];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(r){this.children.add(r),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(r)}removeChild(r){this.children.delete(r),this.enteringChildren&&this.enteringChildren.delete(r)}bindToMotionValue(r,s){this.valueSubscriptions.has(r)&&this.valueSubscriptions.get(r)();const o=transformProps.has(r);o&&this.onBindTransform&&this.onBindTransform();const c=s.on("change",u=>{this.latestValues[r]=u,this.props.onUpdate&&frame.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let y;typeof window<"u"&&window.MotionCheckAppearSync&&(y=window.MotionCheckAppearSync(this,r,s)),this.valueSubscriptions.set(r,()=>{c(),y&&y(),s.owner&&s.stop()})}sortNodePosition(r){return!this.current||!this.sortInstanceNodePosition||this.type!==r.type?0:this.sortInstanceNodePosition(this.current,r.current)}updateFeatures(){let r="animation";for(r in featureDefinitions){const s=featureDefinitions[r];if(!s)continue;const{isEnabled:o,Feature:c}=s;if(!this.features[r]&&c&&o(this.props)&&(this.features[r]=new c(this)),this.features[r]){const y=this.features[r];y.isMounted?y.update():(y.mount(),y.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(r){return this.latestValues[r]}setStaticValue(r,s){this.latestValues[r]=s}update(r,s){(r.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=r,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let o=0;o<propEventHandlers.length;o++){const c=propEventHandlers[o];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const y="on"+c,u=r[y];u&&(this.propEventSubscriptions[c]=this.on(c,u))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(r,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(r){return this.props.variants?this.props.variants[r]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(r){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(r),()=>s.variantChildren.delete(r)}addValue(r,s){const o=this.values.get(r);s!==o&&(o&&this.removeValue(r),this.bindToMotionValue(r,s),this.values.set(r,s),this.latestValues[r]=s.get())}removeValue(r){this.values.delete(r);const s=this.valueSubscriptions.get(r);s&&(s(),this.valueSubscriptions.delete(r)),delete this.latestValues[r],this.removeValueFromRenderState(r,this.renderState)}hasValue(r){return this.values.has(r)}getValue(r,s){if(this.props.values&&this.props.values[r])return this.props.values[r];let o=this.values.get(r);return o===void 0&&s!==void 0&&(o=motionValue(s===null?void 0:s,{owner:this}),this.addValue(r,o)),o}readValue(r,s){let o=this.latestValues[r]!==void 0||!this.current?this.latestValues[r]:this.getBaseTargetFromProps(this.props,r)??this.readValueFromInstance(this.current,r,this.options);return o!=null&&(typeof o=="string"&&(isNumericalString(o)||isZeroValueString(o))?o=parseFloat(o):!findValueType(o)&&complex.test(s)&&(o=getAnimatableNone(r,s)),this.setBaseTarget(r,isMotionValue(o)?o.get():o)),isMotionValue(o)?o.get():o}setBaseTarget(r,s){this.baseTarget[r]=s}getBaseTarget(r){const{initial:s}=this.props;let o;if(typeof s=="string"||typeof s=="object"){const y=resolveVariantFromProps(this.props,s,this.presenceContext?.custom);y&&(o=y[r])}if(s&&o!==void 0)return o;const c=this.getBaseTargetFromProps(this.props,r);return c!==void 0&&!isMotionValue(c)?c:this.initialValues[r]!==void 0&&o===void 0?void 0:this.baseTarget[r]}on(r,s){return this.events[r]||(this.events[r]=new SubscriptionManager),this.events[r].add(s)}notify(r,...s){this.events[r]&&this.events[r].notify(...s)}scheduleRenderMicrotask(){microtask.render(this.render)}}class Feature{constructor(r){this.isMounted=!1,this.node=r}update(){}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(r,s){return r.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(r,s){const o=r.style;return o?o[s]:void 0}removeValueFromRenderState(r,{vars:s,style:o}){delete s[r],delete o[r]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:r}=this.props;isMotionValue(r)&&(this.childSubscription=r.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function convertBoundingBoxToBox({top:e,left:r,right:s,bottom:o}){return{x:{min:r,max:s},y:{min:e,max:o}}}function convertBoxToBoundingBox({x:e,y:r}){return{top:r.min,right:e.max,bottom:r.max,left:e.min}}function transformBoxPoints(e,r){if(!r)return e;const s=r({x:e.left,y:e.top}),o=r({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:o.y,right:o.x}}function isIdentityScale(e){return e===void 0||e===1}function hasScale({scale:e,scaleX:r,scaleY:s}){return!isIdentityScale(e)||!isIdentityScale(r)||!isIdentityScale(s)}function hasTransform(e){return hasScale(e)||has2DTranslate(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function has2DTranslate(e){return is2DTranslate(e.x)||is2DTranslate(e.y)}function is2DTranslate(e){return e&&e!=="0%"}function scalePoint(e,r,s){const o=e-s,c=r*o;return s+c}function applyPointDelta(e,r,s,o,c){return c!==void 0&&(e=scalePoint(e,c,o)),scalePoint(e,s,o)+r}function applyAxisDelta(e,r=0,s=1,o,c){e.min=applyPointDelta(e.min,r,s,o,c),e.max=applyPointDelta(e.max,r,s,o,c)}function applyBoxDelta(e,{x:r,y:s}){applyAxisDelta(e.x,r.translate,r.scale,r.originPoint),applyAxisDelta(e.y,s.translate,s.scale,s.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(e,r,s,o=!1){const c=s.length;if(!c)return;r.x=r.y=1;let y,u;for(let p=0;p<c;p++){y=s[p],u=y.projectionDelta;const{visualElement:d}=y.options;d&&d.props.style&&d.props.style.display==="contents"||(o&&y.options.layoutScroll&&y.scroll&&y!==y.root&&transformBox(e,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),u&&(r.x*=u.x.scale,r.y*=u.y.scale,applyBoxDelta(e,u)),o&&hasTransform(y.latestValues)&&transformBox(e,y.latestValues))}r.x<TREE_SCALE_SNAP_MAX&&r.x>TREE_SCALE_SNAP_MIN&&(r.x=1),r.y<TREE_SCALE_SNAP_MAX&&r.y>TREE_SCALE_SNAP_MIN&&(r.y=1)}function translateAxis(e,r){e.min=e.min+r,e.max=e.max+r}function transformAxis(e,r,s,o,c=.5){const y=mixNumber$1(e.min,e.max,c);applyAxisDelta(e,r,s,y,o)}function transformBox(e,r){transformAxis(e.x,r.x,r.scaleX,r.scale,r.originX),transformAxis(e.y,r.y,r.scaleY,r.scale,r.originY)}function measureViewportBox(e,r){return convertBoundingBoxToBox(transformBoxPoints(e.getBoundingClientRect(),r))}function measurePageBox(e,r,s){const o=measureViewportBox(e,s),{scroll:c}=r;return c&&(translateAxis(o.x,c.offset.x),translateAxis(o.y,c.offset.y)),o}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(e,r,s){let o="",c=!0;for(let y=0;y<numTransforms;y++){const u=transformPropOrder[y],p=e[u];if(p===void 0)continue;let d=!0;if(typeof p=="number"?d=p===(u.startsWith("scale")?1:0):d=parseFloat(p)===0,!d||s){const x=getValueAsType(p,numberValueTypes[u]);if(!d){c=!1;const w=translateAlias[u]||u;o+=`${w}(${x}) `}s&&(r[u]=x)}}return o=o.trim(),s?o=s(r,c?"":o):c&&(o="none"),o}function buildHTMLStyles(e,r,s){const{style:o,vars:c,transformOrigin:y}=e;let u=!1,p=!1;for(const d in r){const x=r[d];if(transformProps.has(d)){u=!0;continue}else if(isCSSVariableName(d)){c[d]=x;continue}else{const w=getValueAsType(x,numberValueTypes[d]);d.startsWith("origin")?(p=!0,y[d]=w):o[d]=w}}if(r.transform||(u||s?o.transform=buildTransform(r,e.transform,s):o.transform&&(o.transform="none")),p){const{originX:d="50%",originY:x="50%",originZ:w=0}=y;o.transformOrigin=`${d} ${x} ${w}`}}function renderHTML(e,{style:r,vars:s},o,c){const y=e.style;let u;for(u in r)y[u]=r[u];c?.applyProjectionStyles(y,o);for(u in s)y.setProperty(u,s[u])}function pixelsToPercent(e,r){return r.max===r.min?0:e/(r.max-r.min)*100}const correctBorderRadius={correct:(e,r)=>{if(!r.target)return e;if(typeof e=="string")if(px.test(e))e=parseFloat(e);else return e;const s=pixelsToPercent(e,r.target.x),o=pixelsToPercent(e,r.target.y);return`${s}% ${o}%`}},correctBoxShadow={correct:(e,{treeScale:r,projectionDelta:s})=>{const o=e,c=complex.parse(e);if(c.length>5)return o;const y=complex.createTransformer(e),u=typeof c[0]!="number"?1:0,p=s.x.scale*r.x,d=s.y.scale*r.y;c[0+u]/=p,c[1+u]/=d;const x=mixNumber$1(p,d,.5);return typeof c[2+u]=="number"&&(c[2+u]/=x),typeof c[3+u]=="number"&&(c[3+u]/=x),y(c)}},scaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function isForcedMotionValue(e,{layout:r,layoutId:s}){return transformProps.has(e)||e.startsWith("origin")||(r||s!==void 0)&&(!!scaleCorrectors[e]||e==="opacity")}function scrapeMotionValuesFromProps$1(e,r,s){const o=e.style,c=r?.style,y={};if(!o)return y;for(const u in o)(isMotionValue(o[u])||c&&isMotionValue(c[u])||isForcedMotionValue(u,e)||s?.getValue(u)?.liveStyle!==void 0)&&(y[u]=o[u]);return y}function getComputedStyle$1(e){return window.getComputedStyle(e)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(r,s){if(transformProps.has(s))return this.projection?.isProjecting?defaultTransformValue(s):readTransformValue(r,s);{const o=getComputedStyle$1(r),c=(isCSSVariableName(s)?o.getPropertyValue(s):o[s])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(r,{transformPagePoint:s}){return measureViewportBox(r,s)}build(r,s,o){buildHTMLStyles(r,s,o.transformTemplate)}scrapeMotionValuesFromProps(r,s,o){return scrapeMotionValuesFromProps$1(r,s,o)}}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(e,r,s=1,o=0,c=!0){e.pathLength=1;const y=c?dashKeys:camelKeys;e[y.offset]=px.transform(-o);const u=px.transform(r),p=px.transform(s);e[y.array]=`${u} ${p}`}const cssMotionPathProperties=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function buildSVGAttrs(e,{attrX:r,attrY:s,attrScale:o,pathLength:c,pathSpacing:y=1,pathOffset:u=0,...p},d,x,w){if(buildHTMLStyles(e,p,x),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:v,style:R}=e;v.transform&&(R.transform=v.transform,delete v.transform),(R.transform||v.transformOrigin)&&(R.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),R.transform&&(R.transformBox=w?.transformBox??"fill-box",delete v.transformBox);for(const O of cssMotionPathProperties)v[O]!==void 0&&(R[O]=v[O],delete v[O]);r!==void 0&&(v.x=r),s!==void 0&&(v.y=s),o!==void 0&&(v.scale=o),c!==void 0&&buildSVGPath(v,c,y,u,!1)}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),isSVGTag=e=>typeof e=="string"&&e.toLowerCase()==="svg";function renderSVG(e,r,s,o){renderHTML(e,r,void 0,o);for(const c in r.attrs)e.setAttribute(camelCaseAttributes.has(c)?c:camelToDash(c),r.attrs[c])}function scrapeMotionValuesFromProps(e,r,s){const o=scrapeMotionValuesFromProps$1(e,r,s);for(const c in e)if(isMotionValue(e[c])||isMotionValue(r[c])){const y=transformPropOrder.indexOf(c)!==-1?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c;o[y]=e[c]}return o}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(r,s){return r[s]}readValueFromInstance(r,s){if(transformProps.has(s)){const o=getDefaultValueType(s);return o&&o.default||0}return s=camelCaseAttributes.has(s)?s:camelToDash(s),r.getAttribute(s)}scrapeMotionValuesFromProps(r,s,o){return scrapeMotionValuesFromProps(r,s,o)}build(r,s,o){buildSVGAttrs(r,s,this.isSVGTag,o.transformTemplate,o.style)}renderInstance(r,s,o,c){renderSVG(r,s,o,c)}mount(r){this.isSVGTag=isSVGTag(r.tagName),super.mount(r)}}const numVariantProps=variantProps.length;function getVariantContext(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?getVariantContext(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const r={};for(let s=0;s<numVariantProps;s++){const o=variantProps[s],c=e.props[o];(isVariantLabel(c)||c===!1)&&(r[o]=c)}return r}function shallowCompare(e,r){if(!Array.isArray(r))return!1;const s=r.length;if(s!==e.length)return!1;for(let o=0;o<s;o++)if(r[o]!==e[o])return!1;return!0}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function createAnimateFunction(e){return r=>Promise.all(r.map(({animation:s,options:o})=>animateVisualElement(e,s,o)))}function createAnimationState(e){let r=createAnimateFunction(e),s=createState(),o=!0;const c=d=>(x,w)=>{const v=resolveVariant(e,w,d==="exit"?e.presenceContext?.custom:void 0);if(v){const{transition:R,transitionEnd:O,...C}=v;x={...x,...C,...O}}return x};function y(d){r=d(e)}function u(d){const{props:x}=e,w=getVariantContext(e.parent)||{},v=[],R=new Set;let O={},C=1/0;for(let K=0;K<numAnimationTypes;K++){const Z=reversePriorityOrder[K],X=s[Z],S=x[Z]!==void 0?x[Z]:w[Z],F=isVariantLabel(S),B=Z===d?X.isActive:null;B===!1&&(C=K);let W=S===w[Z]&&S!==x[Z]&&F;if(W&&o&&e.manuallyAnimateOnMount&&(W=!1),X.protectedKeys={...O},!X.isActive&&B===null||!S&&!X.prevProp||isAnimationControls(S)||typeof S=="boolean")continue;const J=checkVariantsDidChange(X.prevProp,S);let N=J||Z===d&&X.isActive&&!W&&F||K>C&&F,ee=!1;const Se=Array.isArray(S)?S:[S];let ce=Se.reduce(c(Z),{});B===!1&&(ce={});const{prevResolvedValues:ge={}}=X,me={...ge,...ce},Ce=he=>{N=!0,R.has(he)&&(ee=!0,R.delete(he)),X.needsAnimating[he]=!0;const se=e.getValue(he);se&&(se.liveStyle=!1)};for(const he in me){const se=ce[he],q=ge[he];if(O.hasOwnProperty(he))continue;let ke=!1;isKeyframesTarget(se)&&isKeyframesTarget(q)?ke=!shallowCompare(se,q):ke=se!==q,ke?se!=null?Ce(he):R.add(he):se!==void 0&&R.has(he)?Ce(he):X.protectedKeys[he]=!0}X.prevProp=S,X.prevResolvedValues=ce,X.isActive&&(O={...O,...ce}),o&&e.blockInitialAnimation&&(N=!1);const ue=W&&J;N&&(!ue||ee)&&v.push(...Se.map(he=>{const se={type:Z};if(typeof he=="string"&&o&&!ue&&e.manuallyAnimateOnMount&&e.parent){const{parent:q}=e,ke=resolveVariant(q,he);if(q.enteringChildren&&ke){const{delayChildren:fe}=ke.transition||{};se.delay=calcChildStagger(q.enteringChildren,e,fe)}}return{animation:he,options:se}}))}if(R.size){const K={};if(typeof x.initial!="boolean"){const Z=resolveVariant(e,Array.isArray(x.initial)?x.initial[0]:x.initial);Z&&Z.transition&&(K.transition=Z.transition)}R.forEach(Z=>{const X=e.getBaseTarget(Z),S=e.getValue(Z);S&&(S.liveStyle=!0),K[Z]=X??null}),v.push({animation:K})}let k=!!v.length;return o&&(x.initial===!1||x.initial===x.animate)&&!e.manuallyAnimateOnMount&&(k=!1),o=!1,k?r(v):Promise.resolve()}function p(d,x){if(s[d].isActive===x)return Promise.resolve();e.variantChildren?.forEach(v=>v.animationState?.setActive(d,x)),s[d].isActive=x;const w=u(d);for(const v in s)s[v].protectedKeys={};return w}return{animateChanges:u,setActive:p,setAnimateFunction:y,getState:()=>s,reset:()=>{s=createState()}}}function checkVariantsDidChange(e,r){return typeof r=="string"?r!==e:Array.isArray(r)?!shallowCompare(r,e):!1}function createTypeState(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(e){return e.max-e.min}function isNear(e,r,s){return Math.abs(e-r)<=s}function calcAxisDelta(e,r,s,o=.5){e.origin=o,e.originPoint=mixNumber$1(r.min,r.max,e.origin),e.scale=calcLength(s)/calcLength(r),e.translate=mixNumber$1(s.min,s.max,e.origin)-e.originPoint,(e.scale>=SCALE_MIN&&e.scale<=SCALE_MAX||isNaN(e.scale))&&(e.scale=1),(e.translate>=TRANSLATE_MIN&&e.translate<=TRANSLATE_MAX||isNaN(e.translate))&&(e.translate=0)}function calcBoxDelta(e,r,s,o){calcAxisDelta(e.x,r.x,s.x,o?o.originX:void 0),calcAxisDelta(e.y,r.y,s.y,o?o.originY:void 0)}function calcRelativeAxis(e,r,s){e.min=s.min+r.min,e.max=e.min+calcLength(r)}function calcRelativeBox(e,r,s){calcRelativeAxis(e.x,r.x,s.x),calcRelativeAxis(e.y,r.y,s.y)}function calcRelativeAxisPosition(e,r,s){e.min=r.min-s.min,e.max=e.min+calcLength(r)}function calcRelativePosition(e,r,s){calcRelativeAxisPosition(e.x,r.x,s.x),calcRelativeAxisPosition(e.y,r.y,s.y)}function removePointDelta(e,r,s,o,c){return e-=r,e=scalePoint(e,1/s,o),c!==void 0&&(e=scalePoint(e,1/c,o)),e}function removeAxisDelta(e,r=0,s=1,o=.5,c,y=e,u=e){if(percent.test(r)&&(r=parseFloat(r),r=mixNumber$1(u.min,u.max,r/100)-u.min),typeof r!="number")return;let p=mixNumber$1(y.min,y.max,o);e===y&&(p-=r),e.min=removePointDelta(e.min,r,s,p,c),e.max=removePointDelta(e.max,r,s,p,c)}function removeAxisTransforms(e,r,[s,o,c],y,u){removeAxisDelta(e,r[s],r[o],r[c],r.scale,y,u)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(e,r,s,o){removeAxisTransforms(e.x,r,xKeys,s?s.x:void 0,o?o.x:void 0),removeAxisTransforms(e.y,r,yKeys,s?s.y:void 0,o?o.y:void 0)}function copyAxisInto(e,r){e.min=r.min,e.max=r.max}function copyBoxInto(e,r){copyAxisInto(e.x,r.x),copyAxisInto(e.y,r.y)}function copyAxisDeltaInto(e,r){e.translate=r.translate,e.scale=r.scale,e.originPoint=r.originPoint,e.origin=r.origin}function isAxisDeltaZero(e){return e.translate===0&&e.scale===1}function isDeltaZero(e){return isAxisDeltaZero(e.x)&&isAxisDeltaZero(e.y)}function axisEquals(e,r){return e.min===r.min&&e.max===r.max}function boxEquals(e,r){return axisEquals(e.x,r.x)&&axisEquals(e.y,r.y)}function axisEqualsRounded(e,r){return Math.round(e.min)===Math.round(r.min)&&Math.round(e.max)===Math.round(r.max)}function boxEqualsRounded(e,r){return axisEqualsRounded(e.x,r.x)&&axisEqualsRounded(e.y,r.y)}function aspectRatio(e){return calcLength(e.x)/calcLength(e.y)}function axisDeltaEquals(e,r){return e.translate===r.translate&&e.scale===r.scale&&e.originPoint===r.originPoint}function eachAxis(e){return[e("x"),e("y")]}function buildProjectionTransform(e,r,s){let o="";const c=e.x.translate/r.x,y=e.y.translate/r.y,u=s?.z||0;if((c||y||u)&&(o=`translate3d(${c}px, ${y}px, ${u}px) `),(r.x!==1||r.y!==1)&&(o+=`scale(${1/r.x}, ${1/r.y}) `),s){const{transformPerspective:x,rotate:w,rotateX:v,rotateY:R,skewX:O,skewY:C}=s;x&&(o=`perspective(${x}px) ${o}`),w&&(o+=`rotate(${w}deg) `),v&&(o+=`rotateX(${v}deg) `),R&&(o+=`rotateY(${R}deg) `),O&&(o+=`skewX(${O}deg) `),C&&(o+=`skewY(${C}deg) `)}const p=e.x.scale*r.x,d=e.y.scale*r.y;return(p!==1||d!==1)&&(o+=`scale(${p}, ${d})`),o||"none"}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=e=>typeof e=="string"?parseFloat(e):e,isPx=e=>typeof e=="number"||px.test(e);function mixValues(e,r,s,o,c,y){c?(e.opacity=mixNumber$1(0,s.opacity??1,easeCrossfadeIn(o)),e.opacityExit=mixNumber$1(r.opacity??1,0,easeCrossfadeOut(o))):y&&(e.opacity=mixNumber$1(r.opacity??1,s.opacity??1,o));for(let u=0;u<numBorders;u++){const p=`border${borders[u]}Radius`;let d=getRadius(r,p),x=getRadius(s,p);if(d===void 0&&x===void 0)continue;d||(d=0),x||(x=0),d===0||x===0||isPx(d)===isPx(x)?(e[p]=Math.max(mixNumber$1(asNumber(d),asNumber(x),o),0),(percent.test(x)||percent.test(d))&&(e[p]+="%")):e[p]=x}(r.rotate||s.rotate)&&(e.rotate=mixNumber$1(r.rotate||0,s.rotate||0,o))}function getRadius(e,r){return e[r]!==void 0?e[r]:e.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop);function compress(e,r,s){return o=>o<e?0:o>r?1:s(progress(e,r,o))}function delay(e,r){const s=time.now(),o=({timestamp:c})=>{const y=c-s;y>=r&&(cancelFrame(o),e(y-r))};return frame.setup(o,!0),()=>cancelFrame(o)}function addDomEvent(e,r,s,o={passive:!0}){return e.addEventListener(r,s,o),()=>e.removeEventListener(r,s)}function resolveMotionValue(e){return isMotionValue(e)?e.get():e}function animateSingleValue(e,r,s){const o=isMotionValue(e)?e:motionValue(e);return o.start(animateMotionValue("",o,r,s)),o.animation}const compareByDepth=(e,r)=>e.depth-r.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(r){addUniqueItem(this.children,r),this.isDirty=!0}remove(r){removeItem(this.children,r),this.isDirty=!0}forEach(r){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(r)}}class NodeStack{constructor(){this.members=[]}add(r){addUniqueItem(this.members,r),r.scheduleRender()}remove(r){if(removeItem(this.members,r),r===this.prevLead&&(this.prevLead=void 0),r===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(r){const s=this.members.findIndex(c=>r===c);if(s===0)return!1;let o;for(let c=s;c>=0;c--){const y=this.members[c];if(y.isPresent!==!1){o=y;break}}return o?(this.promote(o),!0):!1}promote(r,s){const o=this.lead;if(r!==o&&(this.prevLead=o,this.lead=r,r.show(),o)){o.instance&&o.scheduleRender(),r.scheduleRender(),r.resumeFrom=o,s&&(r.resumeFrom.preserveOpacity=!0),o.snapshot&&(r.snapshot=o.snapshot,r.snapshot.latestValues=o.animationValues||o.latestValues),r.root&&r.root.isUpdating&&(r.isLayoutDirty=!0);const{crossfade:c}=r.options;c===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(r=>{const{options:s,resumingFrom:o}=r;s.onExitComplete&&s.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(r=>{r.instance&&r.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1},transformAxes=["","X","Y","Z"],animationTarget=1e3;let id$1=0;function resetDistortingTransform(e,r,s,o){const{latestValues:c}=r;c[e]&&(s[e]=c[e],r.setStaticValue(e,0),o&&(o[e]=0))}function cancelTreeOptimisedTransformAnimations(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:r}=e.options;if(!r)return;const s=getOptimisedAppearId(r);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:c,layoutId:y}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",frame,!(c||y))}const{parent:o}=e;o&&!o.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(o)}function createProjectionNode$1({attachResizeListener:e,defaultParent:r,measureScroll:s,checkIsScrollRoot:o,resetTransform:c}){return class{constructor(u={},p=r?.()){this.id=id$1++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=p?p.root||p:this,this.path=p?[...p.path,p]:[],this.parent=p,this.depth=p?p.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(u,p){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new SubscriptionManager),this.eventHandlers.get(u).add(p)}notifyListeners(u,...p){const d=this.eventHandlers.get(u);d&&d.notify(...p)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=isSVGElement(u)&&!isSVGSVGElement(u),this.instance=u;const{layoutId:p,layout:d,visualElement:x}=this.options;if(x&&!x.current&&x.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||p)&&(this.isLayoutDirty=!0),e){let w,v=0;const R=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{v=window.innerWidth}),e(u,()=>{const O=window.innerWidth;O!==v&&(v=O,this.root.updateBlockedByResize=!0,w&&w(),w=delay(R,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&x&&(p||d)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:v,hasRelativeLayoutChanged:R,layout:O})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||x.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:k,onLayoutAnimationComplete:K}=x.getProps(),Z=!this.targetLayout||!boxEqualsRounded(this.targetLayout,O),X=!v&&R;if(this.options.layoutRoot||this.resumeFrom||X||v&&(Z||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...getValueTransition(C,"layout"),onPlay:k,onComplete:K};(x.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(w,X)}else v||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=O})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let w=0;w<this.path.length;w++){const v=this.path[w];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:p,layout:d}=this.options;if(p===void 0&&!d)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const p=time.now();frameData.delta=clamp(0,1e3/60,p-frameData.timestamp),frameData.timestamp=p,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:p}=this.options;p&&p.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let p=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(p=!1),p&&this.instance){const d=o(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:d,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!c)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,p=this.projectionDelta&&!isDeltaZero(this.projectionDelta),d=this.getTransformTemplate(),x=d?d(this.latestValues,""):void 0,w=x!==this.prevTransformTemplateValue;u&&this.instance&&(p||hasTransform(this.latestValues)||w)&&(c(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const p=this.measurePageBox();let d=this.removeElementScroll(p);return u&&(d=this.removeTransform(d)),roundBox(d),{animationId:this.root.animationId,measuredBox:p,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return createBox();const p=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:x}=this.root;x&&(translateAxis(p.x,x.offset.x),translateAxis(p.y,x.offset.y))}return p}removeElementScroll(u){const p=createBox();if(copyBoxInto(p,u),this.scroll?.wasRoot)return p;for(let d=0;d<this.path.length;d++){const x=this.path[d],{scroll:w,options:v}=x;x!==this.root&&w&&v.layoutScroll&&(w.wasRoot&&copyBoxInto(p,u),translateAxis(p.x,w.offset.x),translateAxis(p.y,w.offset.y))}return p}applyTransform(u,p=!1){const d=createBox();copyBoxInto(d,u);for(let x=0;x<this.path.length;x++){const w=this.path[x];!p&&w.options.layoutScroll&&w.scroll&&w!==w.root&&transformBox(d,{x:-w.scroll.offset.x,y:-w.scroll.offset.y}),hasTransform(w.latestValues)&&transformBox(d,w.latestValues)}return hasTransform(this.latestValues)&&transformBox(d,this.latestValues),d}removeTransform(u){const p=createBox();copyBoxInto(p,u);for(let d=0;d<this.path.length;d++){const x=this.path[d];if(!x.instance||!hasTransform(x.latestValues))continue;hasScale(x.latestValues)&&x.updateSnapshot();const w=createBox(),v=x.measurePageBox();copyBoxInto(w,v),removeBoxTransforms(p,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,w)}return hasTransform(this.latestValues)&&removeBoxTransforms(p,this.latestValues),p}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==p;if(!(u||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:w,layoutId:v}=this.options;if(!this.layout||!(w||v))return;this.resolvedRelativeTargetAt=frameData.timestamp;const R=this.getClosestProjectingParent();R&&this.linkedParentVersion!==R.layoutVersion&&!R.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(R&&R.layout?this.createRelativeTarget(R,this.layout.layoutBox,R.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,R&&!!R.resumingFrom==!!this.resumingFrom&&!R.options.layoutScroll&&R.target&&this.animationProgress!==1?this.createRelativeTarget(R,this.target,R.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,p,d){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,p,d),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const u=this.getLead(),p=!!this.resumingFrom||this!==u;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(d=!1),d)return;const{layout:x,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||w))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,R=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,p),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=createBox());const{target:O}=u;if(!O){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,O,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==R||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",O))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const p=this.getStack();p&&p.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(u,p=!1){const d=this.snapshot,x=d?d.latestValues:{},w={...this.latestValues},v=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!p;const R=createBox(),O=d?d.source:void 0,C=this.layout?this.layout.source:void 0,k=O!==C,K=this.getStack(),Z=!K||K.members.length<=1,X=!!(k&&!Z&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let S;this.mixTargetDelta=F=>{const B=F/1e3;mixAxisDelta(v.x,u.x,B),mixAxisDelta(v.y,u.y,B),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(R,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,R,B),S&&boxEquals(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=createBox()),copyBoxInto(S,this.relativeTarget)),k&&(this.animationValues=w,mixValues(w,x,this.latestValues,B,X,Z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),u.onUpdate&&u.onUpdate(p)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:p,target:d,layout:x,latestValues:w}=u;if(!(!p||!d||!x)){if(this!==u&&this.layout&&x&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,x.layoutBox)){d=this.target||createBox();const v=calcLength(this.layout.layoutBox.x);d.x.min=u.target.x.min,d.x.max=d.x.min+v;const R=calcLength(this.layout.layoutBox.y);d.y.min=u.target.y.min,d.y.max=d.y.min+R}copyBoxInto(p,d),transformBox(p,w),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,p,w)}}registerSharedNode(u,p){this.sharedNodes.has(u)||this.sharedNodes.set(u,new NodeStack),this.sharedNodes.get(u).add(p);const x=p.options.initialPromotionConfig;p.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(p):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:p,preserveFollowOpacity:d}={}){const x=this.getStack();x&&x.promote(this,d),u&&(this.projectionDelta=void 0,this.needsReset=!0),p&&this.setOptions({transition:p})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let p=!1;const{latestValues:d}=u;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(p=!0),!p)return;const x={};d.z&&resetDistortingTransform("z",u,x,this.animationValues);for(let w=0;w<transformAxes.length;w++)resetDistortingTransform(`rotate${transformAxes[w]}`,u,x,this.animationValues),resetDistortingTransform(`skew${transformAxes[w]}`,u,x,this.animationValues);u.render();for(const w in x)u.setStaticValue(w,x[w]),this.animationValues&&(this.animationValues[w]=x[w]);u.scheduleRender()}applyProjectionStyles(u,p){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=resolveMotionValue(p?.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none";return}const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=resolveMotionValue(p?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(u.transform=d?d({},""):"none",this.hasProjected=!1);return}u.visibility="";const w=x.animationValues||x.latestValues;this.applyTransformsToTarget();let v=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,w);d&&(v=d(w,v)),u.transform=v;const{x:R,y:O}=this.projectionDelta;u.transformOrigin=`${R.origin*100}% ${O.origin*100}% 0`,x.animationValues?u.opacity=x===this?w.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:u.opacity=x===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const C in scaleCorrectors){if(w[C]===void 0)continue;const{correct:k,applyTo:K,isCSSVariable:Z}=scaleCorrectors[C],X=v==="none"?w[C]:k(w[C],x);if(K){const S=K.length;for(let F=0;F<S;F++)u[K[F]]=X}else Z?this.options.visualElement.renderState.vars[C]=X:u[C]=X}this.options.layoutId&&(u.pointerEvents=x===this?resolveMotionValue(p?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(e){e.updateLayout()}function notifyLayoutUpdate(e){const r=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:o}=e.layout,{animationType:c}=e.options,y=r.source!==e.layout.source;c==="size"?eachAxis(w=>{const v=y?r.measuredBox[w]:r.layoutBox[w],R=calcLength(v);v.min=s[w].min,v.max=v.min+R}):shouldAnimatePositionOnly(c,r.layoutBox,s)&&eachAxis(w=>{const v=y?r.measuredBox[w]:r.layoutBox[w],R=calcLength(s[w]);v.max=v.min+R,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[w].max=e.relativeTarget[w].min+R)});const u=createDelta();calcBoxDelta(u,s,r.layoutBox);const p=createDelta();y?calcBoxDelta(p,e.applyTransform(o,!0),r.measuredBox):calcBoxDelta(p,s,r.layoutBox);const d=!isDeltaZero(u);let x=!1;if(!e.resumeFrom){const w=e.getClosestProjectingParent();if(w&&!w.resumeFrom){const{snapshot:v,layout:R}=w;if(v&&R){const O=createBox();calcRelativePosition(O,r.layoutBox,v.layoutBox);const C=createBox();calcRelativePosition(C,s,R.layoutBox),boxEqualsRounded(O,C)||(x=!0),w.options.layoutRoot&&(e.relativeTarget=C,e.relativeTargetOrigin=O,e.relativeParent=w)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:r,delta:p,layoutDelta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:x})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function propagateDirtyNodes(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cleanDirtyNodes(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function clearSnapshot(e){e.clearSnapshot()}function clearMeasurements(e){e.clearMeasurements()}function clearIsLayoutDirty(e){e.isLayoutDirty=!1}function resetTransformStyle(e){const{visualElement:r}=e.options;r&&r.getProps().onBeforeLayoutMeasure&&r.notify("BeforeLayoutMeasure"),e.resetTransform()}function finishAnimation(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function resolveTargetDelta(e){e.resolveTargetDelta()}function calcProjection(e){e.calcProjection()}function resetSkewAndRotation(e){e.resetSkewAndRotation()}function removeLeadSnapshots(e){e.removeLeadSnapshot()}function mixAxisDelta(e,r,s){e.translate=mixNumber$1(r.translate,0,s),e.scale=mixNumber$1(r.scale,1,s),e.origin=r.origin,e.originPoint=r.originPoint}function mixAxis(e,r,s,o){e.min=mixNumber$1(r.min,s.min,o),e.max=mixNumber$1(r.max,s.max,o)}function mixBox(e,r,s,o){mixAxis(e.x,r.x,s.x,o),mixAxis(e.y,r.y,s.y,o)}function hasOpacityCrossfade(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop;function roundAxis(e){e.min=roundPoint(e.min),e.max=roundPoint(e.max)}function roundBox(e){roundAxis(e.x),roundAxis(e.y)}function shouldAnimatePositionOnly(e,r,s){return e==="position"||e==="preserve-aspect"&&!isNear(aspectRatio(r),aspectRatio(s),.2)}function checkNodeWasScrollRoot(e){return e!==e.root&&e.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(e,r)=>addDomEvent(e,"resize",r),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const e=new DocumentProjectionNode({});e.mount(window),e.setOptions({layoutScroll:!0}),rootProjectionNode.current=e}return rootProjectionNode.current},resetTransform:(e,r)=>{e.style.transform=r!==void 0?r:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),MotionConfigContext=reactExports.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function usePresence(e=!0){const r=reactExports.useContext(PresenceContext);if(r===null)return[!0,null];const{isPresent:s,onExitComplete:o,register:c}=r,y=reactExports.useId();reactExports.useEffect(()=>{if(e)return c(y)},[e]);const u=reactExports.useCallback(()=>e&&o&&o(y),[y,o,e]);return!s&&o?[!1,u]:[!0]}const LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let isInitialized=!1;function initFeatureDefinitions(){if(isInitialized)return;const e={};for(const r in featureProps)e[r]={isEnabled:s=>featureProps[r].some(o=>!!s[o])};setFeatureDefinitions(e),isInitialized=!0}function getInitializedFeatureDefinitions(){return initFeatureDefinitions(),getFeatureDefinitions()}function loadFeatures(e){const r=getInitializedFeatureDefinitions();for(const s in e)r[s]={...r[s],...e[s]};setFeatureDefinitions(r)}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||validMotionProps.has(e)}let shouldForward=e=>!isValidMotionProp(e);function loadExternalIsValidProp(e){typeof e=="function"&&(shouldForward=r=>r.startsWith("on")?!isValidMotionProp(r):e(r))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(e,r,s){const o={};for(const c in e)c==="values"&&typeof e.values=="object"||(shouldForward(c)||s===!0&&isValidMotionProp(c)||!r&&!isValidMotionProp(c)||e.draggable&&c.startsWith("onDrag"))&&(o[c]=e[c]);return o}const MotionContext=reactExports.createContext({});function getCurrentTreeVariants(e,r){if(isControllingVariants(e)){const{initial:s,animate:o}=e;return{initial:s===!1||isVariantLabel(s)?s:void 0,animate:isVariantLabel(o)?o:void 0}}return e.inherit!==!1?r:{}}function useCreateMotionContext(e){const{initial:r,animate:s}=getCurrentTreeVariants(e,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:r,animate:s}),[variantLabelsAsDependency(r),variantLabelsAsDependency(s)])}function variantLabelsAsDependency(e){return Array.isArray(e)?e.join(" "):e}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(e,r,s){for(const o in r)!isMotionValue(r[o])&&!isForcedMotionValue(o,s)&&(e[o]=r[o])}function useInitialMotionValues({transformTemplate:e},r){return reactExports.useMemo(()=>{const s=createHtmlRenderState();return buildHTMLStyles(s,r,e),Object.assign({},s.vars,s.style)},[r])}function useStyle(e,r){const s=e.style||{},o={};return copyRawValuesOnly(o,s,e),Object.assign(o,useInitialMotionValues(e,r)),o}function useHTMLProps(e,r){const s={},o=useStyle(e,r);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=o,s}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}});function useSVGProps(e,r,s,o){const c=reactExports.useMemo(()=>{const y=createSvgRenderState();return buildSVGAttrs(y,r,isSVGTag(o),e.transformTemplate,e.style),{...y.attrs,style:{...y.style}}},[r]);if(e.style){const y={};copyRawValuesOnly(y,e.style,e),c.style={...y,...c.style}}return c}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(e){return typeof e!="string"||e.includes("-")?!1:!!(lowercaseSVGElements.indexOf(e)>-1||/[A-Z]/u.test(e))}function useRender(e,r,s,{latestValues:o},c,y=!1,u){const d=(u??isSVGComponent(e)?useSVGProps:useHTMLProps)(r,o,c,e),x=filterProps(r,typeof e=="string",y),w=e!==reactExports.Fragment?{...x,...d,ref:s}:{},{children:v}=r,R=reactExports.useMemo(()=>isMotionValue(v)?v.get():v,[v]);return reactExports.createElement(e,{...w,children:R})}function makeState({scrapeMotionValuesFromProps:e,createRenderState:r},s,o,c){return{latestValues:makeLatestValues(s,o,c,e),renderState:r()}}function makeLatestValues(e,r,s,o){const c={},y=o(e,{});for(const R in y)c[R]=resolveMotionValue(y[R]);let{initial:u,animate:p}=e;const d=isControllingVariants(e),x=isVariantNode(e);r&&x&&!d&&e.inherit!==!1&&(u===void 0&&(u=r.initial),p===void 0&&(p=r.animate));let w=s?s.initial===!1:!1;w=w||u===!1;const v=w?p:u;if(v&&typeof v!="boolean"&&!isAnimationControls(v)){const R=Array.isArray(v)?v:[v];for(let O=0;O<R.length;O++){const C=resolveVariantFromProps(e,R[O]);if(C){const{transitionEnd:k,transition:K,...Z}=C;for(const X in Z){let S=Z[X];if(Array.isArray(S)){const F=w?S.length-1:0;S=S[F]}S!==null&&(c[X]=S)}for(const X in k)c[X]=k[X]}}}return c}const makeUseVisualState=e=>(r,s)=>{const o=reactExports.useContext(MotionContext),c=reactExports.useContext(PresenceContext),y=()=>makeState(e,r,o,c);return s?y():useConstant(y)},useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState}),useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function useMotionRef(e,r,s){const o=reactExports.useRef(s);reactExports.useInsertionEffect(()=>{o.current=s});const c=reactExports.useRef(null);return reactExports.useCallback(y=>{y&&e.onMount?.(y),r&&(y?r.mount(y):r.unmount());const u=o.current;if(typeof u=="function")if(y){const p=u(y);typeof p=="function"&&(c.current=p)}else c.current?(c.current(),c.current=null):u(y);else u&&(u.current=y)},[r])}const SwitchLayoutGroupContext=reactExports.createContext({});function isRefObject(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function useVisualElement(e,r,s,o,c,y){const{visualElement:u}=reactExports.useContext(MotionContext),p=reactExports.useContext(LazyContext),d=reactExports.useContext(PresenceContext),x=reactExports.useContext(MotionConfigContext).reducedMotion,w=reactExports.useRef(null);o=o||p.renderer,!w.current&&o&&(w.current=o(e,{visualState:r,parent:u,props:s,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:x,isSVG:y}));const v=w.current,R=reactExports.useContext(SwitchLayoutGroupContext);v&&!v.projection&&c&&(v.type==="html"||v.type==="svg")&&createProjectionNode(w.current,s,c,R);const O=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{v&&O.current&&v.update(s,d)});const C=s[optimizedAppearDataAttribute],k=reactExports.useRef(!!C&&!window.MotionHandoffIsComplete?.(C)&&window.MotionHasOptimisedAnimation?.(C));return useIsomorphicLayoutEffect(()=>{v&&(O.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),v.scheduleRenderMicrotask(),k.current&&v.animationState&&v.animationState.animateChanges())}),reactExports.useEffect(()=>{v&&(!k.current&&v.animationState&&v.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(C)}),k.current=!1),v.enteringChildren=void 0)}),v}function createProjectionNode(e,r,s,o){const{layoutId:c,layout:y,drag:u,dragConstraints:p,layoutScroll:d,layoutRoot:x,layoutCrossfade:w}=r;e.projection=new s(e.latestValues,r["data-framer-portal-id"]?void 0:getClosestProjectingNode(e.parent)),e.projection.setOptions({layoutId:c,layout:y,alwaysMeasureLayout:!!u||p&&isRefObject(p),visualElement:e,animationType:typeof y=="string"?y:"both",initialPromotionConfig:o,crossfade:w,layoutScroll:d,layoutRoot:x})}function getClosestProjectingNode(e){if(e)return e.options.allowProjection!==!1?e.projection:getClosestProjectingNode(e.parent)}function createMotionComponent(e,{forwardMotionProps:r=!1,type:s}={},o,c){o&&loadFeatures(o);const y=s?s==="svg":isSVGComponent(e),u=y?useSVGVisualState:useHTMLVisualState;function p(x,w){let v;const R={...reactExports.useContext(MotionConfigContext),...x,layoutId:useLayoutId(x)},{isStatic:O}=R,C=useCreateMotionContext(x),k=u(x,O);if(!O&&isBrowser$1){useStrictMode();const K=getProjectionFunctionality(R);v=K.MeasureLayout,C.visualElement=useVisualElement(e,k,R,c,K.ProjectionNode,y)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:C,children:[v&&C.visualElement?jsxRuntimeExports.jsx(v,{visualElement:C.visualElement,...R}):null,useRender(e,x,useMotionRef(k,C.visualElement,w),k,O,r,y)]})}p.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const d=reactExports.forwardRef(p);return d[motionComponentSymbol]=e,d}function useLayoutId({layoutId:e}){const r=reactExports.useContext(LayoutGroupContext).id;return r&&e!==void 0?r+"-"+e:e}function useStrictMode(e,r){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(e){const r=getInitializedFeatureDefinitions(),{drag:s,layout:o}=r;if(!s&&!o)return{};const c={...s,...o};return{MeasureLayout:s?.isEnabled(e)||o?.isEnabled(e)?c.MeasureLayout:void 0,ProjectionNode:c.ProjectionNode}}function createMotionProxy(e,r){if(typeof Proxy>"u")return createMotionComponent;const s=new Map,o=(y,u)=>createMotionComponent(y,u,e,r),c=(y,u)=>o(y,u);return new Proxy(c,{get:(y,u)=>u==="create"?o:(s.has(u)||s.set(u,createMotionComponent(u,void 0,e,r)),s.get(u))})}const createDomVisualElement=(e,r)=>r.isSVG??isSVGComponent(e)?new SVGVisualElement(r):new HTMLVisualElement(r,{allowProjection:e!==reactExports.Fragment});class AnimationFeature extends Feature{constructor(r){super(r),r.animationState||(r.animationState=createAnimationState(r))}updateAnimationControlsSubscription(){const{animate:r}=this.node.getProps();isAnimationControls(r)&&(this.unmountControls=r.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:r}=this.node.getProps(),{animate:s}=this.node.prevProps||{};r!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id++}update(){if(!this.node.presenceContext)return;const{isPresent:r,onExitComplete:s}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||r===o)return;const c=this.node.animationState.setActive("exit",!r);s&&!r&&c.then(()=>{s(this.id)})}mount(){const{register:r,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),r&&(this.unmount=r(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function extractEventInfo(e){return{point:{x:e.pageX,y:e.pageY}}}const addPointerInfo=e=>r=>isPrimaryPointer(r)&&e(r,extractEventInfo(r));function addPointerEvent(e,r,s,o){return addDomEvent(e,r,addPointerInfo(s),o)}const getContextWindow=({current:e})=>e?e.ownerDocument.defaultView:null,distance=(e,r)=>Math.abs(e-r);function distance2D(e,r){const s=distance(e.x,r.x),o=distance(e.y,r.y);return Math.sqrt(s**2+o**2)}const overflowStyles=new Set(["auto","scroll"]);class PanSession{constructor(r,s,{transformPagePoint:o,contextWindow:c=window,dragSnapToOrigin:y=!1,distanceThreshold:u=3,element:p}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=O=>{this.handleScroll(O.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=getPanInfo(this.lastMoveEventInfo,this.history),C=this.startEvent!==null,k=distance2D(O.offset,{x:0,y:0})>=this.distanceThreshold;if(!C&&!k)return;const{point:K}=O,{timestamp:Z}=frameData;this.history.push({...K,timestamp:Z});const{onStart:X,onMove:S}=this.handlers;C||(X&&X(this.lastMoveEvent,O),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,O)},this.handlePointerMove=(O,C)=>{this.lastMoveEvent=O,this.lastMoveEventInfo=transformPoint(C,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(O,C)=>{this.end();const{onEnd:k,onSessionEnd:K,resumeAnimation:Z}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&Z&&Z(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const X=getPanInfo(O.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(C,this.transformPagePoint),this.history);this.startEvent&&k&&k(O,X),K&&K(O,X)},!isPrimaryPointer(r))return;this.dragSnapToOrigin=y,this.handlers=s,this.transformPagePoint=o,this.distanceThreshold=u,this.contextWindow=c||window;const d=extractEventInfo(r),x=transformPoint(d,this.transformPagePoint),{point:w}=x,{timestamp:v}=frameData;this.history=[{...w,timestamp:v}];const{onSessionStart:R}=s;R&&R(r,getPanInfo(x,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp)),p&&this.startScrollTracking(p)}startScrollTracking(r){let s=r.parentElement;for(;s;){const o=getComputedStyle(s);(overflowStyles.has(o.overflowX)||overflowStyles.has(o.overflowY))&&this.scrollPositions.set(s,{x:s.scrollLeft,y:s.scrollTop}),s=s.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(r){const s=this.scrollPositions.get(r);if(!s)return;const o=r===window,c=o?{x:window.scrollX,y:window.scrollY}:{x:r.scrollLeft,y:r.scrollTop},y={x:c.x-s.x,y:c.y-s.y};y.x===0&&y.y===0||(o?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=y.x,this.lastMoveEventInfo.point.y+=y.y):this.history.length>0&&(this.history[0].x-=y.x,this.history[0].y-=y.y),this.scrollPositions.set(r,c),frame.update(this.updatePoint,!0))}updateHandlers(r){this.handlers=r}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),cancelFrame(this.updatePoint)}}function transformPoint(e,r){return r?{point:r(e.point)}:e}function subtractPoint(e,r){return{x:e.x-r.x,y:e.y-r.y}}function getPanInfo({point:e},r){return{point:e,delta:subtractPoint(e,lastDevicePoint(r)),offset:subtractPoint(e,startDevicePoint(r)),velocity:getVelocity(r,.1)}}function startDevicePoint(e){return e[0]}function lastDevicePoint(e){return e[e.length-1]}function getVelocity(e,r){if(e.length<2)return{x:0,y:0};let s=e.length-1,o=null;const c=lastDevicePoint(e);for(;s>=0&&(o=e[s],!(c.timestamp-o.timestamp>secondsToMilliseconds(r)));)s--;if(!o)return{x:0,y:0};const y=millisecondsToSeconds(c.timestamp-o.timestamp);if(y===0)return{x:0,y:0};const u={x:(c.x-o.x)/y,y:(c.y-o.y)/y};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function applyConstraints(e,{min:r,max:s},o){return r!==void 0&&e<r?e=o?mixNumber$1(r,e,o.min):Math.max(e,r):s!==void 0&&e>s&&(e=o?mixNumber$1(s,e,o.max):Math.min(e,s)),e}function calcRelativeAxisConstraints(e,r,s){return{min:r!==void 0?e.min+r:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function calcRelativeConstraints(e,{top:r,left:s,bottom:o,right:c}){return{x:calcRelativeAxisConstraints(e.x,s,c),y:calcRelativeAxisConstraints(e.y,r,o)}}function calcViewportAxisConstraints(e,r){let s=r.min-e.min,o=r.max-e.max;return r.max-r.min<e.max-e.min&&([s,o]=[o,s]),{min:s,max:o}}function calcViewportConstraints(e,r){return{x:calcViewportAxisConstraints(e.x,r.x),y:calcViewportAxisConstraints(e.y,r.y)}}function calcOrigin(e,r){let s=.5;const o=calcLength(e),c=calcLength(r);return c>o?s=progress(r.min,r.max-o,e.min):o>c&&(s=progress(e.min,e.max-c,r.min)),clamp(0,1,s)}function rebaseAxisConstraints(e,r){const s={};return r.min!==void 0&&(s.min=r.min-e.min),r.max!==void 0&&(s.max=r.max-e.min),s}const defaultElastic=.35;function resolveDragElastic(e=defaultElastic){return e===!1?e=0:e===!0&&(e=defaultElastic),{x:resolveAxisElastic(e,"left","right"),y:resolveAxisElastic(e,"top","bottom")}}function resolveAxisElastic(e,r,s){return{min:resolvePointElastic(e,r),max:resolvePointElastic(e,s)}}function resolvePointElastic(e,r){return typeof e=="number"?e:e[r]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(r){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=r}start(r,{snapToCursor:s=!1,distanceThreshold:o}={}){const{presenceContext:c}=this.visualElement;if(c&&c.isPresent===!1)return;const y=v=>{s?(this.stopAnimation(),this.snapToCursor(extractEventInfo(v).point)):this.pauseAnimation()},u=(v,R)=>{this.stopAnimation();const{drag:O,dragPropagation:C,onDragStart:k}=this.getProps();if(O&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(O),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=R,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(Z=>{let X=this.getAxisMotionValue(Z).get()||0;if(percent.test(X)){const{projection:S}=this.visualElement;if(S&&S.layout){const F=S.layout.layoutBox[Z];F&&(X=calcLength(F)*(parseFloat(X)/100))}}this.originPoint[Z]=X}),k&&frame.postRender(()=>k(v,R)),addValueToWillChange(this.visualElement,"transform");const{animationState:K}=this.visualElement;K&&K.setActive("whileDrag",!0)},p=(v,R)=>{this.latestPointerEvent=v,this.latestPanInfo=R;const{dragPropagation:O,dragDirectionLock:C,onDirectionLock:k,onDrag:K}=this.getProps();if(!O&&!this.openDragLock)return;const{offset:Z}=R;if(C&&this.currentDirection===null){this.currentDirection=getCurrentDirection(Z),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",R.point,Z),this.updateAxis("y",R.point,Z),this.visualElement.render(),K&&K(v,R)},d=(v,R)=>{this.latestPointerEvent=v,this.latestPanInfo=R,this.stop(v,R),this.latestPointerEvent=null,this.latestPanInfo=null},x=()=>eachAxis(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:w}=this.getProps();this.panSession=new PanSession(r,{onSessionStart:y,onStart:u,onMove:p,onSessionEnd:d,resumeAnimation:x},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:w,distanceThreshold:o,contextWindow:getContextWindow(this.visualElement),element:this.visualElement.current})}stop(r,s){const o=r||this.latestPointerEvent,c=s||this.latestPanInfo,y=this.isDragging;if(this.cancel(),!y||!c||!o)return;const{velocity:u}=c;this.startAnimation(u);const{onDragEnd:p}=this.getProps();p&&frame.postRender(()=>p(o,c))}cancel(){this.isDragging=!1;const{projection:r,animationState:s}=this.visualElement;r&&(r.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(r,s,o){const{drag:c}=this.getProps();if(!o||!shouldDrag(r,c,this.currentDirection))return;const y=this.getAxisMotionValue(r);let u=this.originPoint[r]+o[r];this.constraints&&this.constraints[r]&&(u=applyConstraints(u,this.constraints[r],this.elastic[r])),y.set(u)}resolveConstraints(){const{dragConstraints:r,dragElastic:s}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,c=this.constraints;r&&isRefObject(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&o?this.constraints=calcRelativeConstraints(o.layoutBox,r):this.constraints=!1,this.elastic=resolveDragElastic(s),c!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(y=>{this.constraints!==!1&&this.getAxisMotionValue(y)&&(this.constraints[y]=rebaseAxisConstraints(o.layoutBox[y],this.constraints[y]))})}resolveRefConstraints(){const{dragConstraints:r,onMeasureDragConstraints:s}=this.getProps();if(!r||!isRefObject(r))return!1;const o=r.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const y=measurePageBox(o,c.root,this.visualElement.getTransformPagePoint());let u=calcViewportConstraints(c.layout.layoutBox,y);if(s){const p=s(convertBoxToBoundingBox(u));this.hasMutatedConstraints=!!p,p&&(u=convertBoundingBoxToBox(p))}return u}startAnimation(r){const{drag:s,dragMomentum:o,dragElastic:c,dragTransition:y,dragSnapToOrigin:u,onDragTransitionEnd:p}=this.getProps(),d=this.constraints||{},x=eachAxis(w=>{if(!shouldDrag(w,s,this.currentDirection))return;let v=d&&d[w]||{};u&&(v={min:0,max:0});const R=c?200:1e6,O=c?40:1e7,C={type:"inertia",velocity:o?r[w]:0,bounceStiffness:R,bounceDamping:O,timeConstant:750,restDelta:1,restSpeed:10,...y,...v};return this.startAxisValueAnimation(w,C)});return Promise.all(x).then(p)}startAxisValueAnimation(r,s){const o=this.getAxisMotionValue(r);return addValueToWillChange(this.visualElement,r),o.start(animateMotionValue(r,o,0,s,this.visualElement,!1))}stopAnimation(){eachAxis(r=>this.getAxisMotionValue(r).stop())}pauseAnimation(){eachAxis(r=>this.getAxisMotionValue(r).animation?.pause())}getAnimationState(r){return this.getAxisMotionValue(r).animation?.state}getAxisMotionValue(r){const s=`_drag${r.toUpperCase()}`,o=this.visualElement.getProps(),c=o[s];return c||this.visualElement.getValue(r,(o.initial?o.initial[r]:void 0)||0)}snapToCursor(r){eachAxis(s=>{const{drag:o}=this.getProps();if(!shouldDrag(s,o,this.currentDirection))return;const{projection:c}=this.visualElement,y=this.getAxisMotionValue(s);if(c&&c.layout){const{min:u,max:p}=c.layout.layoutBox[s],d=y.get()||0;y.set(r[s]-mixNumber$1(u,p,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:r,dragConstraints:s}=this.getProps(),{projection:o}=this.visualElement;if(!isRefObject(s)||!o||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};eachAxis(u=>{const p=this.getAxisMotionValue(u);if(p&&this.constraints!==!1){const d=p.get();c[u]=calcOrigin({min:d,max:d},this.constraints[u])}});const{transformTemplate:y}=this.visualElement.getProps();this.visualElement.current.style.transform=y?y({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),eachAxis(u=>{if(!shouldDrag(u,r,null))return;const p=this.getAxisMotionValue(u),{min:d,max:x}=this.constraints[u];p.set(mixNumber$1(d,x,c[u]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const r=this.visualElement.current,s=addPointerEvent(r,"pointerdown",d=>{const{drag:x,dragListener:w=!0}=this.getProps();x&&w&&!isElementKeyboardAccessible(d.target)&&this.start(d)}),o=()=>{const{dragConstraints:d}=this.getProps();isRefObject(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,y=c.addEventListener("measure",o);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),frame.read(o);const u=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),p=c.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:x})=>{this.isDragging&&x&&(eachAxis(w=>{const v=this.getAxisMotionValue(w);v&&(this.originPoint[w]+=d[w].translate,v.set(v.get()+d[w].translate))}),this.visualElement.render())}));return()=>{u(),s(),y(),p&&p()}}getProps(){const r=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:o=!1,dragPropagation:c=!1,dragConstraints:y=!1,dragElastic:u=defaultElastic,dragMomentum:p=!0}=r;return{...r,drag:s,dragDirectionLock:o,dragPropagation:c,dragConstraints:y,dragElastic:u,dragMomentum:p}}}function shouldDrag(e,r,s){return(r===!0||r===e)&&(s===null||s===e)}function getCurrentDirection(e,r=10){let s=null;return Math.abs(e.y)>r?s="y":Math.abs(e.x)>r&&(s="x"),s}class DragGesture extends Feature{constructor(r){super(r),this.removeGroupControls=noop,this.removeListeners=noop,this.controls=new VisualElementDragControls(r)}mount(){const{dragControls:r}=this.node.getProps();r&&(this.removeGroupControls=r.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop}update(){const{dragControls:r}=this.node.getProps(),{dragControls:s}=this.node.prevProps||{};r!==s&&(this.removeGroupControls(),r&&(this.removeGroupControls=r.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=e=>(r,s)=>{e&&frame.postRender(()=>e(r,s))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop}onPointerDown(r){this.session=new PanSession(r,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:r,onPanStart:s,onPan:o,onPanEnd:c}=this.node.getProps();return{onSessionStart:asyncHandler(r),onStart:asyncHandler(s),onMove:o,onEnd:(y,u)=>{delete this.session,c&&frame.postRender(()=>c(y,u))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",r=>this.onPointerDown(r))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:r,layoutGroup:s,switchLayoutGroup:o,layoutId:c}=this.props,{projection:y}=r;y&&(s.group&&s.group.add(y),o&&o.register&&c&&o.register(y),hasTakenAnySnapshot&&y.root.didUpdate(),y.addEventListener("animationComplete",()=>{this.safeToRemove()}),y.setOptions({...y.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(r){const{layoutDependency:s,visualElement:o,drag:c,isPresent:y}=this.props,{projection:u}=o;return u&&(u.isPresent=y,hasTakenAnySnapshot=!0,c||r.layoutDependency!==s||s===void 0||r.isPresent!==y?u.willUpdate():this.safeToRemove(),r.isPresent!==y&&(y?u.promote():u.relegate()||frame.postRender(()=>{const p=u.getStack();(!p||!p.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:r}=this.props.visualElement;r&&(r.root.didUpdate(),microtask.postRender(()=>{!r.currentAnimation&&r.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:r,layoutGroup:s,switchLayoutGroup:o}=this.props,{projection:c}=r;hasTakenAnySnapshot=!0,c&&(c.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(c),o&&o.deregister&&o.deregister(c))}safeToRemove(){const{safeToRemove:r}=this.props;r&&r()}render(){return null}}function MeasureLayout(e){const[r,s]=usePresence(),o=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...e,layoutGroup:o,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:r,safeToRemove:s})}const drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(e,r,s){const{props:o}=e;e.animationState&&o.whileHover&&e.animationState.setActive("whileHover",s==="Start");const c="onHover"+s,y=o[c];y&&frame.postRender(()=>y(r,extractEventInfo(r)))}class HoverGesture extends Feature{mount(){const{current:r}=this.node;r&&(this.unmount=hover(r,(s,o)=>(handleHoverEvent(this.node,o,"Start"),c=>handleHoverEvent(this.node,c,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let r=!1;try{r=this.node.current.matches(":focus-visible")}catch{r=!0}!r||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(e,r,s){const{props:o}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&o.whileTap&&e.animationState.setActive("whileTap",s==="Start");const c="onTap"+(s==="End"?"":s),y=o[c];y&&frame.postRender(()=>y(r,extractEventInfo(r)))}class PressGesture extends Feature{mount(){const{current:r}=this.node;r&&(this.unmount=press(r,(s,o)=>(handlePressEvent(this.node,o,"Start"),(c,{success:y})=>handlePressEvent(this.node,c,y?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=e=>{const r=observerCallbacks.get(e.target);r&&r(e)},fireAllObserverCallbacks=e=>{e.forEach(fireObserverCallback)};function initIntersectionObserver({root:e,...r}){const s=e||document;observers.has(s)||observers.set(s,{});const o=observers.get(s),c=JSON.stringify(r);return o[c]||(o[c]=new IntersectionObserver(fireAllObserverCallbacks,{root:e,...r})),o[c]}function observeIntersection(e,r,s){const o=initIntersectionObserver(r);return observerCallbacks.set(e,s),o.observe(e),()=>{observerCallbacks.delete(e),o.unobserve(e)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:r={}}=this.node.getProps(),{root:s,margin:o,amount:c="some",once:y}=r,u={root:s?s.current:void 0,rootMargin:o,threshold:typeof c=="number"?c:thresholdNames[c]},p=d=>{const{isIntersecting:x}=d;if(this.isInView===x||(this.isInView=x,y&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:w,onViewportLeave:v}=this.node.getProps(),R=x?w:v;R&&R(d)};return observeIntersection(this.node.current,u,p)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:r,prevProps:s}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(r,s))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:e={}},{viewport:r={}}={}){return s=>e[s]!==r[s]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement);function OptimadeNoResults({queryUrl:e,currentFilter:r}){const s=`${e}/structures?filter=${encodeURIComponent(r)}`,o=`${e}/structures?filter=${decodeURIComponent(r)}`;return jsxRuntimeExports.jsxs("div",{className:`${warningContainerStyle} ${textSmall}`,children:[jsxRuntimeExports.jsx("strong",{className:"font-semibold",children:"Warning: "}),"No results returned for this query. Try to relax the filters.",jsxRuntimeExports.jsxs("p",{className:"pt-2",children:["Attempted Query:"," ",jsxRuntimeExports.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:`${textHyperlink} break-all`,children:o})]})]})}var dist={},Navbar={};const mcloud_logo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGIAAABPCAYAAAAQlxDmAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QgeDQk2h9q0aQAADmpJREFUeNrtXXuYU9W1/61zkgzDc2ByMuM45GR4fDyGZHiM16uFXm2V6idWKWpLa6Gg9oHaa1Xwtra0Kn0/KKKoxVKxLVKq9T7Ui9ZPvNZXZQAzmaBYYJLMMDBJEMSBYSY5Z90/Mthz9jxIhuRMBrP+y87JPnvt317PvfYOUKACFahABSpQz0SDefDbAFupe9SIU5/ldkeiOhZrKwCRQwpWw5FsK50tMc1hovMATAagArAJjx4mpn0gfQcTvZXU+IWZTfGWAhBnSIGxzlqWaBmAawCM6EcXDEIdM/8mkXBsqm1pOVEAIu2ZAwVU50IQ3QbGeVns+igYj9mIfzY1HD9YAKIP8o8tm0ayvg6MOWmy0Anw8S4Vla7EfECM770Tia27DtAKQBiobhbsjphyLwh3ALD38ti7BLykE79qk7TX2k8Wx42qhgFpd+XIkiQVVUPCJwmYDeAiAEN66W8HSbTU2xitLwABoK6iwumwJ/7cNWkitRGwWSfp0ZpQ698zNvKVI8foUtH1TLgJwLQeHjlOoEXecPQvH2sgGsaWnqdL0tMAzhW+0pjwoI7E92eEjh7NitpzO68kojUAqrrZJcL9vlDsWwToHzsggu4xUzWSXwUwWvhqD4GWesPR17P9zncnOUd0nqQfAri1+2Twz73h+IqPFRDBcaPdmmZ7A0CF8NWT8gksyXVgFnA75zHRHwCMEmTjDl84/quPBRBBRRmuDcXLAGYJDv8vfeHoCqvUw9uqMkMCngegmFQi8/yaSPx/rJwTaSCA0IrxQE8g1ISjd1qpo6eHY7tYlz4F0PuGZpmIngiMdY0/q4EIVLnmgrBIkMstvnB0QHRzTVNrA0j/HIAOQ/MwlviBsxaIf0yYUMQ6PySoxD2dnfYlA+WtAIAvFP8/ZtwlNF/mdyvXnJVAnEgeWwpgnFFLEWhpPuR/fJHYWjBeMQkqYdUWQD6rgKibBTtYv0vw3R/MhYvaT69Fl3XcACBpaJ40xWONVFgGhD2mXEUg1dDULhH9CHlE1c2xvQQ8ZlosjNvOLtVEWGxmkDd6G6OtyDPSZP45zInA8+s9pZPPCiACqms+AfNMQMj8O+QhTd8ffw/gOnPATWuD1XAMWiCCHqXcr7p+wcDmbi/WZTkfgWCAQDRUEOdLtDblLb9HuWzQRdZ+1XkjgdaitxQ0owng+b5IfEe+gFA3C3ZHXHkEwJI+HnvWnnQsnnLgwOG8lwi/R1lMoPXofR8AIIwF0StvV5X+S74A4Tis/PE0IADAFQlb5zN1s3rdM8kPIOrdo0YTo6eo9CSAhNA2VNKlhzkP0vEB1TUfjGt7+OrDHtr+1R53ZdWbouwDodwFwk8MTUdZ58V7muLPVldD1tqUmwCsgSFQIuYfMOTXBgwFCcOYtTVG95qB1ySdFnubovuCHqVcY34IoKsNv2odQcM8VaHQybwDom7c6FEOzbYbxtQ289d8kfhvTGCpyloAtyB/6YRMGF8dih36iLeKiqEOW+JdEMYaY4yaSGxN3qimf0yYUFSvKrc4NNvbEPYXNMn2Qjf0mZ9HflO9EQQAqG1pOQEiMQWyut6j/Cmglk4ZUCC2AHK9qtzcnvhgH4C1ADziMzLr54htOqE8z4HobXzndNMojOsYUkO96tp0JqnzfqumYKUyQZOxEcCFp3HMX+hUYvNqd6QM9S5PSYnM9u0AJghPHgawB2ArE4CUmnSa2m0umL/qi8TXf2TMq1xzWeetp5mz40y03BeKPkwA5xwIv8e5kJjWAxiWrqgD+G8QO8D0RQCVwjBWy8Oj/1EdROeA6CG3cxaIngVQZo7t8BQDbxNjIghfQvfyzt5oa7Fd+/zEve8fyxkQ9W7nTSB6uAe19iEBaxm8G6DbANSm2eV+bzg2cSD3IwwB6Po0H08Q8w9ZojAxbuBU/ZRIO9kmXV6zrzWadRvhV13LQPRI99/RE0mdJ3vDsbt94fgfNUpcCkIgzZTC7oEGIbUipWDaIIA+743E7/GFYo95w7E5BFoAoFl4biYl9Vd2TihXsgpEwO26lMD3C1LUDsJSXzj6RWPF9YzQ0aPFNm02A7/tIYgTRXIaD9DeuWB1p6ajEHRJn+0NR582NnrD0b+QRLXixhKASXJC+9O2NFQapaeOysaBeDvAY8wRJ33GF46+0acUjS9zIaF/koDxXW/8NwCXC2JxnS8S+/NAgcCAVK8qOwiYbmhuIcIDrEMHiEH42+l4TeWqnFuEwO+jwogzB0J1/hWgS0ySIOEyX2PslX4y/SIBF/+zjcOJhGPqQG2ZBjyurzPzQ8ZhSkxzpkWiGUf7wWo4tDblP4XFxkzSBX2VjJ5WJfhV1wIBBBBwS39A6PqtbtPw1a7cU1cbqUX2zh8MBAg7xzormPmn5kHS+v6AAADVQXTKJ3BdyhU39Mj6Q32pYOl0AZvE/GPBv/4vbzi24UyYr26O7QVhjSC+3/RXOSdZDYRNovsAjDQ0HWGZvndG/MVibUzSV2B2QmY09FEV0icQU9zOy5kw0dDUYZPt/56NCWhLFt0DYL+hqYiY1luZiW1QnRcDWGpeELwiXZezL6oJtb4JYKOpb+p9/7tPIHSiJWZh4N9NbTwYzsYkXNjc3E6g5YIBmROwqJZoG2DTQauF5h17wvGsbeEypPtgrgq5oLf9716B2OUpKSHgSlPeSJYezuZkdJ1J2CoYkV8FFWV4roFwupVlAGqM606X9GXZPEFUE25tZIE/1qVFGQFhY9snYD6545/WGPVne0JkDbcaDTeASn0or8wlCEGPUs6EewUD/ej0xsNv5cA33mh+TY+HcXoHgonmCB3+by4mpbo5thfgHwmG+/agR5meKyC01MaUsRz/YLEtuTwX7yoq5udhlrLauoqKoenbCOZaM5K0PVcT06YN+YVguGWNsToXhjvgcV4kbokyeGUmCbpMaPKe+IcA3jM02e0OzZeBsaYy0yqS9YZcAXFhc3M7MYve2EUB1bkwm++pmwU7p/bTjQC/6QvHNyCXRGgQYqmyTLymUpOIdRQdzuVYvZH4MwQ8JXCwut49anS23mGPK8sBqjYm8HSWb8x10pEYMfNn3ZkJECUmkT5w4ChyTEmS7wRgTHO4AEdWDLf/3DGVBHxbaH5keuRQELknYe64JBMgjAc3UFlZ6cj1aGeEDoXAdI8g1t/MRu0T2aS1AIxu8QHHEP6OFTGLDioSnJGODIy1uZ5nCJ0cbcWgix0j1wjGTZJ16ZdnYrgDVa653TKiTN/pMqQ5JzJnrcFMx9IHQkLI5O9LPNmKQU/cu7eDddwIw54vA7MDbueN/emv0eMZwjqvE6bmpZpI9HELU1qTBI+0Mf04gk2rEhLkmVaNuqYp9jeIhptoVX8M9zE+fgdO7YV0mSJodJtVvHSVZprcVclG76UNhAS8ISBziYUrCJzUvgXAeNbaReRYlUkfuzzlHgIEO0Brfc2tAav4cLyvXCDYpsaezoX0IRHSNnOkjU8HqlxllknFgfebGXSv2Wzha37VmbZkytDXADBGsS2OIfr3rVxQpPMXBB5eyijF4Yu07gewy5h+0nW+wUomEs7orwHabZxbAtals8cdcDvngfmz5sXEd1hloIHUdRMMWigEc09lBETXwB8XOrm1pzxJrqh2BxJE+s0wFWvR+QG3s88F8XplZTGnLj8xG+hQfLOVC6mzXfqGEI8dOhyO/TVjIIba9A0Ajhiayh2OTktF2xuKvwzQJsFw/9g/vszV229GyB3fhekYMXUSNEuLnv3njqkE8d1CSPDri837E+kBkUqE8WpBTG5vcLs+YSVTNujLARh971Ipqa/rcQI8ZeczsELIMaz2hg+/Y5mjAUhklzfAvAUbldvxYB/OUd/UlRltNNkKwqadY50VVjE2NRw/yIyVArML/KpydzcvifUnYawjYjRxu3SflQun3uNaCcalQlR3V1837qQVrQbcrkuZeKsJOEIgaZM/PXPvoZgVzG0DbKUeZScYXoGFTSRhI2u6B6lz26VCOuGamnD0KctAUJWbAfHEFL/oDcfn9lWYnHbaIKAqqxi4W2jeq8t8RepIrAV6V3UtIPCTmcRTvnDsPKvUUYOq3NvDHB0kiWac7kx52qWO08KxldT9mO4ESaPtfo/zC5bYCu3ktsyceH7JinEFPUp5QFWe6QGEYwyel87B/rSBIECXhscWA3ha+GokMT1RryrP1ruds3LJsE5DMkxxSCU5BUBRhterzts1xjsQy0iBDyDhyppwfGea85sZbQHkKapyPwPLeunwVZ3wqGaTn8um/Xi9srJ4mNyxRbzBAKlc/+tInbkQtyBPSExz+1u11xv/kzxltcT6lwB8WYgTTlGzJNG8TIot+p9adruuZ+J16P3SWwbwLoAgg0NE1P8yFcYwMK4yHiTsopc7E/Zra1ta4inX1bmQmP4gSHqSga0S+B0m0s9AHEtAPAnATMEtFem5zoR98akx5RwIoOuCxKR8P4iuwgCQRnLVjNChkNmgOx8n0JcHYDgxZrrTF4n+PtNjWxnZiJ6oev+RiC8Sv1pims3AM7D2wMkxEYQUQ5LVtxq3MGiFYwiPr4lEH+8PCGcsESLtrjpHTeqJRQCuAKgWOb79qyeJqFedvwfo+hxPfitALxLrm+OR+Nbe0hYDBoTJgR83elRRQp7IRFUskZN0HtlvE0GkADyJgMtgPn3zcqecvLp2/5EPAKDerVwLwmZB0g8y8ByBw2Dq32FJiTsBOgpdaiLmxmlN0f39XfmWA5Gb1IGyBIwN3VYn85sgUgBcYOKJsJ3bpYtrWluP5ztvg+6vbQKq8iQDC9J4tE3WMCNV0pn/JA02IDoS9kXEON0VEkfA0vzBAsKglIhTeZ2AqixDKqg03oPRAcYTxLTK2xTdN5h4GtT/unUqzwOgPEncnuhwNOXrfwgVqEAFKlCBCtRf+n97Y2CaOfCNbwAAAABJRU5ErkJggg==",mcloud_logo$1=Object.freeze(Object.defineProperty({__proto__:null,default:mcloud_logo},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(mcloud_logo$1);var hasRequiredNavbar;function requireNavbar(){if(hasRequiredNavbar)return Navbar;hasRequiredNavbar=1,Object.defineProperty(Navbar,"__esModule",{value:!0}),Navbar.default=void 0;var e=o(require$$1),r=s(requireReact());function s(d,x){if(typeof WeakMap=="function")var w=new WeakMap,v=new WeakMap;return(s=function(R,O){if(!O&&R&&R.__esModule)return R;var C,k,K={__proto__:null,default:R};if(R===null||typeof R!="object"&&typeof R!="function")return K;if(C=O?v:w){if(C.has(R))return C.get(R);C.set(R,K)}for(const Z in R)Z!=="default"&&{}.hasOwnProperty.call(R,Z)&&((k=(C=Object.defineProperty)&&Object.getOwnPropertyDescriptor(R,Z))&&(k.get||k.set)?C(K,Z,k):K[Z]=R[Z]);return K})(d,x)}function o(d){return d&&d.__esModule?d:{default:d}}const c={learn:{name:"LEARN",link:"https://www.materialscloud.org/learn"},work:{name:"WORK",link:"https://www.materialscloud.org/work"},discover:{name:"DISCOVER",link:"https://www.materialscloud.org/discover"},explore:{name:"EXPLORE",link:"https://www.materialscloud.org/explore"},archive:{name:"ARCHIVE",link:"https://www.materialscloud.org/archive"}},y={policies:{name:"Policies",link:"https://www.materialscloud.org/policies"},dmp:{name:"Data Management Plan",link:"https://www.materialscloud.org/dmp"},terms:{name:"Terms of Use",link:"https://www.materialscloud.org/termssummary"},infrastructure:{name:"Infrastructure",link:"https://www.materialscloud.org/infrastructure"},team:{name:"Team & Contact",link:"https://www.materialscloud.org/team"},partners:{name:"Partners",link:"https://www.materialscloud.org/home#partners"},restapi:{name:"Connect your REST API",link:"https://www.materialscloud.org/explore/connect"}},u=d=>{let{activeSection:x}=d;const[w,v]=(0,r.useState)(!1),R=(0,r.useRef)(null);(0,r.useEffect)(()=>{function k(K){R.current&&!R.current.contains(K.target)&&v(!1)}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const O=()=>v(k=>!k),C="dropdown-content"+(w?" dropdown-open":"");return r.default.createElement("div",{ref:R,className:"more-dropdown"},r.default.createElement("span",{className:"more-btn",onClick:O},"More ",r.default.createElement("i",{className:"fa fa-caret-down"})),r.default.createElement("div",{className:C},Object.keys(y).map((k,K)=>{const{link:Z,name:X}=y[k],S=k===x?"active":"";return r.default.createElement("a",{key:K,className:S,href:Z},X)})))},p=d=>{let{activeSection:x}=d;return r.default.createElement("div",{className:"mc-navbar"},r.default.createElement("a",{className:"mc-navbrand",href:"https://www.materialscloud.org/home"},r.default.createElement("img",{src:e.default,loading:"lazy",height:"50",alt:"MC logo"})),Object.keys(c).map((w,v)=>{let R="mc-navlink";return w===x&&(R+=" active"),r.default.createElement("a",{key:v,className:R,href:c[w].link},c[w].name)}),r.default.createElement(u,{activeSection:x}))};return Navbar.default=p,Navbar}var Breadcrumbs={},hasRequiredBreadcrumbs;function requireBreadcrumbs(){if(hasRequiredBreadcrumbs)return Breadcrumbs;hasRequiredBreadcrumbs=1,Object.defineProperty(Breadcrumbs,"__esModule",{value:!0}),Breadcrumbs.default=void 0;var e=r(requireReact());function r(o){return o&&o.__esModule?o:{default:o}}const s=o=>{let{breadcrumbsPath:c}=o;return e.default.createElement("ul",{className:"mc-breadcrumb"},c.map((y,u)=>e.default.createElement("li",{key:u},e.default.createElement("a",{href:y.link},y.name))))};return Breadcrumbs.default=s,Breadcrumbs}var hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1,Object.defineProperty(dist,"__esModule",{value:!0}),dist.default=void 0;var e=o(requireReact()),r=o(requireNavbar()),s=o(requireBreadcrumbs());function o(y){return y&&y.__esModule?y:{default:y}}const c=y=>{let{activeSection:u,breadcrumbsPath:p}=y;return e.default.createElement("div",null,e.default.createElement(r.default,{activeSection:u}),e.default.createElement(s.default,{breadcrumbsPath:p}))};return dist.default=c,dist}var distExports=requireDist();const MaterialsCloudHeader=getDefaultExportFromCjs(distExports);function OptimadeChildInfo({child:e}){const r=e?.id==="__custom__",{data:s,isLoading:o,isError:c}=useQuery({queryKey:["custom-provider-info",e?.base_url],queryFn:()=>getCustomInfo({baseUrl:e.base_url}),enabled:!!(r&&e?.base_url),staleTime:1e3*60*60,retry:0});if(!e)return null;const y=r?s?.meta?.provider:e;if(r&&o)return jsxRuntimeExports.jsxs("div",{className:`${containerStyle} ${textTiny} h-35 flex items-center justify-center`,children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-blue-500 rounded-full animate-spin mr-2"}),jsxRuntimeExports.jsx("p",{children:"Fetching provider info..."})]});if(r&&c)return jsxRuntimeExports.jsxs("div",{className:`${containerStyle} ${textTiny} h-25 overflow-auto`,children:[jsxRuntimeExports.jsx("p",{className:"pb-1",children:"Could not retrieve information. Please check if the base URL is correct and OPTIMADE-compliant, it's unlikely any queries will preceed..."}),e?.base_url&&jsxRuntimeExports.jsxs("p",{children:["Submitted url:"," ",jsxRuntimeExports.jsx("a",{href:e.base_url,target:"_blank",rel:"noopener noreferrer",className:textHyperlink,children:e.base_url})]})]});if(r&&!y)return null;const{name:u,description:p,homepage:d,base_url:x}=y||{},w=r?e.base_url:x;return jsxRuntimeExports.jsxs("div",{className:`${containerStyle} ${textTiny} h-35 overflow-auto`,children:[jsxRuntimeExports.jsx("h3",{className:`${textNormal} pb-1.5`,children:r?`Provider information: ${u||"Unknown"}`:`${u}`}),p&&jsxRuntimeExports.jsx("p",{className:"pb-1",children:p}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[d&&jsxRuntimeExports.jsxs("p",{children:["Homepage:"," ",jsxRuntimeExports.jsx("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:textHyperlink,children:d})]}),w&&jsxRuntimeExports.jsxs("p",{children:[r?"Database base url":"Base url",":"," ",jsxRuntimeExports.jsx("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:textHyperlink,children:w})]})]})]})}function OptimadeParentInfo({provider:e,providers:r}){if(!e||!r)return null;const s=r.find(d=>d.attributes?.base_url===e.attributes?.base_url);if(!s)return jsxRuntimeExports.jsxs("div",{className:`${containerStyle} h-35 overflow-auto ${textTiny}`,children:[jsxRuntimeExports.jsx("h3",{className:`${textNormal} pb-1.5`,children:"Unknown top level provider"}),jsxRuntimeExports.jsx("p",{children:"This is not neccessarily a problem and usually occurs when using the Custom endpoint. Queries will proceed as usual..."})]});const{name:o,description:c,homepage:y,base_url:u,...p}=s.attributes??{};return jsxRuntimeExports.jsxs("div",{className:`${containerStyle} h-35 overflow-auto ${textTiny}`,children:[jsxRuntimeExports.jsx("h3",{className:`${textNormal} pb-1.5`,children:o}),c&&jsxRuntimeExports.jsx("p",{className:"pb-1",children:c}),y&&jsxRuntimeExports.jsxs("p",{children:["Homepage:"," ",jsxRuntimeExports.jsx("a",{href:y,target:"_blank",rel:"noopener noreferrer",className:textHyperlink,children:y})]}),u&&jsxRuntimeExports.jsxs("p",{children:["Index metadb:"," ",jsxRuntimeExports.jsx("a",{href:`${u}/v1/links`,target:"_blank",rel:"noopener noreferrer",className:textHyperlink,children:`${u}/v1/links`})]})]})}function ParentProviderDropdown({providers:e,selectedProvider:r,onSelectProvider:s}){const o=r?r.id==="__custom__"?"__custom__":r.attributes.base_url:"__none__";return jsxRuntimeExports.jsxs("select",{className:longSlateDropdown,value:o,onChange:c=>{const y=c.target.value;if(y==="__custom__")s({id:"__custom__",attributes:{base_url:""}});else{const u=e.find(p=>p.attributes?.base_url===y);s(u||null)}},children:[jsxRuntimeExports.jsx("option",{value:"__none__",disabled:!0,children:"Select a provider"}),e.map(c=>jsxRuntimeExports.jsx("option",{value:c.attributes?.base_url||"",children:`${c.id}: ${c.attributes?.name}`},c.attributes?.id??c.id??c.attributes?.base_url)),jsxRuntimeExports.jsx("option",{value:"__custom__",children:"Custom endpoint"})]})}function ChildProviderDropdown({selectedProvider:e,selectedChild:r,onSelectChild:s,childEntries:o,loadingChildren:c}){const[y,u]=reactExports.useState(r?.id==="__custom__"?r.base_url:""),p=reactExports.useRef(y);return reactExports.useEffect(()=>{!e||e.id==="__custom__"||c||(o.length===1?(!r||r.id!==o[0].id)&&s(o[0]):o.length>1?r&&!o.find(d=>d.id===r.id)&&s(null):r!==null&&s(null))},[e,o,c,r,s]),reactExports.useEffect(()=>{e&&e.id==="__custom__"&&(!r||r.base_url!==p.current)&&(s({id:"__custom__",name:"Custom Endpoint",base_url:p.current}),u(p.current))},[e,r,s]),e?e.id==="__custom__"?jsxRuntimeExports.jsxs("form",{className:"flex gap-2 items-center",onSubmit:d=>{d.preventDefault();const x={id:"__custom__",name:"Custom Endpoint",base_url:y};p.current=y,s(x)},children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter custom endpoint URL",className:"flex-1 ring-1 ring-slate-300 rounded-sm px-2 py-1",value:y,onChange:d=>u(d.target.value)}),jsxRuntimeExports.jsx("button",{className:`${baseButtonStyle} rounded-sm md:py-1!`,type:"submit",children:"Submit"})]}):jsxRuntimeExports.jsx("select",{className:longSlateDropdown,value:r?.id||"",onChange:d=>{const x=o.find(w=>w.id===d.target.value);s(x||null)},disabled:c,children:c?jsxRuntimeExports.jsx("option",{children:"Loading"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("option",{value:"",disabled:!0,children:"Select a subdatabase"}),o.map(d=>jsxRuntimeExports.jsx("option",{value:d.id,children:`${d.id}: ${d.name}`},d.id))]})}):null}function OptimadeClient({hideProviderList:e=["exmpl","matcloud"]}){const[r,s]=useSearchParams(),o=r.get("base_url"),c=r.get("provider"),y=r.get("db"),u=!!o,p=reactExports.useRef(""),[d,x]=reactExports.useState(u?{id:"__custom__",base_url:""}:null),[w,v]=reactExports.useState(u?{id:"__custom__",base_url:o}:null),[R,O]=reactExports.useState(""),[C,k]=reactExports.useState(1),[K,Z]=reactExports.useState(null);reactExports.useEffect(()=>{k(1)},[w]);const{data:X}=useQuery({queryKey:["providers",e],queryFn:()=>getProvidersList(void 0,e),staleTime:1/0}),S=X?.data??[],{data:F,isLoading:B}=useQuery({queryKey:["provider-links",d?.attributes?.base_url],queryFn:()=>getProviderLinks(d.attributes.base_url),enabled:!!d?.attributes?.base_url,staleTime:1/0}),W=F?.children?.map(Ce=>({id:Ce.id,...Ce.attributes??{}}))??[];reactExports.useEffect(()=>{if(u||!S.length||!c)return;const Ce=S.find(ue=>ue.id===c);Ce&&x(Ce)},[S,c,u]),reactExports.useEffect(()=>{if(!(u||!y||!W.length)&&!w){const Ce=W.find(ue=>ue.id===y);Ce&&v(Ce)}},[W,y,u,!!w]),reactExports.useEffect(()=>{const Ce=d?.id==="__custom__",ue=new URLSearchParams;if(Ce){const se=w?.base_url||o;se&&ue.set("base_url",se)}else d?.id&&(ue.set("provider",d.id),w?.id&&w.id!=="__custom__"?ue.set("db",w.id):y&&!w&&ue.set("db",y));ue.sort();const L=ue.toString(),he=new URLSearchParams(window.location.search).toString();L!==he&&L!==p.current&&(p.current=L,s(ue,{replace:!0}))},[d?.id,w?.id,w?.base_url,u]);const J=Ce=>{Ce?.id!==d?.id&&(x(Ce),v(null),Ce?.id==="__custom__"&&v({id:"__custom__",base_url:o||""}))},N=Ce=>{v(Ce)},{data:ee,isLoading:Se}=useQuery({queryKey:["structures",w?.base_url,R,C],queryFn:()=>getStructures({providerUrl:w?.base_url,filter:R,page:C}),enabled:!!w?.base_url,staleTime:120*1e3,keepPreviousData:!0}),ce=ee?.data??[],ge=ee?.meta??{data_returned:0,data_available:0},me=ge.data_returned!=null?Math.max(1,Math.ceil(ge.data_returned/20)):1;return reactExports.useEffect(()=>{Z(ce[0]??null)},[ce]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MaterialsCloudHeader,{className:"header",activeSection:"work",breadcrumbsPath:[{name:"Work",link:"https://www.materialscloud.org/work"},{name:"OPTIMADE-Client",link:null}]}),jsxRuntimeExports.jsx("div",{className:"min-h-screen max-w-5xl mx-auto bg-white mb-4 shadow-md rounded-xs",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center w-full px-2 md:px-4 py-2",children:[jsxRuntimeExports.jsx(OptimadeHeader,{}),jsxRuntimeExports.jsx("div",{className:"p-2 w-full",children:jsxRuntimeExports.jsx(OptimadeFAQs,{})}),jsxRuntimeExports.jsxs("div",{className:"pt-4 p-2 w-full flex flex-col gap-2 max-w-[650px]",children:[jsxRuntimeExports.jsx(ParentProviderDropdown,{providers:S,selectedProvider:d,onSelectProvider:J}),jsxRuntimeExports.jsx(ChildProviderDropdown,{selectedProvider:d,selectedChild:w,onSelectChild:N,childEntries:W,loadingChildren:B})]}),jsxRuntimeExports.jsxs("div",{className:`flex flex-col md:flex-row w-full max-w-5xl px-2 md:px-4 py-2 gap-4 ${d?.id==="__custom__"?"justify-center":""}`,children:[d?.id!="__custom__"&&jsxRuntimeExports.jsx("div",{className:"md:w-1/2 w-full",children:jsxRuntimeExports.jsx(OptimadeParentInfo,{provider:d,providers:S})}),jsxRuntimeExports.jsx("div",{className:`w-full ${d?.id==="__custom__"?"md:w-2/3 lg:w-1/2":"md:w-1/2"}`,children:jsxRuntimeExports.jsx(OptimadeChildInfo,{child:w})})]}),jsxRuntimeExports.jsx("div",{className:"p-2 w-full",children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:w?.base_url?1:0,y:w?.base_url?0:20},transition:{duration:.3,ease:"easeInOut"},className:`${containerStyle} ${w?.base_url?"":"pointer-events-none"}`,children:jsxRuntimeExports.jsx(OptimadeFilters,{queryUrl:w?.base_url||"",onSubmit:Ce=>{O(Ce),k(1)}})})}),jsxRuntimeExports.jsx("div",{className:"p-2 w-full",children:jsxRuntimeExports.jsx(OptimadeProviderInfo,{queryUrl:w?.base_url})}),w?.base_url&&jsxRuntimeExports.jsxs("div",{className:"px-2 md:px-4 w-full min-h-[726px] md:min-h-[621px] relative",children:[jsxRuntimeExports.jsx("div",{className:"border-b border-slate-300 py-2"}),!Se&&!K&&R&&jsxRuntimeExports.jsx("div",{className:"p-2",children:jsxRuntimeExports.jsx(OptimadeNoResults,{queryUrl:w?.base_url,currentFilter:R})}),Se&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex justify-center items-center bg-white/70 z-1000",children:jsxRuntimeExports.jsx("div",{className:"w-16 h-16 border-4 border-gray-300 border-t-blue-500 rounded-full animate-spin"})}),ce.length>0&&K&&jsxRuntimeExports.jsxs("div",{className:"relative py-1 md:py-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-end gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(ResultsDropdown,{results:ce,selectedResult:K,setSelectedResult:Z})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(PaginationHandler,{currentPage:C,totalPages:me,metaData:ge,onPageChange:k})})]}),jsxRuntimeExports.jsx("div",{className:"py-4",children:jsxRuntimeExports.jsx(ResultViewer,{selectedResult:K})})]})]})]})})]})}const badProviders=["exmpl","aiida","aflow","ccdc","ccpnc","httk","matcloud","mpds","mpod","optimake","optimade","pcod","psdi"];function App(){return jsxRuntimeExports.jsx(OptimadeClient,{hideProviderList:badProviders})}const queryClient=new QueryClient({defaultOptions:{queries:{staleTime:3600*1e3,refetchOnWindowFocus:!1,retry:1}}});clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})})})}));
