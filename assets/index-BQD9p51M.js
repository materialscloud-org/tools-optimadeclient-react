(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))u(h);new MutationObserver(h=>{for(const _ of h)if(_.type==="childList")for(const l of _.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&u(l)}).observe(document,{childList:!0,subtree:!0});function s(h){const _={};return h.integrity&&(_.integrity=h.integrity),h.referrerPolicy&&(_.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?_.credentials="include":h.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function u(h){if(h.ep)return;h.ep=!0;const _=s(h);fetch(h.href,_)}})();function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var i=t.default;if(typeof i=="function"){var s=function u(){var h=!1;try{h=this instanceof u}catch{}return h?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};s.prototype=i.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(u){var h=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(s,u,h.get?h:{enumerable:!0,get:function(){return t[u]}})}),s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var t=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),l=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),v=Symbol.iterator;function R(fe){return fe===null||typeof fe!="object"?null:(fe=v&&fe[v]||fe["@@iterator"],typeof fe=="function"?fe:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,I={};function K(fe,De,He){this.props=fe,this.context=De,this.refs=I,this.updater=He||z}K.prototype.isReactComponent={},K.prototype.setState=function(fe,De){if(typeof fe!="object"&&typeof fe!="function"&&fe!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,fe,De,"setState")},K.prototype.forceUpdate=function(fe){this.updater.enqueueForceUpdate(this,fe,"forceUpdate")};function J(){}J.prototype=K.prototype;function X(fe,De,He){this.props=fe,this.context=De,this.refs=I,this.updater=He||z}var b=X.prototype=new J;b.constructor=X,C(b,K.prototype),b.isPureReactComponent=!0;var F=Array.isArray,B=Object.prototype.hasOwnProperty,$={current:null},Q={key:!0,ref:!0,__self:!0,__source:!0};function N(fe,De,He){var oe,Ce={},We=null,qe=null;if(De!=null)for(oe in De.ref!==void 0&&(qe=De.ref),De.key!==void 0&&(We=""+De.key),De)B.call(De,oe)&&!Q.hasOwnProperty(oe)&&(Ce[oe]=De[oe]);var Fe=arguments.length-2;if(Fe===1)Ce.children=He;else if(1<Fe){for(var rt=Array(Fe),ot=0;ot<Fe;ot++)rt[ot]=arguments[ot+2];Ce.children=rt}if(fe&&fe.defaultProps)for(oe in Fe=fe.defaultProps,Fe)Ce[oe]===void 0&&(Ce[oe]=Fe[oe]);return{$$typeof:t,type:fe,key:We,ref:qe,props:Ce,_owner:$.current}}function ee(fe,De){return{$$typeof:t,type:fe.type,key:De,ref:fe.ref,props:fe.props,_owner:fe._owner}}function Se(fe){return typeof fe=="object"&&fe!==null&&fe.$$typeof===t}function ue(fe){var De={"=":"=0",":":"=2"};return"$"+fe.replace(/[=:]/g,function(He){return De[He]})}var ge=/\/+/g;function me(fe,De){return typeof fe=="object"&&fe!==null&&fe.key!=null?ue(""+fe.key):De.toString(36)}function Me(fe,De,He,oe,Ce){var We=typeof fe;(We==="undefined"||We==="boolean")&&(fe=null);var qe=!1;if(fe===null)qe=!0;else switch(We){case"string":case"number":qe=!0;break;case"object":switch(fe.$$typeof){case t:case i:qe=!0}}if(qe)return qe=fe,Ce=Ce(qe),fe=oe===""?"."+me(qe,0):oe,F(Ce)?(He="",fe!=null&&(He=fe.replace(ge,"$&/")+"/"),Me(Ce,De,He,"",function(ot){return ot})):Ce!=null&&(Se(Ce)&&(Ce=ee(Ce,He+(!Ce.key||qe&&qe.key===Ce.key?"":(""+Ce.key).replace(ge,"$&/")+"/")+fe)),De.push(Ce)),1;if(qe=0,oe=oe===""?".":oe+":",F(fe))for(var Fe=0;Fe<fe.length;Fe++){We=fe[Fe];var rt=oe+me(We,Fe);qe+=Me(We,De,He,rt,Ce)}else if(rt=R(fe),typeof rt=="function")for(fe=rt.call(fe),Fe=0;!(We=fe.next()).done;)We=We.value,rt=oe+me(We,Fe++),qe+=Me(We,De,He,rt,Ce);else if(We==="object")throw De=String(fe),Error("Objects are not valid as a React child (found: "+(De==="[object Object]"?"object with keys {"+Object.keys(fe).join(", ")+"}":De)+"). If you meant to render a collection of children, use an array instead.");return qe}function ce(fe,De,He){if(fe==null)return fe;var oe=[],Ce=0;return Me(fe,oe,"","",function(We){return De.call(He,We,Ce++)}),oe}function O(fe){if(fe._status===-1){var De=fe._result;De=De(),De.then(function(He){(fe._status===0||fe._status===-1)&&(fe._status=1,fe._result=He)},function(He){(fe._status===0||fe._status===-1)&&(fe._status=2,fe._result=He)}),fe._status===-1&&(fe._status=0,fe._result=De)}if(fe._status===1)return fe._result.default;throw fe._result}var he={current:null},se={transition:null},q={ReactCurrentDispatcher:he,ReactCurrentBatchConfig:se,ReactCurrentOwner:$};function Pe(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:ce,forEach:function(fe,De,He){ce(fe,function(){De.apply(this,arguments)},He)},count:function(fe){var De=0;return ce(fe,function(){De++}),De},toArray:function(fe){return ce(fe,function(De){return De})||[]},only:function(fe){if(!Se(fe))throw Error("React.Children.only expected to receive a single React element child.");return fe}},react_production_min.Component=K,react_production_min.Fragment=s,react_production_min.Profiler=h,react_production_min.PureComponent=X,react_production_min.StrictMode=u,react_production_min.Suspense=d,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,react_production_min.act=Pe,react_production_min.cloneElement=function(fe,De,He){if(fe==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+fe+".");var oe=C({},fe.props),Ce=fe.key,We=fe.ref,qe=fe._owner;if(De!=null){if(De.ref!==void 0&&(We=De.ref,qe=$.current),De.key!==void 0&&(Ce=""+De.key),fe.type&&fe.type.defaultProps)var Fe=fe.type.defaultProps;for(rt in De)B.call(De,rt)&&!Q.hasOwnProperty(rt)&&(oe[rt]=De[rt]===void 0&&Fe!==void 0?Fe[rt]:De[rt])}var rt=arguments.length-2;if(rt===1)oe.children=He;else if(1<rt){Fe=Array(rt);for(var ot=0;ot<rt;ot++)Fe[ot]=arguments[ot+2];oe.children=Fe}return{$$typeof:t,type:fe.type,key:Ce,ref:We,props:oe,_owner:qe}},react_production_min.createContext=function(fe){return fe={$$typeof:l,_currentValue:fe,_currentValue2:fe,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},fe.Provider={$$typeof:_,_context:fe},fe.Consumer=fe},react_production_min.createElement=N,react_production_min.createFactory=function(fe){var De=N.bind(null,fe);return De.type=fe,De},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(fe){return{$$typeof:g,render:fe}},react_production_min.isValidElement=Se,react_production_min.lazy=function(fe){return{$$typeof:E,_payload:{_status:-1,_result:fe},_init:O}},react_production_min.memo=function(fe,De){return{$$typeof:y,type:fe,compare:De===void 0?null:De}},react_production_min.startTransition=function(fe){var De=se.transition;se.transition={};try{fe()}finally{se.transition=De}},react_production_min.unstable_act=Pe,react_production_min.useCallback=function(fe,De){return he.current.useCallback(fe,De)},react_production_min.useContext=function(fe){return he.current.useContext(fe)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(fe){return he.current.useDeferredValue(fe)},react_production_min.useEffect=function(fe,De){return he.current.useEffect(fe,De)},react_production_min.useId=function(){return he.current.useId()},react_production_min.useImperativeHandle=function(fe,De,He){return he.current.useImperativeHandle(fe,De,He)},react_production_min.useInsertionEffect=function(fe,De){return he.current.useInsertionEffect(fe,De)},react_production_min.useLayoutEffect=function(fe,De){return he.current.useLayoutEffect(fe,De)},react_production_min.useMemo=function(fe,De){return he.current.useMemo(fe,De)},react_production_min.useReducer=function(fe,De,He){return he.current.useReducer(fe,De,He)},react_production_min.useRef=function(fe){return he.current.useRef(fe)},react_production_min.useState=function(fe){return he.current.useState(fe)},react_production_min.useSyncExternalStore=function(fe,De,He){return he.current.useSyncExternalStore(fe,De,He)},react_production_min.useTransition=function(){return he.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var t=requireReact(),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,h=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_={key:!0,ref:!0,__self:!0,__source:!0};function l(g,d,y){var E,v={},R=null,z=null;y!==void 0&&(R=""+y),d.key!==void 0&&(R=""+d.key),d.ref!==void 0&&(z=d.ref);for(E in d)u.call(d,E)&&!_.hasOwnProperty(E)&&(v[E]=d[E]);if(g&&g.defaultProps)for(E in d=g.defaultProps,d)v[E]===void 0&&(v[E]=d[E]);return{$$typeof:i,type:g,key:R,ref:z,props:v,_owner:h.current}}return reactJsxRuntime_production_min.Fragment=s,reactJsxRuntime_production_min.jsx=l,reactJsxRuntime_production_min.jsxs=l,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact(),client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(t){function i(se,q){var Pe=se.length;se.push(q);e:for(;0<Pe;){var fe=Pe-1>>>1,De=se[fe];if(0<h(De,q))se[fe]=q,se[Pe]=De,Pe=fe;else break e}}function s(se){return se.length===0?null:se[0]}function u(se){if(se.length===0)return null;var q=se[0],Pe=se.pop();if(Pe!==q){se[0]=Pe;e:for(var fe=0,De=se.length,He=De>>>1;fe<He;){var oe=2*(fe+1)-1,Ce=se[oe],We=oe+1,qe=se[We];if(0>h(Ce,Pe))We<De&&0>h(qe,Ce)?(se[fe]=qe,se[We]=Pe,fe=We):(se[fe]=Ce,se[oe]=Pe,fe=oe);else if(We<De&&0>h(qe,Pe))se[fe]=qe,se[We]=Pe,fe=We;else break e}}return q}function h(se,q){var Pe=se.sortIndex-q.sortIndex;return Pe!==0?Pe:se.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var _=performance;t.unstable_now=function(){return _.now()}}else{var l=Date,g=l.now();t.unstable_now=function(){return l.now()-g}}var d=[],y=[],E=1,v=null,R=3,z=!1,C=!1,I=!1,K=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(se){for(var q=s(y);q!==null;){if(q.callback===null)u(y);else if(q.startTime<=se)u(y),q.sortIndex=q.expirationTime,i(d,q);else break;q=s(y)}}function F(se){if(I=!1,b(se),!C)if(s(d)!==null)C=!0,O(B);else{var q=s(y);q!==null&&he(F,q.startTime-se)}}function B(se,q){C=!1,I&&(I=!1,J(N),N=-1),z=!0;var Pe=R;try{for(b(q),v=s(d);v!==null&&(!(v.expirationTime>q)||se&&!ue());){var fe=v.callback;if(typeof fe=="function"){v.callback=null,R=v.priorityLevel;var De=fe(v.expirationTime<=q);q=t.unstable_now(),typeof De=="function"?v.callback=De:v===s(d)&&u(d),b(q)}else u(d);v=s(d)}if(v!==null)var He=!0;else{var oe=s(y);oe!==null&&he(F,oe.startTime-q),He=!1}return He}finally{v=null,R=Pe,z=!1}}var $=!1,Q=null,N=-1,ee=5,Se=-1;function ue(){return!(t.unstable_now()-Se<ee)}function ge(){if(Q!==null){var se=t.unstable_now();Se=se;var q=!0;try{q=Q(!0,se)}finally{q?me():($=!1,Q=null)}}else $=!1}var me;if(typeof X=="function")me=function(){X(ge)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,ce=Me.port2;Me.port1.onmessage=ge,me=function(){ce.postMessage(null)}}else me=function(){K(ge,0)};function O(se){Q=se,$||($=!0,me())}function he(se,q){N=K(function(){se(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(se){se.callback=null},t.unstable_continueExecution=function(){C||z||(C=!0,O(B))},t.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<se?Math.floor(1e3/se):5},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return s(d)},t.unstable_next=function(se){switch(R){case 1:case 2:case 3:var q=3;break;default:q=R}var Pe=R;R=q;try{return se()}finally{R=Pe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(se,q){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var Pe=R;R=se;try{return q()}finally{R=Pe}},t.unstable_scheduleCallback=function(se,q,Pe){var fe=t.unstable_now();switch(typeof Pe=="object"&&Pe!==null?(Pe=Pe.delay,Pe=typeof Pe=="number"&&0<Pe?fe+Pe:fe):Pe=fe,se){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=Pe+De,se={id:E++,callback:q,priorityLevel:se,startTime:Pe,expirationTime:De,sortIndex:-1},Pe>fe?(se.sortIndex=Pe,i(y,se),s(d)===null&&se===s(y)&&(I?(J(N),N=-1):I=!0,he(F,Pe-fe))):(se.sortIndex=De,i(d,se),C||z||(C=!0,O(B))),se},t.unstable_shouldYield=ue,t.unstable_wrapCallback=function(se){var q=R;return function(){var Pe=R;R=q;try{return se.apply(this,arguments)}finally{R=Pe}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var t=requireReact(),i=requireScheduler();function s(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,h={};function _(e,r){l(e,r),l(e+"Capture",r)}function l(e,r){for(h[e]=r,e=0;e<r.length;e++)u.add(r[e])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},v={};function R(e){return d.call(v,e)?!0:d.call(E,e)?!1:y.test(e)?v[e]=!0:(E[e]=!0,!1)}function z(e,r,a,p){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return p?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function C(e,r,a,p){if(r===null||typeof r>"u"||z(e,r,a,p))return!0;if(p)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function I(e,r,a,p,D,j,ie){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=p,this.attributeNamespace=D,this.mustUseProperty=a,this.propertyName=e,this.type=r,this.sanitizeURL=j,this.removeEmptyString=ie}var K={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){K[e]=new I(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];K[r]=new I(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){K[e]=new I(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){K[e]=new I(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){K[e]=new I(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){K[e]=new I(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){K[e]=new I(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){K[e]=new I(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){K[e]=new I(e,5,!1,e.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function X(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(J,X);K[r]=new I(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(J,X);K[r]=new I(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(J,X);K[r]=new I(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){K[e]=new I(e,1,!1,e.toLowerCase(),null,!1,!1)}),K.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){K[e]=new I(e,1,!1,e.toLowerCase(),null,!0,!0)});function b(e,r,a,p){var D=K.hasOwnProperty(r)?K[r]:null;(D!==null?D.type!==0:p||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(C(r,a,D,p)&&(a=null),p||D===null?R(r)&&(a===null?e.removeAttribute(r):e.setAttribute(r,""+a)):D.mustUseProperty?e[D.propertyName]=a===null?D.type===3?!1:"":a:(r=D.attributeName,p=D.attributeNamespace,a===null?e.removeAttribute(r):(D=D.type,a=D===3||D===4&&a===!0?"":""+a,p?e.setAttributeNS(p,r,a):e.setAttribute(r,a))))}var F=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),$=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),Se=Symbol.for("react.provider"),ue=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),he=Symbol.for("react.offscreen"),se=Symbol.iterator;function q(e){return e===null||typeof e!="object"?null:(e=se&&e[se]||e["@@iterator"],typeof e=="function"?e:null)}var Pe=Object.assign,fe;function De(e){if(fe===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);fe=r&&r[1]||""}return`
`+fe+e}var He=!1;function oe(e,r){if(!e||He)return"";He=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(Ye){var p=Ye}Reflect.construct(e,[],r)}else{try{r.call()}catch(Ye){p=Ye}e.call(r.prototype)}else{try{throw Error()}catch(Ye){p=Ye}e()}}catch(Ye){if(Ye&&p&&typeof Ye.stack=="string"){for(var D=Ye.stack.split(`
`),j=p.stack.split(`
`),ie=D.length-1,Ae=j.length-1;1<=ie&&0<=Ae&&D[ie]!==j[Ae];)Ae--;for(;1<=ie&&0<=Ae;ie--,Ae--)if(D[ie]!==j[Ae]){if(ie!==1||Ae!==1)do if(ie--,Ae--,0>Ae||D[ie]!==j[Ae]){var Oe=`
`+D[ie].replace(" at new "," at ");return e.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",e.displayName)),Oe}while(1<=ie&&0<=Ae);break}}}finally{He=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?De(e):""}function Ce(e){switch(e.tag){case 5:return De(e.type);case 16:return De("Lazy");case 13:return De("Suspense");case 19:return De("SuspenseList");case 0:case 2:case 15:return e=oe(e.type,!1),e;case 11:return e=oe(e.type.render,!1),e;case 1:return e=oe(e.type,!0),e;default:return""}}function We(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Q:return"Fragment";case $:return"Portal";case ee:return"Profiler";case N:return"StrictMode";case me:return"Suspense";case Me:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ue:return(e.displayName||"Context")+".Consumer";case Se:return(e._context.displayName||"Context")+".Provider";case ge:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ce:return r=e.displayName||null,r!==null?r:We(e.type)||"Memo";case O:r=e._payload,e=e._init;try{return We(e(r))}catch{}}return null}function qe(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return We(r);case 8:return r===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Fe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rt(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ot(e){var r=rt(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),p=""+e[r];if(!e.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var D=a.get,j=a.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return D.call(this)},set:function(ie){p=""+ie,j.call(this,ie)}}),Object.defineProperty(e,r,{enumerable:a.enumerable}),{getValue:function(){return p},setValue:function(ie){p=""+ie},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function at(e){e._valueTracker||(e._valueTracker=ot(e))}function Ft(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var a=r.getValue(),p="";return e&&(p=rt(e)?e.checked?"true":"false":e.value),e=p,e!==a?(r.setValue(e),!0):!1}function Ct(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function or(e,r){var a=r.checked;return Pe({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function ar(e,r){var a=r.defaultValue==null?"":r.defaultValue,p=r.checked!=null?r.checked:r.defaultChecked;a=Fe(r.value!=null?r.value:a),e._wrapperState={initialChecked:p,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Mr(e,r){r=r.checked,r!=null&&b(e,"checked",r,!1)}function Er(e,r){Mr(e,r);var a=Fe(r.value),p=r.type;if(a!=null)p==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(p==="submit"||p==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?vr(e,r.type,a):r.hasOwnProperty("defaultValue")&&vr(e,r.type,Fe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function pr(e,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var p=r.type;if(!(p!=="submit"&&p!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,a||r===e.value||(e.value=r),e.defaultValue=r}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function vr(e,r,a){(r!=="number"||Ct(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var xr=Array.isArray;function fi(e,r,a,p){if(e=e.options,r){r={};for(var D=0;D<a.length;D++)r["$"+a[D]]=!0;for(a=0;a<e.length;a++)D=r.hasOwnProperty("$"+e[a].value),e[a].selected!==D&&(e[a].selected=D),D&&p&&(e[a].defaultSelected=!0)}else{for(a=""+Fe(a),r=null,D=0;D<e.length;D++){if(e[D].value===a){e[D].selected=!0,p&&(e[D].defaultSelected=!0);return}r!==null||e[D].disabled||(r=e[D])}r!==null&&(r.selected=!0)}}function kr(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(s(91));return Pe({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zr(e,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(s(92));if(xr(a)){if(1<a.length)throw Error(s(93));a=a[0]}r=a}r==null&&(r=""),a=r}e._wrapperState={initialValue:Fe(a)}}function Di(e,r){var a=Fe(r.value),p=Fe(r.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),r.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),p!=null&&(e.defaultValue=""+p)}function wi(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function Hi(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?Hi(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ee,ze=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,p,D){MSApp.execUnsafeLocalFunction(function(){return e(r,a,p,D)})}:e})(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(Ee=Ee||document.createElement("div"),Ee.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Ee.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function dt(e,r){if(r){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=r;return}}e.textContent=r}var nt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},It=["Webkit","ms","Moz","O"];Object.keys(nt).forEach(function(e){It.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),nt[r]=nt[e]})});function ht(e,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||nt.hasOwnProperty(e)&&nt[e]?(""+r).trim():r+"px"}function Lt(e,r){e=e.style;for(var a in r)if(r.hasOwnProperty(a)){var p=a.indexOf("--")===0,D=ht(a,r[a],p);a==="float"&&(a="cssFloat"),p?e.setProperty(a,D):e[a]=D}}var Ut=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zt(e,r){if(r){if(Ut[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(s(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(s(61))}if(r.style!=null&&typeof r.style!="object")throw Error(s(62))}}function mr(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var li=null;function Ci(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ui=null,gi=null,jr=null;function Lr(e){if(e=zs(e)){if(typeof ui!="function")throw Error(s(280));var r=e.stateNode;r&&(r=ro(r),ui(e.stateNode,e.type,r))}}function Dr(e){gi?jr?jr.push(e):jr=[e]:gi=e}function rr(){if(gi){var e=gi,r=jr;if(jr=gi=null,Lr(e),r)for(e=0;e<r.length;e++)Lr(r[e])}}function vi(e,r){return e(r)}function bi(){}var Ki=!1;function Ai(e,r,a){if(Ki)return e(r,a);Ki=!0;try{return vi(e,r,a)}finally{Ki=!1,(gi!==null||jr!==null)&&(bi(),rr())}}function Ni(e,r){var a=e.stateNode;if(a===null)return null;var p=ro(a);if(p===null)return null;a=p[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(e=e.type,p=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!p;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Ti=!1;if(g)try{var pi={};Object.defineProperty(pi,"passive",{get:function(){Ti=!0}}),window.addEventListener("test",pi,pi),window.removeEventListener("test",pi,pi)}catch{Ti=!1}function Br(e,r,a,p,D,j,ie,Ae,Oe){var Ye=Array.prototype.slice.call(arguments,3);try{r.apply(a,Ye)}catch(xt){this.onError(xt)}}var Zr=!1,Vi=null,yi=!1,Wi=null,tn={onError:function(e){Zr=!0,Vi=e}};function on(e,r,a,p,D,j,ie,Ae,Oe){Zr=!1,Vi=null,Br.apply(tn,arguments)}function ur(e,r,a,p,D,j,ie,Ae,Oe){if(on.apply(this,arguments),Zr){if(Zr){var Ye=Vi;Zr=!1,Vi=null}else throw Error(s(198));yi||(yi=!0,Wi=Ye)}}function Gr(e){var r=e,a=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(a=r.return),e=r.return;while(e)}return r.tag===3?a:null}function Kr(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function qi(e){if(Gr(e)!==e)throw Error(s(188))}function Bt(e){var r=e.alternate;if(!r){if(r=Gr(e),r===null)throw Error(s(188));return r!==e?null:e}for(var a=e,p=r;;){var D=a.return;if(D===null)break;var j=D.alternate;if(j===null){if(p=D.return,p!==null){a=p;continue}break}if(D.child===j.child){for(j=D.child;j;){if(j===a)return qi(D),e;if(j===p)return qi(D),r;j=j.sibling}throw Error(s(188))}if(a.return!==p.return)a=D,p=j;else{for(var ie=!1,Ae=D.child;Ae;){if(Ae===a){ie=!0,a=D,p=j;break}if(Ae===p){ie=!0,p=D,a=j;break}Ae=Ae.sibling}if(!ie){for(Ae=j.child;Ae;){if(Ae===a){ie=!0,a=j,p=D;break}if(Ae===p){ie=!0,p=j,a=D;break}Ae=Ae.sibling}if(!ie)throw Error(s(189))}}if(a.alternate!==p)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:r}function S(e){return e=Bt(e),e!==null?ne(e):null}function ne(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=ne(e);if(r!==null)return r;e=e.sibling}return null}var xe=i.unstable_scheduleCallback,Ve=i.unstable_cancelCallback,Le=i.unstable_shouldYield,yt=i.unstable_requestPaint,lt=i.unstable_now,mt=i.unstable_getCurrentPriorityLevel,Rt=i.unstable_ImmediatePriority,Pt=i.unstable_UserBlockingPriority,Ot=i.unstable_NormalPriority,gr=i.unstable_LowPriority,Zt=i.unstable_IdlePriority,Cr=null,Ar=null;function Ur(e){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(Cr,e,void 0,(e.current.flags&128)===128)}catch{}}var _r=Math.clz32?Math.clz32:Ri,Or=Math.log,wr=Math.LN2;function Ri(e){return e>>>=0,e===0?32:31-(Or(e)/wr|0)|0}var Qt=64,ri=4194304;function ae(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function n(e,r){var a=e.pendingLanes;if(a===0)return 0;var p=0,D=e.suspendedLanes,j=e.pingedLanes,ie=a&268435455;if(ie!==0){var Ae=ie&~D;Ae!==0?p=ae(Ae):(j&=ie,j!==0&&(p=ae(j)))}else ie=a&~D,ie!==0?p=ae(ie):j!==0&&(p=ae(j));if(p===0)return 0;if(r!==0&&r!==p&&(r&D)===0&&(D=p&-p,j=r&-r,D>=j||D===16&&(j&4194240)!==0))return r;if((p&4)!==0&&(p|=a&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=p;0<r;)a=31-_r(r),D=1<<a,p|=e[a],r&=~D;return p}function o(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function c(e,r){for(var a=e.suspendedLanes,p=e.pingedLanes,D=e.expirationTimes,j=e.pendingLanes;0<j;){var ie=31-_r(j),Ae=1<<ie,Oe=D[ie];Oe===-1?((Ae&a)===0||(Ae&p)!==0)&&(D[ie]=o(Ae,r)):Oe<=r&&(e.expiredLanes|=Ae),j&=~Ae}}function f(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function T(){var e=Qt;return Qt<<=1,(Qt&4194240)===0&&(Qt=64),e}function x(e){for(var r=[],a=0;31>a;a++)r.push(e);return r}function M(e,r,a){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-_r(r),e[r]=a}function k(e,r){var a=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var p=e.eventTimes;for(e=e.expirationTimes;0<a;){var D=31-_r(a),j=1<<D;r[D]=0,p[D]=-1,e[D]=-1,a&=~j}}function A(e,r){var a=e.entangledLanes|=r;for(e=e.entanglements;a;){var p=31-_r(a),D=1<<p;D&r|e[p]&r&&(e[p]|=r),a&=~D}}var P=0;function L(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var W,U,V,H,G,Z=!1,te=[],re=null,de=null,le=null,ye=new Map,ke=new Map,Te=[],Re="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function we(e,r){switch(e){case"focusin":case"focusout":re=null;break;case"dragenter":case"dragleave":de=null;break;case"mouseover":case"mouseout":le=null;break;case"pointerover":case"pointerout":ye.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ke.delete(r.pointerId)}}function Ue(e,r,a,p,D,j){return e===null||e.nativeEvent!==j?(e={blockedOn:r,domEventName:a,eventSystemFlags:p,nativeEvent:j,targetContainers:[D]},r!==null&&(r=zs(r),r!==null&&U(r)),e):(e.eventSystemFlags|=p,r=e.targetContainers,D!==null&&r.indexOf(D)===-1&&r.push(D),e)}function Je(e,r,a,p,D){switch(r){case"focusin":return re=Ue(re,e,r,a,p,D),!0;case"dragenter":return de=Ue(de,e,r,a,p,D),!0;case"mouseover":return le=Ue(le,e,r,a,p,D),!0;case"pointerover":var j=D.pointerId;return ye.set(j,Ue(ye.get(j)||null,e,r,a,p,D)),!0;case"gotpointercapture":return j=D.pointerId,ke.set(j,Ue(ke.get(j)||null,e,r,a,p,D)),!0}return!1}function tt(e){var r=Kn(e.target);if(r!==null){var a=Gr(r);if(a!==null){if(r=a.tag,r===13){if(r=Kr(a),r!==null){e.blockedOn=r,G(e.priority,function(){V(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ze(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var a=it(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var p=new a.constructor(a.type,a);li=p,a.target.dispatchEvent(p),li=null}else return r=zs(a),r!==null&&U(r),e.blockedOn=a,!1;r.shift()}return!0}function ut(e,r,a){Ze(e)&&a.delete(r)}function ft(){Z=!1,re!==null&&Ze(re)&&(re=null),de!==null&&Ze(de)&&(de=null),le!==null&&Ze(le)&&(le=null),ye.forEach(ut),ke.forEach(ut)}function Qe(e,r){e.blockedOn===r&&(e.blockedOn=null,Z||(Z=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,ft)))}function pt(e){function r(D){return Qe(D,e)}if(0<te.length){Qe(te[0],e);for(var a=1;a<te.length;a++){var p=te[a];p.blockedOn===e&&(p.blockedOn=null)}}for(re!==null&&Qe(re,e),de!==null&&Qe(de,e),le!==null&&Qe(le,e),ye.forEach(r),ke.forEach(r),a=0;a<Te.length;a++)p=Te[a],p.blockedOn===e&&(p.blockedOn=null);for(;0<Te.length&&(a=Te[0],a.blockedOn===null);)tt(a),a.blockedOn===null&&Te.shift()}var Be=F.ReactCurrentBatchConfig,et=!0;function St(e,r,a,p){var D=P,j=Be.transition;Be.transition=null;try{P=1,wt(e,r,a,p)}finally{P=D,Be.transition=j}}function st(e,r,a,p){var D=P,j=Be.transition;Be.transition=null;try{P=4,wt(e,r,a,p)}finally{P=D,Be.transition=j}}function wt(e,r,a,p){if(et){var D=it(e,r,a,p);if(D===null)Zo(e,r,p,Et,a),we(e,p);else if(Je(D,e,r,a,p))p.stopPropagation();else if(we(e,p),r&4&&-1<Re.indexOf(e)){for(;D!==null;){var j=zs(D);if(j!==null&&W(j),j=it(e,r,a,p),j===null&&Zo(e,r,p,Et,a),j===D)break;D=j}D!==null&&p.stopPropagation()}else Zo(e,r,p,null,a)}}var Et=null;function it(e,r,a,p){if(Et=null,e=Ci(p),e=Kn(e),e!==null)if(r=Gr(e),r===null)e=null;else if(a=r.tag,a===13){if(e=Kr(r),e!==null)return e;e=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return Et=e,null}function kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mt()){case Rt:return 1;case Pt:return 4;case Ot:case gr:return 16;case Zt:return 536870912;default:return 16}default:return 16}}var Ht=null,Mt=null,ct=null;function Jt(){if(ct)return ct;var e,r=Mt,a=r.length,p,D="value"in Ht?Ht.value:Ht.textContent,j=D.length;for(e=0;e<a&&r[e]===D[e];e++);var ie=a-e;for(p=1;p<=ie&&r[a-p]===D[j-p];p++);return ct=D.slice(e,1<p?1-p:void 0)}function Nt(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function qt(){return!0}function Vt(){return!1}function Xt(e){function r(a,p,D,j,ie){this._reactName=a,this._targetInst=D,this.type=p,this.nativeEvent=j,this.target=ie,this.currentTarget=null;for(var Ae in e)e.hasOwnProperty(Ae)&&(a=e[Ae],this[Ae]=a?a(j):j[Ae]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?qt:Vt,this.isPropagationStopped=Vt,this}return Pe(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=qt)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=qt)},persist:function(){},isPersistent:qt}),r}var yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fr=Xt(yr),Tr=Pe({},yr,{view:0,detail:0}),ii=Xt(Tr),Wr,br,$r,ci=Pe({},Tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$e,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$r&&($r&&e.type==="mousemove"?(Wr=e.screenX-$r.screenX,br=e.screenY-$r.screenY):br=Wr=0,$r=e),Wr)},movementY:function(e){return"movementY"in e?e.movementY:br}}),ni=Xt(ci),hi=Pe({},ci,{dataTransfer:0}),Ii=Xt(hi),xi=Pe({},Tr,{relatedTarget:0}),zi=Xt(xi),Hr=Pe({},yr,{animationName:0,elapsedTime:0,pseudoElement:0}),Xr=Xt(Hr),qr=Pe({},yr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ei=Xt(qr),m=Pe({},yr,{data:0}),Y=Xt(m),w={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},be={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ve(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=_e[e])?!!r[e]:!1}function $e(){return ve}var Ie=Pe({},Tr,{key:function(e){if(e.key){var r=w[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=Nt(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?be[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$e,charCode:function(e){return e.type==="keypress"?Nt(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Nt(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gt=Xt(Ie),Ne=Pe({},ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xe=Xt(Ne),dr=Pe({},Tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$e}),Wt=Xt(dr),_t=Pe({},yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),si=Xt(_t),Rr=Pe({},ci,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),er=Xt(Rr),Ir=[9,13,27,32],lr=g&&"CompositionEvent"in window,At=null;g&&"documentMode"in document&&(At=document.documentMode);var sr=g&&"TextEvent"in window&&!At,Pr=g&&(!lr||At&&8<At&&11>=At),Dt=" ",Sr=!1;function cr(e,r){switch(e){case"keyup":return Ir.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tr(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fr=!1;function Li(e,r){switch(e){case"compositionend":return tr(r);case"keypress":return r.which!==32?null:(Sr=!0,Dt);case"textInput":return e=r.data,e===Dt&&Sr?null:e;default:return null}}function Wn(e,r){if(fr)return e==="compositionend"||!lr&&cr(e,r)?(e=Jt(),ct=Mt=Ht=null,fr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Pr&&r.locale!=="ko"?null:r.data;default:return null}}var os={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!os[e.type]:r==="textarea"}function Xn(e,r,a,p){Dr(p),r=Js(r,"onChange"),0<r.length&&(a=new Fr("onChange","change",null,a,p),e.push({event:a,listeners:r}))}var As=null,Ts=null;function lc(e){El(e,0)}function qs(e){var r=hs(e);if(Ft(r))return e}function uc(e,r){if(e==="change")return r}var al=!1;if(g){var Uo;if(g){var Go="oninput"in document;if(!Go){var ll=document.createElement("div");ll.setAttribute("oninput","return;"),Go=typeof ll.oninput=="function"}Uo=Go}else Uo=!1;al=Uo&&(!document.documentMode||9<document.documentMode)}function ul(){As&&(As.detachEvent("onpropertychange",cl),Ts=As=null)}function cl(e){if(e.propertyName==="value"&&qs(Ts)){var r=[];Xn(r,Ts,e,Ci(e)),Ai(lc,r)}}function cc(e,r,a){e==="focusin"?(ul(),As=r,Ts=a,As.attachEvent("onpropertychange",cl)):e==="focusout"&&ul()}function hc(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qs(Ts)}function dc(e,r){if(e==="click")return qs(r)}function fc(e,r){if(e==="input"||e==="change")return qs(r)}function pc(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var fn=typeof Object.is=="function"?Object.is:pc;function Rs(e,r){if(fn(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var a=Object.keys(e),p=Object.keys(r);if(a.length!==p.length)return!1;for(p=0;p<a.length;p++){var D=a[p];if(!d.call(r,D)||!fn(e[D],r[D]))return!1}return!0}function hl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dl(e,r){var a=hl(e);e=0;for(var p;a;){if(a.nodeType===3){if(p=e+a.textContent.length,e<=r&&p>=r)return{node:a,offset:r-e};e=p}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=hl(a)}}function fl(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?fl(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function pl(){for(var e=window,r=Ct();r instanceof e.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)e=r.contentWindow;else break;r=Ct(e.document)}return r}function Ho(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function mc(e){var r=pl(),a=e.focusedElem,p=e.selectionRange;if(r!==a&&a&&a.ownerDocument&&fl(a.ownerDocument.documentElement,a)){if(p!==null&&Ho(a)){if(r=p.start,e=p.end,e===void 0&&(e=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(e,a.value.length);else if(e=(r=a.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var D=a.textContent.length,j=Math.min(p.start,D);p=p.end===void 0?j:Math.min(p.end,D),!e.extend&&j>p&&(D=p,p=j,j=D),D=dl(a,j);var ie=dl(a,p);D&&ie&&(e.rangeCount!==1||e.anchorNode!==D.node||e.anchorOffset!==D.offset||e.focusNode!==ie.node||e.focusOffset!==ie.offset)&&(r=r.createRange(),r.setStart(D.node,D.offset),e.removeAllRanges(),j>p?(e.addRange(r),e.extend(ie.node,ie.offset)):(r.setEnd(ie.node,ie.offset),e.addRange(r)))}}for(r=[],e=a;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)e=r[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gc=g&&"documentMode"in document&&11>=document.documentMode,as=null,Wo=null,Ms=null,$o=!1;function ml(e,r,a){var p=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$o||as==null||as!==Ct(p)||(p=as,"selectionStart"in p&&Ho(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Ms&&Rs(Ms,p)||(Ms=p,p=Js(Wo,"onSelect"),0<p.length&&(r=new Fr("onSelect","select",null,r,a),e.push({event:r,listeners:p}),r.target=as)))}function Ys(e,r){var a={};return a[e.toLowerCase()]=r.toLowerCase(),a["Webkit"+e]="webkit"+r,a["Moz"+e]="moz"+r,a}var ls={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionend:Ys("Transition","TransitionEnd")},Xo={},gl={};g&&(gl=document.createElement("div").style,"AnimationEvent"in window||(delete ls.animationend.animation,delete ls.animationiteration.animation,delete ls.animationstart.animation),"TransitionEvent"in window||delete ls.transitionend.transition);function Zs(e){if(Xo[e])return Xo[e];if(!ls[e])return e;var r=ls[e],a;for(a in r)if(r.hasOwnProperty(a)&&a in gl)return Xo[e]=r[a];return e}var vl=Zs("animationend"),yl=Zs("animationiteration"),xl=Zs("animationstart"),_l=Zs("transitionend"),wl=new Map,bl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pn(e,r){wl.set(e,r),_(r,[e])}for(var Ko=0;Ko<bl.length;Ko++){var qo=bl[Ko],vc=qo.toLowerCase(),yc=qo[0].toUpperCase()+qo.slice(1);Pn(vc,"on"+yc)}Pn(vl,"onAnimationEnd"),Pn(yl,"onAnimationIteration"),Pn(xl,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(_l,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_("onBeforeInput",["compositionend","keypress","textInput","paste"]),_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xc=new Set("cancel close invalid load scroll toggle".split(" ").concat(ks));function Sl(e,r,a){var p=e.type||"unknown-event";e.currentTarget=a,ur(p,r,void 0,e),e.currentTarget=null}function El(e,r){r=(r&4)!==0;for(var a=0;a<e.length;a++){var p=e[a],D=p.event;p=p.listeners;e:{var j=void 0;if(r)for(var ie=p.length-1;0<=ie;ie--){var Ae=p[ie],Oe=Ae.instance,Ye=Ae.currentTarget;if(Ae=Ae.listener,Oe!==j&&D.isPropagationStopped())break e;Sl(D,Ae,Ye),j=Oe}else for(ie=0;ie<p.length;ie++){if(Ae=p[ie],Oe=Ae.instance,Ye=Ae.currentTarget,Ae=Ae.listener,Oe!==j&&D.isPropagationStopped())break e;Sl(D,Ae,Ye),j=Oe}}}if(yi)throw e=Wi,yi=!1,Wi=null,e}function Qr(e,r){var a=r[ia];a===void 0&&(a=r[ia]=new Set);var p=e+"__bubble";a.has(p)||(Cl(r,e,2,!1),a.add(p))}function Yo(e,r,a){var p=0;r&&(p|=4),Cl(a,e,p,r)}var Qs="_reactListening"+Math.random().toString(36).slice(2);function Ps(e){if(!e[Qs]){e[Qs]=!0,u.forEach(function(a){a!=="selectionchange"&&(xc.has(a)||Yo(a,!1,e),Yo(a,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[Qs]||(r[Qs]=!0,Yo("selectionchange",!1,r))}}function Cl(e,r,a,p){switch(kt(r)){case 1:var D=St;break;case 4:D=st;break;default:D=wt}a=D.bind(null,r,a,e),D=void 0,!Ti||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(D=!0),p?D!==void 0?e.addEventListener(r,a,{capture:!0,passive:D}):e.addEventListener(r,a,!0):D!==void 0?e.addEventListener(r,a,{passive:D}):e.addEventListener(r,a,!1)}function Zo(e,r,a,p,D){var j=p;if((r&1)===0&&(r&2)===0&&p!==null)e:for(;;){if(p===null)return;var ie=p.tag;if(ie===3||ie===4){var Ae=p.stateNode.containerInfo;if(Ae===D||Ae.nodeType===8&&Ae.parentNode===D)break;if(ie===4)for(ie=p.return;ie!==null;){var Oe=ie.tag;if((Oe===3||Oe===4)&&(Oe=ie.stateNode.containerInfo,Oe===D||Oe.nodeType===8&&Oe.parentNode===D))return;ie=ie.return}for(;Ae!==null;){if(ie=Kn(Ae),ie===null)return;if(Oe=ie.tag,Oe===5||Oe===6){p=j=ie;continue e}Ae=Ae.parentNode}}p=p.return}Ai(function(){var Ye=j,xt=Ci(a),bt=[];e:{var vt=wl.get(e);if(vt!==void 0){var jt=Fr,$t=e;switch(e){case"keypress":if(Nt(a)===0)break e;case"keydown":case"keyup":jt=gt;break;case"focusin":$t="focus",jt=zi;break;case"focusout":$t="blur",jt=zi;break;case"beforeblur":case"afterblur":jt=zi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":jt=ni;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":jt=Ii;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":jt=Wt;break;case vl:case yl:case xl:jt=Xr;break;case _l:jt=si;break;case"scroll":jt=ii;break;case"wheel":jt=er;break;case"copy":case"cut":case"paste":jt=ei;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":jt=Xe}var Kt=(r&4)!==0,mi=!Kt&&e==="scroll",Ge=Kt?vt!==null?vt+"Capture":null:vt;Kt=[];for(var je=Ye,Ke;je!==null;){Ke=je;var Tt=Ke.stateNode;if(Ke.tag===5&&Tt!==null&&(Ke=Tt,Ge!==null&&(Tt=Ni(je,Ge),Tt!=null&&Kt.push(Ds(je,Tt,Ke)))),mi)break;je=je.return}0<Kt.length&&(vt=new jt(vt,$t,null,a,xt),bt.push({event:vt,listeners:Kt}))}}if((r&7)===0){e:{if(vt=e==="mouseover"||e==="pointerover",jt=e==="mouseout"||e==="pointerout",vt&&a!==li&&($t=a.relatedTarget||a.fromElement)&&(Kn($t)||$t[Sn]))break e;if((jt||vt)&&(vt=xt.window===xt?xt:(vt=xt.ownerDocument)?vt.defaultView||vt.parentWindow:window,jt?($t=a.relatedTarget||a.toElement,jt=Ye,$t=$t?Kn($t):null,$t!==null&&(mi=Gr($t),$t!==mi||$t.tag!==5&&$t.tag!==6)&&($t=null)):(jt=null,$t=Ye),jt!==$t)){if(Kt=ni,Tt="onMouseLeave",Ge="onMouseEnter",je="mouse",(e==="pointerout"||e==="pointerover")&&(Kt=Xe,Tt="onPointerLeave",Ge="onPointerEnter",je="pointer"),mi=jt==null?vt:hs(jt),Ke=$t==null?vt:hs($t),vt=new Kt(Tt,je+"leave",jt,a,xt),vt.target=mi,vt.relatedTarget=Ke,Tt=null,Kn(xt)===Ye&&(Kt=new Kt(Ge,je+"enter",$t,a,xt),Kt.target=Ke,Kt.relatedTarget=mi,Tt=Kt),mi=Tt,jt&&$t)t:{for(Kt=jt,Ge=$t,je=0,Ke=Kt;Ke;Ke=us(Ke))je++;for(Ke=0,Tt=Ge;Tt;Tt=us(Tt))Ke++;for(;0<je-Ke;)Kt=us(Kt),je--;for(;0<Ke-je;)Ge=us(Ge),Ke--;for(;je--;){if(Kt===Ge||Ge!==null&&Kt===Ge.alternate)break t;Kt=us(Kt),Ge=us(Ge)}Kt=null}else Kt=null;jt!==null&&Al(bt,vt,jt,Kt,!1),$t!==null&&mi!==null&&Al(bt,mi,$t,Kt,!0)}}e:{if(vt=Ye?hs(Ye):window,jt=vt.nodeName&&vt.nodeName.toLowerCase(),jt==="select"||jt==="input"&&vt.type==="file")var Yt=uc;else if($n(vt))if(al)Yt=fc;else{Yt=hc;var ir=cc}else(jt=vt.nodeName)&&jt.toLowerCase()==="input"&&(vt.type==="checkbox"||vt.type==="radio")&&(Yt=dc);if(Yt&&(Yt=Yt(e,Ye))){Xn(bt,Yt,a,xt);break e}ir&&ir(e,vt,Ye),e==="focusout"&&(ir=vt._wrapperState)&&ir.controlled&&vt.type==="number"&&vr(vt,"number",vt.value)}switch(ir=Ye?hs(Ye):window,e){case"focusin":($n(ir)||ir.contentEditable==="true")&&(as=ir,Wo=Ye,Ms=null);break;case"focusout":Ms=Wo=as=null;break;case"mousedown":$o=!0;break;case"contextmenu":case"mouseup":case"dragend":$o=!1,ml(bt,a,xt);break;case"selectionchange":if(gc)break;case"keydown":case"keyup":ml(bt,a,xt)}var nr;if(lr)e:{switch(e){case"compositionstart":var hr="onCompositionStart";break e;case"compositionend":hr="onCompositionEnd";break e;case"compositionupdate":hr="onCompositionUpdate";break e}hr=void 0}else fr?cr(e,a)&&(hr="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(hr="onCompositionStart");hr&&(Pr&&a.locale!=="ko"&&(fr||hr!=="onCompositionStart"?hr==="onCompositionEnd"&&fr&&(nr=Jt()):(Ht=xt,Mt="value"in Ht?Ht.value:Ht.textContent,fr=!0)),ir=Js(Ye,hr),0<ir.length&&(hr=new Y(hr,e,null,a,xt),bt.push({event:hr,listeners:ir}),nr?hr.data=nr:(nr=tr(a),nr!==null&&(hr.data=nr)))),(nr=sr?Li(e,a):Wn(e,a))&&(Ye=Js(Ye,"onBeforeInput"),0<Ye.length&&(xt=new Y("onBeforeInput","beforeinput",null,a,xt),bt.push({event:xt,listeners:Ye}),xt.data=nr))}El(bt,r)})}function Ds(e,r,a){return{instance:e,listener:r,currentTarget:a}}function Js(e,r){for(var a=r+"Capture",p=[];e!==null;){var D=e,j=D.stateNode;D.tag===5&&j!==null&&(D=j,j=Ni(e,a),j!=null&&p.unshift(Ds(e,j,D)),j=Ni(e,r),j!=null&&p.push(Ds(e,j,D))),e=e.return}return p}function us(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Al(e,r,a,p,D){for(var j=r._reactName,ie=[];a!==null&&a!==p;){var Ae=a,Oe=Ae.alternate,Ye=Ae.stateNode;if(Oe!==null&&Oe===p)break;Ae.tag===5&&Ye!==null&&(Ae=Ye,D?(Oe=Ni(a,j),Oe!=null&&ie.unshift(Ds(a,Oe,Ae))):D||(Oe=Ni(a,j),Oe!=null&&ie.push(Ds(a,Oe,Ae)))),a=a.return}ie.length!==0&&e.push({event:r,listeners:ie})}var _c=/\r\n?/g,wc=/\u0000|\uFFFD/g;function Tl(e){return(typeof e=="string"?e:""+e).replace(_c,`
`).replace(wc,"")}function eo(e,r,a){if(r=Tl(r),Tl(e)!==r&&a)throw Error(s(425))}function to(){}var Qo=null,Jo=null;function ea(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ta=typeof setTimeout=="function"?setTimeout:void 0,bc=typeof clearTimeout=="function"?clearTimeout:void 0,Rl=typeof Promise=="function"?Promise:void 0,Sc=typeof queueMicrotask=="function"?queueMicrotask:typeof Rl<"u"?function(e){return Rl.resolve(null).then(e).catch(Ec)}:ta;function Ec(e){setTimeout(function(){throw e})}function ra(e,r){var a=r,p=0;do{var D=a.nextSibling;if(e.removeChild(a),D&&D.nodeType===8)if(a=D.data,a==="/$"){if(p===0){e.removeChild(D),pt(r);return}p--}else a!=="$"&&a!=="$?"&&a!=="$!"||p++;a=D}while(a);pt(r)}function Dn(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function Ml(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return e;r--}else a==="/$"&&r++}e=e.previousSibling}return null}var cs=Math.random().toString(36).slice(2),xn="__reactFiber$"+cs,Is="__reactProps$"+cs,Sn="__reactContainer$"+cs,ia="__reactEvents$"+cs,Cc="__reactListeners$"+cs,Ac="__reactHandles$"+cs;function Kn(e){var r=e[xn];if(r)return r;for(var a=e.parentNode;a;){if(r=a[Sn]||a[xn]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(e=Ml(e);e!==null;){if(a=e[xn])return a;e=Ml(e)}return r}e=a,a=e.parentNode}return null}function zs(e){return e=e[xn]||e[Sn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function ro(e){return e[Is]||null}var na=[],ds=-1;function In(e){return{current:e}}function Jr(e){0>ds||(e.current=na[ds],na[ds]=null,ds--)}function Yr(e,r){ds++,na[ds]=e.current,e.current=r}var zn={},ji=In(zn),Yi=In(!1),qn=zn;function fs(e,r){var a=e.type.contextTypes;if(!a)return zn;var p=e.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===r)return p.__reactInternalMemoizedMaskedChildContext;var D={},j;for(j in a)D[j]=r[j];return p&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=D),D}function Zi(e){return e=e.childContextTypes,e!=null}function io(){Jr(Yi),Jr(ji)}function kl(e,r,a){if(ji.current!==zn)throw Error(s(168));Yr(ji,r),Yr(Yi,a)}function Pl(e,r,a){var p=e.stateNode;if(r=r.childContextTypes,typeof p.getChildContext!="function")return a;p=p.getChildContext();for(var D in p)if(!(D in r))throw Error(s(108,qe(e)||"Unknown",D));return Pe({},a,p)}function no(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||zn,qn=ji.current,Yr(ji,e),Yr(Yi,Yi.current),!0}function Dl(e,r,a){var p=e.stateNode;if(!p)throw Error(s(169));a?(e=Pl(e,r,qn),p.__reactInternalMemoizedMergedChildContext=e,Jr(Yi),Jr(ji),Yr(ji,e)):Jr(Yi),Yr(Yi,a)}var En=null,so=!1,sa=!1;function Il(e){En===null?En=[e]:En.push(e)}function Tc(e){so=!0,Il(e)}function Ln(){if(!sa&&En!==null){sa=!0;var e=0,r=P;try{var a=En;for(P=1;e<a.length;e++){var p=a[e];do p=p(!0);while(p!==null)}En=null,so=!1}catch(D){throw En!==null&&(En=En.slice(e+1)),xe(Rt,Ln),D}finally{P=r,sa=!1}}return null}var ps=[],ms=0,oo=null,ao=0,an=[],ln=0,Yn=null,Cn=1,An="";function Zn(e,r){ps[ms++]=ao,ps[ms++]=oo,oo=e,ao=r}function zl(e,r,a){an[ln++]=Cn,an[ln++]=An,an[ln++]=Yn,Yn=e;var p=Cn;e=An;var D=32-_r(p)-1;p&=~(1<<D),a+=1;var j=32-_r(r)+D;if(30<j){var ie=D-D%5;j=(p&(1<<ie)-1).toString(32),p>>=ie,D-=ie,Cn=1<<32-_r(r)+D|a<<D|p,An=j+e}else Cn=1<<j|a<<D|p,An=e}function oa(e){e.return!==null&&(Zn(e,1),zl(e,1,0))}function aa(e){for(;e===oo;)oo=ps[--ms],ps[ms]=null,ao=ps[--ms],ps[ms]=null;for(;e===Yn;)Yn=an[--ln],an[ln]=null,An=an[--ln],an[ln]=null,Cn=an[--ln],an[ln]=null}var rn=null,nn=null,ti=!1,pn=null;function Ll(e,r){var a=dn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=e,r=e.deletions,r===null?(e.deletions=[a],e.flags|=16):r.push(a)}function Ol(e,r){switch(e.tag){case 5:var a=e.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,rn=e,nn=Dn(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,rn=e,nn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Yn!==null?{id:Cn,overflow:An}:null,e.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=dn(18,null,null,0),a.stateNode=r,a.return=e,e.child=a,rn=e,nn=null,!0):!1;default:return!1}}function la(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ua(e){if(ti){var r=nn;if(r){var a=r;if(!Ol(e,r)){if(la(e))throw Error(s(418));r=Dn(a.nextSibling);var p=rn;r&&Ol(e,r)?Ll(p,a):(e.flags=e.flags&-4097|2,ti=!1,rn=e)}}else{if(la(e))throw Error(s(418));e.flags=e.flags&-4097|2,ti=!1,rn=e}}}function Fl(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rn=e}function lo(e){if(e!==rn)return!1;if(!ti)return Fl(e),ti=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!ea(e.type,e.memoizedProps)),r&&(r=nn)){if(la(e))throw Nl(),Error(s(418));for(;r;)Ll(e,r),r=Dn(r.nextSibling)}if(Fl(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(r===0){nn=Dn(e.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}e=e.nextSibling}nn=null}}else nn=rn?Dn(e.stateNode.nextSibling):null;return!0}function Nl(){for(var e=nn;e;)e=Dn(e.nextSibling)}function gs(){nn=rn=null,ti=!1}function ca(e){pn===null?pn=[e]:pn.push(e)}var Rc=F.ReactCurrentBatchConfig;function Ls(e,r,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(s(309));var p=a.stateNode}if(!p)throw Error(s(147,e));var D=p,j=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===j?r.ref:(r=function(ie){var Ae=D.refs;ie===null?delete Ae[j]:Ae[j]=ie},r._stringRef=j,r)}if(typeof e!="string")throw Error(s(284));if(!a._owner)throw Error(s(290,e))}return e}function uo(e,r){throw e=Object.prototype.toString.call(r),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function Vl(e){var r=e._init;return r(e._payload)}function jl(e){function r(Ge,je){if(e){var Ke=Ge.deletions;Ke===null?(Ge.deletions=[je],Ge.flags|=16):Ke.push(je)}}function a(Ge,je){if(!e)return null;for(;je!==null;)r(Ge,je),je=je.sibling;return null}function p(Ge,je){for(Ge=new Map;je!==null;)je.key!==null?Ge.set(je.key,je):Ge.set(je.index,je),je=je.sibling;return Ge}function D(Ge,je){return Ge=Gn(Ge,je),Ge.index=0,Ge.sibling=null,Ge}function j(Ge,je,Ke){return Ge.index=Ke,e?(Ke=Ge.alternate,Ke!==null?(Ke=Ke.index,Ke<je?(Ge.flags|=2,je):Ke):(Ge.flags|=2,je)):(Ge.flags|=1048576,je)}function ie(Ge){return e&&Ge.alternate===null&&(Ge.flags|=2),Ge}function Ae(Ge,je,Ke,Tt){return je===null||je.tag!==6?(je=tl(Ke,Ge.mode,Tt),je.return=Ge,je):(je=D(je,Ke),je.return=Ge,je)}function Oe(Ge,je,Ke,Tt){var Yt=Ke.type;return Yt===Q?xt(Ge,je,Ke.props.children,Tt,Ke.key):je!==null&&(je.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===O&&Vl(Yt)===je.type)?(Tt=D(je,Ke.props),Tt.ref=Ls(Ge,je,Ke),Tt.return=Ge,Tt):(Tt=zo(Ke.type,Ke.key,Ke.props,null,Ge.mode,Tt),Tt.ref=Ls(Ge,je,Ke),Tt.return=Ge,Tt)}function Ye(Ge,je,Ke,Tt){return je===null||je.tag!==4||je.stateNode.containerInfo!==Ke.containerInfo||je.stateNode.implementation!==Ke.implementation?(je=rl(Ke,Ge.mode,Tt),je.return=Ge,je):(je=D(je,Ke.children||[]),je.return=Ge,je)}function xt(Ge,je,Ke,Tt,Yt){return je===null||je.tag!==7?(je=ss(Ke,Ge.mode,Tt,Yt),je.return=Ge,je):(je=D(je,Ke),je.return=Ge,je)}function bt(Ge,je,Ke){if(typeof je=="string"&&je!==""||typeof je=="number")return je=tl(""+je,Ge.mode,Ke),je.return=Ge,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case B:return Ke=zo(je.type,je.key,je.props,null,Ge.mode,Ke),Ke.ref=Ls(Ge,null,je),Ke.return=Ge,Ke;case $:return je=rl(je,Ge.mode,Ke),je.return=Ge,je;case O:var Tt=je._init;return bt(Ge,Tt(je._payload),Ke)}if(xr(je)||q(je))return je=ss(je,Ge.mode,Ke,null),je.return=Ge,je;uo(Ge,je)}return null}function vt(Ge,je,Ke,Tt){var Yt=je!==null?je.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return Yt!==null?null:Ae(Ge,je,""+Ke,Tt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case B:return Ke.key===Yt?Oe(Ge,je,Ke,Tt):null;case $:return Ke.key===Yt?Ye(Ge,je,Ke,Tt):null;case O:return Yt=Ke._init,vt(Ge,je,Yt(Ke._payload),Tt)}if(xr(Ke)||q(Ke))return Yt!==null?null:xt(Ge,je,Ke,Tt,null);uo(Ge,Ke)}return null}function jt(Ge,je,Ke,Tt,Yt){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number")return Ge=Ge.get(Ke)||null,Ae(je,Ge,""+Tt,Yt);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case B:return Ge=Ge.get(Tt.key===null?Ke:Tt.key)||null,Oe(je,Ge,Tt,Yt);case $:return Ge=Ge.get(Tt.key===null?Ke:Tt.key)||null,Ye(je,Ge,Tt,Yt);case O:var ir=Tt._init;return jt(Ge,je,Ke,ir(Tt._payload),Yt)}if(xr(Tt)||q(Tt))return Ge=Ge.get(Ke)||null,xt(je,Ge,Tt,Yt,null);uo(je,Tt)}return null}function $t(Ge,je,Ke,Tt){for(var Yt=null,ir=null,nr=je,hr=je=0,Pi=null;nr!==null&&hr<Ke.length;hr++){nr.index>hr?(Pi=nr,nr=null):Pi=nr.sibling;var Vr=vt(Ge,nr,Ke[hr],Tt);if(Vr===null){nr===null&&(nr=Pi);break}e&&nr&&Vr.alternate===null&&r(Ge,nr),je=j(Vr,je,hr),ir===null?Yt=Vr:ir.sibling=Vr,ir=Vr,nr=Pi}if(hr===Ke.length)return a(Ge,nr),ti&&Zn(Ge,hr),Yt;if(nr===null){for(;hr<Ke.length;hr++)nr=bt(Ge,Ke[hr],Tt),nr!==null&&(je=j(nr,je,hr),ir===null?Yt=nr:ir.sibling=nr,ir=nr);return ti&&Zn(Ge,hr),Yt}for(nr=p(Ge,nr);hr<Ke.length;hr++)Pi=jt(nr,Ge,hr,Ke[hr],Tt),Pi!==null&&(e&&Pi.alternate!==null&&nr.delete(Pi.key===null?hr:Pi.key),je=j(Pi,je,hr),ir===null?Yt=Pi:ir.sibling=Pi,ir=Pi);return e&&nr.forEach(function(Hn){return r(Ge,Hn)}),ti&&Zn(Ge,hr),Yt}function Kt(Ge,je,Ke,Tt){var Yt=q(Ke);if(typeof Yt!="function")throw Error(s(150));if(Ke=Yt.call(Ke),Ke==null)throw Error(s(151));for(var ir=Yt=null,nr=je,hr=je=0,Pi=null,Vr=Ke.next();nr!==null&&!Vr.done;hr++,Vr=Ke.next()){nr.index>hr?(Pi=nr,nr=null):Pi=nr.sibling;var Hn=vt(Ge,nr,Vr.value,Tt);if(Hn===null){nr===null&&(nr=Pi);break}e&&nr&&Hn.alternate===null&&r(Ge,nr),je=j(Hn,je,hr),ir===null?Yt=Hn:ir.sibling=Hn,ir=Hn,nr=Pi}if(Vr.done)return a(Ge,nr),ti&&Zn(Ge,hr),Yt;if(nr===null){for(;!Vr.done;hr++,Vr=Ke.next())Vr=bt(Ge,Vr.value,Tt),Vr!==null&&(je=j(Vr,je,hr),ir===null?Yt=Vr:ir.sibling=Vr,ir=Vr);return ti&&Zn(Ge,hr),Yt}for(nr=p(Ge,nr);!Vr.done;hr++,Vr=Ke.next())Vr=jt(nr,Ge,hr,Vr.value,Tt),Vr!==null&&(e&&Vr.alternate!==null&&nr.delete(Vr.key===null?hr:Vr.key),je=j(Vr,je,hr),ir===null?Yt=Vr:ir.sibling=Vr,ir=Vr);return e&&nr.forEach(function(ah){return r(Ge,ah)}),ti&&Zn(Ge,hr),Yt}function mi(Ge,je,Ke,Tt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===Q&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case B:e:{for(var Yt=Ke.key,ir=je;ir!==null;){if(ir.key===Yt){if(Yt=Ke.type,Yt===Q){if(ir.tag===7){a(Ge,ir.sibling),je=D(ir,Ke.props.children),je.return=Ge,Ge=je;break e}}else if(ir.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===O&&Vl(Yt)===ir.type){a(Ge,ir.sibling),je=D(ir,Ke.props),je.ref=Ls(Ge,ir,Ke),je.return=Ge,Ge=je;break e}a(Ge,ir);break}else r(Ge,ir);ir=ir.sibling}Ke.type===Q?(je=ss(Ke.props.children,Ge.mode,Tt,Ke.key),je.return=Ge,Ge=je):(Tt=zo(Ke.type,Ke.key,Ke.props,null,Ge.mode,Tt),Tt.ref=Ls(Ge,je,Ke),Tt.return=Ge,Ge=Tt)}return ie(Ge);case $:e:{for(ir=Ke.key;je!==null;){if(je.key===ir)if(je.tag===4&&je.stateNode.containerInfo===Ke.containerInfo&&je.stateNode.implementation===Ke.implementation){a(Ge,je.sibling),je=D(je,Ke.children||[]),je.return=Ge,Ge=je;break e}else{a(Ge,je);break}else r(Ge,je);je=je.sibling}je=rl(Ke,Ge.mode,Tt),je.return=Ge,Ge=je}return ie(Ge);case O:return ir=Ke._init,mi(Ge,je,ir(Ke._payload),Tt)}if(xr(Ke))return $t(Ge,je,Ke,Tt);if(q(Ke))return Kt(Ge,je,Ke,Tt);uo(Ge,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"?(Ke=""+Ke,je!==null&&je.tag===6?(a(Ge,je.sibling),je=D(je,Ke),je.return=Ge,Ge=je):(a(Ge,je),je=tl(Ke,Ge.mode,Tt),je.return=Ge,Ge=je),ie(Ge)):a(Ge,je)}return mi}var vs=jl(!0),Bl=jl(!1),co=In(null),ho=null,ys=null,ha=null;function da(){ha=ys=ho=null}function fa(e){var r=co.current;Jr(co),e._currentValue=r}function pa(e,r,a){for(;e!==null;){var p=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,p!==null&&(p.childLanes|=r)):p!==null&&(p.childLanes&r)!==r&&(p.childLanes|=r),e===a)break;e=e.return}}function xs(e,r){ho=e,ha=ys=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(Qi=!0),e.firstContext=null)}function un(e){var r=e._currentValue;if(ha!==e)if(e={context:e,memoizedValue:r,next:null},ys===null){if(ho===null)throw Error(s(308));ys=e,ho.dependencies={lanes:0,firstContext:e}}else ys=ys.next=e;return r}var Qn=null;function ma(e){Qn===null?Qn=[e]:Qn.push(e)}function Ul(e,r,a,p){var D=r.interleaved;return D===null?(a.next=a,ma(r)):(a.next=D.next,D.next=a),r.interleaved=a,Tn(e,p)}function Tn(e,r){e.lanes|=r;var a=e.alternate;for(a!==null&&(a.lanes|=r),a=e,e=e.return;e!==null;)e.childLanes|=r,a=e.alternate,a!==null&&(a.childLanes|=r),a=e,e=e.return;return a.tag===3?a.stateNode:null}var On=!1;function ga(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gl(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rn(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function Fn(e,r,a){var p=e.updateQueue;if(p===null)return null;if(p=p.shared,(Nr&2)!==0){var D=p.pending;return D===null?r.next=r:(r.next=D.next,D.next=r),p.pending=r,Tn(e,a)}return D=p.interleaved,D===null?(r.next=r,ma(p)):(r.next=D.next,D.next=r),p.interleaved=r,Tn(e,a)}function fo(e,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var p=r.lanes;p&=e.pendingLanes,a|=p,r.lanes=a,A(e,a)}}function Hl(e,r){var a=e.updateQueue,p=e.alternate;if(p!==null&&(p=p.updateQueue,a===p)){var D=null,j=null;if(a=a.firstBaseUpdate,a!==null){do{var ie={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};j===null?D=j=ie:j=j.next=ie,a=a.next}while(a!==null);j===null?D=j=r:j=j.next=r}else D=j=r;a={baseState:p.baseState,firstBaseUpdate:D,lastBaseUpdate:j,shared:p.shared,effects:p.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=r:e.next=r,a.lastBaseUpdate=r}function po(e,r,a,p){var D=e.updateQueue;On=!1;var j=D.firstBaseUpdate,ie=D.lastBaseUpdate,Ae=D.shared.pending;if(Ae!==null){D.shared.pending=null;var Oe=Ae,Ye=Oe.next;Oe.next=null,ie===null?j=Ye:ie.next=Ye,ie=Oe;var xt=e.alternate;xt!==null&&(xt=xt.updateQueue,Ae=xt.lastBaseUpdate,Ae!==ie&&(Ae===null?xt.firstBaseUpdate=Ye:Ae.next=Ye,xt.lastBaseUpdate=Oe))}if(j!==null){var bt=D.baseState;ie=0,xt=Ye=Oe=null,Ae=j;do{var vt=Ae.lane,jt=Ae.eventTime;if((p&vt)===vt){xt!==null&&(xt=xt.next={eventTime:jt,lane:0,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null});e:{var $t=e,Kt=Ae;switch(vt=r,jt=a,Kt.tag){case 1:if($t=Kt.payload,typeof $t=="function"){bt=$t.call(jt,bt,vt);break e}bt=$t;break e;case 3:$t.flags=$t.flags&-65537|128;case 0:if($t=Kt.payload,vt=typeof $t=="function"?$t.call(jt,bt,vt):$t,vt==null)break e;bt=Pe({},bt,vt);break e;case 2:On=!0}}Ae.callback!==null&&Ae.lane!==0&&(e.flags|=64,vt=D.effects,vt===null?D.effects=[Ae]:vt.push(Ae))}else jt={eventTime:jt,lane:vt,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null},xt===null?(Ye=xt=jt,Oe=bt):xt=xt.next=jt,ie|=vt;if(Ae=Ae.next,Ae===null){if(Ae=D.shared.pending,Ae===null)break;vt=Ae,Ae=vt.next,vt.next=null,D.lastBaseUpdate=vt,D.shared.pending=null}}while(!0);if(xt===null&&(Oe=bt),D.baseState=Oe,D.firstBaseUpdate=Ye,D.lastBaseUpdate=xt,r=D.shared.interleaved,r!==null){D=r;do ie|=D.lane,D=D.next;while(D!==r)}else j===null&&(D.shared.lanes=0);ts|=ie,e.lanes=ie,e.memoizedState=bt}}function Wl(e,r,a){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var p=e[r],D=p.callback;if(D!==null){if(p.callback=null,p=a,typeof D!="function")throw Error(s(191,D));D.call(p)}}}var Os={},_n=In(Os),Fs=In(Os),Ns=In(Os);function Jn(e){if(e===Os)throw Error(s(174));return e}function va(e,r){switch(Yr(Ns,r),Yr(Fs,e),Yr(_n,Os),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:pe(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=pe(r,e)}Jr(_n),Yr(_n,r)}function _s(){Jr(_n),Jr(Fs),Jr(Ns)}function $l(e){Jn(Ns.current);var r=Jn(_n.current),a=pe(r,e.type);r!==a&&(Yr(Fs,e),Yr(_n,a))}function ya(e){Fs.current===e&&(Jr(_n),Jr(Fs))}var oi=In(0);function mo(e){for(var r=e;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var xa=[];function _a(){for(var e=0;e<xa.length;e++)xa[e]._workInProgressVersionPrimary=null;xa.length=0}var go=F.ReactCurrentDispatcher,wa=F.ReactCurrentBatchConfig,es=0,ai=null,Si=null,Mi=null,vo=!1,Vs=!1,js=0,Mc=0;function Bi(){throw Error(s(321))}function ba(e,r){if(r===null)return!1;for(var a=0;a<r.length&&a<e.length;a++)if(!fn(e[a],r[a]))return!1;return!0}function Sa(e,r,a,p,D,j){if(es=j,ai=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,go.current=e===null||e.memoizedState===null?Ic:zc,e=a(p,D),Vs){j=0;do{if(Vs=!1,js=0,25<=j)throw Error(s(301));j+=1,Mi=Si=null,r.updateQueue=null,go.current=Lc,e=a(p,D)}while(Vs)}if(go.current=_o,r=Si!==null&&Si.next!==null,es=0,Mi=Si=ai=null,vo=!1,r)throw Error(s(300));return e}function Ea(){var e=js!==0;return js=0,e}function wn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mi===null?ai.memoizedState=Mi=e:Mi=Mi.next=e,Mi}function cn(){if(Si===null){var e=ai.alternate;e=e!==null?e.memoizedState:null}else e=Si.next;var r=Mi===null?ai.memoizedState:Mi.next;if(r!==null)Mi=r,Si=e;else{if(e===null)throw Error(s(310));Si=e,e={memoizedState:Si.memoizedState,baseState:Si.baseState,baseQueue:Si.baseQueue,queue:Si.queue,next:null},Mi===null?ai.memoizedState=Mi=e:Mi=Mi.next=e}return Mi}function Bs(e,r){return typeof r=="function"?r(e):r}function Ca(e){var r=cn(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var p=Si,D=p.baseQueue,j=a.pending;if(j!==null){if(D!==null){var ie=D.next;D.next=j.next,j.next=ie}p.baseQueue=D=j,a.pending=null}if(D!==null){j=D.next,p=p.baseState;var Ae=ie=null,Oe=null,Ye=j;do{var xt=Ye.lane;if((es&xt)===xt)Oe!==null&&(Oe=Oe.next={lane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),p=Ye.hasEagerState?Ye.eagerState:e(p,Ye.action);else{var bt={lane:xt,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null};Oe===null?(Ae=Oe=bt,ie=p):Oe=Oe.next=bt,ai.lanes|=xt,ts|=xt}Ye=Ye.next}while(Ye!==null&&Ye!==j);Oe===null?ie=p:Oe.next=Ae,fn(p,r.memoizedState)||(Qi=!0),r.memoizedState=p,r.baseState=ie,r.baseQueue=Oe,a.lastRenderedState=p}if(e=a.interleaved,e!==null){D=e;do j=D.lane,ai.lanes|=j,ts|=j,D=D.next;while(D!==e)}else D===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function Aa(e){var r=cn(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var p=a.dispatch,D=a.pending,j=r.memoizedState;if(D!==null){a.pending=null;var ie=D=D.next;do j=e(j,ie.action),ie=ie.next;while(ie!==D);fn(j,r.memoizedState)||(Qi=!0),r.memoizedState=j,r.baseQueue===null&&(r.baseState=j),a.lastRenderedState=j}return[j,p]}function Xl(){}function Kl(e,r){var a=ai,p=cn(),D=r(),j=!fn(p.memoizedState,D);if(j&&(p.memoizedState=D,Qi=!0),p=p.queue,Ta(Zl.bind(null,a,p,e),[e]),p.getSnapshot!==r||j||Mi!==null&&Mi.memoizedState.tag&1){if(a.flags|=2048,Us(9,Yl.bind(null,a,p,D,r),void 0,null),ki===null)throw Error(s(349));(es&30)!==0||ql(a,r,D)}return D}function ql(e,r,a){e.flags|=16384,e={getSnapshot:r,value:a},r=ai.updateQueue,r===null?(r={lastEffect:null,stores:null},ai.updateQueue=r,r.stores=[e]):(a=r.stores,a===null?r.stores=[e]:a.push(e))}function Yl(e,r,a,p){r.value=a,r.getSnapshot=p,Ql(r)&&Jl(e)}function Zl(e,r,a){return a(function(){Ql(r)&&Jl(e)})}function Ql(e){var r=e.getSnapshot;e=e.value;try{var a=r();return!fn(e,a)}catch{return!0}}function Jl(e){var r=Tn(e,1);r!==null&&yn(r,e,1,-1)}function eu(e){var r=wn();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:e},r.queue=e,e=e.dispatch=Dc.bind(null,ai,e),[r.memoizedState,e]}function Us(e,r,a,p){return e={tag:e,create:r,destroy:a,deps:p,next:null},r=ai.updateQueue,r===null?(r={lastEffect:null,stores:null},ai.updateQueue=r,r.lastEffect=e.next=e):(a=r.lastEffect,a===null?r.lastEffect=e.next=e:(p=a.next,a.next=e,e.next=p,r.lastEffect=e)),e}function tu(){return cn().memoizedState}function yo(e,r,a,p){var D=wn();ai.flags|=e,D.memoizedState=Us(1|r,a,void 0,p===void 0?null:p)}function xo(e,r,a,p){var D=cn();p=p===void 0?null:p;var j=void 0;if(Si!==null){var ie=Si.memoizedState;if(j=ie.destroy,p!==null&&ba(p,ie.deps)){D.memoizedState=Us(r,a,j,p);return}}ai.flags|=e,D.memoizedState=Us(1|r,a,j,p)}function ru(e,r){return yo(8390656,8,e,r)}function Ta(e,r){return xo(2048,8,e,r)}function iu(e,r){return xo(4,2,e,r)}function nu(e,r){return xo(4,4,e,r)}function su(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function ou(e,r,a){return a=a!=null?a.concat([e]):null,xo(4,4,su.bind(null,r,e),a)}function Ra(){}function au(e,r){var a=cn();r=r===void 0?null:r;var p=a.memoizedState;return p!==null&&r!==null&&ba(r,p[1])?p[0]:(a.memoizedState=[e,r],e)}function lu(e,r){var a=cn();r=r===void 0?null:r;var p=a.memoizedState;return p!==null&&r!==null&&ba(r,p[1])?p[0]:(e=e(),a.memoizedState=[e,r],e)}function uu(e,r,a){return(es&21)===0?(e.baseState&&(e.baseState=!1,Qi=!0),e.memoizedState=a):(fn(a,r)||(a=T(),ai.lanes|=a,ts|=a,e.baseState=!0),r)}function kc(e,r){var a=P;P=a!==0&&4>a?a:4,e(!0);var p=wa.transition;wa.transition={};try{e(!1),r()}finally{P=a,wa.transition=p}}function cu(){return cn().memoizedState}function Pc(e,r,a){var p=Bn(e);if(a={lane:p,action:a,hasEagerState:!1,eagerState:null,next:null},hu(e))du(r,a);else if(a=Ul(e,r,a,p),a!==null){var D=Xi();yn(a,e,p,D),fu(a,r,p)}}function Dc(e,r,a){var p=Bn(e),D={lane:p,action:a,hasEagerState:!1,eagerState:null,next:null};if(hu(e))du(r,D);else{var j=e.alternate;if(e.lanes===0&&(j===null||j.lanes===0)&&(j=r.lastRenderedReducer,j!==null))try{var ie=r.lastRenderedState,Ae=j(ie,a);if(D.hasEagerState=!0,D.eagerState=Ae,fn(Ae,ie)){var Oe=r.interleaved;Oe===null?(D.next=D,ma(r)):(D.next=Oe.next,Oe.next=D),r.interleaved=D;return}}catch{}a=Ul(e,r,D,p),a!==null&&(D=Xi(),yn(a,e,p,D),fu(a,r,p))}}function hu(e){var r=e.alternate;return e===ai||r!==null&&r===ai}function du(e,r){Vs=vo=!0;var a=e.pending;a===null?r.next=r:(r.next=a.next,a.next=r),e.pending=r}function fu(e,r,a){if((a&4194240)!==0){var p=r.lanes;p&=e.pendingLanes,a|=p,r.lanes=a,A(e,a)}}var _o={readContext:un,useCallback:Bi,useContext:Bi,useEffect:Bi,useImperativeHandle:Bi,useInsertionEffect:Bi,useLayoutEffect:Bi,useMemo:Bi,useReducer:Bi,useRef:Bi,useState:Bi,useDebugValue:Bi,useDeferredValue:Bi,useTransition:Bi,useMutableSource:Bi,useSyncExternalStore:Bi,useId:Bi,unstable_isNewReconciler:!1},Ic={readContext:un,useCallback:function(e,r){return wn().memoizedState=[e,r===void 0?null:r],e},useContext:un,useEffect:ru,useImperativeHandle:function(e,r,a){return a=a!=null?a.concat([e]):null,yo(4194308,4,su.bind(null,r,e),a)},useLayoutEffect:function(e,r){return yo(4194308,4,e,r)},useInsertionEffect:function(e,r){return yo(4,2,e,r)},useMemo:function(e,r){var a=wn();return r=r===void 0?null:r,e=e(),a.memoizedState=[e,r],e},useReducer:function(e,r,a){var p=wn();return r=a!==void 0?a(r):r,p.memoizedState=p.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},p.queue=e,e=e.dispatch=Pc.bind(null,ai,e),[p.memoizedState,e]},useRef:function(e){var r=wn();return e={current:e},r.memoizedState=e},useState:eu,useDebugValue:Ra,useDeferredValue:function(e){return wn().memoizedState=e},useTransition:function(){var e=eu(!1),r=e[0];return e=kc.bind(null,e[1]),wn().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,a){var p=ai,D=wn();if(ti){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),ki===null)throw Error(s(349));(es&30)!==0||ql(p,r,a)}D.memoizedState=a;var j={value:a,getSnapshot:r};return D.queue=j,ru(Zl.bind(null,p,j,e),[e]),p.flags|=2048,Us(9,Yl.bind(null,p,j,a,r),void 0,null),a},useId:function(){var e=wn(),r=ki.identifierPrefix;if(ti){var a=An,p=Cn;a=(p&~(1<<32-_r(p)-1)).toString(32)+a,r=":"+r+"R"+a,a=js++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=Mc++,r=":"+r+"r"+a.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},zc={readContext:un,useCallback:au,useContext:un,useEffect:Ta,useImperativeHandle:ou,useInsertionEffect:iu,useLayoutEffect:nu,useMemo:lu,useReducer:Ca,useRef:tu,useState:function(){return Ca(Bs)},useDebugValue:Ra,useDeferredValue:function(e){var r=cn();return uu(r,Si.memoizedState,e)},useTransition:function(){var e=Ca(Bs)[0],r=cn().memoizedState;return[e,r]},useMutableSource:Xl,useSyncExternalStore:Kl,useId:cu,unstable_isNewReconciler:!1},Lc={readContext:un,useCallback:au,useContext:un,useEffect:Ta,useImperativeHandle:ou,useInsertionEffect:iu,useLayoutEffect:nu,useMemo:lu,useReducer:Aa,useRef:tu,useState:function(){return Aa(Bs)},useDebugValue:Ra,useDeferredValue:function(e){var r=cn();return Si===null?r.memoizedState=e:uu(r,Si.memoizedState,e)},useTransition:function(){var e=Aa(Bs)[0],r=cn().memoizedState;return[e,r]},useMutableSource:Xl,useSyncExternalStore:Kl,useId:cu,unstable_isNewReconciler:!1};function mn(e,r){if(e&&e.defaultProps){r=Pe({},r),e=e.defaultProps;for(var a in e)r[a]===void 0&&(r[a]=e[a]);return r}return r}function Ma(e,r,a,p){r=e.memoizedState,a=a(p,r),a=a==null?r:Pe({},r,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var wo={isMounted:function(e){return(e=e._reactInternals)?Gr(e)===e:!1},enqueueSetState:function(e,r,a){e=e._reactInternals;var p=Xi(),D=Bn(e),j=Rn(p,D);j.payload=r,a!=null&&(j.callback=a),r=Fn(e,j,D),r!==null&&(yn(r,e,D,p),fo(r,e,D))},enqueueReplaceState:function(e,r,a){e=e._reactInternals;var p=Xi(),D=Bn(e),j=Rn(p,D);j.tag=1,j.payload=r,a!=null&&(j.callback=a),r=Fn(e,j,D),r!==null&&(yn(r,e,D,p),fo(r,e,D))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var a=Xi(),p=Bn(e),D=Rn(a,p);D.tag=2,r!=null&&(D.callback=r),r=Fn(e,D,p),r!==null&&(yn(r,e,p,a),fo(r,e,p))}};function pu(e,r,a,p,D,j,ie){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(p,j,ie):r.prototype&&r.prototype.isPureReactComponent?!Rs(a,p)||!Rs(D,j):!0}function mu(e,r,a){var p=!1,D=zn,j=r.contextType;return typeof j=="object"&&j!==null?j=un(j):(D=Zi(r)?qn:ji.current,p=r.contextTypes,j=(p=p!=null)?fs(e,D):zn),r=new r(a,j),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=wo,e.stateNode=r,r._reactInternals=e,p&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=D,e.__reactInternalMemoizedMaskedChildContext=j),r}function gu(e,r,a,p){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,p),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,p),r.state!==e&&wo.enqueueReplaceState(r,r.state,null)}function ka(e,r,a,p){var D=e.stateNode;D.props=a,D.state=e.memoizedState,D.refs={},ga(e);var j=r.contextType;typeof j=="object"&&j!==null?D.context=un(j):(j=Zi(r)?qn:ji.current,D.context=fs(e,j)),D.state=e.memoizedState,j=r.getDerivedStateFromProps,typeof j=="function"&&(Ma(e,r,j,a),D.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(r=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),r!==D.state&&wo.enqueueReplaceState(D,D.state,null),po(e,a,D,p),D.state=e.memoizedState),typeof D.componentDidMount=="function"&&(e.flags|=4194308)}function ws(e,r){try{var a="",p=r;do a+=Ce(p),p=p.return;while(p);var D=a}catch(j){D=`
Error generating stack: `+j.message+`
`+j.stack}return{value:e,source:r,stack:D,digest:null}}function Pa(e,r,a){return{value:e,source:null,stack:a??null,digest:r??null}}function Da(e,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var Oc=typeof WeakMap=="function"?WeakMap:Map;function vu(e,r,a){a=Rn(-1,a),a.tag=3,a.payload={element:null};var p=r.value;return a.callback=function(){Ro||(Ro=!0,Xa=p),Da(e,r)},a}function yu(e,r,a){a=Rn(-1,a),a.tag=3;var p=e.type.getDerivedStateFromError;if(typeof p=="function"){var D=r.value;a.payload=function(){return p(D)},a.callback=function(){Da(e,r)}}var j=e.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(a.callback=function(){Da(e,r),typeof p!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var ie=r.stack;this.componentDidCatch(r.value,{componentStack:ie!==null?ie:""})}),a}function xu(e,r,a){var p=e.pingCache;if(p===null){p=e.pingCache=new Oc;var D=new Set;p.set(r,D)}else D=p.get(r),D===void 0&&(D=new Set,p.set(r,D));D.has(a)||(D.add(a),e=Yc.bind(null,e,r,a),r.then(e,e))}function _u(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function wu(e,r,a,p,D){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=Rn(-1,1),r.tag=2,Fn(a,r,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=D,e)}var Fc=F.ReactCurrentOwner,Qi=!1;function $i(e,r,a,p){r.child=e===null?Bl(r,null,a,p):vs(r,e.child,a,p)}function bu(e,r,a,p,D){a=a.render;var j=r.ref;return xs(r,D),p=Sa(e,r,a,p,j,D),a=Ea(),e!==null&&!Qi?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~D,Mn(e,r,D)):(ti&&a&&oa(r),r.flags|=1,$i(e,r,p,D),r.child)}function Su(e,r,a,p,D){if(e===null){var j=a.type;return typeof j=="function"&&!el(j)&&j.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=j,Eu(e,r,j,p,D)):(e=zo(a.type,null,p,r,r.mode,D),e.ref=r.ref,e.return=r,r.child=e)}if(j=e.child,(e.lanes&D)===0){var ie=j.memoizedProps;if(a=a.compare,a=a!==null?a:Rs,a(ie,p)&&e.ref===r.ref)return Mn(e,r,D)}return r.flags|=1,e=Gn(j,p),e.ref=r.ref,e.return=r,r.child=e}function Eu(e,r,a,p,D){if(e!==null){var j=e.memoizedProps;if(Rs(j,p)&&e.ref===r.ref)if(Qi=!1,r.pendingProps=p=j,(e.lanes&D)!==0)(e.flags&131072)!==0&&(Qi=!0);else return r.lanes=e.lanes,Mn(e,r,D)}return Ia(e,r,a,p,D)}function Cu(e,r,a){var p=r.pendingProps,D=p.children,j=e!==null?e.memoizedState:null;if(p.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yr(Ss,sn),sn|=a;else{if((a&1073741824)===0)return e=j!==null?j.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,Yr(Ss,sn),sn|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=j!==null?j.baseLanes:a,Yr(Ss,sn),sn|=p}else j!==null?(p=j.baseLanes|a,r.memoizedState=null):p=a,Yr(Ss,sn),sn|=p;return $i(e,r,D,a),r.child}function Au(e,r){var a=r.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function Ia(e,r,a,p,D){var j=Zi(a)?qn:ji.current;return j=fs(r,j),xs(r,D),a=Sa(e,r,a,p,j,D),p=Ea(),e!==null&&!Qi?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~D,Mn(e,r,D)):(ti&&p&&oa(r),r.flags|=1,$i(e,r,a,D),r.child)}function Tu(e,r,a,p,D){if(Zi(a)){var j=!0;no(r)}else j=!1;if(xs(r,D),r.stateNode===null)So(e,r),mu(r,a,p),ka(r,a,p,D),p=!0;else if(e===null){var ie=r.stateNode,Ae=r.memoizedProps;ie.props=Ae;var Oe=ie.context,Ye=a.contextType;typeof Ye=="object"&&Ye!==null?Ye=un(Ye):(Ye=Zi(a)?qn:ji.current,Ye=fs(r,Ye));var xt=a.getDerivedStateFromProps,bt=typeof xt=="function"||typeof ie.getSnapshotBeforeUpdate=="function";bt||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(Ae!==p||Oe!==Ye)&&gu(r,ie,p,Ye),On=!1;var vt=r.memoizedState;ie.state=vt,po(r,p,ie,D),Oe=r.memoizedState,Ae!==p||vt!==Oe||Yi.current||On?(typeof xt=="function"&&(Ma(r,a,xt,p),Oe=r.memoizedState),(Ae=On||pu(r,a,Ae,p,vt,Oe,Ye))?(bt||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(r.flags|=4194308)):(typeof ie.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=p,r.memoizedState=Oe),ie.props=p,ie.state=Oe,ie.context=Ye,p=Ae):(typeof ie.componentDidMount=="function"&&(r.flags|=4194308),p=!1)}else{ie=r.stateNode,Gl(e,r),Ae=r.memoizedProps,Ye=r.type===r.elementType?Ae:mn(r.type,Ae),ie.props=Ye,bt=r.pendingProps,vt=ie.context,Oe=a.contextType,typeof Oe=="object"&&Oe!==null?Oe=un(Oe):(Oe=Zi(a)?qn:ji.current,Oe=fs(r,Oe));var jt=a.getDerivedStateFromProps;(xt=typeof jt=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(Ae!==bt||vt!==Oe)&&gu(r,ie,p,Oe),On=!1,vt=r.memoizedState,ie.state=vt,po(r,p,ie,D);var $t=r.memoizedState;Ae!==bt||vt!==$t||Yi.current||On?(typeof jt=="function"&&(Ma(r,a,jt,p),$t=r.memoizedState),(Ye=On||pu(r,a,Ye,p,vt,$t,Oe)||!1)?(xt||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(p,$t,Oe),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(p,$t,Oe)),typeof ie.componentDidUpdate=="function"&&(r.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof ie.componentDidUpdate!="function"||Ae===e.memoizedProps&&vt===e.memoizedState||(r.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||Ae===e.memoizedProps&&vt===e.memoizedState||(r.flags|=1024),r.memoizedProps=p,r.memoizedState=$t),ie.props=p,ie.state=$t,ie.context=Oe,p=Ye):(typeof ie.componentDidUpdate!="function"||Ae===e.memoizedProps&&vt===e.memoizedState||(r.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||Ae===e.memoizedProps&&vt===e.memoizedState||(r.flags|=1024),p=!1)}return za(e,r,a,p,j,D)}function za(e,r,a,p,D,j){Au(e,r);var ie=(r.flags&128)!==0;if(!p&&!ie)return D&&Dl(r,a,!1),Mn(e,r,j);p=r.stateNode,Fc.current=r;var Ae=ie&&typeof a.getDerivedStateFromError!="function"?null:p.render();return r.flags|=1,e!==null&&ie?(r.child=vs(r,e.child,null,j),r.child=vs(r,null,Ae,j)):$i(e,r,Ae,j),r.memoizedState=p.state,D&&Dl(r,a,!0),r.child}function Ru(e){var r=e.stateNode;r.pendingContext?kl(e,r.pendingContext,r.pendingContext!==r.context):r.context&&kl(e,r.context,!1),va(e,r.containerInfo)}function Mu(e,r,a,p,D){return gs(),ca(D),r.flags|=256,$i(e,r,a,p),r.child}var La={dehydrated:null,treeContext:null,retryLane:0};function Oa(e){return{baseLanes:e,cachePool:null,transitions:null}}function ku(e,r,a){var p=r.pendingProps,D=oi.current,j=!1,ie=(r.flags&128)!==0,Ae;if((Ae=ie)||(Ae=e!==null&&e.memoizedState===null?!1:(D&2)!==0),Ae?(j=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(D|=1),Yr(oi,D&1),e===null)return ua(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(ie=p.children,e=p.fallback,j?(p=r.mode,j=r.child,ie={mode:"hidden",children:ie},(p&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=ie):j=Lo(ie,p,0,null),e=ss(e,p,a,null),j.return=r,e.return=r,j.sibling=e,r.child=j,r.child.memoizedState=Oa(a),r.memoizedState=La,e):Fa(r,ie));if(D=e.memoizedState,D!==null&&(Ae=D.dehydrated,Ae!==null))return Nc(e,r,ie,p,Ae,D,a);if(j){j=p.fallback,ie=r.mode,D=e.child,Ae=D.sibling;var Oe={mode:"hidden",children:p.children};return(ie&1)===0&&r.child!==D?(p=r.child,p.childLanes=0,p.pendingProps=Oe,r.deletions=null):(p=Gn(D,Oe),p.subtreeFlags=D.subtreeFlags&14680064),Ae!==null?j=Gn(Ae,j):(j=ss(j,ie,a,null),j.flags|=2),j.return=r,p.return=r,p.sibling=j,r.child=p,p=j,j=r.child,ie=e.child.memoizedState,ie=ie===null?Oa(a):{baseLanes:ie.baseLanes|a,cachePool:null,transitions:ie.transitions},j.memoizedState=ie,j.childLanes=e.childLanes&~a,r.memoizedState=La,p}return j=e.child,e=j.sibling,p=Gn(j,{mode:"visible",children:p.children}),(r.mode&1)===0&&(p.lanes=a),p.return=r,p.sibling=null,e!==null&&(a=r.deletions,a===null?(r.deletions=[e],r.flags|=16):a.push(e)),r.child=p,r.memoizedState=null,p}function Fa(e,r){return r=Lo({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function bo(e,r,a,p){return p!==null&&ca(p),vs(r,e.child,null,a),e=Fa(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function Nc(e,r,a,p,D,j,ie){if(a)return r.flags&256?(r.flags&=-257,p=Pa(Error(s(422))),bo(e,r,ie,p)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(j=p.fallback,D=r.mode,p=Lo({mode:"visible",children:p.children},D,0,null),j=ss(j,D,ie,null),j.flags|=2,p.return=r,j.return=r,p.sibling=j,r.child=p,(r.mode&1)!==0&&vs(r,e.child,null,ie),r.child.memoizedState=Oa(ie),r.memoizedState=La,j);if((r.mode&1)===0)return bo(e,r,ie,null);if(D.data==="$!"){if(p=D.nextSibling&&D.nextSibling.dataset,p)var Ae=p.dgst;return p=Ae,j=Error(s(419)),p=Pa(j,p,void 0),bo(e,r,ie,p)}if(Ae=(ie&e.childLanes)!==0,Qi||Ae){if(p=ki,p!==null){switch(ie&-ie){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}D=(D&(p.suspendedLanes|ie))!==0?0:D,D!==0&&D!==j.retryLane&&(j.retryLane=D,Tn(e,D),yn(p,e,D,-1))}return Ja(),p=Pa(Error(s(421))),bo(e,r,ie,p)}return D.data==="$?"?(r.flags|=128,r.child=e.child,r=Zc.bind(null,e),D._reactRetry=r,null):(e=j.treeContext,nn=Dn(D.nextSibling),rn=r,ti=!0,pn=null,e!==null&&(an[ln++]=Cn,an[ln++]=An,an[ln++]=Yn,Cn=e.id,An=e.overflow,Yn=r),r=Fa(r,p.children),r.flags|=4096,r)}function Pu(e,r,a){e.lanes|=r;var p=e.alternate;p!==null&&(p.lanes|=r),pa(e.return,r,a)}function Na(e,r,a,p,D){var j=e.memoizedState;j===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:p,tail:a,tailMode:D}:(j.isBackwards=r,j.rendering=null,j.renderingStartTime=0,j.last=p,j.tail=a,j.tailMode=D)}function Du(e,r,a){var p=r.pendingProps,D=p.revealOrder,j=p.tail;if($i(e,r,p.children,a),p=oi.current,(p&2)!==0)p=p&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pu(e,a,r);else if(e.tag===19)Pu(e,a,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}p&=1}if(Yr(oi,p),(r.mode&1)===0)r.memoizedState=null;else switch(D){case"forwards":for(a=r.child,D=null;a!==null;)e=a.alternate,e!==null&&mo(e)===null&&(D=a),a=a.sibling;a=D,a===null?(D=r.child,r.child=null):(D=a.sibling,a.sibling=null),Na(r,!1,D,a,j);break;case"backwards":for(a=null,D=r.child,r.child=null;D!==null;){if(e=D.alternate,e!==null&&mo(e)===null){r.child=D;break}e=D.sibling,D.sibling=a,a=D,D=e}Na(r,!0,a,null,j);break;case"together":Na(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function So(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function Mn(e,r,a){if(e!==null&&(r.dependencies=e.dependencies),ts|=r.lanes,(a&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(s(153));if(r.child!==null){for(e=r.child,a=Gn(e,e.pendingProps),r.child=a,a.return=r;e.sibling!==null;)e=e.sibling,a=a.sibling=Gn(e,e.pendingProps),a.return=r;a.sibling=null}return r.child}function Vc(e,r,a){switch(r.tag){case 3:Ru(r),gs();break;case 5:$l(r);break;case 1:Zi(r.type)&&no(r);break;case 4:va(r,r.stateNode.containerInfo);break;case 10:var p=r.type._context,D=r.memoizedProps.value;Yr(co,p._currentValue),p._currentValue=D;break;case 13:if(p=r.memoizedState,p!==null)return p.dehydrated!==null?(Yr(oi,oi.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?ku(e,r,a):(Yr(oi,oi.current&1),e=Mn(e,r,a),e!==null?e.sibling:null);Yr(oi,oi.current&1);break;case 19:if(p=(a&r.childLanes)!==0,(e.flags&128)!==0){if(p)return Du(e,r,a);r.flags|=128}if(D=r.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),Yr(oi,oi.current),p)break;return null;case 22:case 23:return r.lanes=0,Cu(e,r,a)}return Mn(e,r,a)}var Iu,Va,zu,Lu;Iu=function(e,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Va=function(){},zu=function(e,r,a,p){var D=e.memoizedProps;if(D!==p){e=r.stateNode,Jn(_n.current);var j=null;switch(a){case"input":D=or(e,D),p=or(e,p),j=[];break;case"select":D=Pe({},D,{value:void 0}),p=Pe({},p,{value:void 0}),j=[];break;case"textarea":D=kr(e,D),p=kr(e,p),j=[];break;default:typeof D.onClick!="function"&&typeof p.onClick=="function"&&(e.onclick=to)}zt(a,p);var ie;a=null;for(Ye in D)if(!p.hasOwnProperty(Ye)&&D.hasOwnProperty(Ye)&&D[Ye]!=null)if(Ye==="style"){var Ae=D[Ye];for(ie in Ae)Ae.hasOwnProperty(ie)&&(a||(a={}),a[ie]="")}else Ye!=="dangerouslySetInnerHTML"&&Ye!=="children"&&Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&Ye!=="autoFocus"&&(h.hasOwnProperty(Ye)?j||(j=[]):(j=j||[]).push(Ye,null));for(Ye in p){var Oe=p[Ye];if(Ae=D?.[Ye],p.hasOwnProperty(Ye)&&Oe!==Ae&&(Oe!=null||Ae!=null))if(Ye==="style")if(Ae){for(ie in Ae)!Ae.hasOwnProperty(ie)||Oe&&Oe.hasOwnProperty(ie)||(a||(a={}),a[ie]="");for(ie in Oe)Oe.hasOwnProperty(ie)&&Ae[ie]!==Oe[ie]&&(a||(a={}),a[ie]=Oe[ie])}else a||(j||(j=[]),j.push(Ye,a)),a=Oe;else Ye==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Ae=Ae?Ae.__html:void 0,Oe!=null&&Ae!==Oe&&(j=j||[]).push(Ye,Oe)):Ye==="children"?typeof Oe!="string"&&typeof Oe!="number"||(j=j||[]).push(Ye,""+Oe):Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&(h.hasOwnProperty(Ye)?(Oe!=null&&Ye==="onScroll"&&Qr("scroll",e),j||Ae===Oe||(j=[])):(j=j||[]).push(Ye,Oe))}a&&(j=j||[]).push("style",a);var Ye=j;(r.updateQueue=Ye)&&(r.flags|=4)}},Lu=function(e,r,a,p){a!==p&&(r.flags|=4)};function Gs(e,r){if(!ti)switch(e.tailMode){case"hidden":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var p=null;a!==null;)a.alternate!==null&&(p=a),a=a.sibling;p===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:p.sibling=null}}function Ui(e){var r=e.alternate!==null&&e.alternate.child===e.child,a=0,p=0;if(r)for(var D=e.child;D!==null;)a|=D.lanes|D.childLanes,p|=D.subtreeFlags&14680064,p|=D.flags&14680064,D.return=e,D=D.sibling;else for(D=e.child;D!==null;)a|=D.lanes|D.childLanes,p|=D.subtreeFlags,p|=D.flags,D.return=e,D=D.sibling;return e.subtreeFlags|=p,e.childLanes=a,r}function jc(e,r,a){var p=r.pendingProps;switch(aa(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ui(r),null;case 1:return Zi(r.type)&&io(),Ui(r),null;case 3:return p=r.stateNode,_s(),Jr(Yi),Jr(ji),_a(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(e===null||e.child===null)&&(lo(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,pn!==null&&(Ya(pn),pn=null))),Va(e,r),Ui(r),null;case 5:ya(r);var D=Jn(Ns.current);if(a=r.type,e!==null&&r.stateNode!=null)zu(e,r,a,p,D),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!p){if(r.stateNode===null)throw Error(s(166));return Ui(r),null}if(e=Jn(_n.current),lo(r)){p=r.stateNode,a=r.type;var j=r.memoizedProps;switch(p[xn]=r,p[Is]=j,e=(r.mode&1)!==0,a){case"dialog":Qr("cancel",p),Qr("close",p);break;case"iframe":case"object":case"embed":Qr("load",p);break;case"video":case"audio":for(D=0;D<ks.length;D++)Qr(ks[D],p);break;case"source":Qr("error",p);break;case"img":case"image":case"link":Qr("error",p),Qr("load",p);break;case"details":Qr("toggle",p);break;case"input":ar(p,j),Qr("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!j.multiple},Qr("invalid",p);break;case"textarea":zr(p,j),Qr("invalid",p)}zt(a,j),D=null;for(var ie in j)if(j.hasOwnProperty(ie)){var Ae=j[ie];ie==="children"?typeof Ae=="string"?p.textContent!==Ae&&(j.suppressHydrationWarning!==!0&&eo(p.textContent,Ae,e),D=["children",Ae]):typeof Ae=="number"&&p.textContent!==""+Ae&&(j.suppressHydrationWarning!==!0&&eo(p.textContent,Ae,e),D=["children",""+Ae]):h.hasOwnProperty(ie)&&Ae!=null&&ie==="onScroll"&&Qr("scroll",p)}switch(a){case"input":at(p),pr(p,j,!0);break;case"textarea":at(p),wi(p);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(p.onclick=to)}p=D,r.updateQueue=p,p!==null&&(r.flags|=4)}else{ie=D.nodeType===9?D:D.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Hi(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=ie.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof p.is=="string"?e=ie.createElement(a,{is:p.is}):(e=ie.createElement(a),a==="select"&&(ie=e,p.multiple?ie.multiple=!0:p.size&&(ie.size=p.size))):e=ie.createElementNS(e,a),e[xn]=r,e[Is]=p,Iu(e,r,!1,!1),r.stateNode=e;e:{switch(ie=mr(a,p),a){case"dialog":Qr("cancel",e),Qr("close",e),D=p;break;case"iframe":case"object":case"embed":Qr("load",e),D=p;break;case"video":case"audio":for(D=0;D<ks.length;D++)Qr(ks[D],e);D=p;break;case"source":Qr("error",e),D=p;break;case"img":case"image":case"link":Qr("error",e),Qr("load",e),D=p;break;case"details":Qr("toggle",e),D=p;break;case"input":ar(e,p),D=or(e,p),Qr("invalid",e);break;case"option":D=p;break;case"select":e._wrapperState={wasMultiple:!!p.multiple},D=Pe({},p,{value:void 0}),Qr("invalid",e);break;case"textarea":zr(e,p),D=kr(e,p),Qr("invalid",e);break;default:D=p}zt(a,D),Ae=D;for(j in Ae)if(Ae.hasOwnProperty(j)){var Oe=Ae[j];j==="style"?Lt(e,Oe):j==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Oe!=null&&ze(e,Oe)):j==="children"?typeof Oe=="string"?(a!=="textarea"||Oe!=="")&&dt(e,Oe):typeof Oe=="number"&&dt(e,""+Oe):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(h.hasOwnProperty(j)?Oe!=null&&j==="onScroll"&&Qr("scroll",e):Oe!=null&&b(e,j,Oe,ie))}switch(a){case"input":at(e),pr(e,p,!1);break;case"textarea":at(e),wi(e);break;case"option":p.value!=null&&e.setAttribute("value",""+Fe(p.value));break;case"select":e.multiple=!!p.multiple,j=p.value,j!=null?fi(e,!!p.multiple,j,!1):p.defaultValue!=null&&fi(e,!!p.multiple,p.defaultValue,!0);break;default:typeof D.onClick=="function"&&(e.onclick=to)}switch(a){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ui(r),null;case 6:if(e&&r.stateNode!=null)Lu(e,r,e.memoizedProps,p);else{if(typeof p!="string"&&r.stateNode===null)throw Error(s(166));if(a=Jn(Ns.current),Jn(_n.current),lo(r)){if(p=r.stateNode,a=r.memoizedProps,p[xn]=r,(j=p.nodeValue!==a)&&(e=rn,e!==null))switch(e.tag){case 3:eo(p.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&eo(p.nodeValue,a,(e.mode&1)!==0)}j&&(r.flags|=4)}else p=(a.nodeType===9?a:a.ownerDocument).createTextNode(p),p[xn]=r,r.stateNode=p}return Ui(r),null;case 13:if(Jr(oi),p=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ti&&nn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Nl(),gs(),r.flags|=98560,j=!1;else if(j=lo(r),p!==null&&p.dehydrated!==null){if(e===null){if(!j)throw Error(s(318));if(j=r.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(s(317));j[xn]=r}else gs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ui(r),j=!1}else pn!==null&&(Ya(pn),pn=null),j=!0;if(!j)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(p=p!==null,p!==(e!==null&&e.memoizedState!==null)&&p&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(oi.current&1)!==0?Ei===0&&(Ei=3):Ja())),r.updateQueue!==null&&(r.flags|=4),Ui(r),null);case 4:return _s(),Va(e,r),e===null&&Ps(r.stateNode.containerInfo),Ui(r),null;case 10:return fa(r.type._context),Ui(r),null;case 17:return Zi(r.type)&&io(),Ui(r),null;case 19:if(Jr(oi),j=r.memoizedState,j===null)return Ui(r),null;if(p=(r.flags&128)!==0,ie=j.rendering,ie===null)if(p)Gs(j,!1);else{if(Ei!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(ie=mo(e),ie!==null){for(r.flags|=128,Gs(j,!1),p=ie.updateQueue,p!==null&&(r.updateQueue=p,r.flags|=4),r.subtreeFlags=0,p=a,a=r.child;a!==null;)j=a,e=p,j.flags&=14680066,ie=j.alternate,ie===null?(j.childLanes=0,j.lanes=e,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=ie.childLanes,j.lanes=ie.lanes,j.child=ie.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=ie.memoizedProps,j.memoizedState=ie.memoizedState,j.updateQueue=ie.updateQueue,j.type=ie.type,e=ie.dependencies,j.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Yr(oi,oi.current&1|2),r.child}e=e.sibling}j.tail!==null&&lt()>Es&&(r.flags|=128,p=!0,Gs(j,!1),r.lanes=4194304)}else{if(!p)if(e=mo(ie),e!==null){if(r.flags|=128,p=!0,a=e.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),Gs(j,!0),j.tail===null&&j.tailMode==="hidden"&&!ie.alternate&&!ti)return Ui(r),null}else 2*lt()-j.renderingStartTime>Es&&a!==1073741824&&(r.flags|=128,p=!0,Gs(j,!1),r.lanes=4194304);j.isBackwards?(ie.sibling=r.child,r.child=ie):(a=j.last,a!==null?a.sibling=ie:r.child=ie,j.last=ie)}return j.tail!==null?(r=j.tail,j.rendering=r,j.tail=r.sibling,j.renderingStartTime=lt(),r.sibling=null,a=oi.current,Yr(oi,p?a&1|2:a&1),r):(Ui(r),null);case 22:case 23:return Qa(),p=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==p&&(r.flags|=8192),p&&(r.mode&1)!==0?(sn&1073741824)!==0&&(Ui(r),r.subtreeFlags&6&&(r.flags|=8192)):Ui(r),null;case 24:return null;case 25:return null}throw Error(s(156,r.tag))}function Bc(e,r){switch(aa(r),r.tag){case 1:return Zi(r.type)&&io(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return _s(),Jr(Yi),Jr(ji),_a(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return ya(r),null;case 13:if(Jr(oi),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(s(340));gs()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return Jr(oi),null;case 4:return _s(),null;case 10:return fa(r.type._context),null;case 22:case 23:return Qa(),null;case 24:return null;default:return null}}var Eo=!1,Gi=!1,Uc=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function bs(e,r){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(p){di(e,r,p)}else a.current=null}function ja(e,r,a){try{a()}catch(p){di(e,r,p)}}var Ou=!1;function Gc(e,r){if(Qo=et,e=pl(),Ho(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var p=a.getSelection&&a.getSelection();if(p&&p.rangeCount!==0){a=p.anchorNode;var D=p.anchorOffset,j=p.focusNode;p=p.focusOffset;try{a.nodeType,j.nodeType}catch{a=null;break e}var ie=0,Ae=-1,Oe=-1,Ye=0,xt=0,bt=e,vt=null;t:for(;;){for(var jt;bt!==a||D!==0&&bt.nodeType!==3||(Ae=ie+D),bt!==j||p!==0&&bt.nodeType!==3||(Oe=ie+p),bt.nodeType===3&&(ie+=bt.nodeValue.length),(jt=bt.firstChild)!==null;)vt=bt,bt=jt;for(;;){if(bt===e)break t;if(vt===a&&++Ye===D&&(Ae=ie),vt===j&&++xt===p&&(Oe=ie),(jt=bt.nextSibling)!==null)break;bt=vt,vt=bt.parentNode}bt=jt}a=Ae===-1||Oe===-1?null:{start:Ae,end:Oe}}else a=null}a=a||{start:0,end:0}}else a=null;for(Jo={focusedElem:e,selectionRange:a},et=!1,Gt=r;Gt!==null;)if(r=Gt,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,Gt=e;else for(;Gt!==null;){r=Gt;try{var $t=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if($t!==null){var Kt=$t.memoizedProps,mi=$t.memoizedState,Ge=r.stateNode,je=Ge.getSnapshotBeforeUpdate(r.elementType===r.type?Kt:mn(r.type,Kt),mi);Ge.__reactInternalSnapshotBeforeUpdate=je}break;case 3:var Ke=r.stateNode.containerInfo;Ke.nodeType===1?Ke.textContent="":Ke.nodeType===9&&Ke.documentElement&&Ke.removeChild(Ke.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Tt){di(r,r.return,Tt)}if(e=r.sibling,e!==null){e.return=r.return,Gt=e;break}Gt=r.return}return $t=Ou,Ou=!1,$t}function Hs(e,r,a){var p=r.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var D=p=p.next;do{if((D.tag&e)===e){var j=D.destroy;D.destroy=void 0,j!==void 0&&ja(r,a,j)}D=D.next}while(D!==p)}}function Co(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var p=a.create;a.destroy=p()}a=a.next}while(a!==r)}}function Ba(e){var r=e.ref;if(r!==null){var a=e.stateNode;e.tag,e=a,typeof r=="function"?r(e):r.current=e}}function Fu(e){var r=e.alternate;r!==null&&(e.alternate=null,Fu(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[xn],delete r[Is],delete r[ia],delete r[Cc],delete r[Ac])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Nu(e){return e.tag===5||e.tag===3||e.tag===4}function Vu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Nu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ua(e,r,a){var p=e.tag;if(p===5||p===6)e=e.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(e,r):a.insertBefore(e,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(e,a)):(r=a,r.appendChild(e)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=to));else if(p!==4&&(e=e.child,e!==null))for(Ua(e,r,a),e=e.sibling;e!==null;)Ua(e,r,a),e=e.sibling}function Ga(e,r,a){var p=e.tag;if(p===5||p===6)e=e.stateNode,r?a.insertBefore(e,r):a.appendChild(e);else if(p!==4&&(e=e.child,e!==null))for(Ga(e,r,a),e=e.sibling;e!==null;)Ga(e,r,a),e=e.sibling}var Oi=null,gn=!1;function Nn(e,r,a){for(a=a.child;a!==null;)ju(e,r,a),a=a.sibling}function ju(e,r,a){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(Cr,a)}catch{}switch(a.tag){case 5:Gi||bs(a,r);case 6:var p=Oi,D=gn;Oi=null,Nn(e,r,a),Oi=p,gn=D,Oi!==null&&(gn?(e=Oi,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):Oi.removeChild(a.stateNode));break;case 18:Oi!==null&&(gn?(e=Oi,a=a.stateNode,e.nodeType===8?ra(e.parentNode,a):e.nodeType===1&&ra(e,a),pt(e)):ra(Oi,a.stateNode));break;case 4:p=Oi,D=gn,Oi=a.stateNode.containerInfo,gn=!0,Nn(e,r,a),Oi=p,gn=D;break;case 0:case 11:case 14:case 15:if(!Gi&&(p=a.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){D=p=p.next;do{var j=D,ie=j.destroy;j=j.tag,ie!==void 0&&((j&2)!==0||(j&4)!==0)&&ja(a,r,ie),D=D.next}while(D!==p)}Nn(e,r,a);break;case 1:if(!Gi&&(bs(a,r),p=a.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=a.memoizedProps,p.state=a.memoizedState,p.componentWillUnmount()}catch(Ae){di(a,r,Ae)}Nn(e,r,a);break;case 21:Nn(e,r,a);break;case 22:a.mode&1?(Gi=(p=Gi)||a.memoizedState!==null,Nn(e,r,a),Gi=p):Nn(e,r,a);break;default:Nn(e,r,a)}}function Bu(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new Uc),r.forEach(function(p){var D=Qc.bind(null,e,p);a.has(p)||(a.add(p),p.then(D,D))})}}function vn(e,r){var a=r.deletions;if(a!==null)for(var p=0;p<a.length;p++){var D=a[p];try{var j=e,ie=r,Ae=ie;e:for(;Ae!==null;){switch(Ae.tag){case 5:Oi=Ae.stateNode,gn=!1;break e;case 3:Oi=Ae.stateNode.containerInfo,gn=!0;break e;case 4:Oi=Ae.stateNode.containerInfo,gn=!0;break e}Ae=Ae.return}if(Oi===null)throw Error(s(160));ju(j,ie,D),Oi=null,gn=!1;var Oe=D.alternate;Oe!==null&&(Oe.return=null),D.return=null}catch(Ye){di(D,r,Ye)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Uu(r,e),r=r.sibling}function Uu(e,r){var a=e.alternate,p=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vn(r,e),bn(e),p&4){try{Hs(3,e,e.return),Co(3,e)}catch(Kt){di(e,e.return,Kt)}try{Hs(5,e,e.return)}catch(Kt){di(e,e.return,Kt)}}break;case 1:vn(r,e),bn(e),p&512&&a!==null&&bs(a,a.return);break;case 5:if(vn(r,e),bn(e),p&512&&a!==null&&bs(a,a.return),e.flags&32){var D=e.stateNode;try{dt(D,"")}catch(Kt){di(e,e.return,Kt)}}if(p&4&&(D=e.stateNode,D!=null)){var j=e.memoizedProps,ie=a!==null?a.memoizedProps:j,Ae=e.type,Oe=e.updateQueue;if(e.updateQueue=null,Oe!==null)try{Ae==="input"&&j.type==="radio"&&j.name!=null&&Mr(D,j),mr(Ae,ie);var Ye=mr(Ae,j);for(ie=0;ie<Oe.length;ie+=2){var xt=Oe[ie],bt=Oe[ie+1];xt==="style"?Lt(D,bt):xt==="dangerouslySetInnerHTML"?ze(D,bt):xt==="children"?dt(D,bt):b(D,xt,bt,Ye)}switch(Ae){case"input":Er(D,j);break;case"textarea":Di(D,j);break;case"select":var vt=D._wrapperState.wasMultiple;D._wrapperState.wasMultiple=!!j.multiple;var jt=j.value;jt!=null?fi(D,!!j.multiple,jt,!1):vt!==!!j.multiple&&(j.defaultValue!=null?fi(D,!!j.multiple,j.defaultValue,!0):fi(D,!!j.multiple,j.multiple?[]:"",!1))}D[Is]=j}catch(Kt){di(e,e.return,Kt)}}break;case 6:if(vn(r,e),bn(e),p&4){if(e.stateNode===null)throw Error(s(162));D=e.stateNode,j=e.memoizedProps;try{D.nodeValue=j}catch(Kt){di(e,e.return,Kt)}}break;case 3:if(vn(r,e),bn(e),p&4&&a!==null&&a.memoizedState.isDehydrated)try{pt(r.containerInfo)}catch(Kt){di(e,e.return,Kt)}break;case 4:vn(r,e),bn(e);break;case 13:vn(r,e),bn(e),D=e.child,D.flags&8192&&(j=D.memoizedState!==null,D.stateNode.isHidden=j,!j||D.alternate!==null&&D.alternate.memoizedState!==null||($a=lt())),p&4&&Bu(e);break;case 22:if(xt=a!==null&&a.memoizedState!==null,e.mode&1?(Gi=(Ye=Gi)||xt,vn(r,e),Gi=Ye):vn(r,e),bn(e),p&8192){if(Ye=e.memoizedState!==null,(e.stateNode.isHidden=Ye)&&!xt&&(e.mode&1)!==0)for(Gt=e,xt=e.child;xt!==null;){for(bt=Gt=xt;Gt!==null;){switch(vt=Gt,jt=vt.child,vt.tag){case 0:case 11:case 14:case 15:Hs(4,vt,vt.return);break;case 1:bs(vt,vt.return);var $t=vt.stateNode;if(typeof $t.componentWillUnmount=="function"){p=vt,a=vt.return;try{r=p,$t.props=r.memoizedProps,$t.state=r.memoizedState,$t.componentWillUnmount()}catch(Kt){di(p,a,Kt)}}break;case 5:bs(vt,vt.return);break;case 22:if(vt.memoizedState!==null){Wu(bt);continue}}jt!==null?(jt.return=vt,Gt=jt):Wu(bt)}xt=xt.sibling}e:for(xt=null,bt=e;;){if(bt.tag===5){if(xt===null){xt=bt;try{D=bt.stateNode,Ye?(j=D.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(Ae=bt.stateNode,Oe=bt.memoizedProps.style,ie=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null,Ae.style.display=ht("display",ie))}catch(Kt){di(e,e.return,Kt)}}}else if(bt.tag===6){if(xt===null)try{bt.stateNode.nodeValue=Ye?"":bt.memoizedProps}catch(Kt){di(e,e.return,Kt)}}else if((bt.tag!==22&&bt.tag!==23||bt.memoizedState===null||bt===e)&&bt.child!==null){bt.child.return=bt,bt=bt.child;continue}if(bt===e)break e;for(;bt.sibling===null;){if(bt.return===null||bt.return===e)break e;xt===bt&&(xt=null),bt=bt.return}xt===bt&&(xt=null),bt.sibling.return=bt.return,bt=bt.sibling}}break;case 19:vn(r,e),bn(e),p&4&&Bu(e);break;case 21:break;default:vn(r,e),bn(e)}}function bn(e){var r=e.flags;if(r&2){try{e:{for(var a=e.return;a!==null;){if(Nu(a)){var p=a;break e}a=a.return}throw Error(s(160))}switch(p.tag){case 5:var D=p.stateNode;p.flags&32&&(dt(D,""),p.flags&=-33);var j=Vu(e);Ga(e,j,D);break;case 3:case 4:var ie=p.stateNode.containerInfo,Ae=Vu(e);Ua(e,Ae,ie);break;default:throw Error(s(161))}}catch(Oe){di(e,e.return,Oe)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function Hc(e,r,a){Gt=e,Gu(e)}function Gu(e,r,a){for(var p=(e.mode&1)!==0;Gt!==null;){var D=Gt,j=D.child;if(D.tag===22&&p){var ie=D.memoizedState!==null||Eo;if(!ie){var Ae=D.alternate,Oe=Ae!==null&&Ae.memoizedState!==null||Gi;Ae=Eo;var Ye=Gi;if(Eo=ie,(Gi=Oe)&&!Ye)for(Gt=D;Gt!==null;)ie=Gt,Oe=ie.child,ie.tag===22&&ie.memoizedState!==null?$u(D):Oe!==null?(Oe.return=ie,Gt=Oe):$u(D);for(;j!==null;)Gt=j,Gu(j),j=j.sibling;Gt=D,Eo=Ae,Gi=Ye}Hu(e)}else(D.subtreeFlags&8772)!==0&&j!==null?(j.return=D,Gt=j):Hu(e)}}function Hu(e){for(;Gt!==null;){var r=Gt;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Gi||Co(5,r);break;case 1:var p=r.stateNode;if(r.flags&4&&!Gi)if(a===null)p.componentDidMount();else{var D=r.elementType===r.type?a.memoizedProps:mn(r.type,a.memoizedProps);p.componentDidUpdate(D,a.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var j=r.updateQueue;j!==null&&Wl(r,j,p);break;case 3:var ie=r.updateQueue;if(ie!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Wl(r,ie,a)}break;case 5:var Ae=r.stateNode;if(a===null&&r.flags&4){a=Ae;var Oe=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":Oe.autoFocus&&a.focus();break;case"img":Oe.src&&(a.src=Oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var Ye=r.alternate;if(Ye!==null){var xt=Ye.memoizedState;if(xt!==null){var bt=xt.dehydrated;bt!==null&&pt(bt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Gi||r.flags&512&&Ba(r)}catch(vt){di(r,r.return,vt)}}if(r===e){Gt=null;break}if(a=r.sibling,a!==null){a.return=r.return,Gt=a;break}Gt=r.return}}function Wu(e){for(;Gt!==null;){var r=Gt;if(r===e){Gt=null;break}var a=r.sibling;if(a!==null){a.return=r.return,Gt=a;break}Gt=r.return}}function $u(e){for(;Gt!==null;){var r=Gt;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Co(4,r)}catch(Oe){di(r,a,Oe)}break;case 1:var p=r.stateNode;if(typeof p.componentDidMount=="function"){var D=r.return;try{p.componentDidMount()}catch(Oe){di(r,D,Oe)}}var j=r.return;try{Ba(r)}catch(Oe){di(r,j,Oe)}break;case 5:var ie=r.return;try{Ba(r)}catch(Oe){di(r,ie,Oe)}}}catch(Oe){di(r,r.return,Oe)}if(r===e){Gt=null;break}var Ae=r.sibling;if(Ae!==null){Ae.return=r.return,Gt=Ae;break}Gt=r.return}}var Wc=Math.ceil,Ao=F.ReactCurrentDispatcher,Ha=F.ReactCurrentOwner,hn=F.ReactCurrentBatchConfig,Nr=0,ki=null,_i=null,Fi=0,sn=0,Ss=In(0),Ei=0,Ws=null,ts=0,To=0,Wa=0,$s=null,Ji=null,$a=0,Es=1/0,kn=null,Ro=!1,Xa=null,Vn=null,Mo=!1,jn=null,ko=0,Xs=0,Ka=null,Po=-1,Do=0;function Xi(){return(Nr&6)!==0?lt():Po!==-1?Po:Po=lt()}function Bn(e){return(e.mode&1)===0?1:(Nr&2)!==0&&Fi!==0?Fi&-Fi:Rc.transition!==null?(Do===0&&(Do=T()),Do):(e=P,e!==0||(e=window.event,e=e===void 0?16:kt(e.type)),e)}function yn(e,r,a,p){if(50<Xs)throw Xs=0,Ka=null,Error(s(185));M(e,a,p),((Nr&2)===0||e!==ki)&&(e===ki&&((Nr&2)===0&&(To|=a),Ei===4&&Un(e,Fi)),en(e,p),a===1&&Nr===0&&(r.mode&1)===0&&(Es=lt()+500,so&&Ln()))}function en(e,r){var a=e.callbackNode;c(e,r);var p=n(e,e===ki?Fi:0);if(p===0)a!==null&&Ve(a),e.callbackNode=null,e.callbackPriority=0;else if(r=p&-p,e.callbackPriority!==r){if(a!=null&&Ve(a),r===1)e.tag===0?Tc(Ku.bind(null,e)):Il(Ku.bind(null,e)),Sc(function(){(Nr&6)===0&&Ln()}),a=null;else{switch(L(p)){case 1:a=Rt;break;case 4:a=Pt;break;case 16:a=Ot;break;case 536870912:a=Zt;break;default:a=Ot}a=rc(a,Xu.bind(null,e))}e.callbackPriority=r,e.callbackNode=a}}function Xu(e,r){if(Po=-1,Do=0,(Nr&6)!==0)throw Error(s(327));var a=e.callbackNode;if(Cs()&&e.callbackNode!==a)return null;var p=n(e,e===ki?Fi:0);if(p===0)return null;if((p&30)!==0||(p&e.expiredLanes)!==0||r)r=Io(e,p);else{r=p;var D=Nr;Nr|=2;var j=Yu();(ki!==e||Fi!==r)&&(kn=null,Es=lt()+500,is(e,r));do try{Kc();break}catch(Ae){qu(e,Ae)}while(!0);da(),Ao.current=j,Nr=D,_i!==null?r=0:(ki=null,Fi=0,r=Ei)}if(r!==0){if(r===2&&(D=f(e),D!==0&&(p=D,r=qa(e,D))),r===1)throw a=Ws,is(e,0),Un(e,p),en(e,lt()),a;if(r===6)Un(e,p);else{if(D=e.current.alternate,(p&30)===0&&!$c(D)&&(r=Io(e,p),r===2&&(j=f(e),j!==0&&(p=j,r=qa(e,j))),r===1))throw a=Ws,is(e,0),Un(e,p),en(e,lt()),a;switch(e.finishedWork=D,e.finishedLanes=p,r){case 0:case 1:throw Error(s(345));case 2:ns(e,Ji,kn);break;case 3:if(Un(e,p),(p&130023424)===p&&(r=$a+500-lt(),10<r)){if(n(e,0)!==0)break;if(D=e.suspendedLanes,(D&p)!==p){Xi(),e.pingedLanes|=e.suspendedLanes&D;break}e.timeoutHandle=ta(ns.bind(null,e,Ji,kn),r);break}ns(e,Ji,kn);break;case 4:if(Un(e,p),(p&4194240)===p)break;for(r=e.eventTimes,D=-1;0<p;){var ie=31-_r(p);j=1<<ie,ie=r[ie],ie>D&&(D=ie),p&=~j}if(p=D,p=lt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*Wc(p/1960))-p,10<p){e.timeoutHandle=ta(ns.bind(null,e,Ji,kn),p);break}ns(e,Ji,kn);break;case 5:ns(e,Ji,kn);break;default:throw Error(s(329))}}}return en(e,lt()),e.callbackNode===a?Xu.bind(null,e):null}function qa(e,r){var a=$s;return e.current.memoizedState.isDehydrated&&(is(e,r).flags|=256),e=Io(e,r),e!==2&&(r=Ji,Ji=a,r!==null&&Ya(r)),e}function Ya(e){Ji===null?Ji=e:Ji.push.apply(Ji,e)}function $c(e){for(var r=e;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var p=0;p<a.length;p++){var D=a[p],j=D.getSnapshot;D=D.value;try{if(!fn(j(),D))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Un(e,r){for(r&=~Wa,r&=~To,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var a=31-_r(r),p=1<<a;e[a]=-1,r&=~p}}function Ku(e){if((Nr&6)!==0)throw Error(s(327));Cs();var r=n(e,0);if((r&1)===0)return en(e,lt()),null;var a=Io(e,r);if(e.tag!==0&&a===2){var p=f(e);p!==0&&(r=p,a=qa(e,p))}if(a===1)throw a=Ws,is(e,0),Un(e,r),en(e,lt()),a;if(a===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,ns(e,Ji,kn),en(e,lt()),null}function Za(e,r){var a=Nr;Nr|=1;try{return e(r)}finally{Nr=a,Nr===0&&(Es=lt()+500,so&&Ln())}}function rs(e){jn!==null&&jn.tag===0&&(Nr&6)===0&&Cs();var r=Nr;Nr|=1;var a=hn.transition,p=P;try{if(hn.transition=null,P=1,e)return e()}finally{P=p,hn.transition=a,Nr=r,(Nr&6)===0&&Ln()}}function Qa(){sn=Ss.current,Jr(Ss)}function is(e,r){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,bc(a)),_i!==null)for(a=_i.return;a!==null;){var p=a;switch(aa(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&io();break;case 3:_s(),Jr(Yi),Jr(ji),_a();break;case 5:ya(p);break;case 4:_s();break;case 13:Jr(oi);break;case 19:Jr(oi);break;case 10:fa(p.type._context);break;case 22:case 23:Qa()}a=a.return}if(ki=e,_i=e=Gn(e.current,null),Fi=sn=r,Ei=0,Ws=null,Wa=To=ts=0,Ji=$s=null,Qn!==null){for(r=0;r<Qn.length;r++)if(a=Qn[r],p=a.interleaved,p!==null){a.interleaved=null;var D=p.next,j=a.pending;if(j!==null){var ie=j.next;j.next=D,p.next=ie}a.pending=p}Qn=null}return e}function qu(e,r){do{var a=_i;try{if(da(),go.current=_o,vo){for(var p=ai.memoizedState;p!==null;){var D=p.queue;D!==null&&(D.pending=null),p=p.next}vo=!1}if(es=0,Mi=Si=ai=null,Vs=!1,js=0,Ha.current=null,a===null||a.return===null){Ei=1,Ws=r,_i=null;break}e:{var j=e,ie=a.return,Ae=a,Oe=r;if(r=Fi,Ae.flags|=32768,Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var Ye=Oe,xt=Ae,bt=xt.tag;if((xt.mode&1)===0&&(bt===0||bt===11||bt===15)){var vt=xt.alternate;vt?(xt.updateQueue=vt.updateQueue,xt.memoizedState=vt.memoizedState,xt.lanes=vt.lanes):(xt.updateQueue=null,xt.memoizedState=null)}var jt=_u(ie);if(jt!==null){jt.flags&=-257,wu(jt,ie,Ae,j,r),jt.mode&1&&xu(j,Ye,r),r=jt,Oe=Ye;var $t=r.updateQueue;if($t===null){var Kt=new Set;Kt.add(Oe),r.updateQueue=Kt}else $t.add(Oe);break e}else{if((r&1)===0){xu(j,Ye,r),Ja();break e}Oe=Error(s(426))}}else if(ti&&Ae.mode&1){var mi=_u(ie);if(mi!==null){(mi.flags&65536)===0&&(mi.flags|=256),wu(mi,ie,Ae,j,r),ca(ws(Oe,Ae));break e}}j=Oe=ws(Oe,Ae),Ei!==4&&(Ei=2),$s===null?$s=[j]:$s.push(j),j=ie;do{switch(j.tag){case 3:j.flags|=65536,r&=-r,j.lanes|=r;var Ge=vu(j,Oe,r);Hl(j,Ge);break e;case 1:Ae=Oe;var je=j.type,Ke=j.stateNode;if((j.flags&128)===0&&(typeof je.getDerivedStateFromError=="function"||Ke!==null&&typeof Ke.componentDidCatch=="function"&&(Vn===null||!Vn.has(Ke)))){j.flags|=65536,r&=-r,j.lanes|=r;var Tt=yu(j,Ae,r);Hl(j,Tt);break e}}j=j.return}while(j!==null)}Qu(a)}catch(Yt){r=Yt,_i===a&&a!==null&&(_i=a=a.return);continue}break}while(!0)}function Yu(){var e=Ao.current;return Ao.current=_o,e===null?_o:e}function Ja(){(Ei===0||Ei===3||Ei===2)&&(Ei=4),ki===null||(ts&268435455)===0&&(To&268435455)===0||Un(ki,Fi)}function Io(e,r){var a=Nr;Nr|=2;var p=Yu();(ki!==e||Fi!==r)&&(kn=null,is(e,r));do try{Xc();break}catch(D){qu(e,D)}while(!0);if(da(),Nr=a,Ao.current=p,_i!==null)throw Error(s(261));return ki=null,Fi=0,Ei}function Xc(){for(;_i!==null;)Zu(_i)}function Kc(){for(;_i!==null&&!Le();)Zu(_i)}function Zu(e){var r=tc(e.alternate,e,sn);e.memoizedProps=e.pendingProps,r===null?Qu(e):_i=r,Ha.current=null}function Qu(e){var r=e;do{var a=r.alternate;if(e=r.return,(r.flags&32768)===0){if(a=jc(a,r,sn),a!==null){_i=a;return}}else{if(a=Bc(a,r),a!==null){a.flags&=32767,_i=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ei=6,_i=null;return}}if(r=r.sibling,r!==null){_i=r;return}_i=r=e}while(r!==null);Ei===0&&(Ei=5)}function ns(e,r,a){var p=P,D=hn.transition;try{hn.transition=null,P=1,qc(e,r,a,p)}finally{hn.transition=D,P=p}return null}function qc(e,r,a,p){do Cs();while(jn!==null);if((Nr&6)!==0)throw Error(s(327));a=e.finishedWork;var D=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var j=a.lanes|a.childLanes;if(k(e,j),e===ki&&(_i=ki=null,Fi=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Mo||(Mo=!0,rc(Ot,function(){return Cs(),null})),j=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||j){j=hn.transition,hn.transition=null;var ie=P;P=1;var Ae=Nr;Nr|=4,Ha.current=null,Gc(e,a),Uu(a,e),mc(Jo),et=!!Qo,Jo=Qo=null,e.current=a,Hc(a),yt(),Nr=Ae,P=ie,hn.transition=j}else e.current=a;if(Mo&&(Mo=!1,jn=e,ko=D),j=e.pendingLanes,j===0&&(Vn=null),Ur(a.stateNode),en(e,lt()),r!==null)for(p=e.onRecoverableError,a=0;a<r.length;a++)D=r[a],p(D.value,{componentStack:D.stack,digest:D.digest});if(Ro)throw Ro=!1,e=Xa,Xa=null,e;return(ko&1)!==0&&e.tag!==0&&Cs(),j=e.pendingLanes,(j&1)!==0?e===Ka?Xs++:(Xs=0,Ka=e):Xs=0,Ln(),null}function Cs(){if(jn!==null){var e=L(ko),r=hn.transition,a=P;try{if(hn.transition=null,P=16>e?16:e,jn===null)var p=!1;else{if(e=jn,jn=null,ko=0,(Nr&6)!==0)throw Error(s(331));var D=Nr;for(Nr|=4,Gt=e.current;Gt!==null;){var j=Gt,ie=j.child;if((Gt.flags&16)!==0){var Ae=j.deletions;if(Ae!==null){for(var Oe=0;Oe<Ae.length;Oe++){var Ye=Ae[Oe];for(Gt=Ye;Gt!==null;){var xt=Gt;switch(xt.tag){case 0:case 11:case 15:Hs(8,xt,j)}var bt=xt.child;if(bt!==null)bt.return=xt,Gt=bt;else for(;Gt!==null;){xt=Gt;var vt=xt.sibling,jt=xt.return;if(Fu(xt),xt===Ye){Gt=null;break}if(vt!==null){vt.return=jt,Gt=vt;break}Gt=jt}}}var $t=j.alternate;if($t!==null){var Kt=$t.child;if(Kt!==null){$t.child=null;do{var mi=Kt.sibling;Kt.sibling=null,Kt=mi}while(Kt!==null)}}Gt=j}}if((j.subtreeFlags&2064)!==0&&ie!==null)ie.return=j,Gt=ie;else e:for(;Gt!==null;){if(j=Gt,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:Hs(9,j,j.return)}var Ge=j.sibling;if(Ge!==null){Ge.return=j.return,Gt=Ge;break e}Gt=j.return}}var je=e.current;for(Gt=je;Gt!==null;){ie=Gt;var Ke=ie.child;if((ie.subtreeFlags&2064)!==0&&Ke!==null)Ke.return=ie,Gt=Ke;else e:for(ie=je;Gt!==null;){if(Ae=Gt,(Ae.flags&2048)!==0)try{switch(Ae.tag){case 0:case 11:case 15:Co(9,Ae)}}catch(Yt){di(Ae,Ae.return,Yt)}if(Ae===ie){Gt=null;break e}var Tt=Ae.sibling;if(Tt!==null){Tt.return=Ae.return,Gt=Tt;break e}Gt=Ae.return}}if(Nr=D,Ln(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(Cr,e)}catch{}p=!0}return p}finally{P=a,hn.transition=r}}return!1}function Ju(e,r,a){r=ws(a,r),r=vu(e,r,1),e=Fn(e,r,1),r=Xi(),e!==null&&(M(e,1,r),en(e,r))}function di(e,r,a){if(e.tag===3)Ju(e,e,a);else for(;r!==null;){if(r.tag===3){Ju(r,e,a);break}else if(r.tag===1){var p=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Vn===null||!Vn.has(p))){e=ws(a,e),e=yu(r,e,1),r=Fn(r,e,1),e=Xi(),r!==null&&(M(r,1,e),en(r,e));break}}r=r.return}}function Yc(e,r,a){var p=e.pingCache;p!==null&&p.delete(r),r=Xi(),e.pingedLanes|=e.suspendedLanes&a,ki===e&&(Fi&a)===a&&(Ei===4||Ei===3&&(Fi&130023424)===Fi&&500>lt()-$a?is(e,0):Wa|=a),en(e,r)}function ec(e,r){r===0&&((e.mode&1)===0?r=1:(r=ri,ri<<=1,(ri&130023424)===0&&(ri=4194304)));var a=Xi();e=Tn(e,r),e!==null&&(M(e,r,a),en(e,a))}function Zc(e){var r=e.memoizedState,a=0;r!==null&&(a=r.retryLane),ec(e,a)}function Qc(e,r){var a=0;switch(e.tag){case 13:var p=e.stateNode,D=e.memoizedState;D!==null&&(a=D.retryLane);break;case 19:p=e.stateNode;break;default:throw Error(s(314))}p!==null&&p.delete(r),ec(e,a)}var tc;tc=function(e,r,a){if(e!==null)if(e.memoizedProps!==r.pendingProps||Yi.current)Qi=!0;else{if((e.lanes&a)===0&&(r.flags&128)===0)return Qi=!1,Vc(e,r,a);Qi=(e.flags&131072)!==0}else Qi=!1,ti&&(r.flags&1048576)!==0&&zl(r,ao,r.index);switch(r.lanes=0,r.tag){case 2:var p=r.type;So(e,r),e=r.pendingProps;var D=fs(r,ji.current);xs(r,a),D=Sa(null,r,p,e,D,a);var j=Ea();return r.flags|=1,typeof D=="object"&&D!==null&&typeof D.render=="function"&&D.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Zi(p)?(j=!0,no(r)):j=!1,r.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,ga(r),D.updater=wo,r.stateNode=D,D._reactInternals=r,ka(r,p,e,a),r=za(null,r,p,!0,j,a)):(r.tag=0,ti&&j&&oa(r),$i(null,r,D,a),r=r.child),r;case 16:p=r.elementType;e:{switch(So(e,r),e=r.pendingProps,D=p._init,p=D(p._payload),r.type=p,D=r.tag=eh(p),e=mn(p,e),D){case 0:r=Ia(null,r,p,e,a);break e;case 1:r=Tu(null,r,p,e,a);break e;case 11:r=bu(null,r,p,e,a);break e;case 14:r=Su(null,r,p,mn(p.type,e),a);break e}throw Error(s(306,p,""))}return r;case 0:return p=r.type,D=r.pendingProps,D=r.elementType===p?D:mn(p,D),Ia(e,r,p,D,a);case 1:return p=r.type,D=r.pendingProps,D=r.elementType===p?D:mn(p,D),Tu(e,r,p,D,a);case 3:e:{if(Ru(r),e===null)throw Error(s(387));p=r.pendingProps,j=r.memoizedState,D=j.element,Gl(e,r),po(r,p,null,a);var ie=r.memoizedState;if(p=ie.element,j.isDehydrated)if(j={element:p,isDehydrated:!1,cache:ie.cache,pendingSuspenseBoundaries:ie.pendingSuspenseBoundaries,transitions:ie.transitions},r.updateQueue.baseState=j,r.memoizedState=j,r.flags&256){D=ws(Error(s(423)),r),r=Mu(e,r,p,a,D);break e}else if(p!==D){D=ws(Error(s(424)),r),r=Mu(e,r,p,a,D);break e}else for(nn=Dn(r.stateNode.containerInfo.firstChild),rn=r,ti=!0,pn=null,a=Bl(r,null,p,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(gs(),p===D){r=Mn(e,r,a);break e}$i(e,r,p,a)}r=r.child}return r;case 5:return $l(r),e===null&&ua(r),p=r.type,D=r.pendingProps,j=e!==null?e.memoizedProps:null,ie=D.children,ea(p,D)?ie=null:j!==null&&ea(p,j)&&(r.flags|=32),Au(e,r),$i(e,r,ie,a),r.child;case 6:return e===null&&ua(r),null;case 13:return ku(e,r,a);case 4:return va(r,r.stateNode.containerInfo),p=r.pendingProps,e===null?r.child=vs(r,null,p,a):$i(e,r,p,a),r.child;case 11:return p=r.type,D=r.pendingProps,D=r.elementType===p?D:mn(p,D),bu(e,r,p,D,a);case 7:return $i(e,r,r.pendingProps,a),r.child;case 8:return $i(e,r,r.pendingProps.children,a),r.child;case 12:return $i(e,r,r.pendingProps.children,a),r.child;case 10:e:{if(p=r.type._context,D=r.pendingProps,j=r.memoizedProps,ie=D.value,Yr(co,p._currentValue),p._currentValue=ie,j!==null)if(fn(j.value,ie)){if(j.children===D.children&&!Yi.current){r=Mn(e,r,a);break e}}else for(j=r.child,j!==null&&(j.return=r);j!==null;){var Ae=j.dependencies;if(Ae!==null){ie=j.child;for(var Oe=Ae.firstContext;Oe!==null;){if(Oe.context===p){if(j.tag===1){Oe=Rn(-1,a&-a),Oe.tag=2;var Ye=j.updateQueue;if(Ye!==null){Ye=Ye.shared;var xt=Ye.pending;xt===null?Oe.next=Oe:(Oe.next=xt.next,xt.next=Oe),Ye.pending=Oe}}j.lanes|=a,Oe=j.alternate,Oe!==null&&(Oe.lanes|=a),pa(j.return,a,r),Ae.lanes|=a;break}Oe=Oe.next}}else if(j.tag===10)ie=j.type===r.type?null:j.child;else if(j.tag===18){if(ie=j.return,ie===null)throw Error(s(341));ie.lanes|=a,Ae=ie.alternate,Ae!==null&&(Ae.lanes|=a),pa(ie,a,r),ie=j.sibling}else ie=j.child;if(ie!==null)ie.return=j;else for(ie=j;ie!==null;){if(ie===r){ie=null;break}if(j=ie.sibling,j!==null){j.return=ie.return,ie=j;break}ie=ie.return}j=ie}$i(e,r,D.children,a),r=r.child}return r;case 9:return D=r.type,p=r.pendingProps.children,xs(r,a),D=un(D),p=p(D),r.flags|=1,$i(e,r,p,a),r.child;case 14:return p=r.type,D=mn(p,r.pendingProps),D=mn(p.type,D),Su(e,r,p,D,a);case 15:return Eu(e,r,r.type,r.pendingProps,a);case 17:return p=r.type,D=r.pendingProps,D=r.elementType===p?D:mn(p,D),So(e,r),r.tag=1,Zi(p)?(e=!0,no(r)):e=!1,xs(r,a),mu(r,p,D),ka(r,p,D,a),za(null,r,p,!0,e,a);case 19:return Du(e,r,a);case 22:return Cu(e,r,a)}throw Error(s(156,r.tag))};function rc(e,r){return xe(e,r)}function Jc(e,r,a,p){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(e,r,a,p){return new Jc(e,r,a,p)}function el(e){return e=e.prototype,!(!e||!e.isReactComponent)}function eh(e){if(typeof e=="function")return el(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ge)return 11;if(e===ce)return 14}return 2}function Gn(e,r){var a=e.alternate;return a===null?(a=dn(e.tag,r,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=r,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,r=e.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function zo(e,r,a,p,D,j){var ie=2;if(p=e,typeof e=="function")el(e)&&(ie=1);else if(typeof e=="string")ie=5;else e:switch(e){case Q:return ss(a.children,D,j,r);case N:ie=8,D|=8;break;case ee:return e=dn(12,a,r,D|2),e.elementType=ee,e.lanes=j,e;case me:return e=dn(13,a,r,D),e.elementType=me,e.lanes=j,e;case Me:return e=dn(19,a,r,D),e.elementType=Me,e.lanes=j,e;case he:return Lo(a,D,j,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Se:ie=10;break e;case ue:ie=9;break e;case ge:ie=11;break e;case ce:ie=14;break e;case O:ie=16,p=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return r=dn(ie,a,r,D),r.elementType=e,r.type=p,r.lanes=j,r}function ss(e,r,a,p){return e=dn(7,e,p,r),e.lanes=a,e}function Lo(e,r,a,p){return e=dn(22,e,p,r),e.elementType=he,e.lanes=a,e.stateNode={isHidden:!1},e}function tl(e,r,a){return e=dn(6,e,null,r),e.lanes=a,e}function rl(e,r,a){return r=dn(4,e.children!==null?e.children:[],e.key,r),r.lanes=a,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function th(e,r,a,p,D){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=x(0),this.expirationTimes=x(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=x(0),this.identifierPrefix=p,this.onRecoverableError=D,this.mutableSourceEagerHydrationData=null}function il(e,r,a,p,D,j,ie,Ae,Oe){return e=new th(e,r,a,Ae,Oe),r===1?(r=1,j===!0&&(r|=8)):r=0,j=dn(3,null,null,r),e.current=j,j.stateNode=e,j.memoizedState={element:p,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},ga(j),e}function rh(e,r,a){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:p==null?null:""+p,children:e,containerInfo:r,implementation:a}}function ic(e){if(!e)return zn;e=e._reactInternals;e:{if(Gr(e)!==e||e.tag!==1)throw Error(s(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Zi(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(s(171))}if(e.tag===1){var a=e.type;if(Zi(a))return Pl(e,a,r)}return r}function nc(e,r,a,p,D,j,ie,Ae,Oe){return e=il(a,p,!0,e,D,j,ie,Ae,Oe),e.context=ic(null),a=e.current,p=Xi(),D=Bn(a),j=Rn(p,D),j.callback=r??null,Fn(a,j,D),e.current.lanes=D,M(e,D,p),en(e,p),e}function Oo(e,r,a,p){var D=r.current,j=Xi(),ie=Bn(D);return a=ic(a),r.context===null?r.context=a:r.pendingContext=a,r=Rn(j,ie),r.payload={element:e},p=p===void 0?null:p,p!==null&&(r.callback=p),e=Fn(D,r,ie),e!==null&&(yn(e,D,ie,j),fo(e,D,ie)),ie}function Fo(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function sc(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<r?a:r}}function nl(e,r){sc(e,r),(e=e.alternate)&&sc(e,r)}function ih(){return null}var oc=typeof reportError=="function"?reportError:function(e){console.error(e)};function sl(e){this._internalRoot=e}No.prototype.render=sl.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(s(409));Oo(e,r,null,null)},No.prototype.unmount=sl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;rs(function(){Oo(null,e,null,null)}),r[Sn]=null}};function No(e){this._internalRoot=e}No.prototype.unstable_scheduleHydration=function(e){if(e){var r=H();e={blockedOn:null,target:e,priority:r};for(var a=0;a<Te.length&&r!==0&&r<Te[a].priority;a++);Te.splice(a,0,e),a===0&&tt(e)}};function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Vo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ac(){}function nh(e,r,a,p,D){if(D){if(typeof p=="function"){var j=p;p=function(){var Ye=Fo(ie);j.call(Ye)}}var ie=nc(r,p,e,0,null,!1,!1,"",ac);return e._reactRootContainer=ie,e[Sn]=ie.current,Ps(e.nodeType===8?e.parentNode:e),rs(),ie}for(;D=e.lastChild;)e.removeChild(D);if(typeof p=="function"){var Ae=p;p=function(){var Ye=Fo(Oe);Ae.call(Ye)}}var Oe=il(e,0,!1,null,null,!1,!1,"",ac);return e._reactRootContainer=Oe,e[Sn]=Oe.current,Ps(e.nodeType===8?e.parentNode:e),rs(function(){Oo(r,Oe,a,p)}),Oe}function jo(e,r,a,p,D){var j=a._reactRootContainer;if(j){var ie=j;if(typeof D=="function"){var Ae=D;D=function(){var Oe=Fo(ie);Ae.call(Oe)}}Oo(r,ie,e,D)}else ie=nh(a,r,e,D,p);return Fo(ie)}W=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var a=ae(r.pendingLanes);a!==0&&(A(r,a|1),en(r,lt()),(Nr&6)===0&&(Es=lt()+500,Ln()))}break;case 13:rs(function(){var p=Tn(e,1);if(p!==null){var D=Xi();yn(p,e,1,D)}}),nl(e,1)}},U=function(e){if(e.tag===13){var r=Tn(e,134217728);if(r!==null){var a=Xi();yn(r,e,134217728,a)}nl(e,134217728)}},V=function(e){if(e.tag===13){var r=Bn(e),a=Tn(e,r);if(a!==null){var p=Xi();yn(a,e,r,p)}nl(e,r)}},H=function(){return P},G=function(e,r){var a=P;try{return P=e,r()}finally{P=a}},ui=function(e,r,a){switch(r){case"input":if(Er(e,a),r=a.name,a.type==="radio"&&r!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var p=a[r];if(p!==e&&p.form===e.form){var D=ro(p);if(!D)throw Error(s(90));Ft(p),Er(p,D)}}}break;case"textarea":Di(e,a);break;case"select":r=a.value,r!=null&&fi(e,!!a.multiple,r,!1)}},vi=Za,bi=rs;var sh={usingClientEntryPoint:!1,Events:[zs,hs,ro,Dr,rr,Za]},Ks={findFiberByHostInstance:Kn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oh={bundleType:Ks.bundleType,version:Ks.version,rendererPackageName:Ks.rendererPackageName,rendererConfig:Ks.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=S(e),e===null?null:e.stateNode},findFiberByHostInstance:Ks.findFiberByHostInstance||ih,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bo.isDisabled&&Bo.supportsFiber)try{Cr=Bo.inject(oh),Ar=Bo}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sh,reactDom_production_min.createPortal=function(e,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(r))throw Error(s(200));return rh(e,r,null,a)},reactDom_production_min.createRoot=function(e,r){if(!ol(e))throw Error(s(299));var a=!1,p="",D=oc;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onRecoverableError!==void 0&&(D=r.onRecoverableError)),r=il(e,1,!1,null,null,a,!1,p,D),e[Sn]=r.current,Ps(e.nodeType===8?e.parentNode:e),new sl(r)},reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=S(r),e=e===null?null:e.stateNode,e},reactDom_production_min.flushSync=function(e){return rs(e)},reactDom_production_min.hydrate=function(e,r,a){if(!Vo(r))throw Error(s(200));return jo(null,e,r,!0,a)},reactDom_production_min.hydrateRoot=function(e,r,a){if(!ol(e))throw Error(s(405));var p=a!=null&&a.hydratedSources||null,D=!1,j="",ie=oc;if(a!=null&&(a.unstable_strictMode===!0&&(D=!0),a.identifierPrefix!==void 0&&(j=a.identifierPrefix),a.onRecoverableError!==void 0&&(ie=a.onRecoverableError)),r=nc(r,null,e,1,a??null,D,!1,j,ie),e[Sn]=r.current,Ps(e),p)for(e=0;e<p.length;e++)a=p[e],D=a._getVersion,D=D(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,D]:r.mutableSourceEagerHydrationData.push(a,D);return new No(r)},reactDom_production_min.render=function(e,r,a){if(!Vo(r))throw Error(s(200));return jo(null,e,r,!1,a)},reactDom_production_min.unmountComponentAtNode=function(e){if(!Vo(e))throw Error(s(40));return e._reactRootContainer?(rs(function(){jo(null,null,e,!1,function(){e._reactRootContainer=null,e[Sn]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=Za,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,r,a,p){if(!Vo(a))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return jo(e,r,a,!1,p)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}return t(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var t=requireReactDom();return client.createRoot=t.createRoot,client.hydrateRoot=t.hydrateRoot,client}var clientExports=requireClient();var PopStateEventType="popstate";function createBrowserHistory(t={}){function i(u,h){let{pathname:_,search:l,hash:g}=u.location;return createLocation("",{pathname:_,search:l,hash:g},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function s(u,h){return typeof h=="string"?h:createPath(h)}return getUrlBasedHistory(i,s,null,t)}function invariant$1(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}function warning(t,i){if(!t){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(t,i){return{usr:t.state,key:t.key,idx:i}}function createLocation(t,i,s=null,u){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof i=="string"?parsePath(i):i,state:s,key:i&&i.key||u||createKey()}}function createPath({pathname:t="/",search:i="",hash:s=""}){return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function parsePath(t){let i={};if(t){let s=t.indexOf("#");s>=0&&(i.hash=t.substring(s),t=t.substring(0,s));let u=t.indexOf("?");u>=0&&(i.search=t.substring(u),t=t.substring(0,u)),t&&(i.pathname=t)}return i}function getUrlBasedHistory(t,i,s,u={}){let{window:h=document.defaultView,v5Compat:_=!1}=u,l=h.history,g="POP",d=null,y=E();y==null&&(y=0,l.replaceState({...l.state,idx:y},""));function E(){return(l.state||{idx:null}).idx}function v(){g="POP";let K=E(),J=K==null?null:K-y;y=K,d&&d({action:g,location:I.location,delta:J})}function R(K,J){g="PUSH";let X=createLocation(I.location,K,J);y=E()+1;let b=getHistoryState(X,y),F=I.createHref(X);try{l.pushState(b,"",F)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;h.location.assign(F)}_&&d&&d({action:g,location:I.location,delta:1})}function z(K,J){g="REPLACE";let X=createLocation(I.location,K,J);y=E();let b=getHistoryState(X,y),F=I.createHref(X);l.replaceState(b,"",F),_&&d&&d({action:g,location:I.location,delta:0})}function C(K){return createBrowserURLImpl(K)}let I={get action(){return g},get location(){return t(h,l)},listen(K){if(d)throw new Error("A history only accepts one active listener");return h.addEventListener(PopStateEventType,v),d=K,()=>{h.removeEventListener(PopStateEventType,v),d=null}},createHref(K){return i(h,K)},createURL:C,encodeLocation(K){let J=C(K);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:R,replace:z,go(K){return l.go(K)}};return I}function createBrowserURLImpl(t,i=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),invariant$1(s,"No window.location.(origin|href) available to create URL");let u=typeof t=="string"?t:createPath(t);return u=u.replace(/ $/,"%20"),!i&&u.startsWith("//")&&(u=s+u),new URL(u,s)}function matchRoutes(t,i,s="/"){return matchRoutesImpl(t,i,s,!1)}function matchRoutesImpl(t,i,s,u){let h=typeof i=="string"?parsePath(i):i,_=stripBasename(h.pathname||"/",s);if(_==null)return null;let l=flattenRoutes(t);rankRouteBranches(l);let g=null;for(let d=0;g==null&&d<l.length;++d){let y=decodePath(_);g=matchRouteBranch(l[d],y,u)}return g}function flattenRoutes(t,i=[],s=[],u="",h=!1){let _=(l,g,d=h,y)=>{let E={relativePath:y===void 0?l.path||"":y,caseSensitive:l.caseSensitive===!0,childrenIndex:g,route:l};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(u)&&d)return;invariant$1(E.relativePath.startsWith(u),`Absolute route path "${E.relativePath}" nested under path "${u}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(u.length)}let v=joinPaths([u,E.relativePath]),R=s.concat(E);l.children&&l.children.length>0&&(invariant$1(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),flattenRoutes(l.children,i,R,v,d)),!(l.path==null&&!l.index)&&i.push({path:v,score:computeScore(v,l.index),routesMeta:R})};return t.forEach((l,g)=>{if(l.path===""||!l.path?.includes("?"))_(l,g);else for(let d of explodeOptionalSegments(l.path))_(l,g,!0,d)}),i}function explodeOptionalSegments(t){let i=t.split("/");if(i.length===0)return[];let[s,...u]=i,h=s.endsWith("?"),_=s.replace(/\?$/,"");if(u.length===0)return h?[_,""]:[_];let l=explodeOptionalSegments(u.join("/")),g=[];return g.push(...l.map(d=>d===""?_:[_,d].join("/"))),h&&g.push(...l),g.map(d=>t.startsWith("/")&&d===""?"/":d)}function rankRouteBranches(t){t.sort((i,s)=>i.score!==s.score?s.score-i.score:compareIndexes(i.routesMeta.map(u=>u.childrenIndex),s.routesMeta.map(u=>u.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore(t,i){let s=t.split("/"),u=s.length;return s.some(isSplat)&&(u+=splatPenalty),i&&(u+=indexRouteValue),s.filter(h=>!isSplat(h)).reduce((h,_)=>h+(paramRe.test(_)?dynamicSegmentValue:_===""?emptySegmentValue:staticSegmentValue),u)}function compareIndexes(t,i){return t.length===i.length&&t.slice(0,-1).every((u,h)=>u===i[h])?t[t.length-1]-i[i.length-1]:0}function matchRouteBranch(t,i,s=!1){let{routesMeta:u}=t,h={},_="/",l=[];for(let g=0;g<u.length;++g){let d=u[g],y=g===u.length-1,E=_==="/"?i:i.slice(_.length)||"/",v=matchPath({path:d.relativePath,caseSensitive:d.caseSensitive,end:y},E),R=d.route;if(!v&&y&&s&&!u[u.length-1].route.index&&(v=matchPath({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},E)),!v)return null;Object.assign(h,v.params),l.push({params:h,pathname:joinPaths([_,v.pathname]),pathnameBase:normalizePathname(joinPaths([_,v.pathnameBase])),route:R}),v.pathnameBase!=="/"&&(_=joinPaths([_,v.pathnameBase]))}return l}function matchPath(t,i){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,u]=compilePath(t.path,t.caseSensitive,t.end),h=i.match(s);if(!h)return null;let _=h[0],l=_.replace(/(.)\/+$/,"$1"),g=h.slice(1);return{params:u.reduce((y,{paramName:E,isOptional:v},R)=>{if(E==="*"){let C=g[R]||"";l=_.slice(0,_.length-C.length).replace(/(.)\/+$/,"$1")}const z=g[R];return v&&!z?y[E]=void 0:y[E]=(z||"").replace(/%2F/g,"/"),y},{}),pathname:_,pathnameBase:l,pattern:t}}function compilePath(t,i=!1,s=!0){warning(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let u=[],h="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,g,d)=>(u.push({paramName:g,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(u.push({paramName:"*"}),h+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?h+="\\/*$":t!==""&&t!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,i?void 0:"i"),u]}function decodePath(t){try{return t.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return warning(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),t}}function stripBasename(t,i){if(i==="/")return t;if(!t.toLowerCase().startsWith(i.toLowerCase()))return null;let s=i.endsWith("/")?i.length-1:i.length,u=t.charAt(s);return u&&u!=="/"?null:t.slice(s)||"/"}var ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isAbsoluteUrl=t=>ABSOLUTE_URL_REGEX.test(t);function resolvePath(t,i="/"){let{pathname:s,search:u="",hash:h=""}=typeof t=="string"?parsePath(t):t,_;if(s)if(isAbsoluteUrl(s))_=s;else{if(s.includes("//")){let l=s;s=s.replace(/\/\/+/g,"/"),warning(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${s}`)}s.startsWith("/")?_=resolvePathname(s.substring(1),"/"):_=resolvePathname(s,i)}else _=i;return{pathname:_,search:normalizeSearch(u),hash:normalizeHash(h)}}function resolvePathname(t,i){let s=i.replace(/\/+$/,"").split("/");return t.split("/").forEach(h=>{h===".."?s.length>1&&s.pop():h!=="."&&s.push(h)}),s.length>1?s.join("/"):"/"}function getInvalidPathError(t,i,s,u){return`Cannot include a '${t}' character in a manually specified \`to.${i}\` field [${JSON.stringify(u)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(t){return t.filter((i,s)=>s===0||i.route.path&&i.route.path.length>0)}function getResolveToMatches(t){let i=getPathContributingMatches(t);return i.map((s,u)=>u===i.length-1?s.pathname:s.pathnameBase)}function resolveTo(t,i,s,u=!1){let h;typeof t=="string"?h=parsePath(t):(h={...t},invariant$1(!h.pathname||!h.pathname.includes("?"),getInvalidPathError("?","pathname","search",h)),invariant$1(!h.pathname||!h.pathname.includes("#"),getInvalidPathError("#","pathname","hash",h)),invariant$1(!h.search||!h.search.includes("#"),getInvalidPathError("#","search","hash",h)));let _=t===""||h.pathname==="",l=_?"/":h.pathname,g;if(l==null)g=s;else{let v=i.length-1;if(!u&&l.startsWith("..")){let R=l.split("/");for(;R[0]==="..";)R.shift(),v-=1;h.pathname=R.join("/")}g=v>=0?i[v]:"/"}let d=resolvePath(h,g),y=l&&l!=="/"&&l.endsWith("/"),E=(_||l===".")&&s.endsWith("/");return!d.pathname.endsWith("/")&&(y||E)&&(d.pathname+="/"),d}var joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,normalizeHash=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,ErrorResponseImpl=class{constructor(t,i,s,u=!1){this.status=t,this.statusText=i||"",this.internal=u,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function getRoutePattern(t){return t.map(i=>i.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function parseToInfo(t,i){let s=t;if(typeof s!="string"||!ABSOLUTE_URL_REGEX.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let u=s,h=!1;if(isBrowser$2)try{let _=new URL(window.location.href),l=s.startsWith("//")?new URL(_.protocol+s):new URL(s),g=stripBasename(l.pathname,i);l.origin===_.origin&&g!=null?s=g+l.search+l.hash:h=!0}catch{warning(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:u,isExternal:h,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var RSCRouterContext=reactExports.createContext(!1),ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";var ERROR_DIGEST_BASE="REACT_ROUTER_ERROR",ERROR_DIGEST_REDIRECT="REDIRECT",ERROR_DIGEST_ROUTE_ERROR_RESPONSE="ROUTE_ERROR_RESPONSE";function decodeRedirectErrorDigest(t){if(t.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_REDIRECT}:{`))try{let i=JSON.parse(t.slice(28));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.location=="string"&&typeof i.reloadDocument=="boolean"&&typeof i.replace=="boolean")return i}catch{}}function decodeRouteErrorResponseDigest(t){if(t.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_ROUTE_ERROR_RESPONSE}:{`))try{let i=JSON.parse(t.slice(40));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string")return new ErrorResponseImpl(i.status,i.statusText,i.data)}catch{}}function useHref(t,{relative:i}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:u}=reactExports.useContext(NavigationContext),{hash:h,pathname:_,search:l}=useResolvedPath(t,{relative:i}),g=_;return s!=="/"&&(g=_==="/"?s:joinPaths([s,_])),u.createHref({pathname:g,search:l,hash:h})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(t){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(t)}function useNavigate(){let{isDataRoute:t}=reactExports.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let t=reactExports.useContext(DataRouterContext),{basename:i,navigator:s}=reactExports.useContext(NavigationContext),{matches:u}=reactExports.useContext(RouteContext),{pathname:h}=useLocation(),_=JSON.stringify(getResolveToMatches(u)),l=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{l.current=!0}),reactExports.useCallback((d,y={})=>{if(warning(l.current,navigateEffectWarning),!l.current)return;if(typeof d=="number"){s.go(d);return}let E=resolveTo(d,JSON.parse(_),h,y.relative==="path");t==null&&i!=="/"&&(E.pathname=E.pathname==="/"?i:joinPaths([i,E.pathname])),(y.replace?s.replace:s.push)(E,y.state,y)},[i,s,_,h,t])}reactExports.createContext(null);function useResolvedPath(t,{relative:i}={}){let{matches:s}=reactExports.useContext(RouteContext),{pathname:u}=useLocation(),h=JSON.stringify(getResolveToMatches(s));return reactExports.useMemo(()=>resolveTo(t,JSON.parse(h),u,i==="path"),[t,h,u,i])}function useRoutesImpl(t,i,s,u,h){invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:_}=reactExports.useContext(NavigationContext),{matches:l}=reactExports.useContext(RouteContext),g=l[l.length-1],d=g?g.params:{},y=g?g.pathname:"/",E=g?g.pathnameBase:"/",v=g&&g.route;{let X=v&&v.path||"";warningOnce(y,!v||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let R=useLocation(),z;z=R;let C=z.pathname||"/",I=C;if(E!=="/"){let X=E.replace(/^\//,"").split("/");I="/"+C.replace(/^\//,"").split("/").slice(X.length).join("/")}let K=matchRoutes(t,{pathname:I});return warning(v||K!=null,`No routes matched location "${z.pathname}${z.search}${z.hash}" `),warning(K==null||K[K.length-1].route.element!==void 0||K[K.length-1].route.Component!==void 0||K[K.length-1].route.lazy!==void 0,`Matched leaf route at location "${z.pathname}${z.search}${z.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(K&&K.map(X=>Object.assign({},X,{params:Object.assign({},d,X.params),pathname:joinPaths([E,_.encodeLocation?_.encodeLocation(X.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?E:joinPaths([E,_.encodeLocation?_.encodeLocation(X.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathnameBase])})),l,s,u,h)}function DefaultErrorComponent(){let t=useRouteError(),i=isRouteErrorResponse(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,u="rgba(200,200,200, 0.5)",h={padding:"0.5rem",backgroundColor:u},_={padding:"2px 4px",backgroundColor:u},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:_},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:_},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},i),s?reactExports.createElement("pre",{style:h},s):null,l)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){this.props.onError?this.props.onError(t,i):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const s=decodeRouteErrorResponseDigest(t.digest);s&&(t=s)}let i=t!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?reactExports.createElement(RSCErrorHandler,{error:t},i):i}};RenderErrorBoundary.contextType=RSCRouterContext;var errorRedirectHandledMap=new WeakMap;function RSCErrorHandler({children:t,error:i}){let{basename:s}=reactExports.useContext(NavigationContext);if(typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){let u=decodeRedirectErrorDigest(i.digest);if(u){let h=errorRedirectHandledMap.get(i);if(h)throw h;let _=parseToInfo(u.location,s);if(isBrowser$2&&!errorRedirectHandledMap.get(i))if(_.isExternal||u.reloadDocument)window.location.href=_.absoluteURL||_.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(_.to,{replace:u.replace}));throw errorRedirectHandledMap.set(i,l),l}return reactExports.createElement("meta",{httpEquiv:"refresh",content:`0;url=${_.absoluteURL||_.to}`})}}return t}function RenderedRoute({routeContext:t,match:i,children:s}){let u=reactExports.useContext(DataRouterContext);return u&&u.static&&u.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=i.route.id),reactExports.createElement(RouteContext.Provider,{value:t},s)}function _renderMatches(t,i=[],s=null,u=null,h=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(i.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let _=t,l=s?.errors;if(l!=null){let E=_.findIndex(v=>v.route.id&&l?.[v.route.id]!==void 0);invariant$1(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),_=_.slice(0,Math.min(_.length,E+1))}let g=!1,d=-1;if(s)for(let E=0;E<_.length;E++){let v=_[E];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=E),v.route.id){let{loaderData:R,errors:z}=s,C=v.route.loader&&!R.hasOwnProperty(v.route.id)&&(!z||z[v.route.id]===void 0);if(v.route.lazy||C){g=!0,d>=0?_=_.slice(0,d+1):_=[_[0]];break}}}let y=s&&u?(E,v)=>{u(E,{location:s.location,params:s.matches?.[0]?.params??{},unstable_pattern:getRoutePattern(s.matches),errorInfo:v})}:void 0;return _.reduceRight((E,v,R)=>{let z,C=!1,I=null,K=null;s&&(z=l&&v.route.id?l[v.route.id]:void 0,I=v.route.errorElement||defaultErrorElement,g&&(d<0&&R===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,K=null):d===R&&(C=!0,K=v.route.hydrateFallbackElement||null)));let J=i.concat(_.slice(0,R+1)),X=()=>{let b;return z?b=I:C?b=K:v.route.Component?b=reactExports.createElement(v.route.Component,null):v.route.element?b=v.route.element:b=E,reactExports.createElement(RenderedRoute,{match:v,routeContext:{outlet:E,matches:J,isDataRoute:s!=null},children:b})};return s&&(v.route.ErrorBoundary||v.route.errorElement||R===0)?reactExports.createElement(RenderErrorBoundary,{location:s.location,revalidation:s.revalidation,component:I,error:z,children:X(),routeContext:{outlet:null,matches:J,isDataRoute:!0},onError:y}):X()},null)}function getDataRouterConsoleError(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(t){let i=reactExports.useContext(DataRouterContext);return invariant$1(i,getDataRouterConsoleError(t)),i}function useDataRouterState(t){let i=reactExports.useContext(DataRouterStateContext);return invariant$1(i,getDataRouterConsoleError(t)),i}function useRouteContext(t){let i=reactExports.useContext(RouteContext);return invariant$1(i,getDataRouterConsoleError(t)),i}function useCurrentRouteId(t){let i=useRouteContext(t),s=i.matches[i.matches.length-1];return invariant$1(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let t=reactExports.useContext(RouteErrorContext),i=useDataRouterState("useRouteError"),s=useCurrentRouteId("useRouteError");return t!==void 0?t:i.errors?.[s]}function useNavigateStable(){let{router:t}=useDataRouterContext("useNavigate"),i=useCurrentRouteId("useNavigate"),s=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{s.current=!0}),reactExports.useCallback(async(h,_={})=>{warning(s.current,navigateEffectWarning),s.current&&(typeof h=="number"?await t.navigate(h):await t.navigate(h,{fromRouteId:i,..._}))},[t,i])}var alreadyWarned={};function warningOnce(t,i,s){!i&&!alreadyWarned[t]&&(alreadyWarned[t]=!0,warning(!1,s))}reactExports.memo(DataRoutes);function DataRoutes({routes:t,future:i,state:s,onError:u}){return useRoutesImpl(t,void 0,s,u,i)}function Router({basename:t="/",children:i=null,location:s,navigationType:u="POP",navigator:h,static:_=!1,unstable_useTransitions:l}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=t.replace(/^\/*/,"/"),d=reactExports.useMemo(()=>({basename:g,navigator:h,static:_,unstable_useTransitions:l,future:{}}),[g,h,_,l]);typeof s=="string"&&(s=parsePath(s));let{pathname:y="/",search:E="",hash:v="",state:R=null,key:z="default"}=s,C=reactExports.useMemo(()=>{let I=stripBasename(y,g);return I==null?null:{location:{pathname:I,search:E,hash:v,state:R,key:z},navigationType:u}},[g,y,E,v,R,z,u]);return warning(C!=null,`<Router basename="${g}"> is not able to match the URL "${y}${E}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:reactExports.createElement(NavigationContext.Provider,{value:d},reactExports.createElement(LocationContext.Provider,{children:i,value:C}))}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function isButtonElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="button"}function isFormElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="form"}function isInputElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="input"}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,i){return t.button===0&&(!i||i==="_self")&&!isModifiedEvent(t)}function createSearchParams(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((i,s)=>{let u=t[s];return i.concat(Array.isArray(u)?u.map(h=>[s,h]):[[s,u]])},[]))}function getSearchParamsForLocation(t,i){let s=createSearchParams(t);return i&&i.forEach((u,h)=>{s.has(h)||i.getAll(h).forEach(_=>{s.append(h,_)})}),s}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(t){return t!=null&&!supportedFormEncTypes.has(t)?(warning(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):t}function getFormSubmissionInfo(t,i){let s,u,h,_,l;if(isFormElement(t)){let g=t.getAttribute("action");u=g?stripBasename(g,i):null,s=t.getAttribute("method")||defaultMethod,h=getFormEncType(t.getAttribute("enctype"))||defaultEncType,_=new FormData(t)}else if(isButtonElement(t)||isInputElement(t)&&(t.type==="submit"||t.type==="image")){let g=t.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||g.getAttribute("action");if(u=d?stripBasename(d,i):null,s=t.getAttribute("formmethod")||g.getAttribute("method")||defaultMethod,h=getFormEncType(t.getAttribute("formenctype"))||getFormEncType(g.getAttribute("enctype"))||defaultEncType,_=new FormData(g,t),!isFormDataSubmitterSupported()){let{name:y,type:E,value:v}=t;if(E==="image"){let R=y?`${y}.`:"";_.append(`${R}x`,"0"),_.append(`${R}y`,"0")}else y&&_.append(y,v)}}else{if(isHtmlElement(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=defaultMethod,u=null,h=defaultEncType,l=t}return _&&h==="text/plain"&&(l=_,_=void 0),{action:u,method:s.toLowerCase(),encType:h,formData:_,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}function singleFetchUrl(t,i,s,u){let h=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s?h.pathname.endsWith("/")?h.pathname=`${h.pathname}_.${u}`:h.pathname=`${h.pathname}.${u}`:h.pathname==="/"?h.pathname=`_root.${u}`:i&&stripBasename(h.pathname,i)==="/"?h.pathname=`${i.replace(/\/$/,"")}/_root.${u}`:h.pathname=`${h.pathname.replace(/\/$/,"")}.${u}`,h}async function loadRouteModule(t,i){if(t.id in i)return i[t.id];try{let s=await import(t.module);return i[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function getKeyedPrefetchLinks(t,i,s){let u=await Promise.all(t.map(async h=>{let _=i.routes[h.route.id];if(_){let l=await loadRouteModule(_,s);return l.links?l.links():[]}return[]}));return dedupeLinkDescriptors(u.flat(1).filter(isHtmlLinkDescriptor).filter(h=>h.rel==="stylesheet"||h.rel==="preload").map(h=>h.rel==="stylesheet"?{...h,rel:"prefetch",as:"style"}:{...h,rel:"prefetch"}))}function getNewMatchesForLinks(t,i,s,u,h,_){let l=(d,y)=>s[y]?d.route.id!==s[y].route.id:!0,g=(d,y)=>s[y].pathname!==d.pathname||s[y].route.path?.endsWith("*")&&s[y].params["*"]!==d.params["*"];return _==="assets"?i.filter((d,y)=>l(d,y)||g(d,y)):_==="data"?i.filter((d,y)=>{let E=u.routes[d.route.id];if(!E||!E.hasLoader)return!1;if(l(d,y)||g(d,y))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(h.pathname+h.search+h.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function getModuleLinkHrefs(t,i,{includeHydrateFallback:s}={}){return dedupeHrefs(t.map(u=>{let h=i.routes[u.route.id];if(!h)return[];let _=[h.module];return h.clientActionModule&&(_=_.concat(h.clientActionModule)),h.clientLoaderModule&&(_=_.concat(h.clientLoaderModule)),s&&h.hydrateFallbackModule&&(_=_.concat(h.hydrateFallbackModule)),h.imports&&(_=_.concat(h.imports)),_}).flat(1))}function dedupeHrefs(t){return[...new Set(t)]}function sortKeys(t){let i={},s=Object.keys(t).sort();for(let u of s)i[u]=t[u];return i}function dedupeLinkDescriptors(t,i){let s=new Set;return new Set(i),t.reduce((u,h)=>{let _=JSON.stringify(sortKeys(h));return s.has(_)||(s.add(_),u.push({key:_,link:h})),u},[])}function useDataRouterContext2(){let t=reactExports.useContext(DataRouterContext);return invariant2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function useDataRouterStateContext(){let t=reactExports.useContext(DataRouterStateContext);return invariant2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let t=reactExports.useContext(FrameworkContext);return invariant2(t,"You must render this element inside a <HydratedRouter> element"),t}function usePrefetchBehavior(t,i){let s=reactExports.useContext(FrameworkContext),[u,h]=reactExports.useState(!1),[_,l]=reactExports.useState(!1),{onFocus:g,onBlur:d,onMouseEnter:y,onMouseLeave:E,onTouchStart:v}=i,R=reactExports.useRef(null);reactExports.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let I=J=>{J.forEach(X=>{l(X.isIntersecting)})},K=new IntersectionObserver(I,{threshold:.5});return R.current&&K.observe(R.current),()=>{K.disconnect()}}},[t]),reactExports.useEffect(()=>{if(u){let I=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(I)}}},[u]);let z=()=>{h(!0)},C=()=>{h(!1),l(!1)};return s?t!=="intent"?[_,R,{}]:[_,R,{onFocus:composeEventHandlers(g,z),onBlur:composeEventHandlers(d,C),onMouseEnter:composeEventHandlers(y,z),onMouseLeave:composeEventHandlers(E,C),onTouchStart:composeEventHandlers(v,z)}]:[!1,R,{}]}function composeEventHandlers(t,i){return s=>{t&&t(s),s.defaultPrevented||i(s)}}function PrefetchPageLinks({page:t,...i}){let{router:s}=useDataRouterContext2(),u=reactExports.useMemo(()=>matchRoutes(s.routes,t,s.basename),[s.routes,t,s.basename]);return u?reactExports.createElement(PrefetchPageLinksImpl,{page:t,matches:u,...i}):null}function useKeyedPrefetchLinks(t){let{manifest:i,routeModules:s}=useFrameworkContext(),[u,h]=reactExports.useState([]);return reactExports.useEffect(()=>{let _=!1;return getKeyedPrefetchLinks(t,i,s).then(l=>{_||h(l)}),()=>{_=!0}},[t,i,s]),u}function PrefetchPageLinksImpl({page:t,matches:i,...s}){let u=useLocation(),{future:h,manifest:_,routeModules:l}=useFrameworkContext(),{basename:g}=useDataRouterContext2(),{loaderData:d,matches:y}=useDataRouterStateContext(),E=reactExports.useMemo(()=>getNewMatchesForLinks(t,i,y,_,u,"data"),[t,i,y,_,u]),v=reactExports.useMemo(()=>getNewMatchesForLinks(t,i,y,_,u,"assets"),[t,i,y,_,u]),R=reactExports.useMemo(()=>{if(t===u.pathname+u.search+u.hash)return[];let I=new Set,K=!1;if(i.forEach(X=>{let b=_.routes[X.route.id];!b||!b.hasLoader||(!E.some(F=>F.route.id===X.route.id)&&X.route.id in d&&l[X.route.id]?.shouldRevalidate||b.hasClientLoader?K=!0:I.add(X.route.id))}),I.size===0)return[];let J=singleFetchUrl(t,g,h.unstable_trailingSlashAwareDataRequests,"data");return K&&I.size>0&&J.searchParams.set("_routes",i.filter(X=>I.has(X.route.id)).map(X=>X.route.id).join(",")),[J.pathname+J.search]},[g,h.unstable_trailingSlashAwareDataRequests,d,u,_,E,i,t,l]),z=reactExports.useMemo(()=>getModuleLinkHrefs(v,_),[v,_]),C=useKeyedPrefetchLinks(v);return reactExports.createElement(reactExports.Fragment,null,R.map(I=>reactExports.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...s})),z.map(I=>reactExports.createElement("link",{key:I,rel:"modulepreload",href:I,...s})),C.map(({key:I,link:K})=>reactExports.createElement("link",{key:I,nonce:s.nonce,...K})))}function mergeRefs(...t){return i=>{t.forEach(s=>{typeof s=="function"?s(i):s!=null&&(s.current=i)})}}var isBrowser2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser2&&(window.__reactRouterVersion="7.12.0")}catch{}function BrowserRouter({basename:t,children:i,unstable_useTransitions:s,window:u}){let h=reactExports.useRef();h.current==null&&(h.current=createBrowserHistory({window:u,v5Compat:!0}));let _=h.current,[l,g]=reactExports.useState({action:_.action,location:_.location}),d=reactExports.useCallback(y=>{s===!1?g(y):reactExports.startTransition(()=>g(y))},[s]);return reactExports.useLayoutEffect(()=>_.listen(d),[_,d]),reactExports.createElement(Router,{basename:t,children:i,location:l.location,navigationType:l.action,navigator:_,unstable_useTransitions:s})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:i,discover:s="render",prefetch:u="none",relative:h,reloadDocument:_,replace:l,state:g,target:d,to:y,preventScrollReset:E,viewTransition:v,unstable_defaultShouldRevalidate:R,...z},C){let{basename:I,unstable_useTransitions:K}=reactExports.useContext(NavigationContext),J=typeof y=="string"&&ABSOLUTE_URL_REGEX2.test(y),X=parseToInfo(y,I);y=X.to;let b=useHref(y,{relative:h}),[F,B,$]=usePrefetchBehavior(u,z),Q=useLinkClickHandler(y,{replace:l,state:g,target:d,preventScrollReset:E,relative:h,viewTransition:v,unstable_defaultShouldRevalidate:R,unstable_useTransitions:K});function N(Se){i&&i(Se),Se.defaultPrevented||Q(Se)}let ee=reactExports.createElement("a",{...z,...$,href:X.absoluteURL||b,onClick:X.isExternal||_?i:N,ref:mergeRefs(C,B),target:d,"data-discover":!J&&s==="render"?"true":void 0});return F&&!J?reactExports.createElement(reactExports.Fragment,null,ee,reactExports.createElement(PrefetchPageLinks,{page:b})):ee});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":i="page",caseSensitive:s=!1,className:u="",end:h=!1,style:_,to:l,viewTransition:g,children:d,...y},E){let v=useResolvedPath(l,{relative:y.relative}),R=useLocation(),z=reactExports.useContext(DataRouterStateContext),{navigator:C,basename:I}=reactExports.useContext(NavigationContext),K=z!=null&&useViewTransitionState(v)&&g===!0,J=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,X=R.pathname,b=z&&z.navigation&&z.navigation.location?z.navigation.location.pathname:null;s||(X=X.toLowerCase(),b=b?b.toLowerCase():null,J=J.toLowerCase()),b&&I&&(b=stripBasename(b,I)||b);const F=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let B=X===J||!h&&X.startsWith(J)&&X.charAt(F)==="/",$=b!=null&&(b===J||!h&&b.startsWith(J)&&b.charAt(J.length)==="/"),Q={isActive:B,isPending:$,isTransitioning:K},N=B?i:void 0,ee;typeof u=="function"?ee=u(Q):ee=[u,B?"active":null,$?"pending":null,K?"transitioning":null].filter(Boolean).join(" ");let Se=typeof _=="function"?_(Q):_;return reactExports.createElement(Link,{...y,"aria-current":N,className:ee,ref:E,style:Se,to:l,viewTransition:g},typeof d=="function"?d(Q):d)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:t="render",fetcherKey:i,navigate:s,reloadDocument:u,replace:h,state:_,method:l=defaultMethod,action:g,onSubmit:d,relative:y,preventScrollReset:E,viewTransition:v,unstable_defaultShouldRevalidate:R,...z},C)=>{let{unstable_useTransitions:I}=reactExports.useContext(NavigationContext),K=useSubmit(),J=useFormAction(g,{relative:y}),X=l.toLowerCase()==="get"?"get":"post",b=typeof g=="string"&&ABSOLUTE_URL_REGEX2.test(g),F=B=>{if(d&&d(B),B.defaultPrevented)return;B.preventDefault();let $=B.nativeEvent.submitter,Q=$?.getAttribute("formmethod")||l,N=()=>K($||B.currentTarget,{fetcherKey:i,method:Q,navigate:s,replace:h,state:_,relative:y,preventScrollReset:E,viewTransition:v,unstable_defaultShouldRevalidate:R});I&&s!==!1?reactExports.startTransition(()=>N()):N()};return reactExports.createElement("form",{ref:C,method:X,action:J,onSubmit:u?d:F,...z,"data-discover":!b&&t==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(t){let i=reactExports.useContext(DataRouterContext);return invariant$1(i,getDataRouterConsoleError2(t)),i}function useLinkClickHandler(t,{target:i,replace:s,state:u,preventScrollReset:h,relative:_,viewTransition:l,unstable_defaultShouldRevalidate:g,unstable_useTransitions:d}={}){let y=useNavigate(),E=useLocation(),v=useResolvedPath(t,{relative:_});return reactExports.useCallback(R=>{if(shouldProcessLinkClick(R,i)){R.preventDefault();let z=s!==void 0?s:createPath(E)===createPath(v),C=()=>y(t,{replace:z,state:u,preventScrollReset:h,relative:_,viewTransition:l,unstable_defaultShouldRevalidate:g});d?reactExports.startTransition(()=>C()):C()}},[E,y,v,s,u,i,t,h,_,l,g,d])}function useSearchParams(t){warning(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let i=reactExports.useRef(createSearchParams(t)),s=reactExports.useRef(!1),u=useLocation(),h=reactExports.useMemo(()=>getSearchParamsForLocation(u.search,s.current?null:i.current),[u.search]),_=useNavigate(),l=reactExports.useCallback((g,d)=>{const y=createSearchParams(typeof g=="function"?g(new URLSearchParams(h)):g);s.current=!0,_("?"+y,d)},[_,h]);return[h,l]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:t}=useDataRouterContext3("useSubmit"),{basename:i}=reactExports.useContext(NavigationContext),s=useRouteId(),u=t.fetch,h=t.navigate;return reactExports.useCallback(async(_,l={})=>{let{action:g,method:d,encType:y,formData:E,body:v}=getFormSubmissionInfo(_,i);if(l.navigate===!1){let R=l.fetcherKey||getUniqueFetcherId();await u(R,s,l.action||g,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:E,body:v,formMethod:l.method||d,formEncType:l.encType||y,flushSync:l.flushSync})}else await h(l.action||g,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:E,body:v,formMethod:l.method||d,formEncType:l.encType||y,replace:l.replace,state:l.state,fromRouteId:s,flushSync:l.flushSync,viewTransition:l.viewTransition})},[u,h,i,s])}function useFormAction(t,{relative:i}={}){let{basename:s}=reactExports.useContext(NavigationContext),u=reactExports.useContext(RouteContext);invariant$1(u,"useFormAction must be used inside a RouteContext");let[h]=u.matches.slice(-1),_={...useResolvedPath(t||".",{relative:i})},l=useLocation();if(t==null){_.search=l.search;let g=new URLSearchParams(_.search),d=g.getAll("index");if(d.some(E=>E==="")){g.delete("index"),d.filter(v=>v).forEach(v=>g.append("index",v));let E=g.toString();_.search=E?`?${E}`:""}}return(!t||t===".")&&h.route.index&&(_.search=_.search?_.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(_.pathname=_.pathname==="/"?s:joinPaths([s,_.pathname])),createPath(_)}function useViewTransitionState(t,{relative:i}={}){let s=reactExports.useContext(ViewTransitionContext);invariant$1(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:u}=useDataRouterContext3("useViewTransitionState"),h=useResolvedPath(t,{relative:i});if(!s.isTransitioning)return!1;let _=stripBasename(s.currentLocation.pathname,u)||s.currentLocation.pathname,l=stripBasename(s.nextLocation.pathname,u)||s.nextLocation.pathname;return matchPath(h.pathname,l)!=null||matchPath(h.pathname,_)!=null}const corsProxies=[{name:"cors-optimade-science",urlRule:t=>{const i=t.match(/^https?:\/\/(.+)$/);if(!i)throw new Error("Invalid URL for proxy");const[,s]=i;return`https://cors.optimade.science/https/${s}`}},{name:"cors-anywhere",urlRule:t=>`https://cors-anywhere.com/${t}`},{name:"allorigins",urlRule:t=>`https://api.allorigins.win/raw?url=${encodeURIComponent(t)}`}],elements=[{num:1,sym:"H",row:1,col:1,group:"group1"},{num:2,sym:"He",row:1,col:18,group:"group18"},{num:3,sym:"Li",row:2,col:1,group:"group1"},{num:4,sym:"Be",row:2,col:2,group:"group2"},{num:5,sym:"B",row:2,col:13,group:"metalloid"},{num:6,sym:"C",row:2,col:14,group:"mainGroup"},{num:7,sym:"N",row:2,col:15,group:"mainGroup"},{num:8,sym:"O",row:2,col:16,group:"mainGroup"},{num:9,sym:"F",row:2,col:17,group:"group17"},{num:10,sym:"Ne",row:2,col:18,group:"group18"},{num:11,sym:"Na",row:3,col:1,group:"group1"},{num:12,sym:"Mg",row:3,col:2,group:"group2"},{num:13,sym:"Al",row:3,col:13,group:"postTransition"},{num:14,sym:"Si",row:3,col:14,group:"metalloid"},{num:15,sym:"P",row:3,col:15,group:"mainGroup"},{num:16,sym:"S",row:3,col:16,group:"mainGroup"},{num:17,sym:"Cl",row:3,col:17,group:"group17"},{num:18,sym:"Ar",row:3,col:18,group:"group18"},{num:19,sym:"K",row:4,col:1,group:"group1"},{num:20,sym:"Ca",row:4,col:2,group:"group2"},{num:21,sym:"Sc",row:4,col:3,group:"transition"},{num:22,sym:"Ti",row:4,col:4,group:"transition"},{num:23,sym:"V",row:4,col:5,group:"transition"},{num:24,sym:"Cr",row:4,col:6,group:"transition"},{num:25,sym:"Mn",row:4,col:7,group:"transition"},{num:26,sym:"Fe",row:4,col:8,group:"transition"},{num:27,sym:"Co",row:4,col:9,group:"transition"},{num:28,sym:"Ni",row:4,col:10,group:"transition"},{num:29,sym:"Cu",row:4,col:11,group:"transition"},{num:30,sym:"Zn",row:4,col:12,group:"transition"},{num:31,sym:"Ga",row:4,col:13,group:"postTransition"},{num:32,sym:"Ge",row:4,col:14,group:"metalloid"},{num:33,sym:"As",row:4,col:15,group:"metalloid"},{num:34,sym:"Se",row:4,col:16,group:"mainGroup"},{num:35,sym:"Br",row:4,col:17,group:"group17"},{num:36,sym:"Kr",row:4,col:18,group:"group18"},{num:37,sym:"Rb",row:5,col:1,group:"group1"},{num:38,sym:"Sr",row:5,col:2,group:"group2"},{num:39,sym:"Y",row:5,col:3,group:"transition"},{num:40,sym:"Zr",row:5,col:4,group:"transition"},{num:41,sym:"Nb",row:5,col:5,group:"transition"},{num:42,sym:"Mo",row:5,col:6,group:"transition"},{num:43,sym:"Tc",row:5,col:7,group:"transition"},{num:44,sym:"Ru",row:5,col:8,group:"transition"},{num:45,sym:"Rh",row:5,col:9,group:"transition"},{num:46,sym:"Pd",row:5,col:10,group:"transition"},{num:47,sym:"Ag",row:5,col:11,group:"transition"},{num:48,sym:"Cd",row:5,col:12,group:"transition"},{num:49,sym:"In",row:5,col:13,group:"postTransition"},{num:50,sym:"Sn",row:5,col:14,group:"postTransition"},{num:51,sym:"Sb",row:5,col:15,group:"metalloid"},{num:52,sym:"Te",row:5,col:16,group:"metalloid"},{num:53,sym:"I",row:5,col:17,group:"group17"},{num:54,sym:"Xe",row:5,col:18,group:"group18"},{num:55,sym:"Cs",row:6,col:1,group:"group1"},{num:56,sym:"Ba",row:6,col:2,group:"group2"},{num:72,sym:"Hf",row:6,col:4,group:"transition"},{num:73,sym:"Ta",row:6,col:5,group:"transition"},{num:74,sym:"W",row:6,col:6,group:"transition"},{num:75,sym:"Re",row:6,col:7,group:"transition"},{num:76,sym:"Os",row:6,col:8,group:"transition"},{num:77,sym:"Ir",row:6,col:9,group:"transition"},{num:78,sym:"Pt",row:6,col:10,group:"transition"},{num:79,sym:"Au",row:6,col:11,group:"transition"},{num:80,sym:"Hg",row:6,col:12,group:"transition"},{num:81,sym:"Tl",row:6,col:13,group:"postTransition"},{num:82,sym:"Pb",row:6,col:14,group:"postTransition"},{num:83,sym:"Bi",row:6,col:15,group:"postTransition"},{num:84,sym:"Po",row:6,col:16,group:"postTransition"},{num:85,sym:"At",row:6,col:17,group:"group17"},{num:86,sym:"Rn",row:6,col:18,group:"group18"},{num:87,sym:"Fr",row:7,col:1,group:"group1"},{num:88,sym:"Ra",row:7,col:2,group:"group2"},{num:104,sym:"Rf",row:7,col:4,group:"transition"},{num:105,sym:"Db",row:7,col:5,group:"transition"},{num:106,sym:"Sg",row:7,col:6,group:"transition"},{num:107,sym:"Bh",row:7,col:7,group:"transition"},{num:108,sym:"Hs",row:7,col:8,group:"transition"},{num:109,sym:"Mt",row:7,col:9,group:"bg-lime-200"},{num:110,sym:"Ds",row:7,col:10,group:"bg-lime-200"},{num:111,sym:"Rg",row:7,col:11,group:"bg-lime-200"},{num:112,sym:"Cn",row:7,col:12,group:"bg-lime-200"},{num:113,sym:"Nh",row:7,col:13,group:"bg-lime-200"},{num:114,sym:"Fl",row:7,col:14,group:"bg-lime-200"},{num:115,sym:"Mc",row:7,col:15,group:"bg-lime-200"},{num:116,sym:"Lv",row:7,col:16,group:"bg-lime-200"},{num:117,sym:"Ts",row:7,col:17,group:"bg-lime-200"},{num:118,sym:"Og",row:7,col:18,group:"bg-lime-200"},{num:57,sym:"La",row:12,col:3,group:"lanthanide"},{num:58,sym:"Ce",row:12,col:4,group:"lanthanide"},{num:59,sym:"Pr",row:12,col:5,group:"lanthanide"},{num:60,sym:"Nd",row:12,col:6,group:"lanthanide"},{num:61,sym:"Pm",row:12,col:7,group:"lanthanide"},{num:62,sym:"Sm",row:12,col:8,group:"lanthanide"},{num:63,sym:"Eu",row:12,col:9,group:"lanthanide"},{num:64,sym:"Gd",row:12,col:10,group:"lanthanide"},{num:65,sym:"Tb",row:12,col:11,group:"lanthanide"},{num:66,sym:"Dy",row:12,col:12,group:"lanthanide"},{num:67,sym:"Ho",row:12,col:13,group:"lanthanide"},{num:68,sym:"Er",row:12,col:14,group:"lanthanide"},{num:69,sym:"Tm",row:12,col:15,group:"lanthanide"},{num:70,sym:"Yb",row:12,col:16,group:"lanthanide"},{num:71,sym:"Lu",row:12,col:17,group:"lanthanide"},{num:89,sym:"Ac",row:13,col:3,group:"actinide"},{num:90,sym:"Th",row:13,col:4,group:"actinide"},{num:91,sym:"Pa",row:13,col:5,group:"actinide"},{num:92,sym:"U",row:13,col:6,group:"actinide"},{num:93,sym:"Np",row:13,col:7,group:"actinide"},{num:94,sym:"Pu",row:13,col:8,group:"actinide"},{num:95,sym:"Am",row:13,col:9,group:"actinide"},{num:96,sym:"Cm",row:13,col:10,group:"actinide"},{num:97,sym:"Bk",row:13,col:11,group:"actinide"},{num:98,sym:"Cf",row:13,col:12,group:"actinide"},{num:99,sym:"Es",row:13,col:13,group:"actinide"},{num:100,sym:"Fm",row:13,col:14,group:"actinide"},{num:101,sym:"Md",row:13,col:15,group:"actinide"},{num:102,sym:"No",row:13,col:16,group:"actinide"},{num:103,sym:"Lr",row:13,col:17,group:"actinide"}];async function getProvidersList(t="https://raw.githubusercontent.com/Materials-Consortia/providers/refs/heads/master/src/links/v1/providers.json",i=[]){async function s(_){const l=await fetch(_);if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return await l.json()}let u;try{u=await s(t)}catch(_){console.warn("Remote fetch failed, falling back to cachedProviders.json:",_);try{u=await s("cachedProviders.json")}catch(l){throw console.error("Both remote and local fetches failed:",l),l}}const h=u.data.filter(_=>!i.includes(_.id));return{...u,data:h}}async function getProviderLinks(t){const i=u=>(u.data||[]).filter(h=>h.attributes?.link_type==="child"),s=[{name:"direct",url:`${t}/v1/links`},...corsProxies.map(u=>({name:u.name,url:u.urlRule(`${t}/v1/links`)}))];for(const{url:u,name:h}of s)try{const _=await fetch(u);if(!_.ok)continue;const l=await _.json();return{children:i(l),error:null}}catch{continue}return{children:[],error:new Error("All fetch attempts failed")}}async function getInfo({providerUrl:t}){const i=[{name:"direct",url:`${t}/v1/info/structures`},...corsProxies.map(s=>({name:s.name,url:s.urlRule(`${t}/v1/info/structures`)}))];for(const{url:s,name:u}of i)try{const h=await fetch(s);if(!h.ok)continue;const _=await h.json();return{customProps:Object.fromEntries(Object.entries(_.data.properties||{}).filter(([g])=>g.startsWith("_"))),error:null,allProps:_.data.properties}}catch{continue}return{customProps:{},error:new Error("All fetch attempts failed")}}async function getStructures({providerUrl:t,filter:i="",page:s=1,pageSize:u=20}){if(!t)throw new Error("Provider URL is required");let h=[];try{const{customProps:v,error:R,allProps:z}=await getInfo({providerUrl:t});R&&console.warn("Could not fetch custom fields:",R),z&&(h=Object.keys(z))}catch(v){console.warn("Error fetching custom fields:",v)}const _=["cartesian_site_positions","species_at_sites","lattice_vectors","chemical_formula_descriptive","chemical_formula_hill"],l=Array.from(new Set([..._,...h])),g=(s-1)*u,d=i?`?filter=${encodeURIComponent(i)}&page_offset=${g}`:`?page_offset=${g}`,y=`${t}/v1/structures${d}&response_fields=${l.join(",")}`,E=[{name:"direct",url:y},...corsProxies.map(v=>({name:v.name,url:v.urlRule(y)}))];for(const{url:v}of E)try{const R=await fetch(v);if(!R.ok)continue;return await R.json()}catch{continue}throw new Error("All fetch attempts failed for getStructures")}function OptimadeHeader(){return jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("img",{src:"/optimade_logo-min.png",alt:"OptimadeLogo",className:"h-18 sm:h-24 md:h-32 w-auto object-contain"})})}function HelpIcon({popover:t,size:i=24,color:s="currentColor",strokeWidthBorder:u=2,strokeWidth:h=2.5,placement:_="top",popoutBgColor:l="bg-gray-800",popoutTextColor:g="text-white",popoutStyleOverrides:d=""}){let y="";switch(_){case"top":y="bottom-full left-1/2 transform -translate-x-1/2 mb-2";break;case"bottom":y="top-full left-1/2 transform -translate-x-1/2 mt-2";break;case"left":y="right-full top-1/2 transform -translate-y-1/2 mr-2";break;case"right":y="left-full top-1/2 transform -translate-y-1/2 ml-2";break;default:y="bottom-full left-1/2 transform -translate-x-1/2 mb-2"}return jsxRuntimeExports.jsxs("span",{className:"relative inline-block group",children:[jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:u,strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",strokeWidth:h}),jsxRuntimeExports.jsx("path",{d:"M12 17h.01",strokeWidth:h})]}),t&&jsxRuntimeExports.jsx("span",{className:`absolute ${y} w-max max-w-xs rounded-sm ${l} ${g} text-xs p-1
          text-center opacity-0 group-hover:opacity-100 transition-opacity z-50 pointer-events-none ${d}`,children:t})]})}const defaultColors={group1:"bg-[#d7bbbb]",group2:"bg-[#d7cdbb]",group17:"bg-[#d7d9c2]",group18:"bg-[#d0d5ee]",transition:"bg-[#c4d0d8]",lanthanide:"bg-[#e5cbee]",actinide:"bg-[#aebcee]",metalloid:"bg-[#cdd9c2]",postTransition:"bg-[#c2c8d9]",mainGroup:"bg-[#d9c2ce]",default:"bg-gray-200"};function PTable({providerUrl:t=null,selected:i={},onSelectionChange:s,colors:u=defaultColors,selectedClassName:h="bg-green-400 border border-green-700 text-white scale-105",deselectedClassName:_="bg-red-400 border border-red-700 text-white scale-105",defaultBorderClassName:l="border border-slate-700",hoverClassName:g="transform transition-transform duration-100 hover:scale-105 hover:z-10 hover:cursor-pointer"}){const[d,y]=reactExports.useState(elements),[E,v]=reactExports.useState(null),[R,z]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{try{const J=await fetch("./cachedPTable.json");if(!J.ok)throw new Error("Failed to load cached PTable");const X=J.headers.get("last-modified");if(X){const B=new Date(X).toLocaleDateString();z(B)}const b=await J.json(),F={};b.forEach(B=>{F[B.providerUrl]=B.ptable}),v(F)}catch(J){console.error("Failed to load cached PTable:",J)}})()},[]),reactExports.useEffect(()=>{if(!t||!E)return;const K=E[t]||{},J=elements.map(X=>({...X,present:X.sym in K?K[X.sym]:void 0}));y(J)},[t,E]);const C=K=>{if(!s)return;const J=((i[K]??0)+1)%3;s({[K]:J})},I=K=>{const J=i[K.sym]??0,X=u[K.group]??u.default;if(J===1)return h;if(J===2)return _;const b=K.present===!1?"opacity-30":"";return`${X} ${l} ${b}`};return jsxRuntimeExports.jsx("div",{className:"w-full max-w-full mx-auto px-0 md:px-2",children:jsxRuntimeExports.jsxs("div",{className:"@container",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-end pb-2 pr-1.5",children:jsxRuntimeExports.jsx(HelpIcon,{popover:`All OPTIMADE provider databases have been prefiltered, with unavailable structures greyed out. Last updated: ${R}.`,placement:"left",color:"rgb(40,40,40)"})}),jsxRuntimeExports.jsx("div",{className:"grid @gap-0.5 @sm:gap-1 w-full",style:{gridTemplateColumns:"repeat(18, minmax(0, 1fr))"},children:d.map(K=>jsxRuntimeExports.jsx("div",{style:{gridColumn:K.col,gridRow:K.row},className:"relative w-full",children:jsxRuntimeExports.jsx("div",{className:"w-full aspect-square",children:jsxRuntimeExports.jsxs("button",{onClick:()=>C(K.sym),className:`flex flex-col justify-center items-center w-full h-full rounded-sm ${g} ${I(K)}`,children:[jsxRuntimeExports.jsx("span",{className:"text-[0px] opacity-0 @sm:text-[0.3rem] @sm:opacity-100 @md:text-[0.5rem] @lg:text-[0.7rem] text-gray-700 leading-tight",children:K.num}),jsxRuntimeExports.jsx("span",{className:"text-[0.55rem] font-medium leading-none",style:{fontSize:"clamp(0.55rem, 2.5vw, 1.25rem)"},children:K.sym})]})})},K.sym))})]})})}const textNormal=" text-sm md:text-base",textLarge=" text-base md:text-lg",textHyperlink=" text-blue-500 hover:underline hover:text-blue-600",textSmall=" text-xs md:text-sm",textTiny=" text-[13px] md:text-[13px]",textError=" text-center text-red-500",baseButtonStyle=`px-2 py-1 md:px-3 md:py-1.5 rounded
 bg-blue-600 text-white 
 hover:bg-blue-700 hover:cursor-pointer
`,baseContainer="w-full border border-slate-500 rounded-sm bg-slate-50 shadow-sm ",containerStyle=baseContainer+" p-2",containerStyleDropdown=baseContainer+" overflow-hidden text-[11px] md:text-[13px]",containerStyleHalf=baseContainer+` p-2 md:w-1/2  min-h-48 md:h-[450px] h-[200px] text-[11px] md:text-[13px]
   overflow-auto`,warningContainerStyle="w-full rounded-sm bg-yellow-100 border border-yellow-400 text-yellow-800 p-3 text-center";function QueryTextBox({value:t,onChange:i,placeholder:s="Enter OPTIMADE filter",onSubmit:u,loading:h=!1}){return jsxRuntimeExports.jsx("div",{className:textNormal,children:jsxRuntimeExports.jsxs("form",{onSubmit:_=>{_.preventDefault(),u?.()},className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"text",value:t,onChange:_=>i(_.target.value),placeholder:s,className:`${containerStyle} border-gray-300! bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 `}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:h,className:`${baseButtonStyle} disabled:opacity-50`,children:h?"Loading":"Submit"})]})})}var lib={},Range={},utils={},types={},hasRequiredTypes;function requireTypes(){if(hasRequiredTypes)return types;hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0}),types.Direction=void 0;var t;return(function(i){i.Right="to right",i.Left="to left",i.Down="to bottom",i.Up="to top"})(t||(types.Direction=t={})),types}var hasRequiredUtils;function requireUtils(){return hasRequiredUtils||(hasRequiredUtils=1,(function(t){var i=utils&&utils.__spreadArray||function(ge,me,Me){if(Me||arguments.length===2)for(var ce=0,O=me.length,he;ce<O;ce++)(he||!(ce in me))&&(he||(he=Array.prototype.slice.call(me,0,ce)),he[ce]=me[ce]);return ge.concat(he||Array.prototype.slice.call(me))};Object.defineProperty(t,"__esModule",{value:!0}),t.isIOS=t.useThumbOverlap=t.assertUnreachable=t.voidFn=t.getTrackBackground=t.replaceAt=t.schd=t.translate=t.getClosestThumbIndex=t.translateThumbs=t.getPaddingAndBorder=t.getMargin=t.checkInitialOverlap=t.checkValuesAgainstBoundaries=t.checkBoundaries=t.isVertical=t.relativeValue=t.normalizeValue=t.isStepDivisible=t.isTouchEvent=t.getStepDecimals=void 0;var s=requireReact(),u=requireTypes(),h=function(ge){var me=ge.toString().split(".")[1];return me?me.length:0};t.getStepDecimals=h;function _(ge){return ge.touches&&ge.touches.length||ge.changedTouches&&ge.changedTouches.length}t.isTouchEvent=_;function l(ge,me,Me){var ce=(me-ge)/Me,O=8,he=Number(ce.toFixed(O));return parseInt(he.toString(),10)===he}t.isStepDivisible=l;function g(ge,me,Me,ce,O,he,se){var q=1e11;if(ge=Math.round(ge*q)/q,!he){var Pe=se[me-1],fe=se[me+1];if(Pe&&Pe>ge)return Pe;if(fe&&fe<ge)return fe}if(ge>ce)return ce;if(ge<Me)return Me;var De=Math.floor(ge*q-Me*q)%Math.floor(O*q),He=Math.floor(ge*q-Math.abs(De)),oe=De===0?ge:He/q,Ce=Math.abs(De/q)<O/2?oe:oe+O,We=(0,t.getStepDecimals)(O);return parseFloat(Ce.toFixed(We))}t.normalizeValue=g;function d(ge,me,Me){return(ge-me)/(Me-me)}t.relativeValue=d;function y(ge){return ge===u.Direction.Up||ge===u.Direction.Down}t.isVertical=y;function E(ge,me,Me){if(me>=Me)throw new RangeError("min (".concat(me,") is equal/bigger than max (").concat(Me,")"));if(ge<me)throw new RangeError("value (".concat(ge,") is smaller than min (").concat(me,")"));if(ge>Me)throw new RangeError("value (".concat(ge,") is bigger than max (").concat(Me,")"))}t.checkBoundaries=E;function v(ge,me,Me){return ge<me?me:ge>Me?Me:ge}t.checkValuesAgainstBoundaries=v;function R(ge){if(!(ge.length<2)&&!ge.slice(1).every(function(me,Me){return ge[Me]<=me}))throw new RangeError("values={[".concat(ge,"]} needs to be sorted when allowOverlap={false}"))}t.checkInitialOverlap=R;function z(ge){var me=window.getComputedStyle(ge);return{top:parseInt(me["margin-top"],10),bottom:parseInt(me["margin-bottom"],10),left:parseInt(me["margin-left"],10),right:parseInt(me["margin-right"],10)}}t.getMargin=z;function C(ge){var me=window.getComputedStyle(ge);return{top:parseInt(me["padding-top"],10)+parseInt(me["border-top-width"],10),bottom:parseInt(me["padding-bottom"],10)+parseInt(me["border-bottom-width"],10),left:parseInt(me["padding-left"],10)+parseInt(me["border-left-width"],10),right:parseInt(me["padding-right"],10)+parseInt(me["border-right-width"],10)}}t.getPaddingAndBorder=C;function I(ge,me,Me){var ce=Me?-1:1;ge.forEach(function(O,he){return J(O,ce*me[he].x,me[he].y)})}t.translateThumbs=I;function K(ge,me,Me,ce){for(var O=0,he=Se(ge[0],me,Me,ce),se=1;se<ge.length;se++){var q=Se(ge[se],me,Me,ce);q<he&&(he=q,O=se)}return O}t.getClosestThumbIndex=K;function J(ge,me,Me){ge.style.transform="translate(".concat(me,"px, ").concat(Me,"px)")}t.translate=J;var X=function(ge){var me=[],Me=null,ce=function(){for(var O=[],he=0;he<arguments.length;he++)O[he]=arguments[he];me=O,!Me&&(Me=requestAnimationFrame(function(){Me=null,ge.apply(void 0,me)}))};return ce};t.schd=X;function b(ge,me,Me){var ce=ge.slice(0);return ce[me]=Me,ce}t.replaceAt=b;function F(ge){var me=ge.values,Me=ge.colors,ce=ge.min,O=ge.max,he=ge.direction,se=he===void 0?u.Direction.Right:he,q=ge.rtl,Pe=q===void 0?!1:q;Pe&&se===u.Direction.Right?se=u.Direction.Left:Pe&&u.Direction.Left&&(se=u.Direction.Right);var fe=me.slice(0).sort(function(He,oe){return He-oe}).map(function(He){return(He-ce)/(O-ce)*100}),De=fe.reduce(function(He,oe,Ce){return"".concat(He,", ").concat(Me[Ce]," ").concat(oe,"%, ").concat(Me[Ce+1]," ").concat(oe,"%")},"");return"linear-gradient(".concat(se,", ").concat(Me[0]," 0%").concat(De,", ").concat(Me[Me.length-1]," 100%)")}t.getTrackBackground=F;function B(){}t.voidFn=B;function $(ge){throw new Error("Didn't expect to get here")}t.assertUnreachable=$;var Q=function(ge,me,Me,ce,O){O===void 0&&(O=function(se){return se});var he=Math.ceil(i([ge],Array.from(ge.children),!0).reduce(function(se,q){var Pe=Math.ceil(q.getBoundingClientRect().width);if(q.innerText&&q.innerText.includes(Me)&&q.childElementCount===0){var fe=q.cloneNode(!0);fe.innerHTML=O(me.toFixed(ce)),fe.style.visibility="hidden",document.body.appendChild(fe),Pe=Math.ceil(fe.getBoundingClientRect().width),document.body.removeChild(fe)}return Pe>se?Pe:se},ge.getBoundingClientRect().width));return he},N=function(ge,me,Me,ce,O,he,se){se===void 0&&(se=function(fe){return fe});var q=[],Pe=function(fe){var De=Q(Me[fe],ce[fe],O,he,se),He=me[fe].x;me.forEach(function(oe,Ce){var We=oe.x,qe=Q(Me[Ce],ce[Ce],O,he,se);fe!==Ce&&(He>=We&&He<=We+qe||He+De>=We&&He+De<=We+qe)&&(q.includes(Ce)||(q.push(fe),q.push(Ce),q=i(i([],q,!0),[fe,Ce],!1),Pe(Ce)))})};return Pe(ge),Array.from(new Set(q.sort()))},ee=function(ge,me,Me,ce,O,he){ce===void 0&&(ce=.1),O===void 0&&(O=" - "),he===void 0&&(he=function(Ce){return Ce});var se=(0,t.getStepDecimals)(ce),q=(0,s.useState)({}),Pe=q[0],fe=q[1],De=(0,s.useState)(he(me[Me].toFixed(se))),He=De[0],oe=De[1];return(0,s.useEffect)(function(){if(ge){var Ce=ge.getThumbs();if(Ce.length<1)return;var We={},qe=ge.getOffsets(),Fe=N(Me,qe,Ce,me,O,se,he),rt=he(me[Me].toFixed(se));if(Fe.length){var ot=Fe.reduce(function(ar,Mr,Er,pr){return ar.length?i(i([],ar,!0),[qe[pr[Er]].x],!1):[qe[pr[Er]].x]},[]);if(Math.min.apply(Math,ot)===qe[Me].x){var at=[];Fe.forEach(function(ar){at.push(me[ar].toFixed(se))}),rt=Array.from(new Set(at.sort(function(ar,Mr){return parseFloat(ar)-parseFloat(Mr)}))).map(he).join(O);var Ft=Math.min.apply(Math,ot),Ct=Math.max.apply(Math,ot),or=Ce[Fe[ot.indexOf(Ct)]].getBoundingClientRect().width;We.left="".concat(Math.abs(Ft-(Ct+or))/2,"px"),We.transform="translate(-50%, 0)"}else We.visibility="hidden"}oe(rt),fe(We)}},[ge,me]),[He,Pe]};t.useThumbOverlap=ee;function Se(ge,me,Me,ce){var O=ge.getBoundingClientRect(),he=O.left,se=O.top,q=O.width,Pe=O.height;return y(ce)?Math.abs(Me-(se+Pe/2)):Math.abs(me-(he+q/2))}var ue=function(){var ge,me=((ge=navigator.userAgentData)===null||ge===void 0?void 0:ge.platform)||navigator.platform;return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(me)||navigator.userAgent.includes("Mac")&&"ontouchend"in document};t.isIOS=ue})(utils)),utils}var hasRequiredRange;function requireRange(){if(hasRequiredRange)return Range;hasRequiredRange=1;var t=Range&&Range.__extends||(function(){var v=function(R,z){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,I){C.__proto__=I}||function(C,I){for(var K in I)Object.prototype.hasOwnProperty.call(I,K)&&(C[K]=I[K])},v(R,z)};return function(R,z){if(typeof z!="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");v(R,z);function C(){this.constructor=R}R.prototype=z===null?Object.create(z):(C.prototype=z.prototype,new C)}})(),i=Range&&Range.__createBinding||(Object.create?(function(v,R,z,C){C===void 0&&(C=z);var I=Object.getOwnPropertyDescriptor(R,z);(!I||("get"in I?!R.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return R[z]}}),Object.defineProperty(v,C,I)}):(function(v,R,z,C){C===void 0&&(C=z),v[C]=R[z]})),s=Range&&Range.__setModuleDefault||(Object.create?(function(v,R){Object.defineProperty(v,"default",{enumerable:!0,value:R})}):function(v,R){v.default=R}),u=Range&&Range.__importStar||function(v){if(v&&v.__esModule)return v;var R={};if(v!=null)for(var z in v)z!=="default"&&Object.prototype.hasOwnProperty.call(v,z)&&i(R,v,z);return s(R,v),R},h=Range&&Range.__spreadArray||function(v,R,z){if(z||arguments.length===2)for(var C=0,I=R.length,K;C<I;C++)(K||!(C in R))&&(K||(K=Array.prototype.slice.call(R,0,C)),K[C]=R[C]);return v.concat(K||Array.prototype.slice.call(R))};Object.defineProperty(Range,"__esModule",{value:!0});var _=u(requireReact()),l=requireUtils(),g=requireTypes(),d=["ArrowRight","ArrowUp","k","PageUp"],y=["ArrowLeft","ArrowDown","j","PageDown"],E=(function(v){t(R,v);function R(z){var C=v.call(this,z)||this;if(C.trackRef=_.createRef(),C.thumbRefs=[],C.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(C.props.values.length).fill(0).map(function(I,K){return K}),isChanged:!1,markOffsets:[]},C.getOffsets=function(){var I=C.props,K=I.direction,J=I.values,X=I.min,b=I.max,F=C.trackRef.current;if(!F)return console.warn("No track element found."),[];var B=F.getBoundingClientRect(),$=(0,l.getPaddingAndBorder)(F);return C.getThumbs().map(function(Q,N){var ee={x:0,y:0},Se=Q.getBoundingClientRect(),ue=(0,l.getMargin)(Q);switch(K){case g.Direction.Right:return ee.x=(ue.left+$.left)*-1,ee.y=((Se.height-B.height)/2+$.top)*-1,ee.x+=B.width*(0,l.relativeValue)(J[N],X,b)-Se.width/2,ee;case g.Direction.Left:return ee.x=(ue.right+$.right)*-1,ee.y=((Se.height-B.height)/2+$.top)*-1,ee.x+=B.width-B.width*(0,l.relativeValue)(J[N],X,b)-Se.width/2,ee;case g.Direction.Up:return ee.x=((Se.width-B.width)/2+ue.left+$.left)*-1,ee.y=-$.left,ee.y+=B.height-B.height*(0,l.relativeValue)(J[N],X,b)-Se.height/2,ee;case g.Direction.Down:return ee.x=((Se.width-B.width)/2+ue.left+$.left)*-1,ee.y=-$.left,ee.y+=B.height*(0,l.relativeValue)(J[N],X,b)-Se.height/2,ee;default:return(0,l.assertUnreachable)(K)}})},C.getThumbs=function(){return C.trackRef&&C.trackRef.current?Array.from(C.trackRef.current.children).filter(function(I){return I.hasAttribute("aria-valuenow")}):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},C.getTargetIndex=function(I){return C.getThumbs().findIndex(function(K){return K===I.target||K.contains(I.target)})},C.addTouchEvents=function(I){document.addEventListener("touchmove",C.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",C.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",C.schdOnEnd,{passive:!1})},C.addMouseEvents=function(I){document.addEventListener("mousemove",C.schdOnMouseMove),document.addEventListener("mouseup",C.schdOnEnd)},C.onMouseDownTrack=function(I){var K;if(!(I.button!==0||(0,l.isIOS)()))if(I.persist(),I.preventDefault(),C.addMouseEvents(I.nativeEvent),C.props.values.length>1&&C.props.draggableTrack){if(C.thumbRefs.some(function(X){var b;return(b=X.current)===null||b===void 0?void 0:b.contains(I.target)}))return;C.setState({draggedTrackPos:[I.clientX,I.clientY]},function(){return C.onMove(I.clientX,I.clientY)})}else{var J=(0,l.getClosestThumbIndex)(C.thumbRefs.map(function(X){return X.current}),I.clientX,I.clientY,C.props.direction);(K=C.thumbRefs[J].current)===null||K===void 0||K.focus(),C.setState({draggedThumbIndex:J},function(){return C.onMove(I.clientX,I.clientY)})}},C.onResize=function(){(0,l.translateThumbs)(C.getThumbs(),C.getOffsets(),C.props.rtl),C.calculateMarkOffsets()},C.onTouchStartTrack=function(I){var K;if(I.persist(),C.addTouchEvents(I.nativeEvent),C.props.values.length>1&&C.props.draggableTrack){if(C.thumbRefs.some(function(X){var b;return(b=X.current)===null||b===void 0?void 0:b.contains(I.target)}))return;C.setState({draggedTrackPos:[I.touches[0].clientX,I.touches[0].clientY]},function(){return C.onMove(I.touches[0].clientX,I.touches[0].clientY)})}else{var J=(0,l.getClosestThumbIndex)(C.thumbRefs.map(function(X){return X.current}),I.touches[0].clientX,I.touches[0].clientY,C.props.direction);(K=C.thumbRefs[J].current)===null||K===void 0||K.focus(),C.setState({draggedThumbIndex:J},function(){return C.onMove(I.touches[0].clientX,I.touches[0].clientY)})}},C.onMouseOrTouchStart=function(I){if(!C.props.disabled){var K=(0,l.isTouchEvent)(I);if(!(!K&&I.button!==0)){var J=C.getTargetIndex(I);J!==-1&&(K?C.addTouchEvents(I):C.addMouseEvents(I),C.setState({draggedThumbIndex:J,thumbZIndexes:C.state.thumbZIndexes.map(function(X,b){return b===J?Math.max.apply(Math,C.state.thumbZIndexes):X<=C.state.thumbZIndexes[J]?X:X-1})}))}}},C.onMouseMove=function(I){I.preventDefault(),C.onMove(I.clientX,I.clientY)},C.onTouchMove=function(I){I.preventDefault(),C.onMove(I.touches[0].clientX,I.touches[0].clientY)},C.onKeyDown=function(I){var K=C.props,J=K.values,X=K.onChange,b=K.step,F=K.rtl,B=K.direction,$=C.state.isChanged,Q=C.getTargetIndex(I.nativeEvent),N=F||B===g.Direction.Left||B===g.Direction.Down?-1:1;Q!==-1&&(d.includes(I.key)?(I.preventDefault(),C.setState({draggedThumbIndex:Q,isChanged:!0}),X((0,l.replaceAt)(J,Q,C.normalizeValue(J[Q]+N*(I.key==="PageUp"?b*10:b),Q)))):y.includes(I.key)?(I.preventDefault(),C.setState({draggedThumbIndex:Q,isChanged:!0}),X((0,l.replaceAt)(J,Q,C.normalizeValue(J[Q]-N*(I.key==="PageDown"?b*10:b),Q)))):I.key==="Tab"?C.setState({draggedThumbIndex:-1},function(){$&&C.fireOnFinalChange()}):$&&C.fireOnFinalChange())},C.onKeyUp=function(I){var K=C.state.isChanged;C.setState({draggedThumbIndex:-1},function(){K&&C.fireOnFinalChange()})},C.onMove=function(I,K){var J=C.state,X=J.draggedThumbIndex,b=J.draggedTrackPos,F=C.props,B=F.direction,$=F.min,Q=F.max,N=F.onChange,ee=F.values,Se=F.step,ue=F.rtl;if(X===-1&&b[0]===-1&&b[1]===-1)return null;var ge=C.trackRef.current;if(!ge)return null;var me=ge.getBoundingClientRect(),Me=(0,l.isVertical)(B)?me.height:me.width;if(b[0]!==-1&&b[1]!==-1){var ce=I-b[0],O=K-b[1],he=0;switch(B){case g.Direction.Right:case g.Direction.Left:he=ce/Me*(Q-$);break;case g.Direction.Down:case g.Direction.Up:he=O/Me*(Q-$);break;default:(0,l.assertUnreachable)(B)}if(ue&&(he*=-1),Math.abs(he)>=Se/2){for(var se=0;se<C.thumbRefs.length;se++){if(ee[se]===Q&&Math.sign(he)===1||ee[se]===$&&Math.sign(he)===-1)return;var q=ee[se]+he;q>Q?he=Q-ee[se]:q<$&&(he=$-ee[se])}for(var Pe=ee.slice(0),se=0;se<C.thumbRefs.length;se++)Pe=(0,l.replaceAt)(Pe,se,C.normalizeValue(ee[se]+he,se));C.setState({draggedTrackPos:[I,K]}),N(Pe)}}else{var fe=0;switch(B){case g.Direction.Right:fe=(I-me.left)/Me*(Q-$)+$;break;case g.Direction.Left:fe=(Me-(I-me.left))/Me*(Q-$)+$;break;case g.Direction.Down:fe=(K-me.top)/Me*(Q-$)+$;break;case g.Direction.Up:fe=(Me-(K-me.top))/Me*(Q-$)+$;break;default:(0,l.assertUnreachable)(B)}ue&&(fe=Q+$-fe),Math.abs(ee[X]-fe)>=Se/2&&N((0,l.replaceAt)(ee,X,C.normalizeValue(fe,X)))}},C.normalizeValue=function(I,K){var J=C.props,X=J.min,b=J.max,F=J.step,B=J.allowOverlap,$=J.values;return(0,l.normalizeValue)(I,K,X,b,F,B,$)},C.onEnd=function(I){if(I.preventDefault(),document.removeEventListener("mousemove",C.schdOnMouseMove),document.removeEventListener("touchmove",C.schdOnTouchMove),document.removeEventListener("mouseup",C.schdOnEnd),document.removeEventListener("touchend",C.schdOnEnd),document.removeEventListener("touchcancel",C.schdOnEnd),C.state.draggedThumbIndex===-1&&C.state.draggedTrackPos[0]===-1&&C.state.draggedTrackPos[1]===-1)return null;C.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},function(){C.fireOnFinalChange()})},C.fireOnFinalChange=function(){C.setState({isChanged:!1});var I=C.props,K=I.onFinalChange,J=I.values;K&&K(J)},C.updateMarkRefs=function(I){if(!I.renderMark){C.numOfMarks=void 0,C.markRefs=void 0;return}C.numOfMarks=(I.max-I.min)/C.props.step,C.markRefs=[];for(var K=0;K<C.numOfMarks+1;K++)C.markRefs[K]=_.createRef()},C.calculateMarkOffsets=function(){if(!(!C.props.renderMark||!C.trackRef||!C.numOfMarks||!C.markRefs||C.trackRef.current===null)){for(var I=window.getComputedStyle(C.trackRef.current),K=parseInt(I.width,10),J=parseInt(I.height,10),X=parseInt(I.paddingLeft,10),b=parseInt(I.paddingTop,10),F=[],B=0;B<C.numOfMarks+1;B++){var $=9999,Q=9999;if(C.markRefs[B].current){var N=C.markRefs[B].current.getBoundingClientRect();$=N.height,Q=N.width}C.props.direction===g.Direction.Left||C.props.direction===g.Direction.Right?F.push([Math.round(K/C.numOfMarks*B+X-Q/2),-Math.round(($-J)/2)]):F.push([Math.round(J/C.numOfMarks*B+b-$/2),-Math.round((Q-K)/2)])}C.setState({markOffsets:F})}},z.step===0)throw new Error('"step" property should be a positive number');return C.schdOnMouseMove=(0,l.schd)(C.onMouseMove),C.schdOnTouchMove=(0,l.schd)(C.onTouchMove),C.schdOnEnd=(0,l.schd)(C.onEnd),C.thumbRefs=z.values.map(function(){return _.createRef()}),C.updateMarkRefs(z),C}return R.prototype.componentDidMount=function(){var z=this,C=this.props,I=C.values,K=C.min,J=C.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",z.onResize)},unobserve:function(){return window.removeEventListener("resize",z.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),!this.props.allowOverlap&&(0,l.checkInitialOverlap)(this.props.values),this.props.values.forEach(function(X){return(0,l.checkBoundaries)(X,z.props.min,z.props.max)}),this.resizeObserver.observe(this.trackRef.current),(0,l.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),I.forEach(function(X){(0,l.isStepDivisible)(K,X,J)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})},R.prototype.componentDidUpdate=function(z,C){var I=this.props,K=I.max,J=I.min,X=I.step,b=I.values,F=I.rtl;(z.max!==K||z.min!==J||z.step!==X)&&this.updateMarkRefs(this.props),(0,l.translateThumbs)(this.getThumbs(),this.getOffsets(),F),(z.max!==K||z.min!==J||z.step!==X||C.markOffsets.length!==this.state.markOffsets.length)&&(this.calculateMarkOffsets(),b.forEach(function(B){(0,l.isStepDivisible)(J,B,X)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},R.prototype.componentWillUnmount=function(){var z={passive:!1};document.removeEventListener("mousedown",this.onMouseOrTouchStart,z),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},R.prototype.render=function(){var z=this,C=this.props,I=C.label,K=C.labelledBy,J=C.renderTrack,X=C.renderThumb,b=C.renderMark,F=b===void 0?function(){return null}:b,B=C.values,$=C.min,Q=C.max,N=C.allowOverlap,ee=C.disabled,Se=this.state,ue=Se.draggedThumbIndex,ge=Se.thumbZIndexes,me=Se.markOffsets;return J({props:{style:{transform:"scale(1)",cursor:ue>-1?"grabbing":this.props.draggableTrack?(0,l.isVertical)(this.props.direction)?"ns-resize":"ew-resize":B.length===1&&!ee?"pointer":"inherit"},onMouseDown:ee?l.voidFn:this.onMouseDownTrack,onTouchStart:ee?l.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:this.state.draggedThumbIndex>-1,disabled:ee,children:h(h([],me.map(function(Me,ce,O){return F({props:{style:z.props.direction===g.Direction.Left||z.props.direction===g.Direction.Right?{position:"absolute",left:"".concat(Me[0],"px"),marginTop:"".concat(Me[1],"px")}:{position:"absolute",top:"".concat(Me[0],"px"),marginLeft:"".concat(Me[1],"px")},key:"mark".concat(ce),ref:z.markRefs[ce]},index:ce})}),!0),B.map(function(Me,ce){var O=z.state.draggedThumbIndex===ce;return X({index:ce,value:Me,isDragged:O,props:{style:{position:"absolute",zIndex:ge[ce],cursor:ee?"inherit":O?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:ce,tabIndex:ee?void 0:0,"aria-valuemax":N?Q:B[ce+1]||Q,"aria-valuemin":N?$:B[ce-1]||$,"aria-valuenow":Me,draggable:!1,ref:z.thumbRefs[ce],"aria-label":I,"aria-labelledby":K,role:"slider",onKeyDown:ee?l.voidFn:z.onKeyDown,onKeyUp:ee?l.voidFn:z.onKeyUp}})}),!0)})},R.defaultProps={label:"Accessibility label",labelledBy:null,step:1,direction:g.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},R})(_.Component);return Range.default=E,Range}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,(function(t){var i=lib&&lib.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkValuesAgainstBoundaries=t.relativeValue=t.useThumbOverlap=t.Direction=t.getTrackBackground=t.Range=void 0;var s=i(requireRange());t.Range=s.default;var u=requireUtils();Object.defineProperty(t,"getTrackBackground",{enumerable:!0,get:function(){return u.getTrackBackground}}),Object.defineProperty(t,"useThumbOverlap",{enumerable:!0,get:function(){return u.useThumbOverlap}}),Object.defineProperty(t,"relativeValue",{enumerable:!0,get:function(){return u.relativeValue}}),Object.defineProperty(t,"checkValuesAgainstBoundaries",{enumerable:!0,get:function(){return u.checkValuesAgainstBoundaries}});var h=requireTypes();Object.defineProperty(t,"Direction",{enumerable:!0,get:function(){return h.Direction}})})(lib)),lib}var libExports=requireLib();const inputOverride=`w-12 text-center bg-transparent border-none outline-none p-0
             [&::-webkit-inner-spin-button]:appearance-none
             [&::-webkit-outer-spin-button]:appearance-none
             [-moz-appearance:textfield]`,sliderBgStyle="flex-1 h-2 bg-gray-300 rounded relative",sliderFgStyle="absolute h-2 bg-blue-500 rounded",sliderThumbStyle="w-4.5 h-4.5 bg-slate-100 border-2 border-slate-400 rounded-full transition-transform transform origin-center hover:scale-125";function RangeSlider({title:t,value:i,onChange:s,min:u,max:h}){const[_,l]=reactExports.useState(i.map(String));reactExports.useEffect(()=>{l(i.map(String))},[i]);const g=(y,E)=>{l(R=>{const z=[...R];return z[y]=E,z});const v=parseFloat(E);if(!isNaN(v)){let R=[...i];y===0?R[0]=Math.min(Math.max(v,u),i[1]):R[1]=Math.max(Math.min(v,h),i[0]),s(R)}},d=y=>{const E=parseFloat(_[y]);isNaN(E)&&l(v=>{const R=[...v];return R[y]=String(i[y]),R})};return jsxRuntimeExports.jsxs("div",{className:`${textNormal} p-2  pt-4`,children:[jsxRuntimeExports.jsx("label",{className:"block",children:t}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2.5 items-center",children:[jsxRuntimeExports.jsx("input",{type:"number",value:_[0],placeholder:u,min:u,max:i[1],onChange:y=>g(0,y.target.value),onBlur:()=>d(0),className:inputOverride}),jsxRuntimeExports.jsx(libExports.Range,{step:1,min:u,max:h,values:i,onChange:s,renderTrack:({props:y,children:E})=>jsxRuntimeExports.jsxs("div",{...y,className:sliderBgStyle,children:[jsxRuntimeExports.jsx("div",{className:sliderFgStyle,style:{left:`${(i[0]-u)/(h-u)*100}%`,width:`${(i[1]-i[0])/(h-u)*100}%`}}),E]}),renderThumb:({props:y})=>jsxRuntimeExports.jsx("div",{...y,className:"relative w-5 h-5 flex items-center",children:jsxRuntimeExports.jsx("div",{className:sliderThumbStyle})})}),jsxRuntimeExports.jsx("input",{type:"number",value:_[1],placeholder:h,min:i[0],max:h,onChange:y=>g(1,y.target.value),onBlur:()=>d(1),className:`${inputOverride} ${textSmall}`})]})]})}function buildQueryString(t,i,s,u,h){const _=[],l=[],g=[];for(const[d,y]of Object.entries(s))y===1&&l.push(d),y===2&&g.push(d);return g.length&&_.push(`NOT elements HAS ANY ${g.map(d=>`"${d}"`).join(", ")}`),l.length&&_.push(`elements HAS ALL ${l.map(d=>`"${d}"`).join(", ")}`),u[0]!==t[0]&&_.push(`nelements>=${u[0]}`),u[1]!==t[1]&&_.push(`nelements<=${u[1]}`),h[0]!==i[0]&&_.push(`nsites>=${h[0]}`),h[1]!==i[1]&&_.push(`nsites<=${h[1]}`),_.join(" AND ")}function OptimadeFilters({queryUrl:t,initialFilter:i,onSubmit:s}){const[u,h]=reactExports.useState([1,118]),[_,l]=reactExports.useState([1,1e3]),[g,d]=reactExports.useState({}),[y,E]=reactExports.useState(!1),[v,R]=reactExports.useState(i||""),z=buildQueryString([1,118],[1,1e3],g,u,_),C=y?v:z,I=()=>{s(C)},K=()=>{E(J=>!J),y||(R(z),d({}),h([1,118]),l([1,1e3]))};return reactExports.useEffect(()=>{i&&R(i)},[i]),jsxRuntimeExports.jsxs("div",{className:"pb-4 space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:y?"opacity-50 pointer-events-none":"",children:[jsxRuntimeExports.jsx(PTable,{providerUrl:t,selected:g,onSelectionChange:J=>d(X=>({...X,...J}))}),jsxRuntimeExports.jsx(RangeSlider,{title:"Number of elements",value:u,onChange:h,min:1,max:118}),jsxRuntimeExports.jsx(RangeSlider,{title:"Number of sites",value:_,onChange:l,min:0,max:1e3})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("input",{id:"manual-mode-toggle",type:"checkbox",checked:y,onChange:K,className:"hover:cursor-pointer h-4 w-4"}),jsxRuntimeExports.jsx("label",{htmlFor:"manual-mode-toggle",className:`${textSmall} text-gray-700 select-none`,children:"Unlock custom query"})]}),jsxRuntimeExports.jsx(QueryTextBox,{value:C,onChange:y?R:()=>{},onSubmit:I})]})}const sectionclassName="space-y-2";function OptimadeFAQs(){const[t,i]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:`${containerStyle} ${textSmall} [&>p]:pl-4 [&>section>p]:pl-1`,children:[jsxRuntimeExports.jsxs("section",{className:sectionclassName,children:[jsxRuntimeExports.jsxs("p",{children:["The Materials Cloud OPTIMADE Client is a tool to search through databases exposing an"," ",jsxRuntimeExports.jsx("a",{href:"https://www.optimade.org/",target:"_blank",className:textHyperlink,rel:"noopener noreferrer",children:"OPTIMADE RESTful API"}),". All providers are retrieved from the"," ",jsxRuntimeExports.jsx("a",{href:"https://providers.optimade.org/",target:"_blank",className:textHyperlink,rel:"noopener noreferrer",children:"official OPTIMADE consortium's list"}),"."]}),jsxRuntimeExports.jsxs("button",{className:`flex items-center px-2 mt-2 mb-1 ${textHyperlink} hover:cursor-pointer`,onClick:()=>i(!t),children:[jsxRuntimeExports.jsx("span",{className:textHyperlink,children:t?"Hide additional Info":"More info"}),jsxRuntimeExports.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${t?"rotate-90":"rotate-0"}`,fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]}),t&&jsxRuntimeExports.jsxs("section",{className:sectionclassName,children:[jsxRuntimeExports.jsx("h1",{className:textLarge,children:"Frequently asked questions"}),jsxRuntimeExports.jsx("h4",{className:textNormal,children:"Why is a given provider not shown in the client?"}),jsxRuntimeExports.jsxs("p",{children:["This webapp has filtered some providers for various reasons; some do not support open queries and others have no link to a meta-database. To check the validity of a particular provider visit"," ",jsxRuntimeExports.jsx("a",{href:"https://optimade.org/providers-dashboard/",target:"_blank",className:textHyperlink,rel:"noopener noreferrer",children:"the providers dashboard"}),". Querying of missing providers should still be possible through the 'Custom endpoint' method."]}),jsxRuntimeExports.jsx("h4",{className:textNormal,children:"Why does the structure visualiser not work for some structures?"}),jsxRuntimeExports.jsx("p",{children:"The visualiser is fairly primitive and the OPTIMADE specification is very broad. For complex structure data (assemblies, unknown positions, or partial occupancies), the JSON response is still fetched but the visualisation often fails."}),jsxRuntimeExports.jsxs("p",{className:"italic",children:["An earlier version of this tool was developed by Casper Welzel Andersen. See the source code"," ",jsxRuntimeExports.jsx("a",{href:"https://github.com/CasperWA/voila-optimade-client",target:"_blank",className:textHyperlink,rel:"noopener noreferrer",children:"here."})]})]})]})}const isBoolean=t=>typeof t=="boolean"||t instanceof Boolean,isNumber=t=>typeof t=="number"||t instanceof Number,isBigInt=t=>typeof t=="bigint"||t instanceof BigInt,isDate=t=>!!t&&t instanceof Date,isString=t=>typeof t=="string"||t instanceof String,isArray=t=>Array.isArray(t),isObject$1=t=>typeof t=="object"&&t!==null,isFunction=t=>!!t&&t instanceof Object&&typeof t=="function";function quoteString(t,i){return i===void 0&&(i=!1),!t||i?`"${t}"`:t}function quoteStringValue(t,i,s){return s?JSON.stringify(t):i?`"${t}"`:t}function ExpandableObject(t){let{field:i,value:s,data:u,lastElement:h,openBracket:_,closeBracket:l,level:g,style:d,shouldExpandNode:y,clickToExpandNode:E,outerRef:v,beforeExpandChange:R}=t;const z=reactExports.useRef(!1),[C,I]=reactExports.useState(()=>y(g,s,i)),K=reactExports.useRef(null);reactExports.useEffect(()=>{z.current?I(y(g,s,i)):z.current=!0},[y]);const J=reactExports.useId();if(u.length===0)return EmptyObject({field:i,openBracket:_,closeBracket:l,lastElement:h,style:d});const X=C?d.collapseIcon:d.expandIcon,b=C?d.ariaLables.collapseJson:d.ariaLables.expandJson,F=g+1,B=u.length-1,$=ee=>{C!==ee&&(!R||R({level:g,value:s,field:i,newExpandValue:ee}))&&I(ee)},Q=ee=>{if(ee.key==="ArrowRight"||ee.key==="ArrowLeft")ee.preventDefault(),$(ee.key==="ArrowRight");else if(ee.key==="ArrowUp"||ee.key==="ArrowDown"){ee.preventDefault();const Se=ee.key==="ArrowUp"?-1:1;if(!v.current)return;const ue=v.current.querySelectorAll("[role=button]");let ge=-1;for(let Me=0;Me<ue.length;Me++)if(ue[Me].tabIndex===0){ge=Me;break}if(ge<0)return;const me=(ge+Se+ue.length)%ue.length;ue[ge].tabIndex=-1,ue[me].tabIndex=0,ue[me].focus()}},N=()=>{var ee;$(!C);const Se=K.current;if(!Se)return;const ue=(ee=v.current)===null||ee===void 0?void 0:ee.querySelector('[role=button][tabindex="0"]');ue&&(ue.tabIndex=-1),Se.tabIndex=0,Se.focus()};return reactExports.createElement("div",{className:d.basicChildStyle,role:"treeitem","aria-expanded":C,"aria-selected":void 0},reactExports.createElement("span",{className:X,onClick:N,onKeyDown:Q,role:"button","aria-label":b,"aria-expanded":C,"aria-controls":C?J:void 0,ref:K,tabIndex:g===0?0:-1}),(i||i==="")&&(E?reactExports.createElement("span",{className:d.clickableLabel,onClick:N,onKeyDown:Q},quoteString(i,d.quotesForFieldNames),":"):reactExports.createElement("span",{className:d.label},quoteString(i,d.quotesForFieldNames),":")),reactExports.createElement("span",{className:d.punctuation},_),C?reactExports.createElement("ul",{id:J,role:"group",className:d.childFieldsContainer},u.map((ee,Se)=>reactExports.createElement(DataRender,{key:ee[0]||Se,field:ee[0],value:ee[1],style:d,lastElement:Se===B,level:F,shouldExpandNode:y,clickToExpandNode:E,beforeExpandChange:R,outerRef:v}))):reactExports.createElement("span",{className:d.collapsedContent,onClick:N,onKeyDown:Q}),reactExports.createElement("span",{className:d.punctuation},l),!h&&reactExports.createElement("span",{className:d.punctuation},","))}function EmptyObject(t){let{field:i,openBracket:s,closeBracket:u,lastElement:h,style:_}=t;return reactExports.createElement("div",{className:_.basicChildStyle,role:"treeitem","aria-selected":void 0},(i||i==="")&&reactExports.createElement("span",{className:_.label},quoteString(i,_.quotesForFieldNames),":"),reactExports.createElement("span",{className:_.punctuation},s),reactExports.createElement("span",{className:_.punctuation},u),!h&&reactExports.createElement("span",{className:_.punctuation},","))}function JsonObject(t){let{field:i,value:s,style:u,lastElement:h,shouldExpandNode:_,clickToExpandNode:l,level:g,outerRef:d,beforeExpandChange:y}=t;return ExpandableObject({field:i,value:s,lastElement:h||!1,level:g,openBracket:"{",closeBracket:"}",style:u,shouldExpandNode:_,clickToExpandNode:l,data:Object.keys(s).map(E=>[E,s[E]]),outerRef:d,beforeExpandChange:y})}function JsonArray(t){let{field:i,value:s,style:u,lastElement:h,level:_,shouldExpandNode:l,clickToExpandNode:g,outerRef:d,beforeExpandChange:y}=t;return ExpandableObject({field:i,value:s,lastElement:h||!1,level:_,openBracket:"[",closeBracket:"]",style:u,shouldExpandNode:l,clickToExpandNode:g,data:s.map(E=>[void 0,E]),outerRef:d,beforeExpandChange:y})}function JsonPrimitiveValue(t){let{field:i,value:s,style:u,lastElement:h}=t,_,l=u.otherValue;return s===null?(_="null",l=u.nullValue):s===void 0?(_="undefined",l=u.undefinedValue):isString(s)?(_=quoteStringValue(s,!u.noQuotesForStringValues,u.stringifyStringValues),l=u.stringValue):isBoolean(s)?(_=s?"true":"false",l=u.booleanValue):isNumber(s)?(_=s.toString(),l=u.numberValue):isBigInt(s)?(_=`${s.toString()}n`,l=u.numberValue):isDate(s)?_=s.toISOString():isFunction(s)?_="function() { }":_=s.toString(),reactExports.createElement("div",{className:u.basicChildStyle,role:"treeitem","aria-selected":void 0},(i||i==="")&&reactExports.createElement("span",{className:u.label},quoteString(i,u.quotesForFieldNames),":"),reactExports.createElement("span",{className:l},_),!h&&reactExports.createElement("span",{className:u.punctuation},","))}function DataRender(t){const i=t.value;return isArray(i)?reactExports.createElement(JsonArray,Object.assign({},t)):isObject$1(i)&&!isDate(i)&&!isFunction(i)?reactExports.createElement(JsonObject,Object.assign({},t)):reactExports.createElement(JsonPrimitiveValue,Object.assign({},t))}var styles={"container-light":"_2IvMF _GzYRV","basic-element-style":"_2bkNM","child-fields-container":"_1BXBN","label-light":"_1MGIk","clickable-label-light":"_2YKJg _1MGIk _1MFti","punctuation-light":"_3uHL6 _3eOF8","value-null-light":"_2T6PJ","value-undefined-light":"_1Gho6","value-string-light":"_vGjyY","value-number-light":"_1bQdo","value-boolean-light":"_3zQKs","value-other-light":"_1xvuR","collapse-icon-light":"_oLqym _f10Tu _1MFti _1LId0","expand-icon-light":"_2AXVT _f10Tu _1MFti _1UmXx","collapsed-content-light":"_2KJWg _1pNG9 _1MFti"};const defaultAriaLables={collapseJson:"collapse JSON",expandJson:"expand JSON"},defaultStyles={container:styles["container-light"],basicChildStyle:styles["basic-element-style"],childFieldsContainer:styles["child-fields-container"],label:styles["label-light"],clickableLabel:styles["clickable-label-light"],nullValue:styles["value-null-light"],undefinedValue:styles["value-undefined-light"],stringValue:styles["value-string-light"],booleanValue:styles["value-boolean-light"],numberValue:styles["value-number-light"],otherValue:styles["value-other-light"],punctuation:styles["punctuation-light"],collapseIcon:styles["collapse-icon-light"],expandIcon:styles["expand-icon-light"],collapsedContent:styles["collapsed-content-light"],noQuotesForStringValues:!1,quotesForFieldNames:!1,ariaLables:defaultAriaLables,stringifyStringValues:!1},allExpanded=()=>!0,JsonView=t=>{let{data:i,style:s=defaultStyles,shouldExpandNode:u=allExpanded,clickToExpandNode:h=!1,beforeExpandChange:_,compactTopLevel:l,...g}=t;const d=reactExports.useRef(null);return reactExports.createElement("div",Object.assign({"aria-label":"JSON view"},g,{className:s.container,ref:d,role:"tree"}),l&&isObject$1(i)?Object.entries(i).map(y=>{let[E,v]=y;return reactExports.createElement(DataRender,{key:E,field:E,value:v,style:{...defaultStyles,...s},lastElement:!0,level:1,shouldExpandNode:u,clickToExpandNode:h,beforeExpandChange:_,outerRef:d})}):reactExports.createElement(DataRender,{value:i,style:{...defaultStyles,...s},lastElement:!0,level:0,shouldExpandNode:u,clickToExpandNode:h,outerRef:d,beforeExpandChange:_}))},ControlBox=({viewerParams:t,onViewerParamChange:i,onViewerEvent:s})=>{const u=(l,g)=>{let d=t.supercell;d[l]=parseInt(g),i("supercell",d)},h=l=>{i(l,!t[l])},_=l=>{s("camera",l)};return jsxRuntimeExports.jsxs("div",{className:"control-box",children:[jsxRuntimeExports.jsxs("div",{className:"control-box-row",children:[jsxRuntimeExports.jsxs("div",{className:"supercell-container",children:[jsxRuntimeExports.jsx("label",{children:"Supercell: "}),jsxRuntimeExports.jsx("div",{style:{display:"flex"},children:[0,1,2].map(l=>jsxRuntimeExports.jsx("input",{className:"supercell-input",type:"number",min:"1",max:"99",value:t.supercell[l],onChange:g=>u(l,g.target.value)},l))})]}),jsxRuntimeExports.jsxs("div",{className:"camera-controls",children:[jsxRuntimeExports.jsx("label",{children:"Camera: "}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>_("x"),children:"x"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>_("y"),children:"y"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>_("z"),children:"z"})]})]}),jsxRuntimeExports.jsxs("div",{className:"control-box-row",style:{display:"flex"},children:[jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:t.bonds,onChange:()=>h("bonds")}),jsxRuntimeExports.jsx("span",{children:"Bonds"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:t.packedCell,onChange:()=>h("packedCell")}),jsxRuntimeExports.jsx("span",{children:"Packed cell"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:t.atomLabels,onChange:()=>h("atomLabels")}),jsxRuntimeExports.jsx("span",{children:"Atom labels"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:t.spaceFilling,onChange:()=>h("vdwRadius")}),jsxRuntimeExports.jsx("span",{children:"vdW radius"})]})]})]})};var _3DmolMin={exports:{}};var hasRequired_3DmolMin;function require_3DmolMin(){return hasRequired_3DmolMin||(hasRequired_3DmolMin=1,(function(module,exports$1){var factory;factory=()=>(()=>{var __webpack_modules__={3:(t,i,s)=>{var u=s(663),h=s(981),_=s(972),l=s(681),g=s(834),d=s(746),y=s(670),E=Object.prototype.toString;function v(z){if(!(this instanceof v))return new v(z);this.options=h.assign({chunkSize:16384,windowBits:0,to:""},z||{});var C=this.options;C.raw&&C.windowBits>=0&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),!(C.windowBits>=0&&C.windowBits<16)||z&&z.windowBits||(C.windowBits+=32),C.windowBits>15&&C.windowBits<48&&(15&C.windowBits||(C.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var I=u.inflateInit2(this.strm,C.windowBits);if(I!==l.Z_OK)throw new Error(g[I]);if(this.header=new y,u.inflateGetHeader(this.strm,this.header),C.dictionary&&(typeof C.dictionary=="string"?C.dictionary=_.string2buf(C.dictionary):E.call(C.dictionary)==="[object ArrayBuffer]"&&(C.dictionary=new Uint8Array(C.dictionary)),C.raw&&(I=u.inflateSetDictionary(this.strm,C.dictionary))!==l.Z_OK))throw new Error(g[I])}function R(z,C){var I=new v(C);if(I.push(z,!0),I.err)throw I.msg||g[I.err];return I.result}v.prototype.push=function(z,C){var I,K,J,X,b,F=this.strm,B=this.options.chunkSize,$=this.options.dictionary,Q=!1;if(this.ended)return!1;K=C===~~C?C:C===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof z=="string"?F.input=_.binstring2buf(z):E.call(z)==="[object ArrayBuffer]"?F.input=new Uint8Array(z):F.input=z,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new h.Buf8(B),F.next_out=0,F.avail_out=B),(I=u.inflate(F,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&$&&(I=u.inflateSetDictionary(this.strm,$)),I===l.Z_BUF_ERROR&&Q===!0&&(I=l.Z_OK,Q=!1),I!==l.Z_STREAM_END&&I!==l.Z_OK)return this.onEnd(I),this.ended=!0,!1;F.next_out&&(F.avail_out!==0&&I!==l.Z_STREAM_END&&(F.avail_in!==0||K!==l.Z_FINISH&&K!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(J=_.utf8border(F.output,F.next_out),X=F.next_out-J,b=_.buf2string(F.output,J),F.next_out=X,F.avail_out=B-X,X&&h.arraySet(F.output,F.output,J,X,0),this.onData(b)):this.onData(h.shrinkBuf(F.output,F.next_out)))),F.avail_in===0&&F.avail_out===0&&(Q=!0)}while((F.avail_in>0||F.avail_out===0)&&I!==l.Z_STREAM_END);return I===l.Z_STREAM_END&&(K=l.Z_FINISH),K===l.Z_FINISH?(I=u.inflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===l.Z_OK):K!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),F.avail_out=0,!0)},v.prototype.onData=function(z){this.chunks.push(z)},v.prototype.onEnd=function(z){z===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=z,this.msg=this.strm.msg},i.Inflate=v,i.inflate=R,i.inflateRaw=function(z,C){return(C=C||{}).raw=!0,R(z,C)},i.ungzip=R},16:(t,i,s)=>{s.r(i),s.d(i,{CAP:()=>u,CC:()=>y.CC,CONTEXTS_PER_VIEWPORT:()=>Ot,Color:()=>y.Color,CustomLinear:()=>E.CustomLinear,Cylinder:()=>g.Cylinder,GLDraw:()=>h,GLModel:()=>ur,GLShape:()=>Le,GLViewer:()=>Zt,GLVolumetricRender:()=>Pt,Gradient:()=>E.Gradient,GradientType:()=>E.GradientType,Label:()=>Rt,LabelCount:()=>lt,MarchingCube:()=>S,MarchingCubeInitializer:()=>Bt,Matrix3:()=>d.Matrix3,Matrix4:()=>d.Matrix4,Parsers:()=>zt,PausableTimer:()=>v.PausableTimer,PointGrid:()=>ne,ProteinSurface:()=>xe,Quaternion:()=>d.Quaternion,ROYGB:()=>E.ROYGB,RWB:()=>E.RWB,Ray:()=>d.Ray,Sinebow:()=>E.Sinebow,Sphere:()=>g.Sphere,SurfaceType:()=>Gr,Triangle:()=>g.Triangle,Vector2:()=>d.Vector2,Vector3:()=>d.Vector3,VolumeData:()=>Ve.VolumeData,adjustVolumeStyle:()=>v.adjustVolumeStyle,applyPartialCharges:()=>ri,autoinit:()=>_r,autoload:()=>Ri,base64ToArray:()=>v.base64ToArray,bondLength:()=>Fe.bondLength,builtinColorSchemes:()=>y.builtinColorSchemes,builtinGradients:()=>E.builtinGradients,chains:()=>y.chains,clamp:()=>d.clamp,conversionMatrix3:()=>d.conversionMatrix3,createStereoViewer:()=>Ur,createViewer:()=>Cr,createViewerGrid:()=>Ar,deepCopy:()=>v.deepCopy,degToRad:()=>d.degToRad,download:()=>v.download,drawCartoon:()=>ge,elementColors:()=>y.elementColors,extend:()=>v.extend,get:()=>v.get,getAtomProperty:()=>v.getAtomProperty,getColorFromStyle:()=>v.getColorFromStyle,getElement:()=>v.getElement,getExtent:()=>v.getExtent,getGradient:()=>E.getGradient,getPropertyRange:()=>v.getPropertyRange,getbin:()=>v.getbin,htmlColors:()=>y.htmlColors,inflateString:()=>v.inflateString,isEmptyObject:()=>v.isEmptyObject,isNumeric:()=>v.isNumeric,makeFunction:()=>v.makeFunction,mergeGeos:()=>v.mergeGeos,normalizeValue:()=>E.normalizeValue,partialCharges:()=>Qt,processing_autoinit:()=>Or,residues:()=>y.residues,setBondLength:()=>Fe.setBondLength,setSyncSurface:()=>qi,specStringToObject:()=>v.specStringToObject,splitMesh:()=>yt,ssColors:()=>y.ssColors,subdivide_spline:()=>R,syncSurface:()=>Kr,viewers:()=>wr});var u,h,_=s(111),l=s(378),g=s(99),d=s(529),y=s(222);(function(ae){ae[ae.NONE=0]="NONE",ae[ae.FLAT=1]="FLAT",ae[ae.ROUND=2]="ROUND"})(u||(u={})),(function(ae){function n(f,T,x){var M,k,A,P,L,W=Math.hypot(f,T);W<1e-4?(k=0,A=1):(k=-f/W,A=T/W),T=-k*f+A*T,(M=Math.hypot(T,x))<1e-4?(P=0,L=1):(P=x/M,L=T/M);var U=new Float32Array(9);return U[0]=A,U[1]=k,U[2]=0,U[3]=-k*L,U[4]=A*L,U[5]=P,U[6]=k*P,U[7]=-A*P,U[8]=L,U}var o=new class{constructor(){this.cache={};let f,T=[],x=Math.pow(2,4),M=2,k=Math.pow(2,M),A=x/k;for(T[0]=new d.Vector3(-1,0,0),T[A]=new d.Vector3(0,0,1),T[2*A]=new d.Vector3(1,0,0),T[3*A]=new d.Vector3(0,0,-1),M=3;M<=4;M++){for(k=Math.pow(2,M-1),A=x/k,f=0;f<k-1;f++)T[A/2+f*A]=T[f*A].clone().add(T[(f+1)*A]).normalize();f=k-1,T[A/2+f*A]=T[f*A].clone().add(T[0]).normalize()}this.basisVectors=T}getVerticesForRadius(f,T,x){if(this.cache!==void 0&&this.cache[f]!==void 0&&this.cache[f][T+x]!==void 0)return this.cache[f][T+x];for(var M,k=this.basisVectors.length,A=[],P=[],L=0;L<k;L++)A.push(this.basisVectors[L].clone().multiplyScalar(f)),A.push(this.basisVectors[L].clone().multiplyScalar(f)),M=this.basisVectors[L].clone().normalize(),P.push(M),P.push(M);var W,U,V=[],H=10,G=k,Z=2*Math.PI,te=Math.PI,re=!1,de=!1;for(U=0;U<=H;U++){re=U===0||U===H,de=U===5;var le=[],ye=[];for(W=0;W<=G;W++)if(de){var ke=W<G?2*W:0;ye.push(ke+1),le.push(ke)}else{var Te=W/G,Re=U/H;if(re&&W!==0)re&&le.push(A.length-1);else if(W<G){var we=new d.Vector3;we.x=-f*Math.cos(0+Te*Z)*Math.sin(0+Re*te),we.y=T==1?0:f*Math.cos(0+Re*te),we.z=f*Math.sin(0+Te*Z)*Math.sin(0+Re*te),Math.abs(we.x)<1e-5&&(we.x=0),Math.abs(we.y)<1e-5&&(we.y=0),Math.abs(we.z)<1e-5&&(we.z=0),T==u.FLAT?(M=new d.Vector3(0,Math.cos(0+Re*te),0)).normalize():(M=new d.Vector3(we.x,we.y,we.z)).normalize(),A.push(we),P.push(M),le.push(A.length-1)}else le.push(A.length-G)}de&&V.push(ye),V.push(le)}var Ue={vertices:A,normals:P,verticesRows:V,w:G,h:H};return f in this.cache||(this.cache[f]={}),this.cache[f][T+x]=Ue,Ue}};ae.drawCylinder=function(f,T,x,M,k,A=0,P=0){if(!T||!x)return;let L=function(_e){if(typeof _e=="string"){let ve=_e;return ve.toLowerCase()=="flat"?u.FLAT:ve.toLowerCase()=="round"?u.ROUND:u.NONE}return _e};A=L(A);var W=(P=L(P))||A;k=k||{r:0,g:0,b:0};var U,V,H,G,Z,te,re=n(x.x-T.x,x.y-T.y,x.z-T.z),de=o.getVerticesForRadius(M,P,"to"),le=de.w,ye=de.h,ke=W?ye*le+2:2*le,Te=f.updateGeoGroup(ke),Re=de.vertices,we=de.normals,Ue=de.verticesRows,Je=Ue[ye/2],tt=Ue[ye/2+1],Ze=Te.vertices,ut=Te.vertexArray,ft=Te.normalArray,Qe=Te.colorArray,pt=Te.faceArray;for(H=0;H<le;++H){var Be=2*H;G=re[0]*Re[Be].x+re[3]*Re[Be].y+re[6]*Re[Be].z,Z=re[1]*Re[Be].x+re[4]*Re[Be].y+re[7]*Re[Be].z,te=re[5]*Re[Be].y+re[8]*Re[Be].z,U=3*(Ze+Be),V=Te.faceidx,ut[U]=G+T.x,ut[U+1]=Z+T.y,ut[U+2]=te+T.z,ut[U+3]=G+x.x,ut[U+4]=Z+x.y,ut[U+5]=te+x.z,ft[U]=G,ft[U+3]=G,ft[U+1]=Z,ft[U+4]=Z,ft[U+2]=te,ft[U+5]=te,Qe[U]=k.r,Qe[U+3]=k.r,Qe[U+1]=k.g,Qe[U+4]=k.g,Qe[U+2]=k.b,Qe[U+5]=k.b,pt[V]=tt[H]+Ze,pt[V+1]=tt[H+1]+Ze,pt[V+2]=Je[H]+Ze,pt[V+3]=Je[H]+Ze,pt[V+4]=tt[H+1]+Ze,pt[V+5]=Je[H+1]+Ze,Te.faceidx+=6}if(W){var et,St,st,wt,Et,it,kt,Ht,Mt,ct,Jt,Nt,qt,Vt,Xt,yr,Fr,Tr,ii,Wr,br,$r,ci,ni,hi,Ii,xi,zi,Hr,Xr,qr,ei,m=A?ye+1:ye/2+1;for(Z=P?0:ye/2;Z<m;Z++)if(Z!==ye/2){var Y=Z<=ye/2?x:T,w=o.getVerticesForRadius(M,P,"to"),be=o.getVerticesForRadius(M,A,"from");for(Y===x?(Re=w.vertices,we=w.normals,Ue=w.verticesRows):Y==T&&(Re=be.vertices,we=be.normals,Ue=be.verticesRows),G=0;G<le;G++)V=Te.faceidx,Hr=3*((et=Ue[Z][G+1])+Ze),Xr=3*((St=Ue[Z][G])+Ze),qr=3*((st=Ue[Z+1][G])+Ze),ei=3*((wt=Ue[Z+1][G+1])+Ze),Et=re[0]*Re[et].x+re[3]*Re[et].y+re[6]*Re[et].z,it=re[0]*Re[St].x+re[3]*Re[St].y+re[6]*Re[St].z,kt=re[0]*Re[st].x+re[3]*Re[st].y+re[6]*Re[st].z,Ht=re[0]*Re[wt].x+re[3]*Re[wt].y+re[6]*Re[wt].z,Mt=re[1]*Re[et].x+re[4]*Re[et].y+re[7]*Re[et].z,ct=re[1]*Re[St].x+re[4]*Re[St].y+re[7]*Re[St].z,Jt=re[1]*Re[st].x+re[4]*Re[st].y+re[7]*Re[st].z,Nt=re[1]*Re[wt].x+re[4]*Re[wt].y+re[7]*Re[wt].z,qt=re[5]*Re[et].y+re[8]*Re[et].z,Vt=re[5]*Re[St].y+re[8]*Re[St].z,Xt=re[5]*Re[st].y+re[8]*Re[st].z,yr=re[5]*Re[wt].y+re[8]*Re[wt].z,ut[Hr]=Et+Y.x,ut[Xr]=it+Y.x,ut[qr]=kt+Y.x,ut[ei]=Ht+Y.x,ut[Hr+1]=Mt+Y.y,ut[Xr+1]=ct+Y.y,ut[qr+1]=Jt+Y.y,ut[ei+1]=Nt+Y.y,ut[Hr+2]=qt+Y.z,ut[Xr+2]=Vt+Y.z,ut[qr+2]=Xt+Y.z,ut[ei+2]=yr+Y.z,Qe[Hr]=k.r,Qe[Xr]=k.r,Qe[qr]=k.r,Qe[ei]=k.r,Qe[Hr+1]=k.g,Qe[Xr+1]=k.g,Qe[qr+1]=k.g,Qe[ei+1]=k.g,Qe[Hr+2]=k.b,Qe[Xr+2]=k.b,Qe[qr+2]=k.b,Qe[ei+2]=k.b,Fr=re[0]*we[et].x+re[3]*we[et].y+re[6]*we[et].z,Tr=re[0]*we[St].x+re[3]*we[St].y+re[6]*we[St].z,ii=re[0]*we[st].x+re[3]*we[st].y+re[6]*we[st].z,Wr=re[0]*we[wt].x+re[3]*we[wt].y+re[6]*we[wt].z,br=re[1]*we[et].x+re[4]*we[et].y+re[7]*we[et].z,$r=re[1]*we[St].x+re[4]*we[St].y+re[7]*we[St].z,ci=re[1]*we[st].x+re[4]*we[st].y+re[7]*we[st].z,ni=re[1]*we[wt].x+re[4]*we[wt].y+re[7]*we[wt].z,hi=re[5]*we[et].y+re[8]*we[et].z,Ii=re[5]*we[St].y+re[8]*we[St].z,xi=re[5]*we[st].y+re[8]*we[st].z,zi=re[5]*we[wt].y+re[8]*we[wt].z,Z===0?(ft[Hr]=Fr,ft[qr]=ii,ft[ei]=Wr,ft[Hr+1]=br,ft[qr+1]=ci,ft[ei+1]=ni,ft[Hr+2]=hi,ft[qr+2]=xi,ft[ei+2]=zi,pt[V]=et+Ze,pt[V+1]=st+Ze,pt[V+2]=wt+Ze,Te.faceidx+=3):Z===m-1?(ft[Hr]=Fr,ft[Xr]=Tr,ft[qr]=ii,ft[Hr+1]=br,ft[Xr+1]=$r,ft[qr+1]=ci,ft[Hr+2]=hi,ft[Xr+2]=Ii,ft[qr+2]=xi,pt[V]=et+Ze,pt[V+1]=St+Ze,pt[V+2]=st+Ze,Te.faceidx+=3):(ft[Hr]=Fr,ft[Xr]=Tr,ft[ei]=Wr,ft[Hr+1]=br,ft[Xr+1]=$r,ft[ei+1]=ni,ft[Hr+2]=hi,ft[Xr+2]=Ii,ft[ei+2]=zi,ft[Xr]=Tr,ft[qr]=ii,ft[ei]=Wr,ft[Xr+1]=$r,ft[qr+1]=ci,ft[ei+1]=ni,ft[Xr+2]=Ii,ft[qr+2]=xi,ft[ei+2]=zi,pt[V]=et+Ze,pt[V+1]=St+Ze,pt[V+2]=wt+Ze,pt[V+3]=St+Ze,pt[V+4]=st+Ze,pt[V+5]=wt+Ze,Te.faceidx+=6)}}Te.vertices+=ke},ae.drawCone=function(f,T,x,M,k){if(!T||!x)return;k=k||{r:0,g:0,b:0};let A=new d.Vector3(x.x-T.x,x.y-T.y,x.z-T.z);var P=n(A.x,A.y,A.z);A=A.normalize();var L,W,U,V,H,G,Z=o.basisVectors.length,te=o.basisVectors,re=Z+2,de=f.updateGeoGroup(re),le=de.vertices,ye=de.vertexArray,ke=de.normalArray,Te=de.colorArray,Re=de.faceArray;for(ye[L=3*le]=T.x,ye[L+1]=T.y,ye[L+2]=T.z,ke[L]=-A.x,ke[L+1]=-A.y,ke[L+2]=-A.z,Te[L]=k.r,Te[L+1]=k.g,Te[L+2]=k.b,ye[L+3]=x.x,ye[L+4]=x.y,ye[L+5]=x.z,ke[L+3]=A.x,ke[L+4]=A.y,ke[L+5]=A.z,Te[L+3]=k.r,Te[L+4]=k.g,Te[L+5]=k.b,L+=6,U=0;U<Z;++U){var we=te[U].clone();we.multiplyScalar(M),V=P[0]*we.x+P[3]*we.y+P[6]*we.z,H=P[1]*we.x+P[4]*we.y+P[7]*we.z,G=P[5]*we.y+P[8]*we.z,ye[L]=V+T.x,ye[L+1]=H+T.y,ye[L+2]=G+T.z,ke[L]=V,ke[L+1]=H,ke[L+2]=G,Te[L]=k.r,Te[L+1]=k.g,Te[L+2]=k.b,L+=3}for(de.vertices+=Z+2,W=de.faceidx,U=0;U<Z;U++){var Ue=le+2+U,Je=le+2+(U+1)%Z;Re[W]=Ue,Re[W+1]=Je,Re[W+2]=le,Re[W+=3]=Ue,Re[W+1]=Je,Re[W+2]=le+1,W+=3}de.faceidx+=6*Z};var c=new class{constructor(){this.cache=new Map}getVerticesForRadius(f,T){T=T||2,this.cache.has(T)||this.cache.set(T,new Map);let x=this.cache.get(T);if(x.has(f))return x.get(f);var M={vertices:[],verticesRows:[],normals:[]},k=16*T,A=10*T;f<1&&(k=10*T,A=8*T);var P,L,W=2*Math.PI,U=Math.PI;for(L=0;L<=A;L++){let H=[];for(P=0;P<=k;P++){let G=P/k,Z=L/A,te=-f*Math.cos(0+G*W)*Math.sin(0+Z*U),re=f*Math.cos(0+Z*U),de=f*Math.sin(0+G*W)*Math.sin(0+Z*U);var V=new d.Vector3(te,re,de);V.normalize(),M.vertices.push({x:te,y:re,z:de}),M.normals.push(V),H.push(M.vertices.length-1)}M.verticesRows.push(H)}return x.set(f,M),M}};ae.drawSphere=function(f,T,x,M,k){var A=c.getVerticesForRadius(x,k),P=A.vertices,L=A.normals,W=f.updateGeoGroup(P.length),U=W.vertices,V=W.vertexArray,H=W.colorArray,G=W.faceArray,Z=W.lineArray,te=W.normalArray;for(let le=0,ye=P.length;le<ye;++le){let ke=3*(U+le),Te=P[le];V[ke]=Te.x+T.x,V[ke+1]=Te.y+T.y,V[ke+2]=Te.z+T.z,H[ke]=M.r,H[ke+1]=M.g,H[ke+2]=M.b}W.vertices+=P.length;let re=A.verticesRows,de=re.length-1;for(let le=0;le<de;le++){let ye=re[le].length-1;for(let ke=0;ke<ye;ke++){let Te=W.faceidx,Re=W.lineidx,we=re[le][ke+1]+U,Ue=3*we,Je=re[le][ke]+U,tt=3*Je,Ze=re[le+1][ke]+U,ut=3*Ze,ft=re[le+1][ke+1]+U,Qe=3*ft,pt=L[we-U],Be=L[Je-U],et=L[Ze-U],St=L[ft-U];Math.abs(P[we-U].y)===x?(te[Ue]=pt.x,te[ut]=et.x,te[Qe]=St.x,te[Ue+1]=pt.y,te[ut+1]=et.y,te[Qe+1]=St.y,te[Ue+2]=pt.z,te[ut+2]=et.z,te[Qe+2]=St.z,G[Te]=we,G[Te+1]=Ze,G[Te+2]=ft,Z[Re]=we,Z[Re+1]=Ze,Z[Re+2]=we,Z[Re+3]=ft,Z[Re+4]=Ze,Z[Re+5]=ft,W.faceidx+=3,W.lineidx+=6):Math.abs(P[Ze-U].y)===x?(te[Ue]=pt.x,te[tt]=Be.x,te[ut]=et.x,te[Ue+1]=pt.y,te[tt+1]=Be.y,te[ut+1]=et.y,te[Ue+2]=pt.z,te[tt+2]=Be.z,te[ut+2]=et.z,G[Te]=we,G[Te+1]=Je,G[Te+2]=Ze,Z[Re]=we,Z[Re+1]=Je,Z[Re+2]=we,Z[Re+3]=Ze,Z[Re+4]=Je,Z[Re+5]=Ze,W.faceidx+=3,W.lineidx+=6):(te[Ue]=pt.x,te[tt]=Be.x,te[Qe]=St.x,te[Ue+1]=pt.y,te[tt+1]=Be.y,te[Qe+1]=St.y,te[Ue+2]=pt.z,te[tt+2]=Be.z,te[Qe+2]=St.z,te[tt]=Be.x,te[ut]=et.x,te[Qe]=St.x,te[tt+1]=Be.y,te[ut+1]=et.y,te[Qe+1]=St.y,te[tt+2]=Be.z,te[ut+2]=et.z,te[Qe+2]=St.z,G[Te]=we,G[Te+1]=Je,G[Te+2]=ft,G[Te+3]=Je,G[Te+4]=Ze,G[Te+5]=ft,Z[Re]=we,Z[Re+1]=Je,Z[Re+2]=we,Z[Re+3]=ft,Z[Re+4]=Je,Z[Re+5]=Ze,Z[Re+6]=Ze,Z[Re+7]=ft,W.faceidx+=6,W.lineidx+=8)}}}})(h||(h={}));var E=s(546),v=s(864);function R(ae,n){var o,c,f,T,x,M,k,A,P,L=[],W=ae;for((W=[]).push(ae[0]),o=1,c=ae.length-1;o<c;o++)if(x=ae[o],M=ae[o+1],x.smoothen){var U=new d.Vector3((x.x+M.x)/2,(x.y+M.y)/2,(x.z+M.z)/2);U.atom=x.atom,W.push(U)}else W.push(x);for(W.push(ae[ae.length-1]),o=-1,f=W.length;o<=f-3;o++)if(T=W[o===-1?0:o],x=W[o+1],M=W[o+2],k=W[o===f-3?f-1:o+3],A=new d.Vector3().subVectors(M,T).multiplyScalar(.5),P=new d.Vector3().subVectors(k,x).multiplyScalar(.5),!M.skip)for(var V=0;V<n;V++){var H=1/n*V,G=x.x+H*A.x+H*H*(-3*x.x+3*M.x-2*A.x-P.x)+H*H*H*(2*x.x-2*M.x+A.x+P.x),Z=x.y+H*A.y+H*H*(-3*x.y+3*M.y-2*A.y-P.y)+H*H*H*(2*x.y-2*M.y+A.y+P.y),te=x.z+H*A.z+H*H*(-3*x.z+3*M.z-2*A.z-P.z)+H*H*H*(2*x.z-2*M.z+A.z+P.z),re=new d.Vector3(G,Z,te);re.atom=V<n/2?x.atom:M.atom,L.push(re)}return L.push(W[W.length-1]),L}const z=.5,C=1.3,I=.8,K=.4,J=.4;function X(ae,n,o,c){for(var f,T,x,M,k=0,A=n.length;k<A;k++){M=Math.round(k*(c.length-1)/A),x=y.CC.color(c[M]);var P=ae.updateGeoGroup(2),L=P.vertexArray,W=P.colorArray,U=P.faceArray;L[T=3*(f=P.vertices)]=n[k].x,L[T+1]=n[k].y,L[T+2]=n[k].z,L[T+3]=o[k].x,L[T+4]=o[k].y,L[T+5]=o[k].z;for(var V=0;V<6;++V)W[T+3*V]=x.r,W[T+1+3*V]=x.g,W[T+2+3*V]=x.b;if(k>0){var H=[f,f+1,f-1,f-2],G=P.faceidx;U[G]=H[0],U[G+1]=H[1],U[G+2]=H[3],U[G+3]=H[1],U[G+4]=H[2],U[G+5]=H[3],P.faceidx+=6}P.vertices+=2}}function b(ae,n,o,c,f,T,x){x&&x!=="default"||(x="rectangle"),x==="edged"?(function(M,k,A,P,L){if(!(k.length<2)){var W,U;if(W=k[0],U=k[k.length-1],W=R(W,P),U=R(U,P),!L)return X(M,W,U,A);var V,H,G,Z,te,re,de,le,ye,ke,Te,Re,we,Ue,Je,tt,Ze,ut,ft,Qe,pt,Be,et=[],St=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]];for(we=0,Ue=W.length;we<Ue;we++){if(ke=Math.round(we*(A.length-1)/Ue),ye=y.CC.color(A[ke]),et.push(H=W[we]),et.push(H),et.push(G=U[we]),et.push(G),we<Ue-1){var st=W[we+1].clone().sub(W[we]);V=U[we].clone().sub(W[we]).cross(st).normalize().multiplyScalar(L)}for(et.push(Z=W[we].clone().add(V)),et.push(Z),et.push(te=U[we].clone().add(V)),et.push(te),H.atom!==void 0&&(Te=H.atom),Qe=(ft=M.updateGeoGroup(8)).vertexArray,pt=ft.colorArray,Be=ft.faceArray,Qe[de=3*(re=ft.vertices)]=H.x,Qe[de+1]=H.y,Qe[de+2]=H.z,Qe[de+3]=H.x,Qe[de+4]=H.y,Qe[de+5]=H.z,Qe[de+6]=G.x,Qe[de+7]=G.y,Qe[de+8]=G.z,Qe[de+9]=G.x,Qe[de+10]=G.y,Qe[de+11]=G.z,Qe[de+12]=Z.x,Qe[de+13]=Z.y,Qe[de+14]=Z.z,Qe[de+15]=Z.x,Qe[de+16]=Z.y,Qe[de+17]=Z.z,Qe[de+18]=te.x,Qe[de+19]=te.y,Qe[de+20]=te.z,Qe[de+21]=te.x,Qe[de+22]=te.y,Qe[de+23]=te.z,Je=0;Je<8;++Je)pt[de+3*Je]=ye.r,pt[de+1+3*Je]=ye.g,pt[de+2+3*Je]=ye.b;if(we>0){var wt=Re!==void 0&&Te!==void 0&&Re.serial!==Te.serial;for(Je=0;Je<4;Je++){var Et=[re+St[Je][0],re+St[Je][1],re+St[Je][2],re+St[Je][3]];if(Be[le=ft.faceidx]=Et[0],Be[le+1]=Et[1],Be[le+2]=Et[3],Be[le+3]=Et[1],Be[le+4]=Et[2],Be[le+5]=Et[3],ft.faceidx+=6,Te.clickable||Re.clickable||Te.hoverable||Re.hoverable){var it=et[Et[3]].clone(),kt=et[Et[0]].clone(),Ht=et[Et[2]].clone(),Mt=et[Et[1]].clone();if(it.atom=et[Et[3]].atom||null,Ht.atom=et[Et[2]].atom||null,kt.atom=et[Et[0]].atom||null,Mt.atom=et[Et[1]].atom||null,wt){var ct=it.clone().add(kt).multiplyScalar(.5),Jt=Ht.clone().add(Mt).multiplyScalar(.5),Nt=it.clone().add(Mt).multiplyScalar(.5);Je%2==0?((Re.clickable||Re.hoverable)&&(tt=new g.Triangle(ct,Nt,it),Ze=new g.Triangle(Jt,Ht,Nt),ut=new g.Triangle(Nt,Ht,it),Re.intersectionShape.triangle.push(tt),Re.intersectionShape.triangle.push(Ze),Re.intersectionShape.triangle.push(ut)),(Te.clickable||Te.hoverable)&&(tt=new g.Triangle(kt,Mt,Nt),Ze=new g.Triangle(Mt,Jt,Nt),ut=new g.Triangle(kt,Nt,ct),Te.intersectionShape.triangle.push(tt),Te.intersectionShape.triangle.push(Ze),Te.intersectionShape.triangle.push(ut))):((Te.clickable||Te.hoverable)&&(tt=new g.Triangle(ct,Nt,it),Ze=new g.Triangle(Jt,Ht,Nt),ut=new g.Triangle(Nt,Ht,it),Te.intersectionShape.triangle.push(tt),Te.intersectionShape.triangle.push(Ze),Te.intersectionShape.triangle.push(ut)),(Re.clickable||Re.hoverable)&&(tt=new g.Triangle(kt,Mt,Nt),Ze=new g.Triangle(Mt,Jt,Nt),ut=new g.Triangle(kt,Nt,ct),Re.intersectionShape.triangle.push(tt),Re.intersectionShape.triangle.push(Ze),Re.intersectionShape.triangle.push(ut)))}else(Te.clickable||Te.hoverable)&&(tt=new g.Triangle(kt,Mt,it),Ze=new g.Triangle(Mt,Ht,it),Te.intersectionShape.triangle.push(tt),Te.intersectionShape.triangle.push(Ze))}}}ft.vertices+=8,Re=Te}var qt=et.length-8;for(Qe=(ft=M.updateGeoGroup(8)).vertexArray,pt=ft.colorArray,Be=ft.faceArray,de=3*(re=ft.vertices),le=ft.faceidx,we=0;we<4;we++){et.push(et[2*we]),et.push(et[qt+2*we]);var Vt=et[2*we],Xt=et[qt+2*we];Qe[de+6*we]=Vt.x,Qe[de+1+6*we]=Vt.y,Qe[de+2+6*we]=Vt.z,Qe[de+3+6*we]=Xt.x,Qe[de+4+6*we]=Xt.y,Qe[de+5+6*we]=Xt.z,pt[de+6*we]=ye.r,pt[de+1+6*we]=ye.g,pt[de+2+6*we]=ye.b,pt[de+3+6*we]=ye.r,pt[de+4+6*we]=ye.g,pt[de+5+6*we]=ye.b}qt+=8,tt=[re,re+2,re+6,re+4],Ze=[re+1,re+5,re+7,re+3],Be[le]=tt[0],Be[le+1]=tt[1],Be[le+2]=tt[3],Be[le+3]=tt[1],Be[le+4]=tt[2],Be[le+5]=tt[3],Be[le+6]=Ze[0],Be[le+7]=Ze[1],Be[le+8]=Ze[3],Be[le+9]=Ze[1],Be[le+10]=Ze[2],Be[le+11]=Ze[3],ft.faceidx+=12,ft.vertices+=8}})(ae,n,o,c,f):x!=="rectangle"&&x!=="oval"&&x!=="parabola"||(function(M,k,A,P,L,W,U){var V,H,G,Z,te,re,de,le,ye,ke;if((G=k.length)<2||k[0].length<2)return;for(V=0;V<G;V++)k[V]=R(k[V],P);if(Z=k[0].length,!L)return X(M,k[0],k[G-1],A);var Te=[],Re=[],we=[];for(H=0;H<G;H++)Te.push(.25+1.5*Math.sqrt((G-1)*H-Math.pow(H,2))/(G-1)),Re.push(.5),we.push(2*(Math.pow(H/G,2)-H/G)+.6);var Ue,Je,tt,Ze,ut,ft,Qe,pt,Be,et,St=[];for(H=0;H<2*G-1;H++)St[H]=[H,H+1,H+1-2*G,H-2*G];St[2*G-1]=[H,H+1-2*G,H+1-4*G,H-2*G];let st=M.updateGeoGroup();for(V=0;V<Z;V++){let kt=M.groups,Ht=!1;var wt,Et;for(st=M.updateGeoGroup(2*G),kt!=M.groups&&V>0&&(V-=1,Ht=!0),ft=Math.round(V*(A.length-1)/Z),ut=y.CC.color(A[ft]),ye=de,ke=le,de=[],le=[],te=[],k[0][V].atom!==void 0&&(Ze=k[0][V].atom,U==="oval"?re=Te:U==="rectangle"?re=Re:U==="parabola"&&(re=we)),re||(re=Re),H=0;H<G;H++)wt=V<Z-1?k[H][V+1].clone().sub(k[H][V]):k[H][V-1].clone().sub(k[H][V]).negate(),Et=H<G-1?k[H+1][V].clone().sub(k[H][V]):k[H-1][V].clone().sub(k[H][V]).negate(),te[H]=Et.cross(wt).normalize().multiplyScalar(L*re[H]);for(H=0;H<G;H++)de[H]=k[H][V].clone().add(te[H].clone().negate());for(H=0;H<G;H++)le[H]=k[H][V].clone().add(te[H]);for(Qe=st.vertexArray,pt=st.colorArray,Be=st.faceArray,Je=3*(Ue=st.vertices),H=0;H<G;H++)Qe[Je+3*H+0]=de[H].x,Qe[Je+3*H+1]=de[H].y,Qe[Je+3*H+2]=de[H].z;for(H=0;H<G;H++)Qe[Je+3*H+0+3*G]=le[G-1-H].x,Qe[Je+3*H+1+3*G]=le[G-1-H].y,Qe[Je+3*H+2+3*G]=le[G-1-H].z;for(H=0;H<2*G;++H)pt[Je+3*H+0]=ut.r,pt[Je+3*H+1]=ut.g,pt[Je+3*H+2]=ut.b;if(V>0&&!Ht){for(H=0;H<2*G;H++)et=[Ue+St[H][0],Ue+St[H][1],Ue+St[H][2],Ue+St[H][3]],Be[tt=st.faceidx]=et[0],Be[tt+1]=et[1],Be[tt+2]=et[3],Be[tt+3]=et[1],Be[tt+4]=et[2],Be[tt+5]=et[3],st.faceidx+=6;if(Ze.clickable||Ze.hoverable){var it=[];for(H in it.push(new g.Triangle(ye[0],de[0],de[G-1])),it.push(new g.Triangle(ye[0],de[G-1],ye[G-1])),it.push(new g.Triangle(ye[G-1],de[G-1],le[G-1])),it.push(new g.Triangle(ye[G-1],le[G-1],ke[G-1])),it.push(new g.Triangle(le[0],ke[0],ke[G-1])),it.push(new g.Triangle(le[G-1],le[0],ke[G-1])),it.push(new g.Triangle(de[0],ye[0],ke[0])),it.push(new g.Triangle(le[0],de[0],ke[0])),it)Ze.intersectionShape.triangle.push(it[H])}}st.vertices+=2*G}for(Qe=st.vertexArray,pt=st.colorArray,Be=st.faceArray,Je=3*(Ue=st.vertices),tt=st.faceidx,V=0;V<G-1;V++)et=[V,V+1,2*G-2-V,2*G-1-V],Be[tt=st.faceidx]=et[0],Be[tt+1]=et[1],Be[tt+2]=et[3],Be[tt+3]=et[1],Be[tt+4]=et[2],Be[tt+5]=et[3],st.faceidx+=6;for(V=0;V<G-1;V++)et=[Ue-1-V,Ue-2-V,Ue-2*G+V+1,Ue-2*G+V],Be[tt=st.faceidx]=et[0],Be[tt+1]=et[1],Be[tt+2]=et[3],Be[tt+3]=et[1],Be[tt+4]=et[2],Be[tt+5]=et[3],st.faceidx+=6})(ae,n,o,c,f,0,x)}function F(ae){return ae&&ae.elem==="C"&&ae.atom==="CA"}function B(ae,n){if(ae&&n&&ae.chain===n.chain){if(!(ae.hetflag||n.hetflag||ae.reschain!==n.reschain||ae.resi!==n.resi&&ae.resi!==n.resi-1))return!0;if(ae.resi<n.resi){var o=ae.x-n.x,c=ae.y-n.y,f=ae.z-n.z,T=o*o+c*c+f*f;if(ae.atom=="CA"&&n.atom=="CA"&&T<16||(ae.atom=="P"||n.atom=="P")&&T<64)return!0}}return!1}function $(ae,n,o,c,f){if(n!=null&&n.vertices!=0){f&&(n.initTypedArrays(),n.setUpNormals());var T=new l.MeshDoubleLambertMaterial;T.vertexColors=l.Coloring.FaceColors,typeof o=="number"&&o>=0&&o<1&&(T.transparent=!0,T.opacity=o),T.outline=c;var x=new l.Mesh(n,T);ae.add(x)}}function Q(ae,n,o,c,f,T,x,M,k){var A,P,L,W,U,V;if(c&&f&&x){var H=f.sub(c);H.normalize();var G=M[k];for(P=k+1;P<M.length&&(G=M[P]).atom!=x.atom;P++);if((G=G?new d.Vector3(G.x,G.y,G.z):new d.Vector3(0,0,0)).sub(c),x.ss==="arrow start"){var Z=G.clone().multiplyScalar(.3).cross(f);c.add(Z);var te=G.clone().cross(H).normalize();H.rotateAboutVector(te,.43)}for(x.style.cartoon.ribbon?A=x.style.cartoon.thickness||K:x.style.cartoon.width?A=x.style.cartoon.width:x.ss==="c"?A=x.atom==="P"?I:z:x.ss==="arrow start"?(A=C,U=!0):A=x.ss==="arrow end"||x.ss==="h"&&x.style.cartoon.tubes||x.ss==="tube start"?z:C,T!=null&&H.dot(T)<0&&H.negate(),H.multiplyScalar(A),P=0;P<n;P++)L=2*P/(n-1)-1,(W=new d.Vector3(c.x+L*H.x,c.y+L*H.y,c.z+L*H.z)).atom=x,x.ss==="s"&&(W.smoothen=!0),ae[P].push(W);if(U)for(H.multiplyScalar(2),P=0;P<n;P++)L=2*P/(n-1)-1,(W=new d.Vector3(c.x+L*H.x,c.y+L*H.y,c.z+L*H.z)).atom=x,W.smoothen=!1,W.skip=!0,ae[P].push(W);return V=x.style.cartoon.style||"default",ae.style?ae.style!=V&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),ae.style="default"):ae.style=V,x.ss!=="arrow start"&&x.ss!=="arrow end"||(x.ss="s"),U}}const N={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},ee={DA:!0,DG:!0,A:!0,G:!0},Se={DT:!0,DC:!0,U:!0,C:!0,T:!0},ue={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function ge(ae,n,o,c=10){let f=c,T=c;var x,M,k,A,P,L,W,U,V,H,G,Z,te,re,de,le,ye,ke,Te=new l.Geometry(!0),Re=new l.Geometry(!0),we=[],Ue=[],Je=1,tt=!1,Ze={};for(var ut in E.Gradient.builtinGradients)E.Gradient.builtinGradients.hasOwnProperty(ut)&&(Ze[ut]=new E.Gradient.builtinGradients[ut](o[1],o[0]));var ft=function(Vt,Xt){return o&&Xt.color==="spectrum"?Xt.colorscheme in Ze?Ze[Xt.colorscheme].valueToHex(Vt.resi):Ze.sinebow.valueToHex(Vt.resi):(0,v.getColorFromStyle)(Vt,Xt).getHex()};for(U=0;U<f;U++)Ue[U]=[];var Qe=!1,pt=!1,Be=[];for(U in n){if((A=n[U]).elem==="C"&&A.atom==="CA"){var et=B(k,A);et&&A.ss==="s"?Qe=!0:Qe&&(k&&M&&k.style.cartoon.arrows&&M.style.cartoon.arrows&&(k.ss="arrow end",M.ss="arrow start"),Qe=!1),et&&(k.ss==="h"||k.ss=="tube start")&&k.style.cartoon.tubes?!pt&&k.ss!="tube start"&&A.style.cartoon.tubes&&(A.ss="tube start",pt=!0):pt&&(k.ss==="tube start"?k.ss="tube end":M&&M.style.cartoon.tubes&&(M.ss="tube end"),pt=!1),M=k,k=A}A&&A.atom in N&&Be.push(A)}pt&&k.style.cartoon.tubes&&(k.ss="tube end",pt=!1);var St=function(Vt){Ue[0].length>0&&b(Re,Ue,we,T,W,0,Ue.style);var Xt=[],yr=null;if(Vt){for(U=0;U<f;U++)Xt[U]=Ue[U][Ue[U].length-1];yr=we[we.length-1]}for(Ue=[],U=0;U<f;U++)Ue[U]=[];if(we=[],Vt){for(U=0;U<f;U++)Ue[U].push(Xt[U]);we.push(yr)}$(ae,Re,Je,tt,!0),$(ae,Te,Je,tt,!1),Re=new l.Geometry(!0),Te=new l.Geometry(!0)};k=void 0;let st=[];for(var wt=0;wt<Be.length;wt++){var Et=(A=Be[wt]).resn.trim(),it=Et in ue;if(Je=1,x=A.style.cartoon,k&&k.style.cartoon&&(Je=k.style.cartoon.opacity),k&&k.style.cartoon&&k.style.cartoon.outline&&(tt=k.style.cartoon.outline),!k||!k.style.cartoon||A.style.cartoon&&k.style.cartoon.opacity==A.style.cartoon.opacity||St(k.chain==A.chain),k&&A&&!B(k,A)&&k.chain&&k.chain==A.chain&&!k.hetflag&&!A.hetflag&&k.reschain+1==A.reschain&&st.push([k,A]),x.style==="trace"){if(!A.hetflag&&(A.elem==="C"&&A.atom==="CA"||it&&A.atom==="P"||A.atom==="BB")){if(L=ft(A,x),W=(0,v.isNumeric)(x.thickness)?x.thickness:K,B(k,A))if(L==P){var kt=y.CC.color(L);h.drawCylinder(Te,k,A,W,kt,2,2)}else{var Ht=new d.Vector3().addVectors(k,A).multiplyScalar(.5),Mt=y.CC.color(P),ct=y.CC.color(L);h.drawCylinder(Te,k,Ht,W,Mt,2,0),h.drawCylinder(Te,Ht,A,W,ct,0,2)}if((A.clickable===!0||A.hoverable)&&A.intersectionShape!==void 0){var Jt=new d.Vector3(A.x,A.y,A.z);A.intersectionShape.sphere.push(new g.Sphere(Jt,W))}k=A,P=L}}else{if(F(A)||it&&(A.atom==="P"||A.atom.indexOf("O5")==0)){if(ke)if(A.ss==="tube end")ke=!1,ye=new d.Vector3(A.x,A.y,A.z),h.drawCylinder(Te,le,ye,2,y.CC.color(P),1,1),A.ss="h";else{if(k.chain==A.chain&&k.ss!=="tube end")continue;ke=!1,k.ss="h",ye=new d.Vector3(k.x,k.y,k.z),h.drawCylinder(Te,le,ye,2,y.CC.color(P),1,1)}if(k&&(!B(k,A)||k.ss==="tube start")){for(k.ss==="tube start"&&(ke=!0,le=new d.Vector3(k.x,k.y,k.z),k.ss="h"),de&&(re=Z?new d.Vector3().addVectors(k,Z).multiplyScalar(.5):new d.Vector3(k.x,k.y,k.z),h.drawCylinder(Te,re,de,J,y.CC.color(de.color),0,2),Q(Ue,f,!0,Z,te,G,k,Be,wt),we.push(L),re=null,de=null),Ue[0].length>0&&b(Re,Ue,we,T,W,0,Ue.style),Ue=[],U=0;U<f;U++)Ue[U]=[];we=[]}if(k===void 0||k.rescode!=A.rescode||k.resi!=A.resi){if(de&&k!=null){var Nt=(re=new d.Vector3().addVectors(k,A).multiplyScalar(.5)).clone().sub(de).multiplyScalar(.02);re.add(Nt),h.drawCylinder(Te,re,de,J,y.CC.color(de.color),0,2),re=null,de=null}L=ft(A,x),we.push(L),W=(0,v.isNumeric)(x.thickness)?x.thickness:K,k=A,(V=new d.Vector3(k.x,k.y,k.z)).resi=k.resi,P=L}A.clickable!==!0&&A.hoverable!==!0||A.intersectionShape!==void 0&&A.intersectionShape.triangle!==void 0||(A.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else k!=null&&(F(k)&&A.atom==="O"||it&&k.atom==="P"&&(A.atom==="OP2"||A.atom==="O2P")||it&&k.atom.indexOf("O5")==0&&A.atom.indexOf("C5")==0)?((H=new d.Vector3(A.x,A.y,A.z)).resi=A.resi,A.atom!=="OP2"&&A.atom!=="O2P"||(te=new d.Vector3(A.x,A.y,A.z))):it&&A.atom.indexOf("O3")==0?Z=new d.Vector3(A.x,A.y,A.z):(A.atom==="N1"&&Et in ee||A.atom==="N3"&&Et in Se)&&((de=new d.Vector3(A.x,A.y,A.z)).color=(0,v.getColorFromStyle)(A,x).getHex());H&&V&&H.resi===V.resi&&(Q(Ue,f,!0,V,H,G,k,Be,wt),G=H,V=null,H=null,we.push(L))}}de&&(re=Z?new d.Vector3().addVectors(k,Z).multiplyScalar(.5):new d.Vector3(k.x,k.y,k.z),h.drawCylinder(Te,re,de,J,y.CC.color(de.color),0,2),Q(Ue,f,!0,Z,te,G,k,Be,wt),we.push(L)),St(!1);var qt=function(Vt,Xt){if(Vt.style.cartoon.gapcutoff&&Vt.style.cartoon.gapcutoff==Xt.style.cartoon.gapcutoff){let Fr=Vt.style.cartoon.gapcutoff,Tr=Xt.resi-Vt.resi;if(Tr>0&&Tr<Fr){let ii=.25,Wr=Xt.x-Vt.x,br=Xt.y-Vt.y,$r=Xt.z-Vt.z,ci=Math.sqrt(Wr*Wr+br*br+$r*$r),ni=ci/(2*Tr),hi=new d.Vector3(Vt.x,Vt.y,Vt.z),Ii=ci/ni,xi=new d.Vector3((Xt.x-Vt.x)/Ii,(Xt.y-Vt.y)/Ii,(Xt.z-Vt.z)/Ii);hi.add({x:xi.x/2,y:xi.y/2,z:xi.z/2});let zi=hi.clone().add(xi);xi.multiplyScalar(2);let Hr=(0,v.extend)({},Vt);for(var yr=0;yr<Tr;yr++){Hr.resi+=1;let Xr=ft(Hr,Hr.style.cartoon);h.drawCylinder(Te,hi,zi,ii,y.CC.color(Xr),u.FLAT,u.FLAT),hi.add(xi),zi.add(xi)}St(!1)}}};for(let Vt of st)qt(Vt[0],Vt[1])}var me=s(797),Me=s(865),ce=s(392);function O(ae,n){for(var o=[[]],c=(n=n||{}).assignBonds===void 0||n.assignBonds,f=ae.trimStart().split(/\r?\n|\r/);f.length>0&&!(f.length<3);){var T=parseInt(f[0]);if(isNaN(T)||T<=0||f.length<T+2)break;var x=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi.exec(f[1]);if(x!=null&&x.length>1){var M=new Float32Array(x[1].split(/\s+/)),k=new l.Matrix3(M[0],M[3],M[6],M[1],M[4],M[7],M[2],M[5],M[8]);o.modelData=[{cryst:{matrix:k}}]}for(var A=2,P=o[o.length-1].length,L=P+T,W=P;W<L;W++){var U=f[A++].trim().split(/\s+/),V={};V.serial=W;var H=U[0];V.atom=V.elem=H[0].toUpperCase()+H.substring(1,2).toLowerCase(),V.x=parseFloat(U[1]),V.y=parseFloat(U[2]),V.z=parseFloat(U[3]),V.hetflag=!0,V.bonds=[],V.bondOrder=[],V.properties={},o[o.length-1][W]=V,U.length>=7&&(V.dx=parseFloat(U[4]),V.dy=parseFloat(U[5]),V.dz=parseFloat(U[6]))}if(!n.multimodel)break;o.push([]),f.splice(0,A)}if(c)for(let Z=0;Z<o.length;Z++)(0,ce.assignBonds)(o[Z],n);if(n.onemol){var G=o;(o=[]).push(G[0]);for(let Z=1;Z<G.length;Z++){let te=o[0].length;for(let re=0;re<G[Z].length;re++){let de=G[Z][re];for(let le=0;le<de.bonds.length;le++)de.bonds[le]=de.bonds[le]+te;de.index=o[0].length,de.serial=o[0].length,o[0].push(de)}}}return o}function he(ae,n){var o="V2000",c=ae.split(/\r?\n|\r/);return c.length>3&&c[3].length>38&&(o=c[3].substring(34,39)),o==="V2000"?(function(f,T){var x=[[]],M=!1;for(T.keepH!==void 0&&(M=!T.keepH);f.length>0&&!(f.length<4);){var k=parseInt(f[3].substring(0,3));if(isNaN(k)||k<=0)break;var A=parseInt(f[3].substring(3,6)),P=4;if(f.length<4+k+A)break;var L,W,U=[],V=x[x.length-1].length,H=V+k;for(L=V;L<H;L++,P++){var G={},Z=(W=f[P]).substring(31,34).replace(/ /g,"");G.atom=G.elem=Z[0].toUpperCase()+Z.substring(1).toLowerCase(),G.elem==="H"&&M||(G.serial=L,U[L]=x[x.length-1].length,G.x=parseFloat(W.substring(0,10)),G.y=parseFloat(W.substring(10,20)),G.z=parseFloat(W.substring(20,30)),G.hetflag=!0,G.bonds=[],G.bondOrder=[],G.properties={},G.index=x[x.length-1].length,x[x.length-1].push(G))}for(L=0;L<A;L++,P++){W=f[P];var te=U[parseInt(W.substring(0,3))-1+V],re=U[parseInt(W.substring(3,6))-1+V],de=parseFloat(W.substring(6));te!==void 0&&re!==void 0&&(x[x.length-1][te].bonds.push(re),x[x.length-1][te].bondOrder.push(de),x[x.length-1][re].bonds.push(te),x[x.length-1][re].bondOrder.push(de))}if(!T.multimodel)break;for(T.onemol||x.push([]);f[P]!=="$$$$"&&P<f.length;)P++;f.splice(0,++P)}return x})(c,n):o==="V3000"?(function(f,T){var x=[[]],M=!1;for(T.keepH!==void 0&&(M=!T.keepH);f.length>0&&!(f.length<8)&&f[4].startsWith("M  V30 BEGIN CTAB")&&f[5].startsWith("M  V30 COUNTS")&&!(f[5].length<14);){var k=f[5].substring(13).match(/\S+/g);if(k.length<2)break;var A=parseInt(k[0]);if(isNaN(A)||A<=0)break;var P=parseInt(k[1]),L=7;if(f.length<8+A+P)break;var W,U=[],V=x[x.length-1].length,H=V+A;for(W=V;W<H;W++,L++){var G=f[L].substring(6).match(/\S+/g);if(G.length>4){var Z={},te=G[1].replace(/ /g,"");Z.atom=Z.elem=te[0].toUpperCase()+te.substring(1).toLowerCase(),Z.elem==="H"&&M||(Z.serial=W,U[W]=x[x.length-1].length,Z.x=parseFloat(G[2]),Z.y=parseFloat(G[3]),Z.z=parseFloat(G[4]),Z.hetflag=!0,Z.bonds=[],Z.bondOrder=[],Z.properties={},Z.index=x[x.length-1].length,x[x.length-1].push(Z))}}if(f[L]!=="M  V30 END ATOM"||(L++,P===0||f[L]!=="M  V30 BEGIN BOND"))break;for(L++,W=0;W<P;W++,L++){var re=f[L].substring(6).match(/\S+/g);if(re.length>3){var de=U[parseInt(re[2])-1+V],le=U[parseInt(re[3])-1+V],ye=parseFloat(re[1]);de!==void 0&&le!==void 0&&(x[x.length-1][de].bonds.push(le),x[x.length-1][de].bondOrder.push(ye),x[x.length-1][le].bonds.push(de),x[x.length-1][le].bondOrder.push(ye))}}if(!T.multimodel)break;for(T.onemol||x.push([]);f[L]!=="$$$$"&&L<f.length;)L++;f.splice(0,++L)}return x})(c,n):[[""]]}function se(ae,n){var o=[[]];typeof ae=="string"&&(ae=JSON.parse(ae));for(var c=ae.m,f=c[0].a,T=c[0].b,x=c[0].s,M=n!==void 0&&n.parseStyle!==void 0?n.parseStyle:x!==void 0,k=o[o.length-1].length,A=0;A<f.length;A++){var P=f[A],L={};L.id=P.i,L.x=P.x,L.y=P.y,L.z=P.z||0,L.bonds=[],L.bondOrder=[];var W=P.l||"C";L.elem=W[0].toUpperCase()+W.substring(1).toLowerCase(),L.serial=o[o.length-1].length,M&&(L.style=x[P.s||0]),o[o.length-1].push(L)}for(let U=0;U<T.length;U++){let V=T[U],H=V.b+k,G=V.e+k,Z=V.o||1,te=o[o.length-1][H],re=o[o.length-1][G];te.bonds.push(G),te.bondOrder.push(Z),re.bonds.push(H),re.bondOrder.push(Z)}return o}function q(ae,n){(function(A,P){const L=P||3.2,W=L*L,U=[];for(let V=0,H=A.length;V<H;V++){A[V].index=V;const G=A[V];G.hetflag||G.atom!=="N"&&G.atom!=="O"||(U.push(G),G.hbondOther=null,G.hbondDistanceSq=Number.POSITIVE_INFINITY)}U.sort(function(V,H){return V.z-H.z});for(let V=0,H=U.length;V<H;V++){const G=U[V];for(let Z=V+1;Z<H;Z++){const te=U[Z],re=te.z-G.z;if(re>L)break;if(te.atom==G.atom)continue;const de=Math.abs(te.y-G.y);if(de>L)continue;const le=Math.abs(te.x-G.x);if(le>L)continue;const ye=le*le+de*de+re*re;ye>W||te.chain==G.chain&&Math.abs(te.resi-G.resi)<4||(ye<G.hbondDistanceSq&&(G.hbondOther=te,G.hbondDistanceSq=ye),ye<te.hbondDistanceSq&&(te.hbondOther=G,te.hbondDistanceSq=ye))}}})(ae,n);const o={};let c,f,T,x,M,k;for(c=0,f=ae.length;c<f;c++)if(M=ae[c],o[M.chain]===void 0&&(o[M.chain]=[]),isFinite(M.hbondDistanceSq)){const A=M.hbondOther;o[A.chain]===void 0&&(o[A.chain]=[]),Math.abs(A.resi-M.resi)===4&&(o[M.chain][M.resi]="h")}for(T in o)for(x=1;x<o[T].length-1;x++){const A=o[T][x-1],P=o[T][x+1];k=o[T][x],A=="h"&&A==P&&k!=A&&(o[T][x]=A)}for(c=0,f=ae.length;c<f;c++)M=ae[c],isFinite(M.hbondDistanceSq)&&o[M.chain][M.resi]!="h"&&M.ss!=="h"&&(o[M.chain][M.resi]="maybesheet");for(let A=0,P=ae.length;A<P;A++)if(M=ae[A],isFinite(M.hbondDistanceSq)&&o[M.chain][M.resi]=="maybesheet"){let L=M.hbondOther,W=o[L.chain][L.resi];W!="maybesheet"&&W!="s"||(o[M.chain][M.resi]="s",o[L.chain][L.resi]="s")}for(let A in o){for(let P=1;P<o[A].length-1;P++){const L=o[A][P-1],W=o[A][P+1];k=o[A][P],L=="s"&&L==W&&k!=L&&(o[A][P]=L)}for(let P=0;P<o[A].length;P++){const L=o[A][P];L!="h"&&L!="s"||o[A][P-1]!=L&&o[A][P+1]!=L&&delete o[A][P]}}for(c=0,f=ae.length;c<f;c++)M=ae[c],k=o[M.chain][M.resi],delete M.hbondOther,delete M.hbondDistanceSq,k!==void 0&&k!=="maybesheet"&&(M.ss=k,o[M.chain][M.resi-1]!=k&&(M.ssbegin=!0),o[M.chain][M.resi+1]!=k&&(M.ssend=!0))}function Pe(ae,n,o,c){const f=!o.duplicateAssemblyAtoms,T=n.length;let x=T,M=-1,k=null,A=null;(o.normalizeAssembly||o.wrapAtoms)&&c&&(k=(0,l.conversionMatrix3)(c.a,c.b,c.c,c.alpha,c.beta,c.gamma),A=new l.Matrix3,A.getInverse3(k));let P=function(U){let V=U.clone().applyMatrix3(A);const H=[V.x,V.y,V.z],G=[0,0,0];for(let te=0;te<3;te++){for(;H[te]<-.001;)H[te]+=1,G[te]+=1;for(;H[te]>1.001;)H[te]-=1,G[te]-=1}const Z=new l.Vector3(G[0],G[1],G[2]);return Z.applyMatrix3(k),Z};if(o.normalizeAssembly&&c)for(let U=0;U<ae.length;U++){const V=new l.Vector3(0,0,0);for(let G=0;G<T;G++){const Z=new l.Vector3(n[G].x,n[G].y,n[G].z);Z.applyMatrix4(ae[U]),V.add(Z)}V.divideScalar(T);const H=P(V);ae[U].isNearlyIdentity()&&H.lengthSq()>.001&&(M=U),ae[U].translate(H)}if(f){if(ae.length>1)for(let U=0;U<n.length;U++){var L=[];for(let V=0;V<ae.length;V++)if(!ae[V].isNearlyIdentity()){var W=new l.Vector3;W.set(n[U].x,n[U].y,n[U].z),W.applyMatrix4(ae[V]),L.push(W)}n[U].symmetries=L}}else{for(let U=0;U<T;U++)n[U].sym=-1;for(let U=0;U<ae.length;U++)if(ae[U].isNearlyIdentity()||M==U)for(let V=0;V<T;V++)n[V].sym=U;else{let V=new l.Vector3;for(let H=0;H<T;H++){const G=[];for(let te=0;te<n[H].bonds.length;te++)G.push(n[H].bonds[te]+x);if(V.set(n[H].x,n[H].y,n[H].z),V.applyMatrix4(ae[U]),o.wrapAtoms&&c){let te=P(V);V.add(te)}const Z={};for(const te in n[H])Z[te]=n[H][te];Z.x=V.x,Z.y=V.y,Z.z=V.z,Z.bonds=G,Z.sym=U,Z.index=n.length,n.push(Z)}x=n.length}if(o.wrapAtoms&&c){let U=new l.Vector3;for(let V=0;V<T;V++){U.set(n[V].x,n[V].y,n[V].z);let H=P(U);U.add(H),n[V].x=U.x,n[V].y=U.y,n[V].z=U.z}}if(M>=0){const U=new l.Vector3;for(let V=0;V<T;V++)U.set(n[V].x,n[V].y,n[V].z),U.applyMatrix4(ae[M]),n[V].x=U.x,n[V].y=U.y,n[V].z=U.z}ae.length=0}}var fe=s(408);const De=new Set(["ABU","ACD","ALA","ALB","ALI","ARG","AR0","ASN","ASP","ASX","BAS","CYS","CYH","CYX","CSS","CSH","GLN","GLU","GLX","GLY","HIS","HIE","HID","HIP","HYP","ILE","ILU","LEU","LYS","MET","PCA","PGA","PHE","PR0","PRO","PRZ","SER","THR","TRP","TYR","VAL","A","1MA","C","5MC","OMC","G","1MG","2MG","M2G","7MG","OMG","YG","I","T","U","+U","H2U","5MU","PSU","ACE","F0R","H2O","HOH","WAT"]);function He(ae,n){const o=[],c=[];for(let M=0,k=ae.length;M<k;M++){const A=ae[M];A.index=M,A.hetflag||!De.has(A.resn)?c.push(A):o.push(A)}(0,ce.assignBonds)(c,n),o.sort(function(M,k){return M.chain!==k.chain?M.chain<k.chain?-1:1:M.resi-k.resi});let f,T=-1,x=-1;for(let M=0,k=o.length;M<k;M++){const A=o[M];A.resi!==T&&(T=A.resi,f||x++,f=!1),A.reschain=x;for(let P=M+1;P<o.length;P++){const L=o[P];if(L.chain!==A.chain||L.resi-A.resi>1)break;(0,fe.areConnected)(A,L,n)&&(A.bonds.indexOf(L.index)===-1&&(A.bonds.push(L.index),A.bondOrder.push(1),L.bonds.push(A.index),L.bondOrder.push(1)),A.resi!==L.resi&&(f=!0))}}}const oe=function(ae,n,o,c){return new l.Vector3(n,o,c).applyMatrix3(ae)};function Ce(ae,n={}){const o=[],c=!n.doAssembly,f=o.modelData=[],T=n.assignBonds===void 0||n.assignBonds;function x(W,U){const V=[];let H=0,G=0;for(;G<W.length;){for(;W.substring(G,G+U.length)!==U&&G<W.length;)if(W[G]==="'"){for(G++;G<W.length&&W[G]!=="'";)G++;for(;W.substring(G,G+U.length)!==U&&G<W.length;)G++}else if(W[G]==='"'){for(G++;G<W.length&&W[G]!=='"';)G++;G++}else G++;V.push(W.substring(H,G)),H=G+=U.length}return V}const M=ae.split(/\r?\n|\r/),k=[];let A=!1;for(let W=0;W<M.length;W++){var P=M[W].split("#")[0];if(A?P[0]===";"&&(A=!1):P[0]===";"&&(A=!0),A||P!==""){if(!A&&(P=P.trim())[0]==="_"){const U=P.split(/\s/)[0].indexOf(".");if(U>-1){let V=P.split("");V[U]="_",P=(P=V.join("")).substring(0,U)+"_"+P.substring(U+1)}}k.push(P)}}let L=0;for(;L<k.length;){for(;!k[L].startsWith("data_")||k[L]==="data_global";)L++;L++;const W={};for(;L<k.length&&!k[L].startsWith("data_");)if(k[L][0]===void 0)L++;else if(k[L][0]==="_"){const G=k[L].split(/\s/)[0].toLowerCase(),Z=W[G]=W[G]||[],te=k[L].substring(k[L].indexOf(G)+G.length);if(te==="")if(L++,k[L][0]===";"){let re=k[L].substring(1);for(L++;k[L]!==";";)re=re+`
`+k[L],L++;Z.push(re)}else Z.push(k[L]);else Z.push(te.trim());L++}else if(k[L].substring(0,5)==="loop_"){L++;const G=[];for(;k[L]===""||k[L][0]==="_";){if(k[L]!==""){let te=k[L].split(/\s/)[0].toLowerCase(),re=W[te]=W[te]||[];G.push(re)}L++}let Z=0;for(;L<k.length&&k[L][0]!=="_"&&!k[L].startsWith("loop_")&&!k[L].startsWith("data_");){let te=x(k[L]," ");for(let re=0;re<te.length;re++)te[re]!==""&&(G[Z].push(te[re]),Z=(Z+1)%G.length);L++}}else L++;f.push({symmetries:[]}),o.push([]);const U=W._atom_site_id!==void 0?W._atom_site_id.length:W._atom_site_label.length;let V;if(W._cell_length_a!==void 0){const G=parseFloat(W._cell_length_a),Z=parseFloat(W._cell_length_b),te=parseFloat(W._cell_length_c),re=parseFloat(W._cell_angle_alpha)||90,de=parseFloat(W._cell_angle_beta)||90,le=parseFloat(W._cell_angle_gamma)||90;V=(0,l.conversionMatrix3)(G,Z,te,re,de,le),f[f.length-1].cryst={a:G,b:Z,c:te,alpha:re,beta:de,gamma:le}}for(let G=0;G<U;G++){if(W._atom_site_group_pdb!==void 0&&W._atom_site_group_pdb[G]==="TER")continue;const Z={};if(W._atom_site_cartn_x!==void 0)Z.x=parseFloat(W._atom_site_cartn_x[G]),Z.y=parseFloat(W._atom_site_cartn_y[G]),Z.z=parseFloat(W._atom_site_cartn_z[G]);else{const re=oe(V,parseFloat(W._atom_site_fract_x[G]),parseFloat(W._atom_site_fract_y[G]),parseFloat(W._atom_site_fract_z[G]));Z.x=re.x,Z.y=re.y,Z.z=re.z}Z.chain=W._atom_site_auth_asym_id?W._atom_site_auth_asym_id[G]:W._atom_site_label_asym_id?W._atom_site_label_asym_id[G]:void 0,Z.lchain=W._atom_site_label_asym_id?W._atom_site_label_asym_id[G]:void 0,Z.resi=W._atom_site_auth_seq_id?parseInt(W._atom_site_auth_seq_id[G]):W._atom_site_label_seq_id?W._atom_site_label_seq_id[G]:void 0,Z.resn=W._atom_site_auth_comp_id?W._atom_site_auth_comp_id[G].trim():W._atom_site_label_comp_id?W._atom_site_label_comp_id[G].trim():void 0,Z.atom=W._atom_site_auth_atom_id?W._atom_site_auth_atom_id[G].replace(/"/gm,""):W._atom_site_label_atom_id?W._atom_site_label_atom_id[G].replace(/"/gm,""):void 0,Z.hetflag=!W._atom_site_group_pdb||W._atom_site_group_pdb[G]==="HETA"||W._atom_site_group_pdb[G]==="HETATM",W._atom_site_b_iso_or_equiv&&(Z.b=parseFloat(W._atom_site_b_iso_or_equiv[G]));let te="X";W._atom_site_type_symbol?te=W._atom_site_type_symbol[G].replace(/\(?\+?\d+.*/,""):W._atom_site_label&&(te=W._atom_site_label[G].split("_")[0].replace(/\(?\d+.*/,"")),Z.elem=te[0].toUpperCase()+te.substring(1,2).toLowerCase(),Z.bonds=[],Z.ss="c",Z.serial=G,Z.bondOrder=[],Z.properties={},o[o.length-1].push(Z)}if(W._pdbx_struct_oper_list_id!==void 0&&!c)for(let G=0;G<W._pdbx_struct_oper_list_id.length;G++){const Z=parseFloat(W["_pdbx_struct_oper_list_matrix[1][1]"][G]),te=parseFloat(W["_pdbx_struct_oper_list_matrix[1][2]"][G]),re=parseFloat(W["_pdbx_struct_oper_list_matrix[1][3]"][G]),de=parseFloat(W["_pdbx_struct_oper_list_vector[1]"][G]),le=parseFloat(W["_pdbx_struct_oper_list_matrix[2][1]"][G]),ye=parseFloat(W["_pdbx_struct_oper_list_matrix[2][2]"][G]),ke=parseFloat(W["_pdbx_struct_oper_list_matrix[2][3]"][G]),Te=parseFloat(W["_pdbx_struct_oper_list_vector[2]"][G]),Re=parseFloat(W["_pdbx_struct_oper_list_matrix[3][1]"][G]),we=parseFloat(W["_pdbx_struct_oper_list_matrix[3][2]"][G]),Ue=parseFloat(W["_pdbx_struct_oper_list_matrix[3][3]"][G]),Je=parseFloat(W["_pdbx_struct_oper_list_vector[3]"][G]),tt=new l.Matrix4(Z,te,re,de,le,ye,ke,Te,Re,we,Ue,Je);f[f.length-1].symmetries.push(tt)}const H=function(G){const Z=G.match("-"),te=(G=G.replace(/[-xyz]/g,"")).split("/");let re,de;return de=te[1]===void 0?1:parseInt(te[1]),re=te[0]===""?1:parseInt(te[0]),re/de*(Z?-1:1)};if(W._symmetry_equiv_pos_as_xyz!==void 0&&!c)for(let G=0;G<W._symmetry_equiv_pos_as_xyz.length;G++){const Z=W._symmetry_equiv_pos_as_xyz[G].replace(/["' ]/g,"").split(",").map(function(le){return le.replace(/-/g,"+-")});let te=new l.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let le=0;le<3;le++){const ye=Z[le].split("+");for(let ke=0;ke<ye.length;ke++){const Te=ye[ke];if(Te==="")continue;const Re=H(Te);Te.match("x")?te.elements[le+0]=Re:Te.match("y")?te.elements[le+4]=Re:Te.match("z")?te.elements[le+8]=Re:te.elements[le+12]=Re}}const re=V.getMatrix4(),de=new l.Matrix4().getInverse(re,!0);te=new l.Matrix4().multiplyMatrices(te,de),te=new l.Matrix4().multiplyMatrices(re,te),f[f.length-1].symmetries.push(te)}}for(let W=0;W<o.length;W++)!T||n.duplicateAssemblyAtoms&&!n.dontConnectDuplicatedAtoms||He(o[W],n),q(o[W],n.hbondCutoff),Pe(f[W].symmetries,o[W],n,f[W].cryst),n.duplicateAssemblyAtoms&&!n.dontConnectDuplicatedAtoms&&T&&He(o[W],n);return o}let We={"C.1":"C",C1:"C","C.2":"C",C2:"C","C.3":"C",C3:"C","C.ar":"C",Car:"C","C.cat":"C",Ccat:"C","H.spc":"H",Hspc:"H","H.t3p":"H",Ht3p:"H","N.1":"N",N1:"N","N.2":"N",N2:"N","N.3":"N",N3:"N","N.4":"N",N4:"N","N.am":"N",Nam:"N","N.ar":"N",Nar:"N","N.p13":"N",Np13:"N","O.2":"O",O2:"O","O.3":"O",O3:"O","O.co2":"O",Oco2:"O","O.spc":"O",Ospc:"O","O.t3p":"O",Ot3p:"O","P.3":"P",P3:"P","S.2":"S",S2:"S","S.3":"S",S3:"S","S.o":"S",So:"S","S.o2":"S",So2:"S"};function qe(ae,n){var o=[[]],c=!1;n.keepH!==void 0&&(c=!n.keepH);var f=ae.search(/@<TRIPOS>MOLECULE/),T=ae.search(/@<TRIPOS>ATOM/);if(f==-1||T==-1)return o;for(var x=ae.substring(f).split(/\r?\n|\r/);x.length>0;){var M=[],k=x[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),A=parseInt(k[0]),P=0;k.length>1&&(P=parseInt(k[1]));var L,W=4;for(L=3;L<x.length;L++)if(x[L]=="@<TRIPOS>ATOM"){W=L+1;break}var U=o[o.length-1].length,V=U+A;for(L=U;L<V;L++){var H={},G=(k=x[W++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "))[5];if(G=We[G]!==void 0?We[G]:(G=G.split(".")[0])[0].toUpperCase()+G.substring(1).toLowerCase(),H.atom=k[1],H.elem=G,!(H.elem=="H"&&c)){var Z=o[o.length-1].length,te=parseInt(k[0]);H.serial=te,H.x=parseFloat(k[2]),H.y=parseFloat(k[3]),H.z=parseFloat(k[4]),H.atom=k[5];var re=parseFloat(k[8]);H.index=Z,H.bonds=[],H.bondOrder=[],H.properties={charge:re,partialCharge:re},M[te]=Z,o[o.length-1].push(H)}}for(var de=!1;W<x.length;)if(x[W++]=="@<TRIPOS>BOND"){de=!0;break}if(de&&P)for(L=0;L<P;L++){k=x[W++].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var le=parseInt(k[1]),ye=o[o.length-1][M[le]],ke=parseInt(k[2]),Te=o[o.length-1][M[ke]],Re=parseInt(k[3]);isNaN(Re)&&(Re=1),ye!==void 0&&Te!==void 0&&(ye.bonds.push(M[ke]),ye.bondOrder.push(Re),Te.bonds.push(M[le]),Te.bondOrder.push(Re))}if(!n.multimodel)break;n.onemol||o.push([]),x.splice(0,W),ae=x.join(`
`)}return o}var Fe=s(40);function rt(ae,n){let o=ae.replace(/ /g,"");return o.length>0&&o[0]==="H"&&o!=="Hg"&&o!=="He"&&o!=="Hf"&&o!=="Hs"&&o!=="Ho"&&(o="H"),o.length>1&&(o=o[0].toUpperCase()+o.substring(1).toLowerCase(),Fe.bondTable[o]===void 0?o=o[0]:n&&(o==="Ca"||o==="Cd")&&(o="C")),o}function ot(ae){for(const n in ae)return!1;return!0}function at(ae,n,o){const c=[],f=n.assignBonds===void 0||n.assignBonds,T=!n.keepH,x=!!n.noSecondaryStructure,M=!n.noComputeSecondaryStructure,k=!n.doAssembly,A=n.altLoc?n.altLoc:"A",P={symmetries:[],cryst:void 0};let L,W=[];const U=[];let V;const H={};for(let G=0;G<ae.length;G++){V=ae[G].replace(/^\s*/,"");const Z=V.substring(0,6);let te,re,de;if(Z.indexOf("END")===0){if(W=ae.slice(G+1),Z==="END")for(const le in o)o.hasOwnProperty(le)&&delete o[le];break}if(Z==="ATOM  "||Z==="HETATM"){let le,ye,ke,Te,Re,we,Ue,Je,tt,Ze,ut,ft;if(ut=V.substring(16,17),ut!==" "&&ut!==A&&A!=="*"||(Ze=parseInt(V.substring(6,11)),L=V.substring(12,16).replace(/ /g,""),le=V.substring(17,20).replace(/ /g,""),ye=V.substring(21,22),ke=parseInt(V.substring(22,26)),Te=V.substring(26,27),Re=parseFloat(V.substring(30,38)),we=parseFloat(V.substring(38,46)),Ue=parseFloat(V.substring(46,54)),ft=parseFloat(V.substring(60,68)),tt=V.substring(76,78).replace(/ /g,""),tt=tt===""||Fe.bondTable[tt]===void 0?rt(V.substring(12,14),V[0]=="A"):tt[0].toUpperCase()+tt.substring(1).toLowerCase(),tt==="H"&&T))continue;Je=Z[0]=="H",U[Ze]=c.length,c.push({resn:le,x:Re,y:we,z:Ue,elem:tt,hetflag:Je,altLoc:ut,chain:ye,resi:ke,icode:Te,rescode:ke+(Te!==" "?"^"+Te:""),serial:Ze,atom:L,bonds:[],ss:"c",bondOrder:[],properties:{},b:ft,pdbline:V})}else if(Z==="SHEET "){te=V.substring(21,22),re=parseInt(V.substring(22,26)),de=parseInt(V.substring(33,37)),te in o||(o[te]={}),o[te][re]="s1";for(let le=re+1;le<de;le++)o[te][le]="s";o[te][de]="s2"}else if(Z==="CONECT"){const le=U[parseInt(V.substring(6,11))],ye=c[le],ke=[11,16,21,26];for(let Te=0;Te<4;Te++){const Re=U[parseInt(V.substring(ke[Te],ke[Te]+5))];let we=le+":"+Re;const Ue=c[Re];if(ye!==void 0&&Ue!==void 0)if(H[we]){H[we]+=1;for(let Je=0;Je<ye.bonds.length;Je++)if(ye.bonds[Je]==Re){const tt=H[we];ye.bondOrder[Je]=tt>=4?1:tt}}else H[we]=1,ye.bonds.length!=0&&ye.bonds[ye.bonds.length-1]===Re||(ye.bonds.push(Re),ye.bondOrder.push(1))}}else if(Z==="HELIX "){te=V.substring(19,20),re=parseInt(V.substring(21,25)),de=parseInt(V.substring(33,37)),te in o||(o[te]={}),o[te][re]="h1";for(let le=re+1;le<de;le++)o[te][le]="h";o[te][de]="h2"}else if(k||Z!=="REMARK"||V.substring(13,18)!=="BIOMT"){if(Z==="CRYST1"){let le,ye,ke,Te,Re,we;le=parseFloat(V.substring(7,15)),ye=parseFloat(V.substring(16,24)),ke=parseFloat(V.substring(25,33)),Te=parseFloat(V.substring(34,40)),Re=parseFloat(V.substring(41,47)),we=parseFloat(V.substring(48,54)),P.cryst={a:le,b:ye,c:ke,alpha:Te,beta:Re,gamma:we}}else if(Z==="ANISOU"){const le=c[U[parseInt(V.substring(6,11))]];if(le){const ye=V.substring(30).trim().split(/\s+/),ke={u11:parseInt(ye[0]),u22:parseInt(ye[1]),u33:parseInt(ye[2]),u12:parseInt(ye[3]),u13:parseInt(ye[4]),u23:parseInt(ye[5])};le.uMat=ke}}}else{let le,ye=new l.Matrix4;for(le=1;le<=3;le++)if(V=ae[G].replace(/^\s*/,""),parseInt(V.substring(18,19))==le)ye.elements[le-1]=parseFloat(V.substring(23,33)),ye.elements[le-1+4]=parseFloat(V.substring(33,43)),ye.elements[le-1+8]=parseFloat(V.substring(43,53)),ye.elements[le-1+12]=parseFloat(V.substring(53)),G++;else for(;V.substring(13,18)==="BIOMT";)G++,V=ae[G].replace(/^\s*/,"");ye.elements[3]=0,ye.elements[7]=0,ye.elements[11]=0,ye.elements[15]=1,P.symmetries.push(ye),G--}}if((function(G,Z){for(let te=0,re=G.length;te<re;te++){const de=G[te];for(let le=0;le<de.bonds.length;le++){const ye=G[de.bonds[le]],ke=Z[de.serial];ye&&ke&&ye.bonds.indexOf(ke)<0&&(ye.bonds.push(ke),ye.bondOrder.push(de.bondOrder[le]))}}})(c,U),f&&He(c,n),k||Pe(P.symmetries,c,n,P.cryst),M&&!x&&q(c,n.hbondCutoff),!ot(o))for(let G=0;G<c.length;G++){const Z=c[G];if(Z!==void 0&&Z.chain in o&&Z.resi in o[Z.chain]){const te=o[Z.chain][Z.resi];Z.ss=te[0],te.length>1&&(te[1]=="1"?Z.ssbegin=!0:te[1]=="2"&&(Z.ssend=!0))}}return[c,P,W]}function Ft(ae,n){n=n||{};var o=[],c={};o.modelData=[];for(var f=ae.split(/\r?\n|\r/);f.length>0;){var T=at(f,n,c),x=T[0],M=T[1];if(f=T[2],x.length!=0){if(n.multimodel&&n.onemol&&o.length>0)for(var k=o[0].length,A=0;A<x.length;A++){var P=x[A];P.index=A;for(var L=0;L<P.bonds.length;L++)P.bonds[L]+=k;o[0].push(P)}else o.modelData.push(M),o.push(x);if(!n.multimodel)break}}return o}function Ct(ae,n){var o=[[]],c=!n.noSecondaryStructure;o.modelData=[{symmetries:[]}];var f,T=[],x=ae.split(/\r?\n|\r/);for(let de=0;de<x.length;de++){var M=(f=x[de].replace(/^\s*/,"")).substring(0,6);if(M.indexOf("END")==0){if(n.multimodel){n.onemol||o.push([]);continue}break}if(M=="ATOM  "||M=="HETATM"){var k;let le=parseInt(f.substring(6,11)),ye=f.substring(12,16).replace(/ /g,""),ke=f.substring(17,20).trim(),Te=f.substring(21,22),Re=parseInt(f.substring(22,26));var A=f.substring(30).trim().split(/\s+/),P=parseFloat(A[0]),L=parseFloat(A[1]),W=parseFloat(A[2]),U=parseFloat(A[3]),V=parseFloat(A[4]),H=ye[0];ye.length>1&&ye[1].toUpperCase()!=ye[1]&&(H=ye.substring(0,2)),k=f[0]=="H",T[le]=o[o.length-1].length,o[o.length-1].push({resn:ke,x:P,y:L,z:W,elem:H,hetflag:k,chain:Te,resi:Re,serial:le,atom:ye,bonds:[],ss:"c",bondOrder:[],properties:{charge:U,partialCharge:U,radius:V},pdbline:f})}else if(M=="CONECT"){var G=parseInt(f.substring(6,11)),Z=o[o.length-1][T[G]];for(let le=0;le<4;le++){var te=parseInt(f.substring([11,16,21,26][le],[11,16,21,26][le]+5)),re=o[o.length-1][T[te]];Z!==void 0&&re!==void 0&&(Z.bonds.push(T[te]),Z.bondOrder.push(1))}}}for(let de=0;de<o.length;de++)He(o[de],n),c&&q(o[de],n.hbondCutoff);return o}var or=s(471),ar=function(ae){return String.fromCharCode.apply(null,ae).replace(/\0/g,"")},Mr=function(ae){return ae==0||ae==2||ae==4?"h":ae==3?"s":"c"};let Er=new Set(["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","NON-POLYMER","OTHER","PEPTIDE-LIKE","SACCHARIDE"]);function pr(ae,n){var o=!n.keepH,c=n.altLoc?n.altLoc:"A",f=!!n.noSecondaryStructure,T=!n.noComputeSecondaryStructure,x=!n.doAssembly,M=n.assemblyIndex?n.assemblyIndex:0;ae=typeof ae=="string"?(0,v.base64ToArray)(ae):new Uint8Array(ae);var k,A,P,L,W,U,V=or.decode(ae),H=[[]],G=H.modelData=[],Z=0,te=0,re=0,de=V.secStructList,le=V.bFactorList,ye=V.altLocList,ke=V.occupancyList,Te=V.bondAtomList,Re=V.bondOrderList,we=V.numModels;if(we==0)return H;n.multimodel||(we=1);var Ue=[];if(!x&&V.bioAssemblyList&&V.bioAssemblyList.length>0){var Je=V.bioAssemblyList[M].transformList;for(k=0,U=Je.length;k<U;k++){var tt=new l.Matrix4(Je[k].matrix);tt.transpose(),Ue.push(tt)}}var Ze=null;if(V.unitCell){var ut=V.unitCell;Ze={a:ut[0],b:ut[1],c:ut[2],alpha:ut[3],beta:ut[4],gamma:ut[5]}}let ft=[];V.entityList.forEach(Y=>{Y.chainIndexList.forEach(w=>{ft[w]=Y.type=="polymer"})});var Qe=0;for(W=0;W<we;W++){var pt=V.chainsPerModel[W],Be=H[H.length-1],et=[];for(G.push({symmetries:Ue,cryst:Ze}),k=0;k<pt;++k){var St=V.groupsPerChain[Z],st=ar(V.chainIdList.subarray(4*Z,4*Z+4));V.chainNameList&&(st=ar(V.chainNameList.subarray(4*Z,4*Z+4)));var wt=te,Et="";for(A=0;A<St;++A){var it=V.groupList[V.groupTypeList[te]],kt=it.atomNameList.length,Ht=0,Mt=!1,ct=!1;if(de){Ht=de[te];var Jt=Mr(Ht);te!=0&&Jt==Et||(Mt=!0),Et=Jt;var Nt=te+1;(Nt>=de.length||Mr(de[Nt]!=Jt))&&(ct=!0)}var qt=V.groupIdList[te],Vt=it.groupName;let Y=it.chemCompType;var Xt=re;let w=Er.has(Y)||!ft[Z];for(P=0;P<kt;++P){var yr=it.elementList[P];if(o&&yr=="H")re+=1;else{var Fr="";le&&(Fr=le[re]);var Tr="";ye&&ye[re]&&(Tr=String.fromCharCode(ye[re]));var ii="";if(ke&&(ii=ke[re]),Tr==""||Tr==c||c=="*"){var Wr=V.atomIdList[re],br=it.atomNameList[P],$r=0;it.atomChargeList&&($r=it.atomChargeList[P]);var ci=V.xCoordList[re],ni=V.yCoordList[re],hi=V.zCoordList[re];et[re]=Be.length,Be.push({resn:Vt,x:ci,y:ni,z:hi,elem:yr,hetflag:w,chain:st,resi:qt,icode:Tr,rescode:qt+(Tr!=" "?"^"+Tr:""),serial:Wr,altLoc:Tr,index:re,atom:br,bonds:[],ss:Mr(Ht),ssbegin:Mt,ssend:ct,bondOrder:[],properties:{charge:$r,occupancy:ii},b:Fr}),re+=1}else re+=1}}var Ii=it.bondAtomList;for(P=0,L=it.bondOrderList.length;P<L;++P){var xi=Xt+Ii[2*P],zi=Xt+Ii[2*P+1],Hr=it.bondOrderList[P],Xr=et[xi],qr=et[zi],ei=Be[Xr],m=Be[qr];ei&&m&&(ei.bonds.push(qr),ei.bondOrder.push(Hr),m.bonds.push(Xr),m.bondOrder.push(Hr))}te+=1}for(te=wt,A=0;A<St;++A)te+=1;Z+=1}if(Te)for(let Y=Qe,w=Te.length;Y<w;Y+=2){let be=Te[Y],_e=Te[Y+1],ve=Re?Re[Y/2]:1;if(be>=re){Qe=Y;break}let $e=et[be],Ie=et[_e],gt=Be[$e],Ne=Be[Ie];gt&&Ne&&(gt.bonds.push(Ie),gt.bondOrder.push(ve),Ne.bonds.push($e),Ne.bondOrder.push(ve))}n.multimodel&&(n.onemol||H.push([]))}if(!x)for(let Y=0;Y<H.length;Y++)Pe(G[Y].symmetries,H[Y],n,G[Y].cryst);return T&&!f&&q(H,n.hbondCutoff),H}function vr(ae){var n,o=[],c=0,f=ae.split(/\r?\n|\r/);if(!(f.length>0&&f[0].includes("VERSION")))return[];{var T=f.filter(function(V){return V.includes("POINTERS")||V.includes("ATOM_NAME")||V.includes("CHARGE")||V.includes("RADII")||V.includes("BONDS_INC_HYDROGEN")||V.includes("BONDS_WITHOUT_HYDROGEN")||V.includes("RESIDUE_LABEL")||V.includes("RESIDUE_POINTER")}),x=L("POINTERS");if(x==-1)return[];var M=W(x),k=parseInt(f[x+1].slice(0,M[1]));let U=parseInt(f[x+2].slice(M[1],M[0]+M[1]));if(isNaN(k)||k<=0)return[];if((x=L("ATOM_NAME"))==-1)return[];var A=(M=W(x))[0];for(let V=0;V<k/M[0];V++){V==parseInt(k/M[0])&&(A=k%M[0]);for(let H=0;H<A;H++){let G={},Z={charge:"",radii:""};G.serial=c,G.x=0,G.y=0,G.z=0,G.atom=f[x+1].slice(M[1]*H,M[1]*(H+1)).trim(),G.elem=f[x+1].slice(M[1]*H,M[1]*H+1).trim(),G.properties=Z,G.bonds=[],G.bondOrder=[],G.index=o.length,o.push(G),c++}x++}if((x=L("CHARGE"))!=-1){c=0,A=(M=W(x))[0];for(let V=0;V<k/M[0];V++){V==parseInt(k/M[0])&&(A=k%M[0]);for(let H=0;H<A;H++)o[c].properties.charge=parseFloat(f[x+1].slice(M[1]*H,M[1]*(H+1))),c++;x++}}var P=[];if((x=L("RESIDUE_POINTER"))!=-1){A=(M=W(x))[0],x+=1;for(let V=0;V<U/M[0];V++){V==parseInt(U/M[0])&&(A=U%M[0]);for(let H=0;H<A;H++)P.push(parseInt(f[x].slice(M[1]*H,M[1]*(H+1))));x++}if((x=L("RESIDUE_LABEL"))!=-1){let V=[];A=(M=W(x))[0],x+=1;for(let te=0;te<U/M[0];te++){te==parseInt(U/M[0])&&(A=U%M[0]);for(let re=0;re<A;re++)V.push(f[x].slice(M[1]*re,M[1]*(re+1)).trim());x++}let H=0,G=0,Z="";P.push(o.length+1);for(let te=0;te<o.length;te++)te+1>=P[H]&&(Z=V[H],H+=1,G+=1),o[te].resi=G,o[te].resn=Z}}if((x=L("RADII"))!=-1){c=0,A=(M=W(x))[0];for(let V=0;V<k/M[0];V++){V==parseInt(k/M[0])&&(A=k%M[0]);for(let H=0;H<A;H++)o[c].properties.radii=parseFloat(f[x+1].slice(M[1]*H,M[1]*(H+1))),c++;x++}}if((x=L("BONDS_WITHOUT_HYDROGEN"))!=-1)for(c=0,A=(M=W(x))[0],x+=1;!f[x].match(/^%FLAG/);){f[x+1].match(/^%FLAG/)&&(A=k%M[0]);for(let V=0;V<A;V++)c%3==0?n=parseInt(f[x].slice(M[1]*V,M[1]*(V+1))/3):c%3==1&&(o[n].bonds.push(parseInt(f[x].slice(M[1]*V,M[1]*(V+1))/3)),o[n].bondOrder.push(1)),c++;x++}if((x=L("BONDS_INC_HYDROGEN"))!=-1)for(c=0,A=(M=W(x))[0],x+=1;!f[x].match(/^%FLAG/);){f[x+1].match(/^%FLAG/)&&(A=k%M[0]);for(let V=0;V<A;V++)c%3==0?n=parseInt(f[x].slice(M[1]*V,M[1]*(V+1))/3):c%3==1&&(o[n].bonds.push(parseInt(f[x].slice(M[1]*V,M[1]*(V+1))/3)),o[n].bonds.push(1)),c++;x++}}function L(U){var V=f.indexOf(T.filter(function(H){return H.includes(U)})[0]);if(Number.isInteger(V)&&V>0){for(;!f[V].includes("FORMAT");)V++;return V}return-1}function W(U){var V=f[U].match(/\((\d*)\S*/),H=f[U].match(/[a-zA-Z](\d*)\)\s*/);return H==null&&(H=f[U].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[parseInt(V[1]),parseInt(H[1])]}return[o]}function xr(ae,n){const o=[],c=ae.split(/\r?\n|\r/);for(;c.length>0;){const f=parseInt(c[1]);if(c.length<3||isNaN(f)||f<=0||c.length<f+3)break;const T=[];o.push(T);let x=2;const M=T.length,k=M+f;for(let A=M;A<k;A++){const P=c[x++],L={};L.serial=A,L.atom=P.slice(10,15).trim(),L.elem=rt(L.atom,!0),L.x=10*parseFloat(P.slice(20,28)),L.y=10*parseFloat(P.slice(28,36)),L.z=10*parseFloat(P.slice(36,44)),L.resi=parseInt(P.slice(0,5)),L.resn=P.slice(5,10).trim(),L.bonds=[],L.bondOrder=[],L.properties={},P.length>44&&(L.dx=10*parseFloat(P.slice(44,52)),L.dy=10*parseFloat(P.slice(52,60)),L.dz=10*parseFloat(P.slice(60,68))),T[A]=L}if(c.length<=x+3){const A=c[x++].trim().split(/\s+/);if(A.length===3){for(let P=0;P<3;P++)A[P]=(10*parseFloat(A[P])).toString();o.box=A}}c.splice(0,++x)}for(let f=0;f<o.length;f++)He(o[f],n);return o}const fi={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};function kr(ae,n){const o=[],c=ae.split(/\r?\n|\r/);let f=0,T=0,x=0;for(;x<c.length-9;){for(var M=x;M<c.length;M++)if(c[M].match(/ITEM: NUMBER OF ATOMS/)&&(T=parseInt(c[M+1])),c[M].match(/ITEM: ATOMS/)){f=M+1;break}const k=c[f-1].replace("ITEM: ATOMS ","").split(" ");o.push([]);for(let A=f;A<f+T;A++){const P={},L={},W=c[A].split(" ");for(let U=0;U<W.length;U++){const V=fi[k[U]];V!==void 0&&(V==="serial"?P[V]=parseInt(W[U]):V==="x"||V==="y"||V==="z"?P[V]=parseFloat(W[U]):V==="charge"||V==="radius"?L[V]=parseFloat(W[U]):P[V]=W[U]),P.properties=L,P.bonds=[],P.bondOrder=[]}o[o.length-1][A-f]=P}x=f+T-1}if(n.assignBonds)for(let k=0;k<o.length;k++)(0,ce.assignBonds)(o[k],n);return o}var zr;(function(ae){(function(n){n[n.Int8=1]="Int8",n[n.Int16=2]="Int16",n[n.Int32=3]="Int32",n[n.Uint8=4]="Uint8",n[n.Uint16=5]="Uint16",n[n.Uint32=6]="Uint32"})(ae.IntDataType||(ae.IntDataType={})),(function(n){n[n.Float32=32]="Float32",n[n.Float64=33]="Float64"})(ae.FloatDataType||(ae.FloatDataType={})),ae.getDataType=function(n){let o;return o=n instanceof Int8Array?ae.IntDataType.Int8:n instanceof Int16Array?ae.IntDataType.Int16:n instanceof Int32Array?ae.IntDataType.Int32:n instanceof Uint8Array?ae.IntDataType.Uint8:n instanceof Uint16Array?ae.IntDataType.Uint16:n instanceof Uint32Array?ae.IntDataType.Uint32:n instanceof Float32Array?ae.FloatDataType.Float32:n instanceof Float64Array?ae.FloatDataType.Float64:ae.IntDataType.Int32,o},ae.isSignedIntegerDataType=function(n){if(n instanceof Int8Array||n instanceof Int16Array||n instanceof Int32Array)return!0;for(let o=0,c=n.length;o<c;o++)if(o<0)return!1;return!0}})(zr||(zr={}));const Di=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function wi(ae){let n=ae.data;for(let o=ae.encoding.length-1;o>=0;o--)n=Hi(n,ae.encoding[o]);return n}function Hi(ae,n){switch(n.kind){case"ByteArray":switch(n.type){case zr.IntDataType.Uint8:return ae;case zr.IntDataType.Int8:return(function(o){return new Int8Array(o.buffer,o.byteOffset)})(ae);case zr.IntDataType.Int16:return(function(o){return ze(o,2,Int16Array)})(ae);case zr.IntDataType.Uint16:return(function(o){return ze(o,2,Uint16Array)})(ae);case zr.IntDataType.Int32:return(function(o){return ze(o,4,Int32Array)})(ae);case zr.IntDataType.Uint32:return(function(o){return ze(o,4,Uint32Array)})(ae);case zr.FloatDataType.Float32:return(function(o){return ze(o,4,Float32Array)})(ae);case zr.FloatDataType.Float64:return(function(o){return ze(o,8,Float64Array)})(ae);default:throw new Error("unreachable")}case"FixedPoint":return(function(o,c){const f=o.length,T=Ee(c.srcType,f),x=1/c.factor;for(let M=0;M<f;M++)T[M]=x*o[M];return T})(ae,n);case"IntervalQuantization":return(function(o,c){const f=o.length,T=Ee(c.srcType,f),x=(c.max-c.min)/(c.numSteps-1),M=c.min;for(let k=0;k<f;k++)T[k]=M+x*o[k];return T})(ae,n);case"RunLength":return(function(o,c){const f=pe(c.srcType,c.srcSize);let T=0;for(let x=0,M=o.length;x<M;x+=2){const k=o[x],A=o[x+1];for(let P=0;P<A;++P)f[T++]=k}return f})(ae,n);case"Delta":return(function(o,c){const f=o.length,T=pe(c.srcType,f);if(!f)return o;T[0]=o[0]+(0|c.origin);for(let x=1;x<f;++x)T[x]=o[x]+T[x-1];return T})(ae,n);case"IntegerPacking":return(function(o,c){return o.length===c.srcSize?o:c.isUnsigned?(function(f,T){const x=T.byteCount===1?255:65535,M=f.length,k=new Int32Array(T.srcSize);let A=0,P=0;for(;A<M;){let L=0,W=f[A];for(;W===x;)L+=W,A++,W=f[A];L+=W,k[P]=L,A++,P++}return k})(o,c):(function(f,T){const x=T.byteCount===1?127:32767,M=-x-1,k=f.length,A=new Int32Array(T.srcSize);let P=0,L=0;for(;P<k;){let W=0,U=f[P];for(;U===x||U===M;)W+=U,P++,U=f[P];W+=U,A[L]=W,P++,L++}return A})(o,c)})(ae,n);case"StringArray":return(function(o,c){const f=wi({encoding:c.offsetEncoding,data:c.offsets}),T=wi({encoding:c.dataEncoding,data:o}),x=c.stringData,M=new Array(f.length);M[0]="";for(let P=1,L=f.length;P<L;P++)M[P]=x.substring(f[P-1],f[P]);let k=0;const A=new Array(T.length);for(let P=0,L=T.length;P<L;P++)A[k++]=M[T[P]+1];return A})(ae,n)}}function pe(ae,n){switch(ae){case zr.IntDataType.Int8:return new Int8Array(n);case zr.IntDataType.Int16:return new Int16Array(n);case zr.IntDataType.Int32:return new Int32Array(n);case zr.IntDataType.Uint8:return new Uint8Array(n);case zr.IntDataType.Uint16:return new Uint16Array(n);case zr.IntDataType.Uint32:return new Uint32Array(n);default:return new Int32Array(n)}}function Ee(ae,n){switch(ae){case zr.FloatDataType.Float32:return new Float32Array(n);case zr.FloatDataType.Float64:default:return new Float64Array(n)}}function ze(ae,n,o){return ae.byteOffset==0&&ae.byteLength==ae.buffer.byteLength||(ae=new Uint8Array(ae)),new o(Di?ae.buffer:(function(c,f){const T=new ArrayBuffer(c.length),x=new Uint8Array(T);for(let M=0,k=c.length;M<k;M+=f)for(let A=0;A<f;A++)x[M+f-A-1]=c[M+A];return T})(ae,n))}function dt(ae){const n=Object.create(null),o=Object.create(null);for(const c of ae.columns)n[c.name]=c;return{rowCount:ae.rowCount,name:ae.name.substring(1),fieldNames:ae.columns.map(c=>c.name),getField(c){const f=n[c];if(f)return o[c]||(o[c]=wi(f.data)),o[c]}}}var nt=s(471);class It{constructor(n){if(this.C={},n){let o=n.getField("comp_id"),c=n.getField("atom_id_1"),f=n.getField("atom_id_2"),T=n.getField("value_order");for(let x=0;x<o.length;x++){let M=o[x],k=c[x],A=f[x],P=T[x],L=1;P=="doub"?L=2:P=="trip"&&(L=3),this.C[M]==null&&(this.C[M]={}),this.C[M][k]==null&&(this.C[M][k]={}),this.C[M][A]==null&&(this.C[M][A]={}),this.C[M][k][A]=L,this.C[M][A][k]=L}}}order(n,o,c){return this.C[n]!==void 0&&this.C[n][o]!==void 0&&this.C[n][o][c]!==void 0?this.C[n][o][c]:0}}class ht{constructor(n){if(this.C=[],n){let o=n.getField("conn_type_id"),c=n.getField("ptnr1_label_asym_id"),f=n.getField("ptnr1_label_seq_id"),T=n.getField("ptnr1_label_comp_id"),x=n.getField("ptnr1_label_atom_id"),M=n.getField("ptnr2_label_asym_id"),k=n.getField("ptnr2_label_seq_id"),A=n.getField("ptnr2_label_comp_id"),P=n.getField("ptnr2_label_atom_id"),L=n.getField("pdbx_value_order");for(let W=0;W<o.length;W++)if(o[W]=="disulf"||o[W]=="covale"){let U=L?L[W]==""?1:parseInt(L[W]):1;this.C.push([[c[W],f[W],T[W],x[W]],[M[W],k[W],A[W],P[W]],U])}}}}class Lt{constructor(){this.R={}}add(n){this.R[n.lchain]==null&&(this.R[n.lchain]={}),this.R[n.lchain][n.lresi]==null&&(this.R[n.lchain][n.lresi]={}),this.R[n.lchain][n.lresi][n.lresn]==null&&(this.R[n.lchain][n.lresi][n.lresn]=[]),this.R[n.lchain][n.lresi][n.lresn].push(n),this.R[n.lchain][n.lresi][n.lresn][n.atom]=n}geta([n,o,c,f]){if(this.R[n]!==void 0&&this.R[n][o]!==void 0&&this.R[n][o][c]!==void 0)return this.R[n][o][c][f]}setBonds(n,o){for(let c in this.R)for(let f in this.R[c])for(let T in this.R[c][f]){let x=this.R[c][f][T];for(let M=0;M<x.length;M++)for(let k=M+1;k<x.length;k++){let A=x[M],P=x[k],L=n.order(T,A.atom,P.atom);A.altLoc!=P.altLoc&&A.altLoc!=""&&P.altLoc!=""&&(L=0),L>0&&(A.bonds.push(P.index),P.bonds.push(A.index),A.bondOrder.push(L),P.bondOrder.push(L))}}for(let c of o.C){let f=c[0],T=c[1],x=c[2],M=this.geta(f),k=this.geta(T);M!=null&&k!=null&&(M.bonds.push(k.index),k.bonds.push(M.index),M.bondOrder.push(x),k.bondOrder.push(x))}}}function Ut(ae,n){var o=!n.keepH,c=n.altLoc?n.altLoc:"A",f=!n.noComputeSecondaryStructure;const T=!n.doAssembly,x=n.assignBonds===void 0||n.assignBonds;if(typeof ae=="string")try{ae=(0,v.base64ToArray)(ae)}catch{ae=new TextEncoder().encode(ae)}else ae=new Uint8Array(ae);var M=nt.decodeMsgpack(ae);M==31&&(ae=(0,v.inflateString)(ae,!1),M=nt.decodeMsgpack(ae));var k=[],A=k.modelData=[],P=M.dataBlocks.length;if(P==0)return k;n.multimodel||(P=1);for(let L=0;L<P;L++){let W=k.length;const U=[];A.push({symmetries:[]}),k.push([]);const V=M.dataBlocks[L],H=Object.create(null);for(const Mt of V.categories)H[Mt.name.substr(1)]=dt(Mt);let G={},Z=H.struct_conf;if(Z){let Mt=Z.getField("conf_type_id"),ct=Z.getField("beg_label_asym_id"),Jt=Z.getField("beg_label_seq_id"),Nt=Z.getField("end_label_seq_id");for(let qt=0;qt<Mt.length;qt++)if(Mt[qt].startsWith("H")){let Vt=ct[qt],Xt=Jt[qt],yr=Nt[qt];Vt in G||(G[Vt]={}),G[Vt][Xt]="h1";for(let Fr=Xt+1;Fr<yr;Fr++)G[Vt][Fr]="h";G[Vt][yr]="h2"}}let te=H.struct_sheet_range;if(te){let Mt=te.getField("id"),ct=te.getField("beg_label_asym_id"),Jt=te.getField("beg_label_seq_id"),Nt=te.getField("end_label_seq_id");for(let qt=0;qt<Mt.length;qt++){let Vt=ct[qt],Xt=Jt[qt],yr=Nt[qt];Vt in G||(G[Vt]={}),G[Vt][Xt]="s1";for(let Fr=Xt+1;Fr<yr;Fr++)G[Vt][Fr]="s";G[Vt][yr]="s2"}}let re=H.pdbx_struct_oper_list,de=re.getField("id");if(de&&!T){let Mt=re.getField("matrix[1][1]"),ct=re.getField("matrix[1][2]"),Jt=re.getField("matrix[1][3]"),Nt=re.getField("matrix[2][1]"),qt=re.getField("matrix[2][2]"),Vt=re.getField("matrix[2][3]"),Xt=re.getField("matrix[3][1]"),yr=re.getField("matrix[3][2]"),Fr=re.getField("matrix[3][3]"),Tr=re.getField("vector[1]"),ii=re.getField("vector[2]"),Wr=re.getField("vector[3]");for(let br=0;br<de.length;br++){const $r=new l.Matrix4(Mt[br],ct[br],Jt[br],Tr[br],Nt[br],qt[br],Vt[br],ii[br],Xt[br],yr[br],Fr[br],Wr[br]);A[A.length-1].symmetries.push($r)}}let le=new It(H.chem_comp_bond),ye=new Lt,ke=new ht(H.struct_conn),Te=H.atom_site,Re=Te.rowCount,we=Te.getField("group_PDB"),Ue=Te.getField("Cartn_x"),Je=Te.getField("Cartn_y"),tt=Te.getField("Cartn_z"),Ze=Te.getField("auth_asym_id"),ut=Te.getField("label_asym_id"),ft=Te.getField("auth_seq_id"),Qe=Te.getField("label_seq_id"),pt=Te.getField("auth_comp_id"),Be=Te.getField("label_comp_id"),et=Te.getField("auth_atom_id"),St=Te.getField("label_atom_id"),st=Te.getField("type_symbol"),wt=Te.getField("B_iso_or_equiv"),Et=Te.getField("id"),it=Te.getField("label_alt_id"),kt=Te.getField("pdbx_PDB_model_num"),Ht=kt?kt[0]:0;for(let Mt=0;Mt<Re;Mt++){if(we!==void 0&&we[Mt]==="TER")continue;if(kt&&kt[Mt]!=Ht){if(Ht=kt[Mt],!n.multimodel)break;n.onemol||(k.push([]),A.push(A[A.length-1]),Ht=kt[Mt],ye.setBonds(le,ke),ye=new Lt)}const ct={};ct.x=Ue[Mt],ct.y=Je[Mt],ct.z=tt[Mt],ct.chain=Ze?Ze[Mt]:ut?ut[Mt]:void 0,ct.lchain=ut?ut[Mt]:void 0,ct.resi=ft?ft[Mt]:Qe?Qe[Mt]:void 0,ct.lresi=Qe?Qe[Mt]:void 0,ct.resn=pt?pt[Mt].trim():Be?Be[Mt].trim():void 0,ct.lresn=Be?Be[Mt].trim():void 0,ct.atom=et?et[Mt].replace(/"/gm,""):St?St[Mt].replace(/"/gm,""):void 0,ct.icode=it?it[Mt]:void 0,ct.altLoc=ct.icode,ct.hetflag=!we||we[Mt]==="HETA"||we[Mt]==="HETATM";let Jt="X";st&&(Jt=st[Mt].replace(/\(?\+?\d+.*/,"")),ct.elem=Jt[0].toUpperCase()+Jt.substring(1,2).toLowerCase(),wt&&(ct.b=wt[Mt]),o&&ct.elem=="H"||ct.altLoc!=""&&ct.altLoc!=c&&c!="*"||(ct.bonds=[],ct.ss="c",ct.serial=Et[Mt],ct.model=Ht,ct.bondOrder=[],ct.properties={},ct.index=k[k.length-1].length,U[ct.serial]=[k.length,ct.index],k[k.length-1].push(ct),ye.add(ct))}if(ye.setBonds(le,ke),!ot(G))for(let Mt=W;Mt<k.length;Mt++){let ct=k[Mt];for(let Jt=0;Jt<ct.length;Jt++){const Nt=ct[Jt];if(Nt!==void 0&&Nt.lchain in G&&Nt.lresi in G[Nt.lchain]){const qt=G[Nt.lchain][Nt.lresi];Nt.ss=qt[0],qt.length>1&&(qt[1]=="1"?Nt.ssbegin=!0:qt[1]=="2"&&(Nt.ssend=!0))}}}n.multimodel&&L<P-1&&(n.onemol||(k.push([]),A.push({symmetries:[]})))}for(let L=0;L<k.length;L++)!x||n.duplicateAssemblyAtoms&&!n.dontConnectDuplicatedAtoms||He(k[L],n),f&&q(k[L],n.hbondCutoff),Pe(A[L].symmetries,k[L],n,A[L].cryst),n.duplicateAssemblyAtoms&&!n.dontConnectDuplicatedAtoms&&x&&He(k[L],n);return k}const zt={vasp:me.VASP,VASP:me.VASP,cube:Me.CUBE,CUBE:Me.CUBE,xyz:O,XYZ:O,sdf:he,SDF:he,json:se,cdjson:se,CDJSON:se,mcif:Ce,cif:Ce,CIF:Ce,mol2:qe,MOL2:qe,pdb:Ft,PDB:Ft,pdbqt:Ft,PDBQT:Ft,pqr:Ct,PQR:Ct,mmtf:pr,MMTF:pr,prmtop:vr,PRMTOP:vr,gro:xr,GRO:xr,lammpstrj:kr,LAMMPSTRJ:kr,bcif:Ut,BCIF:Ut};function mr(ae,n="utf8"){return new TextDecoder(n).decode(ae)}const li=new TextEncoder,Ci=(()=>{const ae=new Uint8Array(4);return!((new Uint32Array(ae.buffer)[0]=1)&ae[0])})(),ui={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class gi{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(n=8192,o={}){let c=!1;typeof n=="number"?n=new ArrayBuffer(n):(c=!0,this.lastWrittenByte=n.byteLength);const f=o.offset?o.offset>>>0:0,T=n.byteLength-f;let x=f;(ArrayBuffer.isView(n)||n instanceof gi)&&(n.byteLength!==n.buffer.byteLength&&(x=n.byteOffset+f),n=n.buffer),this.lastWrittenByte=c?T:0,this.buffer=n,this.length=T,this.byteLength=T,this.byteOffset=x,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,x,T),this._mark=0,this._marks=[]}available(n=1){return this.offset+n<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(n=1){return this.offset+=n,this}back(n=1){return this.offset-=n,this}seek(n){return this.offset=n,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const n=this._marks.pop();if(n===void 0)throw new Error("Mark stack empty");return this.seek(n),this}rewind(){return this.offset=0,this}ensureAvailable(n=1){if(!this.available(n)){const o=2*(this.offset+n),c=new Uint8Array(o);c.set(new Uint8Array(this.buffer)),this.buffer=c.buffer,this.length=o,this.byteLength=o,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(n=1){return this.readArray(n,"uint8")}readArray(n,o){const c=ui[o].BYTES_PER_ELEMENT*n,f=this.byteOffset+this.offset,T=this.buffer.slice(f,f+c);if(this.littleEndian===Ci&&o!=="uint8"&&o!=="int8"){const M=new Uint8Array(this.buffer.slice(f,f+c));M.reverse();const k=new ui[o](M.buffer);return this.offset+=c,k.reverse(),k}const x=new ui[o](T);return this.offset+=c,x}readInt16(){const n=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,n}readUint16(){const n=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,n}readInt32(){const n=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,n}readUint32(){const n=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat32(){const n=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat64(){const n=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,n}readBigInt64(){const n=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,n}readBigUint64(){const n=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,n}readChar(){return String.fromCharCode(this.readInt8())}readChars(n=1){let o="";for(let c=0;c<n;c++)o+=this.readChar();return o}readUtf8(n=1){return mr(this.readBytes(n))}decodeText(n=1,o="utf8"){return mr(this.readBytes(n),o)}writeBoolean(n){return this.writeUint8(n?255:0),this}writeInt8(n){return this.ensureAvailable(1),this._data.setInt8(this.offset++,n),this._updateLastWrittenByte(),this}writeUint8(n){return this.ensureAvailable(1),this._data.setUint8(this.offset++,n),this._updateLastWrittenByte(),this}writeByte(n){return this.writeUint8(n)}writeBytes(n){this.ensureAvailable(n.length);for(let o=0;o<n.length;o++)this._data.setUint8(this.offset++,n[o]);return this._updateLastWrittenByte(),this}writeInt16(n){return this.ensureAvailable(2),this._data.setInt16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(n){return this.ensureAvailable(2),this._data.setUint16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(n){return this.ensureAvailable(4),this._data.setInt32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(n){return this.ensureAvailable(4),this._data.setUint32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(n){return this.ensureAvailable(4),this._data.setFloat32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(n){return this.ensureAvailable(8),this._data.setFloat64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(n){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(n){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(n){return this.writeUint8(n.charCodeAt(0))}writeChars(n){for(let o=0;o<n.length;o++)this.writeUint8(n.charCodeAt(o));return this}writeUtf8(n){return this.writeBytes((function(o){return li.encode(o)})(n))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}const jr=1,Lr=2,Dr=3,rr=4,vi=5,bi=6;function Ki(ae){switch(Number(ae)){case jr:return"byte";case Lr:return"char";case Dr:return"short";case rr:return"int";case vi:return"float";case bi:return"double";default:return"undefined"}}function Ai(ae){switch(Number(ae)){case jr:case Lr:return 1;case Dr:return 2;case rr:case vi:return 4;case bi:return 8;default:return-1}}function Ni(ae){switch(String(ae)){case"byte":return jr;case"char":return Lr;case"short":return Dr;case"int":return rr;case"float":return vi;case"double":return bi;default:return-1}}function Ti(ae,n){if(ae!==1){const o=new Array(ae);for(let c=0;c<ae;c++)o[c]=n();return o}return n()}function pi(ae,n,o){switch(n){case jr:return Array.from(ae.readBytes(o));case Lr:return(c=ae.readChars(o)).charCodeAt(c.length-1)===0?c.substring(0,c.length-1):c;case Dr:return Ti(o,ae.readInt16.bind(ae));case rr:return Ti(o,ae.readInt32.bind(ae));case vi:return Ti(o,ae.readFloat32.bind(ae));case bi:return Ti(o,ae.readFloat64.bind(ae));default:throw new Error(`non valid type ${n}`)}var c}function Br(ae,n){if(ae)throw new TypeError(`Not a valid NetCDF v3.x file: ${n}`)}function Zr(ae){ae.offset%4!=0&&ae.skip(4-ae.offset%4)}function Vi(ae){const n=ae.readUint32(),o=ae.readChars(n);return Zr(ae),o}function yi(ae,n){const o={version:n},c={length:ae.readUint32()},f=(function(x){const M={};let k,A;const P=x.readUint32();let L;if(P===0)return Br(x.readUint32()!==0,"wrong empty tag for list of dimensions"),[];{Br(P!==10,"wrong tag for list of dimensions");const W=x.readUint32();L=new Array(W);for(let U=0;U<W;U++){const V=Vi(x),H=x.readUint32();H===0&&(k=U,A=V),L[U]={name:V,size:H}}}return k!==void 0&&(M.recordId=k),A!==void 0&&(M.recordName=A),M.dimensions=L,M})(ae);Array.isArray(f)||(c.id=f.recordId,c.name=f.recordName,o.dimensions=f.dimensions),o.globalAttributes=Wi(ae);const T=(function(x,M,k){const A=x.readUint32();let P,L=0;if(A===0)return Br(x.readUint32()!==0,"wrong empty tag for list of variables"),[];{Br(A!==11,"wrong tag for list of variables");const W=x.readUint32();P=new Array(W);for(let U=0;U<W;U++){const V=Vi(x),H=x.readUint32(),G=new Array(H);for(let ye=0;ye<H;ye++)G[ye]=x.readUint32();const Z=Wi(x),te=x.readUint32();Br(te<1&&te>6,`non valid type ${te}`);const re=x.readUint32();let de=x.readUint32();k===2&&(Br(de>0,"offsets larger than 4GB not supported"),de=x.readUint32());let le=!1;M!==void 0&&G[0]===M&&(L+=re,le=!0),P[U]={name:V,dimensions:G,attributes:Z,type:Ki(te),size:re,offset:de,record:le}}}return{variables:P,recordStep:L}})(ae,c?.id,n);return Array.isArray(T)||(o.variables=T.variables,c.recordStep=T.recordStep),o.recordDimension=c,o}function Wi(ae){const n=ae.readUint32();let o;if(n===0)return Br(ae.readUint32()!==0,"wrong empty tag for list of attributes"),[];{Br(n!==12,"wrong tag for list of attributes");const c=ae.readUint32();o=new Array(c);for(let f=0;f<c;f++){const T=Vi(ae),x=ae.readUint32();Br(x<1||x>6,`non valid type ${x}`);const M=ae.readUint32(),k=pi(ae,x,M);Zr(ae),o[f]={name:T,type:Ki(x),value:k}}}return o}function tn(){const ae=[];ae.push("DIMENSIONS");for(const o of this.dimensions)ae.push(`  ${o.name.padEnd(30)} = size: ${o.size}`);ae.push(""),ae.push("GLOBAL ATTRIBUTES");for(const o of this.globalAttributes)ae.push(`  ${o.name.padEnd(30)} = ${o.value}`);const n=JSON.parse(JSON.stringify(this.variables));ae.push(""),ae.push("VARIABLES:");for(const o of n){o.value=this.getDataVariable(o);let c=JSON.stringify(o.value);c.length>50&&(c=c.substring(0,50)),isNaN(o.value.length)||(c+=` (length: ${o.value.length})`),ae.push(`  ${o.name.padEnd(30)} = ${c}`)}return ae.join(`
`)}class on{constructor(n){this.toString=tn;const o=new gi(n);o.setBigEndian(),Br(o.readChars(3)!=="CDF","should start with CDF");const c=o.readByte();Br(c>2,"unknown version"),this.header=yi(o,c),this.buffer=o}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(n){const o=this.globalAttributes.find(c=>c.name===n);return o?o.value:null}getDataVariableAsString(n){const o=this.getDataVariable(n);return o?o.join(""):null}get variables(){return this.header.variables}getDataVariable(n){let o;if(o=typeof n=="string"?this.header.variables.find(c=>c.name===n):n,o===void 0)throw new Error("Not a valid NetCDF v3.x file: variable not found");return this.buffer.seek(o.offset),o.record?(function(c,f,T){const x=Ni(f.type),M=f.size?f.size/Ai(x):1,k=T.length,A=new Array(k),P=T.recordStep;if(!P)throw new Error("recordDimension.recordStep is undefined");for(let L=0;L<k;L++){const W=c.offset;A[L]=pi(c,x,M),c.seek(W+P)}return A})(this.buffer,o,this.header.recordDimension):(function(c,f){const T=Ni(f.type),x=f.size/Ai(T),M=new Array(x);for(let k=0;k<x;k++)M[k]=pi(c,T,1);return M})(this.buffer,o)}dataVariableExists(n){return this.header.variables.find(o=>o.name===n)!==void 0}attributeExists(n){return this.globalAttributes.find(o=>o.name===n)!==void 0}}class ur{static sameObj(n,o){return n&&o?JSON.stringify(n)==JSON.stringify(o):n==o}constructor(n,o,c){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new d.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=y.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=o||{},this.viewer=c,this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:y.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=n}getRadiusFromStyle(n,o){var c=this.defaultSphereRadius;if(o.radius!==void 0)c=o.radius;else if(ur.vdwRadii[n.elem])c=ur.vdwRadii[n.elem];else if(n.elem.length>1){let f=n.elem;f=f[0].toUpperCase()+f[1].toLowerCase(),ur.vdwRadii[f]&&(c=ur.vdwRadii[f])}return o.scale!==void 0&&(c*=o.scale),c}drawAtomCross(n,o){if(n.style.cross){var c=n.style.cross;if(!c.hidden){var f=c.linewidth||ur.defaultlineWidth;o[f]||(o[f]=new l.Geometry);var T=o[f].updateGeoGroup(6),x=this.getRadiusFromStyle(n,c),M=[[x,0,0],[-x,0,0],[0,x,0],[0,-x,0],[0,0,x],[0,0,-x]],k=n.clickable||n.hoverable;k&&n.intersectionShape===void 0&&(n.intersectionShape={sphere:[],cylinder:[],line:[]});for(var A=(0,v.getColorFromStyle)(n,c),P=T.vertexArray,L=T.colorArray,W=0;W<6;W++){var U=3*T.vertices;if(T.vertices++,P[U]=n.x+M[W][0],P[U+1]=n.y+M[W][1],P[U+2]=n.z+M[W][2],L[U]=A.r,L[U+1]=A.g,L[U+2]=A.b,k){var V=new d.Vector3(M[W][0],M[W][1],M[W][2]);V.multiplyScalar(.1),V.set(V.x+n.x,V.y+n.y,V.z+n.z),n.intersectionShape.line.push(V)}}}}}getGoodCross(n,o,c,f){for(var T=null,x=-1,M=0,k=n.bonds.length;M<k;M++)if(n.bonds[M]!=o.index){let P=n.bonds[M],L=this.atoms[P],W=new d.Vector3(L.x,L.y,L.z).clone();W.sub(c);let U=W.clone();U.cross(f);var A=U.lengthSq();if(A>x&&(T=U,(x=A)>.1))return T}return T}getSideBondV(n,o,c){var f,T,x,M,k=new d.Vector3(n.x,n.y,n.z),A=new d.Vector3(o.x,o.y,o.z).clone(),P=null;if(A.sub(k),n.bonds.length===1)o.bonds.length===1?(P=A.clone(),Math.abs(P.x)>1e-4?P.y+=1:P.x+=1):(f=(c+1)%o.bonds.length,T=o.bonds[f],(x=this.atoms[T]).index==n.index&&(f=(f+1)%o.bonds.length,T=o.bonds[f],x=this.atoms[T]),(M=new d.Vector3(x.x,x.y,x.z).clone()).sub(k),(P=M.clone()).cross(A));else if((P=this.getGoodCross(n,o,k,A)).lengthSq()<.01){var L=this.getGoodCross(o,n,k,A);L!=null&&(P=L)}return P.lengthSq()<.01&&(P=A.clone(),Math.abs(P.x)>1e-4?P.y+=1:P.x+=1),P.cross(A),P.normalize(),P}addLine(n,o,c,f,T,x){n[c]=f.x,n[c+1]=f.y,n[c+2]=f.z,o[c]=x.r,o[c+1]=x.g,o[c+2]=x.b,n[c+3]=T.x,n[c+4]=T.y,n[c+5]=T.z,o[c+3]=x.r,o[c+4]=x.g,o[c+5]=x.b}drawBondLines(n,o,c){if(n.style.line){var f=n.style.line;if(!f.hidden){var T,x,M,k,A=f.linewidth||ur.defaultlineWidth;c[A]||(c[A]=new l.Geometry);for(var P=c[A].updateGeoGroup(6*n.bonds.length),L=P.vertexArray,W=P.colorArray,U=0;U<n.bonds.length;U++){var V=o[n.bonds[U]];if(V.style.line&&!(n.index>=V.index)){var H=new d.Vector3(n.x,n.y,n.z),G=new d.Vector3(V.x,V.y,V.z),Z=H.clone().add(G).multiplyScalar(.5),te=!1,re=n.clickable||n.hoverable,de=V.clickable||V.hoverable;(re||de)&&(re&&(n.intersectionShape===void 0&&(n.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),n.intersectionShape.line.push(H),n.intersectionShape.line.push(Z)),de&&(V.intersectionShape===void 0&&(V.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),V.intersectionShape.line.push(Z),V.intersectionShape.line.push(G)));var le=(0,v.getColorFromStyle)(n,n.style.line),ye=(0,v.getColorFromStyle)(V,V.style.line);if(n.bondStyles&&n.bondStyles[U]){var ke=n.bondStyles[U];if(!ke.iswire)continue;ke.singleBond&&(te=!0),ke.color1!==void 0&&(le=y.CC.color(ke.color1)),ke.color2!==void 0&&(ye=y.CC.color(ke.color2))}var Te,Re,we=3*P.vertices;if(n.bondOrder[U]>1&&n.bondOrder[U]<4&&!te){var Ue=this.getSideBondV(n,V,U),Je=G.clone();Je.sub(H),n.bondOrder[U]==2?(Ue.multiplyScalar(.1),(T=H.clone()).add(Ue),(x=H.clone()).sub(Ue),(M=T.clone()).add(Je),(k=x.clone()).add(Je),le==ye?(P.vertices+=4,this.addLine(L,W,we,T,M,le),this.addLine(L,W,we+6,x,k,le)):(P.vertices+=8,Je.multiplyScalar(.5),(Te=T.clone()).add(Je),(Re=x.clone()).add(Je),this.addLine(L,W,we,T,Te,le),this.addLine(L,W,we+6,Te,M,ye),this.addLine(L,W,we+12,x,Re,le),this.addLine(L,W,we+18,Re,k,ye))):n.bondOrder[U]==3&&(Ue.multiplyScalar(.1),(T=H.clone()).add(Ue),(x=H.clone()).sub(Ue),(M=T.clone()).add(Je),(k=x.clone()).add(Je),le==ye?(P.vertices+=6,this.addLine(L,W,we,H,G,le),this.addLine(L,W,we+6,T,M,le),this.addLine(L,W,we+12,x,k,le)):(P.vertices+=12,Je.multiplyScalar(.5),(Te=T.clone()).add(Je),(Re=x.clone()).add(Je),this.addLine(L,W,we,H,Z,le),this.addLine(L,W,we+6,Z,G,ye),this.addLine(L,W,we+12,T,Te,le),this.addLine(L,W,we+18,Te,M,ye),this.addLine(L,W,we+24,x,Re,le),this.addLine(L,W,we+30,Re,k,ye)))}else le==ye?(P.vertices+=2,this.addLine(L,W,we,H,G,le)):(P.vertices+=4,this.addLine(L,W,we,H,Z,le),this.addLine(L,W,we+6,Z,G,ye))}}}}}drawAtomSphere(n,o){if(n.style.sphere){var c=n.style.sphere;if(!c.hidden){var f=(0,v.getColorFromStyle)(n,c),T=this.getRadiusFromStyle(n,c);if((n.clickable===!0||n.hoverable)&&n.intersectionShape!==void 0){var x=new d.Vector3(n.x,n.y,n.z);n.intersectionShape.sphere.push(new g.Sphere(x,T))}h.drawSphere(o,n,T,f)}}}drawAtomClickSphere(n){if(n.style.clicksphere){var o=n.style.clicksphere;if(!o.hidden){var c=this.getRadiusFromStyle(n,o);if((n.clickable===!0||n.hoverable)&&n.intersectionShape!==void 0){var f=new d.Vector3(n.x,n.y,n.z);n.intersectionShape.sphere.push(new g.Sphere(f,c))}}}}drawAtomInstanced(n,o){if(n.style.sphere){var c=n.style.sphere;if(!c.hidden){var f=this.getRadiusFromStyle(n,c),T=(0,v.getColorFromStyle)(n,c),x=o.updateGeoGroup(1),M=x.vertices,k=3*M,A=x.vertexArray,P=x.colorArray,L=x.radiusArray;if(A[k]=n.x,A[k+1]=n.y,A[k+2]=n.z,P[k]=T.r,P[k+1]=T.g,P[k+2]=T.b,L[M]=f,(n.clickable===!0||n.hoverable)&&n.intersectionShape!==void 0){var W=new d.Vector3(n.x,n.y,n.z);n.intersectionShape.sphere.push(new g.Sphere(W,f))}x.vertices+=1}}}drawSphereImposter(n,o,c,f){var T,x=n.updateGeoGroup(4),M=x.vertices,k=3*M,A=x.vertexArray,P=x.colorArray;for(T=0;T<4;T++)A[k+3*T]=o.x,A[k+3*T+1]=o.y,A[k+3*T+2]=o.z;var L=x.normalArray;for(T=0;T<4;T++)P[k+3*T]=f.r,P[k+3*T+1]=f.g,P[k+3*T+2]=f.b;L[k+0]=-c,L[k+1]=c,L[k+2]=0,L[k+3]=-c,L[k+4]=-c,L[k+5]=0,L[k+6]=c,L[k+7]=-c,L[k+8]=0,L[k+9]=c,L[k+10]=c,L[k+11]=0,x.vertices+=4;var W=x.faceArray,U=x.faceidx;W[U+0]=M,W[U+1]=M+1,W[U+2]=M+2,W[U+3]=M+2,W[U+4]=M+3,W[U+5]=M,x.faceidx+=6}drawAtomImposter(n,o){if(n.style.sphere){var c=n.style.sphere;if(!c.hidden){var f=this.getRadiusFromStyle(n,c),T=(0,v.getColorFromStyle)(n,c);if((n.clickable===!0||n.hoverable)&&n.intersectionShape!==void 0){var x=new d.Vector3(n.x,n.y,n.z);n.intersectionShape.sphere.push(new g.Sphere(x,f))}this.drawSphereImposter(o,n,f,T)}}}calculateDashes(n,o,c,f,T){var x=Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2)+Math.pow(n.z-o.z,2));c=Math.max(c,0),T=Math.max(T,0)+2*c,(f=Math.max(f,.001))+T>x&&(f=x,T=0);var M,k=Math.floor((x-f)/(f+T))+1;T=(x-k*f)/k;for(var A=new d.Vector3(n.x,n.y,n.z),P=new d.Vector3((o.x-n.x)/(x/T),(o.y-n.y)/(x/T),(o.z-n.z)/(x/T)),L=new d.Vector3((o.x-n.x)/(x/f),(o.y-n.y)/(x/f),(o.z-n.z)/(x/f)),W=[],U=0;U<k;U++)M=new d.Vector3(A.x+L.x,A.y+L.y,A.z+L.z),W.push({from:A,to:M}),A=new d.Vector3(M.x+P.x,M.y+P.y,M.z+P.z);return W}static drawStickImposter(n,o,c,f,T,x=0,M=0){for(var k=n.updateGeoGroup(4),A=k.vertices,P=3*A,L=k.vertexArray,W=k.colorArray,U=k.radiusArray,V=k.normalArray,H=T.r,G=T.g,Z=T.b,te=function(ke){var Te=-ke;return Te==0&&(Te=-1e-4),Te},re=P,de=0;de<4;de++)L[re]=o.x,V[re]=c.x,W[re]=H,L[++re]=o.y,V[re]=c.y,W[re]=G,L[++re]=o.z,V[re]=c.z,W[re]=de<2?Z:te(Z),re++;k.vertices+=4,U[A]=-f,U[A+1]=f,U[A+2]=-f,U[A+3]=f;var le=k.faceArray,ye=k.faceidx;le[ye+0]=A,le[ye+1]=A+1,le[ye+2]=A+2,le[ye+3]=A+2,le[ye+4]=A+3,le[ye+5]=A,k.faceidx+=6}drawBondSticks(n,o,c){var f,T;if(n.style.stick){var x=n.style.stick;if(!x.hidden){var M,k,A,P,L,W,U,V,H,G,Z,te,re,de,le=x.radius||this.defaultStickRadius,ye=x.doubleBondScaling||.4,ke=x.tripleBondScaling||.25,Te=((f=x.dashedBondConfig)===null||f===void 0?void 0:f.dashLength)||.1,Re=((T=x.dashedBondConfig)===null||T===void 0?void 0:T.gapLength)||.25,we=le,Ue=x.singleBonds||!1,Je=x.dashedBonds||!1,tt=0,Ze=0,ut=(0,v.getColorFromStyle)(n,x);!n.capDrawn&&n.bonds.length<4&&(tt=2);var ft=Wr=>{var br=c.imposter?ur.drawStickImposter:h.drawCylinder;return!Je&&Wr>=1?br:($r,ci,ni,hi,Ii,xi=0,zi=0,Hr=.1,Xr=.25)=>{this.calculateDashes(ci,ni,hi,Hr,Xr).forEach(qr=>{br($r,qr.from,qr.to,hi,Ii,xi,zi)})}};for(A=0;A<n.bonds.length;A++){var Qe=ft(n.bondOrder[A]),pt=o[n.bonds[A]];if(te=re=de=null,n.index<pt.index){var Be=pt.style;if(!Be.stick||Be.stick.hidden)continue;var et=(0,v.getColorFromStyle)(pt,Be.stick);if(we=le,P=Ue,n.bondStyles&&n.bondStyles[A]){if((L=n.bondStyles[A]).iswire)continue;L.radius&&(we=L.radius),L.singleBond&&(P=!0),L.color1!==void 0&&(ut=y.CC.color(L.color1)),L.color2!==void 0&&(et=y.CC.color(L.color2))}var St=new d.Vector3(n.x,n.y,n.z),st=new d.Vector3(pt.x,pt.y,pt.z);if(n.bondOrder[A]<=1||P||n.bondOrder[A]>3){if(n.bondOrder[A]<1&&(we*=n.bondOrder[A]),!pt.capDrawn&&pt.bonds.length<4&&(Ze=2),ut!=et?(te=new d.Vector3().addVectors(St,st).multiplyScalar(.5),Qe(c,St,te,we,ut,tt,0,Te,Re),Qe(c,te,st,we,et,0,Ze,Te,Re)):Qe(c,St,st,we,ut,tt,Ze,Te,Re),M=n.clickable||n.hoverable,k=pt.clickable||pt.hoverable,M||k){if(te||(te=new d.Vector3().addVectors(St,st).multiplyScalar(.5)),M){var wt=new g.Cylinder(St,te,we),Et=new g.Sphere(St,we);n.intersectionShape.cylinder.push(wt),n.intersectionShape.sphere.push(Et)}if(k){var it=new g.Cylinder(st,te,we),kt=new g.Sphere(st,we);pt.intersectionShape.cylinder.push(it),pt.intersectionShape.sphere.push(kt)}}}else if(n.bondOrder[A]>1){var Ht=0,Mt=0;we!=le&&(Ht=2,Mt=2);var ct,Jt,Nt,qt,Vt,Xt=st.clone(),yr=null;Xt.sub(St),yr=this.getSideBondV(n,pt,A),n.bondOrder[A]==2?(ct=we*ye,yr.multiplyScalar(1.5*ct),(Jt=St.clone()).add(yr),(Nt=St.clone()).sub(yr),(qt=Jt.clone()).add(Xt),(Vt=Nt.clone()).add(Xt),ut!=et?(te=new d.Vector3().addVectors(Jt,qt).multiplyScalar(.5),re=new d.Vector3().addVectors(Nt,Vt).multiplyScalar(.5),Qe(c,Jt,te,ct,ut,Ht,0),Qe(c,te,qt,ct,et,0,Mt),Qe(c,Nt,re,ct,ut,Ht,0),Qe(c,re,Vt,ct,et,0,Mt)):(Qe(c,Jt,qt,ct,ut,Ht,Mt),Qe(c,Nt,Vt,ct,ut,Ht,Mt)),M=n.clickable||n.hoverable,k=pt.clickable||pt.hoverable,(M||k)&&(te||(te=new d.Vector3().addVectors(Jt,qt).multiplyScalar(.5)),re||(re=new d.Vector3().addVectors(Nt,Vt).multiplyScalar(.5)),M&&(W=new g.Cylinder(Jt,te,ct),U=new g.Cylinder(Nt,re,ct),n.intersectionShape.cylinder.push(W),n.intersectionShape.cylinder.push(U)),k&&(H=new g.Cylinder(qt,te,ct),G=new g.Cylinder(Vt,re,ct),pt.intersectionShape.cylinder.push(H),pt.intersectionShape.cylinder.push(G)))):n.bondOrder[A]==3&&(ct=we*ke,yr.cross(Xt),yr.normalize(),yr.multiplyScalar(3*ct),(Jt=St.clone()).add(yr),(Nt=St.clone()).sub(yr),(qt=Jt.clone()).add(Xt),(Vt=Nt.clone()).add(Xt),ut!=et?(te=new d.Vector3().addVectors(Jt,qt).multiplyScalar(.5),re=new d.Vector3().addVectors(Nt,Vt).multiplyScalar(.5),de=new d.Vector3().addVectors(St,st).multiplyScalar(.5),Qe(c,Jt,te,ct,ut,Ht,0),Qe(c,te,qt,ct,et,0,Mt),Qe(c,St,de,ct,ut,tt,0),Qe(c,de,st,ct,et,0,Ze),Qe(c,Nt,re,ct,ut,Ht,0),Qe(c,re,Vt,ct,et,0,Mt)):(Qe(c,Jt,qt,ct,ut,Ht,Mt),Qe(c,St,st,ct,ut,tt,Ze),Qe(c,Nt,Vt,ct,ut,Ht,Mt)),M=n.clickable||n.hoverable,k=pt.clickable||pt.hoverable,(M||k)&&(te||(te=new d.Vector3().addVectors(Jt,qt).multiplyScalar(.5)),re||(re=new d.Vector3().addVectors(Nt,Vt).multiplyScalar(.5)),de||(de=new d.Vector3().addVectors(St,st).multiplyScalar(.5)),M&&(W=new g.Cylinder(Jt.clone(),te.clone(),ct),U=new g.Cylinder(Nt.clone(),re.clone(),ct),V=new g.Cylinder(St.clone(),de.clone(),ct),n.intersectionShape.cylinder.push(W),n.intersectionShape.cylinder.push(U),n.intersectionShape.cylinder.push(V)),k&&(H=new g.Cylinder(qt.clone(),te.clone(),ct),G=new g.Cylinder(Vt.clone(),re.clone(),ct),Z=new g.Cylinder(st.clone(),de.clone(),ct),pt.intersectionShape.cylinder.push(H),pt.intersectionShape.cylinder.push(G),pt.intersectionShape.cylinder.push(Z))))}}}var Fr=!1,Tr=0,ii=!1;for(A=0;A<n.bonds.length;A++)P=Ue,n.bondStyles&&n.bondStyles[A]&&((L=n.bondStyles[A]).singleBond&&(P=!0),L.radius&&L.radius!=le&&(ii=!0)),(P||n.bondOrder[A]==1)&&Tr++;ii?Tr>0&&(Fr=!0):Tr==0&&(n.bonds.length>0||x.showNonBonded)&&(Fr=!0),Fr&&(we=le,c.imposter?this.drawSphereImposter(c.sphereGeometry,n,we,ut):h.drawSphere(c,n,we,ut))}}}createMolObj(n,o){o=o||{};var c,f,T,x,M=new l.Object3D,k=[],A={},P={},L=this.drawAtomSphere,W=null,U=null;o.supportsImposters?(L=this.drawAtomImposter,(W=new l.Geometry(!0)).imposter=!0,(U=new l.Geometry(!0,!0)).imposter=!0,U.sphereGeometry=new l.Geometry(!0),U.sphereGeometry.imposter=!0,U.drawnCaps={}):o.supportsAIA?(L=this.drawAtomInstanced,(W=new l.Geometry(!1,!0,!0)).instanced=!0,U=new l.Geometry(!0)):(W=new l.Geometry(!0),U=new l.Geometry(!0));var V,H={},G=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(c=0,T=n.length;c<T;c++){var Z=n[c];if(Z&&Z.style){for(f in(Z.clickable||Z.hoverable)&&Z.intersectionShape===void 0&&(Z.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),x={line:void 0,cross:void 0,stick:void 0,sphere:void 0})Z.style[f]?Z.style[f].opacity?x[f]=parseFloat(Z.style[f].opacity):x[f]=1:x[f]=void 0,H[f]?x[f]!=null&&H[f]!=x[f]&&(console.log("Warning: "+f+" opacity is ambiguous"),H[f]=1):H[f]=x[f];L.call(this,Z,W),this.drawAtomClickSphere(Z),this.drawAtomCross(Z,P),this.drawBondLines(Z,n,A),this.drawBondSticks(Z,n,U),Z.style.cartoon===void 0||Z.style.cartoon.hidden||(Z.style.cartoon.color!=="spectrum"||typeof Z.resi!="number"||Z.hetflag||(Z.resi<G[0]&&(G[0]=Z.resi),Z.resi>G[1]&&(G[1]=Z.resi)),k.push(Z))}}if(k.length>0&&ge(M,k,G,this.defaultCartoonQuality),W&&W.vertices>0){W.initTypedArrays();var te=null,re=null;W.imposter?te=new l.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):W.instanced?(re=new l.Geometry(!0),h.drawSphere(re,{x:0,y:0,z:0},1,new y.Color(.5,.5,.5)),re.initTypedArrays(),te=new l.InstancedMaterial({sphereMaterial:new l.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:re})):te=new l.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),H.sphere<1&&H.sphere>=0&&(te.transparent=!0,te.opacity=H.sphere),re=new l.Mesh(W,te),M.add(re)}if(U.vertices>0){var de=null,le=null,ye=U.sphereGeometry;ye&&ye.vertices!==void 0&&ye.vertices!=0||(ye=null),U.initTypedArrays(),ye&&ye.initTypedArrays();var ke={ambient:0,vertexColors:!0,reflectivity:0};U.imposter?(de=new l.StickImposterMaterial(ke),le=new l.SphereImposterMaterial(ke)):(de=new l.MeshLambertMaterial(ke),le=new l.MeshLambertMaterial(ke),de.wireframe&&(U.setUpWireframe(),ye&&ye.setUpWireframe())),H.stick<1&&H.stick>=0&&(de.transparent=!0,de.opacity=H.stick,le.transparent=!0,le.opacity=H.stick);var Te=new l.Mesh(U,de);if(M.add(Te),ye){var Re=new l.Mesh(ye,le);M.add(Re)}}for(c in A)if(A.hasOwnProperty(c)){V=c;var we=new l.LineBasicMaterial({linewidth:V,vertexColors:!0});H.line<1&&H.line>=0&&(we.transparent=!0,we.opacity=H.line),A[c].initTypedArrays();var Ue=new l.Line(A[c],we,l.LineStyle.LinePieces);M.add(Ue)}for(c in P)if(P.hasOwnProperty(c)){V=c;var Je=new l.LineBasicMaterial({linewidth:V,vertexColors:!0});H.cross<1&&H.cross>=0&&(Je.transparent=!0,Je.opacity=H.cross),P[c].initTypedArrays();var tt=new l.Line(P[c],Je,l.LineStyle.LinePieces);M.add(tt)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var Ze,ut=new l.Object3D;for(Ze=0;Ze<this.modelData.symmetries.length;Ze++){var ft=new l.Object3D;(ft=M.clone()).matrix.copy(this.modelData.symmetries[Ze]),ft.matrixAutoUpdate=!1,ut.add(ft)}return ut}return M}getViewer(){return this.viewer}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(n){this.atoms=n.atoms,this.frames=n.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){const n=this.modelData.cryst;this.modelData.cryst.matrix=(0,d.conversionMatrix3)(n.a,n.b,n.c,n.alpha,n.beta,n.gamma)}return this.modelData.cryst}return null}setCrystData(n,o,c,f,T,x){n=n||1,o=o||1,c=c||1,f=f||90,T=T||90,x=x||90;const M=(0,d.conversionMatrix3)(n,o,c,f,T,x);this.modelData.cryst={a:n,b:o,c,alpha:f,beta:T,gamma:x,matrix:M}}setCrystMatrix(n){n=n||new d.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:n}}getSymmetries(){return this.modelData.symmetries===void 0&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(n){n===void 0?this.modelData.symmetries=[this.idMatrix]:(this.modelData.symmetries=n,this.molObj=null)}getID(){return this.id}getNumFrames(){return this.frames.numFrames!=null?this.frames.numFrames:this.frames.length}adjustCoord(n,o,c,f){var T=o-n;return T<-c?o+f:T>c?o-f:o}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var n=this.box[0],o=this.box[1],c=this.box[2],f=.9*n,T=.9*o,x=.9*c,M=0;M<this.atomdfs.length;M++)for(var k=this.atomdfs[M],A=1;A<k.length;A++){var P=this.atoms[k[A][0]],L=this.atoms[k[A][1]];P.x=this.adjustCoord(L.x,P.x,f,n),P.y=this.adjustCoord(L.y,P.y,T,o),P.z=this.adjustCoord(L.z,P.z,x,c)}}setFrame(n){var o=this.getNumFrames();let c=this,f=this.viewer;return new Promise(function(T,x){if(o==0&&T(),(n<0||n>=o)&&(n=o-1),c.frames.url!=null){var M=c.frames.url;(0,v.getbin)(M+"/traj/frame/"+n+"/"+c.frames.path,void 0,"POST",void 0).then(function(k){for(var A=new Float32Array(k,44),P=0,L=0;L<c.atoms.length;L++)c.atoms[L].x=A[P++],c.atoms[L].y=A[P++],c.atoms[L].z=A[P++];c.box&&c.atomdfs&&c.adjustCoordinatesToBox(),T()}).catch(x)}else c.atoms=c.frames[n],T();c.molObj=null,c.modelDatas&&n<c.modelDatas.length&&(c.modelData=c.modelDatas[n],c.unitCellObjects&&f&&(f.removeUnitCell(c),f.addUnitCell(c)))})}addFrame(n){this.frames.push(n)}vibrate(n=10,o=1,c=!1,f){var T=0,x=n;let M=this.viewer;c&&(T=-n,x=n),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),T<x&&(this.frames=[]),c&&(this.frames.origIndex=n);for(var k=T;k<x;k++){var A=[],P=this.frames.length;if(k!=0||f){for(var L=0;L<this.atoms.length;L++){var W=(0,v.getAtomProperty)(this.atoms[L],"dx"),U=(0,v.getAtomProperty)(this.atoms[L],"dy"),V=(0,v.getAtomProperty)(this.atoms[L],"dz"),H=new d.Vector3(W,U,V),G=new d.Vector3(this.atoms[L].x,this.atoms[L].y,this.atoms[L].z),Z=k*o/n;H.multiplyScalar(Z),G.add(H);var te={};for(var re in this.atoms[L])te[re]=this.atoms[L][re];if(te.x=G.x,te.y=G.y,te.z=G.z,A.push(te),M&&f){var de=(0,v.extend)({},f),le=new d.Vector3(W,U,V);if(le.multiplyScalar(o),le.add(G),de.start=G,de.end=le,de.frame=P,!de.color){var ye=te.style.sphere;ye||(ye=te.style.stick),ye||(ye=te.style.line),de.color=(0,v.getColorFromStyle)(te,ye)}M.addArrow(de)}}this.frames.push(A)}else this.frames.push(this.atoms)}}setAtomDefaults(n){for(let o=0;o<n.length;o++){let c=n[o];c&&(c.style=c.style||(0,v.deepCopy)(ur.defaultAtomStyle),c.color=c.color||this.ElementColors[c.elem]||this.defaultColor,c.model=this.id,(c.clickable||c.hoverable)&&(c.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(n,o,c={}){var f=ur.parseMolData(n,o,c);this.dontDuplicateAtoms=!c.duplicateAssemblyAtoms;var T=f.modelData;if(T&&(Array.isArray(T)?(this.modelData=T[0],c.frames&&(this.modelDatas=T)):this.modelData=T),f.box?this.box=f.box:this.box=null,this.frames.length==0){for(let M=0;M<f.length;M++)f[M].length!=0&&this.frames.push(f[M]);this.frames[0]&&(this.atoms=this.frames[0])}else if(c.frames)for(let M=0;M<f.length;M++)this.frames.push(f[M]);else for(var x=0;x<f.length;x++)this.addAtoms(f[x]);for(let M=0;M<this.frames.length;M++)this.setAtomDefaults(this.frames[M]);c.vibrate&&c.vibrate.frames&&c.vibrate.amplitude&&this.vibrate(c.vibrate.frames,c.vibrate.amplitude),c.style&&this.setStyle({},c.style)}setDontDuplicateAtoms(n){this.dontDuplicateAtoms=n}setModelData(n){this.modelData=n}propertyMatches(n,o){if(n==o)return!0;if(typeof o=="string"&&typeof n=="number"){var c=o.match(/(-?\d+)\s*-\s*(-?\d+)/);if(c){var f=parseInt(c[1]),T=parseInt(c[2]);if(c&&n>=f&&n<=T)return!0}}return!1}static deepCopyAndCache(n,o){if(typeof n!="object"||n==null||n instanceof ur||n.__cache_created)return n;const c={};for(const f in n){const T=n[f];if(Array.isArray(T)){c[f]=[];for(let x=0;x<T.length;x++)c[f].push(ur.deepCopyAndCache(T[x],o))}else c[f]=typeof T=="object"&&f!="properties"&&f!="model"?ur.deepCopyAndCache(T,o):T;if(f=="and"||f=="or"){const x=[];for(const M of c[f]){const k=new Set;for(const A of o.selectedAtoms(M))k.add(A.index);x.push(k)}if(f=="and"){const M=function(A,P){const L=new Set;for(const W of P)A.has(W)&&L.add(W);return L};let k=new Set(x[0]);for(const A of x.splice(1))k=M(k,A);c[f].__cached_results=k}else if(f=="or"){const M=new Set;for(const k of x)for(const A of k)M.add(A);c[f].__cached_results=M}}}return c.__cache_created=!0,c}atomIsSelected(n,o){if(o===void 0)return!0;var c=!!o.invert,f=!0;for(var T in o)if(T=="and"||T=="or"||T=="not"){if(T=="not"){if(this.atomIsSelected(n,o[T])){f=!1;break}}else if(o[T].__cached_results===void 0&&(o=ur.deepCopyAndCache(o,this)),!(f=o[T].__cached_results.has(n.index)))break}else if(T==="predicate"){if(!o.predicate(n)){f=!1;break}}else if(T=="properties"&&n[T]){for(var x in o.properties)if(!x.startsWith("__cache")){if(n.properties[x]===void 0){f=!1;break}if(n.properties[x]!=o.properties[x]){f=!1;break}}}else if(T=="model"){let A=o.model;if(typeof A=="number"&&A<0&&(A=this.viewer.getNextModelId()+A),Array.isArray(A)){let P=!1;for(let L=0;L<A.length;L++)if(A[L]==this||A[L]==this.id){P=!0;break}if(!P){f=!1;break}}else if(A!=this&&A!=this.id){f=!1;break}}else if(o.hasOwnProperty(T)&&!ur.ignoredKeys.has(T)&&!T.startsWith("__cache")){if(n[T]===void 0){f=!1;break}let A=!1;if(T==="bonds"){if(o[T]!=n.bonds.length){f=!1;break}}else if(Array.isArray(o[T])){var M=o[T],k=n[T];for(let P=0;P<M.length;P++)if(this.propertyMatches(k,M[P])){A=!0;break}if(!A){f=!1;break}}else{let P=o[T];if(!this.propertyMatches(n[T],P)){f=!1;break}}}return c?!f:f}static squaredDistance(n,o){var c=o.x-n.x,f=o.y-n.y,T=o.z-n.z;return c*c+f*f+T*T}expandAtomList(n,o){if(o<=0)return n;for(var c=(0,v.getExtent)(n,void 0),f=[[],[],[]],T=0;T<3;T++)f[0][T]=c[0][T]-o,f[1][T]=c[1][T]+o,f[2][T]=c[2][T];var x=[];for(let P=0;P<this.atoms.length;P++){var M=this.atoms[P].x,k=this.atoms[P].y,A=this.atoms[P].z;M>=f[0][0]&&M<=f[1][0]&&k>=f[0][1]&&k<=f[1][1]&&A>=f[0][2]&&A<=f[1][2]&&(M>=c[0][0]&&M<=c[1][0]&&k>=c[0][1]&&k<=c[1][1]&&A>=c[0][2]&&A<=c[1][2]||x.push(this.atoms[P]))}return x}static getFloat(n){return typeof n=="number"?n:parseFloat(n)}selectedAtoms(n,o){var c=[];n=ur.deepCopyAndCache(n||{},this),o||(o=this.atoms);for(var f=o.length,T=0;T<f;T++){var x=o[T];x&&this.atomIsSelected(x,n)&&c.push(x)}if(n.hasOwnProperty("expand")){const te=ur.getFloat(n.expand);let re=this.expandAtomList(c,te),de=c.length;const le=te*te;for(let ye=0;ye<re.length;ye++)for(let ke=0;ke<de;ke++){var M=ur.squaredDistance(re[ye],c[ke]);M<le&&M>0&&c.push(re[ye])}}if(n.hasOwnProperty("within")&&n.within.hasOwnProperty("sel")&&n.within.hasOwnProperty("distance")){var k=this.selectedAtoms(n.within.sel,this.atoms),A={};const te=ur.getFloat(n.within.distance),re=te*te;for(let de=0;de<k.length;de++)for(let le=0;le<c.length;le++){let ye=ur.squaredDistance(k[de],c[le]);ye<re&&ye>0&&(A[le]=1)}var P=[];if(n.within.invert)for(let de=0;de<c.length;de++)A[de]||P.push(c[de]);else for(let de in A)P.push(c[de]);c=P}if(n.hasOwnProperty("byres")){var L={},W=[],U=[];for(let te=0;te<c.length;te++){let re=c[te];var V=re.chain,H=re.resi;if(L[V]===void 0&&(L[V]={}),re.hasOwnProperty("resi")&&L[V][H]===void 0){for(L[V][H]=!0,U.push(re);U.length>0;)if(re=U.pop(),V=re.chain,H=re.resi,W[re.index]===void 0){W[re.index]=!0;for(var G=0;G<re.bonds.length;G++){var Z=this.atoms[re.bonds[G]];W[Z.index]===void 0&&Z.hasOwnProperty("resi")&&Z.chain==V&&Z.resi==H&&(U.push(Z),c.push(Z))}}}}}return c}addAtoms(n){this.molObj=null;var o,c=this.atoms.length,f=[];for(o=0;o<n.length;o++)n[o].index===void 0&&(n[o].index=o),n[o].serial===void 0&&(n[o].serial=o),f[n[o].index]=c+o;for(o=0;o<n.length;o++){var T=n[o],x=f[T.index],M=(0,v.extend)({},T);M.index=x,M.bonds=[],M.bondOrder=[],M.model=this.id,M.style=M.style||(0,v.deepCopy)(ur.defaultAtomStyle),M.color===void 0&&(M.color=this.ElementColors[M.elem]||this.defaultColor);for(var k=T.bonds?T.bonds.length:0,A=0;A<k;A++){var P=f[T.bonds[A]];P!==void 0&&(M.bonds.push(P),M.bondOrder.push(T.bondOrder?T.bondOrder[A]:1))}this.atoms.push(M)}}assignBonds(){(0,ce.assignBonds)(this.atoms,{assignBonds:!0})}removeAtoms(n){this.molObj=null;var o,c=[];for(o=0;o<n.length;o++)c[n[o].index]=!0;var f=[];for(o=0;o<this.atoms.length;o++){var T=this.atoms[o];c[T.index]||f.push(T)}this.atoms=[],this.addAtoms(f)}setStyle(n,o,c){o===void 0&&c===void 0&&(o=n,n={}),typeof o=="string"&&(o=(0,v.specStringToObject)(o));var f=!1,T=this,x=function(k){var A=T.selectedAtoms(n,k);for(let P=0;P<k.length;P++)k[P]&&(k[P].capDrawn=!1);for(let P=0;P<A.length;P++){f=!0,(A[P].clickable||A[P].hoverable)&&(A[P].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),c||(A[P].style={});for(let L in o)o.hasOwnProperty(L)&&(A[P].style[L]=A[P].style[L]||{},Object.assign(A[P].style[L],o[L]))}};if(n.frame!==void 0&&n.frame<this.frames.length){let k=n.frame;k<0&&(k=this.frames.length+k),x(this.frames[k])}else{x(this.atoms);for(var M=0;M<this.frames.length;M++)this.frames[M]!==this.atoms&&x(this.frames[M])}f&&(this.molObj=null)}setClickable(n,o,c){if(o=!!o,(c=(0,v.makeFunction)(c))!==null){var f=this.selectedAtoms(n,this.atoms),T=f.length;for(let x=0;x<T;x++)f[x].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},f[x].clickable=o,c&&(f[x].callback=c);T>0&&(this.molObj=null)}else console.log("Callback is not a function")}setHoverable(n,o,c,f){if(o=!!o,c=(0,v.makeFunction)(c),f=(0,v.makeFunction)(f),c!==null)if(f!==null){var T=this.selectedAtoms(n,this.atoms),x=T.length;for(let M=0;M<x;M++)T[M].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},T[M].hoverable=o,c&&(T[M].hover_callback=c),f&&(T[M].unhover_callback=f);x>0&&(this.molObj=null)}else console.log("Unhover_callback is not a function");else console.log("Hover_callback is not a function")}enableContextMenu(n,o){var c;o=!!o;var f=this.selectedAtoms(n,this.atoms),T=f.length;for(c=0;c<T;c++)f[c].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},f[c].contextMenuEnabled=o;T>0&&(this.molObj=null)}setColorByElement(n,o){if(this.molObj===null||!ur.sameObj(o,this.lastColors)){this.lastColors=o;var c=this.selectedAtoms(n,c);c.length>0&&(this.molObj=null);for(var f=0;f<c.length;f++){var T=c[f];o[T.elem]!==void 0&&(T.color=o[T.elem])}}}setColorByProperty(n,o,c,f){var T,x,M=this.selectedAtoms(n,M);for(this.lastColors=null,M.length>0&&(this.molObj=null),typeof c=="string"&&E.Gradient.builtinGradients[c]!==void 0&&(c=new E.Gradient.builtinGradients[c]),f||(f=c.range()),f||(f=(0,v.getPropertyRange)(M,o)),T=0;T<M.length;T++)x=M[T],(0,v.getAtomProperty)(x,o)!=null&&(x.color=c.valueToHex(parseFloat(x.properties[o]),f))}setColorByFunction(n,o){var c=this.selectedAtoms(n,c);if(typeof o=="function"){this.lastColors=null,c.length>0&&(this.molObj=null);for(let f=0;f<c.length;f++){let T=c[f];T.color=o(T)}}}toCDObject(n=!1){var o={a:[],b:[]};n&&(o.s=[]);for(let f=0;f<this.atoms.length;f++){let T={},x=this.atoms[f];if(T.x=x.x,T.y=x.y,T.z=x.z,x.elem!="C"&&(T.l=x.elem),n){for(var c=0;c<o.s.length&&JSON.stringify(x.style)!==JSON.stringify(o.s[c]);)c++;c===o.s.length&&o.s.push(x.style),c!==0&&(T.s=c)}o.a.push(T);for(let M=0;M<x.bonds.length;M++){let k=f,A=x.bonds[M];if(k>=A)continue;let P={b:k,e:A},L=x.bondOrder[M];L!=1&&(P.o=L),o.b.push(P)}}return o}globj(n,o){(this.molObj===null||o.regen)&&(this.molObj=this.createMolObj(this.atoms,o),this.renderedMolObj&&(n.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),n.add(this.renderedMolObj))}exportVRML(){return this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1}).vrml()}removegl(n){this.renderedMolObj&&(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),n.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(n,o,c){let f=this.selectedAtoms(o),T=this.viewer,x=(0,v.deepCopy)(c);for(let k=0;k<f.length;k++){let A=f[k];var M=null;A[n]!==void 0?M=String(A[n]):A.properties[n]!==void 0&&(M=String(A.properties[n])),M!=null&&(x.position=A,T.addLabel(M,x))}}addResLabels(n,o,c=!1){let f=this.viewer;var T=[],x=function(k,A){for(var P=k.selectedAtoms(n,P),L={},W=0;W<P.length;W++){var U=P[W],V=U.chain,H=U.resn+""+U.resi;L[V]||(L[V]={}),L[V][H]||(L[V][H]=[]),L[V][H].push(U)}var G=(0,v.deepCopy)(o);for(let te in L)if(L.hasOwnProperty(te)){var Z=L[te];for(let re in Z)if(Z.hasOwnProperty(re)){let de=Z[re],le=new d.Vector3(0,0,0);for(let ke=0;ke<de.length;ke++){let Te=de[ke];le.x+=Te.x,le.y+=Te.y,le.z+=Te.z}le.divideScalar(de.length),G.position=le,G.frame=A;let ye=f.addLabel(re,G,void 0,!0);T.push(ye)}}};if(c){var M=this.getNumFrames();let k=this.atoms;for(let A=0;A<M;A++)this.frames[A]&&(this.atoms=this.frames[A],x(this,A));this.atoms=k}else x(this);return T}setupDFS(){this.atomdfs=[];var n=this,o=new Int8Array(this.atoms.length);o.fill(0);for(var c=function(x,M,k){k.push([x,M]);var A=n.atoms[x];o[x]=1;for(var P=0;P<A.bonds.length;P++){var L=A.bonds[P];n.atoms[L]&&!o[L]&&c(L,x,k)}},f=0;f<this.atoms.length;f++)if(this.atoms[f]&&!o[f]){var T=[];c(f,-1,T),this.atomdfs.push(T)}}setCoordinatesFromURL(n,o){this.frames=[];var c=this;return this.box&&this.setupDFS(),n.startsWith("http")||(n="http://"+n),(0,v.get)(n+"/traj/numframes/"+o,function(f){if(!isNaN(parseInt(f)))return c.frames.push(c.atoms),c.frames.numFrames=f,c.frames.url=n,c.frames.path=o,c.setFrame(0)})}setCoordinates(n,o){if(!n)return[];if(/\.gz$/.test(o=o||"")){o=o.replace(/\.gz$/,"");try{n=(0,v.inflateString)(n)}catch(P){console.log(P)}}if({mdcrd:"",inpcrd:"",pdb:"",netcdf:"",array:""}.hasOwnProperty(o)){this.frames=[];for(var c=this.atoms.length,f=ur.parseCrd(n,o),T=0;T<f.length;){for(var x=[],M=0;M<c;M++){var k={};for(var A in this.atoms[M])k[A]=this.atoms[M][A];x[M]=k,x[M].x=f[T++],x[M].y=f[T++],x[M].z=f[T++]}this.frames.push(x)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(n){}static parseCrd(n,o){var c=[],f=0;if(o=="pdb")for(var T=n.indexOf(`
ATOM`);T!=-1;){for(;n.slice(T,T+5)==`
ATOM`||n.slice(T,T+7)==`
HETATM`;)c[f++]=parseFloat(n.slice(T+31,T+39)),c[f++]=parseFloat(n.slice(T+39,T+47)),c[f++]=parseFloat(n.slice(T+47,T+55)),T=n.indexOf(`
`,T+54),n.slice(T,T+4)==`
TER`&&(T=n.indexOf(`
`,T+5));T=n.indexOf(`
ATOM`,T)}else if(o=="netcdf"){var x=new on(n);c=[].concat.apply([],x.getDataVariable("coordinates"))}else{if(o=="array"||Array.isArray(n))return n.flat(2);{let M=n.indexOf(`
`);o=="inpcrd"&&(M=n.indexOf(`
`,M+1)),c=(n=n.slice(M+1)).match(/\S+/g).map(parseFloat)}}return c}static parseMolData(n,o="",c){if(!n)return[];if(/\.gz$/.test(o)){o=o.replace(/\.gz$/,"");try{n=o.match(/bcif/i)?(0,v.inflateString)(n,!1):(0,v.inflateString)(n)}catch(f){console.log(f)}}return zt[o]===void 0&&(o=o.split(".").pop(),zt[o]===void 0&&(console.log("Unknown format: "+o),o=n instanceof Uint8Array?"bcif":n.match(/^@<TRIPOS>MOLECULE/gm)?"mol2":n.match(/^data_/gm)&&n.match(/^loop_/gm)?"cif":n.match(/^HETATM/gm)||n.match(/^ATOM/gm)?"pdb":n.match(/ITEM: TIMESTEP/gm)?"lammpstrj":n.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?"sdf":n.match(/^%VERSION\s+VERSION_STAMP/gm)?"prmtop":"xyz",console.log("Best guess: "+o))),(0,zt[o])(n,c)}}var Gr;ur.defaultAtomStyle={line:{}},ur.defaultlineWidth=1,ur.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86},ur.ignoredKeys=new Set(["props","invert","model","frame","byres","expand","within","and","or","not"]),(function(ae){ae[ae.VDW=1]="VDW",ae[ae.MS=2]="MS",ae[ae.SAS=3]="SAS",ae[ae.SES=4]="SES"})(Gr||(Gr={}));var Kr=!1;function qi(ae){Kr=ae}(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(Kr=!0);class Bt{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(n,o,c,f){let T=!!f.fulltable,x=f.hasOwnProperty("origin")&&f.origin.hasOwnProperty("x")?f.origin:{x:0,y:0,z:0},M=!!f.voxel,k=f.matrix,A=f.nX||0,P=f.nY||0,L=f.nZ||0,W=f.scale||1,U=null;U=f.unitCube?f.unitCube:{x:W,y:W,z:W};let V,H,G=new Int32Array(A*P*L);for(V=0,H=G.length;V<H;++V)G[V]=-1;let Z=function(le,ye,ke,Te,Re,we){let Ue={x:0,y:0,z:0},Je=Re;if(!(Te&1<<Re)&&Te&1<<we&&(Je=we),1&Je&&ke++,2&Je&&ye++,4&Je&&le++,k){let Ze=new d.Vector3(le,ye,ke);Ze=Ze.applyMatrix4(k),Ue={x:Ze.x,y:Ze.y,z:Ze.z}}else Ue.x=x.x+U.x*le,Ue.y=x.y+U.y*ye,Ue.z=x.z+U.z*ke;let tt=(P*le+ye)*L+ke;return M?(o.push(Ue),o.length-1):(G[tt]<0&&(G[tt]=o.length,o.push(Ue)),G[tt])},te=new Int32Array(12),re=T?this.edgeTable2:this.edgeTable,de=T?this.triTable2:this.triTable;for(V=0;V<A-1;++V)for(let le=0;le<P-1;++le)for(let ye=0;ye<L-1;++ye){let ke=0;for(let we=0;we<8;++we)ke|=!!(n[(P*(V+((4&we)>>2))+le+((2&we)>>1))*L+ye+(1&we)]&this.ISDONE)<<we;if(ke===0||ke===255)continue;let Te=re[ke];if(Te===0)continue;let Re=de[ke];1&Te&&(te[0]=Z(V,le,ye,ke,0,1)),2&Te&&(te[1]=Z(V,le,ye,ke,1,3)),4&Te&&(te[2]=Z(V,le,ye,ke,3,2)),8&Te&&(te[3]=Z(V,le,ye,ke,2,0)),16&Te&&(te[4]=Z(V,le,ye,ke,4,5)),32&Te&&(te[5]=Z(V,le,ye,ke,5,7)),64&Te&&(te[6]=Z(V,le,ye,ke,7,6)),128&Te&&(te[7]=Z(V,le,ye,ke,6,4)),256&Te&&(te[8]=Z(V,le,ye,ke,0,4)),512&Te&&(te[9]=Z(V,le,ye,ke,1,5)),1024&Te&&(te[10]=Z(V,le,ye,ke,3,7)),2048&Te&&(te[11]=Z(V,le,ye,ke,2,6));for(let we=0;we<Re.length;we+=3){let Ue=te[Re[we]],Je=te[Re[we+1]],tt=te[Re[we+2]];M&&we>=3&&(o.push(o[Ue]),Ue=o.length-1,o.push(o[Je]),Je=o.length-1,o.push(o[tt]),tt=o.length-1),c.push(Ue),c.push(Je),c.push(tt)}}}laplacianSmooth(n,o,c){let f,T,x,M,k,A=new Array(o.length);for(f=0,T=o.length;f<T;f++)A[f]={x:0,y:0,z:0};let P,L=new Array(20);for(f=0;f<20;f++)L[f]=new Array(o.length);for(f=0,T=o.length;f<T;f++)L[0][f]=0;for(f=0,T=c.length/3;f<T;f++){let U=3*f,V=3*f+1,H=3*f+2;for(P=!0,x=0,M=L[0][c[U]];x<M;x++)if(c[V]==L[x+1][c[U]]){P=!1;break}for(P&&(L[0][c[U]]++,L[L[0][c[U]]][c[U]]=c[V]),P=!0,x=0,M=L[0][c[U]];x<M;x++)if(c[H]==L[x+1][c[U]]){P=!1;break}for(P&&(L[0][c[U]]++,L[L[0][c[U]]][c[U]]=c[H]),P=!0,x=0,M=L[0][c[V]];x<M;x++)if(c[U]==L[x+1][c[V]]){P=!1;break}for(P&&(L[0][c[V]]++,L[L[0][c[V]]][c[V]]=c[U]),P=!0,x=0,M=L[0][c[V]];x<M;x++)if(c[H]==L[x+1][c[V]]){P=!1;break}for(P&&(L[0][c[V]]++,L[L[0][c[V]]][c[V]]=c[H]),P=!0,x=0;x<L[0][c[H]];x++)if(c[U]==L[x+1][c[H]]){P=!1;break}for(P&&(L[0][c[H]]++,L[L[0][c[H]]][c[H]]=c[U]),P=!0,x=0,M=L[0][c[H]];x<M;x++)if(c[V]==L[x+1][c[H]]){P=!1;break}P&&(L[0][c[H]]++,L[L[0][c[H]]][c[H]]=c[V])}let W=.5;for(k=0;k<n;k++){for(f=0,T=o.length;f<T;f++)if(L[0][f]<3)A[f].x=o[f].x,A[f].y=o[f].y,A[f].z=o[f].z;else if(L[0][f]==3||L[0][f]==4){for(A[f].x=0,A[f].y=0,A[f].z=0,x=0,M=L[0][f];x<M;x++)A[f].x+=o[L[x+1][f]].x,A[f].y+=o[L[x+1][f]].y,A[f].z+=o[L[x+1][f]].z;A[f].x+=W*o[f].x,A[f].y+=W*o[f].y,A[f].z+=W*o[f].z,A[f].x/=W+L[0][f],A[f].y/=W+L[0][f],A[f].z/=W+L[0][f]}else{for(A[f].x=0,A[f].y=0,A[f].z=0,x=0,M=L[0][f];x<M;x++)A[f].x+=o[L[x+1][f]].x,A[f].y+=o[L[x+1][f]].y,A[f].z+=o[L[x+1][f]].z;A[f].x+=1*o[f].x,A[f].y+=1*o[f].y,A[f].z+=1*o[f].z,A[f].x/=1+L[0][f],A[f].y/=1+L[0][f],A[f].z/=1+L[0][f]}for(f=0,T=o.length;f<T;f++)o[f].x=A[f].x,o[f].y=A[f].y,o[f].z=A[f].z}}}let S=new Bt;class ne{constructor(n,o,c){this.data=new Int32Array(n*o*c*3),this.width=o,this.height=c}set(n,o,c,f){let T=3*((n*this.width+o)*this.height+c);this.data[T]=f.ix,this.data[T+1]=f.iy,this.data[T+2]=f.iz}get(n,o,c){let f=3*((n*this.width+o)*this.height+c);return{ix:this.data[f],iy:this.data[f+1],iz:this.data[f+2]}}}class xe{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])],xe.MarchingCube||(xe.MarchingCube=new Bt)}getVDWIndex(n){return n.elem&&this.vdwRadii[n.elem]!==void 0?n.elem:"X"}getFacesAndVertices(n){let o={};for(let T=0,x=n.length;T<x;T++)o[n[T]]=!0;let c=this.verts;for(let T=0,x=c.length;T<x;T++)c[T].x=c[T].x/this.scaleFactor-this.ptranx,c[T].y=c[T].y/this.scaleFactor-this.ptrany,c[T].z=c[T].z/this.scaleFactor-this.ptranz;let f=[];for(let T=0,x=this.faces.length;T<x;T+=3){let M=this.faces[T],k=this.faces[T+1],A=this.faces[T+2],P=c[M].atomid,L=c[k].atomid,W=c[A].atomid,U=P;L<U&&(U=L),W<U&&(U=W),o[U]&&M!==k&&k!==A&&M!==A&&(f.push(M),f.push(k),f.push(A))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:c,faces:f}}initparm(n,o,c){c>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let f=1/this.scaleFactor*5.5;this.pminx=n[0][0],this.pmaxx=n[1][0],this.pminy=n[0][1],this.pmaxy=n[1][1],this.pminz=n[0][2],this.pmaxz=n[1][2],o?(this.pminx-=this.probeRadius+f,this.pminy-=this.probeRadius+f,this.pminz-=this.probeRadius+f,this.pmaxx+=this.probeRadius+f,this.pmaxy+=this.probeRadius+f,this.pmaxz+=this.probeRadius+f):(this.pminx-=f,this.pminy-=f,this.pminz-=f,this.pmaxx+=f,this.pmaxy+=f,this.pmaxz+=f),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(o),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(n){let o={};for(const c in this.vdwRadii){let f=this.vdwRadii[c];o[c]=n?(f+this.probeRadius)*this.scaleFactor+.5:f*this.scaleFactor+.5;let T=o[c]*o[c];this.widxz[c]=Math.floor(o[c])+1,this.depty[c]=new Int32Array(this.widxz[c]*this.widxz[c]);let x=0;for(let M=0;M<this.widxz[c];M++)for(let k=0;k<this.widxz[c];k++){let A=M*M+k*k;if(A>T)this.depty[c][x]=-1;else{let P=Math.sqrt(T-A);this.depty[c][x]=Math.floor(P)}x++}}}fillvoxels(n,o){for(let c=0,f=this.vpBits.length;c<f;c++)this.vpBits[c]=0,this.vpDistance[c]=-1,this.vpAtomID[c]=-1;for(let c in o){let f=n[o[c]];f!==void 0&&this.fillAtom(f,n)}for(let c=0,f=this.vpBits.length;c<f;c++)this.vpBits[c]&this.INOUT&&(this.vpBits[c]|=this.ISDONE)}fillAtom(n,o){let c=Math.floor(.5+this.scaleFactor*(n.x+this.ptranx)),f=Math.floor(.5+this.scaleFactor*(n.y+this.ptrany)),T=Math.floor(.5+this.scaleFactor*(n.z+this.ptranz)),x=this.getVDWIndex(n),M=0,k=this.pWidth*this.pHeight;for(let A=0,P=this.widxz[x];A<P;A++)for(let L=0;L<P;L++){if(this.depty[x][M]!=-1){for(let W=-1;W<2;W++)for(let U=-1;U<2;U++)for(let V=-1;V<2;V++)if(W!==0&&U!==0&&V!==0){let H=W*A,G=V*L;for(let Z=0;Z<=this.depty[x][M];Z++){let te=Z*U,re=c+H,de=f+te,le=T+G;if(re<0||de<0||le<0||re>=this.pLength||de>=this.pWidth||le>=this.pHeight)continue;let ye=re*k+de*this.pHeight+le;if(this.vpBits[ye]&this.INOUT){let ke=o[this.vpAtomID[ye]];if(ke.serial!=n.serial){let Te=c+H-Math.floor(.5+this.scaleFactor*(ke.x+this.ptranx)),Re=f+te-Math.floor(.5+this.scaleFactor*(ke.y+this.ptrany)),we=T+G-Math.floor(.5+this.scaleFactor*(ke.z+this.ptranz));H*H+te*te+G*G<Te*Te+Re*Re+we*we&&(this.vpAtomID[ye]=n.serial)}}else this.vpBits[ye]|=this.INOUT,this.vpAtomID[ye]=n.serial}}}M++}}fillvoxelswaals(n,o){for(let c=0,f=this.vpBits.length;c<f;c++)this.vpBits[c]&=~this.ISDONE;for(let c in o){let f=n[o[c]];f!==void 0&&this.fillAtomWaals(f,n)}}fillAtomWaals(n,o){let c=0,f=Math.floor(.5+this.scaleFactor*(n.x+this.ptranx)),T=Math.floor(.5+this.scaleFactor*(n.y+this.ptrany)),x=Math.floor(.5+this.scaleFactor*(n.z+this.ptranz)),M=this.getVDWIndex(n),k=this.pWidth*this.pHeight;for(let A=0,P=this.widxz[M];A<P;A++)for(let L=0;L<P;L++){if(this.depty[M][c]!=-1){for(let W=-1;W<2;W++)for(let U=-1;U<2;U++)for(let V=-1;V<2;V++)if(W!==0&&U!==0&&V!==0){let H=W*A,G=V*L;for(let Z=0;Z<=this.depty[M][c];Z++){let te=Z*U,re=f+H,de=T+te,le=x+G;if(re<0||de<0||le<0||re>=this.pLength||de>=this.pWidth||le>=this.pHeight)continue;let ye=re*k+de*this.pHeight+le;if(this.vpBits[ye]&this.ISDONE){let ke=o[this.vpAtomID[ye]];if(ke.serial!=n.serial){let Te=f+H-Math.floor(.5+this.scaleFactor*(ke.x+this.ptranx)),Re=T+te-Math.floor(.5+this.scaleFactor*(ke.y+this.ptrany)),we=x+G-Math.floor(.5+this.scaleFactor*(ke.z+this.ptranz));H*H+te*te+G*G<Te*Te+Re*Re+we*we&&(this.vpAtomID[ye]=n.serial)}}else this.vpBits[ye]|=this.ISDONE,this.vpAtomID[ye]=n.serial}}}c++}}buildboundary(){let n=this.pWidth*this.pHeight;for(let o=0;o<this.pLength;o++)for(let c=0;c<this.pHeight;c++)for(let f=0;f<this.pWidth;f++){let T=o*n+f*this.pHeight+c;if(this.vpBits[T]&this.INOUT){let x=0;for(;x<26;){let M=o+this.nb[x][0],k=c+this.nb[x][2],A=f+this.nb[x][1];if(M>-1&&M<this.pLength&&A>-1&&A<this.pWidth&&k>-1&&k<this.pHeight&&!(this.vpBits[M*n+A*this.pHeight+k]&this.INOUT)){this.vpBits[T]|=this.ISBOUND;break}x++}}}}fastdistancemap(){let n,o=new ne(this.pLength,this.pWidth,this.pHeight),c=this.pWidth*this.pHeight,f=this.cutRadius*this.cutRadius,T=[],x=[];for(let A=0;A<this.pLength;A++)for(let P=0;P<this.pWidth;P++)for(let L=0;L<this.pHeight;L++)if(n=A*c+P*this.pHeight+L,this.vpBits[n]&=~this.ISDONE,this.vpBits[n]&this.INOUT&&this.vpBits[n]&this.ISBOUND){let W={ix:A,iy:P,iz:L};o.set(A,P,L,W),T.push(W),this.vpDistance[n]=0,this.vpBits[n]|=this.ISDONE,this.vpBits[n]&=~this.ISBOUND}do{x=this.fastoneshell(T,o),T=[];for(let A=0,P=x.length;A<P;A++)n=c*x[A].ix+this.pHeight*x[A].iy+x[A].iz,this.vpBits[n]&=~this.ISBOUND,this.vpDistance[n]<=1.0404*f&&T.push({ix:x[A].ix,iy:x[A].iy,iz:x[A].iz})}while(T.length!==0);T=[],x=[],o=null;let M=this.scaleFactor-.5;M<0&&(M=0);let k=f-.5/(.1+M);for(let A=0;A<this.pLength;A++)for(let P=0;P<this.pWidth;P++)for(let L=0;L<this.pHeight;L++)n=A*c+P*this.pHeight+L,this.vpBits[n]&=~this.ISBOUND,this.vpBits[n]&this.INOUT&&(this.vpBits[n]&this.ISDONE&&!(this.vpBits[n]&this.ISDONE&&this.vpDistance[n]>=k)||(this.vpBits[n]|=this.ISBOUND))}fastoneshell(n,o){let c,f,T,x,M,k,A,P,L,W=[];if(n.length===0)return W;let U={ix:-1,iy:-1,iz:-1},V=this.pWidth*this.pHeight;for(let H=0,G=n.length;H<G;H++){c=n[H].ix,f=n[H].iy,T=n[H].iz,P=o.get(c,f,T);for(let Z=0;Z<6;Z++)U.ix=c+this.nb[Z][0],U.iy=f+this.nb[Z][1],U.iz=T+this.nb[Z][2],U.ix<this.pLength&&U.ix>-1&&U.iy<this.pWidth&&U.iy>-1&&U.iz<this.pHeight&&U.iz>-1&&(L=U.ix*V+this.pHeight*U.iy+U.iz,this.vpBits[L]&this.INOUT&&!(this.vpBits[L]&this.ISDONE)?(o.set(U.ix,U.iy,T+this.nb[Z][2],P),x=U.ix-P.ix,M=U.iy-P.iy,k=U.iz-P.iz,A=x*x+M*M+k*k,this.vpDistance[L]=A,this.vpBits[L]|=this.ISDONE,this.vpBits[L]|=this.ISBOUND,W.push({ix:U.ix,iy:U.iy,iz:U.iz})):this.vpBits[L]&this.INOUT&&this.vpBits[L]&this.ISDONE&&(x=U.ix-P.ix,M=U.iy-P.iy,k=U.iz-P.iz,A=x*x+M*M+k*k,A<this.vpDistance[L]&&(o.set(U.ix,U.iy,U.iz,P),this.vpDistance[L]=A,this.vpBits[L]&this.ISBOUND||(this.vpBits[L]|=this.ISBOUND,W.push({ix:U.ix,iy:U.iy,iz:U.iz})))))}for(let H=0,G=n.length;H<G;H++){c=n[H].ix,f=n[H].iy,T=n[H].iz,P=o.get(c,f,T);for(let Z=6;Z<18;Z++)U.ix=c+this.nb[Z][0],U.iy=f+this.nb[Z][1],U.iz=T+this.nb[Z][2],U.ix<this.pLength&&U.ix>-1&&U.iy<this.pWidth&&U.iy>-1&&U.iz<this.pHeight&&U.iz>-1&&(L=U.ix*V+this.pHeight*U.iy+U.iz,this.vpBits[L]&this.INOUT&&!(this.vpBits[L]&this.ISDONE)?(o.set(U.ix,U.iy,T+this.nb[Z][2],P),x=U.ix-P.ix,M=U.iy-P.iy,k=U.iz-P.iz,A=x*x+M*M+k*k,this.vpDistance[L]=A,this.vpBits[L]|=this.ISDONE,this.vpBits[L]|=this.ISBOUND,W.push({ix:U.ix,iy:U.iy,iz:U.iz})):this.vpBits[L]&this.INOUT&&this.vpBits[L]&this.ISDONE&&(x=U.ix-P.ix,M=U.iy-P.iy,k=U.iz-P.iz,A=x*x+M*M+k*k,A<this.vpDistance[L]&&(o.set(U.ix,U.iy,U.iz,P),this.vpDistance[L]=A,this.vpBits[L]&this.ISBOUND||(this.vpBits[L]|=this.ISBOUND,W.push({ix:U.ix,iy:U.iy,iz:U.iz})))))}for(let H=0,G=n.length;H<G;H++){c=n[H].ix,f=n[H].iy,T=n[H].iz,P=o.get(c,f,T);for(let Z=18;Z<26;Z++)U.ix=c+this.nb[Z][0],U.iy=f+this.nb[Z][1],U.iz=T+this.nb[Z][2],U.ix<this.pLength&&U.ix>-1&&U.iy<this.pWidth&&U.iy>-1&&U.iz<this.pHeight&&U.iz>-1&&(L=U.ix*V+this.pHeight*U.iy+U.iz,this.vpBits[L]&this.INOUT&&!(this.vpBits[L]&this.ISDONE)?(o.set(U.ix,U.iy,T+this.nb[Z][2],P),x=U.ix-P.ix,M=U.iy-P.iy,k=U.iz-P.iz,A=x*x+M*M+k*k,this.vpDistance[L]=A,this.vpBits[L]|=this.ISDONE,this.vpBits[L]|=this.ISBOUND,W.push({ix:U.ix,iy:U.iy,iz:U.iz})):this.vpBits[L]&this.INOUT&&this.vpBits[L]&this.ISDONE&&(x=U.ix-P.ix,M=U.iy-P.iy,k=U.iz-P.iz,A=x*x+M*M+k*k,A<this.vpDistance[L]&&(o.set(U.ix,U.iy,U.iz,P),this.vpDistance[L]=A,this.vpBits[L]&this.ISBOUND||(this.vpBits[L]|=this.ISBOUND,W.push({ix:U.ix,iy:U.iy,iz:U.iz})))))}return W}marchingcubeinit(n){for(let o=0,c=this.vpBits.length;o<c;o++)n==1?this.vpBits[o]&=~this.ISBOUND:n==4?(this.vpBits[o]&=~this.ISDONE,this.vpBits[o]&this.ISBOUND&&(this.vpBits[o]|=this.ISDONE),this.vpBits[o]&=~this.ISBOUND):n==2?this.vpBits[o]&this.ISBOUND&&this.vpBits[o]&this.ISDONE?this.vpBits[o]&=~this.ISBOUND:this.vpBits[o]&this.ISBOUND&&!(this.vpBits[o]&this.ISDONE)&&(this.vpBits[o]|=this.ISDONE):n==3&&(this.vpBits[o]&=~this.ISBOUND)}marchingcube(n){this.marchingcubeinit(n),this.verts=[],this.faces=[],xe.MarchingCube.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let o=this.pWidth*this.pHeight;for(let c=0,f=this.verts.length;c<f;c++)this.verts[c].atomid=this.vpAtomID[this.verts[c].x*o+this.pHeight*this.verts[c].y+this.verts[c].z];xe.MarchingCube.laplacianSmooth(1,this.verts,this.faces)}}xe.MarchingCube=new Bt;var Ve=s(848);class Le{static finalizeGeo(n){var o=n.updateGeoGroup(0);o.vertices>0&&o.truncateArrayBuffers(!0,!0)}static updateColor(n,o){var c,f,T;o=o||y.CC.color(o),n.colorsNeedUpdate=!0,o.constructor!==Array&&(c=o.r,f=o.g,T=o.b);for(let x in n.geometryGroups){let M=n.geometryGroups[x],k=M.colorArray;for(let A=0,P=M.vertices;A<P;++A){if(o.constructor===Array){let L=o[A];c=L.r,f=L.g,T=L.b}k[3*A]=c,k[3*A+1]=f,k[3*A+2]=T}}}static drawArrow(n,o,c){var f=c.start,T=c.end,x=c.radius,M=c.radiusRatio,k=c.mid,A=c.midpos;if(!f||!T)return;var P=o.updateGeoGroup(51),L=new d.Vector3(T.x,T.y,T.z).sub(f);if(A){let hi=L.length();k=A>0?A/hi:(hi+A)/hi}L.multiplyScalar(k);var W=new d.Vector3(f.x,f.y,f.z).add(L),U=L.clone().negate();let V=new d.Vector3(f.x,f.y,f.z);n.intersectionShape.cylinder.push(new g.Cylinder(V,W.clone(),x)),n.intersectionShape.sphere.push(new g.Sphere(V,x));var H=[];H[0]=L.clone(),Math.abs(H[0].x)>1e-4?H[0].y+=1:H[0].x+=1,H[0].cross(L),H[0].normalize(),H[4]=H[0].clone(),H[4].crossVectors(H[0],L),H[4].normalize(),H[8]=H[0].clone().negate(),H[12]=H[4].clone().negate(),H[2]=H[0].clone().add(H[4]).normalize(),H[6]=H[4].clone().add(H[8]).normalize(),H[10]=H[8].clone().add(H[12]).normalize(),H[14]=H[12].clone().add(H[0]).normalize(),H[1]=H[0].clone().add(H[2]).normalize(),H[3]=H[2].clone().add(H[4]).normalize(),H[5]=H[4].clone().add(H[6]).normalize(),H[7]=H[6].clone().add(H[8]).normalize(),H[9]=H[8].clone().add(H[10]).normalize(),H[11]=H[10].clone().add(H[12]).normalize(),H[13]=H[12].clone().add(H[14]).normalize(),H[15]=H[14].clone().add(H[0]).normalize();var G,Z,te,re,de,le,ye,ke,Te,Re,we,Ue,Je,tt,Ze,ut,ft,Qe,pt,Be,et,St,st=P.vertices,wt=P.vertexArray,Et=P.faceArray,it=P.normalArray,kt=P.lineArray;for(Z=0,te=H.length;Z<te;++Z){G=3*(st+3*Z);var Ht=H[Z].clone().multiplyScalar(x).add(f),Mt=H[Z].clone().multiplyScalar(x).add(W),ct=H[Z].clone().multiplyScalar(x*M).add(W);if(wt[G]=Ht.x,wt[G+1]=Ht.y,wt[G+2]=Ht.z,wt[G+3]=Mt.x,wt[G+4]=Mt.y,wt[G+5]=Mt.z,wt[G+6]=ct.x,wt[G+7]=ct.y,wt[G+8]=ct.z,Z>0){var Jt=wt[G-3],Nt=wt[G-2],qt=wt[G-1],Vt=new d.Vector3(Jt,Nt,qt),Xt=new d.Vector3(T.x,T.y,T.z),yr=W.clone(),Fr=new d.Vector3(ct.x,ct.y,ct.z);n.intersectionShape.triangle.push(new g.Triangle(Fr,Xt,Vt)),n.intersectionShape.triangle.push(new g.Triangle(Vt.clone(),yr,Fr.clone()))}}P.vertices+=48,wt[G=3*P.vertices]=f.x,wt[G+1]=f.y,wt[G+2]=f.z,wt[G+3]=W.x,wt[G+4]=W.y,wt[G+5]=W.z,wt[G+6]=T.x,wt[G+7]=T.y,wt[G+8]=T.z,P.vertices+=3;var Tr=P.vertices-3,ii=P.vertices-2,Wr=P.vertices-1,br=3*Tr,$r=3*ii,ci=3*Wr;for(Z=0,te=H.length-1;Z<te;++Z){var ni=st+3*Z;G=3*ni,de=P.faceidx,le=P.lineidx,Je=3*(ye=ni),tt=3*(ke=ni+1),Ze=3*(Te=ni+2),ut=3*(Re=ni+4),ft=3*(we=ni+5),Qe=3*(Ue=ni+3),pt=Be=H[Z],et=St=H[Z+1],it[Je]=pt.x,it[tt]=Be.x,it[Qe]=St.x,it[Je+1]=pt.y,it[tt+1]=Be.y,it[Qe+1]=St.y,it[Je+2]=pt.z,it[tt+2]=Be.z,it[Qe+2]=St.z,it[tt]=Be.x,it[ut]=et.x,it[Qe]=St.x,it[tt+1]=Be.y,it[ut+1]=et.y,it[Qe+1]=St.y,it[tt+2]=Be.z,it[ut+2]=et.z,it[Qe+2]=St.z,it[Ze]=Be.x,it[ft]=et.x,it[Ze+1]=Be.y,it[ft+1]=et.y,it[Ze+2]=Be.z,it[ft+2]=et.z,Et[de]=ye,Et[de+1]=ke,Et[de+2]=Ue,Et[de+3]=ke,Et[de+4]=Re,Et[de+5]=Ue,Et[de+6]=ye,Et[de+7]=Ue,Et[de+8]=Tr,Et[de+9]=Te,Et[de+10]=ii,Et[de+11]=we,Et[de+12]=Te,Et[de+13]=Wr,Et[de+14]=we,kt[le]=ye,kt[le+1]=ke,kt[le+2]=ye,kt[le+3]=Ue,kt[le+4]=Re,kt[le+5]=Ue,kt[le+6]=ye,kt[le+7]=Ue,kt[le+8]=Te,kt[le+9]=ke,kt[le+10]=Te,kt[le+11]=we,kt[le+12]=Re,kt[le+13]=we,kt[le+14]=Te,kt[le+15]=Wr,kt[le+16]=Te,kt[le+17]=we,kt[le+18]=Wr,kt[le+19]=we,P.faceidx+=15,P.lineidx+=20}re=[st+45,st+46,st+1,st,st+47,st+2],de=P.faceidx,le=P.lineidx,Je=3*(ye=re[0]),tt=3*(ke=re[1]),Ze=3*(Te=re[4]),ut=3*(Re=re[2]),ft=3*(we=re[5]),Qe=3*(Ue=re[3]),pt=Be=H[15],et=St=H[0],it[Je]=pt.x,it[tt]=Be.x,it[Qe]=St.x,it[Je+1]=pt.y,it[tt+1]=Be.y,it[Qe+1]=St.y,it[Je+2]=pt.z,it[tt+2]=Be.z,it[Qe+2]=St.z,it[tt]=Be.x,it[ut]=et.x,it[Qe]=St.x,it[tt+1]=Be.y,it[ut+1]=et.y,it[Qe+1]=St.y,it[tt+2]=Be.z,it[ut+2]=et.z,it[Qe+2]=St.z,it[Ze]=Be.x,it[ft]=et.x,it[Ze+1]=Be.y,it[ft+1]=et.y,it[Ze+2]=Be.z,it[ft+2]=et.z,L.normalize(),U.normalize(),it[br]=U.x,it[$r]=it[ci]=L.x,it[br+1]=U.y,it[$r+1]=it[ci+1]=L.y,it[br+2]=U.z,it[$r+2]=it[ci+2]=L.z,Et[de]=ye,Et[de+1]=ke,Et[de+2]=Ue,Et[de+3]=ke,Et[de+4]=Re,Et[de+5]=Ue,Et[de+6]=ye,Et[de+7]=Ue,Et[de+8]=Tr,Et[de+9]=Te,Et[de+10]=ii,Et[de+11]=we,Et[de+12]=Te,Et[de+13]=Wr,Et[de+14]=we,kt[le]=ye,kt[le+1]=ke,kt[le+2]=ye,kt[le+3]=Ue,kt[le+4]=Re,kt[le+5]=Ue,kt[le+6]=ye,kt[le+7]=Ue,kt[le+8]=Te,kt[le+9]=ke,kt[le+10]=Te,kt[le+11]=we,kt[le+12]=Re,kt[le+13]=we,kt[le+14]=Te,kt[le+15]=Wr,kt[le+16]=Te,kt[le+17]=we,kt[le+18]=Wr,kt[le+19]=we,P.faceidx+=15,P.lineidx+=20}static updateBoundingFromPoints(n,o,c,f){n.center.set(0,0,0);let T=1/0,x=1/0,M=1/0,k=-1/0,A=-1/0,P=-1/0;n.box&&(T=n.box.min.x,k=n.box.max.x,x=n.box.min.y,A=n.box.max.y,M=n.box.min.z,P=n.box.max.z);for(let V=0,H=f;V<H;V++){var L=c[3*V],W=c[3*V+1],U=c[3*V+2];L<T&&(T=L),W<x&&(x=W),U<M&&(M=U),L>k&&(k=L),W>A&&(A=W),U>P&&(P=U)}n.center.set((k+T)/2,(A+x)/2,(P+M)/2),n.radius=n.center.distanceTo({x:k,y:A,z:P}),n.box={min:{x:T,y:x,z:M},max:{x:k,y:A,z:P}}}static addCustomGeo(n,o,c,f,T){var x,M,k,A,P,L,W,U,V,H=o.addGeoGroup(),G=c.vertexArr,Z=c.normalArr,te=c.faceArr;H.vertices=G.length,H.faceidx=te.length;var re=H.vertexArray,de=H.colorArray;for(f.constructor!==Array&&(U=f.r,V=f.g,A=f.b),L=0,W=H.vertices;L<W;++L)x=3*L,M=G[L],re[x]=M.x,re[x+1]=M.y,re[x+2]=M.z,f.constructor===Array&&(U=(P=f[L]).r,V=P.g,A=P.b),de[x]=U,de[x+1]=V,de[x+2]=A;if(T)for(L=0,W=H.faceidx/3;L<W;++L){k=te[x=3*L],A=te[x+1],P=te[x+2];var le=new d.Vector3,ye=new d.Vector3,ke=new d.Vector3;n.intersectionShape.triangle.push(new g.Triangle(le.copy(G[k]),ye.copy(G[A]),ke.copy(G[P])))}if(T){var Te=new d.Vector3(0,0,0),Re=0;for(let Je=0;Je<o.geometryGroups.length;Je++)Te.add(o.geometryGroups[Je].getCentroid()),Re++;Te.divideScalar(Re),Le.updateBoundingFromPoints(n.boundingSphere,{centroid:Te},re,H.vertices)}if(H.faceArray=new Uint16Array(te),H.truncateArrayBuffers(!0,!0),Z.length<H.vertices)H.setNormals();else{var we,Ue=H.normalArray=new Float32Array(3*H.vertices);for(L=0,W=H.vertices;L<W;++L)x=3*L,we=Z[L],Ue[x]=we.x,Ue[x+1]=we.y,Ue[x+2]=we.z}H.setLineIndices(),H.lineidx=H.lineArray.length}static updateFromStyle(n,o){o.color!==void 0?(n.color=o.color||new y.Color,o.color instanceof y.Color||(n.color=y.CC.color(o.color))):n.color=y.CC.color(0),n.wireframe=!!o.wireframe,n.opacity=o.alpha?(0,d.clamp)(o.alpha,0,1):1,o.opacity!==void 0&&(n.opacity=(0,d.clamp)(o.opacity,0,1)),n.side=o.side!==void 0?o.side:l.DoubleSide,n.linewidth=o.linewidth===void 0?1:o.linewidth,n.clickable=!!o.clickable,n.callback=(0,v.makeFunction)(o.callback),n.hoverable=!!o.hoverable,n.hover_callback=(0,v.makeFunction)(o.hover_callback),n.unhover_callback=(0,v.makeFunction)(o.unhover_callback),n.contextMenuEnabled=!!o.contextMenuEnabled,n.hidden=o.hidden,n.frame=o.frame}constructor(n){this.color=16777215,this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.contextMenuEnabled=!1,this.side=l.DoubleSide,this.stylespec=n||{},this.boundingSphere=new g.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},Le.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new l.Geometry(!0),this.linegeo=new l.Geometry(!0)}updateStyle(n){for(var o in n)this.stylespec[o]=n[o];if(Le.updateFromStyle(this,this.stylespec),n.voldata&&n.volscheme){(0,v.adjustVolumeStyle)(n);const c=n.volscheme,f=n.voldata,T=y.CC,x=c.range()||[-1,1];this.geo.setColors(function(M,k,A){let P=f.getVal(M,k,A);return T.color(c.valueToHex(P,x))}),delete this.color}}addCustom(n){n.vertexArr=n.vertexArr||[],n.faceArr=n.faceArr||[],n.normalArr=n.normalArr||[],Le.drawCustom(this,this.geo,n)}addSphere(n){n.center||(n.center=new d.Vector3(0,0,0)),n.radius=n.radius?(0,d.clamp)(n.radius,0,1/0):1.5,n.color=y.CC.color(n.color),this.intersectionShape.sphere.push(new g.Sphere(n.center,n.radius)),h.drawSphere(this.geo,n.center,n.radius,n.color,n.quality),this.components.push({centroid:new d.Vector3(n.center.x,n.center.y,n.center.z)});var o=this.geo.updateGeoGroup(0);Le.updateBoundingFromPoints(this.boundingSphere,this.components,o.vertexArray,o.vertices)}addBox(n){var o,c,f,T=n.dimensions||{w:1,h:1,d:1};o=typeof T.w=="number"?{x:T.w,y:0,z:0}:T.w,c=typeof T.h=="number"?{x:0,y:T.h,z:0}:T.h,f=typeof T.d=="number"?{x:0,y:0,z:T.d}:T.d;var x=n.corner;x==null&&(x=n.center!==void 0?{x:n.center.x-.5*(o.x+c.x+f.x),y:n.center.y-.5*(o.y+c.y+f.y),z:n.center.z-.5*(o.z+c.z+f.z)}:{x:0,y:0,z:0});var M=[{x:x.x,y:x.y,z:x.z},{x:x.x+o.x,y:x.y+o.y,z:x.z+o.z},{x:x.x+c.x,y:x.y+c.y,z:x.z+c.z},{x:x.x+o.x+c.x,y:x.y+o.y+c.y,z:x.z+o.z+c.z},{x:x.x+f.x,y:x.y+f.y,z:x.z+f.z},{x:x.x+o.x+f.x,y:x.y+o.y+f.y,z:x.z+o.z+f.z},{x:x.x+c.x+f.x,y:x.y+c.y+f.y,z:x.z+c.z+f.z},{x:x.x+o.x+c.x+f.x,y:x.y+o.y+c.y+f.y,z:x.z+o.z+c.z+f.z}],k=[],A=[];k.splice(k.length,0,M[0],M[1],M[2],M[3]),A.splice(A.length,0,0,2,1,1,2,3);var P=4;k.splice(k.length,0,M[2],M[3],M[6],M[7]),A.splice(A.length,0,P+0,P+2,P+1,P+1,P+2,P+3),P+=4,k.splice(k.length,0,M[4],M[5],M[0],M[1]),A.splice(A.length,0,P+0,P+2,P+1,P+1,P+2,P+3),P+=4,k.splice(k.length,0,M[6],M[7],M[4],M[5]),A.splice(A.length,0,P+0,P+2,P+1,P+1,P+2,P+3),P+=4,k.splice(k.length,0,M[3],M[1],M[7],M[5]),A.splice(A.length,0,P+0,P+2,P+1,P+1,P+2,P+3),P+=4,k.splice(k.length,0,M[2],M[6],M[0],M[4]),A.splice(A.length,0,P+0,P+2,P+1,P+1,P+2,P+3),P+=4;var L=(0,v.extend)({},n);L.vertexArr=k,L.faceArr=A,L.normalArr=[],Le.drawCustom(this,this.geo,L);var W=new d.Vector3;this.components.push({centroid:W.addVectors(M[0],M[7]).multiplyScalar(.5)});var U=this.geo.updateGeoGroup(0);Le.updateBoundingFromPoints(this.boundingSphere,this.components,U.vertexArray,U.vertices)}addCylinder(n){var o,c;o=n.start?new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0):new d.Vector3(0,0,0),n.end?(c=new d.Vector3(n.end.x,n.end.y||0,n.end.z||0)).x===void 0&&(c.x=3):c=new d.Vector3(0,0,0);var f=n.radius||.1,T=y.CC.color(n.color);this.intersectionShape.cylinder.push(new g.Cylinder(o,c,f)),h.drawCylinder(this.geo,o,c,f,T,n.fromCap,n.toCap);var x=new d.Vector3;this.components.push({centroid:x.addVectors(o,c).multiplyScalar(.5)});var M=this.geo.updateGeoGroup(0);Le.updateBoundingFromPoints(this.boundingSphere,this.components,M.vertexArray,M.vertices)}addDashedCylinder(n){var o,c;n.dashLength=n.dashLength||.25,n.gapLength=n.gapLength||.25,o=n.start?new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0):new d.Vector3(0,0,0),n.end?(c=new d.Vector3(n.end.x,n.end.y||0,n.end.z||0)).x===void 0&&(c.x=3):c=new d.Vector3(3,0,0);for(var f=n.radius||.1,T=y.CC.color(n.color),x=Math.sqrt(Math.pow(o.x-c.x,2)+Math.pow(o.y-c.y,2)+Math.pow(o.z-c.z,2)),M=x/(n.gapLength+n.dashLength),k=new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0),A=new d.Vector3(n.end.x,n.end.y||0,n.end.z||0),P=new d.Vector3((c.x-o.x)/(x/n.gapLength),(c.y-o.y)/(x/n.gapLength),(c.z-o.z)/(x/n.gapLength)),L=new d.Vector3((c.x-o.x)/(x/n.dashLength),(c.y-o.y)/(x/n.dashLength),(c.z-o.z)/(x/n.dashLength)),W=0;W<M;W++)A=new d.Vector3(k.x+L.x,k.y+L.y,k.z+L.z),this.intersectionShape.cylinder.push(new g.Cylinder(k,A,f)),h.drawCylinder(this.geo,k,A,f,T,n.fromCap,n.toCap),k=new d.Vector3(A.x+P.x,A.y+P.y,A.z+P.z);var U=new d.Vector3;this.components.push({centroid:U.addVectors(o,c).multiplyScalar(.5)});var V=this.geo.updateGeoGroup(0);Le.updateBoundingFromPoints(this.boundingSphere,this.components,V.vertexArray,V.vertices)}addCurve(n){n.points=n.points||[],n.smooth=n.smooth||10,n.fromCap===void 0&&(n.fromCap=2),n.toCap===void 0&&(n.toCap=2);var o=R(n.points,n.smooth);if(o.length<3)console.log("Too few points in addCurve");else{var c=n.radius||.1,f=y.CC.color(n.color),T=0,x=o.length-1,M=o[0].distanceTo(o[1]),k=Math.ceil(2*c/M);if(n.toArrow){let W={start:o[x-=k],end:o[o.length-1],radius:c,color:f,mid:1e-4};this.addArrow(W)}if(n.fromArrow){let W={start:o[T+=k],end:o[0],radius:c,color:f,mid:1e-4};this.addArrow(W)}for(var A=Math.ceil(o.length/2),P={radius:c,color:f,fromCap:2,toCap:2},L=T;L<x;L++)P.start=o[L],P.end=o[L+1],P.fromCap=2,P.toCap=2,L<A?(P.fromCap=2,P.toCap=0):L>A?(P.fromCap=0,P.toCap=2):(P.fromCap=2,P.toCap=2),this.addCylinder(P)}}addLine(n){var o,c;o=n.start?new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0):new d.Vector3(0,0,0),n.end?(c=new d.Vector3(n.end.x,n.end.y||0,n.end.z||0)).x===void 0&&(c.x=3):c=new d.Vector3(3,0,0);var f=this.geo.updateGeoGroup(2),T=f.vertices,x=3*T,M=f.vertexArray;M[x]=o.x,M[x+1]=o.y,M[x+2]=o.z,M[x+3]=c.x,M[x+4]=c.y,M[x+5]=c.z,f.vertices+=2;var k=f.lineArray,A=f.lineidx;k[A]=T,k[A+1]=T+1,f.lineidx+=2;var P=new d.Vector3;this.components.push({centroid:P.addVectors(o,c).multiplyScalar(.5)}),f=this.geo.updateGeoGroup(0),Le.updateBoundingFromPoints(this.boundingSphere,this.components,f.vertexArray,f.vertices)}addArrow(n){if(n.start?n.start=new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0):n.start=new d.Vector3(0,0,0),n.dir instanceof d.Vector3&&typeof n.length=="number"){var o=n.dir.clone().multiplyScalar(n.length).add(n.start);n.end=o}else n.end?(n.end=new d.Vector3(n.end.x,n.end.y||0,n.end.z||0),n.end.x===void 0&&(n.end.x=3)):n.end=new d.Vector3(3,0,0);n.radius=n.radius||.1,n.radiusRatio=n.radiusRatio||1.618034,n.mid=0<n.mid&&n.mid<1?n.mid:.618034,Le.drawArrow(this,this.geo,n);var c=new d.Vector3;this.components.push({centroid:c.addVectors(n.start,n.end).multiplyScalar(.5)});var f=this.geo.updateGeoGroup(0);Le.updateBoundingFromPoints(this.boundingSphere,this.components,f.vertexArray,f.vertices)}static distance_from(n,o){return Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2)+Math.pow(n.z-o.z,2))}static inSelectedRegion(n,o,c){for(var f=0;f<o.length;f++)if(Le.distance_from(o[f],n)<=c)return!0;return!1}addIsosurface(n,o,c,f){var T,x,M=o.isoval!==void 0&&typeof o.isoval=="number"?o.isoval:0,k=!!o.voxel,A=o.smoothness===void 0?1:o.smoothness,P=n.size.x,L=n.size.y,W=n.size.z,U=new Int16Array(P*L*W),V=n.data;for(T=0,x=U.length;T<x;++T)U[T]=-1;var H=new Uint8Array(P*L*W);for(T=0,x=V.length;T<x;++T)(M>=0?V[T]-M:M-V[T])>0&&(H[T]|=Le.ISDONE);var G=[],Z=[];S.march(H,G,Z,{fulltable:!0,voxel:k,unitCube:n.unit,origin:n.origin,matrix:n.matrix,nX:P,nY:L,nZ:W}),!k&&A>0&&S.laplacianSmooth(A,G,Z);var te=[],re=[],de=[];if(o.selectedRegion&&o.coords===void 0&&(o.coords=o.selectedRegion),o.coords===void 0&&o.selection!==void 0&&(f?o.coords=f.selectedAtoms(o.selection):console.log("addIsosurface needs viewer is selection provided.")),o.coords!==void 0){var le=o.coords[0].x,ye=o.coords[0].y,ke=o.coords[0].z,Te=o.coords[0].x,Re=o.coords[0].y,we=o.coords[0].z;for(let Be=0;Be<o.coords.length;Be++)o.coords[Be].x>le?le=o.coords[Be].x:o.coords[Be].x<Te&&(Te=o.coords[Be].x),o.coords[Be].y>ye?ye=o.coords[Be].y:o.coords[Be].y<Re&&(Re=o.coords[Be].y),o.coords[Be].z>ke?ke=o.coords[Be].z:o.coords[Be].z<we&&(we=o.coords[Be].z);var Ue=2;o.radius!==void 0&&(Ue=o.radius),o.selectedOffset!==void 0&&(Ue=o.selectedOffset),o.seldist!==void 0&&(Ue=o.seldist),Te-=Ue,le+=Ue,Re-=Ue,ye+=Ue,we-=Ue,ke+=Ue;for(let Be=0;Be<G.length;Be++)G[Be].x>Te&&G[Be].x<le&&G[Be].y>Re&&G[Be].y<ye&&G[Be].z>we&&G[Be].z<ke&&Le.inSelectedRegion(G[Be],o.coords,Ue)?(te.push(re.length),re.push(G[Be])):te.push(-1);for(let Be=0;Be+2<Z.length;Be+=3)te[Z[Be]]!==-1&&te[Z[Be+1]]!==-1&&te[Z[Be+2]]!==-1&&(de.push(Z[Be]-(Z[Be]-te[Z[Be]])),de.push(Z[Be+1]-(Z[Be+1]-te[Z[Be+1]])),de.push(Z[Be+2]-(Z[Be+2]-te[Z[Be+2]])));G=re,Z=de}Le.drawCustom(this,this.geo,{vertexArr:G,faceArr:Z,normalArr:[],clickable:o.clickable,hoverable:o.hoverable}),this.updateStyle(o);var Je=new d.Vector3(n.origin.x,n.origin.y,n.origin.z),tt=new d.Vector3(n.size.x*n.unit.x,n.size.y*n.unit.y,n.size.z*n.unit.z),Ze=new d.Vector3(0,0,0),ut=Je.clone(),ft=Je.clone().add(tt);for(let Be=0;Be<G.length;Be++)Ze.add(G[Be]),ut.max(G[Be]),ft.min(G[Be]);Ze.divideScalar(G.length);var Qe=Ze.distanceTo(ft),pt=Ze.distanceTo(ut);this.boundingSphere.center=Ze,this.boundingSphere.radius=Math.max(Qe,pt),typeof c=="function"&&c()}addVolumetricData(n,o,c){n=new Ve.VolumeData(n,o),this.addIsosurface(n,c)}finalize(){return Le.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(n){if(this.renderedShapeObj&&(n.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){Le.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),this.color!==void 0&&Le.updateColor(this.geo,this.color),this.shapeObj=new l.Object3D;var o=null;o=this.side==l.DoubleSide?new l.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:l.Coloring.VertexColors}):new l.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:l.Coloring.VertexColors});var c=new l.Mesh(this.geo,o);if(this.shapeObj.add(c),this.linegeo&&this.linegeo.vertices>0){var f=new l.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),T=new l.Line(this.linegeo,f,l.LineStyle.LinePieces);this.shapeObj.add(T)}this.renderedShapeObj=this.shapeObj.clone(),n.add(this.renderedShapeObj)}}removegl(n){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),n.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}function yt(ae){if(ae.vertexArr.length<64e3)return[ae];var n=[{vertexArr:[],normalArr:[],faceArr:[]}];ae.colorArr&&(n.colorArr=[]);var o=[],c=[],f=0,T=ae.faceArr;for(let M=0,k=T.length;M<k;M+=3){let A=n[f];for(let P=0;P<3;P++){var x=T[M+P];o[x]!==f&&(o[x]=f,c[x]=A.vertexArr.length,A.vertexArr.push(ae.vertexArr[x]),ae.normalArr&&ae.normalArr[x]&&A.normalArr.push(ae.normalArr[x]),ae.colorArr&&ae.colorArr[x]&&A.colorArr.push(ae.colorArr[x])),A.faceArr.push(c[x])}A.vertexArr.length>=64e3&&(n.push({vertexArr:[],normalArr:[],faceArr:[]}),ae.colorArr&&(n.colorArr=[]),f++)}return n}Le.ISDONE=2,Le.drawCustom=function(ae,n,o){var c=o,f=c.vertexArr,T=c.faceArr;f.length!==0&&T.length!==0||console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var x=o.color;x===void 0&&(x=ae.color),x=y.CC.color(x);for(var M=yt(c),k=0,A=M.length;k<A;k++)Le.addCustomGeo(ae,n,M[k],M[k].colorArr?M[k].colorArr:x,o.clickable)};let lt=0;function mt(ae,n,o){var c=o;return ae!==void 0&&(ae instanceof y.Color?c=ae.scaled():(c=y.CC.color(ae)).scaled!==void 0&&(c=c.scaled())),n!==void 0&&(c.a=parseFloat(n)),c}class Rt{constructor(n,o){this.id=lt++,this.stylespec=o||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new l.Sprite,this.text=n,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}hide(){this.sprite&&(this.sprite.visible=!1)}show(){this.sprite&&(this.sprite.visible=!0)}setContext(){var n=this.stylespec,o=n.useScreen!==void 0&&n.useScreen,c=n.showBackground;c!=="0"&&c!=="false"||(c=!1),c===void 0&&(c=!0);var f=n.font?n.font:"sans-serif",T=parseInt(n.fontSize)?parseInt(n.fontSize):18,x=mt(n.fontColor,n.fontOpacity,{r:255,g:255,b:255,a:1}),M=n.padding?n.padding:4,k=n.borderThickness?n.borderThickness:0,A=mt(n.backgroundColor,n.backgroundOpacity,{r:0,g:0,b:0,a:1}),P=mt(n.borderColor,n.borderOpacity,A),L=n.position?n.position:{x:-10,y:1,z:1},W=n.inFront===void 0||n.inFront;W!=="false"&&W!=="0"||(W=!1);var U=n.alignment||l.SpriteAlignment.topLeft;typeof U=="string"&&U in l.SpriteAlignment&&(U=l.SpriteAlignment[U]);var V="";n.bold&&(V="bold "),this.context.font=V+T+"px  "+f;var H=this.context.measureText(this.text).width;c||(k=0);var G=H+2.5*k+2*M,Z=1.25*T+2*k+2*M;if(n.backgroundImage){var te=n.backgroundImage,re=n.backgroundWidth?n.backgroundWidth:te.width,de=n.backgroundHeight?n.backgroundHeight:te.height;re>G&&(G=re),de>Z&&(Z=de)}if(this.canvas.width=G,this.canvas.height=Z,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),V="",n.bold&&(V="bold "),this.context.font=V+T+"px  "+f,this.context.fillStyle="rgba("+A.r+","+A.g+","+A.b+","+A.a+")",this.context.strokeStyle="rgba("+P.r+","+P.g+","+P.b+","+P.a+")",n.backgroundGradient){let ye=this.context.createLinearGradient(0,Z/2,G,Z/2),ke=E.Gradient.getGradient(n.backgroundGradient),Te=ke.range(),Re=-1,we=1;Te&&(Re=Te[0],we=Te[1]);let Ue=we-Re;for(let Je=0;Je<1.01;Je+=.1){let tt=mt(ke.valueToHex(Re+Ue*Je)),Ze="rgba("+tt.r+","+tt.g+","+tt.b+","+tt.a+")";ye.addColorStop(Je,Ze)}this.context.fillStyle=ye}this.context.lineWidth=k,c&&(function(ye,ke,Te,Re,we,Ue,Je){ye.beginPath(),ye.moveTo(ke+Ue,Te),ye.lineTo(ke+Re-Ue,Te),ye.quadraticCurveTo(ke+Re,Te,ke+Re,Te+Ue),ye.lineTo(ke+Re,Te+we-Ue),ye.quadraticCurveTo(ke+Re,Te+we,ke+Re-Ue,Te+we),ye.lineTo(ke+Ue,Te+we),ye.quadraticCurveTo(ke,Te+we,ke,Te+we-Ue),ye.lineTo(ke,Te+Ue),ye.quadraticCurveTo(ke,Te,ke+Ue,Te),ye.closePath(),ye.fill(),Je&&ye.stroke()})(this.context,k,k,G-2*k,Z-2*k,6,k>0),n.backgroundImage&&this.context.drawImage(te,0,0,G,Z),this.context.fillStyle="rgba("+x.r+","+x.g+","+x.b+","+x.a+")",this.context.fillText(this.text,k+M,T+k+M,H);var le=new l.Texture(this.canvas);le.needsUpdate=!0,this.sprite.material=new l.SpriteMaterial({map:le,useScreenCoordinates:o,alignment:U,depthTest:!W,screenOffset:n.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(L.x,L.y,L.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}class Pt{static interpolateArray(n,o){function c(L,W,U){return L+(W-L)*U}var f=[],T=(n.length-1)/(o-1);f[0]=n[0];for(var x=1;x<o-1;x++){var M=x*T,k=Math.floor(M),A=Math.ceil(M),P=M-k;f[x]=c(n[k],n[A],P)}return f[o-1]=n[n.length-1],f}constructor(n,o,c){this.hidden=!1,this.boundingSphere=new g.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,o=o||{};var f,T,x,M,k,A,P,L,W,U,V=Object.assign([],o.transferfn);this.subsamples=o.subsamples||5,V.forEach(function(G){G.value=parseFloat(G.value)}),V.sort(function(G,Z){return G.value-Z.value}),this.min=V[0].value,V.length==0&&V.push(V[0]),this.max=V[V.length-1].value;for(let G=0;G<V.length-1;G++)if(x=y.CC.color(V[G].color),M=y.CC.color(V[G+1].color),W=V[G].opacity,U=V[G+1].opacity,(f=Math.floor(256*(V[G].value-this.min)/(this.max-this.min)))!=(T=Math.floor(256*(V[G+1].value-this.min)/(this.max-this.min)))){k=Pt.interpolateArray([255*x.r,255*M.r],T-f),A=Pt.interpolateArray([255*x.g,255*M.g],T-f),P=Pt.interpolateArray([255*x.b,255*M.b],T-f),L=Pt.interpolateArray([255*W,255*U],T-f);for(let Z=0;Z<k.length;Z++)this.transferfunctionbuffer.push(k[Z]),this.transferfunctionbuffer.push(A[Z]),this.transferfunctionbuffer.push(P[Z]),this.transferfunctionbuffer.push(L[Z])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),n.matrix){let G=new d.Vector3(0,0,0),Z=new d.Vector3(n.size.x,n.size.y,n.size.z),te=new d.Vector3(1,1,1);G.applyMatrix4(n.matrix),Z.applyMatrix4(n.matrix),te.applyMatrix4(n.matrix).sub(G),this.extent=[[G.x,G.y,G.z],[Z.x,Z.y,Z.z]];for(let ye=1;ye<7;ye++)Z.x=1&ye?n.size.x:0,Z.y=2&ye?n.size.y:0,Z.z=4&ye?n.size.z:0,Z.applyMatrix4(n.matrix),this.extent[0][0]=Math.min(this.extent[0][0],Z.x),this.extent[0][1]=Math.min(this.extent[0][1],Z.y),this.extent[0][2]=Math.min(this.extent[0][2],Z.z),this.extent[1][0]=Math.max(this.extent[1][0],Z.x),this.extent[1][1]=Math.max(this.extent[1][1],Z.y),this.extent[1][2]=Math.max(this.extent[1][2],Z.z);let re=Z.x-G.x,de=Z.y-G.y,le=Z.z-G.z;this.maxdepth=Math.sqrt(re*re+de*de+le*le),this.minunit=Math.min(Math.min(te.x,te.y),te.z),this.texmatrix=new d.Matrix4().identity().scale({x:n.size.x,y:n.size.y,z:n.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(n.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new d.Matrix4().identity();let G=n.unit.x*n.size.x,Z=n.unit.y*n.size.y,te=n.unit.z*n.size.z;this.texmatrix.makeTranslation(-n.origin.x/G,-n.origin.y/Z,-n.origin.z/te),this.texmatrix.scale({x:1/G,y:1/Z,z:1/te}),this.minunit=Math.min(Math.min(n.unit.x,n.unit.y),n.unit.z),this.extent=[[n.origin.x,n.origin.y,n.origin.z],[n.origin.x+G,n.origin.y+Z,n.origin.z+te]],this.maxdepth=Math.sqrt(G*G+Z*Z+te*te)}var H=new Le({});if(H.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=H.finalize(),this.boundingSphere.center=new d.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,o.coords===void 0&&o.selection!==void 0&&(c?o.coords=c.selectedAtoms(o.selection):console.log("Need to provide viewer to volumetric renderer if selection specified.")),o.coords!==void 0&&o.seldist!==void 0){let G=new Uint8Array(n.data.length),Z=o.seldist,te=Z*Z;for(let re=0,de=o.coords.length;re<de;re++){let le=o.coords[re],ye=le.x-Z,ke=le.y-Z,Te=le.z-Z,Re=le.x+Z,we=le.y+Z,Ue=le.z+Z;if(n.getIndex(ye,ke,Te)>=0||n.getIndex(Re,we,Ue)>=0)for(let Je=ye;Je<Re;Je+=this.minunit)for(let tt=ke;tt<we;tt+=this.minunit)for(let Ze=Te;Ze<Ue;Ze+=this.minunit){let ut=n.getIndex(Je,tt,Ze);ut>=0&&!G[ut]&&(Je-le.x)*(Je-le.x)+(tt-le.y)*(tt-le.y)+(Ze-le.z)*(Ze-le.z)<te&&(G[ut]=1)}}for(let re=0,de=n.data.length;re<de;re++)G[re]==0&&(n.data[re]=1/0)}this.data=n}globj(n){if(this.renderedShapeObj&&(n.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new l.Object3D;var o,c=new l.Texture(this.data,!0),f=new l.Texture(this.transferfunctionbuffer,!1);c.needsUpdate=!0,f.needsUpdate=!0,f.flipY=!1,o=new l.VolumetricMaterial({transferfn:f,transfermin:this.min,transfermax:this.max,map:c,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var T=new l.Mesh(this.geo,o);this.shapeObj.add(T),this.renderedShapeObj=this.shapeObj.clone(),n.add(this.renderedShapeObj)}}removegl(n){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),n.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}const Ot=16;class gr extends Array{constructor(n){super(...n)}getSymmetries(){if(this.length==0)return[];let n=this[0];return n.symmetries===void 0&&this.setSymmetries([new d.Matrix4]),n.symmetries}setSymmetries(n){n===void 0&&(n=[new d.Matrix4]);for(let o of this)o.symmetries=n,o.finished=!1}}class Zt{getWidth(){let n=this.container,o=n.offsetWidth;if(o==0&&n.style.display==="none"){let c=n.style.position,f=n.style.visibility;n.style.display="block",n.style.visibility="hidden",n.style.position="absolute",o=n.offsetWidth,n.style.display="none",n.style.visibility=f,n.style.position=c}return o}getHeight(){let n=this.container,o=n.offsetHeight;if(o==0&&n.style.display==="none"){let c=n.style.position,f=n.style.visibility;n.style.display="block",n.style.visibility="hidden",n.style.position="absolute",o=n.offsetHeight,n.style.display="none",n.style.visibility=f,n.style.position=c}return o}setupRenderer(){let n=Object.assign(Object.assign({},this.config),{preserveDrawingBuffer:!0,premultipliedAlpha:!1,containerWidth:this.WIDTH,containerHeight:this.HEIGHT});this.renderer=new l.Renderer(n),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.renderer.domElement.style.padding="0",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.renderer.domElement.style.zIndex="0"}initializeScene(){this.scene=new l.Scene,this.scene.fog=new l.Fog(this.bgColor,100,200),this.modelGroup=new l.Object3D,this.rotationGroup=new l.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new d.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var n=new l.Light(16777215);n.position=new d.Vector3(.2,.2,1).normalize(),n.intensity=1,this.scene.add(n)}_handleLostContext(n){const o=function(c){const f=c.getBoundingClientRect();return!(f.right<0||f.bottom<0||f.top>(window.innerHeight||document.documentElement.clientHeight)||f.left>(window.innerWidth||document.documentElement.clientWidth))};if(o(this.container)){let c=0;for(let f of document.getElementsByTagName("canvas"))if(o(f)&&f._3dmol_viewer!=null&&(f._3dmol_viewer.resize(),c+=1,c>=Ot))break}}initContainer(n){this.container=n,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.glDOM._3dmol_viewer=this,this.glDOM.addEventListener("webglcontextlost",this._handleLostContext.bind(this)),this.nomouse||(this.glDOM.addEventListener("mousedown",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("touchstart",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("wheel",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener("mousemove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("touchmove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("contextmenu",this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var n=0;for(let c in this.surfaces)if(this.surfaces.hasOwnProperty(c)){var o=parseInt(c);isNaN(o)||o>n&&(n=o)}return n+1}setSlabAndFog(){let n=this.camera.position.z-this.rotationGroup.position.z;n<1&&(n=1),this.camera.near=n+this.slabNear,!this.camera.ortho&&this.camera.near<1&&(this.camera.near=1),this.camera.far=n+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=n*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.near+this.fogEnd*(this.camera.far-this.camera.near),this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(n){if(this.renderer.setViewport(),this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!n&&this.linkedViewers.length>0))for(var o=this._viewer.getView(),c=0;c<this.linkedViewers.length;c++)this.linkedViewers[c].setView(o,!0)}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledObjects.splice(0,this.contextMenuEnabledObjects.length);for(let n=0,o=this.models.length;n<o;n++){let c=this.models[n];if(c){let f=c.selectedAtoms({clickable:!0}),T=c.selectedAtoms({hoverable:!0}),x=c.selectedAtoms({contextMenuEnabled:!0});for(let M=0;M<T.length;M++)this.hoverables.push(T[M]);for(let M=0;M<f.length;M++)this.clickables.push(f[M]);for(let M=0;M<x.length;M++)this.contextMenuEnabledObjects.push(x[M])}}for(let n=0,o=this.shapes.length;n<o;n++){let c=this.shapes[n];c&&c.clickable&&this.clickables.push(c),c&&c.hoverable&&this.hoverables.push(c),c&&c.contextMenuEnabled&&this.contextMenuEnabledObjects.push(c)}}handleClickSelection(n,o,c){let f=this.targetedObjects(n,o,this.clickables);if(f.length){var T=f[0].clickable;T.callback!==void 0&&(typeof T.callback!="function"&&(T.callback=(0,v.makeFunction)(T.callback)),typeof T.callback=="function")&&(this.mouseButton===3&&this.contextMenuEnabledObjects.includes(T)&&this.userContextMenuHandler||T.callback(T,this._viewer,c,this.container,f))}}canvasOffset(){let n=this.glDOM,o=n.getBoundingClientRect(),c=n.ownerDocument,f=c.documentElement,T=c.defaultView;return{top:o.top+T.pageYOffset-f.clientTop,left:o.left+T.pageXOffset-f.clientLeft}}setHover(n,o,c){this.current_hover!=n&&(this.current_hover&&(typeof this.current_hover.unhover_callback!="function"&&(this.current_hover.unhover_callback=(0,v.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,o,this.container,c)),this.current_hover=n,n&&n.hover_callback!==void 0&&(typeof n.hover_callback!="function"&&(n.hover_callback=(0,v.makeFunction)(n.hover_callback)),typeof n.hover_callback=="function"&&n.hover_callback(n,this._viewer,o,this.container,c)))}handleHoverSelection(n,o,c){if(this.hoverables.length==0)return;let f=this.targetedObjects(n,o,this.hoverables);if(f.length){var T=f[0].clickable;this.setHover(T,c,f),this.current_hover=T}else this.setHover(null)}handleHoverContinue(n,o){let c=this.targetedObjects(n,o,this.hoverables);c.length!=0&&c[0]!==void 0||this.setHover(null),c[0]!==void 0&&c[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(n,{allowTolerance:o=n.targetTouches,tolerance:c=5}={}){const f=this.getX(n),T=this.getY(n);if(o){const x=Math.abs(f-this.mouseStartX),M=Math.abs(T-this.mouseStartY);return x<=c&&M<=c}return f===this.mouseStartX&&T===this.mouseStartY}calcTouchDistance(n){var o=n.targetTouches[0].pageX-n.targetTouches[1].pageX,c=n.targetTouches[0].pageY-n.targetTouches[1].pageY;return Math.hypot(o,c)}getX(n){var o=n.pageX;return o==null&&(o=n.pageX),n.targetTouches&&n.targetTouches[0]?o=n.targetTouches[0].pageX:n.changedTouches&&n.changedTouches[0]&&(o=n.changedTouches[0].pageX),o}getY(n){var o=n.pageY;return o==null&&(o=n.pageY),n.targetTouches&&n.targetTouches[0]?o=n.targetTouches[0].pageY:n.changedTouches&&n.changedTouches[0]&&(o=n.changedTouches[0].pageY),o}isInViewer(n,o){if(this.viewers!=null){var c=this.WIDTH/this.cols,f=this.HEIGHT/this.rows,T=this.canvasOffset(),x=n-T.left,M=o-T.top,k=this.rows-Math.floor(M/f)-1,A=Math.floor(x/c);if(k!=this.row||A!=this.col)return!1}return!0}adjustZoomToLimits(n){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let o=this.CAMERA_Z-this.config.lowerZoomLimit;n>o&&(n=o)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let o=this.CAMERA_Z-this.config.upperZoomLimit;n<o&&(n=o)}return n>this.CAMERA_Z-1&&(n=this.CAMERA_Z-1),n}static slerp(n,o,c){if(c==1)return o.clone();if(c==0)return n.clone();let f=n.x*o.x+n.y*o.y+n.z*o.z+n.w*o.w;if(f>.9995){let P=new d.Quaternion(n.x+c*(o.x-n.x),n.y+c*(o.y-n.y),n.z+c*(o.z-n.z),n.w+c*(o.w-n.w));return P.normalize(),P}f<0&&(o=o.clone().multiplyScalar(-1),f=-f),f>1?f=1:f<-1&&(f=-1);var T=Math.acos(f)*c,x=o.clone();x.sub(n.clone().multiplyScalar(f)),x.normalize();var M=Math.cos(T),k=Math.sin(T),A=new d.Quaternion(n.x*M+x.x*k,n.y*M+x.y*k,n.z*M+x.z*k,n.w*M+x.w*k);return A.normalize(),A}constructor(n,o={}){if(this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledObjects=[],this.current_hover=null,this.hoverDuration=500,this.longTouchDuration=1e3,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.fogEnd=1,this.slabNear=-50,this.slabFar=50,this.cq=new d.Quaternion(0,0,0,1),this.dq=new d.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=o,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=y.elementColors.defaultColors),this.nomouse=!!this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||"#ffffff",this.config.backgroundColor!==void 0&&(this.bgColor=y.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,this.config.camerax!==void 0&&(this.camerax=typeof this.config.camerax=="string"?parseFloat(this.config.camerax):this.config.camerax),this._viewer=this,this.container=n,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row==null?0:this.config.row,this.col=this.config.col==null?0:this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new l.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new d.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new d.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new l.Raycaster(new d.Vector3(0,0,0),new d.Vector3(0,0,0)),this.projector=new l.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=y.CC.color(this.bgColor),document.body.addEventListener("mouseup",this._handleMouseUp.bind(this)),document.body.addEventListener("touchend",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener("resize",this.resize.bind(this)),window.ResizeObserver!==void 0&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container)),window.IntersectionObserver!==void 0){let c=(f,T)=>{f.forEach(x=>{x.isIntersecting&&this.resize()})};this.intwatcher=new window.IntersectionObserver(c),this.intwatcher.observe(this.container)}try{typeof this.callback=="function"&&this.callback(this)}catch(c){console.log("error with glviewer callback: "+c)}}targetedObjects(n,o,c){var f={x:n,y:o,z:-1};return Array.isArray(c)||(c=this.selectedAtoms(c)),c.length==0?[]:(this.raycaster.setFromCamera(f,this.camera),this.raycaster.intersectObjects(this.modelGroup,c))}modelToScreen(n){let o=!1;Array.isArray(n)||(n=[n],o=!0);let c=this.renderer.getXRatio(),f=this.renderer.getYRatio(),T=this.col,x=this.row,M=T*(this.WIDTH/c),k=(f-x-1)*(this.HEIGHT/f),A=[],P=this.canvasOffset();return n.forEach(L=>{let W=new d.Vector3(L.x,L.y,L.z);W.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector(W,this.camera);let U=this.WIDTH/c*(W.x+1)/2+P.left+M,V=-this.HEIGHT/f*(W.y-1)/2+P.top+k;A.push({x:U,y:V})}),o&&(A=A[0]),A}screenOffsetToModel(n,o,c){var f=n/this.WIDTH,T=o/this.HEIGHT,x=c===void 0?this.rotationGroup.position.z:c,M=this.rotationGroup.quaternion,k=new d.Vector3(0,0,x);return this.projector.projectVector(k,this.camera),k.x+=2*f,k.y-=2*T,this.projector.unprojectVector(k,this.camera),k.z=0,k.applyQuaternion(M),k}screenToModelDistance(n,o){let c=this.canvasOffset(),f=new d.Vector3(o.x,o.y,o.z);f.applyMatrix4(this.modelGroup.matrixWorld);let T=f.clone();this.projector.projectVector(f,this.camera);let x=new d.Vector3(2*(n.x-c.left)/this.WIDTH-1,2*(n.y-c.top)/-this.HEIGHT+1,f.z);return this.projector.unprojectVector(x,this.camera),x.distanceTo(T)}setViewChangeCallback(n){typeof n!="function"&&n!=null||(this.viewChangeCallback=n)}setStateChangeCallback(n){typeof n!="function"&&n!=null||(this.stateChangeCallback=n)}getConfig(){return this.config}setConfig(n){this.config=n,n.ambientOcclusion&&this.renderer.enableAmbientOcclusion(n.ambientOcclusion)}getInternalState(){var n={models:[],surfaces:[],shapes:[],labels:[]};for(let o=0;o<this.models.length;o++)this.models[o]&&(n.models[o]=this.models[o].getInternalState());return n}setInternalState(n){this.clear();var o=n.models;for(let c=0;c<o.length;c++)o[c]&&(this.models[c]=new ur(c,void 0,this),this.models[c].setInternalState(o[c]));this.render()}setZoomLimits(n,o){n!==void 0&&(this.config.lowerZoomLimit=n),o&&(this.config.upperZoomLimit=o),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(n){n.fov!==void 0&&(this.fov=n.fov,this.camera.fov=this.fov),n.z!==void 0&&(this.CAMERA_Z=n.z,this.camera.z=this.CAMERA_Z),n.orthographic!==void 0&&(this.camera.ortho=n.orthographic),this.setSlabAndFog()}_handleMouseDown(n){if(n.preventDefault(),!this.scene)return;var o=this.getX(n),c=this.getY(n);if(o===void 0)return;this.isDragging=!0,this.mouseButton=n.which,this.mouseStartX=o,this.mouseStartY=c,this.touchHold=!0,this.touchDistanceStart=0,n.targetTouches&&n.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(n)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let f=this;n.targetTouches&&n.targetTouches.length===1&&(this.longTouchTimeout=setTimeout(function(){if(f.touchHold==1){f.glDOM=f.renderer.domElement;const T=n.targetTouches[0],x=new PointerEvent("contextmenu",Object.assign(Object.assign({},n),{pageX:T.pageX,pageY:T.pageY,screenX:T.screenX,screenY:T.screenY,clientX:T.clientX,clientY:T.clientY}));f.glDOM.dispatchEvent(x)}},this.longTouchDuration))}_handleMouseUp(n){if(this.touchHold=!1,this.isDragging&&this.scene){var o=this.getX(n),c=this.getY(n);if(this.closeEnoughForClick(n)&&this.isInViewer(o,c)){let f=this.mouseXY(o,c);this.handleClickSelection(f.x,f.y,n)}}this.isDragging=!1}_handleMouseScroll(n){if(n.preventDefault(),this.scene){var o=this.getX(n),c=this.getY(n);if(o!==void 0&&(this.control_all||this.isInViewer(o,c))){var f=.85*(this.CAMERA_Z-this.rotationGroup.position.z),T=1;if(n.ctrlKey&&(T=-1),n.detail)this.rotationGroup.position.z+=T*f*n.detail/10;else if(n.wheelDelta){let x=600*n.wheelDelta/(n.wheelDelta+600);this.rotationGroup.position.z-=T*f*x/400}this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL("image/png")}apngURI(n){let o=this;return n=n||1,new Promise(function(c){let f=0,T=o.viewChangeCallback,x=[],M=[],k=Date.now();o.viewChangeCallback=function(){M.push(Date.now()-k),k=Date.now(),x.push(new Promise(A=>{o.getCanvas().toBlob(function(P){P.arrayBuffer().then(A)},"image/png")})),f+=1,f==n&&(o.viewChangeCallback=T,Promise.all(x).then(A=>{let P=[];for(let G=0;G<A.length;G++){let Z=(0,_.decode)(A[G]);P.push((0,_.toRGBA8)(Z)[0])}let L=o.getCanvas().width,W=o.getCanvas().height,U=(0,_.encode)(P,L,W,0,M),V=new Blob([U],{type:"image/png"}),H=new FileReader;H.onload=function(G){c(G.target.result)},H.readAsDataURL(V)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(n){this.hoverDuration=n}mouseXY(n,o){let c=this.canvasOffset(),f=this.renderer.getXRatio(),T=this.renderer.getYRatio(),x=this.col,M=this.row,k=x*(this.WIDTH/f),A=(T-M-1)*(this.HEIGHT/T);return{x:(n-c.left-k)/(this.WIDTH/f)*2-1,y:-(o-c.top-A)/(this.HEIGHT/T)*2+1}}_handleMouseMove(n){clearTimeout(this.hoverTimeout),n.preventDefault();let o=this.getX(n),c=this.getY(n);if(o===void 0)return;let f=this.renderer.getXRatio(),T=this.renderer.getYRatio(),x=this.mouseXY(o,c),M=this;this.current_hover!==null&&this.handleHoverContinue(x.x,x.y);var k=0;if((this.control_all||this.isInViewer(o,c))&&this.scene&&(this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){M.handleHoverSelection(x.x,x.y,n)},this.hoverDuration)),this.isDragging)){n.targetTouches&&(n.targetTouches.length>1||n.targetTouches.length===1&&!this.closeEnoughForClick(n))&&clearTimeout(this.longTouchTimeout);var A=(o-this.mouseStartX)/this.WIDTH,P=(c-this.mouseStartY)/this.HEIGHT;this.touchDistanceStart!=0&&n.targetTouches&&n.targetTouches.length==2?(k=2,P=2*(this.calcTouchDistance(n)-this.touchDistanceStart)/(this.WIDTH+this.HEIGHT)):n.targetTouches&&n.targetTouches.length==3&&(k=1),A*=f,P*=T;var L,W=Math.hypot(A,P);if(k==3||this.mouseButton==3&&n.ctrlKey)this.slabNear=this.cslabNear+100*A,this.slabFar=this.cslabFar-100*P;else if(k==2||this.mouseButton==3||n.shiftKey)(L=.85*(this.CAMERA_Z-this.rotationGroup.position.z))<80&&(L=80),this.rotationGroup.position.z=this.cz+P*L,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(k==1||this.mouseButton==2||n.ctrlKey){var U=this.screenOffsetToModel(f*(o-this.mouseStartX),T*(c-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,U)}else if((k===0||this.mouseButton==1)&&W!==0){var V=Math.sin(W*Math.PI)/W;this.dq.x=Math.cos(W*Math.PI),this.dq.y=0,this.dq.z=V*A,this.dq.w=-V*P,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}_handleContextMenu(n){if(n.preventDefault(),this.closeEnoughForClick(n)){var o=this.mouseStartX,c=this.mouseStartY,f=this.canvasOffset();let x=this.mouseXY(o,c),M=x.x,k=x.y,A=this.targetedObjects(M,k,this.contextMenuEnabledObjects);var T=null;A.length&&(T=A[0].clickable),f=this.canvasOffset(),o=this.mouseStartX-f.left,c=this.mouseStartY-f.top,this.userContextMenuHandler&&(this.userContextMenuHandler(T,o,c,A,n),this.isDragging=!1)}}setContainer(n){let o=(0,v.getElement)(n)||this.container;return this.initContainer(o),this}setBackgroundColor(n,o){(o===void 0||o<0||o>1)&&(o=1);var c=y.CC.color(n);return this.scene.fog.color=c,this.bgColor=c.getHex(),this.renderer.setClearColorHex(c.getHex(),o),this.show(),this}setProjection(n){this.camera.ortho=n==="orthographic",this.setSlabAndFog()}setViewStyle(n){if((n=n||{}).style=n.style||"",n.style.includes("outline")?this.renderer.enableOutline(n):this.renderer.disableOutline(),n.style.includes("ambientOcclusion")){var o={};n.strength&&(o.strength=n.strength),n.radius&&(o.radius=n.radius),this.renderer.enableAmbientOcclusion(o)}else this.renderer.disableAmbientOcclusion();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(n){return this.WIDTH=n||this.WIDTH,this.updateSize(),this}setHeight(n){return this.HEIGHT=n||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let n=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0){let o=!1,c=this.container.querySelector("canvas");c&&c!=this.renderer.getCanvas()?this.config.canvas=c:(c.remove(),this.config&&this.config.canvas!=null&&(delete this.config.canvas,o=!0)),this.setupRenderer(),this.initContainer(this.container),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),n=!0,o&&(this.config.canvas=this.renderer.getCanvas())}if(this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),n){let o=this.renderer.supportedExtensions();if(o.regen=!0,this.viewers)for(let c=0,f=this.viewers.length;c<f;c++)for(let T=0,x=this.viewers[c].length;T<x;T++)this.viewers[c][T].render(null,o);this._viewer.render(null,o)}else this.WIDTH>0&&this.HEIGHT>0&&this.show();return this}getModel(n){return n===void 0?this.models.length==0?null:this.models[this.models.length-1]:n instanceof ur?n:n in this.models?this.models[n]:this.models.length==0?null:this.models[this.models.length-1]}spin(n,o=1,c=!1){if(clearInterval(this.spinInterval),n===void 0&&(n="y"),typeof n=="boolean"){if(!n)return;n="y"}Array.isArray(n)&&(n={x:n[0],y:n[1],z:n[2]});var f=this;this.spinInterval=setInterval(function(){!f.getCanvas().isConnected&&f.renderer.isLost()&&clearInterval(f.spinInterval),(!c||f.container.checkVisibility&&f.container.checkVisibility())&&f.rotate(1*o,n)},25)}animateMotion(n,o,c,f,T,x){var M=Math.ceil(n/20);M<1&&(M=1),this.incAnim();var k={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(o){let L=new Array(M);for(let H=0;H<M;H++){let G=(H+1)/M,Z={mpos:k.mpos,rz:k.rz,rot:k.rot};Z.mpos=c.clone().sub(k.mpos).multiplyScalar(G).add(k.mpos),Z.rz=k.rz+G*(f-k.rz),Z.rot=Zt.slerp(k.rot,T,G),Z.cam=x.clone().sub(k.cam).multiplyScalar(G).add(k.cam),L[H]=Z}let W=0,U=this,V=function(){var H=L[W];W+=1,U.modelGroup.position=H.mpos,U.rotationGroup.position.z=H.rz,U.rotationGroup.quaternion=H.rot,U.camera.lookAt(H.cam),W<L.length?setTimeout(V,20):U.decAnim(),U.show()};setTimeout(V,20)}else{var A={};let L=1/M;if(c&&(A.mpos=c.clone().sub(k.mpos).multiplyScalar(L)),f!==void 0&&f!=null&&(A.rz=L*(f-k.rz)),T){var P=Zt.slerp(k.rot,T,L);A.rot=k.rot.clone().inverse().multiply(P)}x&&(A.cam=x.clone().sub(k.cam).multiplyScalar(L));let W=0,U=this,V=function(){W+=1,A.mpos&&U.modelGroup.position.add(A.mpos),A.rz&&(U.rotationGroup.position.z+=A.rz),A.rot&&U.rotationGroup.quaternion.multiply(A.rot),A.cam&&(U.lookingAt.add(A.cam),U.camera.lookAt(U.lookingAt)),W<M?setTimeout(V,20):U.decAnim(),U.show()};setTimeout(V,20)}}rotate(n,o="y",c=0,f=!1){if(o=="x"?o={x:1,y:0,z:0}:o=="y"?o={x:0,y:1,z:0}:o=="z"&&(o={x:0,y:0,z:1}),o=="vx"?o={vx:1,vy:0,vz:0}:o=="vy"?o={vx:0,vy:1,vz:0}:o=="vz"&&(o={vx:0,vy:0,vz:1}),o.vx!==void 0){var T=new d.Vector3(o.vx,o.vy,o.vz);T.applyQuaternion(this.rotationGroup.quaternion),o={x:T.x,y:T.y,z:T.z}}var x=(function(k){var A,P,L,W=Math.sin(k/2),U=Math.cos(k/2);return A=o.x*W,P=o.y*W,L=o.z*W,new d.Quaternion(A,P,L,U).normalize()})(Math.PI*n/180);if(c){var M=new d.Quaternion().copy(this.rotationGroup.quaternion).multiply(x);this.animateMotion(c,f,this.modelGroup.position,this.rotationGroup.position.z,M,this.lookingAt)}else this.rotationGroup.quaternion.multiply(x),this.show();return this}surfacesFinished(){for(var n in this.surfaces)if(!this.surfaces[n][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var n=this.modelGroup.position,o=this.rotationGroup.quaternion;return[n.x,n.y,n.z,this.rotationGroup.position.z,o.x,o.y,o.z,o.w]}setView(n,o){return n!==void 0&&(n instanceof Array||n.length!==8)&&this.modelGroup&&this.rotationGroup?(this.modelGroup.position.x=n[0],this.modelGroup.position.y=n[1],this.modelGroup.position.z=n[2],this.rotationGroup.position.z=n[3],this.rotationGroup.quaternion.x=n[4],this.rotationGroup.quaternion.y=n[5],this.rotationGroup.quaternion.z=n[6],this.rotationGroup.quaternion.w=n[7],n[8]!==void 0&&(this.rotationGroup.position.x=n[8],this.rotationGroup.position.y=n[9]),this.show(o),this):this}render(n,o){this.renderer.setViewport(),this.updateClickables();var c,f,T=this.getView();for(this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState()),o||(o=this.renderer.supportedExtensions()),c=0;c<this.models.length;c++)this.models[c]&&this.models[c].globj(this.modelGroup,o);for(c=0;c<this.shapes.length;c++)this.shapes[c]&&(this.shapes[c].frame===void 0||this.viewer_frame<0||this.shapes[c].frame<0||this.shapes[c].frame==this.viewer_frame?this.shapes[c].globj(this.modelGroup,o):this.shapes[c].removegl(this.modelGroup));for(c=0;c<this.labels.length;c++)o.regen&&(this.labels[c].dispose(),this.modelGroup.remove(this.labels[c].sprite),this.labels[c].setContext(),this.modelGroup.add(this.labels[c].sprite)),this.labels[c]&&this.labels[c].frame!==void 0&&this.labels[c].frame>=0&&(this.modelGroup.remove(this.labels[c].sprite),(this.viewer_frame<0||this.labels[c].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[c].sprite));for(c in this.surfaces)if(this.surfaces.hasOwnProperty(c)){var x=this.surfaces[c];for(f=0;f<x.length;f++)if(x.hasOwnProperty(f)){var M=x[f].geo;if(!x[f].finished||o.regen){M.verticesNeedUpdate=!0,M.elementsNeedUpdate=!0,M.normalsNeedUpdate=!0,M.colorsNeedUpdate=!0,M.buffersNeedUpdate=!0,x[f].mat.needsUpdate=!0,x[f].done&&(x[f].finished=!0),x[f].lastGL&&this.modelGroup.remove(x[f].lastGL);var k=null;if(x[f].mat instanceof l.LineBasicMaterial?k=new l.Line(M,x[f].mat):("wireframe"in x.style&&x.style.wireframe&&M.setUpWireframe(),k=new l.Mesh(M,x[f].mat)),x[f].mat.transparent&&x[f].mat.opacity==0?k.visible=!1:k.visible=!0,x[f].symmetries.length>1||x[f].symmetries.length==1&&!x[f].symmetries[0].isIdentity()){var A,P=new l.Object3D;for(A=0;A<x[f].symmetries.length;A++){var L=k.clone();L.matrix=x[f].symmetries[A],L.matrixAutoUpdate=!1,P.add(L)}x[f].lastGL=P,this.modelGroup.add(P)}else x[f].lastGL=k,this.modelGroup.add(k)}}}return this.setView(T),typeof n=="function"&&n(this),this}getModelList(n){let o=[];if(n===void 0||n.model===void 0)for(let f=0;f<this.models.length;f++)this.models[f]&&o.push(this.models[f]);else{let f=n.model;Array.isArray(f)||(f=[f]);for(let T=0;T<f.length;T++)if(typeof f[T]=="number"){var c=f[T];c<0&&(c+=this.models.length),o.push(this.models[c])}else o.push(f[T])}return o}getAtomsFromSel(n){var o=[];n===void 0&&(n={});var c=this.getModelList(n);for(let f=0;f<c.length;f++)o=o.concat(c[f].selectedAtoms(n));return o}atomIsSelected(n,o){o===void 0&&(o={});for(var c=this.getModelList(o),f=0;f<c.length;f++)if(c[f].atomIsSelected(n,o))return!0;return!1}selectedAtoms(n){return this.getAtomsFromSel(n)}getUniqueValues(n,o){o===void 0&&(o={});var c=this.getAtomsFromSel(o),f={};for(var T in c)c[T].hasOwnProperty(n)&&(f[c[T][n]]=!0);return Object.keys(f)}pdbData(n){for(var o=this.getAtomsFromSel(n),c="",f=0,T=o.length;f<T;++f)c+=o[f].pdbline+`
`;return c}zoom(n=2,o=0,c=!1){var f=(this.CAMERA_Z-this.rotationGroup.position.z)/n,T=this.CAMERA_Z-f;return o>0?this.animateMotion(o,c,this.modelGroup.position,this.adjustZoomToLimits(T),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(T),this.show()),this}translate(n,o,c=0,f=!1){var T=n/this.WIDTH,x=o/this.HEIGHT,M=new d.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(M,this.camera),M.x-=T,M.y-=x,this.projector.unprojectVector(M,this.camera),M.z=0;var k=this.lookingAt.clone().add(M);return c>0?this.animateMotion(c,f,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,k):(this.lookingAt=k,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(n,o,c=0,f=!1){var T=this.screenOffsetToModel(n,o),x=this.modelGroup.position.clone().add(T);return c>0?this.animateMotion(c,f,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=x,this.show()),this}fitSlab(n){n=n||{};var o=this.getAtomsFromSel(n),c=(0,v.getExtent)(o),f=c[1][0]-c[0][0],T=c[1][1]-c[0][1],x=c[1][2]-c[0][2],M=Math.hypot(f,T,x);return M<5&&(M=5),this.slabNear=-M/1.9,this.slabFar=M/2,this}center(n={},o=0,c=!1){var f,T,x=this.getAtomsFromSel(n),M=(0,v.getExtent)(x);(0,v.isEmptyObject)(n)?(this.shapes.forEach(Z=>{if(Z&&Z.boundingSphere&&Z.boundingSphere.center){var te=Z.boundingSphere.center,re=Z.boundingSphere.radius;re>0?(x.push(new d.Vector3(te.x+re,te.y,te.z)),x.push(new d.Vector3(te.x-re,te.y,te.z)),x.push(new d.Vector3(te.x,te.y+re,te.z)),x.push(new d.Vector3(te.x,te.y-re,te.z)),x.push(new d.Vector3(te.x,te.y,te.z+re)),x.push(new d.Vector3(te.x,te.y,te.z-re))):x.push(te)}}),M=(0,v.getExtent)(x),f=x,T=M):(f=this.getAtomsFromSel({}),T=(0,v.getExtent)(f));var k=new d.Vector3(M[2][0],M[2][1],M[2][2]),A=T[1][0]-T[0][0],P=T[1][1]-T[0][1],L=T[1][2]-T[0][2],W=Math.hypot(A,P,L);W<5&&(W=5),this.slabNear=-W/1.9,this.slabFar=W/2,A=M[1][0]-M[0][0],P=M[1][1]-M[0][1],L=M[1][2]-M[0][2],(W=Math.hypot(A,P,L))<5&&(W=5);for(var U=25,V=0;V<x.length;V++)if(x[V]){var H=k.distanceToSquared(x[V]);H>U&&(U=H)}W=2*Math.sqrt(U);var G=k.clone().multiplyScalar(-1);return o>0?this.animateMotion(o,c,G,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=G,this.show()),this}zoomTo(n={},o=0,c=!1){let f=this.getAtomsFromSel(n),T=(0,v.getExtent)(f),x=T;if((0,v.isEmptyObject)(n)){let te=f&&f.length;if(this.shapes.forEach(re=>{if(re&&re.boundingSphere){if(re.boundingSphere.box){let ye=re.boundingSphere.box;f.push(new d.Vector3(ye.min.x,ye.min.y,ye.min.z)),f.push(new d.Vector3(ye.max.x,ye.max.y,ye.max.z))}else if(re.boundingSphere.center){var de=re.boundingSphere.center,le=re.boundingSphere.radius;le>0?(f.push(new d.Vector3(de.x+le,de.y,de.z)),f.push(new d.Vector3(de.x-le,de.y,de.z)),f.push(new d.Vector3(de.x,de.y+le,de.z)),f.push(new d.Vector3(de.x,de.y-le,de.z)),f.push(new d.Vector3(de.x,de.y,de.z+le)),f.push(new d.Vector3(de.x,de.y,de.z-le))):f.push(de)}}}),x=(0,v.getExtent)(f),!te)for(let re=0;re<3;re++)T[2][re]=(x[0][re]+x[1][re])/2}else{let te=this.getAtomsFromSel({});x=(0,v.getExtent)(te)}var M=new d.Vector3(T[2][0],T[2][1],T[2][2]),k=x[1][0]-x[0][0],A=x[1][1]-x[0][1],P=x[1][2]-x[0][2],L=Math.hypot(k,A,P);L<5&&(L=5),this.slabNear=-L/1.9,this.slabFar=L/2,Object.keys(n).length===0&&(this.slabNear=Math.min(2*-L,-50),this.slabFar=Math.max(2*L,50));var W=this.config.minimumZoomToDistance||5;k=T[1][0]-T[0][0],A=T[1][1]-T[0][1],P=T[1][2]-T[0][2],(L=Math.hypot(k,A,P))<W&&(L=W);for(var U=W*W,V=0;V<f.length;V++)if(f[V]){var H=M.distanceToSquared(f[V]);H>U&&(U=H)}L=2*Math.sqrt(U);var G=M.clone().multiplyScalar(-1),Z=-(.5*L/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return Z=this.adjustZoomToLimits(Z),o>0?this.animateMotion(o,c,G,Z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=G,this.rotationGroup.position.z=Z,this.show()),this}setSlab(n,o){this.slabNear=n,this.slabFar=o}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(n,o={},c,f=!1){if(c){var T=(0,v.getExtent)(this.getAtomsFromSel(c));o.position={x:T[2][0],y:T[2][1],z:T[2][2]}}var x=new Rt(n,o);return x.setContext(),this.modelGroup.add(x.sprite),this.labels.push(x),f||this.show(),x}addResLabels(n,o,c=!1){let f=this.labels.length;return this.applyToModels("addResLabels",n,o,c),this.show(),this.labels.slice(f)}addPropertyLabels(n,o,c){return this.applyToModels("addPropertyLabels",n,o,c),this.show(),this}removeLabel(n){for(var o=0;o<this.labels.length;o++)if(this.labels[o]==n){this.labels.splice(o,1),n.dispose(),this.modelGroup.remove(n.sprite);break}return this.show(),this}removeAllLabels(){for(var n=0;n<this.labels.length;n++)this.labels[n]&&this.labels[n].sprite&&this.modelGroup.remove(this.labels[n].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}hideAllLabels(){for(var n=0;n<this.labels.length;n++)this.labels[n]&&this.labels[n].hide();return this.show(),this}showAllLabels(){for(var n=0;n<this.labels.length;n++)this.labels[n]&&this.labels[n].show();return this.show(),this}setLabelStyle(n,o){return this.modelGroup.remove(n.sprite),n.dispose(),n.stylespec=o,n.setContext(),this.modelGroup.add(n.sprite),this.show(),n}setLabelText(n,o){return this.modelGroup.remove(n.sprite),n.dispose(),n.text=o,n.setContext(),this.modelGroup.add(n.sprite),this.show(),n}addShape(n){var o=new Le(n=n||{});return o.shapePosition=this.shapes.length,this.shapes.push(o),o}removeShape(n){if(!n)return this;for(n.removegl(this.modelGroup),delete this.shapes[n.shapePosition];this.shapes.length>0&&this.shapes[this.shapes.length-1]===void 0;)this.shapes.pop();return this}removeAllShapes(){for(var n=0;n<this.shapes.length;n++){var o=this.shapes[n];o&&o.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(n){if(n.hasOwnProperty("x")&&n.hasOwnProperty("y")&&n.hasOwnProperty("z"))return n;var o=this.getAtomsFromSel(n);if(o.length==0)return{x:0,y:0,z:0};var c=(0,v.getExtent)(o);return{x:c[0][0]+(c[1][0]-c[0][0])/2,y:c[0][1]+(c[1][1]-c[0][1])/2,z:c[0][2]+(c[1][2]-c[0][2])/2}}addSphere(n){(n=n||{}).center=this.getSelectionCenter(n.center);var o=new Le(n);return o.shapePosition=this.shapes.length,o.addSphere(n),this.shapes.push(o),o.finalize(),o}addBox(n={}){n.corner!=null&&(n.corner=this.getSelectionCenter(n.corner)),n.center!=null&&(n.center=this.getSelectionCenter(n.center));var o=new Le(n);return o.shapePosition=this.shapes.length,o.addBox(n),this.shapes.push(o),o.finalize(),o}addArrow(n={}){n.start=this.getSelectionCenter(n.start),n.end=this.getSelectionCenter(n.end);var o=new Le(n);return o.shapePosition=this.shapes.length,o.addArrow(n),this.shapes.push(o),o.finalize(),o}addCylinder(n={}){n.start=this.getSelectionCenter(n.start),n.end=this.getSelectionCenter(n.end);var o=new Le(n);return o.shapePosition=this.shapes.length,n.dashed?o.addDashedCylinder(n):o.addCylinder(n),this.shapes.push(o),o.finalize(),o}addCurve(n={}){var o=new Le(n);return o.shapePosition=this.shapes.length,o.addCurve(n),this.shapes.push(o),o.finalize(),o}addLine(n={}){n.start=this.getSelectionCenter(n.start),n.end=this.getSelectionCenter(n.end),n.wireframe=!0;var o=new Le(n);return o.shapePosition=this.shapes.length,n.dashed?o=this.addLineDashed(n,o):o.addLine(n),this.shapes.push(o),o.finalize(),o}addUnitCell(n,o){n=this.getModel(n),(o=o||{alabel:"a",blabel:"b",clabel:"c"}).box=o.box||{},o.astyle=o.astyle||{color:"red",radius:.1,midpos:-1},o.bstyle=o.bstyle||{color:"green",radius:.1,midpos:-1},o.cstyle=o.cstyle||{color:"blue",radius:.1,midpos:-1},o.alabelstyle=o.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1},o.blabelstyle=o.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1},o.clabelstyle=o.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1},n.unitCellObjects&&this.removeUnitCell(n),n.unitCellObjects={shapes:[],labels:[]};var c=n.getCrystData(),f=null;if(c){if(c.matrix)f=c.matrix;else{var T,x,M,k=c.a,A=c.b,P=c.c,L=c.alpha,W=c.beta,U=c.gamma;L=L*Math.PI/180,W=W*Math.PI/180,U=U*Math.PI/180,T=Math.cos(W),x=(Math.cos(L)-Math.cos(W)*Math.cos(U))/Math.sin(U),M=Math.sqrt(Math.max(0,1-T*T-x*x)),f=new d.Matrix3(k,A*Math.cos(U),P*T,0,A*Math.sin(U),P*x,0,0,P*M)}var V=[new d.Vector3(0,0,0),new d.Vector3(1,0,0),new d.Vector3(0,1,0),new d.Vector3(0,0,1),new d.Vector3(1,1,0),new d.Vector3(0,1,1),new d.Vector3(1,0,1),new d.Vector3(1,1,1)];if(c.matrix4)for(let G=0;G<V.length;G++)c.size&&V[G].multiplyVectors(V[G],c.size),V[G]=V[G].applyMatrix4(c.matrix4);else for(let G=0;G<V.length;G++)V[G]=V[G].applyMatrix3(f);if(o.box&&!o.box.hidden){o.box.wireframe=!0;var H=new Le(o.box);H.shapePosition=this.shapes.length,H.addLine({start:V[0],end:V[1]}),H.addLine({start:V[0],end:V[2]}),H.addLine({start:V[1],end:V[4]}),H.addLine({start:V[2],end:V[4]}),H.addLine({start:V[0],end:V[3]}),H.addLine({start:V[3],end:V[5]}),H.addLine({start:V[2],end:V[5]}),H.addLine({start:V[1],end:V[6]}),H.addLine({start:V[4],end:V[7]}),H.addLine({start:V[6],end:V[7]}),H.addLine({start:V[3],end:V[6]}),H.addLine({start:V[5],end:V[7]}),this.shapes.push(H),n.unitCellObjects.shapes.push(H),H.finalize()}if(!o.astyle.hidden){o.astyle.start=V[0],o.astyle.end=V[1];let G=this.addArrow(o.astyle);n.unitCellObjects.shapes.push(G)}if(!o.bstyle.hidden){o.bstyle.start=V[0],o.bstyle.end=V[2];let G=this.addArrow(o.bstyle);n.unitCellObjects.shapes.push(G)}if(!o.cstyle.hidden){o.cstyle.start=V[0],o.cstyle.end=V[3];let G=this.addArrow(o.cstyle);n.unitCellObjects.shapes.push(G)}if(o.alabel){o.alabelstyle.position=V[1];let G=this.addLabel(o.alabel,o.alabelstyle);n.unitCellObjects.labels.push(G)}if(o.blabel){o.blabelstyle.position=V[2];let G=this.addLabel(o.blabel,o.blabelstyle);n.unitCellObjects.labels.push(G)}if(o.clabel){o.clabelstyle.position=V[3];let G=this.addLabel(o.clabel,o.clabelstyle);n.unitCellObjects.labels.push(G)}}}removeUnitCell(n){if((n=this.getModel(n)).unitCellObjects){let o=this;n.unitCellObjects.shapes.forEach(function(c){o.removeShape(c)}),n.unitCellObjects.labels.forEach(function(c){o.removeLabel(c)})}delete n.unitCellObjects}replicateUnitCell(n=3,o=n,c=o,f,T,x){let M=(f=this.getModel(f)).getCrystData();if(M){const k=f.selectedAtoms({}),A=M.matrix;let P=function(W){return W%2==0?-W/2:Math.ceil(W/2)};n<=1&&o<=1&&c<=1&&(x=!0,n=o=c=3);let L=function(W,U,V){return!1};if(x){const W=new d.Matrix3().getInverse3(A);L=function(U,V,H){let G=new d.Vector3(U,V,H).applyMatrix3(W);return!(G.x>-1e-4&&G.x<1.0001&&G.y>-1e-4&&G.y<1.0001&&G.z>-1e-4&&G.z<1.0001)}}for(let W=0;W<n;W++)for(let U=0;U<o;U++)for(let V=0;V<c;V++){if(W==0&&U==0&&V==0)continue;let H=new d.Vector3(P(W),P(U),P(V));H.applyMatrix3(A);let G=[];for(let Z=0;Z<k.length;Z++){let te=k[Z].x+H.x,re=k[Z].y+H.y,de=k[Z].z+H.z;if(L(te,re,de))continue;let le={};for(let ye in k[Z])le[ye]=k[Z][ye];le.x=te,le.y=re,le.z=de,G.push(le)}f.addAtoms(G)}T&&f.assignBonds()}}addLineDashed(n,o){var c,f;n.dashLength=n.dashLength||.5,n.gapLength=n.gapLength||.5,c=n.start?new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0):new d.Vector3(0,0,0),f=n.end?new d.Vector3(n.end.x,n.end.y||0,n.end.z||0):new d.Vector3(0,0,0);var T,x,M,k=new d.Vector3,A=new d.Vector3,P=new d.Vector3,L=c.clone(),W=0;for(k.subVectors(f,c),T=k.length(),k.normalize(),A=k.clone(),P=k.clone(),A.multiplyScalar(n.dashLength),P.multiplyScalar(n.gapLength),x=A.length(),M=P.length();W<T;){if(W+x>T){n.start=c,n.end=f,o.addLine(n);break}L.addVectors(c,A),n.start=c,n.end=L,o.addLine(n),c=L.clone(),W+=x,L.addVectors(c,P),c=L.clone(),W+=M}return o.finalize(),o}addCustom(n){var o=new Le(n=n||{});return o.shapePosition=this.shapes.length,o.addCustom(n),this.shapes.push(o),o.finalize(),o}addVolumetricData(n,o,c={}){var f=new Ve.VolumeData(n,o);return c.hasOwnProperty("transferfn")?this.addVolumetricRender(f,c):this.addIsosurface(f,c)}addIsosurface(n,o={},c){var f=new Le(o);return f.shapePosition=this.shapes.length,f.addIsosurface(n,o,c,this),this.shapes.push(f),f}addVolumetricRender(n,o){var c=new Pt(n,o=o||{},this);return c.shapePosition=this.shapes.length,this.shapes.push(c),c}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(n){if(n){this.scene.fog=new l.Fog(this.bgColor,100,200),this.config.disableFog=!1;const o=n;o.fogStart==null?this.fogStart=.4:this.fogStart=o.fogStart,o.fogEnd==null?this.fogEnd=1:this.fogEnd=o.fogEnd}else this.config.disableFog=!0,this.show()}setFrame(n){this.viewer_frame=n;let o=this;return new Promise(function(c){var f=o.models.map(function(T){return T.setFrame(n)});Promise.all(f).then(function(){c()})})}getFrame(){return this.viewer_frame}getNumFrames(){var n=0;for(let o=0;o<this.models.length;o++)this.models[o].getNumFrames()>n&&(n=this.models[o].getNumFrames());for(let o=0;o<this.shapes.length;o++)this.shapes[o].frame&&this.shapes[o].frame>=n&&(n=this.shapes[o].frame+1);for(let o=0;o<this.labels.length;o++)this.labels[o].frame&&this.labels[o].frame>=n&&(n=this.labels[o].frame+1);return n}getNextModelId(){return this.models.length}animate(n){this.incAnim();var o=100,c="forward",f=1/0;(n=n||{}).interval&&(o=n.interval),n.loop&&(c=n.loop),n.reps&&(f=n.reps);var T=this.getNumFrames(),x=this,M=0;n.startFrame&&(M=n.startFrame%T);var k=1;n.step&&(f/=k=n.step);var A,P,L=0,W=T*f,U=new Date,V=function(H){U=new Date,H=="forward"?x.setFrame(M).then(function(){M=(M+k)%T,A()}):H=="backward"?x.setFrame(T-1-M).then(function(){M=(M+k)%T,A()}):x.setFrame(M).then(function(){k*=(M+=k)%(T-1)==0?-1:1,A()})};return A=function(){if(x.render(),x.getCanvas().isConnected)if(++L>=W||!x.isAnimated())P.cancel(),x.animationTimers.delete(P),x.decAnim();else{var H=o-(new Date().getTime()-U.getTime());H=H>0?H:0,P.cancel(),x.animationTimers.delete(P),P=new v.PausableTimer(V,H,c),x.animationTimers.add(P)}else x.stopAnimate()},P=new v.PausableTimer(V,0,c),this.animationTimers.add(P),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(n){n.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(n){n.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(n){n.resume()}),this}isAnimated(){return this.animated>0}getModelOpt(n){return n&&!n.defaultcolors?(n.defaultcolors=this.defaultcolors,n.cartoonQuality=n.cartoonQuality||this.config.cartoonQuality):n===void 0&&(n={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality}),n}addModel(n,o="",c){c=this.getModelOpt(c);var f=new ur(this.models.length,c,this);return f.addMolData(n,o,c),this.models.push(f),f}addModels(n,o,c){(c=this.getModelOpt(c)).multimodel=!0,c.frames=!0;for(var f=ur.parseMolData(n,o,c),T=0;T<f.length;T++){var x=new ur(this.models.length,c,this);x.setAtomDefaults(f[T]),x.addFrame(f[T]),x.setFrame(0),f.modelData&&x.setModelData(f.modelData[T]),x.setDontDuplicateAtoms(!c.duplicateAssemblyAtoms),this.models.push(x)}return this.models}addModelsAsFrames(n,o,c){(c=this.getModelOpt(c)).multimodel=!0,c.frames=!0;var f=new ur(this.models.length,c,this);return f.addMolData(n,o,c),this.models.push(f),f}addAsOneMolecule(n,o,c){(c=this.getModelOpt(c)).multimodel=!0,c.onemol=!0;var f=new ur(this.models.length,c,this);return f.addMolData(n,o,c),this.models.push(f),f}removeModel(n){if(n=this.getModel(n)){for(n.removegl(this.modelGroup),delete this.models[n.getID()];this.models.length>0&&this.models[this.models.length-1]===void 0;)this.models.pop();return this}}removeAllModels(){for(var n=0;n<this.models.length;n++){var o=this.models[n];o&&o.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(n,o){var c={};return c.m=o===void 0?this.models.map(function(f){return f.toCDObject(n)}):[this.models[o].toCDObject()],JSON.stringify(c)}exportVRML(){var n=this.modelGroup;this.applyToModels("removegl",this.modelGroup),this.modelGroup=new l.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var o=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels("removegl",this.modelGroup),this.modelGroup=n,o}createModelFrom(n,o=!1){for(var c=new ur(this.models.length,this.defaultcolors,this),f=0;f<this.models.length;f++)if(this.models[f]){var T=this.models[f].selectedAtoms(n);c.addAtoms(T),o&&this.models[f].removeAtoms(T)}return this.models.push(c),c}applyToModels(n,o,c,f,T,x,M){for(var k=this.getModelList(o),A=0;A<k.length;A++)k[A][n](o,c,f,T,x,M)}setStyle(n,o){return o===void 0&&(o=n,n={}),this.applyToModels("setStyle",n,o,!1),this}addStyle(n,o){return o===void 0&&(o=n,n={}),this.applyToModels("setStyle",n,o,!0),this}setClickable(n,o,c){return this.applyToModels("setClickable",n,o,c),this}setHoverable(n,o,c,f){return this.applyToModels("setHoverable",n,o,c,f),this}enableContextMenu(n,o){return this.applyToModels("enableContextMenu",n,o),this}vibrate(n,o,c,f){return this.applyToModels("vibrate",n,o,c,f),this}setColorByProperty(n,o,c,f){return this.applyToModels("setColorByProperty",n,o,c,f),this}setColorByElement(n,o){return this.applyToModels("setColorByElement",n,o),this}static getAtomsWithin(n,o){var c=[];for(let T=0;T<n.length;T++){var f=n[T];f!==void 0&&(f.x<o[0][0]||f.x>o[1][0]||f.y<o[0][1]||f.y>o[1][1]||f.z<o[0][2]||f.z>o[1][2]||c.push(f))}return c}static volume(n){return(n[1][0]-n[0][0])*(n[1][1]-n[0][1])*(n[1][2]-n[0][2])}carveUpExtent(n,o,c){let f=[],T={};for(let P=0,L=o.length;P<L;P++)T[o[P].index]=P;let x=function(P){let L=[];for(let W=0,U=P.length;W<U;W++)P[W].index in T&&L.push(T[P[W].index]);return L},M=function(P){let L=[];return L[0]=[P[0][0],P[0][1],P[0][2]],L[1]=[P[1][0],P[1][1],P[1][2]],L},k=function(P){if(Zt.volume(P)<Zt.maxVolume)return[P];var L,W=P[1][0]-P[0][0],U=P[1][1]-P[0][1],V=P[1][2]-P[0][2];L=W>U&&W>V?0:U>W&&U>V?1:2;var H=M(P),G=M(P),Z=(P[1][L]-P[0][L])/2+P[0][L];H[1][L]=Z,G[0][L]=Z;var te=k(H),re=k(G);return te.concat(re)},A=k(n);for(let P=0,L=A.length;P<L;P++){let W=M(A[P]);W[0][0]-=6,W[0][1]-=6,W[0][2]-=6,W[1][0]+=6,W[1][1]+=6,W[1][2]+=6;let U=Zt.getAtomsWithin(o,W),V=Zt.getAtomsWithin(c,A[P]);f.push({extent:A[P],atoms:x(U),toshow:x(V)})}return f}static generateSurfaceMesh(n,o,c){var f=new l.Geometry(!0),T=f.updateGeoGroup(0),x=[];for(let Re=0,we=n.length;Re<we;Re++){var M=n[Re];M&&(M.surfaceColor!==void 0?x[Re]=M.surfaceColor:M.color&&(x[Re]=y.CC.color(M.color)))}var k=T.vertexArray,A=o.vertices;for(let Re=0,we=A.length;Re<we;Re++){let Ue=3*T.vertices;k[Ue]=A[Re].x,k[Ue+1]=A[Re].y,k[Ue+2]=A[Re].z,T.vertices++}var P=T.colorArray;let L=T.atomArray;if(c.voldata&&c.volscheme){var W=c.volscheme,U=c.voldata,V=W.range()||[-1,1];for(let Re=0,we=A.length;Re<we;Re++){let Ue=A[Re].atomid,Je=U.getVal(A[Re].x,A[Re].y,A[Re].z),tt=y.CC.color(W.valueToHex(Je,V)),Ze=3*Re;P[Ze]=tt.r,P[Ze+1]=tt.g,P[Ze+2]=tt.b,L[Re]=n[Ue]}}else if(x.length>0)for(let Re=0,we=A.length;Re<we;Re++){let Ue=A[Re].atomid,Je=3*Re;P[Je]=x[Ue].r,P[Je+1]=x[Ue].g,P[Je+2]=x[Ue].b,L[Re]=n[Ue]}var H=o.faces;T.faceidx=H.length,f.initTypedArrays();var G,Z,te,re,de=T.vertexArray,le=T.normalArray;for(let Re=0,we=H.length;Re<we;Re+=3){var ye=3*H[Re],ke=3*H[Re+1],Te=3*H[Re+2];G=new d.Vector3(de[ye],de[ye+1],de[ye+2]),Z=new d.Vector3(de[ke],de[ke+1],de[ke+2]),(te=new d.Vector3(de[Te],de[Te+1],de[Te+2])).subVectors(te,Z),G.subVectors(G,Z),te.cross(G),(re=te).normalize(),le[ye]+=re.x,le[ke]+=re.x,le[Te]+=re.x,le[ye+1]+=re.y,le[ke+1]+=re.y,le[Te+1]+=re.y,le[ye+2]+=re.z,le[ke+2]+=re.z,le[Te+2]+=re.z}return T.faceArray=new Uint16Array(H),new l.Mesh(f,c)}static generateMeshSyncHelper(n,o,c,f,T,x){var M=new xe;return M.initparm(o,n!==1,x),M.fillvoxels(T,c),M.buildboundary(),n!=Gr.SES&&n!=Gr.MS||(M.fastdistancemap(),M.boundingatom(!1),M.fillvoxelswaals(T,c)),M.marchingcube(n),M.getFacesAndVertices(f)}static getMatWithStyle(n){let o=null;for(var c in o=n.onesided?new l.MeshLambertMaterial:new l.MeshDoubleLambertMaterial,o.vertexColors=l.Coloring.VertexColors,n)c==="color"||c==="map"||n.hasOwnProperty(c)&&(o[c]=n[c]);return n.opacity!==void 0&&(n.opacity===1?o.transparent=!1:o.transparent=!0),n.wireframe!==void 0&&(o.wireframe=n.wireframe),o}addMesh(n){let o={geo:n.geometry,mat:n.material,done:!0,finished:!1};var c=this.nextSurfID();return this.surfaces[c]=new gr([o]),c}static shallowCopy(n){var o=[];let c=n.length;for(let f=0;f<c;f++)o[f]=(0,v.extend)({},n[f]);return o}addSurface(n,o={},c={},f,T,x){let M=this.nextSurfID(),k=null,A=this,P=Gr.VDW;typeof n=="string"?Zt.surfaceTypeMap[n.toUpperCase()]!==void 0?P=Zt.surfaceTypeMap[n]:console.log("Surface type : "+n+" is not recognized"):typeof n=="number"&&(P=n);var L=null,W=null,U=Zt.shallowCopy(this.getAtomsFromSel(c));L=f?Zt.shallowCopy(this.getAtomsFromSel(f)):U,(0,v.adjustVolumeStyle)(o);var V,H=!1;for(V=0;V<this.models.length;V++)if(this.models[V]){var G=this.models[V].getSymmetries();if(G.length>1||G.length==1&&!G[0].isIdentity()){H=!0;break}}var Z=function(ke,Te,Re){var we;W=T?Zt.shallowCopy(A.getAtomsFromSel(T)):Re;var Ue=(0,v.getExtent)(Re,!0);if(o.map&&o.map.prop){var Je=o.map.prop;let st=(0,E.getGradient)(o.map.scheme||o.map.gradient||new E.Gradient.RWB),wt=st.range();wt||(wt=(0,v.getPropertyRange)(Re,Je)),o.colorscheme={prop:Je,gradient:st}}for(let st=0,wt=Te.length;st<wt;st++)(we=Te[st]).surfaceColor=(0,v.getColorFromStyle)(we,o);var tt=Zt.volume(Ue),Ze=A.carveUpExtent(Ue,Te,Re);if(W&&W.length&&W.length>0){var ut=(0,v.getExtent)(W,!0);Ze.sort(function(st,wt){var Et=function(it,kt){var Ht=it.extent,Mt=Ht[1][0]-Ht[0][0],ct=Ht[1][1]-Ht[0][1],Jt=Ht[1][2]-Ht[0][2],Nt=Mt-kt[2][0];Nt*=Nt;var qt=ct-kt[2][1];qt*=qt;var Vt=Jt-kt[2][2];return Nt+qt+(Vt*=Vt)};return Et(st,ut)-Et(wt,ut)})}var ft=[];for(let st=0,wt=Te.length;st<wt;st++)we=Te[st],ft[st]={x:we.x,y:we.y,z:we.z,serial:st,elem:we.elem};var Qe=!!Kr;if(typeof $3Dmol<"u"&&$3Dmol.SurfaceWorker!==void 0||(console.log("$3Dmol.SurfaceWorker is not defined, using synchronous surface generation."),Qe=!0),Qe){var pt=function(st){return new Promise(function(wt){for(var Et=Zt.generateMeshSyncHelper(P,Ze[st].extent,Ze[st].atoms,Ze[st].toshow,ft,tt),it=yt({vertexArr:Et.vertices,faceArr:Et.faces}),kt=0,Ht=it.length;kt<Ht;kt++){Et={vertices:it[kt].vertexArr,faces:it[kt].faceArr};var Mt=Zt.generateSurfaceMesh(Te,Et,k);(0,v.mergeGeos)(ke.geo,Mt)}A.render(),wt()})},Be=[];for(let st=0;st<Ze.length;st++)Be.push(pt(st));return Promise.all(Be).then(function(){return ke.done=!0,A.render(),Promise.resolve(M)})}var et=[];P<0&&(P=0);for(let st=0,wt=Zt.numWorkers;st<wt;st++){var St=new Worker($3Dmol.SurfaceWorker);et.push(St),St.postMessage({type:-1,atoms:ft,volume:tt})}return new Promise(function(st,wt){var Et=0,it=function(){et&&et.length&&et.forEach(function(ct){ct&&ct.terminate&&ct.terminate()})},kt=function(ct){for(var Jt=yt({vertexArr:ct.data.vertices,faceArr:ct.data.faces}),Nt=0,qt=Jt.length;Nt<qt;Nt++){var Vt={vertices:Jt[Nt].vertexArr,faces:Jt[Nt].faceArr},Xt=Zt.generateSurfaceMesh(Te,Vt,k);(0,v.mergeGeos)(ke.geo,Xt)}A.render(),++Et==Ze.length&&(ke.done=!0,it(),st(M))},Ht=function(ct){it(),console.log(ct.message+" ("+ct.filename+":"+ct.lineno+")"),wt(ct)};for(let ct=0;ct<Ze.length;ct++){var Mt=et[ct%et.length];Mt.onmessage=kt,Mt.onerror=Ht,Mt.postMessage({type:P,expandedExtent:Ze[ct].extent,extendedAtoms:Ze[ct].atoms,atomsToShow:Ze[ct].toshow})}})};o=o||{},k=Zt.getMatWithStyle(o);let te=new gr([]);te.style=o,te.atomsel=c,te.allsel=f,te.focus=T;var re=null;if(H){var de={},le={};for(V=0;V<this.models.length;V++)de[V]=[],le[V]=[];for(V=0;V<L.length;V++)de[L[V].model].push(L[V]);for(V=0;V<U.length;V++)le[U[V].model].push(U[V]);var ye=[];for(V=0;V<this.models.length;V++)le[V].length>0&&(te.push({geo:new l.Geometry(!0),mat:k,done:!1,finished:!1,symmetries:this.models[V].getSymmetries()}),ye.push(Z(te[te.length-1],de[V],le[V])));re=Promise.all(ye)}else te.push({geo:new l.Geometry(!0),mat:k,done:!1,finished:!1,symmetries:[new d.Matrix4]}),re=Z(te[te.length-1],L,U);return this.surfaces[M]=te,re.surfid=M,x&&typeof x=="function"?(re.then(function(ke){x(ke)}),M):re}setSurfaceMaterialStyle(n,o){if((0,v.adjustVolumeStyle)(o),this.surfaces[n]){var c=this.surfaces[n];for(let T=0;T<c.length;T++){var f=c[T].mat=Zt.getMatWithStyle(o);if(c[T].mat.side=l.FrontSide,o.wireframe&&c[T].geo.setUpWireframe(),o.color){c[T].mat.color=y.CC.color(o.color),c[T].geo.colorsNeedUpdate=!0;const x=y.CC.color(o.color);c[T].geo.setColor(x)}else if(f.voldata&&f.volscheme){const x=f.volscheme,M=f.voldata,k=y.CC,A=x.range()||[-1,1];c[T].geo.setColors(function(P,L,W){let U=M.getVal(P,L,W);return k.color(x.valueToHex(U,A))})}else{c[T].geo.colorsNeedUpdate=!0;for(let x of c[T].geo.geometryGroups)for(let M=0;M<x.vertices;M++){let k=(0,v.getColorFromStyle)(x.atomArray[M],o),A=3*M;x.colorArray[A]=k.r,x.colorArray[A+1]=k.g,x.colorArray[A+2]=k.b}}c[T].finished=!1}}return this}getSurface(n){return this.surfaces[n]}removeSurface(n){for(var o=this.surfaces[n],c=0;c<o.length;c++)o[c]&&o[c].lastGL&&(o[c].geo!==void 0&&o[c].geo.dispose(),o[c].mat!==void 0&&o[c].mat.dispose(),this.modelGroup.remove(o[c].lastGL));return delete this.surfaces[n],this.show(),this}removeAllSurfaces(){for(var n in this.surfaces)if(this.surfaces.hasOwnProperty(n)){for(var o=this.surfaces[n],c=0;c<o.length;c++)o[c]&&o[c].lastGL&&(o[c].geo!==void 0&&o[c].geo.dispose(),o[c].mat!==void 0&&o[c].mat.dispose(),this.modelGroup.remove(o[c].lastGL));delete this.surfaces[n]}return this.show(),this}jmolMoveTo(){var n=this.modelGroup.position,o="center { "+-n.x+" "+-n.y+" "+-n.z+" }; ",c=this.rotationGroup.quaternion;return o+="moveto .5 quaternion { "+c.x+" "+c.y+" "+c.z+" "+c.w+" };"}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(n,o){o=o||{};var c=this.getAtomsFromSel(o);if(typeof n=="function")for(let x=0,M=c.length;x<M;x++)n(c[x]);else for(let x=0,M=c.length;x<M;x++){var f=c[x];for(let k=0,A=n.length;k<A;k++){let P=n[k];if(P.props)for(var T in P.props)P.props.hasOwnProperty(T)&&this.atomIsSelected(f,P)&&(f.properties||(f.properties={}),f.properties[T]=P.props[T])}}return this}linkViewer(n){return this.linkedViewers.push(n),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(n){this.rotationGroup.position.z=this.CAMERA_Z-n}setAutoEyeSeparation(n,o){var c=this.getPerceivedDistance();return o||(o=5),n||this.camera.position.x>0?this.camera.position.x=c*Math.tan(Math.PI/180*o):this.camera.position.x=-c*Math.tan(Math.PI/180*o),this.camera.lookAt(new d.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(n){this.config.cartoonQuality=n}}function Cr(ae,n){if(ae=(0,v.getElement)(ae)){n=n||{};try{return new Zt(ae,n)}catch(o){throw"error creating viewer: "+o}}}function Ar(ae,n={},o={}){if(ae=(0,v.getElement)(ae)){var c=[],f=document.createElement("canvas");o.rows=n.rows,o.cols=n.cols,o.control_all=n.control_all!=null&&n.control_all,ae.appendChild(f);try{for(var T=0;T<n.rows;T++){for(var x=[],M=0;M<n.cols;M++){o.row=T,o.col=M,o.canvas=f,o.viewers=c,o.control_all=n.control_all;var k=Cr(ae,(0,v.extend)({},o));x.push(k)}c.unshift(x)}}catch(A){throw"error creating viewer grid: "+A}return c}}function Ur(ae){var n=this;if(ae=(0,v.getElement)(ae)){var o=Ar(ae,{rows:1,cols:2,control_all:!0});this.glviewer1=o[0][0],this.glviewer2=o[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var c=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function(T){return typeof n.glviewer1[T]=="function"}),f=0;f<c.length;f++)this[c[f]]=(function(T){return function(){return[this.glviewer1[T].apply(this.glviewer1,arguments),this.glviewer2[T].apply(this.glviewer2,arguments)]}})(c[f]);this.setCoordinates=function(T,x,M){for(var k=0;k<T.length;k++)T[k].setCoordinates(x,M)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(T){this.glviewer1.render(),this.glviewer2.render(),T&&T(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}Zt.numWorkers=4,Zt.maxVolume=64e3,Zt.surfaceTypeMap={VDW:Gr.VDW,MS:Gr.MS,SAS:Gr.SAS,SES:Gr.SES};var _r=!1,Or=!1,wr={};function Ri(ae,n){var o,c,f;if(document.querySelector(".viewer_3Dmoljs")!=null&&(_r=!0),_r){Or=!0,ae=ae??null;var T=0;document.querySelectorAll(".viewer_3Dmoljs").forEach(x=>{var M=[],k=[],A="";x.style.position=="static"&&(x.style.position="relative");var P=null;if(f=null,x.dataset.pdb)M.push("https://files.rcsb.org/view/"+x.dataset.pdb+".pdb"),k.push("pdb");else if(x.dataset.cid)k.push("sdf"),M.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+x.dataset.cid+"/SDF?record_type=3d");else if(x.dataset.href||x.dataset.url){if(A=x.dataset.href?x.dataset.href:x.dataset.url,M.push(A),(f=A.substring(A.lastIndexOf(".")+1))=="gz"){let st=A.substring(0,A.lastIndexOf(".")).lastIndexOf(".");f=A.substring(st+1)}k.push(f);var L=A.substring(A.lastIndexOf("/")+1,A.lastIndexOf("."));L=="/"&&(L=A.substring(A.lastIndexOf("/")+1)),x.dataset[k[k.length-1]]=L}let W=x.dataset;for(o in W)o.substring(0,3)==="pdb"&&o!=="pdb"?(M.push("https://files.rcsb.org/view/"+W[o]+".pdb"),k.push("pdb")):o.substring(0,4)==="href"&&o!=="href"?(A=W[o],M.push(A),k.push(A.substring(A.lastIndexOf(".")+1))):o.substring(0,3)==="cid"&&o!=="cid"&&(M.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+W[o]+"/SDF?record_type=3d"),k.push("sdf"));var U={};x.dataset.options&&(U=(0,v.specStringToObject)(x.dataset.options));var V=y.CC.color(x.dataset.backgroundcolor),H=x.dataset.backgroundalpha;H=H==null?1:parseFloat(H);var G={line:{}};x.dataset.style&&(G=(0,v.specStringToObject)(x.dataset.style));var Z={};x.dataset.select&&(Z=(0,v.specStringToObject)(x.dataset.select));var te=[],re=[],de=[],le={},ye=null,ke=x.dataset,Te=/style(.+)/,Re=/surface(.*)/,we=/labelres(.*)/,Ue=[];for(c in ke)Object.prototype.hasOwnProperty.call(ke,c)&&Ue.push(c);for(Ue.sort(),o=0;o<Ue.length;o++){c=Ue[o];var Je,tt,Ze,ut=Te.exec(c);ut&&(Je="select"+ut[1],tt=(0,v.specStringToObject)(ke[Je]),Ze=(0,v.specStringToObject)(ke[c]),te.push([tt,Ze])),(ut=Re.exec(c))&&(Je="select"+ut[1],tt=(0,v.specStringToObject)(ke[Je]),Ze=(0,v.specStringToObject)(ke[c]),re.push([tt,Ze])),(ut=we.exec(c))&&(Je="select"+ut[1],tt=(0,v.specStringToObject)(ke[Je]),Ze=(0,v.specStringToObject)(ke[c]),de.push([tt,Ze])),c=="zoomto"&&(le=(0,v.specStringToObject)(ke[c])),c=="spin"&&(ye=(0,v.specStringToObject)(ke[c]))}var ft=function(st){for(st.setStyle(Z,G),P&&P.createSelectionAndStyle(Z,G),o=0;o<te.length;o++){let wt=te[o][0]||{},Et=te[o][1]||{line:{}};st.setStyle(wt,Et),P&&P.createSelectionAndStyle(Z,G)}for(o=0;o<re.length;o++){let wt=re[o][0]||{},Et=re[o][1]||{};P?st.addSurface(Gr.VDW,Et,wt,wt).then(it=>{P.loadSurface("VDW",wt,Et,it)}):st.addSurface(Gr.VDW,Et,wt,wt)}for(o=0;o<de.length;o++){let wt=de[o][0]||{},Et=de[o][1]||{};st.addResLabels(wt,Et)}st.render(),st.zoomTo(le),ye&&st.spin(ye.axis,ye.speed)};let Qe=ae;try{var pt=(0,v.specStringToObject)(x.dataset.config)||{};pt.backgroundColor===void 0&&(pt.backgroundColor=V),pt.backgroundAlpha===void 0&&(pt.backgroundAlpha=H),Qe==null?Qe=wr[x.id||T++]=Cr(x,pt):(Qe.setBackgroundColor(V,H),Qe.setConfig(pt),P&&P.initiateUI()),x.dataset.ui&&$3Dmol.StateManager&&(P=new $3Dmol.StateManager(Qe))}catch(st){console.log(st),x.textContent="WebGL appears to be disabled."}if(M.length!=0){let st=0,wt=((Et,it)=>function(kt){A=M[st];var Ht=Et.dataset.type||Et.dataset.datatype||k[st];if(it.addModel(kt,Ht,U),P){var Mt=Et.dataset[k[st]];P.setModelTitle(Mt)}st+=1,st<M.length?(0,v.get)(M[st]).then(wt):(ft(it),Et.dataset.callback&&(0,v.makeFunction)(Et.dataset.callback)(it),Or=!1,n&&n(it))})(x,Qe);f&&f.endsWith("gz")?(0,v.getbin)(M[0]).then(wt):(0,v.get)(M[0]).then(wt)}else{if(x.dataset.element){var Be="#"+x.dataset.element,et=document.querySelector(Be),St=et?et.textContent:"";f=x.dataset.type||x.dataset.datatype,Qe.addModel(St,f,U)}ft(Qe),x.dataset.callback&&(0,v.makeFunction)(x.dataset.callback)(Qe),Or=!1,n&&n(Qe)}})}}document.onreadystatechange=()=>{document.readyState==="complete"&&Ri()};const Qt={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function ri(ae,n){if((!n||ae.partialCharge===void 0)&&ae.resn&&ae.atom){var o=ae.resn+":"+ae.atom;ae.properties.partialCharge=Qt[o]}}window&&(window.$3Dmol=i)},40:(t,i,s)=>{s.r(i),s.d(i,{bondLength:()=>h,bondTable:()=>u,setBondLength:()=>_});let u={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function h(l){return u[l]||1.6}function _(l,g){g<0&&(g=0),u[l]=g}},71:(t,i,s)=>{var u=s(107),h=s(981),_=s(972),l=s(834),g=s(746),d=Object.prototype.toString;function y(v){if(!(this instanceof y))return new y(v);this.options=h.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},v||{});var R=this.options;R.raw&&R.windowBits>0?R.windowBits=-R.windowBits:R.gzip&&R.windowBits>0&&R.windowBits<16&&(R.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var z=u.deflateInit2(this.strm,R.level,R.method,R.windowBits,R.memLevel,R.strategy);if(z!==0)throw new Error(l[z]);if(R.header&&u.deflateSetHeader(this.strm,R.header),R.dictionary){var C;if(C=typeof R.dictionary=="string"?_.string2buf(R.dictionary):d.call(R.dictionary)==="[object ArrayBuffer]"?new Uint8Array(R.dictionary):R.dictionary,(z=u.deflateSetDictionary(this.strm,C))!==0)throw new Error(l[z]);this._dict_set=!0}}function E(v,R){var z=new y(R);if(z.push(v,!0),z.err)throw z.msg||l[z.err];return z.result}y.prototype.push=function(v,R){var z,C,I=this.strm,K=this.options.chunkSize;if(this.ended)return!1;C=R===~~R?R:R===!0?4:0,typeof v=="string"?I.input=_.string2buf(v):d.call(v)==="[object ArrayBuffer]"?I.input=new Uint8Array(v):I.input=v,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new h.Buf8(K),I.next_out=0,I.avail_out=K),(z=u.deflate(I,C))!==1&&z!==0)return this.onEnd(z),this.ended=!0,!1;I.avail_out!==0&&(I.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(_.buf2binstring(h.shrinkBuf(I.output,I.next_out))):this.onData(h.shrinkBuf(I.output,I.next_out)))}while((I.avail_in>0||I.avail_out===0)&&z!==1);return C===4?(z=u.deflateEnd(this.strm),this.onEnd(z),this.ended=!0,z===0):C!==2||(this.onEnd(0),I.avail_out=0,!0)},y.prototype.onData=function(v){this.chunks.push(v)},y.prototype.onEnd=function(v){v===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},i.Deflate=y,i.deflate=E,i.deflateRaw=function(v,R){return(R=R||{}).raw=!0,E(v,R)},i.gzip=function(v,R){return(R=R||{}).gzip=!0,E(v,R)}},75:(t,i,s)=>{function u(m){let Y=m.length;for(;--Y>=0;)m[Y]=0}s.r(i),s.d(i,{Deflate:()=>ci,Inflate:()=>xi,constants:()=>qr,default:()=>ei,deflate:()=>ni,deflateRaw:()=>hi,gzip:()=>Ii,inflate:()=>zi,inflateRaw:()=>Hr,ungzip:()=>Xr});const h=256,_=286,l=30,g=15,d=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),y=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),E=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),v=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),R=new Array(576);u(R);const z=new Array(60);u(z);const C=new Array(512);u(C);const I=new Array(256);u(I);const K=new Array(29);u(K);const J=new Array(l);function X(m,Y,w,be,_e){this.static_tree=m,this.extra_bits=Y,this.extra_base=w,this.elems=be,this.max_length=_e,this.has_stree=m&&m.length}let b,F,B;function $(m,Y){this.dyn_tree=m,this.max_code=0,this.stat_desc=Y}u(J);const Q=m=>m<256?C[m]:C[256+(m>>>7)],N=(m,Y)=>{m.pending_buf[m.pending++]=255&Y,m.pending_buf[m.pending++]=Y>>>8&255},ee=(m,Y,w)=>{m.bi_valid>16-w?(m.bi_buf|=Y<<m.bi_valid&65535,N(m,m.bi_buf),m.bi_buf=Y>>16-m.bi_valid,m.bi_valid+=w-16):(m.bi_buf|=Y<<m.bi_valid&65535,m.bi_valid+=w)},Se=(m,Y,w)=>{ee(m,w[2*Y],w[2*Y+1])},ue=(m,Y)=>{let w=0;do w|=1&m,m>>>=1,w<<=1;while(--Y>0);return w>>>1},ge=(m,Y,w)=>{const be=new Array(16);let _e,ve,$e=0;for(_e=1;_e<=g;_e++)$e=$e+w[_e-1]<<1,be[_e]=$e;for(ve=0;ve<=Y;ve++){let Ie=m[2*ve+1];Ie!==0&&(m[2*ve]=ue(be[Ie]++,Ie))}},me=m=>{let Y;for(Y=0;Y<_;Y++)m.dyn_ltree[2*Y]=0;for(Y=0;Y<l;Y++)m.dyn_dtree[2*Y]=0;for(Y=0;Y<19;Y++)m.bl_tree[2*Y]=0;m.dyn_ltree[512]=1,m.opt_len=m.static_len=0,m.sym_next=m.matches=0},Me=m=>{m.bi_valid>8?N(m,m.bi_buf):m.bi_valid>0&&(m.pending_buf[m.pending++]=m.bi_buf),m.bi_buf=0,m.bi_valid=0},ce=(m,Y,w,be)=>{const _e=2*Y,ve=2*w;return m[_e]<m[ve]||m[_e]===m[ve]&&be[Y]<=be[w]},O=(m,Y,w)=>{const be=m.heap[w];let _e=w<<1;for(;_e<=m.heap_len&&(_e<m.heap_len&&ce(Y,m.heap[_e+1],m.heap[_e],m.depth)&&_e++,!ce(Y,be,m.heap[_e],m.depth));)m.heap[w]=m.heap[_e],w=_e,_e<<=1;m.heap[w]=be},he=(m,Y,w)=>{let be,_e,ve,$e,Ie=0;if(m.sym_next!==0)do be=255&m.pending_buf[m.sym_buf+Ie++],be+=(255&m.pending_buf[m.sym_buf+Ie++])<<8,_e=m.pending_buf[m.sym_buf+Ie++],be===0?Se(m,_e,Y):(ve=I[_e],Se(m,ve+h+1,Y),$e=d[ve],$e!==0&&(_e-=K[ve],ee(m,_e,$e)),be--,ve=Q(be),Se(m,ve,w),$e=y[ve],$e!==0&&(be-=J[ve],ee(m,be,$e)));while(Ie<m.sym_next);Se(m,256,Y)},se=(m,Y)=>{const w=Y.dyn_tree,be=Y.stat_desc.static_tree,_e=Y.stat_desc.has_stree,ve=Y.stat_desc.elems;let $e,Ie,gt,Ne=-1;for(m.heap_len=0,m.heap_max=573,$e=0;$e<ve;$e++)w[2*$e]!==0?(m.heap[++m.heap_len]=Ne=$e,m.depth[$e]=0):w[2*$e+1]=0;for(;m.heap_len<2;)gt=m.heap[++m.heap_len]=Ne<2?++Ne:0,w[2*gt]=1,m.depth[gt]=0,m.opt_len--,_e&&(m.static_len-=be[2*gt+1]);for(Y.max_code=Ne,$e=m.heap_len>>1;$e>=1;$e--)O(m,w,$e);gt=ve;do $e=m.heap[1],m.heap[1]=m.heap[m.heap_len--],O(m,w,1),Ie=m.heap[1],m.heap[--m.heap_max]=$e,m.heap[--m.heap_max]=Ie,w[2*gt]=w[2*$e]+w[2*Ie],m.depth[gt]=(m.depth[$e]>=m.depth[Ie]?m.depth[$e]:m.depth[Ie])+1,w[2*$e+1]=w[2*Ie+1]=gt,m.heap[1]=gt++,O(m,w,1);while(m.heap_len>=2);m.heap[--m.heap_max]=m.heap[1],((Xe,dr)=>{const Wt=dr.dyn_tree,_t=dr.max_code,si=dr.stat_desc.static_tree,Rr=dr.stat_desc.has_stree,er=dr.stat_desc.extra_bits,Ir=dr.stat_desc.extra_base,lr=dr.stat_desc.max_length;let At,sr,Pr,Dt,Sr,cr,tr=0;for(Dt=0;Dt<=g;Dt++)Xe.bl_count[Dt]=0;for(Wt[2*Xe.heap[Xe.heap_max]+1]=0,At=Xe.heap_max+1;At<573;At++)sr=Xe.heap[At],Dt=Wt[2*Wt[2*sr+1]+1]+1,Dt>lr&&(Dt=lr,tr++),Wt[2*sr+1]=Dt,sr>_t||(Xe.bl_count[Dt]++,Sr=0,sr>=Ir&&(Sr=er[sr-Ir]),cr=Wt[2*sr],Xe.opt_len+=cr*(Dt+Sr),Rr&&(Xe.static_len+=cr*(si[2*sr+1]+Sr)));if(tr!==0){do{for(Dt=lr-1;Xe.bl_count[Dt]===0;)Dt--;Xe.bl_count[Dt]--,Xe.bl_count[Dt+1]+=2,Xe.bl_count[lr]--,tr-=2}while(tr>0);for(Dt=lr;Dt!==0;Dt--)for(sr=Xe.bl_count[Dt];sr!==0;)Pr=Xe.heap[--At],Pr>_t||(Wt[2*Pr+1]!==Dt&&(Xe.opt_len+=(Dt-Wt[2*Pr+1])*Wt[2*Pr],Wt[2*Pr+1]=Dt),sr--)}})(m,Y),ge(w,Ne,m.bl_count)},q=(m,Y,w)=>{let be,_e,ve=-1,$e=Y[1],Ie=0,gt=7,Ne=4;for($e===0&&(gt=138,Ne=3),Y[2*(w+1)+1]=65535,be=0;be<=w;be++)_e=$e,$e=Y[2*(be+1)+1],++Ie<gt&&_e===$e||(Ie<Ne?m.bl_tree[2*_e]+=Ie:_e!==0?(_e!==ve&&m.bl_tree[2*_e]++,m.bl_tree[32]++):Ie<=10?m.bl_tree[34]++:m.bl_tree[36]++,Ie=0,ve=_e,$e===0?(gt=138,Ne=3):_e===$e?(gt=6,Ne=3):(gt=7,Ne=4))},Pe=(m,Y,w)=>{let be,_e,ve=-1,$e=Y[1],Ie=0,gt=7,Ne=4;for($e===0&&(gt=138,Ne=3),be=0;be<=w;be++)if(_e=$e,$e=Y[2*(be+1)+1],!(++Ie<gt&&_e===$e)){if(Ie<Ne)do Se(m,_e,m.bl_tree);while(--Ie!==0);else _e!==0?(_e!==ve&&(Se(m,_e,m.bl_tree),Ie--),Se(m,16,m.bl_tree),ee(m,Ie-3,2)):Ie<=10?(Se(m,17,m.bl_tree),ee(m,Ie-3,3)):(Se(m,18,m.bl_tree),ee(m,Ie-11,7));Ie=0,ve=_e,$e===0?(gt=138,Ne=3):_e===$e?(gt=6,Ne=3):(gt=7,Ne=4)}};let fe=!1;const De=(m,Y,w,be)=>{ee(m,0+(be?1:0),3),Me(m),N(m,w),N(m,~w),w&&m.pending_buf.set(m.window.subarray(Y,Y+w),m.pending),m.pending+=w};var He=(m,Y,w,be)=>{let _e,ve,$e=0;m.level>0?(m.strm.data_type===2&&(m.strm.data_type=(Ie=>{let gt,Ne=4093624447;for(gt=0;gt<=31;gt++,Ne>>>=1)if(1&Ne&&Ie.dyn_ltree[2*gt]!==0)return 0;if(Ie.dyn_ltree[18]!==0||Ie.dyn_ltree[20]!==0||Ie.dyn_ltree[26]!==0)return 1;for(gt=32;gt<h;gt++)if(Ie.dyn_ltree[2*gt]!==0)return 1;return 0})(m)),se(m,m.l_desc),se(m,m.d_desc),$e=(Ie=>{let gt;for(q(Ie,Ie.dyn_ltree,Ie.l_desc.max_code),q(Ie,Ie.dyn_dtree,Ie.d_desc.max_code),se(Ie,Ie.bl_desc),gt=18;gt>=3&&Ie.bl_tree[2*v[gt]+1]===0;gt--);return Ie.opt_len+=3*(gt+1)+5+5+4,gt})(m),_e=m.opt_len+3+7>>>3,ve=m.static_len+3+7>>>3,ve<=_e&&(_e=ve)):_e=ve=w+5,w+4<=_e&&Y!==-1?De(m,Y,w,be):m.strategy===4||ve===_e?(ee(m,2+(be?1:0),3),he(m,R,z)):(ee(m,4+(be?1:0),3),((Ie,gt,Ne,Xe)=>{let dr;for(ee(Ie,gt-257,5),ee(Ie,Ne-1,5),ee(Ie,Xe-4,4),dr=0;dr<Xe;dr++)ee(Ie,Ie.bl_tree[2*v[dr]+1],3);Pe(Ie,Ie.dyn_ltree,gt-1),Pe(Ie,Ie.dyn_dtree,Ne-1)})(m,m.l_desc.max_code+1,m.d_desc.max_code+1,$e+1),he(m,m.dyn_ltree,m.dyn_dtree)),me(m),be&&Me(m)},oe={_tr_init:m=>{fe||((()=>{let Y,w,be,_e,ve;const $e=new Array(16);for(be=0,_e=0;_e<28;_e++)for(K[_e]=be,Y=0;Y<1<<d[_e];Y++)I[be++]=_e;for(I[be-1]=_e,ve=0,_e=0;_e<16;_e++)for(J[_e]=ve,Y=0;Y<1<<y[_e];Y++)C[ve++]=_e;for(ve>>=7;_e<l;_e++)for(J[_e]=ve<<7,Y=0;Y<1<<y[_e]-7;Y++)C[256+ve++]=_e;for(w=0;w<=g;w++)$e[w]=0;for(Y=0;Y<=143;)R[2*Y+1]=8,Y++,$e[8]++;for(;Y<=255;)R[2*Y+1]=9,Y++,$e[9]++;for(;Y<=279;)R[2*Y+1]=7,Y++,$e[7]++;for(;Y<=287;)R[2*Y+1]=8,Y++,$e[8]++;for(ge(R,287,$e),Y=0;Y<l;Y++)z[2*Y+1]=5,z[2*Y]=ue(Y,5);b=new X(R,d,257,_,g),F=new X(z,y,0,l,g),B=new X(new Array(0),E,0,19,7)})(),fe=!0),m.l_desc=new $(m.dyn_ltree,b),m.d_desc=new $(m.dyn_dtree,F),m.bl_desc=new $(m.bl_tree,B),m.bi_buf=0,m.bi_valid=0,me(m)},_tr_stored_block:De,_tr_flush_block:He,_tr_tally:(m,Y,w)=>(m.pending_buf[m.sym_buf+m.sym_next++]=Y,m.pending_buf[m.sym_buf+m.sym_next++]=Y>>8,m.pending_buf[m.sym_buf+m.sym_next++]=w,Y===0?m.dyn_ltree[2*w]++:(m.matches++,Y--,m.dyn_ltree[2*(I[w]+h+1)]++,m.dyn_dtree[2*Q(Y)]++),m.sym_next===m.sym_end),_tr_align:m=>{ee(m,2,3),Se(m,256,R),(Y=>{Y.bi_valid===16?(N(Y,Y.bi_buf),Y.bi_buf=0,Y.bi_valid=0):Y.bi_valid>=8&&(Y.pending_buf[Y.pending++]=255&Y.bi_buf,Y.bi_buf>>=8,Y.bi_valid-=8)})(m)}},Ce=(m,Y,w,be)=>{let _e=65535&m,ve=m>>>16&65535,$e=0;for(;w!==0;){$e=w>2e3?2e3:w,w-=$e;do _e=_e+Y[be++]|0,ve=ve+_e|0;while(--$e);_e%=65521,ve%=65521}return _e|ve<<16};const We=new Uint32Array((()=>{let m,Y=[];for(var w=0;w<256;w++){m=w;for(var be=0;be<8;be++)m=1&m?3988292384^m>>>1:m>>>1;Y[w]=m}return Y})());var qe=(m,Y,w,be)=>{const _e=We,ve=be+w;m^=-1;for(let $e=be;$e<ve;$e++)m=m>>>8^_e[255&(m^Y[$e])];return-1^m},Fe={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},rt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ot,_tr_stored_block:at,_tr_flush_block:Ft,_tr_tally:Ct,_tr_align:or}=oe,{Z_NO_FLUSH:ar,Z_PARTIAL_FLUSH:Mr,Z_FULL_FLUSH:Er,Z_FINISH:pr,Z_BLOCK:vr,Z_OK:xr,Z_STREAM_END:fi,Z_STREAM_ERROR:kr,Z_DATA_ERROR:zr,Z_BUF_ERROR:Di,Z_DEFAULT_COMPRESSION:wi,Z_FILTERED:Hi,Z_HUFFMAN_ONLY:pe,Z_RLE:Ee,Z_FIXED:ze,Z_DEFAULT_STRATEGY:dt,Z_UNKNOWN:nt,Z_DEFLATED:It}=rt,ht=258,Lt=262,Ut=42,zt=113,mr=666,li=(m,Y)=>(m.msg=Fe[Y],Y),Ci=m=>2*m-(m>4?9:0),ui=m=>{let Y=m.length;for(;--Y>=0;)m[Y]=0},gi=m=>{let Y,w,be,_e=m.w_size;Y=m.hash_size,be=Y;do w=m.head[--be],m.head[be]=w>=_e?w-_e:0;while(--Y);Y=_e,be=Y;do w=m.prev[--be],m.prev[be]=w>=_e?w-_e:0;while(--Y)};let jr=(m,Y,w)=>(Y<<m.hash_shift^w)&m.hash_mask;const Lr=m=>{const Y=m.state;let w=Y.pending;w>m.avail_out&&(w=m.avail_out),w!==0&&(m.output.set(Y.pending_buf.subarray(Y.pending_out,Y.pending_out+w),m.next_out),m.next_out+=w,Y.pending_out+=w,m.total_out+=w,m.avail_out-=w,Y.pending-=w,Y.pending===0&&(Y.pending_out=0))},Dr=(m,Y)=>{Ft(m,m.block_start>=0?m.block_start:-1,m.strstart-m.block_start,Y),m.block_start=m.strstart,Lr(m.strm)},rr=(m,Y)=>{m.pending_buf[m.pending++]=Y},vi=(m,Y)=>{m.pending_buf[m.pending++]=Y>>>8&255,m.pending_buf[m.pending++]=255&Y},bi=(m,Y,w,be)=>{let _e=m.avail_in;return _e>be&&(_e=be),_e===0?0:(m.avail_in-=_e,Y.set(m.input.subarray(m.next_in,m.next_in+_e),w),m.state.wrap===1?m.adler=Ce(m.adler,Y,_e,w):m.state.wrap===2&&(m.adler=qe(m.adler,Y,_e,w)),m.next_in+=_e,m.total_in+=_e,_e)},Ki=(m,Y)=>{let w,be,_e=m.max_chain_length,ve=m.strstart,$e=m.prev_length,Ie=m.nice_match;const gt=m.strstart>m.w_size-Lt?m.strstart-(m.w_size-Lt):0,Ne=m.window,Xe=m.w_mask,dr=m.prev,Wt=m.strstart+ht;let _t=Ne[ve+$e-1],si=Ne[ve+$e];m.prev_length>=m.good_match&&(_e>>=2),Ie>m.lookahead&&(Ie=m.lookahead);do if(w=Y,Ne[w+$e]===si&&Ne[w+$e-1]===_t&&Ne[w]===Ne[ve]&&Ne[++w]===Ne[ve+1]){ve+=2,w++;do;while(Ne[++ve]===Ne[++w]&&Ne[++ve]===Ne[++w]&&Ne[++ve]===Ne[++w]&&Ne[++ve]===Ne[++w]&&Ne[++ve]===Ne[++w]&&Ne[++ve]===Ne[++w]&&Ne[++ve]===Ne[++w]&&Ne[++ve]===Ne[++w]&&ve<Wt);if(be=ht-(Wt-ve),ve=Wt-ht,be>$e){if(m.match_start=Y,$e=be,be>=Ie)break;_t=Ne[ve+$e-1],si=Ne[ve+$e]}}while((Y=dr[Y&Xe])>gt&&--_e!==0);return $e<=m.lookahead?$e:m.lookahead},Ai=m=>{const Y=m.w_size;let w,be,_e;do{if(be=m.window_size-m.lookahead-m.strstart,m.strstart>=Y+(Y-Lt)&&(m.window.set(m.window.subarray(Y,Y+Y-be),0),m.match_start-=Y,m.strstart-=Y,m.block_start-=Y,m.insert>m.strstart&&(m.insert=m.strstart),gi(m),be+=Y),m.strm.avail_in===0)break;if(w=bi(m.strm,m.window,m.strstart+m.lookahead,be),m.lookahead+=w,m.lookahead+m.insert>=3)for(_e=m.strstart-m.insert,m.ins_h=m.window[_e],m.ins_h=jr(m,m.ins_h,m.window[_e+1]);m.insert&&(m.ins_h=jr(m,m.ins_h,m.window[_e+3-1]),m.prev[_e&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=_e,_e++,m.insert--,!(m.lookahead+m.insert<3)););}while(m.lookahead<Lt&&m.strm.avail_in!==0)},Ni=(m,Y)=>{let w,be,_e,ve=m.pending_buf_size-5>m.w_size?m.w_size:m.pending_buf_size-5,$e=0,Ie=m.strm.avail_in;do{if(w=65535,_e=m.bi_valid+42>>3,m.strm.avail_out<_e||(_e=m.strm.avail_out-_e,be=m.strstart-m.block_start,w>be+m.strm.avail_in&&(w=be+m.strm.avail_in),w>_e&&(w=_e),w<ve&&(w===0&&Y!==pr||Y===ar||w!==be+m.strm.avail_in)))break;$e=Y===pr&&w===be+m.strm.avail_in?1:0,at(m,0,0,$e),m.pending_buf[m.pending-4]=w,m.pending_buf[m.pending-3]=w>>8,m.pending_buf[m.pending-2]=~w,m.pending_buf[m.pending-1]=~w>>8,Lr(m.strm),be&&(be>w&&(be=w),m.strm.output.set(m.window.subarray(m.block_start,m.block_start+be),m.strm.next_out),m.strm.next_out+=be,m.strm.avail_out-=be,m.strm.total_out+=be,m.block_start+=be,w-=be),w&&(bi(m.strm,m.strm.output,m.strm.next_out,w),m.strm.next_out+=w,m.strm.avail_out-=w,m.strm.total_out+=w)}while($e===0);return Ie-=m.strm.avail_in,Ie&&(Ie>=m.w_size?(m.matches=2,m.window.set(m.strm.input.subarray(m.strm.next_in-m.w_size,m.strm.next_in),0),m.strstart=m.w_size,m.insert=m.strstart):(m.window_size-m.strstart<=Ie&&(m.strstart-=m.w_size,m.window.set(m.window.subarray(m.w_size,m.w_size+m.strstart),0),m.matches<2&&m.matches++,m.insert>m.strstart&&(m.insert=m.strstart)),m.window.set(m.strm.input.subarray(m.strm.next_in-Ie,m.strm.next_in),m.strstart),m.strstart+=Ie,m.insert+=Ie>m.w_size-m.insert?m.w_size-m.insert:Ie),m.block_start=m.strstart),m.high_water<m.strstart&&(m.high_water=m.strstart),$e?4:Y!==ar&&Y!==pr&&m.strm.avail_in===0&&m.strstart===m.block_start?2:(_e=m.window_size-m.strstart,m.strm.avail_in>_e&&m.block_start>=m.w_size&&(m.block_start-=m.w_size,m.strstart-=m.w_size,m.window.set(m.window.subarray(m.w_size,m.w_size+m.strstart),0),m.matches<2&&m.matches++,_e+=m.w_size,m.insert>m.strstart&&(m.insert=m.strstart)),_e>m.strm.avail_in&&(_e=m.strm.avail_in),_e&&(bi(m.strm,m.window,m.strstart,_e),m.strstart+=_e,m.insert+=_e>m.w_size-m.insert?m.w_size-m.insert:_e),m.high_water<m.strstart&&(m.high_water=m.strstart),_e=m.bi_valid+42>>3,_e=m.pending_buf_size-_e>65535?65535:m.pending_buf_size-_e,ve=_e>m.w_size?m.w_size:_e,be=m.strstart-m.block_start,(be>=ve||(be||Y===pr)&&Y!==ar&&m.strm.avail_in===0&&be<=_e)&&(w=be>_e?_e:be,$e=Y===pr&&m.strm.avail_in===0&&w===be?1:0,at(m,m.block_start,w,$e),m.block_start+=w,Lr(m.strm)),$e?3:1)},Ti=(m,Y)=>{let w,be;for(;;){if(m.lookahead<Lt){if(Ai(m),m.lookahead<Lt&&Y===ar)return 1;if(m.lookahead===0)break}if(w=0,m.lookahead>=3&&(m.ins_h=jr(m,m.ins_h,m.window[m.strstart+3-1]),w=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),w!==0&&m.strstart-w<=m.w_size-Lt&&(m.match_length=Ki(m,w)),m.match_length>=3)if(be=Ct(m,m.strstart-m.match_start,m.match_length-3),m.lookahead-=m.match_length,m.match_length<=m.max_lazy_match&&m.lookahead>=3){m.match_length--;do m.strstart++,m.ins_h=jr(m,m.ins_h,m.window[m.strstart+3-1]),w=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart;while(--m.match_length!==0);m.strstart++}else m.strstart+=m.match_length,m.match_length=0,m.ins_h=m.window[m.strstart],m.ins_h=jr(m,m.ins_h,m.window[m.strstart+1]);else be=Ct(m,0,m.window[m.strstart]),m.lookahead--,m.strstart++;if(be&&(Dr(m,!1),m.strm.avail_out===0))return 1}return m.insert=m.strstart<2?m.strstart:2,Y===pr?(Dr(m,!0),m.strm.avail_out===0?3:4):m.sym_next&&(Dr(m,!1),m.strm.avail_out===0)?1:2},pi=(m,Y)=>{let w,be,_e;for(;;){if(m.lookahead<Lt){if(Ai(m),m.lookahead<Lt&&Y===ar)return 1;if(m.lookahead===0)break}if(w=0,m.lookahead>=3&&(m.ins_h=jr(m,m.ins_h,m.window[m.strstart+3-1]),w=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),m.prev_length=m.match_length,m.prev_match=m.match_start,m.match_length=2,w!==0&&m.prev_length<m.max_lazy_match&&m.strstart-w<=m.w_size-Lt&&(m.match_length=Ki(m,w),m.match_length<=5&&(m.strategy===Hi||m.match_length===3&&m.strstart-m.match_start>4096)&&(m.match_length=2)),m.prev_length>=3&&m.match_length<=m.prev_length){_e=m.strstart+m.lookahead-3,be=Ct(m,m.strstart-1-m.prev_match,m.prev_length-3),m.lookahead-=m.prev_length-1,m.prev_length-=2;do++m.strstart<=_e&&(m.ins_h=jr(m,m.ins_h,m.window[m.strstart+3-1]),w=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart);while(--m.prev_length!==0);if(m.match_available=0,m.match_length=2,m.strstart++,be&&(Dr(m,!1),m.strm.avail_out===0))return 1}else if(m.match_available){if(be=Ct(m,0,m.window[m.strstart-1]),be&&Dr(m,!1),m.strstart++,m.lookahead--,m.strm.avail_out===0)return 1}else m.match_available=1,m.strstart++,m.lookahead--}return m.match_available&&(be=Ct(m,0,m.window[m.strstart-1]),m.match_available=0),m.insert=m.strstart<2?m.strstart:2,Y===pr?(Dr(m,!0),m.strm.avail_out===0?3:4):m.sym_next&&(Dr(m,!1),m.strm.avail_out===0)?1:2};function Br(m,Y,w,be,_e){this.good_length=m,this.max_lazy=Y,this.nice_length=w,this.max_chain=be,this.func=_e}const Zr=[new Br(0,0,0,0,Ni),new Br(4,4,8,4,Ti),new Br(4,5,16,8,Ti),new Br(4,6,32,32,Ti),new Br(4,4,16,16,pi),new Br(8,16,32,32,pi),new Br(8,16,128,128,pi),new Br(8,32,128,256,pi),new Br(32,128,258,1024,pi),new Br(32,258,258,4096,pi)];function Vi(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=It,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ui(this.dyn_ltree),ui(this.dyn_dtree),ui(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ui(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ui(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const yi=m=>{if(!m)return 1;const Y=m.state;return!Y||Y.strm!==m||Y.status!==Ut&&Y.status!==57&&Y.status!==69&&Y.status!==73&&Y.status!==91&&Y.status!==103&&Y.status!==zt&&Y.status!==mr?1:0},Wi=m=>{if(yi(m))return li(m,kr);m.total_in=m.total_out=0,m.data_type=nt;const Y=m.state;return Y.pending=0,Y.pending_out=0,Y.wrap<0&&(Y.wrap=-Y.wrap),Y.status=Y.wrap===2?57:Y.wrap?Ut:zt,m.adler=Y.wrap===2?0:1,Y.last_flush=-2,ot(Y),xr},tn=m=>{const Y=Wi(m);var w;return Y===xr&&((w=m.state).window_size=2*w.w_size,ui(w.head),w.max_lazy_match=Zr[w.level].max_lazy,w.good_match=Zr[w.level].good_length,w.nice_match=Zr[w.level].nice_length,w.max_chain_length=Zr[w.level].max_chain,w.strstart=0,w.block_start=0,w.lookahead=0,w.insert=0,w.match_length=w.prev_length=2,w.match_available=0,w.ins_h=0),Y},on=(m,Y,w,be,_e,ve)=>{if(!m)return kr;let $e=1;if(Y===wi&&(Y=6),be<0?($e=0,be=-be):be>15&&($e=2,be-=16),_e<1||_e>9||w!==It||be<8||be>15||Y<0||Y>9||ve<0||ve>ze||be===8&&$e!==1)return li(m,kr);be===8&&(be=9);const Ie=new Vi;return m.state=Ie,Ie.strm=m,Ie.status=Ut,Ie.wrap=$e,Ie.gzhead=null,Ie.w_bits=be,Ie.w_size=1<<Ie.w_bits,Ie.w_mask=Ie.w_size-1,Ie.hash_bits=_e+7,Ie.hash_size=1<<Ie.hash_bits,Ie.hash_mask=Ie.hash_size-1,Ie.hash_shift=~~((Ie.hash_bits+3-1)/3),Ie.window=new Uint8Array(2*Ie.w_size),Ie.head=new Uint16Array(Ie.hash_size),Ie.prev=new Uint16Array(Ie.w_size),Ie.lit_bufsize=1<<_e+6,Ie.pending_buf_size=4*Ie.lit_bufsize,Ie.pending_buf=new Uint8Array(Ie.pending_buf_size),Ie.sym_buf=Ie.lit_bufsize,Ie.sym_end=3*(Ie.lit_bufsize-1),Ie.level=Y,Ie.strategy=ve,Ie.method=w,tn(m)};var ur={deflateInit:(m,Y)=>on(m,Y,It,15,8,dt),deflateInit2:on,deflateReset:tn,deflateResetKeep:Wi,deflateSetHeader:(m,Y)=>yi(m)||m.state.wrap!==2?kr:(m.state.gzhead=Y,xr),deflate:(m,Y)=>{if(yi(m)||Y>vr||Y<0)return m?li(m,kr):kr;const w=m.state;if(!m.output||m.avail_in!==0&&!m.input||w.status===mr&&Y!==pr)return li(m,m.avail_out===0?Di:kr);const be=w.last_flush;if(w.last_flush=Y,w.pending!==0){if(Lr(m),m.avail_out===0)return w.last_flush=-1,xr}else if(m.avail_in===0&&Ci(Y)<=Ci(be)&&Y!==pr)return li(m,Di);if(w.status===mr&&m.avail_in!==0)return li(m,Di);if(w.status===Ut&&w.wrap===0&&(w.status=zt),w.status===Ut){let _e=It+(w.w_bits-8<<4)<<8,ve=-1;if(ve=w.strategy>=pe||w.level<2?0:w.level<6?1:w.level===6?2:3,_e|=ve<<6,w.strstart!==0&&(_e|=32),_e+=31-_e%31,vi(w,_e),w.strstart!==0&&(vi(w,m.adler>>>16),vi(w,65535&m.adler)),m.adler=1,w.status=zt,Lr(m),w.pending!==0)return w.last_flush=-1,xr}if(w.status===57){if(m.adler=0,rr(w,31),rr(w,139),rr(w,8),w.gzhead)rr(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),rr(w,255&w.gzhead.time),rr(w,w.gzhead.time>>8&255),rr(w,w.gzhead.time>>16&255),rr(w,w.gzhead.time>>24&255),rr(w,w.level===9?2:w.strategy>=pe||w.level<2?4:0),rr(w,255&w.gzhead.os),w.gzhead.extra&&w.gzhead.extra.length&&(rr(w,255&w.gzhead.extra.length),rr(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(m.adler=qe(m.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=69;else if(rr(w,0),rr(w,0),rr(w,0),rr(w,0),rr(w,0),rr(w,w.level===9?2:w.strategy>=pe||w.level<2?4:0),rr(w,3),w.status=zt,Lr(m),w.pending!==0)return w.last_flush=-1,xr}if(w.status===69){if(w.gzhead.extra){let _e=w.pending,ve=(65535&w.gzhead.extra.length)-w.gzindex;for(;w.pending+ve>w.pending_buf_size;){let Ie=w.pending_buf_size-w.pending;if(w.pending_buf.set(w.gzhead.extra.subarray(w.gzindex,w.gzindex+Ie),w.pending),w.pending=w.pending_buf_size,w.gzhead.hcrc&&w.pending>_e&&(m.adler=qe(m.adler,w.pending_buf,w.pending-_e,_e)),w.gzindex+=Ie,Lr(m),w.pending!==0)return w.last_flush=-1,xr;_e=0,ve-=Ie}let $e=new Uint8Array(w.gzhead.extra);w.pending_buf.set($e.subarray(w.gzindex,w.gzindex+ve),w.pending),w.pending+=ve,w.gzhead.hcrc&&w.pending>_e&&(m.adler=qe(m.adler,w.pending_buf,w.pending-_e,_e)),w.gzindex=0}w.status=73}if(w.status===73){if(w.gzhead.name){let _e,ve=w.pending;do{if(w.pending===w.pending_buf_size){if(w.gzhead.hcrc&&w.pending>ve&&(m.adler=qe(m.adler,w.pending_buf,w.pending-ve,ve)),Lr(m),w.pending!==0)return w.last_flush=-1,xr;ve=0}_e=w.gzindex<w.gzhead.name.length?255&w.gzhead.name.charCodeAt(w.gzindex++):0,rr(w,_e)}while(_e!==0);w.gzhead.hcrc&&w.pending>ve&&(m.adler=qe(m.adler,w.pending_buf,w.pending-ve,ve)),w.gzindex=0}w.status=91}if(w.status===91){if(w.gzhead.comment){let _e,ve=w.pending;do{if(w.pending===w.pending_buf_size){if(w.gzhead.hcrc&&w.pending>ve&&(m.adler=qe(m.adler,w.pending_buf,w.pending-ve,ve)),Lr(m),w.pending!==0)return w.last_flush=-1,xr;ve=0}_e=w.gzindex<w.gzhead.comment.length?255&w.gzhead.comment.charCodeAt(w.gzindex++):0,rr(w,_e)}while(_e!==0);w.gzhead.hcrc&&w.pending>ve&&(m.adler=qe(m.adler,w.pending_buf,w.pending-ve,ve))}w.status=103}if(w.status===103){if(w.gzhead.hcrc){if(w.pending+2>w.pending_buf_size&&(Lr(m),w.pending!==0))return w.last_flush=-1,xr;rr(w,255&m.adler),rr(w,m.adler>>8&255),m.adler=0}if(w.status=zt,Lr(m),w.pending!==0)return w.last_flush=-1,xr}if(m.avail_in!==0||w.lookahead!==0||Y!==ar&&w.status!==mr){let _e=w.level===0?Ni(w,Y):w.strategy===pe?((ve,$e)=>{let Ie;for(;;){if(ve.lookahead===0&&(Ai(ve),ve.lookahead===0)){if($e===ar)return 1;break}if(ve.match_length=0,Ie=Ct(ve,0,ve.window[ve.strstart]),ve.lookahead--,ve.strstart++,Ie&&(Dr(ve,!1),ve.strm.avail_out===0))return 1}return ve.insert=0,$e===pr?(Dr(ve,!0),ve.strm.avail_out===0?3:4):ve.sym_next&&(Dr(ve,!1),ve.strm.avail_out===0)?1:2})(w,Y):w.strategy===Ee?((ve,$e)=>{let Ie,gt,Ne,Xe;const dr=ve.window;for(;;){if(ve.lookahead<=ht){if(Ai(ve),ve.lookahead<=ht&&$e===ar)return 1;if(ve.lookahead===0)break}if(ve.match_length=0,ve.lookahead>=3&&ve.strstart>0&&(Ne=ve.strstart-1,gt=dr[Ne],gt===dr[++Ne]&&gt===dr[++Ne]&&gt===dr[++Ne])){Xe=ve.strstart+ht;do;while(gt===dr[++Ne]&&gt===dr[++Ne]&&gt===dr[++Ne]&&gt===dr[++Ne]&&gt===dr[++Ne]&&gt===dr[++Ne]&&gt===dr[++Ne]&&gt===dr[++Ne]&&Ne<Xe);ve.match_length=ht-(Xe-Ne),ve.match_length>ve.lookahead&&(ve.match_length=ve.lookahead)}if(ve.match_length>=3?(Ie=Ct(ve,1,ve.match_length-3),ve.lookahead-=ve.match_length,ve.strstart+=ve.match_length,ve.match_length=0):(Ie=Ct(ve,0,ve.window[ve.strstart]),ve.lookahead--,ve.strstart++),Ie&&(Dr(ve,!1),ve.strm.avail_out===0))return 1}return ve.insert=0,$e===pr?(Dr(ve,!0),ve.strm.avail_out===0?3:4):ve.sym_next&&(Dr(ve,!1),ve.strm.avail_out===0)?1:2})(w,Y):Zr[w.level].func(w,Y);if(_e!==3&&_e!==4||(w.status=mr),_e===1||_e===3)return m.avail_out===0&&(w.last_flush=-1),xr;if(_e===2&&(Y===Mr?or(w):Y!==vr&&(at(w,0,0,!1),Y===Er&&(ui(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),Lr(m),m.avail_out===0))return w.last_flush=-1,xr}return Y!==pr?xr:w.wrap<=0?fi:(w.wrap===2?(rr(w,255&m.adler),rr(w,m.adler>>8&255),rr(w,m.adler>>16&255),rr(w,m.adler>>24&255),rr(w,255&m.total_in),rr(w,m.total_in>>8&255),rr(w,m.total_in>>16&255),rr(w,m.total_in>>24&255)):(vi(w,m.adler>>>16),vi(w,65535&m.adler)),Lr(m),w.wrap>0&&(w.wrap=-w.wrap),w.pending!==0?xr:fi)},deflateEnd:m=>{if(yi(m))return kr;const Y=m.state.status;return m.state=null,Y===zt?li(m,zr):xr},deflateSetDictionary:(m,Y)=>{let w=Y.length;if(yi(m))return kr;const be=m.state,_e=be.wrap;if(_e===2||_e===1&&be.status!==Ut||be.lookahead)return kr;if(_e===1&&(m.adler=Ce(m.adler,Y,w,0)),be.wrap=0,w>=be.w_size){_e===0&&(ui(be.head),be.strstart=0,be.block_start=0,be.insert=0);let gt=new Uint8Array(be.w_size);gt.set(Y.subarray(w-be.w_size,w),0),Y=gt,w=be.w_size}const ve=m.avail_in,$e=m.next_in,Ie=m.input;for(m.avail_in=w,m.next_in=0,m.input=Y,Ai(be);be.lookahead>=3;){let gt=be.strstart,Ne=be.lookahead-2;do be.ins_h=jr(be,be.ins_h,be.window[gt+3-1]),be.prev[gt&be.w_mask]=be.head[be.ins_h],be.head[be.ins_h]=gt,gt++;while(--Ne);be.strstart=gt,be.lookahead=2,Ai(be)}return be.strstart+=be.lookahead,be.block_start=be.strstart,be.insert=be.lookahead,be.lookahead=0,be.match_length=be.prev_length=2,be.match_available=0,m.next_in=$e,m.input=Ie,m.avail_in=ve,be.wrap=_e,xr},deflateInfo:"pako deflate (from Nodeca project)"};const Gr=(m,Y)=>Object.prototype.hasOwnProperty.call(m,Y);var Kr=function(m){const Y=Array.prototype.slice.call(arguments,1);for(;Y.length;){const w=Y.shift();if(w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(const be in w)Gr(w,be)&&(m[be]=w[be])}}return m},qi=m=>{let Y=0;for(let be=0,_e=m.length;be<_e;be++)Y+=m[be].length;const w=new Uint8Array(Y);for(let be=0,_e=0,ve=m.length;be<ve;be++){let $e=m[be];w.set($e,_e),_e+=$e.length}return w};let Bt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Bt=!1}const S=new Uint8Array(256);for(let m=0;m<256;m++)S[m]=m>=252?6:m>=248?5:m>=240?4:m>=224?3:m>=192?2:1;S[254]=S[254]=1;var ne=m=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(m);let Y,w,be,_e,ve,$e=m.length,Ie=0;for(_e=0;_e<$e;_e++)w=m.charCodeAt(_e),(64512&w)==55296&&_e+1<$e&&(be=m.charCodeAt(_e+1),(64512&be)==56320&&(w=65536+(w-55296<<10)+(be-56320),_e++)),Ie+=w<128?1:w<2048?2:w<65536?3:4;for(Y=new Uint8Array(Ie),ve=0,_e=0;ve<Ie;_e++)w=m.charCodeAt(_e),(64512&w)==55296&&_e+1<$e&&(be=m.charCodeAt(_e+1),(64512&be)==56320&&(w=65536+(w-55296<<10)+(be-56320),_e++)),w<128?Y[ve++]=w:w<2048?(Y[ve++]=192|w>>>6,Y[ve++]=128|63&w):w<65536?(Y[ve++]=224|w>>>12,Y[ve++]=128|w>>>6&63,Y[ve++]=128|63&w):(Y[ve++]=240|w>>>18,Y[ve++]=128|w>>>12&63,Y[ve++]=128|w>>>6&63,Y[ve++]=128|63&w);return Y},xe=(m,Y)=>{const w=Y||m.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(m.subarray(0,Y));let be,_e;const ve=new Array(2*w);for(_e=0,be=0;be<w;){let $e=m[be++];if($e<128){ve[_e++]=$e;continue}let Ie=S[$e];if(Ie>4)ve[_e++]=65533,be+=Ie-1;else{for($e&=Ie===2?31:Ie===3?15:7;Ie>1&&be<w;)$e=$e<<6|63&m[be++],Ie--;Ie>1?ve[_e++]=65533:$e<65536?ve[_e++]=$e:($e-=65536,ve[_e++]=55296|$e>>10&1023,ve[_e++]=56320|1023&$e)}}return(($e,Ie)=>{if(Ie<65534&&$e.subarray&&Bt)return String.fromCharCode.apply(null,$e.length===Ie?$e:$e.subarray(0,Ie));let gt="";for(let Ne=0;Ne<Ie;Ne++)gt+=String.fromCharCode($e[Ne]);return gt})(ve,_e)},Ve=(m,Y)=>{(Y=Y||m.length)>m.length&&(Y=m.length);let w=Y-1;for(;w>=0&&(192&m[w])==128;)w--;return w<0||w===0?Y:w+S[m[w]]>Y?w:Y},Le=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const yt=Object.prototype.toString,{Z_NO_FLUSH:lt,Z_SYNC_FLUSH:mt,Z_FULL_FLUSH:Rt,Z_FINISH:Pt,Z_OK:Ot,Z_STREAM_END:gr,Z_DEFAULT_COMPRESSION:Zt,Z_DEFAULT_STRATEGY:Cr,Z_DEFLATED:Ar}=rt;function Ur(m){this.options=Kr({level:Zt,method:Ar,chunkSize:16384,windowBits:15,memLevel:8,strategy:Cr},m||{});let Y=this.options;Y.raw&&Y.windowBits>0?Y.windowBits=-Y.windowBits:Y.gzip&&Y.windowBits>0&&Y.windowBits<16&&(Y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Le,this.strm.avail_out=0;let w=ur.deflateInit2(this.strm,Y.level,Y.method,Y.windowBits,Y.memLevel,Y.strategy);if(w!==Ot)throw new Error(Fe[w]);if(Y.header&&ur.deflateSetHeader(this.strm,Y.header),Y.dictionary){let be;if(be=typeof Y.dictionary=="string"?ne(Y.dictionary):yt.call(Y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(Y.dictionary):Y.dictionary,w=ur.deflateSetDictionary(this.strm,be),w!==Ot)throw new Error(Fe[w]);this._dict_set=!0}}function _r(m,Y){const w=new Ur(Y);if(w.push(m,!0),w.err)throw w.msg||Fe[w.err];return w.result}Ur.prototype.push=function(m,Y){const w=this.strm,be=this.options.chunkSize;let _e,ve;if(this.ended)return!1;for(ve=Y===~~Y?Y:Y===!0?Pt:lt,typeof m=="string"?w.input=ne(m):yt.call(m)==="[object ArrayBuffer]"?w.input=new Uint8Array(m):w.input=m,w.next_in=0,w.avail_in=w.input.length;;)if(w.avail_out===0&&(w.output=new Uint8Array(be),w.next_out=0,w.avail_out=be),(ve===mt||ve===Rt)&&w.avail_out<=6)this.onData(w.output.subarray(0,w.next_out)),w.avail_out=0;else{if(_e=ur.deflate(w,ve),_e===gr)return w.next_out>0&&this.onData(w.output.subarray(0,w.next_out)),_e=ur.deflateEnd(this.strm),this.onEnd(_e),this.ended=!0,_e===Ot;if(w.avail_out!==0){if(ve>0&&w.next_out>0)this.onData(w.output.subarray(0,w.next_out)),w.avail_out=0;else if(w.avail_in===0)break}else this.onData(w.output)}return!0},Ur.prototype.onData=function(m){this.chunks.push(m)},Ur.prototype.onEnd=function(m){m===Ot&&(this.result=qi(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg};var Or={Deflate:Ur,deflate:_r,deflateRaw:function(m,Y){return(Y=Y||{}).raw=!0,_r(m,Y)},gzip:function(m,Y){return(Y=Y||{}).gzip=!0,_r(m,Y)}};const wr=16209;var Ri=function(m,Y){let w,be,_e,ve,$e,Ie,gt,Ne,Xe,dr,Wt,_t,si,Rr,er,Ir,lr,At,sr,Pr,Dt,Sr,cr,tr;const fr=m.state;w=m.next_in,cr=m.input,be=w+(m.avail_in-5),_e=m.next_out,tr=m.output,ve=_e-(Y-m.avail_out),$e=_e+(m.avail_out-257),Ie=fr.dmax,gt=fr.wsize,Ne=fr.whave,Xe=fr.wnext,dr=fr.window,Wt=fr.hold,_t=fr.bits,si=fr.lencode,Rr=fr.distcode,er=(1<<fr.lenbits)-1,Ir=(1<<fr.distbits)-1;e:do{_t<15&&(Wt+=cr[w++]<<_t,_t+=8,Wt+=cr[w++]<<_t,_t+=8),lr=si[Wt&er];t:for(;;){if(At=lr>>>24,Wt>>>=At,_t-=At,At=lr>>>16&255,At===0)tr[_e++]=65535&lr;else{if(!(16&At)){if(64&At){if(32&At){fr.mode=16191;break e}m.msg="invalid literal/length code",fr.mode=wr;break e}lr=si[(65535&lr)+(Wt&(1<<At)-1)];continue t}for(sr=65535&lr,At&=15,At&&(_t<At&&(Wt+=cr[w++]<<_t,_t+=8),sr+=Wt&(1<<At)-1,Wt>>>=At,_t-=At),_t<15&&(Wt+=cr[w++]<<_t,_t+=8,Wt+=cr[w++]<<_t,_t+=8),lr=Rr[Wt&Ir];;){if(At=lr>>>24,Wt>>>=At,_t-=At,At=lr>>>16&255,16&At){if(Pr=65535&lr,At&=15,_t<At&&(Wt+=cr[w++]<<_t,_t+=8,_t<At&&(Wt+=cr[w++]<<_t,_t+=8)),Pr+=Wt&(1<<At)-1,Pr>Ie){m.msg="invalid distance too far back",fr.mode=wr;break e}if(Wt>>>=At,_t-=At,At=_e-ve,Pr>At){if(At=Pr-At,At>Ne&&fr.sane){m.msg="invalid distance too far back",fr.mode=wr;break e}if(Dt=0,Sr=dr,Xe===0){if(Dt+=gt-At,At<sr){sr-=At;do tr[_e++]=dr[Dt++];while(--At);Dt=_e-Pr,Sr=tr}}else if(Xe<At){if(Dt+=gt+Xe-At,At-=Xe,At<sr){sr-=At;do tr[_e++]=dr[Dt++];while(--At);if(Dt=0,Xe<sr){At=Xe,sr-=At;do tr[_e++]=dr[Dt++];while(--At);Dt=_e-Pr,Sr=tr}}}else if(Dt+=Xe-At,At<sr){sr-=At;do tr[_e++]=dr[Dt++];while(--At);Dt=_e-Pr,Sr=tr}for(;sr>2;)tr[_e++]=Sr[Dt++],tr[_e++]=Sr[Dt++],tr[_e++]=Sr[Dt++],sr-=3;sr&&(tr[_e++]=Sr[Dt++],sr>1&&(tr[_e++]=Sr[Dt++]))}else{Dt=_e-Pr;do tr[_e++]=tr[Dt++],tr[_e++]=tr[Dt++],tr[_e++]=tr[Dt++],sr-=3;while(sr>2);sr&&(tr[_e++]=tr[Dt++],sr>1&&(tr[_e++]=tr[Dt++]))}break}if(64&At){m.msg="invalid distance code",fr.mode=wr;break e}lr=Rr[(65535&lr)+(Wt&(1<<At)-1)]}}break}}while(w<be&&_e<$e);sr=_t>>3,w-=sr,_t-=sr<<3,Wt&=(1<<_t)-1,m.next_in=w,m.next_out=_e,m.avail_in=w<be?be-w+5:5-(w-be),m.avail_out=_e<$e?$e-_e+257:257-(_e-$e),fr.hold=Wt,fr.bits=_t};const Qt=15,ri=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ae=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),o=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var c=(m,Y,w,be,_e,ve,$e,Ie)=>{const gt=Ie.bits;let Ne,Xe,dr,Wt,_t,si,Rr=0,er=0,Ir=0,lr=0,At=0,sr=0,Pr=0,Dt=0,Sr=0,cr=0,tr=null;const fr=new Uint16Array(16),Li=new Uint16Array(16);let Wn,os,$n,Xn=null;for(Rr=0;Rr<=Qt;Rr++)fr[Rr]=0;for(er=0;er<be;er++)fr[Y[w+er]]++;for(At=gt,lr=Qt;lr>=1&&fr[lr]===0;lr--);if(At>lr&&(At=lr),lr===0)return _e[ve++]=20971520,_e[ve++]=20971520,Ie.bits=1,0;for(Ir=1;Ir<lr&&fr[Ir]===0;Ir++);for(At<Ir&&(At=Ir),Dt=1,Rr=1;Rr<=Qt;Rr++)if(Dt<<=1,Dt-=fr[Rr],Dt<0)return-1;if(Dt>0&&(m===0||lr!==1))return-1;for(Li[1]=0,Rr=1;Rr<Qt;Rr++)Li[Rr+1]=Li[Rr]+fr[Rr];for(er=0;er<be;er++)Y[w+er]!==0&&($e[Li[Y[w+er]]++]=er);if(m===0?(tr=Xn=$e,si=20):m===1?(tr=ri,Xn=ae,si=257):(tr=n,Xn=o,si=0),cr=0,er=0,Rr=Ir,_t=ve,sr=At,Pr=0,dr=-1,Sr=1<<At,Wt=Sr-1,m===1&&Sr>852||m===2&&Sr>592)return 1;for(;;){Wn=Rr-Pr,$e[er]+1<si?(os=0,$n=$e[er]):$e[er]>=si?(os=Xn[$e[er]-si],$n=tr[$e[er]-si]):(os=96,$n=0),Ne=1<<Rr-Pr,Xe=1<<sr,Ir=Xe;do Xe-=Ne,_e[_t+(cr>>Pr)+Xe]=Wn<<24|os<<16|$n;while(Xe!==0);for(Ne=1<<Rr-1;cr&Ne;)Ne>>=1;if(Ne!==0?(cr&=Ne-1,cr+=Ne):cr=0,er++,--fr[Rr]===0){if(Rr===lr)break;Rr=Y[w+$e[er]]}if(Rr>At&&(cr&Wt)!==dr){for(Pr===0&&(Pr=At),_t+=Ir,sr=Rr-Pr,Dt=1<<sr;sr+Pr<lr&&(Dt-=fr[sr+Pr],!(Dt<=0));)sr++,Dt<<=1;if(Sr+=1<<sr,m===1&&Sr>852||m===2&&Sr>592)return 1;dr=cr&Wt,_e[dr]=At<<24|sr<<16|_t-ve}}return cr!==0&&(_e[_t+cr]=Rr-Pr<<24|64<<16),Ie.bits=At,0};const{Z_FINISH:f,Z_BLOCK:T,Z_TREES:x,Z_OK:M,Z_STREAM_END:k,Z_NEED_DICT:A,Z_STREAM_ERROR:P,Z_DATA_ERROR:L,Z_MEM_ERROR:W,Z_BUF_ERROR:U,Z_DEFLATED:V}=rt,H=16180,G=16190,Z=16191,te=16192,re=16194,de=16199,le=16200,ye=16206,ke=16209,Te=m=>(m>>>24&255)+(m>>>8&65280)+((65280&m)<<8)+((255&m)<<24);function Re(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const we=m=>{if(!m)return 1;const Y=m.state;return!Y||Y.strm!==m||Y.mode<H||Y.mode>16211?1:0},Ue=m=>{if(we(m))return P;const Y=m.state;return m.total_in=m.total_out=Y.total=0,m.msg="",Y.wrap&&(m.adler=1&Y.wrap),Y.mode=H,Y.last=0,Y.havedict=0,Y.flags=-1,Y.dmax=32768,Y.head=null,Y.hold=0,Y.bits=0,Y.lencode=Y.lendyn=new Int32Array(852),Y.distcode=Y.distdyn=new Int32Array(592),Y.sane=1,Y.back=-1,M},Je=m=>{if(we(m))return P;const Y=m.state;return Y.wsize=0,Y.whave=0,Y.wnext=0,Ue(m)},tt=(m,Y)=>{let w;if(we(m))return P;const be=m.state;return Y<0?(w=0,Y=-Y):(w=5+(Y>>4),Y<48&&(Y&=15)),Y&&(Y<8||Y>15)?P:(be.window!==null&&be.wbits!==Y&&(be.window=null),be.wrap=w,be.wbits=Y,Je(m))},Ze=(m,Y)=>{if(!m)return P;const w=new Re;m.state=w,w.strm=m,w.window=null,w.mode=H;const be=tt(m,Y);return be!==M&&(m.state=null),be};let ut,ft,Qe=!0;const pt=m=>{if(Qe){ut=new Int32Array(512),ft=new Int32Array(32);let Y=0;for(;Y<144;)m.lens[Y++]=8;for(;Y<256;)m.lens[Y++]=9;for(;Y<280;)m.lens[Y++]=7;for(;Y<288;)m.lens[Y++]=8;for(c(1,m.lens,0,288,ut,0,m.work,{bits:9}),Y=0;Y<32;)m.lens[Y++]=5;c(2,m.lens,0,32,ft,0,m.work,{bits:5}),Qe=!1}m.lencode=ut,m.lenbits=9,m.distcode=ft,m.distbits=5},Be=(m,Y,w,be)=>{let _e;const ve=m.state;return ve.window===null&&(ve.wsize=1<<ve.wbits,ve.wnext=0,ve.whave=0,ve.window=new Uint8Array(ve.wsize)),be>=ve.wsize?(ve.window.set(Y.subarray(w-ve.wsize,w),0),ve.wnext=0,ve.whave=ve.wsize):(_e=ve.wsize-ve.wnext,_e>be&&(_e=be),ve.window.set(Y.subarray(w-be,w-be+_e),ve.wnext),(be-=_e)?(ve.window.set(Y.subarray(w-be,w),0),ve.wnext=be,ve.whave=ve.wsize):(ve.wnext+=_e,ve.wnext===ve.wsize&&(ve.wnext=0),ve.whave<ve.wsize&&(ve.whave+=_e))),0};var et={inflateReset:Je,inflateReset2:tt,inflateResetKeep:Ue,inflateInit:m=>Ze(m,15),inflateInit2:Ze,inflate:(m,Y)=>{let w,be,_e,ve,$e,Ie,gt,Ne,Xe,dr,Wt,_t,si,Rr,er,Ir,lr,At,sr,Pr,Dt,Sr,cr=0;const tr=new Uint8Array(4);let fr,Li;const Wn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(we(m)||!m.output||!m.input&&m.avail_in!==0)return P;w=m.state,w.mode===Z&&(w.mode=te),$e=m.next_out,_e=m.output,gt=m.avail_out,ve=m.next_in,be=m.input,Ie=m.avail_in,Ne=w.hold,Xe=w.bits,dr=Ie,Wt=gt,Sr=M;e:for(;;)switch(w.mode){case H:if(w.wrap===0){w.mode=te;break}for(;Xe<16;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(2&w.wrap&&Ne===35615){w.wbits===0&&(w.wbits=15),w.check=0,tr[0]=255&Ne,tr[1]=Ne>>>8&255,w.check=qe(w.check,tr,2,0),Ne=0,Xe=0,w.mode=16181;break}if(w.head&&(w.head.done=!1),!(1&w.wrap)||(((255&Ne)<<8)+(Ne>>8))%31){m.msg="incorrect header check",w.mode=ke;break}if((15&Ne)!==V){m.msg="unknown compression method",w.mode=ke;break}if(Ne>>>=4,Xe-=4,Dt=8+(15&Ne),w.wbits===0&&(w.wbits=Dt),Dt>15||Dt>w.wbits){m.msg="invalid window size",w.mode=ke;break}w.dmax=1<<w.wbits,w.flags=0,m.adler=w.check=1,w.mode=512&Ne?16189:Z,Ne=0,Xe=0;break;case 16181:for(;Xe<16;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(w.flags=Ne,(255&w.flags)!==V){m.msg="unknown compression method",w.mode=ke;break}if(57344&w.flags){m.msg="unknown header flags set",w.mode=ke;break}w.head&&(w.head.text=Ne>>8&1),512&w.flags&&4&w.wrap&&(tr[0]=255&Ne,tr[1]=Ne>>>8&255,w.check=qe(w.check,tr,2,0)),Ne=0,Xe=0,w.mode=16182;case 16182:for(;Xe<32;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}w.head&&(w.head.time=Ne),512&w.flags&&4&w.wrap&&(tr[0]=255&Ne,tr[1]=Ne>>>8&255,tr[2]=Ne>>>16&255,tr[3]=Ne>>>24&255,w.check=qe(w.check,tr,4,0)),Ne=0,Xe=0,w.mode=16183;case 16183:for(;Xe<16;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}w.head&&(w.head.xflags=255&Ne,w.head.os=Ne>>8),512&w.flags&&4&w.wrap&&(tr[0]=255&Ne,tr[1]=Ne>>>8&255,w.check=qe(w.check,tr,2,0)),Ne=0,Xe=0,w.mode=16184;case 16184:if(1024&w.flags){for(;Xe<16;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}w.length=Ne,w.head&&(w.head.extra_len=Ne),512&w.flags&&4&w.wrap&&(tr[0]=255&Ne,tr[1]=Ne>>>8&255,w.check=qe(w.check,tr,2,0)),Ne=0,Xe=0}else w.head&&(w.head.extra=null);w.mode=16185;case 16185:if(1024&w.flags&&(_t=w.length,_t>Ie&&(_t=Ie),_t&&(w.head&&(Dt=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Uint8Array(w.head.extra_len)),w.head.extra.set(be.subarray(ve,ve+_t),Dt)),512&w.flags&&4&w.wrap&&(w.check=qe(w.check,be,_t,ve)),Ie-=_t,ve+=_t,w.length-=_t),w.length))break e;w.length=0,w.mode=16186;case 16186:if(2048&w.flags){if(Ie===0)break e;_t=0;do Dt=be[ve+_t++],w.head&&Dt&&w.length<65536&&(w.head.name+=String.fromCharCode(Dt));while(Dt&&_t<Ie);if(512&w.flags&&4&w.wrap&&(w.check=qe(w.check,be,_t,ve)),Ie-=_t,ve+=_t,Dt)break e}else w.head&&(w.head.name=null);w.length=0,w.mode=16187;case 16187:if(4096&w.flags){if(Ie===0)break e;_t=0;do Dt=be[ve+_t++],w.head&&Dt&&w.length<65536&&(w.head.comment+=String.fromCharCode(Dt));while(Dt&&_t<Ie);if(512&w.flags&&4&w.wrap&&(w.check=qe(w.check,be,_t,ve)),Ie-=_t,ve+=_t,Dt)break e}else w.head&&(w.head.comment=null);w.mode=16188;case 16188:if(512&w.flags){for(;Xe<16;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(4&w.wrap&&Ne!==(65535&w.check)){m.msg="header crc mismatch",w.mode=ke;break}Ne=0,Xe=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0),m.adler=w.check=0,w.mode=Z;break;case 16189:for(;Xe<32;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}m.adler=w.check=Te(Ne),Ne=0,Xe=0,w.mode=G;case G:if(w.havedict===0)return m.next_out=$e,m.avail_out=gt,m.next_in=ve,m.avail_in=Ie,w.hold=Ne,w.bits=Xe,A;m.adler=w.check=1,w.mode=Z;case Z:if(Y===T||Y===x)break e;case te:if(w.last){Ne>>>=7&Xe,Xe-=7&Xe,w.mode=ye;break}for(;Xe<3;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}switch(w.last=1&Ne,Ne>>>=1,Xe-=1,3&Ne){case 0:w.mode=16193;break;case 1:if(pt(w),w.mode=de,Y===x){Ne>>>=2,Xe-=2;break e}break;case 2:w.mode=16196;break;case 3:m.msg="invalid block type",w.mode=ke}Ne>>>=2,Xe-=2;break;case 16193:for(Ne>>>=7&Xe,Xe-=7&Xe;Xe<32;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if((65535&Ne)!=(Ne>>>16^65535)){m.msg="invalid stored block lengths",w.mode=ke;break}if(w.length=65535&Ne,Ne=0,Xe=0,w.mode=re,Y===x)break e;case re:w.mode=16195;case 16195:if(_t=w.length,_t){if(_t>Ie&&(_t=Ie),_t>gt&&(_t=gt),_t===0)break e;_e.set(be.subarray(ve,ve+_t),$e),Ie-=_t,ve+=_t,gt-=_t,$e+=_t,w.length-=_t;break}w.mode=Z;break;case 16196:for(;Xe<14;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(w.nlen=257+(31&Ne),Ne>>>=5,Xe-=5,w.ndist=1+(31&Ne),Ne>>>=5,Xe-=5,w.ncode=4+(15&Ne),Ne>>>=4,Xe-=4,w.nlen>286||w.ndist>30){m.msg="too many length or distance symbols",w.mode=ke;break}w.have=0,w.mode=16197;case 16197:for(;w.have<w.ncode;){for(;Xe<3;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}w.lens[Wn[w.have++]]=7&Ne,Ne>>>=3,Xe-=3}for(;w.have<19;)w.lens[Wn[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,fr={bits:w.lenbits},Sr=c(0,w.lens,0,19,w.lencode,0,w.work,fr),w.lenbits=fr.bits,Sr){m.msg="invalid code lengths set",w.mode=ke;break}w.have=0,w.mode=16198;case 16198:for(;w.have<w.nlen+w.ndist;){for(;cr=w.lencode[Ne&(1<<w.lenbits)-1],er=cr>>>24,Ir=cr>>>16&255,lr=65535&cr,!(er<=Xe);){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(lr<16)Ne>>>=er,Xe-=er,w.lens[w.have++]=lr;else{if(lr===16){for(Li=er+2;Xe<Li;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(Ne>>>=er,Xe-=er,w.have===0){m.msg="invalid bit length repeat",w.mode=ke;break}Dt=w.lens[w.have-1],_t=3+(3&Ne),Ne>>>=2,Xe-=2}else if(lr===17){for(Li=er+3;Xe<Li;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}Ne>>>=er,Xe-=er,Dt=0,_t=3+(7&Ne),Ne>>>=3,Xe-=3}else{for(Li=er+7;Xe<Li;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}Ne>>>=er,Xe-=er,Dt=0,_t=11+(127&Ne),Ne>>>=7,Xe-=7}if(w.have+_t>w.nlen+w.ndist){m.msg="invalid bit length repeat",w.mode=ke;break}for(;_t--;)w.lens[w.have++]=Dt}}if(w.mode===ke)break;if(w.lens[256]===0){m.msg="invalid code -- missing end-of-block",w.mode=ke;break}if(w.lenbits=9,fr={bits:w.lenbits},Sr=c(1,w.lens,0,w.nlen,w.lencode,0,w.work,fr),w.lenbits=fr.bits,Sr){m.msg="invalid literal/lengths set",w.mode=ke;break}if(w.distbits=6,w.distcode=w.distdyn,fr={bits:w.distbits},Sr=c(2,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,fr),w.distbits=fr.bits,Sr){m.msg="invalid distances set",w.mode=ke;break}if(w.mode=de,Y===x)break e;case de:w.mode=le;case le:if(Ie>=6&&gt>=258){m.next_out=$e,m.avail_out=gt,m.next_in=ve,m.avail_in=Ie,w.hold=Ne,w.bits=Xe,Ri(m,Wt),$e=m.next_out,_e=m.output,gt=m.avail_out,ve=m.next_in,be=m.input,Ie=m.avail_in,Ne=w.hold,Xe=w.bits,w.mode===Z&&(w.back=-1);break}for(w.back=0;cr=w.lencode[Ne&(1<<w.lenbits)-1],er=cr>>>24,Ir=cr>>>16&255,lr=65535&cr,!(er<=Xe);){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(Ir&&!(240&Ir)){for(At=er,sr=Ir,Pr=lr;cr=w.lencode[Pr+((Ne&(1<<At+sr)-1)>>At)],er=cr>>>24,Ir=cr>>>16&255,lr=65535&cr,!(At+er<=Xe);){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}Ne>>>=At,Xe-=At,w.back+=At}if(Ne>>>=er,Xe-=er,w.back+=er,w.length=lr,Ir===0){w.mode=16205;break}if(32&Ir){w.back=-1,w.mode=Z;break}if(64&Ir){m.msg="invalid literal/length code",w.mode=ke;break}w.extra=15&Ir,w.mode=16201;case 16201:if(w.extra){for(Li=w.extra;Xe<Li;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}w.length+=Ne&(1<<w.extra)-1,Ne>>>=w.extra,Xe-=w.extra,w.back+=w.extra}w.was=w.length,w.mode=16202;case 16202:for(;cr=w.distcode[Ne&(1<<w.distbits)-1],er=cr>>>24,Ir=cr>>>16&255,lr=65535&cr,!(er<=Xe);){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(!(240&Ir)){for(At=er,sr=Ir,Pr=lr;cr=w.distcode[Pr+((Ne&(1<<At+sr)-1)>>At)],er=cr>>>24,Ir=cr>>>16&255,lr=65535&cr,!(At+er<=Xe);){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}Ne>>>=At,Xe-=At,w.back+=At}if(Ne>>>=er,Xe-=er,w.back+=er,64&Ir){m.msg="invalid distance code",w.mode=ke;break}w.offset=lr,w.extra=15&Ir,w.mode=16203;case 16203:if(w.extra){for(Li=w.extra;Xe<Li;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}w.offset+=Ne&(1<<w.extra)-1,Ne>>>=w.extra,Xe-=w.extra,w.back+=w.extra}if(w.offset>w.dmax){m.msg="invalid distance too far back",w.mode=ke;break}w.mode=16204;case 16204:if(gt===0)break e;if(_t=Wt-gt,w.offset>_t){if(_t=w.offset-_t,_t>w.whave&&w.sane){m.msg="invalid distance too far back",w.mode=ke;break}_t>w.wnext?(_t-=w.wnext,si=w.wsize-_t):si=w.wnext-_t,_t>w.length&&(_t=w.length),Rr=w.window}else Rr=_e,si=$e-w.offset,_t=w.length;_t>gt&&(_t=gt),gt-=_t,w.length-=_t;do _e[$e++]=Rr[si++];while(--_t);w.length===0&&(w.mode=le);break;case 16205:if(gt===0)break e;_e[$e++]=w.length,gt--,w.mode=le;break;case ye:if(w.wrap){for(;Xe<32;){if(Ie===0)break e;Ie--,Ne|=be[ve++]<<Xe,Xe+=8}if(Wt-=gt,m.total_out+=Wt,w.total+=Wt,4&w.wrap&&Wt&&(m.adler=w.check=w.flags?qe(w.check,_e,Wt,$e-Wt):Ce(w.check,_e,Wt,$e-Wt)),Wt=gt,4&w.wrap&&(w.flags?Ne:Te(Ne))!==w.check){m.msg="incorrect data check",w.mode=ke;break}Ne=0,Xe=0}w.mode=16207;case 16207:if(w.wrap&&w.flags){for(;Xe<32;){if(Ie===0)break e;Ie--,Ne+=be[ve++]<<Xe,Xe+=8}if(4&w.wrap&&Ne!==(4294967295&w.total)){m.msg="incorrect length check",w.mode=ke;break}Ne=0,Xe=0}w.mode=16208;case 16208:Sr=k;break e;case ke:Sr=L;break e;case 16210:return W;default:return P}return m.next_out=$e,m.avail_out=gt,m.next_in=ve,m.avail_in=Ie,w.hold=Ne,w.bits=Xe,(w.wsize||Wt!==m.avail_out&&w.mode<ke&&(w.mode<ye||Y!==f))&&Be(m,m.output,m.next_out,Wt-m.avail_out),dr-=m.avail_in,Wt-=m.avail_out,m.total_in+=dr,m.total_out+=Wt,w.total+=Wt,4&w.wrap&&Wt&&(m.adler=w.check=w.flags?qe(w.check,_e,Wt,m.next_out-Wt):Ce(w.check,_e,Wt,m.next_out-Wt)),m.data_type=w.bits+(w.last?64:0)+(w.mode===Z?128:0)+(w.mode===de||w.mode===re?256:0),(dr===0&&Wt===0||Y===f)&&Sr===M&&(Sr=U),Sr},inflateEnd:m=>{if(we(m))return P;let Y=m.state;return Y.window&&(Y.window=null),m.state=null,M},inflateGetHeader:(m,Y)=>{if(we(m))return P;const w=m.state;return 2&w.wrap?(w.head=Y,Y.done=!1,M):P},inflateSetDictionary:(m,Y)=>{const w=Y.length;let be,_e,ve;return we(m)?P:(be=m.state,be.wrap!==0&&be.mode!==G?P:be.mode===G&&(_e=1,_e=Ce(_e,Y,w,0),_e!==be.check)?L:(ve=Be(m,Y,w,w),ve?(be.mode=16210,W):(be.havedict=1,M)))},inflateInfo:"pako inflate (from Nodeca project)"},St=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const st=Object.prototype.toString,{Z_NO_FLUSH:wt,Z_FINISH:Et,Z_OK:it,Z_STREAM_END:kt,Z_NEED_DICT:Ht,Z_STREAM_ERROR:Mt,Z_DATA_ERROR:ct,Z_MEM_ERROR:Jt}=rt;function Nt(m){this.options=Kr({chunkSize:65536,windowBits:15,to:""},m||{});const Y=this.options;Y.raw&&Y.windowBits>=0&&Y.windowBits<16&&(Y.windowBits=-Y.windowBits,Y.windowBits===0&&(Y.windowBits=-15)),!(Y.windowBits>=0&&Y.windowBits<16)||m&&m.windowBits||(Y.windowBits+=32),Y.windowBits>15&&Y.windowBits<48&&(15&Y.windowBits||(Y.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Le,this.strm.avail_out=0;let w=et.inflateInit2(this.strm,Y.windowBits);if(w!==it)throw new Error(Fe[w]);if(this.header=new St,et.inflateGetHeader(this.strm,this.header),Y.dictionary&&(typeof Y.dictionary=="string"?Y.dictionary=ne(Y.dictionary):st.call(Y.dictionary)==="[object ArrayBuffer]"&&(Y.dictionary=new Uint8Array(Y.dictionary)),Y.raw&&(w=et.inflateSetDictionary(this.strm,Y.dictionary),w!==it)))throw new Error(Fe[w])}function qt(m,Y){const w=new Nt(Y);if(w.push(m),w.err)throw w.msg||Fe[w.err];return w.result}Nt.prototype.push=function(m,Y){const w=this.strm,be=this.options.chunkSize,_e=this.options.dictionary;let ve,$e,Ie;if(this.ended)return!1;for($e=Y===~~Y?Y:Y===!0?Et:wt,st.call(m)==="[object ArrayBuffer]"?w.input=new Uint8Array(m):w.input=m,w.next_in=0,w.avail_in=w.input.length;;){for(w.avail_out===0&&(w.output=new Uint8Array(be),w.next_out=0,w.avail_out=be),ve=et.inflate(w,$e),ve===Ht&&_e&&(ve=et.inflateSetDictionary(w,_e),ve===it?ve=et.inflate(w,$e):ve===ct&&(ve=Ht));w.avail_in>0&&ve===kt&&w.state.wrap>0&&m[w.next_in]!==0;)et.inflateReset(w),ve=et.inflate(w,$e);switch(ve){case Mt:case ct:case Ht:case Jt:return this.onEnd(ve),this.ended=!0,!1}if(Ie=w.avail_out,w.next_out&&(w.avail_out===0||ve===kt))if(this.options.to==="string"){let gt=Ve(w.output,w.next_out),Ne=w.next_out-gt,Xe=xe(w.output,gt);w.next_out=Ne,w.avail_out=be-Ne,Ne&&w.output.set(w.output.subarray(gt,gt+Ne),0),this.onData(Xe)}else this.onData(w.output.length===w.next_out?w.output:w.output.subarray(0,w.next_out));if(ve!==it||Ie!==0){if(ve===kt)return ve=et.inflateEnd(this.strm),this.onEnd(ve),this.ended=!0,!0;if(w.avail_in===0)break}}return!0},Nt.prototype.onData=function(m){this.chunks.push(m)},Nt.prototype.onEnd=function(m){m===it&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=qi(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg};var Vt={Inflate:Nt,inflate:qt,inflateRaw:function(m,Y){return(Y=Y||{}).raw=!0,qt(m,Y)},ungzip:qt};const{Deflate:Xt,deflate:yr,deflateRaw:Fr,gzip:Tr}=Or,{Inflate:ii,inflate:Wr,inflateRaw:br,ungzip:$r}=Vt;var ci=Xt,ni=yr,hi=Fr,Ii=Tr,xi=ii,zi=Wr,Hr=br,Xr=$r,qr=rt,ei={Deflate:Xt,deflate:yr,deflateRaw:Fr,gzip:Tr,Inflate:ii,inflate:Wr,inflateRaw:br,ungzip:$r,constants:rt}},99:(t,i,s)=>{s.r(i),s.d(i,{Cylinder:()=>l,Sphere:()=>h,Triangle:()=>d});var u=s(529);class h{constructor(E={x:0,y:0,z:0},v=0){this.center=new u.Vector3(E.x,E.y,E.z),this.radius=v}set(E,v){return this.center.copy(E),this.radius=v,this}copy(E){return this.center.copy(E.center),this.radius=E.radius,this}applyMatrix4(E){return this.center.applyMatrix4(E),this.radius=this.radius*E.getMaxScaleOnAxis(),this}translate(E){return this.center.add(E),this}equals(E){return E.center.equals(this.center)&&E.radius===this.radius}clone(){return new h().copy(this)}}let _=new u.Vector3;class l{constructor(E=new u.Vector3,v=new u.Vector3,R=0){this.c1=E,this.c2=v,this.radius=R,this.direction=new u.Vector3().subVectors(this.c2,this.c1).normalize()}copy(E){return this.c1.copy(E.c1),this.c2.copy(E.c2),this.direction.copy(E.direction),this.radius=E.radius,this}lengthSq(){return _.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(E){return this.direction.add(this.c1).applyMatrix4(E),this.c1.applyMatrix4(E),this.c2.applyMatrix4(E),this.direction.sub(this.c1).normalize(),this.radius=this.radius*E.getMaxScaleOnAxis(),this}}const g=new u.Vector3;class d{constructor(E=new u.Vector3,v=new u.Vector3,R=new u.Vector3){this.a=E,this.b=v,this.c=R}copy(E){return this.a.copy(E.a),this.b.copy(E.b),this.c.copy(E.c),this}applyMatrix4(E){return this.a.applyMatrix4(E),this.b.applyMatrix4(E),this.c.applyMatrix4(E),this}getNormal(){var E=this.a.clone();return E.sub(this.b),g.subVectors(this.c,this.b),E.cross(g),E.normalize(),E}}},107:(t,i,s)=>{var u,h=s(981),_=s(697),l=s(701),g=s(407),d=s(834),y=-2,E=258,v=262,R=103,z=113,C=666;function I(O,he){return O.msg=d[he],he}function K(O){return(O<<1)-(O>4?9:0)}function J(O){for(var he=O.length;--he>=0;)O[he]=0}function X(O){var he=O.state,se=he.pending;se>O.avail_out&&(se=O.avail_out),se!==0&&(h.arraySet(O.output,he.pending_buf,he.pending_out,se,O.next_out),O.next_out+=se,he.pending_out+=se,O.total_out+=se,O.avail_out-=se,he.pending-=se,he.pending===0&&(he.pending_out=0))}function b(O,he){_._tr_flush_block(O,O.block_start>=0?O.block_start:-1,O.strstart-O.block_start,he),O.block_start=O.strstart,X(O.strm)}function F(O,he){O.pending_buf[O.pending++]=he}function B(O,he){O.pending_buf[O.pending++]=he>>>8&255,O.pending_buf[O.pending++]=255&he}function $(O,he,se,q){var Pe=O.avail_in;return Pe>q&&(Pe=q),Pe===0?0:(O.avail_in-=Pe,h.arraySet(he,O.input,O.next_in,Pe,se),O.state.wrap===1?O.adler=l(O.adler,he,Pe,se):O.state.wrap===2&&(O.adler=g(O.adler,he,Pe,se)),O.next_in+=Pe,O.total_in+=Pe,Pe)}function Q(O,he){var se,q,Pe=O.max_chain_length,fe=O.strstart,De=O.prev_length,He=O.nice_match,oe=O.strstart>O.w_size-v?O.strstart-(O.w_size-v):0,Ce=O.window,We=O.w_mask,qe=O.prev,Fe=O.strstart+E,rt=Ce[fe+De-1],ot=Ce[fe+De];O.prev_length>=O.good_match&&(Pe>>=2),He>O.lookahead&&(He=O.lookahead);do if(Ce[(se=he)+De]===ot&&Ce[se+De-1]===rt&&Ce[se]===Ce[fe]&&Ce[++se]===Ce[fe+1]){fe+=2,se++;do;while(Ce[++fe]===Ce[++se]&&Ce[++fe]===Ce[++se]&&Ce[++fe]===Ce[++se]&&Ce[++fe]===Ce[++se]&&Ce[++fe]===Ce[++se]&&Ce[++fe]===Ce[++se]&&Ce[++fe]===Ce[++se]&&Ce[++fe]===Ce[++se]&&fe<Fe);if(q=E-(Fe-fe),fe=Fe-E,q>De){if(O.match_start=he,De=q,q>=He)break;rt=Ce[fe+De-1],ot=Ce[fe+De]}}while((he=qe[he&We])>oe&&--Pe!==0);return De<=O.lookahead?De:O.lookahead}function N(O){var he,se,q,Pe,fe,De=O.w_size;do{if(Pe=O.window_size-O.lookahead-O.strstart,O.strstart>=De+(De-v)){h.arraySet(O.window,O.window,De,De,0),O.match_start-=De,O.strstart-=De,O.block_start-=De,he=se=O.hash_size;do q=O.head[--he],O.head[he]=q>=De?q-De:0;while(--se);he=se=De;do q=O.prev[--he],O.prev[he]=q>=De?q-De:0;while(--se);Pe+=De}if(O.strm.avail_in===0)break;if(se=$(O.strm,O.window,O.strstart+O.lookahead,Pe),O.lookahead+=se,O.lookahead+O.insert>=3)for(fe=O.strstart-O.insert,O.ins_h=O.window[fe],O.ins_h=(O.ins_h<<O.hash_shift^O.window[fe+1])&O.hash_mask;O.insert&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[fe+3-1])&O.hash_mask,O.prev[fe&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=fe,fe++,O.insert--,!(O.lookahead+O.insert<3)););}while(O.lookahead<v&&O.strm.avail_in!==0)}function ee(O,he){for(var se,q;;){if(O.lookahead<v){if(N(O),O.lookahead<v&&he===0)return 1;if(O.lookahead===0)break}if(se=0,O.lookahead>=3&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+3-1])&O.hash_mask,se=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),se!==0&&O.strstart-se<=O.w_size-v&&(O.match_length=Q(O,se)),O.match_length>=3)if(q=_._tr_tally(O,O.strstart-O.match_start,O.match_length-3),O.lookahead-=O.match_length,O.match_length<=O.max_lazy_match&&O.lookahead>=3){O.match_length--;do O.strstart++,O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+3-1])&O.hash_mask,se=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart;while(--O.match_length!==0);O.strstart++}else O.strstart+=O.match_length,O.match_length=0,O.ins_h=O.window[O.strstart],O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+1])&O.hash_mask;else q=_._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++;if(q&&(b(O,!1),O.strm.avail_out===0))return 1}return O.insert=O.strstart<2?O.strstart:2,he===4?(b(O,!0),O.strm.avail_out===0?3:4):O.last_lit&&(b(O,!1),O.strm.avail_out===0)?1:2}function Se(O,he){for(var se,q,Pe;;){if(O.lookahead<v){if(N(O),O.lookahead<v&&he===0)return 1;if(O.lookahead===0)break}if(se=0,O.lookahead>=3&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+3-1])&O.hash_mask,se=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),O.prev_length=O.match_length,O.prev_match=O.match_start,O.match_length=2,se!==0&&O.prev_length<O.max_lazy_match&&O.strstart-se<=O.w_size-v&&(O.match_length=Q(O,se),O.match_length<=5&&(O.strategy===1||O.match_length===3&&O.strstart-O.match_start>4096)&&(O.match_length=2)),O.prev_length>=3&&O.match_length<=O.prev_length){Pe=O.strstart+O.lookahead-3,q=_._tr_tally(O,O.strstart-1-O.prev_match,O.prev_length-3),O.lookahead-=O.prev_length-1,O.prev_length-=2;do++O.strstart<=Pe&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+3-1])&O.hash_mask,se=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart);while(--O.prev_length!==0);if(O.match_available=0,O.match_length=2,O.strstart++,q&&(b(O,!1),O.strm.avail_out===0))return 1}else if(O.match_available){if((q=_._tr_tally(O,0,O.window[O.strstart-1]))&&b(O,!1),O.strstart++,O.lookahead--,O.strm.avail_out===0)return 1}else O.match_available=1,O.strstart++,O.lookahead--}return O.match_available&&(q=_._tr_tally(O,0,O.window[O.strstart-1]),O.match_available=0),O.insert=O.strstart<2?O.strstart:2,he===4?(b(O,!0),O.strm.avail_out===0?3:4):O.last_lit&&(b(O,!1),O.strm.avail_out===0)?1:2}function ue(O,he,se,q,Pe){this.good_length=O,this.max_lazy=he,this.nice_length=se,this.max_chain=q,this.func=Pe}function ge(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new h.Buf16(1146),this.dyn_dtree=new h.Buf16(122),this.bl_tree=new h.Buf16(78),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new h.Buf16(16),this.heap=new h.Buf16(573),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new h.Buf16(573),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function me(O){var he;return O&&O.state?(O.total_in=O.total_out=0,O.data_type=2,(he=O.state).pending=0,he.pending_out=0,he.wrap<0&&(he.wrap=-he.wrap),he.status=he.wrap?42:z,O.adler=he.wrap===2?0:1,he.last_flush=0,_._tr_init(he),0):I(O,y)}function Me(O){var he,se=me(O);return se===0&&((he=O.state).window_size=2*he.w_size,J(he.head),he.max_lazy_match=u[he.level].max_lazy,he.good_match=u[he.level].good_length,he.nice_match=u[he.level].nice_length,he.max_chain_length=u[he.level].max_chain,he.strstart=0,he.block_start=0,he.lookahead=0,he.insert=0,he.match_length=he.prev_length=2,he.match_available=0,he.ins_h=0),se}function ce(O,he,se,q,Pe,fe){if(!O)return y;var De=1;if(he===-1&&(he=6),q<0?(De=0,q=-q):q>15&&(De=2,q-=16),Pe<1||Pe>9||se!==8||q<8||q>15||he<0||he>9||fe<0||fe>4)return I(O,y);q===8&&(q=9);var He=new ge;return O.state=He,He.strm=O,He.wrap=De,He.gzhead=null,He.w_bits=q,He.w_size=1<<He.w_bits,He.w_mask=He.w_size-1,He.hash_bits=Pe+7,He.hash_size=1<<He.hash_bits,He.hash_mask=He.hash_size-1,He.hash_shift=~~((He.hash_bits+3-1)/3),He.window=new h.Buf8(2*He.w_size),He.head=new h.Buf16(He.hash_size),He.prev=new h.Buf16(He.w_size),He.lit_bufsize=1<<Pe+6,He.pending_buf_size=4*He.lit_bufsize,He.pending_buf=new h.Buf8(He.pending_buf_size),He.d_buf=1*He.lit_bufsize,He.l_buf=3*He.lit_bufsize,He.level=he,He.strategy=fe,He.method=se,Me(O)}u=[new ue(0,0,0,0,function(O,he){var se=65535;for(se>O.pending_buf_size-5&&(se=O.pending_buf_size-5);;){if(O.lookahead<=1){if(N(O),O.lookahead===0&&he===0)return 1;if(O.lookahead===0)break}O.strstart+=O.lookahead,O.lookahead=0;var q=O.block_start+se;if((O.strstart===0||O.strstart>=q)&&(O.lookahead=O.strstart-q,O.strstart=q,b(O,!1),O.strm.avail_out===0)||O.strstart-O.block_start>=O.w_size-v&&(b(O,!1),O.strm.avail_out===0))return 1}return O.insert=0,he===4?(b(O,!0),O.strm.avail_out===0?3:4):(O.strstart>O.block_start&&(b(O,!1),O.strm.avail_out),1)}),new ue(4,4,8,4,ee),new ue(4,5,16,8,ee),new ue(4,6,32,32,ee),new ue(4,4,16,16,Se),new ue(8,16,32,32,Se),new ue(8,16,128,128,Se),new ue(8,32,128,256,Se),new ue(32,128,258,1024,Se),new ue(32,258,258,4096,Se)],i.deflateInit=function(O,he){return ce(O,he,8,15,8,0)},i.deflateInit2=ce,i.deflateReset=Me,i.deflateResetKeep=me,i.deflateSetHeader=function(O,he){return O&&O.state?O.state.wrap!==2?y:(O.state.gzhead=he,0):y},i.deflate=function(O,he){var se,q,Pe,fe;if(!O||!O.state||he>5||he<0)return O?I(O,y):y;if(q=O.state,!O.output||!O.input&&O.avail_in!==0||q.status===C&&he!==4)return I(O,O.avail_out===0?-5:y);if(q.strm=O,se=q.last_flush,q.last_flush=he,q.status===42)if(q.wrap===2)O.adler=0,F(q,31),F(q,139),F(q,8),q.gzhead?(F(q,(q.gzhead.text?1:0)+(q.gzhead.hcrc?2:0)+(q.gzhead.extra?4:0)+(q.gzhead.name?8:0)+(q.gzhead.comment?16:0)),F(q,255&q.gzhead.time),F(q,q.gzhead.time>>8&255),F(q,q.gzhead.time>>16&255),F(q,q.gzhead.time>>24&255),F(q,q.level===9?2:q.strategy>=2||q.level<2?4:0),F(q,255&q.gzhead.os),q.gzhead.extra&&q.gzhead.extra.length&&(F(q,255&q.gzhead.extra.length),F(q,q.gzhead.extra.length>>8&255)),q.gzhead.hcrc&&(O.adler=g(O.adler,q.pending_buf,q.pending,0)),q.gzindex=0,q.status=69):(F(q,0),F(q,0),F(q,0),F(q,0),F(q,0),F(q,q.level===9?2:q.strategy>=2||q.level<2?4:0),F(q,3),q.status=z);else{var De=8+(q.w_bits-8<<4)<<8;De|=(q.strategy>=2||q.level<2?0:q.level<6?1:q.level===6?2:3)<<6,q.strstart!==0&&(De|=32),De+=31-De%31,q.status=z,B(q,De),q.strstart!==0&&(B(q,O.adler>>>16),B(q,65535&O.adler)),O.adler=1}if(q.status===69)if(q.gzhead.extra){for(Pe=q.pending;q.gzindex<(65535&q.gzhead.extra.length)&&(q.pending!==q.pending_buf_size||(q.gzhead.hcrc&&q.pending>Pe&&(O.adler=g(O.adler,q.pending_buf,q.pending-Pe,Pe)),X(O),Pe=q.pending,q.pending!==q.pending_buf_size));)F(q,255&q.gzhead.extra[q.gzindex]),q.gzindex++;q.gzhead.hcrc&&q.pending>Pe&&(O.adler=g(O.adler,q.pending_buf,q.pending-Pe,Pe)),q.gzindex===q.gzhead.extra.length&&(q.gzindex=0,q.status=73)}else q.status=73;if(q.status===73)if(q.gzhead.name){Pe=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>Pe&&(O.adler=g(O.adler,q.pending_buf,q.pending-Pe,Pe)),X(O),Pe=q.pending,q.pending===q.pending_buf_size)){fe=1;break}fe=q.gzindex<q.gzhead.name.length?255&q.gzhead.name.charCodeAt(q.gzindex++):0,F(q,fe)}while(fe!==0);q.gzhead.hcrc&&q.pending>Pe&&(O.adler=g(O.adler,q.pending_buf,q.pending-Pe,Pe)),fe===0&&(q.gzindex=0,q.status=91)}else q.status=91;if(q.status===91)if(q.gzhead.comment){Pe=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>Pe&&(O.adler=g(O.adler,q.pending_buf,q.pending-Pe,Pe)),X(O),Pe=q.pending,q.pending===q.pending_buf_size)){fe=1;break}fe=q.gzindex<q.gzhead.comment.length?255&q.gzhead.comment.charCodeAt(q.gzindex++):0,F(q,fe)}while(fe!==0);q.gzhead.hcrc&&q.pending>Pe&&(O.adler=g(O.adler,q.pending_buf,q.pending-Pe,Pe)),fe===0&&(q.status=R)}else q.status=R;if(q.status===R&&(q.gzhead.hcrc?(q.pending+2>q.pending_buf_size&&X(O),q.pending+2<=q.pending_buf_size&&(F(q,255&O.adler),F(q,O.adler>>8&255),O.adler=0,q.status=z)):q.status=z),q.pending!==0){if(X(O),O.avail_out===0)return q.last_flush=-1,0}else if(O.avail_in===0&&K(he)<=K(se)&&he!==4)return I(O,-5);if(q.status===C&&O.avail_in!==0)return I(O,-5);if(O.avail_in!==0||q.lookahead!==0||he!==0&&q.status!==C){var He=q.strategy===2?(function(oe,Ce){for(var We;;){if(oe.lookahead===0&&(N(oe),oe.lookahead===0)){if(Ce===0)return 1;break}if(oe.match_length=0,We=_._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++,We&&(b(oe,!1),oe.strm.avail_out===0))return 1}return oe.insert=0,Ce===4?(b(oe,!0),oe.strm.avail_out===0?3:4):oe.last_lit&&(b(oe,!1),oe.strm.avail_out===0)?1:2})(q,he):q.strategy===3?(function(oe,Ce){for(var We,qe,Fe,rt,ot=oe.window;;){if(oe.lookahead<=E){if(N(oe),oe.lookahead<=E&&Ce===0)return 1;if(oe.lookahead===0)break}if(oe.match_length=0,oe.lookahead>=3&&oe.strstart>0&&(qe=ot[Fe=oe.strstart-1])===ot[++Fe]&&qe===ot[++Fe]&&qe===ot[++Fe]){rt=oe.strstart+E;do;while(qe===ot[++Fe]&&qe===ot[++Fe]&&qe===ot[++Fe]&&qe===ot[++Fe]&&qe===ot[++Fe]&&qe===ot[++Fe]&&qe===ot[++Fe]&&qe===ot[++Fe]&&Fe<rt);oe.match_length=E-(rt-Fe),oe.match_length>oe.lookahead&&(oe.match_length=oe.lookahead)}if(oe.match_length>=3?(We=_._tr_tally(oe,1,oe.match_length-3),oe.lookahead-=oe.match_length,oe.strstart+=oe.match_length,oe.match_length=0):(We=_._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++),We&&(b(oe,!1),oe.strm.avail_out===0))return 1}return oe.insert=0,Ce===4?(b(oe,!0),oe.strm.avail_out===0?3:4):oe.last_lit&&(b(oe,!1),oe.strm.avail_out===0)?1:2})(q,he):u[q.level].func(q,he);if(He!==3&&He!==4||(q.status=C),He===1||He===3)return O.avail_out===0&&(q.last_flush=-1),0;if(He===2&&(he===1?_._tr_align(q):he!==5&&(_._tr_stored_block(q,0,0,!1),he===3&&(J(q.head),q.lookahead===0&&(q.strstart=0,q.block_start=0,q.insert=0))),X(O),O.avail_out===0))return q.last_flush=-1,0}return he!==4?0:q.wrap<=0?1:(q.wrap===2?(F(q,255&O.adler),F(q,O.adler>>8&255),F(q,O.adler>>16&255),F(q,O.adler>>24&255),F(q,255&O.total_in),F(q,O.total_in>>8&255),F(q,O.total_in>>16&255),F(q,O.total_in>>24&255)):(B(q,O.adler>>>16),B(q,65535&O.adler)),X(O),q.wrap>0&&(q.wrap=-q.wrap),q.pending!==0?0:1)},i.deflateEnd=function(O){var he;return O&&O.state?(he=O.state.status)!==42&&he!==69&&he!==73&&he!==91&&he!==R&&he!==z&&he!==C?I(O,y):(O.state=null,he===z?I(O,-3):0):y},i.deflateSetDictionary=function(O,he){var se,q,Pe,fe,De,He,oe,Ce,We=he.length;if(!O||!O.state||(fe=(se=O.state).wrap)===2||fe===1&&se.status!==42||se.lookahead)return y;for(fe===1&&(O.adler=l(O.adler,he,We,0)),se.wrap=0,We>=se.w_size&&(fe===0&&(J(se.head),se.strstart=0,se.block_start=0,se.insert=0),Ce=new h.Buf8(se.w_size),h.arraySet(Ce,he,We-se.w_size,se.w_size,0),he=Ce,We=se.w_size),De=O.avail_in,He=O.next_in,oe=O.input,O.avail_in=We,O.next_in=0,O.input=he,N(se);se.lookahead>=3;){q=se.strstart,Pe=se.lookahead-2;do se.ins_h=(se.ins_h<<se.hash_shift^se.window[q+3-1])&se.hash_mask,se.prev[q&se.w_mask]=se.head[se.ins_h],se.head[se.ins_h]=q,q++;while(--Pe);se.strstart=q,se.lookahead=2,N(se)}return se.strstart+=se.lookahead,se.block_start=se.strstart,se.insert=se.lookahead,se.lookahead=0,se.match_length=se.prev_length=2,se.match_available=0,O.next_in=He,O.input=oe,O.avail_in=De,se.wrap=fe,0},i.deflateInfo="pako deflate (from Nodeca project)"},111:(t,i,s)=>{var u;u={},t.exports=u,(function(h,_){h.toRGBA8=function(l){var g=l.width,d=l.height;if(l.tabs.acTL==null)return[h.toRGBA8.decodeImage(l.data,g,d,l).buffer];var y=[];l.frames[0].data==null&&(l.frames[0].data=l.data);for(var E,v=new Uint8Array(g*d*4),R=0;R<l.frames.length;R++){var z=l.frames[R],C=z.rect.x,I=z.rect.y,K=z.rect.width,J=z.rect.height,X=h.toRGBA8.decodeImage(z.data,K,J,l);if(R==0?E=X:z.blend==0?h._copyTile(X,K,J,E,g,d,C,I,0):z.blend==1&&h._copyTile(X,K,J,E,g,d,C,I,1),y.push(E.buffer),E=E.slice(0),z.dispose!=0){if(z.dispose==1)h._copyTile(v,K,J,E,g,d,C,I,0);else if(z.dispose==2){for(var b=R-1;l.frames[b].dispose==2;)b--;E=new Uint8Array(y[b]).slice(0)}}}return y},h.toRGBA8.decodeImage=function(l,g,d,y){var E=g*d,v=h.decode._getBPP(y),R=Math.ceil(g*v/8),z=new Uint8Array(4*E),C=new Uint32Array(z.buffer),I=y.ctype,K=y.depth,J=h._bin.readUshort;if(I==6){var X=E<<2;if(K==8)for(var b=0;b<X;b++)z[b]=l[b];if(K==16)for(b=0;b<X;b++)z[b]=l[b<<1]}else if(I==2){var F=y.tabs.tRNS,B=-1,$=-1,Q=-1;if(F&&(B=F[0],$=F[1],Q=F[2]),K==8)for(b=0;b<E;b++){var N=3*b;z[ce=b<<2]=l[N],z[ce+1]=l[N+1],z[ce+2]=l[N+2],z[ce+3]=255,B!=-1&&l[N]==B&&l[N+1]==$&&l[N+2]==Q&&(z[ce+3]=0)}if(K==16)for(b=0;b<E;b++)N=6*b,z[ce=b<<2]=l[N],z[ce+1]=l[N+2],z[ce+2]=l[N+4],z[ce+3]=255,B!=-1&&J(l,N)==B&&J(l,N+2)==$&&J(l,N+4)==Q&&(z[ce+3]=0)}else if(I==3){var ee=y.tabs.PLTE,Se=y.tabs.tRNS,ue=Se?Se.length:0;if(K==1)for(var ge=0;ge<d;ge++){var me=ge*R,Me=ge*g;for(b=0;b<g;b++){var ce=Me+b<<2,O=3*(he=l[me+(b>>3)]>>7-(7&b)&1);z[ce]=ee[O],z[ce+1]=ee[O+1],z[ce+2]=ee[O+2],z[ce+3]=he<ue?Se[he]:255}}if(K==2)for(ge=0;ge<d;ge++)for(me=ge*R,Me=ge*g,b=0;b<g;b++)ce=Me+b<<2,O=3*(he=l[me+(b>>2)]>>6-((3&b)<<1)&3),z[ce]=ee[O],z[ce+1]=ee[O+1],z[ce+2]=ee[O+2],z[ce+3]=he<ue?Se[he]:255;if(K==4)for(ge=0;ge<d;ge++)for(me=ge*R,Me=ge*g,b=0;b<g;b++)ce=Me+b<<2,O=3*(he=l[me+(b>>1)]>>4-((1&b)<<2)&15),z[ce]=ee[O],z[ce+1]=ee[O+1],z[ce+2]=ee[O+2],z[ce+3]=he<ue?Se[he]:255;if(K==8)for(b=0;b<E;b++){var he;ce=b<<2,O=3*(he=l[b]),z[ce]=ee[O],z[ce+1]=ee[O+1],z[ce+2]=ee[O+2],z[ce+3]=he<ue?Se[he]:255}}else if(I==4){if(K==8)for(b=0;b<E;b++){ce=b<<2;var se=l[q=b<<1];z[ce]=se,z[ce+1]=se,z[ce+2]=se,z[ce+3]=l[q+1]}if(K==16)for(b=0;b<E;b++){var q;ce=b<<2,se=l[q=b<<2],z[ce]=se,z[ce+1]=se,z[ce+2]=se,z[ce+3]=l[q+2]}}else if(I==0){if(B=y.tabs.tRNS?y.tabs.tRNS:-1,K==1)for(b=0;b<E;b++){var Pe=(se=255*(l[b>>3]>>7-(7&b)&1))==255*B?0:255;C[b]=Pe<<24|se<<16|se<<8|se}if(K==2)for(b=0;b<E;b++)Pe=(se=85*(l[b>>2]>>6-((3&b)<<1)&3))==85*B?0:255,C[b]=Pe<<24|se<<16|se<<8|se;if(K==4)for(b=0;b<E;b++)Pe=(se=17*(l[b>>1]>>4-((1&b)<<2)&15))==17*B?0:255,C[b]=Pe<<24|se<<16|se<<8|se;if(K==8)for(b=0;b<E;b++)Pe=(se=l[b])==B?0:255,C[b]=Pe<<24|se<<16|se<<8|se;if(K==16)for(b=0;b<E;b++)se=l[b<<1],Pe=J(l,b<<1)==B?0:255,C[b]=Pe<<24|se<<16|se<<8|se}return z},h.decode=function(l){for(var g,d=new Uint8Array(l),y=8,E=h._bin,v=E.readUshort,R=E.readUint,z={tabs:{},frames:[]},C=new Uint8Array(d.length),I=0,K=0,J=[137,80,78,71,13,10,26,10],X=0;X<8;X++)if(d[X]!=J[X])throw"The input is not a PNG file!";for(;y<d.length;){var b=E.readUint(d,y);y+=4;var F=E.readASCII(d,y,4);if(y+=4,F=="IHDR")h.decode._IHDR(d,y,z);else if(F=="IDAT"){for(X=0;X<b;X++)C[I+X]=d[y+X];I+=b}else if(F=="acTL")z.tabs[F]={num_frames:R(d,y),num_plays:R(d,y+4)},g=new Uint8Array(d.length);else if(F=="fcTL"){K!=0&&((me=z.frames[z.frames.length-1]).data=h.decode._decompress(z,g.slice(0,K),me.rect.width,me.rect.height),K=0);var B={x:R(d,y+12),y:R(d,y+16),width:R(d,y+4),height:R(d,y+8)},$=v(d,y+22);$=v(d,y+20)/($==0?100:$);var Q={rect:B,delay:Math.round(1e3*$),dispose:d[y+24],blend:d[y+25]};z.frames.push(Q)}else if(F=="fdAT"){for(X=0;X<b-4;X++)g[K+X]=d[y+X+4];K+=b-4}else if(F=="pHYs")z.tabs[F]=[E.readUint(d,y),E.readUint(d,y+4),d[y+8]];else if(F=="cHRM")for(z.tabs[F]=[],X=0;X<8;X++)z.tabs[F].push(E.readUint(d,y+4*X));else if(F=="tEXt"){z.tabs[F]==null&&(z.tabs[F]={});var N=E.nextZero(d,y),ee=E.readASCII(d,y,N-y),Se=E.readASCII(d,N+1,y+b-N-1);z.tabs[F][ee]=Se}else if(F=="iTXt"){z.tabs[F]==null&&(z.tabs[F]={}),N=0;var ue=y;N=E.nextZero(d,ue),ee=E.readASCII(d,ue,N-ue),d[ue=N+1],d[ue+1],ue+=2,N=E.nextZero(d,ue),E.readASCII(d,ue,N-ue),ue=N+1,N=E.nextZero(d,ue),E.readUTF8(d,ue,N-ue),ue=N+1,Se=E.readUTF8(d,ue,b-(ue-y)),z.tabs[F][ee]=Se}else if(F=="PLTE")z.tabs[F]=E.readBytes(d,y,b);else if(F=="hIST"){var ge=z.tabs.PLTE.length/3;for(z.tabs[F]=[],X=0;X<ge;X++)z.tabs[F].push(v(d,y+2*X))}else if(F=="tRNS")z.ctype==3?z.tabs[F]=E.readBytes(d,y,b):z.ctype==0?z.tabs[F]=v(d,y):z.ctype==2&&(z.tabs[F]=[v(d,y),v(d,y+2),v(d,y+4)]);else if(F=="gAMA")z.tabs[F]=E.readUint(d,y)/1e5;else if(F=="sRGB")z.tabs[F]=d[y];else if(F=="bKGD")z.ctype==0||z.ctype==4?z.tabs[F]=[v(d,y)]:z.ctype==2||z.ctype==6?z.tabs[F]=[v(d,y),v(d,y+2),v(d,y+4)]:z.ctype==3&&(z.tabs[F]=d[y]);else if(F=="IEND"){var me;K!=0&&((me=z.frames[z.frames.length-1]).data=h.decode._decompress(z,g.slice(0,K),me.rect.width,me.rect.height),K=0),z.data=h.decode._decompress(z,C,z.width,z.height);break}y+=b,E.readUint(d,y),y+=4}return delete z.compress,delete z.interlace,delete z.filter,z},h.decode._decompress=function(l,g,d,y){return l.compress==0&&(g=h.decode._inflate(g)),l.interlace==0?g=h.decode._filterZero(g,l,0,d,y):l.interlace==1&&(g=h.decode._readInterlace(g,l)),g},h.decode._inflate=function(l){return _.inflate(l)},h.decode._readInterlace=function(l,g){for(var d=g.width,y=g.height,E=h.decode._getBPP(g),v=E>>3,R=Math.ceil(d*E/8),z=new Uint8Array(y*R),C=0,I=[0,0,4,0,2,0,1],K=[0,4,0,2,0,1,0],J=[8,8,8,4,4,2,2],X=[8,8,4,4,2,2,1],b=0;b<7;){for(var F=J[b],B=X[b],$=0,Q=0,N=I[b];N<y;)N+=F,Q++;for(var ee=K[b];ee<d;)ee+=B,$++;var Se=Math.ceil($*E/8);h.decode._filterZero(l,g,C,$,Q);for(var ue=0,ge=I[b];ge<y;){for(var me=K[b],Me=C+ue*Se<<3;me<d;){var ce;if(E==1&&(ce=(ce=l[Me>>3])>>7-(7&Me)&1,z[ge*R+(me>>3)]|=ce<<7-(3&me)),E==2&&(ce=(ce=l[Me>>3])>>6-(7&Me)&3,z[ge*R+(me>>2)]|=ce<<6-((3&me)<<1)),E==4&&(ce=(ce=l[Me>>3])>>4-(7&Me)&15,z[ge*R+(me>>1)]|=ce<<4-((1&me)<<2)),E>=8)for(var O=ge*R+me*v,he=0;he<v;he++)z[O+he]=l[(Me>>3)+he];Me+=E,me+=B}ue++,ge+=F}$*Q!=0&&(C+=Q*(1+Se)),b+=1}return z},h.decode._getBPP=function(l){return[1,null,3,1,2,null,4][l.ctype]*l.depth},h.decode._filterZero=function(l,g,d,y,E){var v=h.decode._getBPP(g),R=Math.ceil(y*v/8),z=h.decode._paeth;v=Math.ceil(v/8);for(var C=0;C<E;C++){var I=d+C*R,K=I+C+1,J=l[K-1];if(J==0)for(var X=0;X<R;X++)l[I+X]=l[K+X];else if(J==1){for(X=0;X<v;X++)l[I+X]=l[K+X];for(X=v;X<R;X++)l[I+X]=l[K+X]+l[I+X-v]&255}else if(C==0){for(X=0;X<v;X++)l[I+X]=l[K+X];if(J==2)for(X=v;X<R;X++)l[I+X]=255&l[K+X];if(J==3)for(X=v;X<R;X++)l[I+X]=l[K+X]+(l[I+X-v]>>1)&255;if(J==4)for(X=v;X<R;X++)l[I+X]=l[K+X]+z(l[I+X-v],0,0)&255}else{if(J==2)for(X=0;X<R;X++)l[I+X]=l[K+X]+l[I+X-R]&255;if(J==3){for(X=0;X<v;X++)l[I+X]=l[K+X]+(l[I+X-R]>>1)&255;for(X=v;X<R;X++)l[I+X]=l[K+X]+(l[I+X-R]+l[I+X-v]>>1)&255}if(J==4){for(X=0;X<v;X++)l[I+X]=l[K+X]+z(0,l[I+X-R],0)&255;for(X=v;X<R;X++)l[I+X]=l[K+X]+z(l[I+X-v],l[I+X-R],l[I+X-v-R])&255}}}return l},h.decode._paeth=function(l,g,d){var y=l+g-d,E=Math.abs(y-l),v=Math.abs(y-g),R=Math.abs(y-d);return E<=v&&E<=R?l:v<=R?g:d},h.decode._IHDR=function(l,g,d){var y=h._bin;d.width=y.readUint(l,g),g+=4,d.height=y.readUint(l,g),g+=4,d.depth=l[g],g++,d.ctype=l[g],g++,d.compress=l[g],g++,d.filter=l[g],g++,d.interlace=l[g],g++},h._bin={nextZero:function(l,g){for(;l[g]!=0;)g++;return g},readUshort:function(l,g){return l[g]<<8|l[g+1]},writeUshort:function(l,g,d){l[g]=d>>8&255,l[g+1]=255&d},readUint:function(l,g){return 16777216*l[g]+(l[g+1]<<16|l[g+2]<<8|l[g+3])},writeUint:function(l,g,d){l[g]=d>>24&255,l[g+1]=d>>16&255,l[g+2]=d>>8&255,l[g+3]=255&d},readASCII:function(l,g,d){for(var y="",E=0;E<d;E++)y+=String.fromCharCode(l[g+E]);return y},writeASCII:function(l,g,d){for(var y=0;y<d.length;y++)l[g+y]=d.charCodeAt(y)},readBytes:function(l,g,d){for(var y=[],E=0;E<d;E++)y.push(l[g+E]);return y},pad:function(l){return l.length<2?"0"+l:l},readUTF8:function(l,g,d){for(var y,E="",v=0;v<d;v++)E+="%"+h._bin.pad(l[g+v].toString(16));try{y=decodeURIComponent(E)}catch{return h._bin.readASCII(l,g,d)}return y}},h._copyTile=function(l,g,d,y,E,v,R,z,C){for(var I=Math.min(g,E),K=Math.min(d,v),J=0,X=0,b=0;b<K;b++)for(var F=0;F<I;F++)if(R>=0&&z>=0?(J=b*g+F<<2,X=(z+b)*E+R+F<<2):(J=(-z+b)*g-R+F<<2,X=b*E+F<<2),C==0)y[X]=l[J],y[X+1]=l[J+1],y[X+2]=l[J+2],y[X+3]=l[J+3];else if(C==1){var B=l[J+3]*.00392156862745098,$=l[J]*B,Q=l[J+1]*B,N=l[J+2]*B,ee=y[X+3]*(1/255),Se=y[X]*ee,ue=y[X+1]*ee,ge=y[X+2]*ee,me=1-B,Me=B+ee*me,ce=Me==0?0:1/Me;y[X+3]=255*Me,y[X+0]=($+Se*me)*ce,y[X+1]=(Q+ue*me)*ce,y[X+2]=(N+ge*me)*ce}else if(C==2)B=l[J+3],$=l[J],Q=l[J+1],N=l[J+2],ee=y[X+3],Se=y[X],ue=y[X+1],ge=y[X+2],B==ee&&$==Se&&Q==ue&&N==ge?(y[X]=0,y[X+1]=0,y[X+2]=0,y[X+3]=0):(y[X]=$,y[X+1]=Q,y[X+2]=N,y[X+3]=B);else if(C==3){if(B=l[J+3],$=l[J],Q=l[J+1],N=l[J+2],ee=y[X+3],Se=y[X],ue=y[X+1],ge=y[X+2],B==ee&&$==Se&&Q==ue&&N==ge)continue;if(B<220&&ee>20)return!1}return!0},h.encode=function(l,g,d,y,E,v){y==null&&(y=0),v==null&&(v=!1);for(var R=new Uint8Array(l[0].byteLength*l.length+100),z=[137,80,78,71,13,10,26,10],C=0;C<8;C++)R[C]=z[C];var I=8,K=h._bin,J=h.crc.crc,X=K.writeUint,b=K.writeUshort,F=K.writeASCII,B=h.encode.compressPNG(l,g,d,y,v);X(R,I,13),F(R,I+=4,"IHDR"),X(R,I+=4,g),X(R,I+=4,d),R[I+=4]=B.depth,R[++I]=B.ctype,R[++I]=0,R[++I]=0,R[++I]=0,X(R,++I,J(R,I-17,17)),X(R,I+=4,1),F(R,I+=4,"sRGB"),R[I+=4]=1,X(R,++I,J(R,I-5,5)),I+=4;var $=l.length>1;if($&&(X(R,I,8),F(R,I+=4,"acTL"),X(R,I+=4,l.length),X(R,I+=4,0),X(R,I+=4,J(R,I-12,12)),I+=4),B.ctype==3){for(X(R,I,3*(ce=B.plte.length)),F(R,I+=4,"PLTE"),I+=4,C=0;C<ce;C++){var Q=3*C,N=B.plte[C],ee=255&N,Se=N>>8&255,ue=N>>16&255;R[I+Q+0]=ee,R[I+Q+1]=Se,R[I+Q+2]=ue}if(X(R,I+=3*ce,J(R,I-3*ce-4,3*ce+4)),I+=4,B.gotAlpha){for(X(R,I,ce),F(R,I+=4,"tRNS"),I+=4,C=0;C<ce;C++)R[I+C]=B.plte[C]>>24&255;X(R,I+=ce,J(R,I-ce-4,ce+4)),I+=4}}for(var ge=0,me=0;me<B.frames.length;me++){var Me=B.frames[me];$&&(X(R,I,26),F(R,I+=4,"fcTL"),X(R,I+=4,ge++),X(R,I+=4,Me.rect.width),X(R,I+=4,Me.rect.height),X(R,I+=4,Me.rect.x),X(R,I+=4,Me.rect.y),b(R,I+=4,E[me]),b(R,I+=2,1e3),R[I+=2]=Me.dispose,R[++I]=Me.blend,X(R,++I,J(R,I-30,30)),I+=4);var ce,O=Me.cimg;X(R,I,(ce=O.length)+(me==0?0:4));var he=I+=4;for(F(R,I,me==0?"IDAT":"fdAT"),I+=4,me!=0&&(X(R,I,ge++),I+=4),C=0;C<ce;C++)R[I+C]=O[C];X(R,I+=ce,J(R,he,I-he)),I+=4}return X(R,I,0),F(R,I+=4,"IEND"),X(R,I+=4,J(R,I-4,4)),I+=4,R.buffer.slice(0,I)},h.encode.compressPNG=function(l,g,d,y,E){for(var v=h.encode.compress(l,g,d,y,!1,E),R=0;R<l.length;R++){var z=v.frames[R],C=(z.rect.width,z.rect.height),I=z.bpl,K=z.bpp,J=new Uint8Array(C*I+C);z.cimg=h.encode._filterZero(z.img,C,K,I,J)}return v},h.encode.compress=function(l,g,d,y,E,v){v==null&&(v=!1);for(var R=6,z=8,C=4,I=255,K=0;K<l.length;K++)for(var J=new Uint8Array(l[K]),X=J.length,b=0;b<X;b+=4)I&=J[b+3];var F=I!=255,B={},$=[];if(l.length!=0&&(B[0]=0,$.push(0),y!=0&&y--),y!=0){var Q=h.quantize(l,y,E);for(l=Q.bufs,b=0;b<Q.plte.length;b++)B[ee=Q.plte[b].est.rgba]==null&&(B[ee]=$.length,$.push(ee))}else for(K=0;K<l.length;K++){var N=new Uint32Array(l[K]);for(X=N.length,b=0;b<X;b++){var ee=N[b];if((b<g||ee!=N[b-1]&&ee!=N[b-g])&&B[ee]==null&&(B[ee]=$.length,$.push(ee),$.length>=300))break}}var Se=!!F&&E,ue=$.length;ue<=256&&v==0&&(z=ue<=2?1:ue<=4?2:ue<=16?4:8,E&&(z=8),F=!0);var ge=[];for(K=0;K<l.length;K++){var me=new Uint8Array(l[K]),Me=new Uint32Array(me.buffer),ce=0,O=0,he=g,se=d,q=0;if(K!=0&&!Se){for(var Pe=E||K==1||ge[ge.length-2].dispose==2?1:2,fe=0,De=1e9,He=0;He<Pe;He++){for(var oe=new Uint8Array(l[K-1-He]),Ce=new Uint32Array(l[K-1-He]),We=g,qe=d,Fe=-1,rt=-1,ot=0;ot<d;ot++)for(var at=0;at<g;at++)Me[b=ot*g+at]!=Ce[b]&&(at<We&&(We=at),at>Fe&&(Fe=at),ot<qe&&(qe=ot),ot>rt&&(rt=ot));var Ft=Fe==-1?1:(Fe-We+1)*(rt-qe+1);Ft<De&&(De=Ft,fe=He,Fe==-1?(ce=O=0,he=se=1):(ce=We,O=qe,he=Fe-We+1,se=rt-qe+1))}oe=new Uint8Array(l[K-1-fe]),fe==1&&(ge[ge.length-1].dispose=2);var Ct=new Uint8Array(he*se*4);new Uint32Array(Ct.buffer),h._copyTile(oe,g,d,Ct,he,se,-ce,-O,0),h._copyTile(me,g,d,Ct,he,se,-ce,-O,3)?(h._copyTile(me,g,d,Ct,he,se,-ce,-O,2),q=1):(h._copyTile(me,g,d,Ct,he,se,-ce,-O,0),q=0),me=Ct,Me=new Uint32Array(me.buffer)}var or=4*he;if(ue<=256&&v==0){for(or=Math.ceil(z*he/8),Ct=new Uint8Array(or*se),ot=0;ot<se;ot++){b=ot*or;var ar=ot*he;if(z==8)for(at=0;at<he;at++)Ct[b+at]=B[Me[ar+at]];else if(z==4)for(at=0;at<he;at++)Ct[b+(at>>1)]|=B[Me[ar+at]]<<4-4*(1&at);else if(z==2)for(at=0;at<he;at++)Ct[b+(at>>2)]|=B[Me[ar+at]]<<6-2*(3&at);else if(z==1)for(at=0;at<he;at++)Ct[b+(at>>3)]|=B[Me[ar+at]]<<7-1*(7&at)}me=Ct,R=3,C=1}else if(F==0&&l.length==1){Ct=new Uint8Array(he*se*3);var Mr=he*se;for(b=0;b<Mr;b++){var Er=3*b,pr=4*b;Ct[Er]=me[pr],Ct[Er+1]=me[pr+1],Ct[Er+2]=me[pr+2]}me=Ct,R=2,C=3,or=3*he}ge.push({rect:{x:ce,y:O,width:he,height:se},img:me,bpl:or,bpp:C,blend:q,dispose:Se?1:0})}return{ctype:R,depth:z,plte:$,gotAlpha:F,frames:ge}},h.encode._filterZero=function(l,g,d,y,E){for(var v=[],R=0;R<5;R++)if(!(g*y>5e5)||R!=2&&R!=3&&R!=4){for(var z=0;z<g;z++)h.encode._filterLine(E,l,z,y,d,R);if(v.push(_.deflate(E)),d==1)break}for(var C,I=1e9,K=0;K<v.length;K++)v[K].length<I&&(C=K,I=v[K].length);return v[C]},h.encode._filterLine=function(l,g,d,y,E,v){var R=d*y,z=R+d,C=h.decode._paeth;if(l[z]=v,z++,v==0)for(var I=0;I<y;I++)l[z+I]=g[R+I];else if(v==1){for(I=0;I<E;I++)l[z+I]=g[R+I];for(I=E;I<y;I++)l[z+I]=g[R+I]-g[R+I-E]+256&255}else if(d==0){for(I=0;I<E;I++)l[z+I]=g[R+I];if(v==2)for(I=E;I<y;I++)l[z+I]=g[R+I];if(v==3)for(I=E;I<y;I++)l[z+I]=g[R+I]-(g[R+I-E]>>1)+256&255;if(v==4)for(I=E;I<y;I++)l[z+I]=g[R+I]-C(g[R+I-E],0,0)+256&255}else{if(v==2)for(I=0;I<y;I++)l[z+I]=g[R+I]+256-g[R+I-y]&255;if(v==3){for(I=0;I<E;I++)l[z+I]=g[R+I]+256-(g[R+I-y]>>1)&255;for(I=E;I<y;I++)l[z+I]=g[R+I]+256-(g[R+I-y]+g[R+I-E]>>1)&255}if(v==4){for(I=0;I<E;I++)l[z+I]=g[R+I]+256-C(0,g[R+I-y],0)&255;for(I=E;I<y;I++)l[z+I]=g[R+I]+256-C(g[R+I-E],g[R+I-y],g[R+I-E-y])&255}}},h.crc={table:(function(){for(var l=new Uint32Array(256),g=0;g<256;g++){for(var d=g,y=0;y<8;y++)1&d?d=3988292384^d>>>1:d>>>=1;l[g]=d}return l})(),update:function(l,g,d,y){for(var E=0;E<y;E++)l=h.crc.table[255&(l^g[d+E])]^l>>>8;return l},crc:function(l,g,d){return 4294967295^h.crc.update(4294967295,l,g,d)}},h.quantize=function(l,g,d){for(var y=[],E=0,v=0;v<l.length;v++)y.push(h.encode.alphaMul(new Uint8Array(l[v]),d)),E+=l[v].byteLength;var R=new Uint8Array(E),z=new Uint32Array(R.buffer),C=0;for(v=0;v<y.length;v++){for(var I=y[v],K=I.length,J=0;J<K;J++)R[C+J]=I[J];C+=K}var X={i0:0,i1:R.length,bst:null,est:null,tdst:0,left:null,right:null};X.bst=h.quantize.stats(R,X.i0,X.i1),X.est=h.quantize.estats(X.bst);for(var b=[X];b.length<g;){var F=0,B=0;for(v=0;v<b.length;v++)b[v].est.L>F&&(F=b[v].est.L,B=v);if(F<.001)break;var $=b[B],Q=h.quantize.splitPixels(R,z,$.i0,$.i1,$.est.e,$.est.eMq255),N={i0:$.i0,i1:Q,bst:null,est:null,tdst:0,left:null,right:null};N.bst=h.quantize.stats(R,N.i0,N.i1),N.est=h.quantize.estats(N.bst);var ee={i0:Q,i1:$.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ee.bst={R:[],m:[],N:$.bst.N-N.bst.N},v=0;v<16;v++)ee.bst.R[v]=$.bst.R[v]-N.bst.R[v];for(v=0;v<4;v++)ee.bst.m[v]=$.bst.m[v]-N.bst.m[v];ee.est=h.quantize.estats(ee.bst),$.left=N,$.right=ee,b[B]=N,b.push(ee)}b.sort(function(Pe,fe){return fe.bst.N-Pe.bst.N});for(var Se=0;Se<y.length;Se++){var ue=h.quantize.planeDst,ge=new Uint8Array(y[Se].buffer),me=new Uint32Array(y[Se].buffer),Me=ge.length;for(v=0;v<Me;v+=4){for(var ce=ge[v]*.00392156862745098,O=ge[v+1]*.00392156862745098,he=ge[v+2]*.00392156862745098,se=ge[v+3]*.00392156862745098,q=X;q.left;)q=ue(q.est,ce,O,he,se)<=0?q.left:q.right;me[v>>2]=q.est.rgba}y[Se]=me.buffer}return{bufs:y,plte:b}},h.quantize.getNearest=function(l,g,d,y,E){if(l.left==null)return l.tdst=h.quantize.dist(l.est.q,g,d,y,E),l;var v=h.quantize.planeDst(l.est,g,d,y,E),R=l.left,z=l.right;v>0&&(R=l.right,z=l.left);var C=h.quantize.getNearest(R,g,d,y,E);if(C.tdst<=v*v)return C;var I=h.quantize.getNearest(z,g,d,y,E);return I.tdst<C.tdst?I:C},h.quantize.planeDst=function(l,g,d,y,E){var v=l.e;return v[0]*g+v[1]*d+v[2]*y+v[3]*E-l.eMq},h.quantize.dist=function(l,g,d,y,E){var v=g-l[0],R=d-l[1],z=y-l[2],C=E-l[3];return v*v+R*R+z*z+C*C},h.quantize.splitPixels=function(l,g,d,y,E,v){var R=h.quantize.vecDot;for(y-=4;d<y;){for(;R(l,d,E)<=v;)d+=4;for(;R(l,y,E)>v;)y-=4;if(d>=y)break;var z=g[d>>2];g[d>>2]=g[y>>2],g[y>>2]=z,d+=4,y-=4}for(;R(l,d,E)>v;)d-=4;return d+4},h.quantize.vecDot=function(l,g,d){return l[g]*d[0]+l[g+1]*d[1]+l[g+2]*d[2]+l[g+3]*d[3]},h.quantize.stats=function(l,g,d){for(var y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E=[0,0,0,0],v=d-g>>2,R=g;R<d;R+=4){var z=l[R]*.00392156862745098,C=l[R+1]*(1/255),I=l[R+2]*(1/255),K=l[R+3]*(1/255);E[0]+=z,E[1]+=C,E[2]+=I,E[3]+=K,y[0]+=z*z,y[1]+=z*C,y[2]+=z*I,y[3]+=z*K,y[5]+=C*C,y[6]+=C*I,y[7]+=C*K,y[10]+=I*I,y[11]+=I*K,y[15]+=K*K}return y[4]=y[1],y[8]=y[2],y[12]=y[3],y[9]=y[6],y[13]=y[7],y[14]=y[11],{R:y,m:E,N:v}},h.quantize.estats=function(l){var g=l.R,d=l.m,y=l.N,E=d[0],v=d[1],R=d[2],z=d[3],C=y==0?0:1/y,I=[g[0]-E*E*C,g[1]-E*v*C,g[2]-E*R*C,g[3]-E*z*C,g[4]-v*E*C,g[5]-v*v*C,g[6]-v*R*C,g[7]-v*z*C,g[8]-R*E*C,g[9]-R*v*C,g[10]-R*R*C,g[11]-R*z*C,g[12]-z*E*C,g[13]-z*v*C,g[14]-z*R*C,g[15]-z*z*C],K=I,J=h.M4,X=[.5,.5,.5,.5],b=0,F=0;if(y!=0)for(var B=0;B<10&&(X=J.multVec(K,X),F=Math.sqrt(J.dot(X,X)),X=J.sml(1/F,X),!(Math.abs(F-b)<1e-9));B++)b=F;var $=[E*C,v*C,R*C,z*C],Q=J.dot(J.sml(255,$),X),N=$[3]<.001?0:1/$[3];return{Cov:I,q:$,e:X,L:b,eMq255:Q,eMq:J.dot(X,$),rgba:(Math.round(255*$[3])<<24|Math.round(255*$[2]*N)<<16|Math.round(255*$[1]*N)<<8|Math.round(255*$[0]*N))>>>0}},h.M4={multVec:function(l,g){return[l[0]*g[0]+l[1]*g[1]+l[2]*g[2]+l[3]*g[3],l[4]*g[0]+l[5]*g[1]+l[6]*g[2]+l[7]*g[3],l[8]*g[0]+l[9]*g[1]+l[10]*g[2]+l[11]*g[3],l[12]*g[0]+l[13]*g[1]+l[14]*g[2]+l[15]*g[3]]},dot:function(l,g){return l[0]*g[0]+l[1]*g[1]+l[2]*g[2]+l[3]*g[3]},sml:function(l,g){return[l*g[0],l*g[1],l*g[2],l*g[3]]}},h.encode.alphaMul=function(l,g){for(var d=new Uint8Array(l.length),y=l.length>>2,E=0;E<y;E++){var v=E<<2,R=l[v+3];g&&(R=R<128?0:255);var z=R*(1/255);d[v+0]=l[v+0]*z,d[v+1]=l[v+1]*z,d[v+2]=l[v+2]*z,d[v+3]=R}return d}})(u,s(788))},165:t=>{t.exports=function(i,s){var u,h,_,l,g,d,y,E,v,R,z,C,I,K,J,X,b,F,B,$,Q,N,ee,Se,ue;u=i.state,h=i.next_in,Se=i.input,_=h+(i.avail_in-5),l=i.next_out,ue=i.output,g=l-(s-i.avail_out),d=l+(i.avail_out-257),y=u.dmax,E=u.wsize,v=u.whave,R=u.wnext,z=u.window,C=u.hold,I=u.bits,K=u.lencode,J=u.distcode,X=(1<<u.lenbits)-1,b=(1<<u.distbits)-1;e:do{I<15&&(C+=Se[h++]<<I,I+=8,C+=Se[h++]<<I,I+=8),F=K[C&X];t:for(;;){if(C>>>=B=F>>>24,I-=B,(B=F>>>16&255)==0)ue[l++]=65535&F;else{if(!(16&B)){if(64&B){if(32&B){u.mode=12;break e}i.msg="invalid literal/length code",u.mode=30;break e}F=K[(65535&F)+(C&(1<<B)-1)];continue t}for($=65535&F,(B&=15)&&(I<B&&(C+=Se[h++]<<I,I+=8),$+=C&(1<<B)-1,C>>>=B,I-=B),I<15&&(C+=Se[h++]<<I,I+=8,C+=Se[h++]<<I,I+=8),F=J[C&b];;){if(C>>>=B=F>>>24,I-=B,16&(B=F>>>16&255)){if(Q=65535&F,I<(B&=15)&&(C+=Se[h++]<<I,(I+=8)<B&&(C+=Se[h++]<<I,I+=8)),(Q+=C&(1<<B)-1)>y){i.msg="invalid distance too far back",u.mode=30;break e}if(C>>>=B,I-=B,Q>(B=l-g)){if((B=Q-B)>v&&u.sane){i.msg="invalid distance too far back",u.mode=30;break e}if(N=0,ee=z,R===0){if(N+=E-B,B<$){$-=B;do ue[l++]=z[N++];while(--B);N=l-Q,ee=ue}}else if(R<B){if(N+=E+R-B,(B-=R)<$){$-=B;do ue[l++]=z[N++];while(--B);if(N=0,R<$){$-=B=R;do ue[l++]=z[N++];while(--B);N=l-Q,ee=ue}}}else if(N+=R-B,B<$){$-=B;do ue[l++]=z[N++];while(--B);N=l-Q,ee=ue}for(;$>2;)ue[l++]=ee[N++],ue[l++]=ee[N++],ue[l++]=ee[N++],$-=3;$&&(ue[l++]=ee[N++],$>1&&(ue[l++]=ee[N++]))}else{N=l-Q;do ue[l++]=ue[N++],ue[l++]=ue[N++],ue[l++]=ue[N++],$-=3;while($>2);$&&(ue[l++]=ue[N++],$>1&&(ue[l++]=ue[N++]))}break}if(64&B){i.msg="invalid distance code",u.mode=30;break e}F=J[(65535&F)+(C&(1<<B)-1)]}}break}}while(h<_&&l<d);h-=$=I>>3,C&=(1<<(I-=$<<3))-1,i.next_in=h,i.next_out=l,i.avail_in=h<_?_-h+5:5-(h-_),i.avail_out=l<d?d-l+257:257-(l-d),u.hold=C,u.bits=I}},185:()=>{$3Dmol.workerString=(function(){self.onmessage=function(t){var i=t.data,s=i.type;if(s<0)self.atomData=i.atoms,self.volume=i.volume,self.ps=new ProteinSurface;else{var u=self.ps;u.initparm(i.expandedExtent,s!=1,self.volume),u.fillvoxels(self.atomData,i.extendedAtoms),u.buildboundary(),s!==4&&s!==2||(u.fastdistancemap(),u.boundingatom(!1),u.fillvoxelswaals(self.atomData,i.extendedAtoms)),u.marchingcube(s);var h=u.getFacesAndVertices(i.atomsToShow);self.postMessage(h)}}}).toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+=`;
function _classCallCheck() {};`,$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;

`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):void 0},222:(t,i,s)=>{s.r(i),s.d(i,{CC:()=>h,Color:()=>u,builtinColorSchemes:()=>v,chains:()=>E,elementColors:()=>d,htmlColors:()=>_,residues:()=>y,ssColors:()=>l});class u{constructor(z,C,I){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof z=="number"?(this.r=z||0,this.g=C||0,this.b=I||0,this):this.set(z||0)}set(z){return z instanceof u?z.clone():(typeof z=="number"?this.setHex(z):typeof z=="object"&&(this.r=z?.r||0,this.g=z?.g||0,this.b=z?.b||0),this)}setHex(z){return z=Math.floor(z),this.r=(z>>16&255)/255,this.g=(z>>8&255)/255,this.b=(255&z)/255,this}getHex(){return Math.round(255*this.r)<<16|Math.round(255*this.g)<<8|Math.round(255*this.b)}clone(){return new u(this.r,this.g,this.b)}copy(z){return this.r=z.r,this.g=z.g,this.b=z.b,this}scaled(){var z={};return z.r=Math.round(255*this.r),z.g=Math.round(255*this.g),z.b=Math.round(255*this.b),z.a=1,z}}class h{static color(z){if(!z)return h.cache[0];if(z instanceof u)return z;if(typeof z=="number"&&h.cache[z]!==void 0)return h.cache[z];if(z&&Array.isArray(z))return z.map(h.color);let C=h.getHex(z),I=new u(C);return h.cache[C]=I,I}static getHex(z){if(Array.isArray(z))return z.map(h.getHex);if(typeof z=="string"){let C=z;if(!isNaN(parseInt(C)))return parseInt(C);if(C=C.trim(),C.length==4&&C[0]=="#"&&(C="#"+C[1]+C[1]+C[2]+C[2]+C[3]+C[3]),C.length==7&&C[0]=="#")return parseInt(C.substring(1),16);let I=h.rgbRegEx.exec(C);if(I){I[1]!=""&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");let J=0;for(let X=2;X<5;X++){J*=256;let b=I[X].endsWith("%")?255*parseFloat(I[X])/100:parseFloat(I[X]);J+=Math.round(b)}return J}let K=_[C.toLowerCase()];return K!==void 0?K:(console.error("color not found",z.toLowerCase(),_),0)}return z}}h.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,h.cache={0:new u(0)};const _={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074,b:255,g:32768,r:16711680,c:49087,m:12517567,y:12566272,k:0,w:16777215},l={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},g={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},d={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:g,defaultColors:Object.assign({},g),greenCarbon:Object.assign(Object.assign({},g),{C:65280}),cyanCarbon:Object.assign(Object.assign({},g),{C:65535}),magentaCarbon:Object.assign(Object.assign({},g),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},g),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},g),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},g),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},g),{C:8388736}),blueCarbon:Object.assign(Object.assign({},g),{C:255})},y={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},E={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},v={ssPyMol:{prop:"ss",map:l.pyMol},ssJmol:{prop:"ss",map:l.Jmol},Jmol:{prop:"elem",map:d.Jmol},amino:{prop:"resn",map:y.amino},shapely:{prop:"resn",map:y.shapely},nucleic:{prop:"resn",map:y.nucleic},chain:{prop:"chain",map:E.atom},rasmol:{prop:"elem",map:d.rasmol},default:{prop:"elem",map:d.defaultColors},greenCarbon:{prop:"elem",map:d.greenCarbon},chainHetatm:{prop:"chain",map:E.hetatm},cyanCarbon:{prop:"elem",map:d.cyanCarbon},magentaCarbon:{prop:"elem",map:d.magentaCarbon},purpleCarbon:{prop:"elem",map:d.purpleCarbon},whiteCarbon:{prop:"elem",map:d.whiteCarbon},orangeCarbon:{prop:"elem",map:d.orangeCarbon},yellowCarbon:{prop:"elem",map:d.yellowCarbon},blueCarbon:{prop:"elem",map:d.blueCarbon}}},307:t=>{typeof t.exports=="object"&&(t.exports=window.$3Dmol)},358:(t,i,s)=>{var u=s(981),h=15,_=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],g=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(y,E,v,R,z,C,I,K){var J,X,b,F,B,$,Q,N,ee,Se=K.bits,ue=0,ge=0,me=0,Me=0,ce=0,O=0,he=0,se=0,q=0,Pe=0,fe=null,De=0,He=new u.Buf16(16),oe=new u.Buf16(16),Ce=null,We=0;for(ue=0;ue<=h;ue++)He[ue]=0;for(ge=0;ge<R;ge++)He[E[v+ge]]++;for(ce=Se,Me=h;Me>=1&&He[Me]===0;Me--);if(ce>Me&&(ce=Me),Me===0)return z[C++]=20971520,z[C++]=20971520,K.bits=1,0;for(me=1;me<Me&&He[me]===0;me++);for(ce<me&&(ce=me),se=1,ue=1;ue<=h;ue++)if(se<<=1,(se-=He[ue])<0)return-1;if(se>0&&(y===0||Me!==1))return-1;for(oe[1]=0,ue=1;ue<h;ue++)oe[ue+1]=oe[ue]+He[ue];for(ge=0;ge<R;ge++)E[v+ge]!==0&&(I[oe[E[v+ge]]++]=ge);if(y===0?(fe=Ce=I,$=19):y===1?(fe=_,De-=257,Ce=l,We-=257,$=256):(fe=g,Ce=d,$=-1),Pe=0,ge=0,ue=me,B=C,O=ce,he=0,b=-1,F=(q=1<<ce)-1,y===1&&q>852||y===2&&q>592)return 1;for(;;){Q=ue-he,I[ge]<$?(N=0,ee=I[ge]):I[ge]>$?(N=Ce[We+I[ge]],ee=fe[De+I[ge]]):(N=96,ee=0),J=1<<ue-he,me=X=1<<O;do z[B+(Pe>>he)+(X-=J)]=Q<<24|N<<16|ee;while(X!==0);for(J=1<<ue-1;Pe&J;)J>>=1;if(J!==0?(Pe&=J-1,Pe+=J):Pe=0,ge++,--He[ue]===0){if(ue===Me)break;ue=E[v+I[ge]]}if(ue>ce&&(Pe&F)!==b){for(he===0&&(he=ce),B+=me,se=1<<(O=ue-he);O+he<Me&&!((se-=He[O+he])<=0);)O++,se<<=1;if(q+=1<<O,y===1&&q>852||y===2&&q>592)return 1;z[b=Pe&F]=ce<<24|O<<16|B-C}}return Pe!==0&&(z[B+Pe]=ue-he<<24|4194304),K.bits=ce,0}},378:(t,i,s)=>{var u;s.r(i),s.d(i,{BackSide:()=>_,Camera:()=>Wi,ClampToEdgeWrapping:()=>E,Coloring:()=>u,Cylinder:()=>q.Cylinder,DoubleSide:()=>l,EventDispatcher:()=>F,FloatType:()=>I,Fog:()=>tn,FrontSide:()=>h,Geometry:()=>ue,GeometryGroup:()=>Se,GeometryIDCount:()=>ge,ImposterMaterial:()=>Mr,InstancedMaterial:()=>Er,Light:()=>O,Line:()=>Ee,LineBasicMaterial:()=>N,LineStyle:()=>pe,LinearFilter:()=>v,LinearMipMapLinearFilter:()=>z,Material:()=>$,MaterialIdCount:()=>Q,Matrix3:()=>d.Matrix3,Matrix4:()=>d.Matrix4,Mesh:()=>ze,MeshDoubleLambertMaterial:()=>vr,MeshLambertMaterial:()=>pr,MeshOutlineMaterial:()=>xr,NearestFilter:()=>R,Object3D:()=>Me,Object3DIDCount:()=>me,Projector:()=>se,Quaternion:()=>d.Quaternion,R32Format:()=>X,RFormat:()=>J,RGBAFormat:()=>K,Ray:()=>d.Ray,Raycaster:()=>De,Renderer:()=>qi,Scene:()=>ce,ShaderLib:()=>Zr,ShaderUtils:()=>yi,Shading:()=>g,Sphere:()=>q.Sphere,SphereImposterMaterial:()=>fi,SphereImposterOutlineMaterial:()=>kr,Sprite:()=>dt,SpriteAlignment:()=>y,SpriteMaterial:()=>zr,SpritePlugin:()=>on,StickImposterMaterial:()=>Di,StickImposterOutlineMaterial:()=>wi,Texture:()=>or,TextureIdCount:()=>ar,TextureOperations:()=>b,Triangle:()=>q.Triangle,UVMapping:()=>Ct,UnsignedByteType:()=>C,Vector2:()=>d.Vector2,Vector3:()=>d.Vector3,VolumetricMaterial:()=>Hi,basic:()=>It,clamp:()=>d.clamp,clone:()=>Vi,conversionMatrix3:()=>d.conversionMatrix3,degToRad:()=>d.degToRad,instanced:()=>Lt,intersectObject:()=>Ft,lambert:()=>zt,lambertdouble:()=>li,outline:()=>ui,screen:()=>gi,screenaa:()=>jr,sphereimposter:()=>Dr,sphereimposteroutline:()=>vi,sprite:()=>bi,stickimposter:()=>Ni,stickimposteroutline:()=>Ti,volumetric:()=>Br}),(function(Bt){Bt[Bt.NoColors=0]="NoColors",Bt[Bt.FaceColors=1]="FaceColors",Bt[Bt.VertexColors=2]="VertexColors"})(u||(u={}));const h=0,_=1,l=2;var g;(function(Bt){Bt[Bt.NoShading=0]="NoShading",Bt[Bt.FlatShading=1]="FlatShading",Bt[Bt.SmoothShading=2]="SmoothShading"})(g||(g={}));var d=s(529);const y={topLeft:new d.Vector2(1,-1),topCenter:new d.Vector2(0,-1),topRight:new d.Vector2(-1,-1),centerLeft:new d.Vector2(1,0),center:new d.Vector2(0,0),centerRight:new d.Vector2(-1,0),bottomLeft:new d.Vector2(1,1),bottomCenter:new d.Vector2(0,1),bottomRight:new d.Vector2(-1,1)},E=1001,v=1006,R=1007,z=1008,C=1009,I=1010,K=1021,J=1022,X=1023;var b;(function(Bt){Bt[Bt.MultiplyOperation=0]="MultiplyOperation",Bt[Bt.MixOperation=1]="MixOperation",Bt[Bt.AddOperation=2]="AddOperation"})(b||(b={}));class F{constructor(){this.listeners={}}dispatchEvent(S){var ne=this.listeners[S.type];if(ne!==void 0){S.target=this;for(var xe=0,Ve=ne.length;xe<Ve;xe++)ne[xe].call(this,S)}}removeEventListener(S,ne){if(ne){var xe=this.listeners[S].indexOf(ne);xe!==-1&&this.listeners[S].splice(xe,1)}else this.listeners[S]=[]}addEventListener(S,ne){this.listeners[S]===void 0&&(this.listeners[S]=[]),this.listeners[S].indexOf(ne)===-1&&this.listeners[S].push(ne)}}var B=s(222);class $ extends F{constructor(){super(...arguments),this.id=Q++,this.name="",this.side=h,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1,this.wireframe=!1,this.shaded=!1}setValues(S={}){if(S!==void 0)for(var ne in S){var xe=S[ne];if(xe!==void 0){if(ne in this){var Ve=this[ne];Ve instanceof B.Color&&xe instanceof B.Color?Ve.copy(xe):Ve instanceof B.Color?Ve.set(xe):Ve instanceof d.Vector3&&xe instanceof d.Vector3?Ve.copy(xe):this[ne]=xe}}else console.warn("$3Dmol.Material: '"+ne+"' parameter is undefined.")}}clone(S=new $){return S.name=this.name,S.side=this.side,S.opacity=this.opacity,S.transparent=this.transparent,S.depthTest=this.depthTest,S.depthWrite=this.depthWrite,S.polygonOffset=this.polygonOffset,S.polygonOffsetFactor=this.polygonOffsetFactor,S.polygonOffsetUnits=this.polygonOffsetUnits,S.alphaTest=this.alphaTest,S.overdraw=this.overdraw,S.visible=this.visible,S}makeShaded(S){this.shaded=!0,this.uniforms&&(this.uniforms.shading={type:"i",value:S},this.uniforms.vWidth={type:"f",value:1},this.uniforms.vHeight={type:"f",value:1})}dispose(){this.dispatchEvent({type:"dispose"})}}let Q=0;class N extends ${constructor(S){super(),this.color=new B.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(S)}clone(S=new N){return super.clone.call(this,S),S.color.copy(this.color),S}}const ee=65535;class Se{constructor(S=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.atomArray=Array(),this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=S}setColor(S){var ne=this.vertexArray,xe=this.colorArray;if(!ne)throw new Error("vertex array not initialized");if(!xe)throw new Error("color array not initialized");let Ve=B.CC.color(S);for(var Le=0;Le<ne.length;Le+=3)xe[Le]=Ve.r,xe[Le+1]=Ve.g,xe[Le+2]=Ve.b}setColors(S){var ne=this.vertexArray,xe=this.colorArray;if(!ne)throw new Error("vertex array not initialized");if(!xe)throw new Error("color array not initialized");if(ne.length==xe.length)for(var Ve=0;Ve<ne.length;Ve+=3){var Le=S(ne[Ve],ne[Ve+1],ne[Ve+2]);Le instanceof B.Color||(Le=B.CC.color(Le)),xe[Ve]=Le.r,xe[Ve+1]=Le.g,xe[Ve+2]=Le.b}else console.log("Cannot re-color geometry group due to mismatched lengths.")}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw new Error("vertex array not initialized");for(var S,ne,xe,Ve,Le=new d.Vector3,yt=0;yt<this.vertices;++yt)S=3*yt,ne=this.vertexArray[S],xe=this.vertexArray[S+1],Ve=this.vertexArray[S+2],Le.x+=ne,Le.y+=xe,Le.z+=Ve;return Le.divideScalar(this.vertices),Le}setNormals(){var S=this.faceArray,ne=this.vertexArray,xe=this.normalArray;if(this.vertices&&this.faceidx){if(!S)throw new Error("face array not initialized");if(!ne)throw new Error("vertex array not initialized");if(!xe)throw new Error("normal array not initialized");for(var Ve,Le,yt,lt,mt,Rt,Pt,Ot=0;Ot<S.length/3;++Ot)Ve=3*S[3*Ot],Le=3*S[3*Ot+1],yt=3*S[3*Ot+2],lt=new d.Vector3(ne[Ve],ne[Ve+1],ne[Ve+2]),mt=new d.Vector3(ne[Le],ne[Le+1],ne[Le+2]),Rt=new d.Vector3(ne[yt],ne[yt+1],ne[yt+2]),lt.subVectors(lt,mt),Rt.subVectors(Rt,mt),Rt.cross(lt),(Pt=Rt).normalize(),xe[Ve]+=Pt.x,xe[Le]+=Pt.x,xe[yt]+=Pt.x,xe[Ve+1]+=Pt.y,xe[Le+1]+=Pt.y,xe[yt+1]+=Pt.y,xe[Ve+2]+=Pt.z,xe[Le+2]+=Pt.z,xe[yt+2]+=Pt.z}}setLineIndices(){if(this.faceidx&&(!this.lineArray||this.lineArray.length!=2*this.faceidx||this.lineidx!=2*this.faceidx)){var S=this.faceArray,ne=this.lineArray=new Uint16Array(2*this.faceidx);if(this.lineidx=2*this.faceidx,!S)throw new Error("face array not initialized");for(var xe=0;xe<this.faceidx/3;++xe){var Ve=3*xe,Le=2*Ve,yt=S[Ve],lt=S[Ve+1],mt=S[Ve+2];ne[Le]=yt,ne[Le+1]=lt,ne[Le+2]=yt,ne[Le+3]=mt,ne[Le+4]=lt,ne[Le+5]=mt}}}vrml(S,ne){var xe,Ve,Le,yt,lt,mt,Rt,Pt,Ot,gr,Zt,Cr,Ar,Ur,_r,Or,wr,Ri,Qt="";if(Qt+=S+`Shape {
`+S+` appearance Appearance {
`+S+`  material Material {
`+S+"   diffuseColor "+((xe=ne?.color)===null||xe===void 0?void 0:xe.r)+" "+((Ve=ne?.color)===null||Ve===void 0?void 0:Ve.g)+" "+((Le=ne?.color)===null||Le===void 0?void 0:Le.b)+`
`,ne.wireframe&&this.colorArray){let ae=this.colorArray;Qt+=S+"    emissiveColor "+ae[0]+" "+ae[1]+" "+ae[2]+`
`}ne?.transparent&&(Qt+=S+"   transparency "+(1-ne.opacity)+`
`),Qt+=S+`  }
`,Qt+=S+` }
`;var ri=S;if(S+=" ",ne instanceof N||ne.wireframe){let ae,n,o;Qt+=S+`geometry IndexedLineSet {
`+S+` colorPerVertex TRUE
`+S+` coord Coordinate {
`+S+`  point [
`;for(let c=0;c<this.vertices;++c){let f=3*c;ae=(yt=this.vertexArray)===null||yt===void 0?void 0:yt[f],n=(lt=this.vertexArray)===null||lt===void 0?void 0:lt[f+1],o=(mt=this.vertexArray)===null||mt===void 0?void 0:mt[f+2],Qt+=S+"   "+ae+" "+n+" "+o+`,
`}if(Qt+=S+`  ]
`,Qt+=S+` }
`,this.colorArray&&!ne.wireframe){Qt+=S+` color Color {
`+S+`  color [
`;for(let c=0;c<this.vertices;++c){let f=3*c;ae=this.colorArray[f],n=this.colorArray[f+1],o=this.colorArray[f+2],Qt+=S+"   "+ae+" "+n+" "+o+`,
`}Qt+=S+`  ]
`,Qt+=S+` }
`}if(Qt+=S+` coordIndex [
`,ne.wireframe&&this.faceArray)for(let c=0;c<this.faceidx;c+=3)ae=(Rt=this.faceArray)===null||Rt===void 0?void 0:Rt[c],n=(Pt=this.faceArray)===null||Pt===void 0?void 0:Pt[c+1],o=(Ot=this.faceArray)===null||Ot===void 0?void 0:Ot[c+2],Qt+=S+"  "+ae+", "+n+", "+o+`, -1,
`;else for(let c=0;c<this.vertices-1;c+=2)Qt+=S+"  "+c+", "+(c+1)+`, -1,
`;Qt+=S+` ]
`,Qt+=S+`}
`}else{let ae,n,o;Qt+=S+`geometry IndexedFaceSet {
`+S+` colorPerVertex TRUE
`+S+` normalPerVertex TRUE
`+S+` solid FALSE
`,Qt+=S+` coord Coordinate {
`+S+`  point [
`;for(let c=0;c<this.vertices;++c){let f=3*c;ae=(gr=this.vertexArray)===null||gr===void 0?void 0:gr[f],n=(Zt=this.vertexArray)===null||Zt===void 0?void 0:Zt[f+1],o=(Cr=this.vertexArray)===null||Cr===void 0?void 0:Cr[f+2],Qt+=S+"   "+ae+" "+n+" "+o+`,
`}Qt+=S+`  ]
`,Qt+=S+` }
`,Qt+=S+` normal Normal {
`+S+`  vector [
`;for(let c=0;c<this.vertices;++c){let f=3*c;ae=(Ar=this.normalArray)===null||Ar===void 0?void 0:Ar[f],n=(Ur=this.normalArray)===null||Ur===void 0?void 0:Ur[f+1],o=(_r=this.normalArray)===null||_r===void 0?void 0:_r[f+2],Qt+=S+"   "+ae+" "+n+" "+o+`,
`}if(Qt+=S+`  ]
`,Qt+=S+` }
`,this.colorArray){Qt+=S+` color Color {
`+S+`  color [
`;for(let c=0;c<this.vertices;++c){let f=3*c;ae=this.colorArray[f],n=this.colorArray[f+1],o=this.colorArray[f+2],Qt+=S+"   "+ae+" "+n+" "+o+`,
`}Qt+=S+`  ]
`,Qt+=S+` }
`}Qt+=S+` coordIndex [
`;for(let c=0;c<this.faceidx;c+=3)ae=(Or=this.faceArray)===null||Or===void 0?void 0:Or[c],n=(wr=this.faceArray)===null||wr===void 0?void 0:wr[c+1],o=(Ri=this.faceArray)===null||Ri===void 0?void 0:Ri[c+2],Qt+=S+"  "+ae+", "+n+", "+o+`, -1,
`;Qt+=S+` ]
`,Qt+=S+`}
`}return Qt+=ri+"}"}truncateArrayBuffers(S=!0,ne=!1){var xe=this.vertexArray,Ve=this.colorArray,Le=this.normalArray,yt=this.faceArray,lt=this.lineArray,mt=this.radiusArray;this.vertexArray=xe?.subarray(0,3*this.vertices)||null,this.colorArray=Ve?.subarray(0,3*this.vertices)||null,S?(this.normalArray=Le?.subarray(0,3*this.vertices)||null,this.faceArray=yt?.subarray(0,this.faceidx)||null,this.lineidx>0?this.lineArray=lt?.subarray(0,this.lineidx)||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),mt&&(this.radiusArray=mt.subarray(0,this.vertices)),ne&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}class ue extends F{constructor(S=!1,ne=!1,xe=!1){super(),this.name="",this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=ge++,this.mesh=S,this.radii=ne,this.offset=xe}updateGeoGroup(S=0){var ne,xe=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!xe||xe.vertices+S>(((ne=xe?.vertexArray)===null||ne===void 0?void 0:ne.length)||0)/3)&&(xe=this.addGeoGroup()),xe}vrml(S,ne){for(var xe="",Ve=this.geometryGroups.length,Le=0;Le<Ve;Le++)xe+=this.geometryGroups[Le].vrml(S,ne)+`,
`;return xe}addGeoGroup(){var S=new Se(this.geometryGroups.length);return this.geometryGroups.push(S),this.groups=this.geometryGroups.length,S.vertexArray=new Float32Array(196605),S.colorArray=new Float32Array(196605),this.mesh&&(S.normalArray=new Float32Array(196605),S.faceArray=new Uint16Array(393210),S.lineArray=new Uint16Array(393210)),this.radii&&(S.radiusArray=new Float32Array(ee)),S.useOffset=this.offset,S}setUpNormals(...S){for(var ne=0;ne<this.groups;ne++)this.geometryGroups[ne].setNormals(...S)}setColors(...S){for(var ne=this.geometryGroups.length,xe=0;xe<ne;xe++)this.geometryGroups[xe].setColors(...S)}setColor(...S){let ne=this.geometryGroups.length;for(var xe=0;xe<ne;xe++)this.geometryGroups[xe].setColor(...S)}setUpWireframe(...S){let ne=this.geometryGroups.length;for(var xe=0;xe<ne;xe++)this.geometryGroups[xe].setLineIndices(...S)}initTypedArrays(){for(var S=0;S<this.groups;S++){var ne=this.geometryGroups[S];ne.__inittedArrays!==!0&&ne.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:"dispose"})}get vertices(){for(var S=0,ne=0;ne<this.groups;ne++)S+=this.geometryGroups[ne].vertices;return S}}let ge=0,me=0;class Me{constructor(){this.id=me++,this.name="",this.children=[],this.position=new d.Vector3,this.rotation=new d.Vector3,this.matrix=new d.Matrix4,this.matrixWorld=new d.Matrix4,this.quaternion=new d.Quaternion,this.eulerOrder="XYZ",this.up=new d.Vector3(0,1,0),this.scale=new d.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(S){this.matrix.lookAt(S,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error("Unimplemented math operation."):this.rotation instanceof d.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(S){if(S!==this){S.parent=this,this.children.push(S);for(var ne=this;ne.parent!==void 0;)ne=ne.parent;ne!==void 0&&ne instanceof ce&&ne.__addObject(S)}else console.error("Can't add $3Dmol.Object3D to itself")}remove(S){var ne=this.children.indexOf(S);if(ne!==-1){S.parent=void 0,this.children.splice(ne,1);for(var xe=this;xe.parent!==void 0;)xe=xe.parent;xe!==void 0&&xe instanceof ce&&xe.__removeObject(S)}}vrml(S){S||(S=" ");var ne=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),xe=0,Ve=0,Le=0;if(ne!=0){let mt=Math.sin(ne/2);xe=this.quaternion.x/mt,Ve=this.quaternion.y/mt,Le=this.quaternion.z/mt}var yt=S+`Transform {
`+S+" center "+this.position.x+" "+this.position.y+" "+this.position.z+`
`+S+" rotation "+xe+" "+Ve+" "+Le+" "+ne+`
`+S+` children [
`;this.geometry&&(yt+=this.geometry.vrml(S,this.material));for(var lt=0;lt<this.children.length;lt++)yt+=this.children[lt].vrml(S+" ")+`,
`;return yt+=` ]
`,yt+="}"}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof d.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),this.scale.x===1&&this.scale.y===1&&this.scale.z===1||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(S){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&S!==!0||(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var ne=0;ne<this.children.length;ne++)this.children[ne].updateMatrixWorld(!0)}clone(S){S===void 0&&(S=new Me),S.name=this.name,S.up.copy(this.up),S.position.copy(this.position),S.rotation instanceof d.Vector3&&this.rotation instanceof d.Vector3?S.rotation.copy(this.rotation):S.rotation=this.rotation,S.eulerOrder=this.eulerOrder,S.scale.copy(this.scale),S.rotationAutoUpdate=this.rotationAutoUpdate,S.matrix.copy(this.matrix),S.matrixWorld.copy(this.matrixWorld),S.quaternion.copy(this.quaternion),S.matrixAutoUpdate=this.matrixAutoUpdate,S.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,S.useQuaternion=this.useQuaternion,S.visible=this.visible;for(var ne=0;ne<this.children.length;ne++){var xe=this.children[ne];S.add(xe.clone())}return S}setVisible(S){this.visible=S;for(var ne=0;ne<this.children.length;ne++)this.children[ne].setVisible(S)}}class ce extends Me{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(S){if(S instanceof O)this.__lights.indexOf(S)===-1&&this.__lights.push(S),S.target&&S.target.parent===void 0&&this.add(S.target);else if(this.__objects.indexOf(S)===-1){this.__objects.push(S),this.__objectsAdded.push(S);var ne=this.__objectsRemoved.indexOf(S);ne!==-1&&this.__objectsRemoved.splice(ne,1)}for(var xe=0;xe<S.children.length;xe++)this.__addObject(S.children[xe])}__removeObject(S){var ne;S instanceof O?(ne=this.__lights.indexOf(S))!==-1&&this.__lights.splice(ne,1):(ne=this.__objects.indexOf(S))!==-1&&(this.__objects.splice(ne,1),this.__objectsRemoved.push(S),this.__objectsAdded.indexOf(S)!==-1&&this.__objectsAdded.splice(ne,1));for(var xe=0;xe<S.children.length;xe++)this.__removeObject(S.children[xe])}}class O extends Me{constructor(S,ne=1){super(),this.position=new d.Vector3(0,1,0),this.target=new Me,this.castShadow=!1,this.onlyShadow=!1,this.color=new B.Color(S),this.intensity=ne}}const he=new d.Matrix4;class se{static unprojectVector(S,ne){return ne.projectionMatrixInverse.getInverse(ne.projectionMatrix),he.multiplyMatrices(ne.matrixWorld,ne.projectionMatrixInverse),S.applyProjection(he)}static projectVector(S,ne){return ne.matrixWorldInverse.getInverse(ne.matrixWorld),he.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),S.applyProjection(he)}projectVector(S,ne){return se.projectVector(S,ne)}unprojectVector(S,ne){return se.unprojectVector(S,ne)}}var q=s(99);const Pe=(Bt,S)=>Bt.distance-S.distance,fe=new d.Matrix4;class De{constructor(S,ne,xe,Ve){this.precision=1e-4,this.linePrecision=.2,this.ray=new d.Ray(S,ne),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=Ve||0,this.far=xe||1/0}set(S,ne){this.ray.set(S,ne)}setFromCamera(S,ne){ne.ortho?(this.ray.origin.set(S.x,S.y,(ne.near+ne.far)/(ne.near-ne.far)).unproject(ne),this.ray.direction.set(0,0,-1).transformDirection(ne.matrixWorld)):(this.ray.origin.setFromMatrixPosition(ne.matrixWorld),this.ray.direction.set(S.x,S.y,S.z),ne.projectionMatrixInverse.getInverse(ne.projectionMatrix),fe.multiplyMatrices(ne.matrixWorld,ne.projectionMatrixInverse),this.ray.direction.applyProjection(fe),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects(S,ne){for(var xe=[],Ve=0,Le=ne.length;Ve<Le;Ve++)Ft(S,ne[Ve],this,xe);return xe.sort(Pe),xe}}const He=Bt=>Math.min(Math.max(Bt,-1),1);var oe=new q.Sphere,Ce=new q.Cylinder,We=new q.Triangle,qe=new d.Vector3,Fe=new d.Vector3,rt=new d.Vector3,ot=new d.Vector3,at=new d.Vector3;function Ft(Bt,S,ne,xe){if(at.getPositionFromMatrix(Bt.matrixWorld),S.intersectionShape===void 0||S.hidden)return xe;var Ve,Le,yt,lt,mt,Rt,Pt,Ot,gr,Zt,Cr,Ar,Ur,_r,Or=S.intersectionShape,wr=ne.linePrecision,Ri=(wr*=Bt.matrixWorld.getMaxScaleOnAxis())*wr;if(S.boundingSphere!==void 0&&S.boundingSphere instanceof q.Sphere&&(oe.copy(S.boundingSphere),oe.applyMatrix4(Bt.matrixWorld),!ne.ray.isIntersectionSphere(oe)))return xe;for(Ve=0,Le=Or.triangle.length;Ve<Le;Ve++)if(Or.triangle[Ve]instanceof q.Triangle){if(We.copy(Or.triangle[Ve]),We.applyMatrix4(Bt.matrixWorld),yt=We.getNormal(),(lt=ne.ray.direction.dot(yt))>=0||(qe.subVectors(We.a,ne.ray.origin),(Pt=yt.dot(qe)/lt)<0))continue;Fe.copy(ne.ray.direction).multiplyScalar(Pt).add(ne.ray.origin),Fe.sub(We.a),rt.copy(We.b).sub(We.a),ot.copy(We.c).sub(We.a);var Qt=rt.dot(ot),ri=rt.lengthSq(),ae=ot.lengthSq();if((Ar=(ri*Fe.dot(ot)-Qt*Fe.dot(rt))/(ri*ae-Qt*Qt))<0||Ar>1||(Cr=(Fe.dot(rt)-Ar*Qt)/ri)<0||Cr>1||Cr+Ar>1)continue;xe.push({clickable:S,distance:Pt})}for(Ve=0,Le=Or.cylinder.length;Ve<Le;Ve++)if(Or.cylinder[Ve]instanceof q.Cylinder){if(Ce.copy(Or.cylinder[Ve]),Ce.applyMatrix4(Bt.matrixWorld),qe.subVectors(Ce.c1,ne.ray.origin),mt=qe.dot(Ce.direction),Rt=qe.dot(ne.ray.direction),(gr=1-(lt=He(ne.ray.direction.dot(Ce.direction)))*lt)==0)continue;Ur=(lt*Rt-mt)/gr,_r=(Rt-lt*mt)/gr,Fe.copy(Ce.direction).multiplyScalar(Ur).add(Ce.c1),rt.copy(ne.ray.direction).multiplyScalar(_r).add(ne.ray.origin),Ot=ot.subVectors(Fe,rt).lengthSq();var n=Ce.radius*Ce.radius;if(Ot<=n){if((Cr=lt*(Ar=Pt=(Zt=(lt*mt-Rt)*(lt*mt-Rt)-gr*(qe.lengthSq()-mt*mt-n))<=0?Math.sqrt(Ot):(Rt-lt*mt-Math.sqrt(Zt))/gr)-mt)<0||Cr*Cr>Ce.lengthSq()||Ar<0)continue;xe.push({clickable:S,distance:Pt})}}for(Ve=0,Le=Or.line.length;Ve<Le;Ve+=2){Fe.copy(Or.line[Ve]),Fe.applyMatrix4(Bt.matrixWorld),rt.copy(Or.line[Ve+1]),rt.applyMatrix4(Bt.matrixWorld),ot.subVectors(rt,Fe);var o=ot.lengthSq();ot.normalize(),qe.subVectors(Fe,ne.ray.origin);var c=qe.dot(ot);Rt=qe.dot(ne.ray.direction),(gr=1-(lt=He(ne.ray.direction.dot(ot)))*lt)!=0&&(Ur=(lt*Rt-c)/gr,_r=(Rt-lt*c)/gr,Fe.add(ot.multiplyScalar(Ur)),rt.copy(ne.ray.direction).multiplyScalar(_r).add(ne.ray.origin),(Ot=ot.subVectors(rt,Fe).lengthSq())<Ri&&Ur*Ur<o&&xe.push({clickable:S,distance:_r}))}for(Ve=0,Le=Or.sphere.length;Ve<Le;Ve++)if(Or.sphere[Ve]instanceof q.Sphere&&(oe.copy(Or.sphere[Ve]),oe.applyMatrix4(Bt.matrixWorld),ne.ray.isIntersectionSphere(oe))){Fe.subVectors(oe.center,ne.ray.origin);var f=Fe.dot(ne.ray.direction);if(Zt=f*f-(Fe.lengthSq()-oe.radius*oe.radius),f<0)return xe;Pt=Zt<=0?f:f-Math.sqrt(Zt),xe.push({clickable:S,distance:Pt})}return xe}class Ct{}class or extends F{constructor(S,ne){super(),this.id=ar++,this.name="",this.image=S,this.mapping=new Ct,this.wrapS=E,this.wrapT=E,this.anisotropy=1,ne?(this.format=J,this.type=I,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=R,this.minFilter=R):(this.format=K,this.type=C,this.offset=new d.Vector2(0,0),this.repeat=new d.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=v,this.minFilter=z),this.needsUpdate=!1,this.onUpdate=null}clone(S=new or){return S.image=this.image,S.mapping=this.mapping,S.wrapS=this.wrapS,S.wrapT=this.wrapT,S.magFilter=this.magFilter,S.minFilter=this.minFilter,S.anisotropy=this.anisotropy,S.format=this.format,S.type=this.type,S.offset.copy(this.offset),S.repeat.copy(this.repeat),S.premultiplyAlpha=this.premultiplyAlpha,S.flipY=this.flipY,S.unpackAlignment=this.unpackAlignment,S}dispose(){this.dispatchEvent({type:"dispose"})}}let ar=0;class Mr extends ${constructor(S){super(),this.color=new B.Color(16777215),this.ambient=new B.Color(1048575),this.emissive=new B.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new d.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=g.SmoothShading,this.shaderID=null,this.vertexColors=u.NoColors,this.skinning=!1,this.setValues(S)}clone(S=new Mr){return super.clone.call(this,S),S.color.copy(this.color),S.ambient.copy(this.ambient),S.emissive.copy(this.emissive),S.wrapAround=this.wrapAround,S.wrapRGB.copy(this.wrapRGB),S.map=this.map,S.lightMap=this.lightMap,S.specularMap=this.specularMap,S.envMap=this.envMap,S.combine=this.combine,S.reflectivity=this.reflectivity,S.refractionRatio=this.refractionRatio,S.fog=this.fog,S.shading=this.shading,S.shaderID=this.shaderID,S.vertexColors=this.vertexColors,S.skinning=this.skinning,S.morphTargets=this.morphTargets,S.morphNormals=this.morphNormals,S}}class Er extends ${constructor(S){super(),this.color=new B.Color(16777215),this.ambient=new B.Color(1048575),this.emissive=new B.Color(0),this.wrapAround=!1,this.wrapRGB=new d.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=g.SmoothShading,this.shaderID="instanced",this.vertexColors=u.NoColors,this.skinning=!1,this.sphere=null,this.setValues(S)}clone(S=new Er){return super.clone.call(this,S),S.color.copy(this.color),S.ambient.copy(this.ambient),S.emissive.copy(this.emissive),S.wrapAround=this.wrapAround,S.wrapRGB.copy(this.wrapRGB),S.map=this.map,S.lightMap=this.lightMap,S.specularMap=this.specularMap,S.envMap=this.envMap,S.combine=this.combine,S.reflectivity=this.reflectivity,S.refractionRatio=this.refractionRatio,S.fog=this.fog,S.shading=this.shading,S.shaderID=this.shaderID,S.vertexColors=this.vertexColors,S.skinning=this.skinning,S.morphTargets=this.morphTargets,S.morphNormals=this.morphNormals,S.sphere=this.sphere,S}}class pr extends ${constructor(S){super(),this.color=new B.Color(16777215),this.ambient=new B.Color(1048575),this.emissive=new B.Color(0),this.wrapAround=!1,this.wrapRGB=new d.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=g.SmoothShading,this.shaderID="lambert",this.vertexColors=u.NoColors,this.skinning=!1,this.setValues(S)}clone(S=new pr){return super.clone.call(this,S),S.color.copy(this.color),S.ambient.copy(this.ambient),S.emissive.copy(this.emissive),S.wrapAround=this.wrapAround,S.wrapRGB.copy(this.wrapRGB),S.map=this.map,S.lightMap=this.lightMap,S.specularMap=this.specularMap,S.envMap=this.envMap,S.combine=this.combine,S.reflectivity=this.reflectivity,S.refractionRatio=this.refractionRatio,S.fog=this.fog,S.shading=this.shading,S.shaderID=this.shaderID,S.vertexColors=this.vertexColors,S.skinning=this.skinning,S.morphTargets=this.morphTargets,S.morphNormals=this.morphNormals,S}}class vr extends pr{constructor(S){super(S),this.shaderID="lambertdouble",this.side=l,this.outline=!1}clone(S=new vr){return super.clone.call(this,S),S}}class xr extends ${constructor(S){super(),S=S||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=B.CC.color(S.color||new B.Color(0,0,0)),this.outlineWidth=S.width||.1,this.outlinePushback=S.pushback||1,this.outlineMaxPixels=S.maxpixels||0}clone(S=new xr){return super.clone.call(this,S),S.fog=this.fog,S.shaderID=this.shaderID,S.wireframe=this.wireframe,S.outlineColor=this.outlineColor,S.outlineWidth=this.outlineWidth,S.outlinePushback=this.outlinePushback,S.outlineMaxPixels=this.outlineMaxPixels,S}}class fi extends Mr{constructor(S){super(S),this.shaderID="sphereimposter",this.setValues(S)}clone(S=new fi){return super.clone.call(this,S),S}}class kr extends Mr{constructor(S){super(S),S=S||{},this.shaderID="sphereimposteroutline",this.outlineColor=B.CC.color(S.color||new B.Color(0,0,0)),this.outlineWidth=S.width||.1,this.outlinePushback=S.pushback||1,this.outlineMaxPixels=S.maxpixels||0,this.setValues(S)}clone(S=new kr){return super.clone.call(this,S),S.outlineColor=this.outlineColor,S.outlineWidth=this.outlineWidth,S.outlinePushback=this.outlinePushback,S.outlineMaxPixels=this.outlineMaxPixels,S}}class zr extends ${constructor(S){super(),this.color=new B.Color(16777215),this.map=new or,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new d.Vector2(0,0),this.uvScale=new d.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=y.center.clone(),this.setValues(S),(S=S||{}).depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),S.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),S.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(S=new zr){return super.clone.call(this,S),S.color.copy(this.color),S.map=this.map,S.useScreenCoordinates=this.useScreenCoordinates,S.screenOffset=this.screenOffset,S.sizeAttenuation=this.sizeAttenuation,S.scaleByViewport=this.scaleByViewPort,S.alignment.copy(this.alignment),S.uvOffset.copy(this.uvOffset),S}}class Di extends Mr{constructor(S){super(S),this.shaderID="stickimposter",this.setValues(S)}clone(S=new Di){return super.clone.call(this,S),S}}class wi extends Mr{constructor(S={}){super(S),this.shaderID="stickimposteroutline",this.outlineColor=new B.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,this.outlineMaxPixels=0,S.color&&(this.outlineColor=B.CC.color(S.color)),S.width&&(this.outlineWidth=S.width),S.pushback&&(this.outlinePushback=S.pushback),S.maxpixels&&(this.outlineMaxPixels=S.maxpixels),this.setValues(S)}clone(S=new wi){return super.clone.call(this,S),S.outlineColor=this.outlineColor,S.outlineWidth=this.outlineWidth,S.outlinePushback=this.outlinePushback,S.outlineMaxPixels=this.outlineMaxPixels,S}}class Hi extends ${constructor(S){super(),this.transparent=!1,this.volumetric=!0,this.color=new B.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID="volumetric",this.side=h,this.setValues(S)}clone(S=new Hi){return super.clone.call(this,S),S.transparent=this.transparent,S.volumetric=this.volumetric,S.color=this.color,S.transferfn=this.transferfn,S.map=this.map,S.extent=this.extent,S.maxdepth=this.maxdepth,S.unit=this.unit,S.texmatrix=this.texmatrix,S.transfermin=this.transfermin,S.transfermax=this.transfermax,S.subsamples=this.subsamples,S.shaderID=this.shaderID,S.side=this.side,S}}var pe;(function(Bt){Bt[Bt.LineStrip=0]="LineStrip",Bt[Bt.LinePieces=1]="LinePieces"})(pe||(pe={}));class Ee extends Me{constructor(S,ne=new N({color:16777215*Math.random()}),xe=pe.LineStrip){super(),this.geometry=S,this.material=ne,this.type=xe}clone(S=new Ee(this.geometry,this.material,this.type)){return super.clone.call(this,S),S}}class ze extends Me{constructor(S,ne){super(),this.geometry=S,this.material=ne}clone(S){return S===void 0&&(S=new ze(this.geometry,this.material)),super.clone.call(this,S),S}}class dt extends Me{constructor(S=new zr){super(),this.material=S,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),this.scale.x===1&&this.scale.y===1||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(S=new dt(this.material)){return Me.prototype.clone.call(this,S),S}}const nt={opacity:{type:"f",value:1},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}},It={vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;
varying vec4 mvPosition;

void main() {

    vColor = color;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`.replace("#define GLSLIFY 1",""),fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`.replace("#define GLSLIFY 1",""),uniforms:nt},ht={opacity:{type:"f",value:1},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Lt={fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`.replace("#define GLSLIFY 1",""),uniforms:ht},Ut={opacity:{type:"f",value:1},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},zt={fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
varying vec4 mvPosition;


//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}`.replace("#define GLSLIFY 1",""),vertexShader:`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`.replace("#define GLSLIFY 1",""),uniforms:Ut},mr={opacity:{type:"f",value:1},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},li={fragmentShader:`
#ifdef SHADED
uniform highp sampler2D shading;
#endif

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    vec3 color = vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( color, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`.replace("#define GLSLIFY 1",""),uniforms:mr},Ci={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new B.Color(0,0,0)},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}},ui={fragmentShader:`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec4 mvPosition;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float vWidth;
uniform float vHeight;
uniform float outlineMaxPixels;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec4 mvPosition;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    vec4 outpos = projectionMatrix * mvPosition;

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*modelViewMatrix * vec4( position, 1.0 );
        float w = outpos.w;
        //normalize homogeneous coords
        unadjusted /= unadjusted.w;
        outpos /= outpos.w;
        vec2 diff = outpos.xy-unadjusted.xy;
        //put into pixels
        diff.x *= vWidth;
        diff.y *= vHeight;
        if ( length(diff) > outlineMaxPixels) {
            vec2 ndiff = normalize(diff)*outlineMaxPixels;
            ndiff.x /= vWidth;
            ndiff.y /= vHeight;
            outpos.xy = unadjusted.xy;
            outpos.xy += ndiff;
        }
        outpos *= w; //if I don't do this things blow up
    }
    gl_Position = outpos;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`.replace("#define GLSLIFY 1",""),uniforms:Ci},gi={fragmentShader:`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);

   //gl_FragColor.g = gl_FragColor.b =  gl_FragColor.r; //debug shading 
}
        `.replace("#define GLSLIFY 1",""),vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `.replace("#define GLSLIFY 1",""),uniforms:{}},jr={fragmentShader:`
        
precision highp float;
precision highp int;
precision highp sampler2D;

uniform sampler2D tColor;
varying highp vec2 vTexCoords;

// adapted from https://github.com/kosua20/Rendu
// MIT License Copyright (c) 2017 Simon Rodriguez
// by way of molstar (https://github.com/molstar/molstar/blob/master/src/mol-gl/shader/fxaa.frag.ts)

#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))

float rgb2luma(vec3 rgb){
    return sqrt(dot(rgb, vec3(0.299, 0.587, 0.114)));
}

float sampleLuma(vec2 uv) {
    return rgb2luma(texture2D(tColor, uv).rgb);
}

float sampleLuma(vec2 uv, float uOffset, float vOffset) {
    uv += vec2(uOffset, vOffset);
    return sampleLuma(uv);
}

//DEFINEFRAGCOLOR
void main(void) {
    ivec2 dim = textureSize(tColor,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseScreenSize = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec2 coords = vTexCoords;

    vec4 colorCenter = texture2D(tColor, coords);
    float dEdgeThresholdMin = 0.0312;
    float dEdgeThresholdMax = 0.125;
    int dIterations = 12;
    float dSubpixelQuality = 0.3;

    // Luma at the current fragment
    float lumaCenter = rgb2luma(colorCenter.rgb);

    // Luma at the four direct neighbours of the current fragment.
    float lumaDown = sampleLuma(coords, 0.0, -inverseScreenSize.y);
    float lumaUp = sampleLuma(coords, 0.0, inverseScreenSize.y);
    float lumaLeft = sampleLuma(coords, -inverseScreenSize.x, 0.0);
    float lumaRight = sampleLuma(coords, inverseScreenSize.x, 0.0);

    // Find the maximum and minimum luma around the current fragment.
    float lumaMin = min(lumaCenter, min(min(lumaDown, lumaUp), min(lumaLeft, lumaRight)));
    float lumaMax = max(lumaCenter, max(max(lumaDown, lumaUp), max(lumaLeft, lumaRight)));

    // Compute the delta.
    float lumaRange = lumaMax - lumaMin;

    // If the luma variation is lower that a threshold (or if we are in a really dark area),
    // we are not on an edge, don't perform any AA.
    if (lumaRange < max(dEdgeThresholdMin, lumaMax * dEdgeThresholdMax)) {
        gl_FragColor = colorCenter;
        return;
    }

    // Query the 4 remaining corners lumas.
    float lumaDownLeft = sampleLuma(coords, -inverseScreenSize.x, -inverseScreenSize.y);
    float lumaUpRight = sampleLuma(coords, inverseScreenSize.x, inverseScreenSize.y);
    float lumaUpLeft = sampleLuma(coords, -inverseScreenSize.x, inverseScreenSize.y);
    float lumaDownRight = sampleLuma(coords, inverseScreenSize.x, -inverseScreenSize.y);

    // Combine the four edges lumas (using intermediary variables for future computations
    // with the same values).
    float lumaDownUp = lumaDown + lumaUp;
    float lumaLeftRight = lumaLeft + lumaRight;

    // Same for corners
    float lumaLeftCorners = lumaDownLeft + lumaUpLeft;
    float lumaDownCorners = lumaDownLeft + lumaDownRight;
    float lumaRightCorners = lumaDownRight + lumaUpRight;
    float lumaUpCorners = lumaUpRight + lumaUpLeft;

    // Compute an estimation of the gradient along the horizontal and vertical axis.
    float edgeHorizontal = abs(-2.0 * lumaLeft + lumaLeftCorners) + abs(-2.0 * lumaCenter + lumaDownUp) * 2.0 + abs(-2.0 * lumaRight + lumaRightCorners);
    float edgeVertical = abs(-2.0 * lumaUp + lumaUpCorners) + abs(-2.0 * lumaCenter + lumaLeftRight) * 2.0 + abs(-2.0 * lumaDown + lumaDownCorners);

    // Is the local edge horizontal or vertical ?
    bool isHorizontal = (edgeHorizontal >= edgeVertical);

    // Choose the step size (one pixel) accordingly.
    float stepLength = isHorizontal ? inverseScreenSize.y : inverseScreenSize.x;

    // Select the two neighboring texels lumas in the opposite direction to the local edge.
    float luma1 = isHorizontal ? lumaDown : lumaLeft;
    float luma2 = isHorizontal ? lumaUp : lumaRight;
    // Compute gradients in this direction.
    float gradient1 = luma1 - lumaCenter;
    float gradient2 = luma2 - lumaCenter;

    // Which direction is the steepest ?
    bool is1Steepest = abs(gradient1) >= abs(gradient2);

    // Gradient in the corresponding direction, normalized.
    float gradientScaled = 0.25 * max(abs(gradient1), abs(gradient2));

    // Average luma in the correct direction.
    float lumaLocalAverage = 0.0;
    if(is1Steepest){
        // Switch the direction
        stepLength = -stepLength;
        lumaLocalAverage = 0.5 * (luma1 + lumaCenter);
    } else {
        lumaLocalAverage = 0.5 * (luma2 + lumaCenter);
    }

    // Shift UV in the correct direction by half a pixel.
    vec2 currentUv = coords;
    if(isHorizontal){
        currentUv.y += stepLength * 0.5;
    } else {
        currentUv.x += stepLength * 0.5;
    }

    // Compute offset (for each iteration step) in the right direction.
    vec2 offset = isHorizontal ? vec2(inverseScreenSize.x, 0.0) : vec2(0.0, inverseScreenSize.y);
    // Compute UVs to explore on each side of the edge, orthogonally.
    // The QUALITY allows us to step faster.
    vec2 uv1 = currentUv - offset * QUALITY(0);
    vec2 uv2 = currentUv + offset * QUALITY(0);

    // Read the lumas at both current extremities of the exploration segment,
    // and compute the delta wrt to the local average luma.
    float lumaEnd1 = sampleLuma(uv1);
    float lumaEnd2 = sampleLuma(uv2);
    lumaEnd1 -= lumaLocalAverage;
    lumaEnd2 -= lumaLocalAverage;

    // If the luma deltas at the current extremities is larger than the local gradient,
    // we have reached the side of the edge.
    bool reached1 = abs(lumaEnd1) >= gradientScaled;
    bool reached2 = abs(lumaEnd2) >= gradientScaled;
    bool reachedBoth = reached1 && reached2;

    // If the side is not reached, we continue to explore in this direction.
    if(!reached1){
        uv1 -= offset * QUALITY(1);
    }
    if(!reached2){
        uv2 += offset * QUALITY(1);
    }

    // If both sides have not been reached, continue to explore.
    if(!reachedBoth){
        for(int i = 2; i < dIterations; i++){
            // If needed, read luma in 1st direction, compute delta.
            if(!reached1){
                lumaEnd1 = sampleLuma(uv1);
                lumaEnd1 = lumaEnd1 - lumaLocalAverage;
            }
            // If needed, read luma in opposite direction, compute delta.
            if(!reached2){
                lumaEnd2 = sampleLuma(uv2);
                lumaEnd2 = lumaEnd2 - lumaLocalAverage;
            }
            // If the luma deltas at the current extremities is larger than the local gradient,
            // we have reached the side of the edge.
            reached1 = abs(lumaEnd1) >= gradientScaled;
            reached2 = abs(lumaEnd2) >= gradientScaled;
            reachedBoth = reached1 && reached2;

            // If the side is not reached, we continue to explore in this direction,
            // with a variable quality.
            if(!reached1){
                uv1 -= offset * QUALITY(i);
            }
            if(!reached2){
                uv2 += offset * QUALITY(i);
            }

            // If both sides have been reached, stop the exploration.
            if(reachedBoth){
                break;
            }
        }
    }

    // Compute the distances to each side edge of the edge (!).
    float distance1 = isHorizontal ? (coords.x - uv1.x) : (coords.y - uv1.y);
    float distance2 = isHorizontal ? (uv2.x - coords.x) : (uv2.y - coords.y);

    // In which direction is the side of the edge closer ?
    bool isDirection1 = distance1 < distance2;
    float distanceFinal = min(distance1, distance2);

    // Thickness of the edge.
    float edgeThickness = (distance1 + distance2);

    // Is the luma at center smaller than the local average ?
    bool isLumaCenterSmaller = lumaCenter < lumaLocalAverage;

    // If the luma at center is smaller than at its neighbour,
    // the delta luma at each end should be positive (same variation).
    bool correctVariation1 = (lumaEnd1 < 0.0) != isLumaCenterSmaller;
    bool correctVariation2 = (lumaEnd2 < 0.0) != isLumaCenterSmaller;

    // Only keep the result in the direction of the closer side of the edge.
    bool correctVariation = isDirection1 ? correctVariation1 : correctVariation2;

    // UV offset: read in the direction of the closest side of the edge.
    float pixelOffset = - distanceFinal / edgeThickness + 0.5;

    // If the luma variation is incorrect, do not offset.
    float finalOffset = correctVariation ? pixelOffset : 0.0;

    // Sub-pixel shifting
    // Full weighted average of the luma over the 3x3 neighborhood.
    float lumaAverage = (1.0 / 12.0) * (2.0 * (lumaDownUp + lumaLeftRight) + lumaLeftCorners + lumaRightCorners);
    // Ratio of the delta between the global average and the center luma,
    // over the luma range in the 3x3 neighborhood.
    float subPixelOffset1 = clamp(abs(lumaAverage - lumaCenter) / lumaRange, 0.0, 1.0);
    float subPixelOffset2 = (-2.0 * subPixelOffset1 + 3.0) * subPixelOffset1 * subPixelOffset1;
    // Compute a sub-pixel offset based on this delta.
    float subPixelOffsetFinal = subPixelOffset2 * subPixelOffset2 * float(dSubpixelQuality);

    // Pick the biggest of the two offsets.
    finalOffset = max(finalOffset, subPixelOffsetFinal);

    // Compute the final UV coordinates.
    vec2 finalUv = coords;
    if(isHorizontal){
        finalUv.y += finalOffset * stepLength;
    } else {
        finalUv.x += finalOffset * stepLength;
    }

    // Read the color at the new UV coordinates, and use it.
    gl_FragColor = texture2D(tColor, finalUv);
}        

/* old fxaa implementation
uniform highp sampler2D colormap;
varying highp vec2 vTexCoords;


// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0


vec4 applyFXAA(vec2 fragCoord, highp sampler2D tex)
{
    vec4 color;
    ivec2 dim = textureSize(tex,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec4 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP);
    vec4 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP);
    vec4 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP);
    vec4 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP);
    vec4 rgbM  = texture2D(tex, fragCoord );
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW.xyz, luma);
    float lumaNE = dot(rgbNE.xyz, luma);
    float lumaSW = dot(rgbSW.xyz, luma);
    float lumaSE = dot(rgbSE.xyz, luma);
    float lumaM  = dot(rgbM.xyz,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec4 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)) +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)));
    vec4 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5) +
        texture2D(tex, fragCoord  + dir * 0.5));

    float lumaB = dot(rgbB.xyz, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = rgbA;
    else
        color = rgbB;

    return color;
}


//DEFINEFRAGCOLOR
void main (void) {
    ivec2 dim = textureSize(colormap,0);

  gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        
*/`.replace("#define GLSLIFY 1",""),vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `.replace("#define GLSLIFY 1",""),uniforms:{}},Lr={opacity:{type:"f",value:1},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Dr={vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`.replace("#define GLSLIFY 1",""),fragmentShader:`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    vec3 color = vLight*vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
     
}

`.replace("#define GLSLIFY 1",""),uniforms:Lr},rr={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new B.Color(0,0,0)},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}},vi={fragmentShader:`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform float vHeight;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);

    vec4 adjust = projectionMatrix* vec4(norm,normal.z,1.0); 
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+vec4(adjust.xy,0.0,0.0);

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*vec4(center.x+normal.x, center.y,center.z,1.0); 
        vec4 ccoord = projectionMatrix*vec4(center.xyz,1.0);
        adjust = projectionMatrix* vec4(center.x+norm.x,center.y,center.z,1.0); 
        //subtract center 
        unadjusted.xyz -= ccoord.xyz;
        adjust.xyz -= ccoord.xyz;
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth;
        if(diff > outlineMaxPixels) {
            
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth;
            //adjsut reval by ratio of lengths
            rval *= fixlen/abs(adjust.x);
        }

    }
}

`.replace("#define GLSLIFY 1",""),uniforms:rr},bi={fragmentShader:`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a <= alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogNear != fogFar) {

        float depth = gl_FragCoord.z / gl_FragCoord.w; //probably wrong
        float fogFactor = smoothstep(fogNear, fogFar, depth);        
        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);
    }
}

`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`.replace("#define GLSLIFY 1",""),uniforms:{}},Ki={opacity:{type:"f",value:1},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Ai=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`,Ni={fragmentShader:[Ai,`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    color *= light;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`].join(`
`),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
    bool isperspective = (projectionMatrix[3][3] == 0.0);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(isperspective) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(isperspective) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }

    if(isperspective) { //perspective
      vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
      vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    } else {
      vec3 cr = normalize(cross(vec3(0.0,0.0,-1.0),norm))*radius;
      vec3 doublecr = normalize(cross(vec3(0.0,0.0,-1.0),cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;     
    }

    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`,uniforms:Ki},Ti={fragmentShader:Ai+`
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`,vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform mat4 projinv;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);

    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    float scale = 1.0;
    if(projectionMatrix[3][3] != 0.0) { //orthographic
        to.z -= outlinePushback;
        pt.z -= outlinePushback;
    } else { //perspective
        vec4 midbefore = pt;
        if(length(to.xyz) < length(pt)) {
            midbefore = to;
        }
        vec4 midafter = midbefore;
        midafter.xyz += normalize(midbefore.xyz)*outlinePushback;

        to.xyz += normalize(to.xyz)*outlinePushback;
        pt.xyz += normalize(pt.xyz)*outlinePushback;

        //figure out a scaling factor for radius to account for perspective setback
        vec4 midbeforer = vec4(midbefore.x+rad,midbefore.y, midbefore.z, midbefore.w);
        vec4 midafterr = vec4(midafter.x+rad,midafter.y, midafter.z, midafter.w);

        vec4 mb = projectionMatrix*midbefore;
        vec4 mbr = projectionMatrix*midbeforer;
        vec4 ma = projectionMatrix*midafter;
        vec4 mar = projectionMatrix*midafterr;
        mb /= mb.w;
        mbr /= mbr.w;
        ma /= ma.w;
        mar /= mar.w;
        scale = abs((mbr.x-mb.x)/(mar.x-ma.x));
        rad *= scale;
        r = abs(rad);
    }
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }

    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }

    if(outlineMaxPixels > 0.0) {
        vec4 cpos = mvPosition;
        vec4 unadjusted = projectionMatrix*vec4(cpos.x+abs(scale*radius), cpos.y,cpos.z,cpos.w); 
        vec4 ccoord = projectionMatrix*cpos;
        vec4 adjust = projectionMatrix*vec4(cpos.x+r,cpos.y,cpos.z,cpos.w); 
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        unadjusted.xyz -= ccoord.xyz/ccoord.w;
        adjust.xyz -= ccoord.xyz/ccoord.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth; //this should now be in pixels
        if(diff > outlineMaxPixels) {
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth; 
            vec4 pcoord = ccoord;
            pcoord.x += fixlen*pcoord.w;
            vec4 altc = projinv*pcoord;
            r= abs(altc.x-cpos.x);
        }
    }

    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`,uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new B.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0},projinv:{type:"mat4",value:[]}}},pi={opacity:{type:"f",value:1},fogColor:{type:"c",value:new B.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}},Br={fragmentShader:`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `.replace("#define GLSLIFY 1",""),vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`.replace("#define GLSLIFY 1",""),uniforms:pi},Zr={basic:It,blur:{fragmentShader:`const float INV_TOTAL_SAMPLES_FACTOR = 1.0 / 9.0;
uniform highp sampler2D inTex;
varying highp vec2 vTexCoords;
    
void main() {
 
 vec2 texelSize = 1.0 / vec2(textureSize(inTex,0));
 float blurred_visibility_factor = 0.0f;
 for (int t = -1; t <= 1; ++t) {
  for (int s = -1; s <= 1; ++s) {
   vec2 offset = vec2(float(s), float(t)) * texelSize;
   blurred_visibility_factor += texture2D(inTex, vTexCoords + offset).r;
  }
 }
    
 gl_FragDepthEXT = blurred_visibility_factor * INV_TOTAL_SAMPLES_FACTOR;
 
}`,vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `,uniforms:{}},instanced:Lt,lambert:zt,lambertdouble:li,outline:ui,screen:gi,screenaa:jr,ssao:{fragmentShader:`uniform sampler2D depthmap;
varying highp vec2 vTexCoords;
uniform float vWidth;
uniform float vHeight;
uniform float total_strength;
uniform float radius;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

//code for pseudorandom vector from chatgpt
float hash(vec3 p) {
    p = fract(p * vec3(0.1031, 0.1030, 0.0973));
    p += dot(p, p.yzx + 33.33);
    return fract((p.x + p.y) * p.z);
}

// Generate a pseudorandom vec3 from a seed vec3
vec3 pseudorandomVec3(vec3 seed) {
    vec3 randomVec;
    randomVec.x = hash(seed);
    randomVec.y = hash(seed + vec3(1.0, 0.0, 17.1));
    randomVec.z = hash(seed + vec3(0.0, 13.23, 0.0));
    return randomVec;
}

void main(void)
{   
   const float base = 0.2;
   const float area = 0.75;
   const int cycles = 1;

   const int samples = 64;
   vec3 sample_sphere[64] = vec3[](
      vec3(0.091258,-0.510164,0.000000),
      vec3(-0.204347,-0.872967,0.187199),
      vec3(0.009690,-0.263696,-0.110414),
      vec3(0.175208,-0.563987,0.228527),
      vec3(-0.001824,-0.003113,-0.000323),
      vec3(0.411134,-0.719869,-0.261530),
      vec3(-0.074272,-0.377368,0.276290),
      vec3(-0.147773,-0.381587,-0.284529),
      vec3(0.173317,-0.199635,0.063295),
      vec3(-0.186452,-0.199460,0.076965),
      vec3(0.143985,-0.308160,-0.307687),
      vec3(0.053194,-0.148286,0.169589),
      vec3(-0.547656,-0.486476,-0.317378),
      vec3(0.020804,-0.015092,-0.004574),
      vec3(-0.038006,-0.043165,0.054059),
      vec3(-0.094795,-0.443908,-0.731525),
      vec3(0.547552,-0.396466,0.461477),
      vec3(-0.176886,-0.089989,0.007315),
      vec3(0.074401,-0.048840,-0.074039),
      vec3(-0.008240,-0.075697,0.178197),
      vec3(-0.307880,-0.185053,-0.368943),
      vec3(0.309520,-0.108483,0.041646),
      vec3(-0.773478,-0.292946,0.538166),
      vec3(0.184487,-0.231594,-0.820065),
      vec3(0.207318,-0.100531,0.361797),
      vec3(-0.173306,-0.037737,-0.055289),
      vec3(0.548102,-0.105342,-0.253237),
      vec3(-0.119342,-0.043907,0.285162),
      vec3(-0.270247,-0.087861,-0.751357),
      vec3(0.449312,-0.039777,0.236146),
      vec3(-0.743773,-0.036095,0.196056),
      vec3(0.148819,-0.004300,-0.231448),
      vec3(0.008773,0.000809,0.051047),
      vec3(-0.461467,0.027390,-0.357386),
      vec3(0.169626,0.013338,-0.014053),
      vec3(-0.043786,0.007095,0.047331),
      vec3(0.004821,0.140371,-0.988260),
      vec3(0.092402,0.023994,0.101860),
      vec3(-0.295335,0.061530,-0.027372),
      vec3(0.024903,0.007537,-0.018901),
      vec3(-0.081463,0.125402,0.447794),
      vec3(-0.397119,0.231805,-0.631062),
      vec3(0.163853,0.059014,0.044905),
      vec3(-0.495220,0.214357,0.254139),
      vec3(0.306123,0.373687,-0.825715),
      vec3(0.021665,0.026737,0.053220),
      vec3(-0.208231,0.117129,-0.098685),
      vec3(0.139749,0.080968,-0.043086),
      vec3(-0.153599,0.182814,0.262090),
      vec3(-0.159673,0.496777,-0.743568),
      vec3(0.134797,0.117152,0.095753),
      vec3(-0.155626,0.120533,0.019395),
      vec3(0.042311,0.054462,-0.049709),
      vec3(0.001257,0.031288,0.034468),
      vec3(-0.002271,0.003199,-0.002304),
      vec3(0.662104,0.717307,0.033854),
      vec3(-0.373100,0.576021,0.308274),
      vec3(0.024233,0.231316,-0.173688),
      vec3(0.161311,0.420217,0.234273),
      vec3(-0.045248,0.078031,-0.010411),
      vec3(0.167453,0.376942,-0.094872),
      vec3(-0.056194,0.433247,0.173218),
      vec3(-0.016224,0.123149,-0.035569),
      vec3(0.067127,0.407641,0.028479)
   );

   float depth = texture2D(depthmap, vTexCoords).r;
   if(depth == 1.0) {
      discard;
   }

   vec4 screen_position = vec4(vTexCoords, depth,1.0);
   vec4 pos = projinv*screen_position;
   pos /= pos.w;
   vec3 position = pos.xyz;

   //approximate the normal from the depth map; I find this simpler
   //than trying to recompute the exact normal within every possible object shader

   //pixel offset positions in screen space
   ivec2 dim = textureSize(depthmap,0);
   vec2 offset1 = vec2(0.0,1.0/float(dim.y));
   vec2 offset2 = vec2(1.0/float(dim.x),0.0);
   float depth1 = texture2D(depthmap, vTexCoords + offset1).r;
   float depth2 = texture2D(depthmap, vTexCoords + offset2).r;
   
   vec3 p1 = vec3(screen_position.xy+offset1, depth1 - depth);
   vec3 p2 = vec3(screen_position.xy+offset2, depth2 - depth);

   //convert to model space
   vec4 pos1 = projinv*vec4(p1,1);
   pos1 /= pos1.w;
   vec4 pos2 = projinv*vec4(p2,1);
   pos2 /= pos2.w;

   vec3 normal = normalize(cross(pos1.xyz-position, pos2.xyz-position)); //model normal, important we normalize in model space

   //pseudo random number

   float occlusion = 0.0;
   for(int c = 0; c < cycles; c++) {
   vec3 random = normalize(pseudorandomVec3(position+float(c)));
   for(int i=0; i < samples; i++) {

      vec3 ray = radius * reflect(sample_sphere[i],random);
      vec3 hemi_ray = position + sign(dot(ray,normal)) * ray; //model space
      vec4 hemi_screen = projectionMatrix*vec4(hemi_ray,1.0);
      hemi_screen /= hemi_screen.w;
      
      float occ_depth = texture2D(depthmap, clamp(hemi_screen.xy,0.0,1.0)).r;
      float difference = hemi_screen.z - occ_depth;
      
      occlusion += step(0.0, difference) * (1.0-smoothstep(0.0, area, difference));
   }
   }
   float ao = 1.0 - total_strength * occlusion * (1.0 / float(cycles*samples));
   gl_FragDepthEXT = clamp(ao+base,0.0,1.0);

}`,vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `,uniforms:{total_strength:{type:"f",value:1},radius:{type:"f",value:5},projinv:{type:"mat4",value:[]}}},sphereimposter:Dr,sphereimposteroutline:vi,sprite:bi,stickimposter:Ni,stickimposteroutline:Ti,volumetric:Br};function Vi(Bt){let S={};for(const xe in Bt){S[xe]={},S[xe].type=Bt[xe].type;var ne=Bt[xe].value;ne instanceof B.Color?S[xe].value=ne.clone():typeof ne=="number"?S[xe].value=ne:ne instanceof Array?S[xe].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return S}const yi={clone:Vi};class Wi extends Me{constructor(S=50,ne=1,xe=.1,Ve=2e3,Le=!1){super(),this.projectionMatrix=new d.Matrix4,this.projectionMatrixInverse=new d.Matrix4,this.matrixWorldInverse=new d.Matrix4,this.fov=S,this.aspect=ne,this.near=xe,this.far=Ve;var yt=this.position.z;this.right=yt*Math.tan(Math.PI/180*S),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!Le,this.updateProjectionMatrix()}lookAt(S){this.matrix.lookAt(this.position,S,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof d.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error("Unimplemented math operation."))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}class tn{constructor(S,ne=1,xe=1e3){this.name="",this.color=new B.Color(S),this.near=ne,this.far=xe}clone(){return new tn(this.color.getHex(),this.near,this.far)}}class on{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(S){this.gl=S.context,this.renderer=S,this.precision=S.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var ne=0;this.sprite.vertices[ne++]=-1,this.sprite.vertices[ne++]=-1,this.sprite.vertices[ne++]=0,this.sprite.vertices[ne++]=0,this.sprite.vertices[ne++]=1,this.sprite.vertices[ne++]=-1,this.sprite.vertices[ne++]=1,this.sprite.vertices[ne++]=0,this.sprite.vertices[ne++]=1,this.sprite.vertices[ne++]=1,this.sprite.vertices[ne++]=1,this.sprite.vertices[ne++]=1,this.sprite.vertices[ne++]=-1,this.sprite.vertices[ne++]=1,this.sprite.vertices[ne++]=0,this.sprite.vertices[ne++]=1,ne=0,this.sprite.faces[ne++]=0,this.sprite.faces[ne++]=1,this.sprite.faces[ne++]=2,this.sprite.faces[ne++]=0,this.sprite.faces[ne++]=2,this.sprite.faces[ne++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(Zr.sprite,this.precision||1),this.sprite.attributes={};const xe={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,"position"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,"uv"),xe.uvOffset=this.gl.getUniformLocation(this.sprite.program,"uvOffset"),xe.uvScale=this.gl.getUniformLocation(this.sprite.program,"uvScale"),xe.rotation=this.gl.getUniformLocation(this.sprite.program,"rotation"),xe.scale=this.gl.getUniformLocation(this.sprite.program,"scale"),xe.alignment=this.gl.getUniformLocation(this.sprite.program,"alignment"),xe.color=this.gl.getUniformLocation(this.sprite.program,"color"),xe.map=this.gl.getUniformLocation(this.sprite.program,"map"),xe.opacity=this.gl.getUniformLocation(this.sprite.program,"opacity"),xe.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,"useScreenCoordinates"),xe.screenPosition=this.gl.getUniformLocation(this.sprite.program,"screenPosition"),xe.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,"modelViewMatrix"),xe.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,"projectionMatrix"),xe.fogNear=this.gl.getUniformLocation(this.sprite.program,"fogNear"),xe.fogFar=this.gl.getUniformLocation(this.sprite.program,"fogFar"),xe.fogColor=this.gl.getUniformLocation(this.sprite.program,"fogColor"),xe.alphaTest=this.gl.getUniformLocation(this.sprite.program,"alphaTest"),this.sprite.uniforms=xe}render(S,ne,xe,Ve,Le){var yt,lt,mt,Rt,Pt,Ot,gr,Zt,Cr,Ar;if(!this.gl)throw new Error("WebGLRenderer not initialized");let Ur=[];(yt=S?.__webglSprites)===null||yt===void 0||yt.forEach(M=>{(Le&&M.material.depthTest==0||!Le&&M.material.depthTest)&&Ur.push(M)});let _r=Ur.length;if(!_r)return;const Or=this.sprite.attributes,wr=this.sprite.uniforms;if(!wr)throw new Error("Uniforms not defined");var Ri=.5*xe,Qt=.5*Ve;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(Or.position),this.gl.enableVertexAttribArray(Or.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(Or.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(Or.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv(wr.projectionMatrix,!1,ne.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i(wr.map,0);var ri,ae=S.fog;let n,o,c;ae?(this.gl.uniform3f(wr.fogColor,ae.color.r,ae.color.g,ae.color.b),this.gl.uniform1f(wr.fogNear,ae.near),this.gl.uniform1f(wr.fogFar,ae.far)):(this.gl.uniform1f(wr.fogNear,0),this.gl.uniform1f(wr.fogFar,0));let f=[];for(ri=0;ri<_r;ri++)n=Ur[ri],o=n.material,o&&(o.depthTest!=0||Le)&&n.visible&&o.opacity!==0&&(o.useScreenCoordinates?n.z=-n.position.z:(n._modelViewMatrix.multiplyMatrices(ne.matrixWorldInverse,n.matrixWorld),n.z=-n._modelViewMatrix.elements[14]));for(Ur.sort(ur),ri=0;ri<_r;ri++)if(n=Ur[ri],o=n.material,o&&n.visible&&o.opacity!==0&&o.map&&o.map.image&&o.map.image.width){this.gl.uniform1f(wr?.alphaTest||null,o.alphaTest);var T=o.map.image.width,x=o.map.image.height;f[0]=T*this.renderer.devicePixelRatio/xe,f[1]=x*this.renderer.devicePixelRatio/Ve,o.useScreenCoordinates===!0?(this.gl.uniform1i(wr.useScreenCoordinates,1),this.gl.uniform3f(wr.screenPosition,(n.position.x*this.renderer.devicePixelRatio-Ri)/Ri,(Qt-n.position.y*this.renderer.devicePixelRatio)/Qt,Math.max(0,Math.min(1,n.position.z)))):(this.gl.uniform1i(wr.useScreenCoordinates,0),this.gl.uniformMatrix4fv(wr.modelViewMatrix,!1,n._modelViewMatrix.elements)),c=1/(o.scaleByViewport?Ve:1),f[0]*=c*n.scale.x,f[1]*=c*n.scale.y;let M=(lt=o?.alignment)===null||lt===void 0?void 0:lt.x,k=(mt=o?.alignment)===null||mt===void 0?void 0:mt.y;o.screenOffset&&(M=(M||0)+2*o.screenOffset.x/T,k=(k||0)+2*o.screenOffset.y/x),this.gl.uniform2f(wr.uvScale,((Rt=o?.uvScale)===null||Rt===void 0?void 0:Rt.x)||1,((Pt=o?.uvScale)===null||Pt===void 0?void 0:Pt.y)||1),this.gl.uniform2f(wr.uvOffset,((Ot=o?.uvOffset)===null||Ot===void 0?void 0:Ot.x)||0,((gr=o?.uvOffset)===null||gr===void 0?void 0:gr.y)||0),this.gl.uniform2f(wr.alignment,M||0,k||0),this.gl.uniform1f(wr.opacity,o.opacity),this.gl.uniform3f(wr.color,((Zt=o?.color)===null||Zt===void 0?void 0:Zt.r)||0,((Cr=o?.color)===null||Cr===void 0?void 0:Cr.g)||0,((Ar=o?.color)===null||Ar===void 0?void 0:Ar.b)||0),this.gl.uniform1f(wr.rotation,n.rotation),this.gl.uniform2fv(wr.scale,f),this.renderer.setDepthTest(o.depthTest),this.renderer.setDepthWrite(o.depthWrite),this.renderer.setTexture(o.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(S,ne){if(!this.gl)throw new Error("WebGL Rendering context not found");var xe=this.gl.createProgram();if(!xe)throw new Error("Error creating webgl program");var Ve=this.gl.createShader(this.gl.FRAGMENT_SHADER),Le=this.gl.createShader(this.gl.VERTEX_SHADER);if(!Ve)throw new Error("Unable to create fragment shader SpritePlugin.createProgram");if(!Le)throw new Error("Unable to create vertex shader SpritePlugin.createProgram");var yt="precision "+ne+` float;
`;if(this.gl.shaderSource(Ve,yt+S.fragmentShader),this.gl.shaderSource(Le,yt+S.vertexShader),this.gl.compileShader(Ve),this.gl.compileShader(Le),!this.gl.getShaderParameter(Ve,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(Le,this.gl.COMPILE_STATUS))throw new Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(Ve)} 
      ${this.gl.getShaderInfoLog(Le)}`);return this.gl.attachShader(xe,Ve),this.gl.attachShader(xe,Le),this.gl.linkProgram(xe),this.gl.getProgramParameter(xe,this.gl.LINK_STATUS)||console.error("Could not initialize shader"),xe}}function ur(Bt,S){return Bt.z!==S.z?S.z-Bt.z:S.id-Bt.id}var Gr=null,Kr=null;class qi{constructor(S){this.context=null,this.devicePixelRatio=1,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._offscreen=null,this._bitmap=null,this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._vector3=new d.Vector3,this._worldInverse=new d.Matrix4,this._projInverse=new d.Matrix4,this._textureMatrix=new d.Matrix4,this._fullProjModelMatrix=new d.Matrix4,this._fullProjModelMatrixInv=new d.Matrix4,this._direction=new d.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new on,this._screenshader=null,this._AOshader=null,this._blurshader=null,this._vertexattribpos=null,this._aovertexattribpos=null,this._blurvertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,this._shadingTexture=null,this._scratchTexture=null,this._upscale=null,this._AOstrength=1,this._AOradius=5,this.SHADE_TEXTURE=3,S=S||{},this.row=S.row,this.col=S.col,this.rows=S.rows,this.cols=S.cols,this._canvas=S.canvas!==void 0?S.canvas:document.createElement("canvas"),this._precision=S.precision!==void 0?S.precision:"highp",this._alpha=S.alpha===void 0||S.alpha,this._premultipliedAlpha=S.premultipliedAlpha===void 0||S.premultipliedAlpha,this._antialias=S.antialias!==void 0&&S.antialias,this._upscale=S.upscale!==void 0?S.upscale:this._antialias,this._preserveDrawingBuffer=S.preserveDrawingBuffer!==void 0&&S.preserveDrawingBuffer,this._clearColor=S.clearColor!==void 0?new B.Color(S.clearColor):new B.Color(0),this._clearAlpha=S.clearAlpha!==void 0?S.clearAlpha:0,this._outlineMaterial=new xr(S.outline),this._outlineSphereImposterMaterial=new kr(S.outline),this._outlineStickImposterMaterial=new wi(S.outline),this._outlineEnabled=!!S.outline,this._AOEnabled=!!S.ambientOcclusion,S.ambientOcclusion&&S.ambientOcclusion.strength!==void 0&&(this._AOstrength=parseFloat(S.ambientOcclusion.strength)),this._AOstrength==0&&(this._AOEnabled=!1),S.ambientOcclusion&&S.ambientOcclusion.radius!==void 0&&(this._AOradius=parseFloat(S.ambientOcclusion.radius)),this.domElement=this._canvas,this._canvas.id=S.id,S.containerWidth!=0&&S.containerHeight!=0&&(this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension("ANGLE_instanced_arrays"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension("EXT_frag_depth"),this._extFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._extColorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this.sprites.init(this))}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1(),regen:!1}}getContext(){return this._gl}getCanvas(){return this._canvas}isLost(){return this._gl==null||this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(S,ne){this._clearColor.setHex(S),this._clearAlpha=ne,this.isLost()||this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(S){this._outlineMaterial=new xr(S),this._outlineSphereImposterMaterial=new kr(S),this._outlineStickImposterMaterial=new wi(S),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}enableAmbientOcclusion(S){S&&(S.strength&&(this._AOstrength=S.strength),S.scale&&(this._AOradius=S.scale)),this._AOEnabled=this._AOstrength>0}disableAmbientOcclusion(){this._AOEnabled=!1}setViewport(){if(this._offscreen&&(this._offscreen.width=this._canvas.width,this._offscreen.height=this._canvas.height),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&!this.isLost()){var S=this._gl.drawingBufferWidth/this.cols,ne=this._gl.drawingBufferHeight/this.rows;this._viewportWidth=S,this._viewportHeight=ne,this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(S*this.col,ne*this.row,S,ne),this._gl.viewport(S*this.col,ne*this.row,S,ne)}}setSize(S,ne){this.devicePixelRatio=window.devicePixelRatio!==void 0?window.devicePixelRatio:1,this._upscale&&this.devicePixelRatio<2&&(this.devicePixelRatio=2),this._canvas.width=S*this.devicePixelRatio,this._canvas.height=ne*this.devicePixelRatio,this._canvas.style.width=S+"px",this._canvas.style.height=ne+"px",this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null?(this.isLost()||(this._viewportWidth=this._gl.drawingBufferWidth/this.cols,this._viewportHeight=this._gl.drawingBufferHeight/this.rows),this.setViewport()):(this._viewportWidth=this._canvas.width,this._viewportHeight=this._canvas.height,this.isLost()||this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight)),this.initFrameBuffer()}clear(S,ne,xe){var Ve=0;(S===void 0||S)&&(Ve|=this._gl.COLOR_BUFFER_BIT),(ne===void 0||ne)&&(Ve|=this._gl.DEPTH_BUFFER_BIT),(xe===void 0||xe)&&(Ve|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(Ve)}setMaterialFaces(S,ne){var xe=S.side===l,Ve=S.side===_;S.imposter||(Ve=ne?!Ve:Ve),this._oldDoubleSided!==xe&&(xe?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=xe),this._oldFlipSided!==Ve&&(Ve?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=Ve),this._gl.cullFace(this._gl.BACK)}setDepthTest(S){this._oldDepthTest!==S&&(S?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=S)}setDepthWrite(S){this._oldDepthWrite!==S&&(this._gl.depthMask(S),this._oldDepthWrite=S)}setBlending(S){S?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND)}initMaterial(S,ne,xe,Ve){var Le,yt;if(S.addEventListener("dispose",this.onMaterialDispose.bind(this)),yt=S.shaderID){var lt=Zr[yt];S.vertexShader=lt.vertexShader,S.fragmentShader=lt.fragmentShader,S.uniforms=yi.clone(lt.uniforms),S.shaded&&S.makeShaded(this.SHADE_TEXTURE)}Le={wireframe:S.wireframe,fragdepth:S.imposter,volumetric:S.volumetric,shaded:S.shaded},S.program=this.buildProgram(S.fragmentShader,S.vertexShader,S.uniforms,Le)}renderBuffer(S,ne,xe,Ve,Le,yt){var lt,mt;if(Ve.visible&&(lt=this.setProgram(S,ne,xe,Ve,yt,this))){mt=lt.attributes;var Rt,Pt,Ot=!1,gr=Ve.wireframe?1:0,Zt=16777215*Le.id+2*lt.id+gr;if(Zt!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=Zt,Ot=!0),Ot&&(this.disableAttributes(),mt.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Le.__webglVertexBuffer),this.enableAttribute(mt.position),this._gl.vertexAttribPointer(mt.position,3,this._gl.FLOAT,!1,0,0)),mt.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Le.__webglColorBuffer),this.enableAttribute(mt.color),this._gl.vertexAttribPointer(mt.color,3,this._gl.FLOAT,!1,0,0)),mt.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Le.__webglNormalBuffer),this.enableAttribute(mt.normal),this._gl.vertexAttribPointer(mt.normal,3,this._gl.FLOAT,!1,0,0)),mt.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Le.__webglOffsetBuffer),this.enableAttribute(mt.offset),this._gl.vertexAttribPointer(mt.offset,3,this._gl.FLOAT,!1,0,0)),mt.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Le.__webglRadiusBuffer),this.enableAttribute(mt.radius),this._gl.vertexAttribPointer(mt.radius,1,this._gl.FLOAT,!1,0,0))),yt instanceof ze){if(Ve.shaderID==="instanced"){var Cr=Ve.sphere.geometryGroups[0];Ot&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Le.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Cr.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Le.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Cr.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,Le.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,Cr.faceArray,this._gl.STATIC_DRAW)),Rt=Cr.faceidx,this._extInstanced.vertexAttribDivisorANGLE(mt.offset,1),this._extInstanced.vertexAttribDivisorANGLE(mt.radius,1),this._extInstanced.vertexAttribDivisorANGLE(mt.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,Rt,this._gl.UNSIGNED_SHORT,0,Le.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(mt.offset,0),this._extInstanced.vertexAttribDivisorANGLE(mt.radius,0),this._extInstanced.vertexAttribDivisorANGLE(mt.color,0)}else Ve.wireframe?(Pt=Le.lineidx,this.setLineWidth(Ve.wireframeLinewidth),Ot&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,Le.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,Pt,this._gl.UNSIGNED_SHORT,0)):(Rt=Le.faceidx,Ot&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,Le.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,Rt,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=Rt,this.info.render.faces+=Rt/3}else yt instanceof Ee&&(Pt=Le.vertices,this.setLineWidth(Ve.linewidth),this._gl.drawArrays(this._gl.LINES,0,Pt),this.info.render.calls++)}}clearShading(){this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}setShading(S,ne,xe){let Ve=S.__lights,Le=S.fog,yt=[];for(let Rt=0,Pt=S.__webglObjects.length;Rt<Pt;Rt++){let Ot=S.__webglObjects[Rt];Ot.render&&Ot[xe]&&yt.push(Ot)}if(yt.length==0)return;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,null,0),this.renderObjects(S.__webglObjects,!0,xe+"Depth",ne,Ve,Le,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._scratchTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._AOshader),this._currentProgram=this._AOshader,this.setDepthTest(-1),this.setDepthWrite(-1);let lt=this._AOshader.uniforms;this._gl.uniform1f(lt.total_strength,this._AOstrength),this._gl.uniform1f(lt.radius,this._AOradius),this._fullProjModelMatrix=new d.Matrix4,this._fullProjModelMatrixInv=new d.Matrix4;let mt=yt[0].object;this._fullProjModelMatrix.multiplyMatrices(ne.projectionMatrix,mt._modelViewMatrix),this._fullProjModelMatrixInv.getInverse(this._fullProjModelMatrix),this._gl.uniformMatrix4fv(lt.projectionMatrix,!1,this._fullProjModelMatrix.elements),this._gl.uniformMatrix4fv(lt.projinv,!1,this._fullProjModelMatrixInv.elements),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._aovertexattribpos),this._gl.vertexAttribPointer(this._aovertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._blurshader),this._currentProgram=this._blurshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._blurvertexattribpos),this._gl.vertexAttribPointer(this._blurvertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}render(S,ne){if(ne instanceof Wi==0)return void console.error("Renderer.render: camera is not an instance of Camera.");var xe,Ve,Le,yt,lt,mt=S.__lights,Rt=S.fog;if(this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&S.updateMatrixWorld(),ne.parent===void 0&&ne.updateMatrixWorld(),ne.matrixWorldInverse.getInverse(ne.matrixWorld),this.isLost())return;this.autoUpdateObjects&&this.initWebGLObjects(S),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(!0,!0,!0),lt=S.__webglObjects;let Pt=!1,Ot=this._AOEnabled;for(xe=0,Ve=lt.length;xe<Ve;xe++)yt=(Le=lt[xe]).object,Le.render=!1,yt.visible&&(this.setupMatrices(yt,ne),this.unrollBufferMaterial(Le),Le.render=!0,Le.volumetric&&(Pt=!0),Le.hasAO&&(Ot=!0));if(this.setBlending(!1),Ot&&this.setShading(S,ne,"opaque"),this.renderObjects(S.__webglObjects,!0,"opaque",ne,mt,Rt,!1),Ot&&this.clearShading(),this.renderSprites(S,ne,!1),this.renderObjects(S.__webglObjects,!0,"transparentDepth",ne,mt,Rt,!0),this.renderObjects(S.__webglObjects,!1,"transparent",ne,mt,Rt,!0),Pt&&this._fb&&(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,null,0),this.renderObjects(S.__webglObjects,!1,"volumetric",ne,mt,Rt,!0)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(S,ne,!0),this._bitmap){const gr=this._offscreen.transferToImageBitmap();this._bitmap.transferFromImageBitmap(gr),gr.close()}}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let S=this._viewportWidth,ne=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,S,ne),this._gl.viewport(0,0,S,ne),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,S,ne,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,S,ne,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._shadingTexture&&(this._gl.deleteTexture(this._shadingTexture),this._shadingTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,S,ne,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.deleteTexture(this._scratchTexture),this._scratchTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,S,ne,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.clearDepth(1),this._gl.clear(this._gl.DEPTH_BUFFER_BIT),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let S=this._viewportWidth,ne=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,S,ne),this._gl.viewport(0,0,S,ne),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._shadingTexture=this._gl.createTexture(),this._scratchTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var xe=this._antialias?Zr.screenaa:Zr.screen;this._screenshader=this.buildProgram(xe.fragmentShader,xe.vertexShader,xe.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,"vertexPosition"),this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array([1,1,-1,1,-1,-1,-1,-1,1,-1,1,1]),this._gl.STATIC_DRAW);let Ve=Zr.ssao;this._AOshader=this.buildProgram(Ve.fragmentShader,Ve.vertexShader,Ve.uniforms,{}),this._aovertexattribpos=this._gl.getAttribLocation(this._AOshader,"vertexPosition");let Le=Zr.blur;this._blurshader=this.buildProgram(Le.fragmentShader,Le.vertexShader,Le.uniforms,{}),this._blurvertexattribpos=this._gl.getAttribLocation(this._blurshader,"vertexPosition")}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(S){if(S.__webglObjects||(S.__webglObjects=[],S.__webglObjectsImmediate=[],S.__webglSprites=[],S.__webglFlares=[]),S.__objectsAdded.length){for(;S.__objectsAdded.length;)this.addObject(S.__objectsAdded[0],S),S.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;S.__objectsRemoved.length;)this.removeObject(S.__objectsRemoved[0],S),S.__objectsRemoved.splice(0,1);for(var ne=0,xe=S.__webglObjects.length;ne<xe;ne++)this.updateObject(S.__webglObjects[ne].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(S,ne){S!=null&&ne!=null||(S=this._canvas.width,ne=this._canvas.height);var xe=S/ne;return this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&(xe=S/this.cols/(ne/this.rows)),xe}setTexture(S,ne,xe){if(S.needsUpdate){S.__webglInit||(S.__webglInit=!0,S.addEventListener("dispose",this.onTextureDispose.bind(this)),S.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+ne);var Ve=xe?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(Ve,S.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,S.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,S.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,S.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,S.unpackAlignment);var Le=this.paramToGL(S.format),yt=this.paramToGL(S.type);if(xe)this.setTextureParameters(this._gl.TEXTURE_3D,S),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,S.image.size.z,S.image.size.y,S.image.size.x,0,this._gl.RED,this._gl.FLOAT,S.image.data);else{var lt=S.image,mt=lt.width,Rt=lt.height;mt===void 0&&(mt=lt.length,Le==this._gl.RGBA&&(mt/=4),Rt=1),this.setTextureParameters(this._gl.TEXTURE_2D,S),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,Le,Le,yt,S.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,Le,mt,Rt,0,Le,yt,S.image)}S.needsUpdate=!1,S.onUpdate&&S.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+ne),xe?this._gl.bindTexture(this._gl.TEXTURE_3D,S.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,S.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(S){this._enabledAttributes[S]||(this._gl.enableVertexAttribArray(S),this._enabledAttributes[S]=!0)}disableAttributes(){for(let S in this._enabledAttributes)this._enabledAttributes[S]&&(this._gl.disableVertexAttribArray(S),this._enabledAttributes[S]=!1)}setPolygonOffset(S,ne,xe){this._oldPolygonOffset!==S&&(S?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(S){S!==this._oldLineWidth&&(this._gl.lineWidth(S),this._oldLineWidth=S)}deallocateGeometry(S){if(S.__webglInit=void 0,S.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(S.__webglVertexBuffer),S.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(S.__webglColorBuffer),S.geometryGroups!==void 0)for(var ne=0,xe=S.groups;ne<xe;ne++){var Ve=S.geometryGroups[ne];Ve.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(Ve.__webglVertexBuffer),Ve.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(Ve.__webglColorBuffer),Ve.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(Ve.__webglNormalBuffer),Ve.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(Ve.__webglFaceBuffer),Ve.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(Ve.__webglLineBuffer)}}deallocateMaterial(S){var ne=S.program;if(ne!==void 0){var xe,Ve,Le;S.program=void 0;var yt=!1;for(xe=0,Ve=this._programs.length;xe<Ve;xe++)if((Le=this._programs[xe]).program===ne){Le.usedTimes--,Le.usedTimes===0&&(yt=!0);break}if(yt===!0){var lt=[];for(xe=0,Ve=this._programs.length;xe<Ve;xe++)(Le=this._programs[xe]).program!==ne&&lt.push(Le);this._programs=lt,this._gl.deleteProgram(ne),this.info.memory.programs--}}}deallocateTexture(S){if(S.image&&S.image.__webglTextureCube)this._gl.deleteTexture(S.image.__webglTextureCube);else{if(!S.__webglInit)return;S.__webglInit=!1,this._gl.deleteTexture(S.__webglTexture)}}onGeometryDispose(S){var ne=S.target;ne.removeEventListener("dispose",this.onGeometryDispose),this.deallocateGeometry(ne),this.info.memory.geometries--}onTextureDispose(S){var ne=S.target;ne.removeEventListener("dispose",this.onTextureDispose),this.deallocateTexture(ne),this.info.memory.textures--}onMaterialDispose(S){var ne=S.target;ne.removeEventListener("dispose",this.onMaterialDispose),this.deallocateMaterial(ne)}getShader(S,ne){var xe;return this.isWebGL1()||ne.startsWith("#version")||(ne=ne.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),ne=`#version 300 es
`+(ne=(ne=(ne=(ne=(ne=S=="fragment"?ne.replace(/varying/g,"in"):ne.replace(/varying/g,"out")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;")).replace(/gl_FragColor/g,"glFragColor"))),S==="fragment"?xe=this._gl.createShader(this._gl.FRAGMENT_SHADER):S==="vertex"&&(xe=this._gl.createShader(this._gl.VERTEX_SHADER)),xe==null?null:(this._gl.shaderSource(xe,ne),this._gl.compileShader(xe),this._gl.getShaderParameter(xe,this._gl.COMPILE_STATUS)?xe:(console.error(this._gl.getShaderInfoLog(xe)),console.error("could not initialize shader"),null))}buildProgram(S,ne,xe,Ve){var Le,yt,lt,mt,Rt=[];for(Le in Rt.push(S),Rt.push(ne),Ve)Rt.push(Le),Rt.push(Ve[Le]);for(mt=Rt.join(),Le=0,yt=this._programs.length;Le<yt;Le++){var Pt=this._programs[Le];if(Pt.code===mt)return Pt.usedTimes++,Pt.program}if(this.isWebGL1()&&Ve.volumetric)throw new Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");if((lt=this._gl.createProgram())==null)return null;var Ot,gr,Zt,Cr="precision "+this._precision+" float;",Ar=[Ve.volumetric?"#version 300 es":"",Cr].join(`
`),Ur=[Ve.volumetric?"#version 300 es":"",Ve.fragdepth&&this.isWebGL1()?"#extension GL_EXT_frag_depth: enable":"",Ve.shaded?"#define SHADED 1":"",Ve.wireframe?"#define WIREFRAME 1":"",Cr].join(`
`),_r=this.getShader("fragment",Ur+S),Or=this.getShader("vertex",Ar+ne);for(gr in Or!=null&&this._gl.attachShader(lt,Or),_r!=null&&this._gl.attachShader(lt,_r),this._gl.linkProgram(lt),this._gl.getProgramParameter(lt,this._gl.LINK_STATUS)||console.error("Could not initialize shader"),lt.uniforms={},lt.attributes={},Ot=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","vWidth","vHeight"],xe)Ot.push(gr);for(Zt=0;Zt<Ot.length;Zt++){var wr=Ot[Zt];lt.uniforms[wr]=this._gl.getUniformLocation(lt,wr)}for(Ot=["position","normal","color","lineDistance","offset","radius"],Zt=0;Zt<Ot.length;Zt++){var Ri=Ot[Zt];lt.attributes[Ri]=this._gl.getAttribLocation(lt,Ri)}return lt.id=this._programs_counter++,this._programs.push({program:lt,code:mt,usedTimes:1}),this.info.memory.programs=this._programs.length,lt}setProgram(S,ne,xe,Ve,Le,yt){if(Ve.needsUpdate&&(Ve.program&&this.deallocateMaterial(Ve),this.initMaterial(Ve,ne,xe,Le),Ve.needsUpdate=!1),Ve.program==null)return null;var lt=!1,mt=Ve.program,Rt=mt.uniforms,Pt=Ve.uniforms;if(mt!=this._currentProgram&&(this._gl.useProgram(mt),this._currentProgram=mt,lt=!0),Ve.id!=this._currentMaterialId&&(this._currentMaterialId=Ve.id,lt=!0),S!=this._currentCamera&&(this._currentCamera=S,lt=!0),Rt.projectionMatrix&&this._gl.uniformMatrix4fv(Rt.projectionMatrix,!1,S.projectionMatrix.elements),Rt.modelViewMatrix&&this._gl.uniformMatrix4fv(Rt.modelViewMatrix,!1,Le._modelViewMatrix.elements),Rt.normalMatrix&&this._gl.uniformMatrix3fv(Rt.normalMatrix,!1,Le._normalMatrix.elements),Rt.projinv&&(this._projInverse.getInverse(S.projectionMatrix),this._gl.uniformMatrix4fv(Rt.projinv,!1,this._projInverse.elements)),Rt.viewMatrix&&this._gl.uniformMatrix4fv(Rt.viewMatrix,!1,S.matrixWorldInverse.elements),Rt.vWidth&&this._gl.uniform1f(Rt.vWidth,this._viewportWidth),Rt.vHeight&&this._gl.uniform1f(Rt.vHeight,this._viewportHeight),lt){if(Pt.fogColor.value=xe.color,Pt.fogNear.value=xe.near,Pt.fogFar.value=xe.far,Ve.shaderID.startsWith("lambert")||Ve.shaderID==="instanced"||Ve.shaderID.endsWith("imposter"))this._lightsNeedUpdate&&(this.setupLights(mt,ne),this._lightsNeedUpdate=!1),Pt.directionalLightColor.value=this._lights.directional.colors,Pt.directionalLightDirection.value=this._lights.directional.positions;else if(Ve.shaderID.endsWith("outline"))Pt.outlineColor.value=Ve.outlineColor,Pt.outlineWidth.value=Ve.outlineWidth,Pt.outlinePushback.value=Ve.outlinePushback,Pt.outlineMaxPixels.value=Ve.outlineMaxPixels*this.devicePixelRatio;else if(Ve.shaderID==="volumetric"){Le._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse(Le._modelViewMatrix),this._projInverse.getInverse(S.projectionMatrix),this._textureMatrix.multiplyMatrices(Le.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(Rt.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(Rt.projinv,!1,this._projInverse.elements);let Ot=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);Pt.step.value=Le.material.unit*Ot,Pt.maxdepth.value=Le.material.maxdepth*Ot,Pt.transfermax.value=Le.material.transfermax,Pt.transfermin.value=Le.material.transfermin,Pt.subsamples.value=Le.material.subsamples,yt.setTexture(Le.material.transferfn,4,!1),yt.setTexture(Le.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}Pt.opacity.value=Ve.opacity,this.loadMaterialUniforms(Rt,Pt)}return Pt.shading&&(Pt.shading.value==3?(this._gl.activeTexture(this._gl.TEXTURE0+this.SHADE_TEXTURE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture)):console.error("Invalid shading textures.")),mt}loadMaterialUniforms(S,ne){var xe,Ve,Le,yt;for(xe in ne)S[xe]&&(Ve=ne[xe].type,Le=ne[xe].value,yt=S[xe],Ve==="f"?this._gl.uniform1f(yt,Le):Ve==="i"?this._gl.uniform1i(yt,Le):Ve==="fv"?this._gl.uniform3fv(yt,Le):Ve==="c"?this._gl.uniform3f(yt,Le.r,Le.g,Le.b):Ve==="f4"&&this._gl.uniform4f(yt,Le[0],Le[1],Le[2],Le[3]))}addObject(S,ne){var xe,Ve,Le,yt;if(!S.__webglInit&&(S.__webglInit=!0,S._modelViewMatrix=new d.Matrix4,S._normalMatrix=new d.Matrix3,S.geometry!==void 0&&S.geometry.__webglInit===void 0&&(S.geometry.__webglInit=!0,S.geometry.addEventListener("dispose",this.onGeometryDispose.bind(this))),S instanceof ze||S instanceof Ee))for(xe=0,Ve=(Le=S.geometry).geometryGroups.length;xe<Ve;xe++)(yt=Le.geometryGroups[xe]).id=this._geometryGroupCounter++,yt.__webglVertexBuffer||(S instanceof ze?(this.createMeshBuffers(yt),Le.elementsNeedUpdate=!0,Le.normalsNeedUpdate=!0):S instanceof Ee&&this.createLineBuffers(yt),Le.verticesNeedUpdate=!0,Le.colorsNeedUpdate=!0);if(!S.__webglActive){if(S instanceof ze||S instanceof Ee)for(xe=0,Ve=(Le=S.geometry).geometryGroups.length;xe<Ve;xe++)yt=Le.geometryGroups[xe],this.addBuffer(ne.__webglObjects,yt,S);else S instanceof dt&&ne.__webglSprites.push(S);S.__webglActive=!0}}updateObject(S){var ne,xe=S.geometry;if(S instanceof ze||S instanceof Ee){for(var Ve=0,Le=xe.geometryGroups.length;Ve<Le;Ve++)ne=xe.geometryGroups[Ve],(xe.verticesNeedUpdate||xe.elementsNeedUpdate||xe.colorsNeedUpdate||xe.normalsNeedUpdate)&&this.setBuffers(ne,this._gl.STATIC_DRAW);xe.verticesNeedUpdate=!1,xe.elementsNeedUpdate=!1,xe.normalsNeedUpdate=!1,xe.colorsNeedUpdate=!1,xe.buffersNeedUpdate=!1}}removeObject(S,ne){S instanceof ze||S instanceof Ee?this.removeInstances(ne.__webglObjects,S):S instanceof dt&&this.removeInstancesDirect(ne.__webglSprites,S),S.__webglActive=!1}removeInstances(S,ne){for(var xe=S.length-1;xe>=0;--xe)S[xe].object===ne&&S.splice(xe,1)}removeInstancesDirect(S,ne){for(var xe=S.length-1;xe>=0;--xe)S[xe]===ne&&S.splice(xe,1)}unrollBufferMaterial(S){var ne=S.object.material;if(ne.volumetric)S.opaque=null,S.transparent=null,S.volumetric=ne;else if(ne.transparent){if(S.opaque=null,S.volumetric=null,S.transparent=ne,!ne.wireframe){let xe=ne.clone();xe.opacity=0,S.transparentDepth=xe}}else{if(S.opaque=ne,S.transparent=null,S.volumetric=null,!ne.wireframe){let xe=ne.clone();xe.opacity=0,S.opaqueDepth=xe}ne.hasAO&&(S.hasAO=!0),(this._AOEnabled||S.hasAO)&&(S.opaqueShaded=ne.clone(),S.opaqueShaded.shaded=!0)}}setBuffers(S,ne){var xe=S.vertexArray,Ve=S.colorArray;if(S.__webglOffsetBuffer!==void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,xe,ne)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,xe,ne)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Ve,ne),S.normalArray&&S.__webglNormalBuffer!==void 0){var Le=S.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Le,ne)}if(S.radiusArray&&S.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,S.radiusArray,ne)),S.faceArray&&S.__webglFaceBuffer!==void 0){var yt=S.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,S.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,yt,ne)}if(S.lineArray&&S.__webglLineBuffer!==void 0){var lt=S.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,S.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,lt,ne)}}createMeshBuffers(S){S.radiusArray&&(S.__webglRadiusBuffer=this._gl.createBuffer()),S.useOffset&&(S.__webglOffsetBuffer=this._gl.createBuffer()),S.__webglVertexBuffer=this._gl.createBuffer(),S.__webglNormalBuffer=this._gl.createBuffer(),S.__webglColorBuffer=this._gl.createBuffer(),S.__webglFaceBuffer=this._gl.createBuffer(),S.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(S){S.__webglVertexBuffer=this._gl.createBuffer(),S.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(S,ne,xe){S.push({buffer:ne,object:xe,opaque:null,transparent:null})}setupMatrices(S,ne){S._modelViewMatrix.multiplyMatrices(ne.matrixWorldInverse,S.matrixWorld),S._normalMatrix.getInverse(S._modelViewMatrix),S._normalMatrix.transpose()}filterFallback(S){return this._gl.LINEAR}setTextureParameters(S,ne){S==this._gl.TEXTURE_2D?(this._gl.texParameteri(S,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(S,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(S,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(ne.magFilter)),this._gl.texParameteri(S,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(ne.minFilter))):(this._gl.texParameteri(S,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(S,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(S,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(S,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(S,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(S,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(S,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(S){return S===C?this._gl.UNSIGNED_BYTE:S===K?this._gl.RGBA:S===R?this._gl.NEAREST:0}setupLights(S,ne){var xe,Ve,Le,yt,lt,mt=this._lights,Rt=mt.directional.colors,Pt=mt.directional.positions,Ot=0,gr=0;for(xe=0,Ve=ne.length;xe<Ve;xe++)if(yt=(Le=ne[xe]).color,lt=Le.intensity,Le instanceof O){if(this._direction.getPositionFromMatrix(Le.matrixWorld),this._vector3.getPositionFromMatrix(Le.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;Pt[gr]=this._direction.x,Pt[gr+1]=this._direction.y,Pt[gr+2]=this._direction.z,Rt[gr]=yt.r*lt,Rt[gr+1]=yt.g*lt,Rt[gr+2]=yt.b*lt,gr+=3,Ot++}mt.ambient[0]=0,mt.ambient[1]=0,mt.ambient[2]=0,mt.directional.length=Ot}initGL(){try{if(!OffscreenCanvas||this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){if(!(this._gl=this._canvas.getContext("webgl2",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("experimental-webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw"Error creating WebGL context."}else(Kr==null||Kr.isContextLost())&&(Gr=new OffscreenCanvas(this._canvas.width,this._canvas.height),Kr=Gr.getContext("webgl2",{alpha:!0,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})),this._offscreen=Gr,this._gl=Kr,this._bitmap=this._canvas.getContext("bitmaprenderer",{alpha:!0});var S=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(S[6])}catch(ne){console.error(ne)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(S,ne,xe,Ve,Le,yt,lt){var mt,Rt,Pt,Ot,gr,Zt,Cr;ne?(gr=S.length-1,Zt=-1,Cr=-1):(gr=0,Zt=S.length,Cr=1);for(var Ar=gr;Ar!==Zt;Ar+=Cr)if((mt=S[Ar]).render){if(Rt=mt.object,Pt=mt.buffer,Ot=mt[xe],(mt.hasAO||this._AOEnabled)&&mt[xe+"Shaded"]&&(Ot=mt[xe+"Shaded"]),!Ot)continue;this.setBlending(lt),this.setDepthTest(Ot.depthTest),this.setDepthWrite(Ot.depthWrite),this.setPolygonOffset(Ot.polygonOffset,Ot.polygonOffsetFactor,Ot.polygonOffsetUnits);var Ur=Rt._modelViewMatrix.isReflected();if(this.setMaterialFaces(Ot,Ur),this.renderBuffer(Ve,Le,yt,Ot,Pt,Rt),(this._outlineEnabled||Ot.outline)&&!Ot.wireframe&&Ot.shaderID!=="basic"&&Ot.opacity!==0){let _r=this._outlineMaterial;Ot.shaderID=="sphereimposter"?_r=this._outlineSphereImposterMaterial:Ot.shaderID=="stickimposter"&&(_r=this._outlineStickImposterMaterial),this.renderBuffer(Ve,Le,yt,_r,Pt,Rt)}}}renderSprites(S,ne,xe){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(S,ne,this._currentWidth,this._currentHeight,xe),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}},392:(t,i,s)=>{s.r(i),s.d(i,{assignBonds:()=>l});var u=s(408);const h=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],_=4.95;function l(g,d){for(let v=0,R=g.length;v<R;v++)g[v].index||(g[v].index=v);const y={x:{y:{z:[]}}};for(let v=0;v<g.length;v++){const R=g[v],z=Math.floor(R.x/_),C=Math.floor(R.y/_),I=Math.floor(R.z/_);y[z]||(y[z]={}),y[z][C]||(y[z][C]={}),y[z][C][I]||(y[z][C][I]=[]),y[z][C][I].push(R)}function E(v,R){for(let z=0;z<v.length;z++){const C=v[z];for(let I=0;I<R.length;I++){const K=R[I];if((0,u.areConnected)(C,K,d)){const J=C.bonds.indexOf(K.index),X=K.bonds.indexOf(C.index);J===-1&&X===-1?(C.bonds.push(K.index),C.bondOrder.push(1),K.bonds.push(C.index),K.bondOrder.push(1)):J===-1?(C.bonds.push(K.index),C.bondOrder.push(K.bondOrder[X])):X===-1&&(K.bonds.push(C.index),K.bondOrder.push(C.bondOrder[J]))}}}}for(let v in y){const R=parseInt(v);for(let z in y[R]){const C=parseInt(z);for(let I in y[R][C]){const K=parseInt(I),J=y[R][C][K];for(let X=0;X<J.length;X++){const b=J[X];for(let F=X+1;F<J.length;F++){const B=J[F];(0,u.areConnected)(b,B,d)&&b.bonds.indexOf(B.index)==-1&&(b.bonds.push(B.index),b.bondOrder.push(1),B.bonds.push(b.index),B.bondOrder.push(1))}}for(let X=0;X<h.length;X++){const b=h[X];y[R+b.x]&&y[R+b.x][C+b.y]&&y[R+b.x][C+b.y][K+b.z]&&E(J,y[R+b.x][C+b.y][K+b.z])}}}}}},407:t=>{var i=(function(){for(var s,u=[],h=0;h<256;h++){s=h;for(var _=0;_<8;_++)s=1&s?3988292384^s>>>1:s>>>1;u[h]=s}return u})();t.exports=function(s,u,h,_){var l=i,g=_+h;s^=-1;for(var d=_;d<g;d++)s=s>>>8^l[255&(s^u[d])];return-1^s}},408:(t,i,s)=>{s.r(i),s.d(i,{areConnected:()=>_});var u=s(40);const h=new Set(["Na","K","Ca","Mg","Mn","Sr"]);function _(l,g,d){if(d&&d.unboundCations&&(h.has(l.elem)||h.has(g.elem)))return!1;let y=(0,u.bondLength)(l.elem)+(0,u.bondLength)(g.elem);y+=.25,y*=y;let E=l.x-g.x;if(E*=E,E>y)return!1;let v=l.y-g.y;if(v*=v,v>y)return!1;let R=l.z-g.z;if(R*=R,R>y)return!1;const z=E+v+R;return!(isNaN(z)||z<.5||z>y||l.altLoc!==g.altLoc&&l.altLoc.trim()!==""&&g.altLoc.trim()!=="")}},471:function(t,i){(function(s){function u(pe,Ee,ze){for(var dt=(pe.byteLength,0),nt=ze.length;nt>dt;dt++){var It=ze.charCodeAt(dt);if(128>It)pe.setUint8(Ee++,It>>>0&127);else if(2048>It)pe.setUint8(Ee++,It>>>6&31|192),pe.setUint8(Ee++,It>>>0&63|128);else if(65536>It)pe.setUint8(Ee++,It>>>12&15|224),pe.setUint8(Ee++,It>>>6&63|128),pe.setUint8(Ee++,It>>>0&63|128);else{if(!(1114112>It))throw new Error("bad codepoint "+It);pe.setUint8(Ee++,It>>>18&7|240),pe.setUint8(Ee++,It>>>12&63|128),pe.setUint8(Ee++,It>>>6&63|128),pe.setUint8(Ee++,It>>>0&63|128)}}}function h(pe){for(var Ee=0,ze=0,dt=pe.length;dt>ze;ze++){var nt=pe.charCodeAt(ze);if(128>nt)Ee+=1;else if(2048>nt)Ee+=2;else if(65536>nt)Ee+=3;else{if(!(1114112>nt))throw new Error("bad codepoint "+nt);Ee+=4}}return Ee}function _(pe,Ee,ze){var dt=typeof pe;if(dt==="string"){if(32>(nt=h(pe)))return Ee.setUint8(ze,160|nt),u(Ee,ze+1,pe),1+nt;if(256>nt)return Ee.setUint8(ze,217),Ee.setUint8(ze+1,nt),u(Ee,ze+2,pe),2+nt;if(65536>nt)return Ee.setUint8(ze,218),Ee.setUint16(ze+1,nt),u(Ee,ze+3,pe),3+nt;if(4294967296>nt)return Ee.setUint8(ze,219),Ee.setUint32(ze+1,nt),u(Ee,ze+5,pe),5+nt}if(pe instanceof Uint8Array){var nt=pe.byteLength,It=new Uint8Array(Ee.buffer);if(256>nt)return Ee.setUint8(ze,196),Ee.setUint8(ze+1,nt),It.set(pe,ze+2),2+nt;if(65536>nt)return Ee.setUint8(ze,197),Ee.setUint16(ze+1,nt),It.set(pe,ze+3),3+nt;if(4294967296>nt)return Ee.setUint8(ze,198),Ee.setUint32(ze+1,nt),It.set(pe,ze+5),5+nt}if(dt==="number"){if(!isFinite(pe))throw new Error("Number not finite: "+pe);if(Math.floor(pe)!==pe)return Ee.setUint8(ze,203),Ee.setFloat64(ze+1,pe),9;if(pe>=0){if(128>pe)return Ee.setUint8(ze,pe),1;if(256>pe)return Ee.setUint8(ze,204),Ee.setUint8(ze+1,pe),2;if(65536>pe)return Ee.setUint8(ze,205),Ee.setUint16(ze+1,pe),3;if(4294967296>pe)return Ee.setUint8(ze,206),Ee.setUint32(ze+1,pe),5;throw new Error("Number too big 0x"+pe.toString(16))}if(pe>=-32)return Ee.setInt8(ze,pe),1;if(pe>=-128)return Ee.setUint8(ze,208),Ee.setInt8(ze+1,pe),2;if(pe>=-32768)return Ee.setUint8(ze,209),Ee.setInt16(ze+1,pe),3;if(pe>=-2147483648)return Ee.setUint8(ze,210),Ee.setInt32(ze+1,pe),5;throw new Error("Number too small -0x"+(-pe).toString(16).substr(1))}if(pe===null)return Ee.setUint8(ze,192),1;if(dt==="boolean")return Ee.setUint8(ze,pe?195:194),1;if(dt==="object"){var ht=0,Lt=Array.isArray(pe);if(Lt)nt=pe.length;else{var Ut=Object.keys(pe);nt=Ut.length}if(16>nt?(Ee.setUint8(ze,nt|(Lt?144:128)),ht=1):65536>nt?(Ee.setUint8(ze,Lt?220:222),Ee.setUint16(ze+1,nt),ht=3):4294967296>nt&&(Ee.setUint8(ze,Lt?221:223),Ee.setUint32(ze+1,nt),ht=5),Lt)for(var zt=0;nt>zt;zt++)ht+=_(pe[zt],Ee,ze+ht);else for(zt=0;nt>zt;zt++){var mr=Ut[zt];ht+=_(mr,Ee,ze+ht),ht+=_(pe[mr],Ee,ze+ht)}return ht}throw new Error("Unknown type "+dt)}function l(pe){var Ee=typeof pe;if(Ee==="string"){if(32>(ze=h(pe)))return 1+ze;if(256>ze)return 2+ze;if(65536>ze)return 3+ze;if(4294967296>ze)return 5+ze}if(pe instanceof Uint8Array){if(256>(ze=pe.byteLength))return 2+ze;if(65536>ze)return 3+ze;if(4294967296>ze)return 5+ze}if(Ee==="number"){if(Math.floor(pe)!==pe)return 9;if(pe>=0){if(128>pe)return 1;if(256>pe)return 2;if(65536>pe)return 3;if(4294967296>pe)return 5;throw new Error("Number too big 0x"+pe.toString(16))}if(pe>=-32)return 1;if(pe>=-128)return 2;if(pe>=-32768)return 3;if(pe>=-2147483648)return 5;throw new Error("Number too small -0x"+pe.toString(16).substr(1))}if(Ee==="boolean"||pe===null)return 1;if(Ee==="object"){var ze,dt=0;if(Array.isArray(pe)){ze=pe.length;for(var nt=0;ze>nt;nt++)dt+=l(pe[nt])}else{var It=Object.keys(pe);for(ze=It.length,nt=0;ze>nt;nt++){var ht=It[nt];dt+=l(ht)+l(pe[ht])}}if(16>ze)return 1+dt;if(65536>ze)return 3+dt;if(4294967296>ze)return 5+dt;throw new Error("Array or object too long 0x"+ze.toString(16))}throw new Error("Unknown type "+Ee)}function g(pe){var Ee=new ArrayBuffer(l(pe));return _(pe,new DataView(Ee),0),new Uint8Array(Ee)}function d(pe,Ee,ze){return Ee?new pe(Ee.buffer,Ee.byteOffset,Ee.byteLength/(ze||1)):void 0}function y(pe){return d(DataView,pe)}function E(pe){return d(Uint8Array,pe)}function v(pe){return d(Int8Array,pe)}function R(pe){return d(Int32Array,pe,4)}function z(pe){return d(Float32Array,pe,4)}function C(pe,Ee){var ze=pe.length/2;Ee||(Ee=new Int16Array(ze));for(var dt=0,nt=0;ze>dt;++dt,nt+=2)Ee[dt]=pe[nt]<<8^pe[nt+1];return Ee}function I(pe,Ee){var ze=pe.length;Ee||(Ee=new Uint8Array(2*ze));for(var dt=y(Ee),nt=0;ze>nt;++nt)dt.setInt16(2*nt,pe[nt]);return E(Ee)}function K(pe,Ee){var ze=pe.length/4;Ee||(Ee=new Int32Array(ze));for(var dt=0,nt=0;ze>dt;++dt,nt+=4)Ee[dt]=pe[nt]<<24^pe[nt+1]<<16^pe[nt+2]<<8^pe[nt+3];return Ee}function J(pe,Ee){var ze=pe.length;Ee||(Ee=new Uint8Array(4*ze));for(var dt=y(Ee),nt=0;ze>nt;++nt)dt.setInt32(4*nt,pe[nt]);return E(Ee)}function X(pe,Ee){var ze=pe.length;Ee||(Ee=new Float32Array(ze/4));for(var dt=y(Ee),nt=y(pe),It=0,ht=0,Lt=ze/4;Lt>It;++It,ht+=4)dt.setFloat32(ht,nt.getFloat32(ht),!0);return Ee}function b(pe,Ee,ze){var dt=pe.length,nt=1/Ee;ze||(ze=new Float32Array(dt));for(var It=0;dt>It;++It)ze[It]=pe[It]*nt;return ze}function F(pe,Ee,ze){var dt=pe.length;ze||(ze=new Int32Array(dt));for(var nt=0;dt>nt;++nt)ze[nt]=Math.round(pe[nt]*Ee);return ze}function B(pe,Ee){var ze,dt;if(!Ee){var nt=0;for(ze=0,dt=pe.length;dt>ze;ze+=2)nt+=pe[ze+1];Ee=new pe.constructor(nt)}var It=0;for(ze=0,dt=pe.length;dt>ze;ze+=2)for(var ht=pe[ze],Lt=pe[ze+1],Ut=0;Lt>Ut;++Ut)Ee[It]=ht,++It;return Ee}function $(pe){if(pe.length===0)return new Int32Array;var Ee,ze,dt=2;for(Ee=1,ze=pe.length;ze>Ee;++Ee)pe[Ee-1]!==pe[Ee]&&(dt+=2);var nt=new Int32Array(dt),It=0,ht=1;for(Ee=1,ze=pe.length;ze>Ee;++Ee)pe[Ee-1]!==pe[Ee]?(nt[It]=pe[Ee-1],nt[It+1]=ht,ht=1,It+=2):++ht;return nt[It]=pe[pe.length-1],nt[It+1]=ht,nt}function Q(pe,Ee){var ze=pe.length;Ee||(Ee=new pe.constructor(ze)),ze&&(Ee[0]=pe[0]);for(var dt=1;ze>dt;++dt)Ee[dt]=pe[dt]+Ee[dt-1];return Ee}function N(pe,Ee){var ze=pe.length;Ee||(Ee=new pe.constructor(ze)),Ee[0]=pe[0];for(var dt=1;ze>dt;++dt)Ee[dt]=pe[dt]-pe[dt-1];return Ee}function ee(pe,Ee){var ze,dt,nt=pe instanceof Int8Array?127:32767,It=-nt-1,ht=pe.length;if(!Ee){var Lt=0;for(ze=0;ht>ze;++ze)pe[ze]<nt&&pe[ze]>It&&++Lt;Ee=new Int32Array(Lt)}for(ze=0,dt=0;ht>ze;){for(var Ut=0;pe[ze]===nt||pe[ze]===It;)Ut+=pe[ze],++ze;Ut+=pe[ze],++ze,Ee[dt]=Ut,++dt}return Ee}function Se(pe,Ee){var ze,dt=32767,nt=-dt-1,It=pe.length,ht=0;for(ze=0;It>ze;++ze)(zt=pe[ze])===0?++ht:zt>0?(ht+=Math.ceil(zt/dt),zt%dt===0&&(ht+=1)):(ht+=Math.ceil(zt/nt),zt%nt===0&&(ht+=1));var Lt=new Int16Array(ht),Ut=0;for(ze=0;It>ze;++ze){var zt;if((zt=pe[ze])>=0)for(;zt>=dt;)Lt[Ut]=dt,++Ut,zt-=dt;else for(;nt>=zt;)Lt[Ut]=nt,++Ut,zt-=nt;Lt[Ut]=zt,++Ut}return Lt}function ue(pe,Ee){return Q(B(pe),Ee)}function ge(pe){return $(N(pe))}function me(pe,Ee,ze){return b(B(pe,R(ze)),Ee,ze)}function Me(pe,Ee){return $(F(pe,Ee))}function ce(pe,Ee,ze){return b(Q(pe,R(ze)),Ee,ze)}function O(pe,Ee,ze){return N(F(pe,Ee),ze)}function he(pe,Ee,ze){return b(ee(pe,R(ze)),Ee,ze)}function se(pe,Ee,ze){var dt=ee(pe,R(ze));return ce(dt,Ee,z(dt))}function q(pe,Ee,ze){return Se(O(pe,Ee))}function Pe(pe){var Ee=y(pe),ze=Ee.getInt32(0),dt=Ee.getInt32(4),nt=pe.subarray(8,12);return[ze,pe=pe.subarray(12),dt,nt]}function fe(pe,Ee,ze,dt){var nt=new ArrayBuffer(12+dt.byteLength),It=new Uint8Array(nt),ht=new DataView(nt);return ht.setInt32(0,pe),ht.setInt32(4,Ee),ze&&It.set(ze,8),It.set(dt,12),It}function De(pe){return fe(2,pe.length,void 0,E(pe))}function He(pe){return fe(4,pe.length,void 0,J(pe))}function oe(pe,Ee){return fe(5,pe.length/Ee,J([Ee]),E(pe))}function Ce(pe){return fe(6,pe.length,void 0,J($(pe)))}function We(pe){return fe(8,pe.length,void 0,J(ge(pe)))}function qe(pe,Ee){return fe(9,pe.length,J([Ee]),J(Me(pe,Ee)))}function Fe(pe,Ee){return fe(10,pe.length,J([Ee]),I(q(pe,Ee)))}function rt(pe){var Ee={};return xr.forEach(function(ze){pe[ze]!==void 0&&(Ee[ze]=pe[ze])}),pe.bondAtomList&&(Ee.bondAtomList=He(pe.bondAtomList)),pe.bondOrderList&&(Ee.bondOrderList=De(pe.bondOrderList)),Ee.xCoordList=Fe(pe.xCoordList,1e3),Ee.yCoordList=Fe(pe.yCoordList,1e3),Ee.zCoordList=Fe(pe.zCoordList,1e3),pe.bFactorList&&(Ee.bFactorList=Fe(pe.bFactorList,100)),pe.atomIdList&&(Ee.atomIdList=We(pe.atomIdList)),pe.altLocList&&(Ee.altLocList=Ce(pe.altLocList)),pe.occupancyList&&(Ee.occupancyList=qe(pe.occupancyList,100)),Ee.groupIdList=We(pe.groupIdList),Ee.groupTypeList=He(pe.groupTypeList),pe.secStructList&&(Ee.secStructList=De(pe.secStructList)),pe.insCodeList&&(Ee.insCodeList=Ce(pe.insCodeList)),pe.sequenceIndexList&&(Ee.sequenceIndexList=We(pe.sequenceIndexList)),Ee.chainIdList=oe(pe.chainIdList,4),pe.chainNameList&&(Ee.chainNameList=oe(pe.chainNameList,4)),Ee}function ot(pe){function Ee(Ut){for(var zt={},mr=0;Ut>mr;mr++)zt[It()]=It();return zt}function ze(Ut){var zt=pe.subarray(ht,ht+Ut);return ht+=Ut,zt}function dt(Ut){var zt=pe.subarray(ht,ht+Ut);ht+=Ut;var mr=65535;if(Ut>mr){for(var li=[],Ci=0;Ci<zt.length;Ci+=mr)li.push(String.fromCharCode.apply(null,zt.subarray(Ci,Ci+mr)));return li.join("")}return String.fromCharCode.apply(null,zt)}function nt(Ut){for(var zt=new Array(Ut),mr=0;Ut>mr;mr++)zt[mr]=It();return zt}function It(){var Ut,zt,mr=pe[ht];if(!(128&mr))return ht++,mr;if((240&mr)==128)return ht++,Ee(zt=15&mr);if((240&mr)==144)return ht++,nt(zt=15&mr);if((224&mr)==160)return ht++,dt(zt=31&mr);if(!(224&~mr))return Ut=Lt.getInt8(ht),ht++,Ut;switch(mr){case 192:return ht++,null;case 194:return ht++,!1;case 195:return ht++,!0;case 196:return zt=Lt.getUint8(ht+1),ht+=2,ze(zt);case 197:return zt=Lt.getUint16(ht+1),ht+=3,ze(zt);case 198:return zt=Lt.getUint32(ht+1),ht+=5,ze(zt);case 202:return Ut=Lt.getFloat32(ht+1),ht+=5,Ut;case 203:return Ut=Lt.getFloat64(ht+1),ht+=9,Ut;case 204:return Ut=pe[ht+1],ht+=2,Ut;case 205:return Ut=Lt.getUint16(ht+1),ht+=3,Ut;case 206:return Ut=Lt.getUint32(ht+1),ht+=5,Ut;case 208:return Ut=Lt.getInt8(ht+1),ht+=2,Ut;case 209:return Ut=Lt.getInt16(ht+1),ht+=3,Ut;case 210:return Ut=Lt.getInt32(ht+1),ht+=5,Ut;case 217:return zt=Lt.getUint8(ht+1),ht+=2,dt(zt);case 218:return zt=Lt.getUint16(ht+1),ht+=3,dt(zt);case 219:return zt=Lt.getUint32(ht+1),ht+=5,dt(zt);case 220:return zt=Lt.getUint16(ht+1),ht+=3,nt(zt);case 221:return zt=Lt.getUint32(ht+1),ht+=5,nt(zt);case 222:return zt=Lt.getUint16(ht+1),ht+=3,Ee(zt);case 223:return zt=Lt.getUint32(ht+1),ht+=5,Ee(zt)}throw new Error("Unknown type 0x"+mr.toString(16))}var ht=0,Lt=new DataView(pe.buffer);return It()}function at(pe,Ee,ze,dt){switch(pe){case 1:return X(Ee);case 2:return v(Ee);case 3:return C(Ee);case 4:return K(Ee);case 5:return E(Ee);case 6:return B(K(Ee),new Uint8Array(ze));case 7:return B(K(Ee));case 8:return ue(K(Ee));case 9:return me(K(Ee),K(dt)[0]);case 10:return se(C(Ee),K(dt)[0]);case 11:return b(C(Ee),K(dt)[0]);case 12:return he(C(Ee),K(dt)[0]);case 13:return he(v(Ee),K(dt)[0]);case 14:return ee(C(Ee));case 15:return ee(v(Ee))}}function Ft(pe,Ee){var ze=(Ee=Ee||{}).ignoreFields,dt={};return kr.forEach(function(nt){var It=!!ze&&ze.indexOf(nt)!==-1,ht=pe[nt];It||ht===void 0||(ht instanceof Uint8Array?dt[nt]=at.apply(null,Pe(ht)):dt[nt]=ht)}),dt}function Ct(pe){return String.fromCharCode.apply(null,pe).replace(/\0/g,"")}function or(pe,Ee,ze){var dt,nt,It,ht,Lt,Ut,zt=(ze=ze||{}).firstModelOnly,mr=Ee.onModel,li=Ee.onChain,Ci=Ee.onGroup,ui=Ee.onAtom,gi=Ee.onBond,jr=0,Lr=0,Dr=0,rr=0,vi=0,bi=-1,Ki=pe.chainNameList,Ai=pe.secStructList,Ni=pe.insCodeList,Ti=pe.sequenceIndexList,pi=pe.atomIdList,Br=pe.bFactorList,Zr=pe.altLocList,Vi=pe.occupancyList,yi=pe.bondAtomList,Wi=pe.bondOrderList;for(dt=0,nt=pe.chainsPerModel.length;nt>dt&&!(zt&&jr>0);++dt){var tn=pe.chainsPerModel[jr];for(mr&&mr({chainCount:tn,modelIndex:jr}),It=0;tn>It;++It){var on=pe.groupsPerChain[Lr];if(li){var ur=Ct(pe.chainIdList.subarray(4*Lr,4*Lr+4)),Gr=null;Ki&&(Gr=Ct(Ki.subarray(4*Lr,4*Lr+4))),li({groupCount:on,chainIndex:Lr,modelIndex:jr,chainId:ur,chainName:Gr})}for(ht=0;on>ht;++ht){var Kr=pe.groupList[pe.groupTypeList[Dr]],qi=Kr.atomNameList.length;if(Ci){var Bt=null;Ai&&(Bt=Ai[Dr]);var S=null;pe.insCodeList&&(S=String.fromCharCode(Ni[Dr]));var ne=null;Ti&&(ne=Ti[Dr]),Ci({atomCount:qi,groupIndex:Dr,chainIndex:Lr,modelIndex:jr,groupId:pe.groupIdList[Dr],groupType:pe.groupTypeList[Dr],groupName:Kr.groupName,singleLetterCode:Kr.singleLetterCode,chemCompType:Kr.chemCompType,secStruct:Bt,insCode:S,sequenceIndex:ne})}for(Lt=0;qi>Lt;++Lt){if(ui){var xe=null;pi&&(xe=pi[rr]);var Ve=null;Br&&(Ve=Br[rr]);var Le=null;Zr&&(Le=String.fromCharCode(Zr[rr]));var yt=null;Vi&&(yt=Vi[rr]),ui({atomIndex:rr,groupIndex:Dr,chainIndex:Lr,modelIndex:jr,atomId:xe,element:Kr.elementList[Lt],atomName:Kr.atomNameList[Lt],formalCharge:Kr.formalChargeList[Lt],xCoord:pe.xCoordList[rr],yCoord:pe.yCoordList[rr],zCoord:pe.zCoordList[rr],bFactor:Ve,altLoc:Le,occupancy:yt})}rr+=1}if(gi){var lt=Kr.bondAtomList;for(Lt=0,Ut=Kr.bondOrderList.length;Ut>Lt;++Lt)gi({atomIndex1:rr-qi+lt[2*Lt],atomIndex2:rr-qi+lt[2*Lt+1],bondOrder:Kr.bondOrderList[Lt]})}Dr+=1}Lr+=1}if(vi=bi+1,bi=rr-1,gi&&yi)for(Lt=0,Ut=yi.length;Ut>Lt;Lt+=2){var mt=yi[Lt],Rt=yi[Lt+1];(mt>=vi&&bi>=mt||Rt>=vi&&bi>=Rt)&&gi({atomIndex1:mt,atomIndex2:Rt,bondOrder:Wi?Wi[Lt/2]:null})}jr+=1}}function ar(pe){return g(rt(pe))}function Mr(pe,Ee){return pe instanceof ArrayBuffer&&(pe=new Uint8Array(pe)),Ft(pe instanceof Uint8Array?ot(pe):pe,Ee)}function Er(pe,Ee,ze,dt){function nt(){try{var ht=Mr(It.response);ze(ht)}catch(Lt){dt(Lt)}}var It=new XMLHttpRequest;It.addEventListener("load",nt,!0),It.addEventListener("error",dt,!0),It.responseType="arraybuffer",It.open("GET",Ee+pe.toUpperCase()),It.send()}function pr(pe,Ee,ze){Er(pe,wi,Ee,ze)}function vr(pe,Ee,ze){Er(pe,Hi,Ee,ze)}var xr=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],fi=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],kr=xr.concat(fi),zr="v1.0.1",Di="//mmtf.rcsb.org/v1.0/",wi=Di+"full/",Hi=Di+"reduced/";s.encode=ar,s.decode=Mr,s.traverse=or,s.fetch=pr,s.fetchReduced=vr,s.version=zr,s.fetchUrl=wi,s.fetchReducedUrl=Hi,s.encodeMsgpack=g,s.encodeMmtf=rt,s.decodeMsgpack=ot,s.decodeMmtf=Ft})(i)},529:(t,i,s)=>{s.r(i),s.d(i,{Matrix3:()=>I,Matrix4:()=>z,Quaternion:()=>u,Ray:()=>K,Vector2:()=>h,Vector3:()=>C,clamp:()=>_,conversionMatrix3:()=>J,degToRad:()=>g});class u{constructor(b,F,B,$){this.x=b||0,this.y=F||0,this.z=B||0,this.w=$!==void 0?$:1}set(b,F,B,$){return this.x=b,this.y=F,this.z=B,this.w=$,this}copy(b){return this.x=b.x,this.y=b.y,this.z=b.z,this.w=b.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let b=this.length();return b===0?(this.x=0,this.y=0,this.z=0,this.w=1):(b=1/b,this.x*=b,this.y*=b,this.z*=b,this.w*=b),this}multiply(b){return this.multiplyQuaternions(this,b)}multiplyScalar(b){return this.x*=b,this.y*=b,this.z*=b,this.w*=b,this}multiplyQuaternions(b,F){const B=b.x,$=b.y,Q=b.z,N=b.w,ee=F.x,Se=F.y,ue=F.z,ge=F.w;return this.x=B*ge+N*ee+$*ue-Q*Se,this.y=$*ge+N*Se+Q*ee-B*ue,this.z=Q*ge+N*ue+B*Se-$*ee,this.w=N*ge-B*ee-$*Se-Q*ue,this}sub(b){return this.x-=b.x,this.y-=b.y,this.z-=b.z,this.w-=b.w,this}clone(){return new u(this.x,this.y,this.z,this.w)}setFromEuler(b){const F=Math.cos(b.x/2),B=Math.cos(b.y/2),$=Math.cos(b.z/2),Q=Math.sin(b.x/2),N=Math.sin(b.y/2),ee=Math.sin(b.z/2);return this.x=Q*B*$+F*N*ee,this.y=F*N*$-Q*B*ee,this.z=F*B*ee+Q*N*$,this.w=F*B*$-Q*N*ee,this}}class h{constructor(b,F){this.x=b||0,this.y=F||0}set(b,F){return this.x=b,this.y=F,this}subVectors(b,F){return this.x=b.x-F.x,this.y=b.y-F.y,this}copy(b){return this.x=b.x,this.y=b.y,this}clone(){return new h(this.x,this.y)}}function _(X,b,F){return Math.min(Math.max(X,b),F)}const l=Math.PI/180;function g(X){return X*l}var d,y,E,v,R;class z{constructor(b=1,F=0,B=0,$=0,Q=0,N=1,ee=0,Se=0,ue=0,ge=0,me=1,Me=0,ce=0,O=0,he=0,se=1){b!==void 0&&typeof b!="number"?this.elements=new Float32Array(b):(this.elements=new Float32Array(16),this.elements[0]=b,this.elements[4]=F,this.elements[8]=B,this.elements[12]=$,this.elements[1]=Q,this.elements[5]=N,this.elements[9]=ee,this.elements[13]=Se,this.elements[2]=ue,this.elements[6]=ge,this.elements[10]=me,this.elements[14]=Me,this.elements[3]=ce,this.elements[7]=O,this.elements[11]=he,this.elements[15]=se)}makeScale(b,F,B){throw new Error("Method not implemented.")}set(b,F,B,$,Q,N,ee,Se,ue,ge,me,Me,ce,O,he,se){const q=this.elements;return q[0]=b,q[4]=F,q[8]=B,q[12]=$,q[1]=Q,q[5]=N,q[9]=ee,q[13]=Se,q[2]=ue,q[6]=ge,q[10]=me,q[14]=Me,q[3]=ce,q[7]=O,q[11]=he,q[15]=se,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(b){const F=b.elements;return this.set(F[0],F[4],F[8],F[12],F[1],F[5],F[9],F[13],F[2],F[6],F[10],F[14],F[3],F[7],F[11],F[15]),this}matrix3FromTopLeft(){const b=this.elements;return new I(b[0],b[4],b[8],b[1],b[5],b[9],b[2],b[6],b[10])}setRotationFromEuler(b,F){const B=this.elements,{x:$,y:Q,z:N}=b,ee=Math.cos($),Se=Math.sin($),ue=Math.cos(Q),ge=Math.sin(Q),me=Math.cos(N),Me=Math.sin(N);if(F===void 0||F==="XYZ"){const ce=ee*me,O=ee*Me,he=Se*me,se=Se*Me;B[0]=ue*me,B[4]=-ue*Me,B[8]=ge,B[1]=O+he*ge,B[5]=ce-se*ge,B[9]=-Se*ue,B[2]=se-ce*ge,B[6]=he+O*ge,B[10]=ee*ue}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${F}`);return this}setRotationFromQuaternion(b){const F=this.elements,{x:B,y:$,z:Q,w:N}=b,ee=B+B,Se=$+$,ue=Q+Q,ge=B*ee,me=B*Se,Me=B*ue,ce=$*Se,O=$*ue,he=Q*ue,se=N*ee,q=N*Se,Pe=N*ue;return F[0]=1-(ce+he),F[4]=me-Pe,F[8]=Me+q,F[1]=me+Pe,F[5]=1-(ge+he),F[9]=O-se,F[2]=Me-q,F[6]=O+se,F[10]=1-(ge+ce),this}multiplyMatrices(b,F){const B=b.elements,$=F.elements,Q=this.elements,N=B[0],ee=B[4],Se=B[8],ue=B[12],ge=B[1],me=B[5],Me=B[9],ce=B[13],O=B[2],he=B[6],se=B[10],q=B[14],Pe=B[3],fe=B[7],De=B[11],He=B[15],oe=$[0],Ce=$[4],We=$[8],qe=$[12],Fe=$[1],rt=$[5],ot=$[9],at=$[13],Ft=$[2],Ct=$[6],or=$[10],ar=$[14],Mr=$[3],Er=$[7],pr=$[11],vr=$[15];return Q[0]=N*oe+ee*Fe+Se*Ft+ue*Mr,Q[4]=N*Ce+ee*rt+Se*Ct+ue*Er,Q[8]=N*We+ee*ot+Se*or+ue*pr,Q[12]=N*qe+ee*at+Se*ar+ue*vr,Q[1]=ge*oe+me*Fe+Me*Ft+ce*Mr,Q[5]=ge*Ce+me*rt+Me*Ct+ce*Er,Q[9]=ge*We+me*ot+Me*or+ce*pr,Q[13]=ge*qe+me*at+Me*ar+ce*vr,Q[2]=O*oe+he*Fe+se*Ft+q*Mr,Q[6]=O*Ce+he*rt+se*Ct+q*Er,Q[10]=O*We+he*ot+se*or+q*pr,Q[14]=O*qe+he*at+se*ar+q*vr,Q[3]=Pe*oe+fe*Fe+De*Ft+He*Mr,Q[7]=Pe*Ce+fe*rt+De*Ct+He*Er,Q[11]=Pe*We+fe*ot+De*or+He*pr,Q[15]=Pe*qe+fe*at+De*ar+He*vr,this}multiplyScalar(b){const F=this.elements;return F[0]*=b,F[4]*=b,F[8]*=b,F[12]*=b,F[1]*=b,F[5]*=b,F[9]*=b,F[13]*=b,F[2]*=b,F[6]*=b,F[10]*=b,F[14]*=b,F[3]*=b,F[7]*=b,F[11]*=b,F[15]*=b,this}makeTranslation(b,F,B){return this.set(1,0,0,b,0,1,0,F,0,0,1,B,0,0,0,1),this}snap(b){const F=Math.pow(10,4),B=this.elements;for(let $=0;$<16;$++){const Q=Math.round(B[$]);Q===Math.round(B[$]*F)/F&&(B[$]=Q)}return this}transpose(){const b=this.elements;let F;return F=b[1],b[1]=b[4],b[4]=F,F=b[2],b[2]=b[8],b[8]=F,F=b[6],b[6]=b[9],b[9]=F,F=b[3],b[3]=b[12],b[12]=F,F=b[7],b[7]=b[13],b[13]=F,F=b[11],b[11]=b[14],b[14]=F,this}setPosition(b){const F=this.elements;return F[12]=b.x,F[13]=b.y,F[14]=b.z,this}translate(b){const F=this.elements;return F[12]+=b.x,F[13]+=b.y,F[14]+=b.z,this}getInverse(b,F){const B=this.elements,$=b.elements,Q=$[0],N=$[4],ee=$[8],Se=$[12],ue=$[1],ge=$[5],me=$[9],Me=$[13],ce=$[2],O=$[6],he=$[10],se=$[14],q=$[3],Pe=$[7],fe=$[11],De=$[15];B[0]=me*se*Pe-Me*he*Pe+Me*O*fe-ge*se*fe-me*O*De+ge*he*De,B[4]=Se*he*Pe-ee*se*Pe-Se*O*fe+N*se*fe+ee*O*De-N*he*De,B[8]=ee*Me*Pe-Se*me*Pe+Se*ge*fe-N*Me*fe-ee*ge*De+N*me*De,B[12]=Se*me*O-ee*Me*O-Se*ge*he+N*Me*he+ee*ge*se-N*me*se,B[1]=Me*he*q-me*se*q-Me*ce*fe+ue*se*fe+me*ce*De-ue*he*De,B[5]=ee*se*q-Se*he*q+Se*ce*fe-Q*se*fe-ee*ce*De+Q*he*De,B[9]=Se*me*q-ee*Me*q-Se*ue*fe+Q*Me*fe+ee*ue*De-Q*me*De,B[13]=ee*Me*ce-Se*me*ce+Se*ue*he-Q*Me*he-ee*ue*se+Q*me*se,B[2]=ge*se*q-Me*O*q+Me*ce*Pe-ue*se*Pe-ge*ce*De+ue*O*De,B[6]=Se*O*q-N*se*q-Se*ce*Pe+Q*se*Pe+N*ce*De-Q*O*De,B[10]=N*Me*q-Se*ge*q+Se*ue*Pe-Q*Me*Pe-N*ue*De+Q*ge*De,B[14]=Se*ge*ce-N*Me*ce-Se*ue*O+Q*Me*O+N*ue*se-Q*ge*se,B[3]=me*O*q-ge*he*q-me*ce*Pe+ue*he*Pe+ge*ce*fe-ue*O*fe,B[7]=N*he*q-ee*O*q+ee*ce*Pe-Q*he*Pe-N*ce*fe+Q*O*fe,B[11]=ee*ge*q-N*me*q-ee*ue*Pe+Q*me*Pe+N*ue*fe-Q*ge*fe,B[15]=N*me*ce-ee*ge*ce+ee*ue*O-Q*me*O-N*ue*he+Q*ge*he;const He=Q*B[0]+ue*B[4]+ce*B[8]+q*B[12];if(He===0){const oe="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(F)throw new Error(oe);return console.warn(oe),this.identity(),this}return this.multiplyScalar(1/He),this}isReflected(){const b=this.elements,F=b[0],B=b[4],$=b[8],Q=b[1],N=b[5],ee=b[9],Se=b[2],ue=b[6],ge=b[10];return F*N*ge+Q*ue*$+Se*B*ee-Se*N*$-Q*B*ge-F*ue*ee<0}scale(b){const F=this.elements,{x:B}=b,{y:$}=b,{z:Q}=b;return F[0]*=B,F[4]*=$,F[8]*=Q,F[1]*=B,F[5]*=$,F[9]*=Q,F[2]*=B,F[6]*=$,F[10]*=Q,F[3]*=B,F[7]*=$,F[11]*=Q,this}getMaxScaleOnAxis(){const b=this.elements,F=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],B=b[4]*b[4]+b[5]*b[5]+b[6]*b[6],$=b[8]*b[8]+b[9]*b[9]+b[10]*b[10];return Math.sqrt(Math.max(F,Math.max(B,$)))}makeFrustum(b,F,B,$,Q,N){const ee=this.elements,Se=2*Q/(F-b),ue=2*Q/($-B),ge=(F+b)/(F-b),me=($+B)/($-B),Me=-(N+Q)/(N-Q),ce=-2*N*Q/(N-Q);return ee[0]=Se,ee[4]=0,ee[8]=ge,ee[12]=0,ee[1]=0,ee[5]=ue,ee[9]=me,ee[13]=0,ee[2]=0,ee[6]=0,ee[10]=Me,ee[14]=ce,ee[3]=0,ee[7]=0,ee[11]=-1,ee[15]=0,this}makePerspective(b,F,B,$){const Q=B*Math.tan(g(.5*b)),N=-Q,ee=N*F,Se=Q*F;return this.makeFrustum(ee,Se,N,Q,B,$)}makeOrthographic(b,F,B,$,Q,N){const ee=this.elements,Se=1/(F-b),ue=1/(B-$),ge=1/(N-Q),me=(F+b)*Se,Me=(B+$)*ue,ce=(N+Q)*ge;return ee[0]=2*Se,ee[4]=0,ee[8]=0,ee[12]=-me,ee[1]=0,ee[5]=2*ue,ee[9]=0,ee[13]=-Me,ee[2]=0,ee[6]=0,ee[10]=-2*ge,ee[14]=-ce,ee[3]=0,ee[7]=0,ee[11]=0,ee[15]=1,this}isEqual(b){const F=b.elements,B=this.elements;return B[0]===F[0]&&B[4]===F[4]&&B[8]===F[8]&&B[12]===F[12]&&B[1]===F[1]&&B[5]===F[5]&&B[9]===F[9]&&B[13]===F[13]&&B[2]===F[2]&&B[6]===F[6]&&B[10]===F[10]&&B[14]===F[14]&&B[3]===F[3]&&B[7]===F[7]&&B[11]===F[11]&&B[15]===F[15]}clone(){const b=this.elements;return new z(b[0],b[4],b[8],b[12],b[1],b[5],b[9],b[13],b[2],b[6],b[10],b[14],b[3],b[7],b[11],b[15])}isIdentity(){const b=this.elements;return b[0]===1&&b[4]===0&&b[8]===0&&b[12]===0&&b[1]===0&&b[5]===1&&b[9]===0&&b[13]===0&&b[2]===0&&b[6]===0&&b[10]===1&&b[14]===0&&b[3]===0&&b[7]===0&&b[11]===0&&b[15]===1}isNearlyIdentity(b){return this.clone().snap(b).isIdentity()}getScale(b){const F=this.elements;return b=b||new C,E.set(F[0],F[1],F[2]),v.set(F[4],F[5],F[6]),R.set(F[8],F[9],F[10]),b.x=E.length(),b.y=v.length(),b.z=R.length(),b}lookAt(b,F,B){const $=this.elements;return R.subVectors(b,F).normalize(),R.length()===0&&(R.z=1),E.crossVectors(B,R).normalize(),E.length()===0&&(R.x+=1e-4,E.crossVectors(B,R).normalize()),v.crossVectors(R,E),$[0]=E.x,$[4]=v.x,$[8]=R.x,$[1]=E.y,$[5]=v.y,$[9]=R.y,$[2]=E.z,$[6]=v.z,$[10]=R.z,this}compose(b,F,B){const $=this.elements;return d.identity(),d.setRotationFromQuaternion(F),y.makeScale(B.x,B.y,B.z),this.multiplyMatrices(d,y),$[12]=b.x,$[13]=b.y,$[14]=b.z,this}}d=new z,y=new z;class C{constructor(b,F,B){this.x=b||0,this.y=F||0,this.z=B||0,this.atomid=void 0}set(b,F,B){return this.x=b,this.y=F,this.z=B,this}copy(b){return this.x=b.x,this.y=b.y,this.z=b.z,this}add(b){return this.x+=b.x,this.y+=b.y,this.z+=b.z,this}addVectors(b,F){return this.x=b.x+F.x,this.y=b.y+F.y,this.z=b.z+F.z,this}multiplyVectors(b,F){return this.x=b.x*F.x,this.y=b.y*F.y,this.z=b.z*F.z,this}sub(b){return this.x-=b.x,this.y-=b.y,this.z-=b.z,this}subVectors(b,F){return this.x=b.x-F.x,this.y=b.y-F.y,this.z=b.z-F.z,this}multiplyScalar(b){return this.x*=b,this.y*=b,this.z*=b,this}divideScalar(b){return b!==0?(this.x/=b,this.y/=b,this.z/=b):(this.x=0,this.y=0,this.z=0),this}max(b){return this.x=Math.max(this.x,b.x),this.y=Math.max(this.y,b.y),this.z=Math.max(this.z,b.z),this}min(b){return this.x=Math.min(this.x,b.x),this.y=Math.min(this.y,b.y),this.z=Math.min(this.z,b.z),this}distanceTo(b){return Math.sqrt(this.distanceToSquared(b))}distanceToSquared(b){const F=this.x-b.x,B=this.y-b.y,$=this.z-b.z;return F*F+B*B+$*$}applyMatrix3(b){const{x:F}=this,{y:B}=this,{z:$}=this,Q=b.elements;return this.x=Q[0]*F+Q[3]*B+Q[6]*$,this.y=Q[1]*F+Q[4]*B+Q[7]*$,this.z=Q[2]*F+Q[5]*B+Q[8]*$,this}applyMatrix4(b){const{x:F}=this,{y:B}=this,{z:$}=this,Q=b.elements;return this.x=Q[0]*F+Q[4]*B+Q[8]*$+Q[12],this.y=Q[1]*F+Q[5]*B+Q[9]*$+Q[13],this.z=Q[2]*F+Q[6]*B+Q[10]*$+Q[14],this}applyProjection(b){const{x:F}=this,{y:B}=this,{z:$}=this,Q=b.elements,N=Q[3]*F+Q[7]*B+Q[11]*$+Q[15];return this.x=(Q[0]*F+Q[4]*B+Q[8]*$+Q[12])/N,this.y=(Q[1]*F+Q[5]*B+Q[9]*$+Q[13])/N,this.z=(Q[2]*F+Q[6]*B+Q[10]*$+Q[14])/N,this}applyQuaternion(b){const{x:F}=this,{y:B}=this,{z:$}=this,Q=b.x,N=b.y,ee=b.z,Se=b.w,ue={};ue.x=2*(B*ee-$*N),ue.y=2*($*Q-F*ee),ue.z=2*(F*N-B*Q);const ge={};return ge.x=ue.y*ee-ue.z*N,ge.y=ue.z*Q-ue.x*ee,ge.z=ue.x*N-ue.y*Q,this.x=F+Se*ue.x+ge.x,this.y=B+Se*ue.y+ge.y,this.z=$+Se*ue.z+ge.z,this}negate(){return this.multiplyScalar(-1)}dot(b){return this.x*b.x+this.y*b.y+this.z*b.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(b){const{x:F}=this,{y:B}=this,{z:$}=this;return this.x=B*b.z-$*b.y,this.y=$*b.x-F*b.z,this.z=F*b.y-B*b.x,this}crossVectors(b,F){return this.x=b.y*F.z-b.z*F.y,this.y=b.z*F.x-b.x*F.z,this.z=b.x*F.y-b.y*F.x,this}equals(b){return this.x==b.x&&this.y==b.y&&this.z==b.z}getPositionFromMatrix(b){return this.x=b.elements[12],this.y=b.elements[13],this.z=b.elements[14],this}setEulerFromRotationMatrix(b,F){const B=b.elements,$=B[0],Q=B[4],N=B[8],ee=B[5],Se=B[9],ue=B[6],ge=B[10];return F===void 0||F==="XYZ"?(this.y=Math.asin(_(N,-1,1)),Math.abs(N)<.99999?(this.x=Math.atan2(-Se,ge),this.z=Math.atan2(-Q,$)):(this.x=Math.atan2(ue,ee),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${F}`),this}rotateAboutVector(b,F){b.normalize();const B=Math.cos(F),$=Math.sin(F),Q=this.clone().multiplyScalar(B),N=b.clone().cross(this).multiplyScalar($),ee=b.clone().multiplyScalar(b.clone().dot(this)).multiplyScalar(1-B),Se=Q.add(N).add(ee);return this.x=Se.x,this.y=Se.y,this.z=Se.z,this}setFromMatrixPosition(b){const F=b.elements;return this.x=F[12],this.y=F[13],this.z=F[14],this}transformDirection(b){const{x:F}=this,{y:B}=this,{z:$}=this,Q=b.elements;return this.x=Q[0]*F+Q[4]*B+Q[8]*$,this.y=Q[1]*F+Q[5]*B+Q[9]*$,this.z=Q[2]*F+Q[6]*B+Q[10]*$,this.normalize()}clone(){return new C(this.x,this.y,this.z)}unproject(b){const F=d;return F.multiplyMatrices(b.matrixWorld,F.getInverse(b.projectionMatrix)),this.applyMatrix4(F)}}E=new C,v=new C,R=new C;class I{constructor(b=1,F=0,B=0,$=0,Q=1,N=0,ee=0,Se=0,ue=1){this.elements=new Float32Array(9),this.set(b,F,B,$,Q,N,ee,Se,ue)}set(b,F,B,$,Q,N,ee,Se,ue){const ge=this.elements;return ge[0]=b,ge[3]=F,ge[6]=B,ge[1]=$,ge[4]=Q,ge[7]=N,ge[2]=ee,ge[5]=Se,ge[8]=ue,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(b){const F=b.elements;this.set(F[0],F[3],F[6],F[1],F[4],F[7],F[2],F[5],F[8])}multiplyScalar(b){const F=this.elements;return F[0]*=b,F[3]*=b,F[6]*=b,F[1]*=b,F[4]*=b,F[7]*=b,F[2]*=b,F[5]*=b,F[8]*=b,this}getInverse3(b){const F=b.elements,B=this.elements;B[0]=F[4]*F[8]-F[5]*F[7],B[3]=F[6]*F[5]-F[3]*F[8],B[6]=F[3]*F[7]-F[6]*F[4],B[1]=F[7]*F[2]-F[1]*F[8],B[4]=F[0]*F[8]-F[6]*F[2],B[7]=F[1]*F[6]-F[0]*F[7],B[2]=F[1]*F[5]-F[2]*F[4],B[5]=F[2]*F[3]-F[0]*F[5],B[8]=F[0]*F[4]-F[1]*F[3];const $=F[0]*B[0]+F[3]*B[1]+F[6]*B[2];return this.multiplyScalar(1/$),this}getInverse(b,F){const B=b.elements,$=this.elements;$[0]=B[10]*B[5]-B[6]*B[9],$[1]=-B[10]*B[1]+B[2]*B[9],$[2]=B[6]*B[1]-B[2]*B[5],$[3]=-B[10]*B[4]+B[6]*B[8],$[4]=B[10]*B[0]-B[2]*B[8],$[5]=-B[6]*B[0]+B[2]*B[4],$[6]=B[9]*B[4]-B[5]*B[8],$[7]=-B[9]*B[0]+B[1]*B[8],$[8]=B[5]*B[0]-B[1]*B[4];const Q=B[0]*$[0]+B[1]*$[3]+B[2]*$[6];if(Q===0){const N="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(F)throw new Error(N);return console.warn(N),this.identity(),this}return this.multiplyScalar(1/Q),this}getDeterminant(){const b=this.elements;return b[0]*b[4]*b[8]+b[1]*b[5]*b[6]+b[2]*b[3]*b[7]-b[2]*b[4]*b[6]-b[1]*b[3]*b[8]-b[0]*b[5]*b[7]}transpose(){let b;const F=this.elements;return b=F[1],F[1]=F[3],F[3]=b,b=F[2],F[2]=F[6],F[6]=b,b=F[5],F[5]=F[7],F[7]=b,this}clone(){const b=this.elements;return new I(b[0],b[3],b[6],b[1],b[4],b[7],b[2],b[5],b[8])}getMatrix4(){const b=this.elements;return new z(b[0],b[3],b[6],0,b[1],b[4],b[7],0,b[2],b[5],b[8],0)}}class K{constructor(b,F){this.origin=b!==void 0?b:new C,this.direction=F!==void 0?F:new C}set(b,F){return this.origin.copy(b),this.direction.copy(F),this}copy(b){return this.origin.copy(b.origin),this.direction.copy(b.direction),this}at(b,F){return(F||new C).copy(this.direction).multiplyScalar(b).add(this.origin)}recast(b){const F=E;return this.origin.copy(this.at(b,F)),this}closestPointToPoint(b,F){const B=F||new C;B.subVectors(b,this.origin);const $=B.dot(this.direction);return B.copy(this.direction).multiplyScalar($).add(this.origin)}distanceToPoint(b){const F=E,B=F.subVectors(b,this.origin).dot(this.direction);return F.copy(this.direction).multiplyScalar(B).add(this.origin),F.distanceTo(b)}isIntersectionCylinder(){}isIntersectionSphere(b){return this.distanceToPoint(b.center)<=b.radius}isIntersectionPlane(b){return b.normal.dot(this.direction)!==0||b.distanceToPoint(this.origin)===0}distanceToPlane(b){const F=b.normal.dot(this.direction);return F===0?b.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(b.normal)+b.constant)/F}intersectPlane(b,F){const B=this.distanceToPlane(b);if(B!==void 0)return this.at(B,F)}applyMatrix4(b){return this.direction.add(this.origin).applyMatrix4(b),this.origin.applyMatrix4(b),this.direction.sub(this.origin),this}clone(){return new K().copy(this)}}function J(X,b,F,B,$,Q){B=B*Math.PI/180,$=$*Math.PI/180,Q=Q*Math.PI/180;const N=me=>me*me,ee=Math.cos(B),Se=Math.cos($),ue=Math.cos(Q),ge=Math.sin(Q);return new I(X,b*ue,F*Se,0,b*ge,F*(ee-Se*ue)/ge,0,0,F*Math.sqrt(1-N(ee)-N(Se)-N(ue)+2*ee*Se*ue)/ge)}},546:(t,i,s)=>{s.r(i),s.d(i,{CustomLinear:()=>E,Gradient:()=>R,GradientType:()=>h,ROYGB:()=>d,RWB:()=>g,Sinebow:()=>y,builtinGradients:()=>v,getGradient:()=>l,normalizeValue:()=>_});var u=s(222);class h{}function _(z,C,I){return C>=z?(I<z&&(I=z),I>C&&(I=C),{lo:z,hi:C,val:I}):(I>z&&(I=z),I<C&&(I=C),{lo:C,hi:z,val:I=z-I+C})}function l(z){if(z instanceof h)return z;if(z.gradient!==void 0&&v[z.gradient]){let C=z.min===void 0?-1:z.min,I=z.max===void 0?1:z.max;return z.mid===void 0?z.colors===void 0?new v[z.gradient](C,I):new v[z.gradient](C,I,z.colors):new v[z.gradient](C,I,z.mid)}if(typeof z.gradient=="string"&&z.gradient.startsWith("linear_")){let C=z.gradient.split("_");C.shift();let I=z.min===void 0?-1:z.min,K=z.max===void 0?1:z.max;return new E(I,K,C)}return z}class g extends h{constructor(C,I,K){super(),this.gradient="RWB",this.mult=1,this.mid=K,this.min=C,this.max=I,I===void 0&&Array.isArray(C)&&C.length>=2?(this.max=C[1],this.min=C[0]):C&&I&&!Array.isArray(C)&&(this.min=C,this.max=I)}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}valueToHex(C,I){var K,J;if(C=this.mult*C,I?(K=I[0],J=I[1]):(K=this.min,J=this.max),C===void 0)return 16777215;var X=_(K,J,C);K=X.lo;var b,F=((J=X.hi)+K)/2;return(C=X.val)<(F=I&&I[2]!==void 0?I[2]:this.mid!==void 0?this.mid:(K+J)/2)?16711680+256*(b=Math.floor(255*Math.sqrt((C-K)/(F-K))))+b:C>F?65536*(b=Math.floor(255*Math.sqrt(1-(C-F)/(J-F))))+256*b+255:16777215}}class d extends h{constructor(C,I){super(),this.gradient="ROYGB",this.mult=1,this.min=C,this.max=I,I===void 0&&Array.isArray(C)&&C.length>=2?(this.max=C[1],this.min=C[0]):C&&I&&!Array.isArray(C)&&(this.min=C,this.max=I)}valueToHex(C,I){var K,J;if(C=this.mult*C,I?(K=I[0],J=I[1]):(K=this.min,J=this.max),C===void 0)return 16777215;var X=_(K,J,C),b=((K=X.lo)+(J=X.hi))/2,F=(K+b)/2,B=(b+J)/2;return(C=X.val)<F?16711680+256*Math.floor(255*Math.sqrt((C-K)/(F-K)))+0:C<b?65536*Math.floor(255*Math.sqrt(1-(C-F)/(b-F)))+65280+0:C<B?65280+1*Math.floor(255*Math.sqrt((C-b)/(B-b))):0+256*Math.floor(255*Math.sqrt(1-(C-B)/(J-B)))+255}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}}class y extends h{constructor(C,I){super(),this.gradient="Sinebow",this.mult=1,this.min=C,this.max=I,I===void 0&&Array.isArray(C)&&C.length>=2&&(this.max=C[1],this.min=C[0]),I<C&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex(C,I){var K,J;if(C=this.mult*C,I?(K=I[0],J=I[1]):(K=this.min,J=this.max),C===void 0)return 16777215;var X=R.normalizeValue(K,J,C);K=X.lo,J=X.hi;var b=((C=X.val)-K)/(J-K)*5/6+.5,F=Math.sin(Math.PI*b);F*=255*F;var B=Math.sin(Math.PI*(b+1/3));B*=255*B;var $=Math.sin(Math.PI*(b+2/3));return $*=255*$,65536*Math.floor(F)+256*Math.floor($)+1*Math.floor(B)}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}}class E extends h{constructor(C,I,K){var J;if(super(),this.gradient="linear",this.colors=new Array,Array.isArray(C)&&C.length>=2?(this.max=C[1],this.min=C[0],J=I):(this.min=C,this.max=I,J=K),J)for(let X of J)this.colors.push(u.CC.color(X));else this.colors.push(u.CC.color(0))}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}valueToHex(C,I){var K,J;if(I?(K=I[0],J=I[1]):(K=this.min,J=this.max),C===void 0)return 16777215;var X=_(K,J,C);K=X.lo,J=X.hi,C=X.val;let b=this.colors.length,F=(J-K)/b,B=Math.min(Math.floor((C-K)/F),b-1),$=Math.min(B+1,b-1),Q=(C-K-B*F)/F,N=this.colors[B],ee=this.colors[$];return new u.Color(N.r+Q*(ee.r-N.r),N.g+Q*(ee.g-N.g),N.b+Q*(ee.b-N.b)).getHex()}}const v={rwb:g,RWB:g,roygb:d,ROYGB:d,sinebow:y,linear:E};class R extends h{valueToHex(C,I){return 0}range(){return null}}R.RWB=g,R.ROYGB=d,R.Sinebow=y,R.CustomLinear=E,R.builtinGradients=v,R.normalizeValue=_,R.getGradient=l},663:(t,i,s)=>{var u=s(981),h=s(701),_=s(407),l=s(165),g=s(358),d=-2,y=12,E=30;function v($){return($>>>24&255)+($>>>8&65280)+((65280&$)<<8)+((255&$)<<24)}function R(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new u.Buf16(320),this.work=new u.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function z($){var Q;return $&&$.state?(Q=$.state,$.total_in=$.total_out=Q.total=0,$.msg="",Q.wrap&&($.adler=1&Q.wrap),Q.mode=1,Q.last=0,Q.havedict=0,Q.dmax=32768,Q.head=null,Q.hold=0,Q.bits=0,Q.lencode=Q.lendyn=new u.Buf32(852),Q.distcode=Q.distdyn=new u.Buf32(592),Q.sane=1,Q.back=-1,0):d}function C($){var Q;return $&&$.state?((Q=$.state).wsize=0,Q.whave=0,Q.wnext=0,z($)):d}function I($,Q){var N,ee;return $&&$.state?(ee=$.state,Q<0?(N=0,Q=-Q):(N=1+(Q>>4),Q<48&&(Q&=15)),Q&&(Q<8||Q>15)?d:(ee.window!==null&&ee.wbits!==Q&&(ee.window=null),ee.wrap=N,ee.wbits=Q,C($))):d}function K($,Q){var N,ee;return $?(ee=new R,$.state=ee,ee.window=null,(N=I($,Q))!==0&&($.state=null),N):d}var J,X,b=!0;function F($){if(b){var Q;for(J=new u.Buf32(512),X=new u.Buf32(32),Q=0;Q<144;)$.lens[Q++]=8;for(;Q<256;)$.lens[Q++]=9;for(;Q<280;)$.lens[Q++]=7;for(;Q<288;)$.lens[Q++]=8;for(g(1,$.lens,0,288,J,0,$.work,{bits:9}),Q=0;Q<32;)$.lens[Q++]=5;g(2,$.lens,0,32,X,0,$.work,{bits:5}),b=!1}$.lencode=J,$.lenbits=9,$.distcode=X,$.distbits=5}function B($,Q,N,ee){var Se,ue=$.state;return ue.window===null&&(ue.wsize=1<<ue.wbits,ue.wnext=0,ue.whave=0,ue.window=new u.Buf8(ue.wsize)),ee>=ue.wsize?(u.arraySet(ue.window,Q,N-ue.wsize,ue.wsize,0),ue.wnext=0,ue.whave=ue.wsize):((Se=ue.wsize-ue.wnext)>ee&&(Se=ee),u.arraySet(ue.window,Q,N-ee,Se,ue.wnext),(ee-=Se)?(u.arraySet(ue.window,Q,N-ee,ee,0),ue.wnext=ee,ue.whave=ue.wsize):(ue.wnext+=Se,ue.wnext===ue.wsize&&(ue.wnext=0),ue.whave<ue.wsize&&(ue.whave+=Se))),0}i.inflateReset=C,i.inflateReset2=I,i.inflateResetKeep=z,i.inflateInit=function($){return K($,15)},i.inflateInit2=K,i.inflate=function($,Q){var N,ee,Se,ue,ge,me,Me,ce,O,he,se,q,Pe,fe,De,He,oe,Ce,We,qe,Fe,rt,ot,at,Ft=0,Ct=new u.Buf8(4),or=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!$||!$.state||!$.output||!$.input&&$.avail_in!==0)return d;(N=$.state).mode===y&&(N.mode=13),ge=$.next_out,Se=$.output,Me=$.avail_out,ue=$.next_in,ee=$.input,me=$.avail_in,ce=N.hold,O=N.bits,he=me,se=Me,rt=0;e:for(;;)switch(N.mode){case 1:if(N.wrap===0){N.mode=13;break}for(;O<16;){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}if(2&N.wrap&&ce===35615){N.check=0,Ct[0]=255&ce,Ct[1]=ce>>>8&255,N.check=_(N.check,Ct,2,0),ce=0,O=0,N.mode=2;break}if(N.flags=0,N.head&&(N.head.done=!1),!(1&N.wrap)||(((255&ce)<<8)+(ce>>8))%31){$.msg="incorrect header check",N.mode=E;break}if((15&ce)!=8){$.msg="unknown compression method",N.mode=E;break}if(O-=4,Fe=8+(15&(ce>>>=4)),N.wbits===0)N.wbits=Fe;else if(Fe>N.wbits){$.msg="invalid window size",N.mode=E;break}N.dmax=1<<Fe,$.adler=N.check=1,N.mode=512&ce?10:y,ce=0,O=0;break;case 2:for(;O<16;){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}if(N.flags=ce,(255&N.flags)!=8){$.msg="unknown compression method",N.mode=E;break}if(57344&N.flags){$.msg="unknown header flags set",N.mode=E;break}N.head&&(N.head.text=ce>>8&1),512&N.flags&&(Ct[0]=255&ce,Ct[1]=ce>>>8&255,N.check=_(N.check,Ct,2,0)),ce=0,O=0,N.mode=3;case 3:for(;O<32;){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}N.head&&(N.head.time=ce),512&N.flags&&(Ct[0]=255&ce,Ct[1]=ce>>>8&255,Ct[2]=ce>>>16&255,Ct[3]=ce>>>24&255,N.check=_(N.check,Ct,4,0)),ce=0,O=0,N.mode=4;case 4:for(;O<16;){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}N.head&&(N.head.xflags=255&ce,N.head.os=ce>>8),512&N.flags&&(Ct[0]=255&ce,Ct[1]=ce>>>8&255,N.check=_(N.check,Ct,2,0)),ce=0,O=0,N.mode=5;case 5:if(1024&N.flags){for(;O<16;){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}N.length=ce,N.head&&(N.head.extra_len=ce),512&N.flags&&(Ct[0]=255&ce,Ct[1]=ce>>>8&255,N.check=_(N.check,Ct,2,0)),ce=0,O=0}else N.head&&(N.head.extra=null);N.mode=6;case 6:if(1024&N.flags&&((q=N.length)>me&&(q=me),q&&(N.head&&(Fe=N.head.extra_len-N.length,N.head.extra||(N.head.extra=new Array(N.head.extra_len)),u.arraySet(N.head.extra,ee,ue,q,Fe)),512&N.flags&&(N.check=_(N.check,ee,q,ue)),me-=q,ue+=q,N.length-=q),N.length))break e;N.length=0,N.mode=7;case 7:if(2048&N.flags){if(me===0)break e;q=0;do Fe=ee[ue+q++],N.head&&Fe&&N.length<65536&&(N.head.name+=String.fromCharCode(Fe));while(Fe&&q<me);if(512&N.flags&&(N.check=_(N.check,ee,q,ue)),me-=q,ue+=q,Fe)break e}else N.head&&(N.head.name=null);N.length=0,N.mode=8;case 8:if(4096&N.flags){if(me===0)break e;q=0;do Fe=ee[ue+q++],N.head&&Fe&&N.length<65536&&(N.head.comment+=String.fromCharCode(Fe));while(Fe&&q<me);if(512&N.flags&&(N.check=_(N.check,ee,q,ue)),me-=q,ue+=q,Fe)break e}else N.head&&(N.head.comment=null);N.mode=9;case 9:if(512&N.flags){for(;O<16;){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}if(ce!==(65535&N.check)){$.msg="header crc mismatch",N.mode=E;break}ce=0,O=0}N.head&&(N.head.hcrc=N.flags>>9&1,N.head.done=!0),$.adler=N.check=0,N.mode=y;break;case 10:for(;O<32;){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}$.adler=N.check=v(ce),ce=0,O=0,N.mode=11;case 11:if(N.havedict===0)return $.next_out=ge,$.avail_out=Me,$.next_in=ue,$.avail_in=me,N.hold=ce,N.bits=O,2;$.adler=N.check=1,N.mode=y;case y:if(Q===5||Q===6)break e;case 13:if(N.last){ce>>>=7&O,O-=7&O,N.mode=27;break}for(;O<3;){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}switch(N.last=1&ce,O-=1,3&(ce>>>=1)){case 0:N.mode=14;break;case 1:if(F(N),N.mode=20,Q===6){ce>>>=2,O-=2;break e}break;case 2:N.mode=17;break;case 3:$.msg="invalid block type",N.mode=E}ce>>>=2,O-=2;break;case 14:for(ce>>>=7&O,O-=7&O;O<32;){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}if((65535&ce)!=(ce>>>16^65535)){$.msg="invalid stored block lengths",N.mode=E;break}if(N.length=65535&ce,ce=0,O=0,N.mode=15,Q===6)break e;case 15:N.mode=16;case 16:if(q=N.length){if(q>me&&(q=me),q>Me&&(q=Me),q===0)break e;u.arraySet(Se,ee,ue,q,ge),me-=q,ue+=q,Me-=q,ge+=q,N.length-=q;break}N.mode=y;break;case 17:for(;O<14;){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}if(N.nlen=257+(31&ce),ce>>>=5,O-=5,N.ndist=1+(31&ce),ce>>>=5,O-=5,N.ncode=4+(15&ce),ce>>>=4,O-=4,N.nlen>286||N.ndist>30){$.msg="too many length or distance symbols",N.mode=E;break}N.have=0,N.mode=18;case 18:for(;N.have<N.ncode;){for(;O<3;){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}N.lens[or[N.have++]]=7&ce,ce>>>=3,O-=3}for(;N.have<19;)N.lens[or[N.have++]]=0;if(N.lencode=N.lendyn,N.lenbits=7,ot={bits:N.lenbits},rt=g(0,N.lens,0,19,N.lencode,0,N.work,ot),N.lenbits=ot.bits,rt){$.msg="invalid code lengths set",N.mode=E;break}N.have=0,N.mode=19;case 19:for(;N.have<N.nlen+N.ndist;){for(;He=(Ft=N.lencode[ce&(1<<N.lenbits)-1])>>>16&255,oe=65535&Ft,!((De=Ft>>>24)<=O);){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}if(oe<16)ce>>>=De,O-=De,N.lens[N.have++]=oe;else{if(oe===16){for(at=De+2;O<at;){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}if(ce>>>=De,O-=De,N.have===0){$.msg="invalid bit length repeat",N.mode=E;break}Fe=N.lens[N.have-1],q=3+(3&ce),ce>>>=2,O-=2}else if(oe===17){for(at=De+3;O<at;){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}O-=De,Fe=0,q=3+(7&(ce>>>=De)),ce>>>=3,O-=3}else{for(at=De+7;O<at;){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}O-=De,Fe=0,q=11+(127&(ce>>>=De)),ce>>>=7,O-=7}if(N.have+q>N.nlen+N.ndist){$.msg="invalid bit length repeat",N.mode=E;break}for(;q--;)N.lens[N.have++]=Fe}}if(N.mode===E)break;if(N.lens[256]===0){$.msg="invalid code -- missing end-of-block",N.mode=E;break}if(N.lenbits=9,ot={bits:N.lenbits},rt=g(1,N.lens,0,N.nlen,N.lencode,0,N.work,ot),N.lenbits=ot.bits,rt){$.msg="invalid literal/lengths set",N.mode=E;break}if(N.distbits=6,N.distcode=N.distdyn,ot={bits:N.distbits},rt=g(2,N.lens,N.nlen,N.ndist,N.distcode,0,N.work,ot),N.distbits=ot.bits,rt){$.msg="invalid distances set",N.mode=E;break}if(N.mode=20,Q===6)break e;case 20:N.mode=21;case 21:if(me>=6&&Me>=258){$.next_out=ge,$.avail_out=Me,$.next_in=ue,$.avail_in=me,N.hold=ce,N.bits=O,l($,se),ge=$.next_out,Se=$.output,Me=$.avail_out,ue=$.next_in,ee=$.input,me=$.avail_in,ce=N.hold,O=N.bits,N.mode===y&&(N.back=-1);break}for(N.back=0;He=(Ft=N.lencode[ce&(1<<N.lenbits)-1])>>>16&255,oe=65535&Ft,!((De=Ft>>>24)<=O);){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}if(He&&!(240&He)){for(Ce=De,We=He,qe=oe;He=(Ft=N.lencode[qe+((ce&(1<<Ce+We)-1)>>Ce)])>>>16&255,oe=65535&Ft,!(Ce+(De=Ft>>>24)<=O);){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}ce>>>=Ce,O-=Ce,N.back+=Ce}if(ce>>>=De,O-=De,N.back+=De,N.length=oe,He===0){N.mode=26;break}if(32&He){N.back=-1,N.mode=y;break}if(64&He){$.msg="invalid literal/length code",N.mode=E;break}N.extra=15&He,N.mode=22;case 22:if(N.extra){for(at=N.extra;O<at;){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}N.length+=ce&(1<<N.extra)-1,ce>>>=N.extra,O-=N.extra,N.back+=N.extra}N.was=N.length,N.mode=23;case 23:for(;He=(Ft=N.distcode[ce&(1<<N.distbits)-1])>>>16&255,oe=65535&Ft,!((De=Ft>>>24)<=O);){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}if(!(240&He)){for(Ce=De,We=He,qe=oe;He=(Ft=N.distcode[qe+((ce&(1<<Ce+We)-1)>>Ce)])>>>16&255,oe=65535&Ft,!(Ce+(De=Ft>>>24)<=O);){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}ce>>>=Ce,O-=Ce,N.back+=Ce}if(ce>>>=De,O-=De,N.back+=De,64&He){$.msg="invalid distance code",N.mode=E;break}N.offset=oe,N.extra=15&He,N.mode=24;case 24:if(N.extra){for(at=N.extra;O<at;){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}N.offset+=ce&(1<<N.extra)-1,ce>>>=N.extra,O-=N.extra,N.back+=N.extra}if(N.offset>N.dmax){$.msg="invalid distance too far back",N.mode=E;break}N.mode=25;case 25:if(Me===0)break e;if(q=se-Me,N.offset>q){if((q=N.offset-q)>N.whave&&N.sane){$.msg="invalid distance too far back",N.mode=E;break}q>N.wnext?(q-=N.wnext,Pe=N.wsize-q):Pe=N.wnext-q,q>N.length&&(q=N.length),fe=N.window}else fe=Se,Pe=ge-N.offset,q=N.length;q>Me&&(q=Me),Me-=q,N.length-=q;do Se[ge++]=fe[Pe++];while(--q);N.length===0&&(N.mode=21);break;case 26:if(Me===0)break e;Se[ge++]=N.length,Me--,N.mode=21;break;case 27:if(N.wrap){for(;O<32;){if(me===0)break e;me--,ce|=ee[ue++]<<O,O+=8}if(se-=Me,$.total_out+=se,N.total+=se,se&&($.adler=N.check=N.flags?_(N.check,Se,se,ge-se):h(N.check,Se,se,ge-se)),se=Me,(N.flags?ce:v(ce))!==N.check){$.msg="incorrect data check",N.mode=E;break}ce=0,O=0}N.mode=28;case 28:if(N.wrap&&N.flags){for(;O<32;){if(me===0)break e;me--,ce+=ee[ue++]<<O,O+=8}if(ce!==(4294967295&N.total)){$.msg="incorrect length check",N.mode=E;break}ce=0,O=0}N.mode=29;case 29:rt=1;break e;case E:rt=-3;break e;case 31:return-4;default:return d}return $.next_out=ge,$.avail_out=Me,$.next_in=ue,$.avail_in=me,N.hold=ce,N.bits=O,(N.wsize||se!==$.avail_out&&N.mode<E&&(N.mode<27||Q!==4))&&B($,$.output,$.next_out,se-$.avail_out)?(N.mode=31,-4):(he-=$.avail_in,se-=$.avail_out,$.total_in+=he,$.total_out+=se,N.total+=se,N.wrap&&se&&($.adler=N.check=N.flags?_(N.check,Se,se,$.next_out-se):h(N.check,Se,se,$.next_out-se)),$.data_type=N.bits+(N.last?64:0)+(N.mode===y?128:0)+(N.mode===20||N.mode===15?256:0),(he===0&&se===0||Q===4)&&rt===0&&(rt=-5),rt)},i.inflateEnd=function($){if(!$||!$.state)return d;var Q=$.state;return Q.window&&(Q.window=null),$.state=null,0},i.inflateGetHeader=function($,Q){var N;return $&&$.state&&2&(N=$.state).wrap?(N.head=Q,Q.done=!1,0):d},i.inflateSetDictionary=function($,Q){var N,ee=Q.length;return $&&$.state?(N=$.state).wrap!==0&&N.mode!==11?d:N.mode===11&&h(1,Q,ee,0)!==N.check?-3:B($,Q,ee,ee)?(N.mode=31,-4):(N.havedict=1,0):d},i.inflateInfo="pako inflate (from Nodeca project)"},670:t=>{t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},681:t=>{t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},697:(t,i,s)=>{var u=s(981);function h(oe){for(var Ce=oe.length;--Ce>=0;)oe[Ce]=0}var _=256,l=286,g=30,d=15,y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=new Array(576);h(z);var C=new Array(60);h(C);var I=new Array(512);h(I);var K=new Array(256);h(K);var J=new Array(29);h(J);var X,b,F,B=new Array(g);function $(oe,Ce,We,qe,Fe){this.static_tree=oe,this.extra_bits=Ce,this.extra_base=We,this.elems=qe,this.max_length=Fe,this.has_stree=oe&&oe.length}function Q(oe,Ce){this.dyn_tree=oe,this.max_code=0,this.stat_desc=Ce}function N(oe){return oe<256?I[oe]:I[256+(oe>>>7)]}function ee(oe,Ce){oe.pending_buf[oe.pending++]=255&Ce,oe.pending_buf[oe.pending++]=Ce>>>8&255}function Se(oe,Ce,We){oe.bi_valid>16-We?(oe.bi_buf|=Ce<<oe.bi_valid&65535,ee(oe,oe.bi_buf),oe.bi_buf=Ce>>16-oe.bi_valid,oe.bi_valid+=We-16):(oe.bi_buf|=Ce<<oe.bi_valid&65535,oe.bi_valid+=We)}function ue(oe,Ce,We){Se(oe,We[2*Ce],We[2*Ce+1])}function ge(oe,Ce){var We=0;do We|=1&oe,oe>>>=1,We<<=1;while(--Ce>0);return We>>>1}function me(oe,Ce,We){var qe,Fe,rt=new Array(16),ot=0;for(qe=1;qe<=d;qe++)rt[qe]=ot=ot+We[qe-1]<<1;for(Fe=0;Fe<=Ce;Fe++){var at=oe[2*Fe+1];at!==0&&(oe[2*Fe]=ge(rt[at]++,at))}}function Me(oe){var Ce;for(Ce=0;Ce<l;Ce++)oe.dyn_ltree[2*Ce]=0;for(Ce=0;Ce<g;Ce++)oe.dyn_dtree[2*Ce]=0;for(Ce=0;Ce<19;Ce++)oe.bl_tree[2*Ce]=0;oe.dyn_ltree[512]=1,oe.opt_len=oe.static_len=0,oe.last_lit=oe.matches=0}function ce(oe){oe.bi_valid>8?ee(oe,oe.bi_buf):oe.bi_valid>0&&(oe.pending_buf[oe.pending++]=oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0}function O(oe,Ce,We,qe){var Fe=2*Ce,rt=2*We;return oe[Fe]<oe[rt]||oe[Fe]===oe[rt]&&qe[Ce]<=qe[We]}function he(oe,Ce,We){for(var qe=oe.heap[We],Fe=We<<1;Fe<=oe.heap_len&&(Fe<oe.heap_len&&O(Ce,oe.heap[Fe+1],oe.heap[Fe],oe.depth)&&Fe++,!O(Ce,qe,oe.heap[Fe],oe.depth));)oe.heap[We]=oe.heap[Fe],We=Fe,Fe<<=1;oe.heap[We]=qe}function se(oe,Ce,We){var qe,Fe,rt,ot,at=0;if(oe.last_lit!==0)do qe=oe.pending_buf[oe.d_buf+2*at]<<8|oe.pending_buf[oe.d_buf+2*at+1],Fe=oe.pending_buf[oe.l_buf+at],at++,qe===0?ue(oe,Fe,Ce):(ue(oe,(rt=K[Fe])+_+1,Ce),(ot=y[rt])!==0&&Se(oe,Fe-=J[rt],ot),ue(oe,rt=N(--qe),We),(ot=E[rt])!==0&&Se(oe,qe-=B[rt],ot));while(at<oe.last_lit);ue(oe,256,Ce)}function q(oe,Ce){var We,qe,Fe,rt=Ce.dyn_tree,ot=Ce.stat_desc.static_tree,at=Ce.stat_desc.has_stree,Ft=Ce.stat_desc.elems,Ct=-1;for(oe.heap_len=0,oe.heap_max=573,We=0;We<Ft;We++)rt[2*We]!==0?(oe.heap[++oe.heap_len]=Ct=We,oe.depth[We]=0):rt[2*We+1]=0;for(;oe.heap_len<2;)rt[2*(Fe=oe.heap[++oe.heap_len]=Ct<2?++Ct:0)]=1,oe.depth[Fe]=0,oe.opt_len--,at&&(oe.static_len-=ot[2*Fe+1]);for(Ce.max_code=Ct,We=oe.heap_len>>1;We>=1;We--)he(oe,rt,We);Fe=Ft;do We=oe.heap[1],oe.heap[1]=oe.heap[oe.heap_len--],he(oe,rt,1),qe=oe.heap[1],oe.heap[--oe.heap_max]=We,oe.heap[--oe.heap_max]=qe,rt[2*Fe]=rt[2*We]+rt[2*qe],oe.depth[Fe]=(oe.depth[We]>=oe.depth[qe]?oe.depth[We]:oe.depth[qe])+1,rt[2*We+1]=rt[2*qe+1]=Fe,oe.heap[1]=Fe++,he(oe,rt,1);while(oe.heap_len>=2);oe.heap[--oe.heap_max]=oe.heap[1],(function(or,ar){var Mr,Er,pr,vr,xr,fi,kr=ar.dyn_tree,zr=ar.max_code,Di=ar.stat_desc.static_tree,wi=ar.stat_desc.has_stree,Hi=ar.stat_desc.extra_bits,pe=ar.stat_desc.extra_base,Ee=ar.stat_desc.max_length,ze=0;for(vr=0;vr<=d;vr++)or.bl_count[vr]=0;for(kr[2*or.heap[or.heap_max]+1]=0,Mr=or.heap_max+1;Mr<573;Mr++)(vr=kr[2*kr[2*(Er=or.heap[Mr])+1]+1]+1)>Ee&&(vr=Ee,ze++),kr[2*Er+1]=vr,Er>zr||(or.bl_count[vr]++,xr=0,Er>=pe&&(xr=Hi[Er-pe]),fi=kr[2*Er],or.opt_len+=fi*(vr+xr),wi&&(or.static_len+=fi*(Di[2*Er+1]+xr)));if(ze!==0){do{for(vr=Ee-1;or.bl_count[vr]===0;)vr--;or.bl_count[vr]--,or.bl_count[vr+1]+=2,or.bl_count[Ee]--,ze-=2}while(ze>0);for(vr=Ee;vr!==0;vr--)for(Er=or.bl_count[vr];Er!==0;)(pr=or.heap[--Mr])>zr||(kr[2*pr+1]!==vr&&(or.opt_len+=(vr-kr[2*pr+1])*kr[2*pr],kr[2*pr+1]=vr),Er--)}})(oe,Ce),me(rt,Ct,oe.bl_count)}function Pe(oe,Ce,We){var qe,Fe,rt=-1,ot=Ce[1],at=0,Ft=7,Ct=4;for(ot===0&&(Ft=138,Ct=3),Ce[2*(We+1)+1]=65535,qe=0;qe<=We;qe++)Fe=ot,ot=Ce[2*(qe+1)+1],++at<Ft&&Fe===ot||(at<Ct?oe.bl_tree[2*Fe]+=at:Fe!==0?(Fe!==rt&&oe.bl_tree[2*Fe]++,oe.bl_tree[32]++):at<=10?oe.bl_tree[34]++:oe.bl_tree[36]++,at=0,rt=Fe,ot===0?(Ft=138,Ct=3):Fe===ot?(Ft=6,Ct=3):(Ft=7,Ct=4))}function fe(oe,Ce,We){var qe,Fe,rt=-1,ot=Ce[1],at=0,Ft=7,Ct=4;for(ot===0&&(Ft=138,Ct=3),qe=0;qe<=We;qe++)if(Fe=ot,ot=Ce[2*(qe+1)+1],!(++at<Ft&&Fe===ot)){if(at<Ct)do ue(oe,Fe,oe.bl_tree);while(--at!==0);else Fe!==0?(Fe!==rt&&(ue(oe,Fe,oe.bl_tree),at--),ue(oe,16,oe.bl_tree),Se(oe,at-3,2)):at<=10?(ue(oe,17,oe.bl_tree),Se(oe,at-3,3)):(ue(oe,18,oe.bl_tree),Se(oe,at-11,7));at=0,rt=Fe,ot===0?(Ft=138,Ct=3):Fe===ot?(Ft=6,Ct=3):(Ft=7,Ct=4)}}h(B);var De=!1;function He(oe,Ce,We,qe){Se(oe,0+(qe?1:0),3),(function(Fe,rt,ot,at){ce(Fe),ee(Fe,ot),ee(Fe,~ot),u.arraySet(Fe.pending_buf,Fe.window,rt,ot,Fe.pending),Fe.pending+=ot})(oe,Ce,We)}i._tr_init=function(oe){De||((function(){var Ce,We,qe,Fe,rt,ot=new Array(16);for(qe=0,Fe=0;Fe<28;Fe++)for(J[Fe]=qe,Ce=0;Ce<1<<y[Fe];Ce++)K[qe++]=Fe;for(K[qe-1]=Fe,rt=0,Fe=0;Fe<16;Fe++)for(B[Fe]=rt,Ce=0;Ce<1<<E[Fe];Ce++)I[rt++]=Fe;for(rt>>=7;Fe<g;Fe++)for(B[Fe]=rt<<7,Ce=0;Ce<1<<E[Fe]-7;Ce++)I[256+rt++]=Fe;for(We=0;We<=d;We++)ot[We]=0;for(Ce=0;Ce<=143;)z[2*Ce+1]=8,Ce++,ot[8]++;for(;Ce<=255;)z[2*Ce+1]=9,Ce++,ot[9]++;for(;Ce<=279;)z[2*Ce+1]=7,Ce++,ot[7]++;for(;Ce<=287;)z[2*Ce+1]=8,Ce++,ot[8]++;for(me(z,287,ot),Ce=0;Ce<g;Ce++)C[2*Ce+1]=5,C[2*Ce]=ge(Ce,5);X=new $(z,y,257,l,d),b=new $(C,E,0,g,d),F=new $(new Array(0),v,0,19,7)})(),De=!0),oe.l_desc=new Q(oe.dyn_ltree,X),oe.d_desc=new Q(oe.dyn_dtree,b),oe.bl_desc=new Q(oe.bl_tree,F),oe.bi_buf=0,oe.bi_valid=0,Me(oe)},i._tr_stored_block=He,i._tr_flush_block=function(oe,Ce,We,qe){var Fe,rt,ot=0;oe.level>0?(oe.strm.data_type===2&&(oe.strm.data_type=(function(at){var Ft,Ct=4093624447;for(Ft=0;Ft<=31;Ft++,Ct>>>=1)if(1&Ct&&at.dyn_ltree[2*Ft]!==0)return 0;if(at.dyn_ltree[18]!==0||at.dyn_ltree[20]!==0||at.dyn_ltree[26]!==0)return 1;for(Ft=32;Ft<_;Ft++)if(at.dyn_ltree[2*Ft]!==0)return 1;return 0})(oe)),q(oe,oe.l_desc),q(oe,oe.d_desc),ot=(function(at){var Ft;for(Pe(at,at.dyn_ltree,at.l_desc.max_code),Pe(at,at.dyn_dtree,at.d_desc.max_code),q(at,at.bl_desc),Ft=18;Ft>=3&&at.bl_tree[2*R[Ft]+1]===0;Ft--);return at.opt_len+=3*(Ft+1)+5+5+4,Ft})(oe),Fe=oe.opt_len+3+7>>>3,(rt=oe.static_len+3+7>>>3)<=Fe&&(Fe=rt)):Fe=rt=We+5,We+4<=Fe&&Ce!==-1?He(oe,Ce,We,qe):oe.strategy===4||rt===Fe?(Se(oe,2+(qe?1:0),3),se(oe,z,C)):(Se(oe,4+(qe?1:0),3),(function(at,Ft,Ct,or){var ar;for(Se(at,Ft-257,5),Se(at,Ct-1,5),Se(at,or-4,4),ar=0;ar<or;ar++)Se(at,at.bl_tree[2*R[ar]+1],3);fe(at,at.dyn_ltree,Ft-1),fe(at,at.dyn_dtree,Ct-1)})(oe,oe.l_desc.max_code+1,oe.d_desc.max_code+1,ot+1),se(oe,oe.dyn_ltree,oe.dyn_dtree)),Me(oe),qe&&ce(oe)},i._tr_tally=function(oe,Ce,We){return oe.pending_buf[oe.d_buf+2*oe.last_lit]=Ce>>>8&255,oe.pending_buf[oe.d_buf+2*oe.last_lit+1]=255&Ce,oe.pending_buf[oe.l_buf+oe.last_lit]=255&We,oe.last_lit++,Ce===0?oe.dyn_ltree[2*We]++:(oe.matches++,Ce--,oe.dyn_ltree[2*(K[We]+_+1)]++,oe.dyn_dtree[2*N(Ce)]++),oe.last_lit===oe.lit_bufsize-1},i._tr_align=function(oe){Se(oe,2,3),ue(oe,256,z),(function(Ce){Ce.bi_valid===16?(ee(Ce,Ce.bi_buf),Ce.bi_buf=0,Ce.bi_valid=0):Ce.bi_valid>=8&&(Ce.pending_buf[Ce.pending++]=255&Ce.bi_buf,Ce.bi_buf>>=8,Ce.bi_valid-=8)})(oe)}},701:t=>{t.exports=function(i,s,u,h){for(var _=65535&i,l=i>>>16&65535,g=0;u!==0;){u-=g=u>2e3?2e3:u;do l=l+(_=_+s[h++]|0)|0;while(--g);_%=65521,l%=65521}return _|l<<16}},746:t=>{t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},788:(t,i,s)=>{var u={};(0,s(981).assign)(u,s(71),s(3),s(681)),t.exports=u},797:(t,i,s)=>{s.r(i),s.d(i,{VASP:()=>_});var u=s(378),h=s(392);function _(l,g={}){var d=[[]],y={};const E=g.assignBonds===void 0||g.assignBonds;var v=l.replace(/^\s+/,"").split(/\r?\n/);if(v.length<3)return d;if(!v[1].match(/\d+/))return console.log("Warning: second line of the vasp structure file must be a number"),d;if(y.length=parseFloat(v[1]),y.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),d;y.xVec=new Float32Array(v[2].replace(/^\s+/,"").split(/\s+/)),y.yVec=new Float32Array(v[3].replace(/^\s+/,"").split(/\s+/)),y.zVec=new Float32Array(v[4].replace(/^\s+/,"").split(/\s+/));var R=new u.Matrix3(y.xVec[0],y.xVec[1],y.xVec[2],y.yVec[0],y.yVec[1],y.yVec[2],y.zVec[0],y.zVec[1],y.zVec[2]);R.multiplyScalar(y.length),d.modelData=[{symmetries:[],cryst:{matrix:R}}];var z=v[5].trim().split(/\s+/),C=new Int16Array(v[6].trim().split(/\s+/)),I=v[7].trim(),K=!1;if(I.match(/S/)&&(K=!0,I=v[8].trim()),I.toLowerCase()[0]=="c")I="cartesian";else{if(I.toLowerCase()[0]!="d")return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),d;I="direct"}if(z.length!=C.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(z),console.log(C),d;K?v.splice(0,9):v.splice(0,8);for(var J=0,X=0,b=z.length;X<b;X++){for(var F=z[X],B=0,$=C[X];B<$;B++){var Q=new Float32Array(v[J+B].trim().split(/\s+/)),N={};N.elem=F,I=="cartesian"?(N.x=y.length*Q[0],N.y=y.length*Q[1],N.z=y.length*Q[2]):(N.x=y.length*(Q[0]*y.xVec[0]+Q[1]*y.yVec[0]+Q[2]*y.zVec[0]),N.y=y.length*(Q[0]*y.xVec[1]+Q[1]*y.yVec[1]+Q[2]*y.zVec[1]),N.z=y.length*(Q[0]*y.xVec[2]+Q[1]*y.yVec[2]+Q[2]*y.zVec[2])),N.bonds=[],N.bondOrder=[],d[0].push(N)}J+=C[X]}if(E)for(let ee=0;ee<d.length;ee++)(0,h.assignBonds)(d[ee],g);return d}},834:t=>{t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},848:(t,i,s)=>{s.r(i),s.d(i,{VolumeData:()=>d});var u=s(864),h=s(529),_=s(797),l=s(865),g=s(75);class d{constructor(E,v,R){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set(["ccp4","CCP4"]),this.getCoordinates=function(J){var X=J/(this.size.y*this.size.z),b=J%(this.size.y*this.size.z),F=J%this.size.z;return X*=this.unit.x,b*=this.unit.y,F*=this.unit.z,{x:X+=this.origin.x,y:b+=this.origin.y,z:F+=this.origin.z}},this.vasp=function(J){var X=J.replace(/^\s+/,"").split(/[\n\r]/),b=(0,_.VASP)(J)[0].length;if(b==0)return console.warn("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),void(this.data=[]);var F,B=1.889725992,$=parseFloat(X[1]);F=X[2].replace(/^\s+/,"").split(/\s+/);var Q=new h.Vector3(parseFloat(F[0]),parseFloat(F[1]),parseFloat(F[2])).multiplyScalar($*B);F=X[3].replace(/^\s+/,"").split(/\s+/);var N=new h.Vector3(parseFloat(F[0]),parseFloat(F[1]),parseFloat(F[2])).multiplyScalar($*B);F=X[4].replace(/^\s+/,"").split(/\s+/);var ee=new h.Vector3(parseFloat(F[0]),parseFloat(F[1]),parseFloat(F[2])).multiplyScalar($*B),Se=Q.x*(N.y*ee.z-ee.y*N.z)-N.x*(Q.y*ee.z-ee.y*Q.z)+ee.x*(Q.y*N.z-N.y*Q.z),ue=1/(Se=Math.abs(Se)/Math.pow(B,3));X.splice(0,8+b+1);var ge=X[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),me=Math.abs(parseFloat(ge[0])),Me=Math.abs(parseFloat(ge[1])),ce=Math.abs(parseFloat(ge[2])),O=this.origin=new h.Vector3(0,0,0);this.size={x:me,y:Me,z:ce},this.unit=new h.Vector3(Q.x,N.y,ee.z),Q=Q.multiplyScalar(1/(B*me)),N=N.multiplyScalar(1/(B*Me)),ee=ee.multiplyScalar(1/(B*ce)),Q.y==0&&Q.z==0&&N.x==0&&N.z==0&&ee.x==0&&ee.y==0||(this.matrix=new h.Matrix4(Q.x,N.x,ee.x,0,Q.y,N.y,ee.y,0,Q.z,N.z,ee.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new h.Matrix4().makeTranslation(O.x,O.y,O.z)),this.origin=new h.Vector3(0,0,0),this.unit=new h.Vector3(1,1,1)),X.splice(0,1);var he=X.join(" "),se=(he=he.replace(/^\s+/,"")).split(/[\s\r]+/);se.splice(me*Me*ce+1);for(var q=Float32Array.from(se,parseFloat),Pe=0;Pe<q.length;Pe++)q[Pe]=q[Pe]*ue*.036749309;this.data=q},this.dx=function(J){var X,b=J.split(/[\n\r]+/),F=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,B=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,$=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,Q=/data follows/,N=0;for(N=0;N<b.length;N++){var ee=b[N];if(X=F.exec(ee)){var Se=parseInt(X[1]),ue=parseInt(X[2]),ge=parseInt(X[3]);this.size={x:Se,y:ue,z:ge}}else if(X=$.exec(ee)){var me=parseFloat(X[1]);if(parseFloat(X[2])==0&&parseFloat(X[3])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),ee=b[N+=1],(X=$.exec(ee))==null)return void console.error("Parse error in dx delta matrix");var Me=parseFloat(X[2]);if(parseFloat(X[1])==0&&parseFloat(X[3])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),ee=b[N+=1],(X=$.exec(ee))==null)return void console.error("Parse error in dx delta matrix");var ce=parseFloat(X[3]);parseFloat(X[1])==0&&parseFloat(X[2])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new h.Vector3(me,Me,ce)}else if(X=B.exec(ee)){var O=parseFloat(X[1]),he=parseFloat(X[2]),se=parseFloat(X[3]);this.origin=new h.Vector3(O,he,se)}else if(X=Q.exec(ee))break}if(N+=1,this.size&&this.origin&&this.unit&&this.size){var q=b.splice(N).join(" ").split(/[\s\r]+/);this.data=Float32Array.from(q,parseFloat)}else console.error("Error parsing dx format")},v=v.toLowerCase(),/\.gz$/.test(v)){v=v.replace(/\.gz$/,"");try{this[v]&&this.isbinary.has(v)?(typeof E=="string"&&(E=(0,u.base64ToArray)(E)),E=(0,g.inflate)(E)):E=new TextDecoder("utf-8").decode((0,g.inflate)(E))}catch(J){console.error(J)}}if(this[v]&&(this.isbinary.has(v)&&typeof E=="string"&&(E=(0,u.base64ToArray)(E)),this[v](E)),R){if(R.negate)for(let J=0,X=this.data.length;J<X;J++)this.data[J]=-this.data[J];if(R.normalize){var z=0;for(let J=0,X=this.data.length;J<X;J++)z+=this.data[J];var C=z/this.data.length;z=0;for(let J=0,X=this.data.length;J<X;J++){var I=this.data[J]-C;z+=I*I}var K=z/this.data.length;for(let J=0,X=this.data.length;J<X;J++)this.data[J]=(this.data[J]-C)/K}}}getIndex(E,v,R){if(this.matrix){this.inversematrix==null&&(this.inversematrix=new h.Matrix4().getInverse(this.matrix));var z=new h.Vector3(E,v,R);E=(z=z.applyMatrix4(this.inversematrix)).x,v=z.y,R=z.z}else E-=this.origin.x,v-=this.origin.y,R-=this.origin.z,E/=this.unit.x,v/=this.unit.y,R/=this.unit.z;return E=Math.round(E),v=Math.round(v),R=Math.round(R),E<0||E>=this.size.x||v<0||v>=this.size.y||R<0||R>=this.size.z?-1:E*this.size.y*this.size.z+v*this.size.z+R}getVal(E,v,R){let z=this.getIndex(E,v,R);return z<0?0:this.data[z]}cube(E){var v=E.split(/\r?\n/);if(!(v.length<6)){var R=(0,l.CUBE)(E,{}).modelData[0].cryst,z=v[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),C=parseFloat(z[0]),I=Math.abs(C);this.origin=R.origin,this.size=R.size,this.unit=R.unit,this.matrix=R.matrix4;var K=6;C<0&&K++;var J=v.splice(I+K).join(" "),X=(J=J.replace(/^\s+/,"")).split(/[\s\r]+/);this.data=Float32Array.from(X,parseFloat)}}ccp4(E){var v={};E=new Int8Array(E);var R=new Int32Array(E.buffer,0,56),z=new Float32Array(E.buffer,0,56),C=new DataView(E.buffer);if(v.MAP=String.fromCharCode(C.getUint8(208),C.getUint8(209),C.getUint8(210),C.getUint8(211)),v.MACHST=[C.getUint8(212),C.getUint8(213)],v.MACHST[0]===17&&v.MACHST[1]===17)for(var I=E.byteLength,K=0;K<I;K+=4)C.setFloat32(K,C.getFloat32(K),!0);v.NX=R[0],v.NY=R[1],v.NZ=R[2],v.MODE=R[3],v.NXSTART=R[4],v.NYSTART=R[5],v.NZSTART=R[6],v.MX=R[7],v.MY=R[8],v.MZ=R[9],v.xlen=z[10],v.ylen=z[11],v.zlen=z[12],v.alpha=z[13],v.beta=z[14],v.gamma=z[15],v.MAPC=R[16],v.MAPR=R[17],v.MAPS=R[18],v.DMIN=z[19],v.DMAX=z[20],v.DMEAN=z[21],v.ISPG=R[22],v.NSYMBT=R[23],v.LSKFLG=R[24],v.originX=z[49],v.originY=z[50],v.originZ=z[51],v.ARMS=z[54];var J=v,X=[J.xlen,0,0],b=[J.ylen*Math.cos(Math.PI/180*J.gamma),J.ylen*Math.sin(Math.PI/180*J.gamma),0],F=[J.zlen*Math.cos(Math.PI/180*J.beta),J.zlen*(Math.cos(Math.PI/180*J.alpha)-Math.cos(Math.PI/180*J.gamma)*Math.cos(Math.PI/180*J.beta))/Math.sin(Math.PI/180*J.gamma),0];F[2]=Math.sqrt(J.zlen*J.zlen*Math.sin(Math.PI/180*J.beta)*Math.sin(Math.PI/180*J.beta)-F[1]*F[1]);var B=[0,X,b,F],$=[0,J.MX,J.MY,J.MZ],Q=[0,J.MAPC,J.MAPR,J.MAPS];this.matrix=new h.Matrix4,this.matrix.set(B[Q[1]][0]/$[Q[1]],B[Q[2]][0]/$[Q[2]],B[Q[3]][0]/$[Q[3]],0,B[Q[1]][1]/$[Q[1]],B[Q[2]][1]/$[Q[2]],B[Q[3]][1]/$[Q[3]],0,B[Q[1]][2]/$[Q[1]],B[Q[2]][2]/$[Q[2]],B[Q[3]][2]/$[Q[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new h.Matrix4().makeTranslation(J.NXSTART+J.originX,J.NYSTART+J.originY,J.NZSTART+J.originZ)),this.origin=new h.Vector3(0,0,0),this.unit=new h.Vector3(1,1,1),this.size={x:v.NX,y:v.NY,z:v.NZ},this.dimensionorder=[v.MAPC,v.MAPR,v.MAPS];var N=new Float32Array(E.buffer,1024+v.NSYMBT),ee=v.NX,Se=v.NY,ue=v.NZ;this.data=new Float32Array(ee*Se*ue);for(let ge=0;ge<ee;ge++)for(let me=0;me<Se;me++)for(let Me=0;Me<ue;Me++)this.data[(ge*Se+me)*ue+Me]=N[(Me*Se+me)*ee+ge]}}},864:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,inflateString:()=>inflateString,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(546),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(848),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(222),pako__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(75);function extend(t,i){for(var s in i)i.hasOwnProperty(s)&&i[s]!==void 0&&(t[s]=i[s]);return t}function deepCopy(t){let i,s,u;if(t==null)return{};if(typeof t!="object"||t===null)return t;for(u in i=Array.isArray(t)?[]:{},t)s=t[u],i[u]=deepCopy(s);return i}function isNumeric(t){var i=typeof t;return(i==="number"||i==="string")&&!isNaN(t-parseFloat(t))}function isEmptyObject(t){return Object.keys(t).length===0}function makeFunction(callback){return callback&&typeof callback=="string"&&(callback=eval("("+callback+")")),callback&&typeof callback!="function"?(console.warn("Invalid callback provided."),()=>{}):callback}function adjustVolumeStyle(t){t&&(!t.volformat||t.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData||(t.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(t.voldata,t.volformat)),t.volscheme&&(t.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(t.volscheme)))}function getExtent(t,i){var s,u,h,_,l,g,d,y,E,v,R=!i;if(s=u=h=9999,_=l=g=-9999,d=y=E=v=0,t.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var z=0;z<t.length;z++){var C=t[z];if(C!==void 0&&isFinite(C.x)&&isFinite(C.y)&&isFinite(C.z)&&(v++,d+=C.x,y+=C.y,E+=C.z,s=s<C.x?s:C.x,u=u<C.y?u:C.y,h=h<C.z?h:C.z,_=_>C.x?_:C.x,l=l>C.y?l:C.y,g=g>C.z?g:C.z,C.symmetries&&R))for(var I=0;I<C.symmetries.length;I++)v++,d+=C.symmetries[I].x,y+=C.symmetries[I].y,E+=C.symmetries[I].z,s=s<C.symmetries[I].x?s:C.symmetries[I].x,u=u<C.symmetries[I].y?u:C.symmetries[I].y,h=h<C.symmetries[I].z?h:C.symmetries[I].z,_=_>C.symmetries[I].x?_:C.symmetries[I].x,l=l>C.symmetries[I].y?l:C.symmetries[I].y,g=g>C.symmetries[I].z?g:C.symmetries[I].z}return[[s,u,h],[_,l,g],[d/v,y/v,E/v]]}function getPropertyRange(t,i){for(var s=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,h=0,_=t.length;h<_;h++){var l=getAtomProperty(t[h],i);l!=null&&(l<s&&(s=l),l>u&&(u=l))}return isFinite(s)||isFinite(u)?isFinite(s)?isFinite(u)||(u=s):s=u:s=u=0,[s,u]}class PausableTimer{constructor(i,s,u){this.total_time_run=0,this.fn=i,this.arg=u,this.countdown=s,this.start_time=new Date().getTime(),this.ident=setTimeout(i,s,u)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(t){for(var i=window.atob(t),s=i.length,u=new Uint8Array(s),h=0;h<s;h++)u[h]=i.charCodeAt(h);return u}function getAtomProperty(t,i){var s=null;return t.properties&&t.properties[i]!==void 0?s=t.properties[i]:t[i]!==void 0&&(s=t[i]),s}function mergeGeos(t,i){var s=i.geometry;s!==void 0&&t.geometryGroups.push(s.geometryGroups[0])}function specStringToObject(t){if(typeof t=="object"||t===void 0||t==null)return t;try{return JSON.parse(t)}catch{}var i=function(R){return isNumeric(R)?Math.floor(parseFloat(R))==parseInt(R)||R.indexOf(".")>=0?parseFloat(R):parseInt(R):R==="true"||R!=="false"&&R},s={};if((t=t.replace(/%7E/g,"~"))==="all")return s;for(var u=t.split(";"),h=0;h<u.length;h++){var _=u[h].split(":"),l=_[0],g={},d=_[1];if(d)if((d=d.replace(/~/g,"=")).indexOf("=")!==-1)for(var y=d.split(","),E=0;E<y.length;E++){var v=y[E].split("=",2);g[v[0]]=i(v[1])}else g=d.indexOf(",")!==-1?d.split(","):i(d);s[l]=g}return s}function checkStatus(t){if(!t.ok)throw new Error(`HTTP ${t.status} - ${t.statusText}`);return t}function get(t,i){var s=fetch(t).then(checkStatus).then(u=>u.text());return i?s.then(i):s}function getbin(t,i,s,u){var h;return h=s=="POST"?fetch(t,{method:"POST",body:u}).then(_=>checkStatus(_)).then(_=>_.arrayBuffer()):fetch(t).then(_=>checkStatus(_)).then(_=>_.arrayBuffer()),i?h.then(i):h}function download(t,i,s,u){var h="",_="",l="",g=null,d=i.addModel();if(t.indexOf(":")<0&&(t=t.length==4?"pdb:"+t:isNaN(t)?"url:"+t:"cid:"+t),t.substring(0,5)=="mmtf:"&&(console.warn("WARNING: MMTF now deprecated.  Reverting to bcif."),t="bcif:"+t.slice(5)),t.substring(0,5)==="bcif:")t=t.substring(5).toUpperCase(),l="https://models.rcsb.org/"+t+".bcif.gz",s&&s.noComputeSecondaryStructure===void 0&&(s.noComputeSecondaryStructure=!0),g=new Promise(function(E){getbin(l).then(function(v){d.addMolData(v,"bcif.gz",s),i.zoomTo(),i.render(),E(d)},function(){console.error("fetch of "+l+" failed.")})});else{if(t.substring(0,4)==="pdb:"){if(h="bcif",s&&s.format&&(h=s.format),s&&s.noComputeSecondaryStructure===void 0&&(s.noComputeSecondaryStructure=!0),!(t=t.substring(4).toUpperCase()).match(/^[1-9][A-Za-z0-9]{3}$/))return void alert("Wrong PDB ID");h=="bcif"?l="https://models.rcsb.org/"+t.toUpperCase()+".bcif.gz":(_=s&&s.pdbUri?s.pdbUri:"https://files.rcsb.org/view/",l=_+t+"."+h)}else if(t.substring(0,4)=="cid:"){if(h="sdf",!(t=t.substring(4)).match(/^[0-9]+$/))return void alert("Wrong Compound ID");l="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+t+"/SDF?record_type=3d"}else t.substring(0,4)=="url:"&&(l=t.substring(4),h=l);var y=function(E){d.addMolData(E,h,s),i.zoomTo(),i.render()};g=new Promise(function(E){h=="bcif"?getbin(l).then(function(v){y(v),E(d)}).catch(function(){_=s&&s.pdbUri?s.pdbUri:"https://files.rcsb.org/view/",l=_+t+".pdb",h="pdb",console.warn("falling back to pdb format"),get(l).then(function(v){y(v),E(d)}).catch(function(v){y(""),E(d),console.error("fetch of "+l+" failed: "+v.statusText)})}):get(l).then(function(v){y(v),E(d)}).catch(function(v){y(""),E(d),console.error("fetch of "+l+" failed: "+v.statusText)})})}return u?(g.then(function(E){u(E)}),d):g}function getColorFromStyle(t,i){let s=i.colorscheme;if(_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s]!==void 0)s=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s];else if(typeof s=="string"&&s.endsWith("Carbon")){let _=s.substring(0,s.lastIndexOf("Carbon")).toLowerCase();if(_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[_]!==void 0){let l=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);l.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[_],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s]={prop:"elem",map:l},s=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s]}}let u=t.color;if(i.color!==void 0&&i.color!="spectrum"&&(u=i.color),s!==void 0){let _,l;if(_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[s]!==void 0)s=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[s],s[t[s.prop]]!==void 0&&(u=s.map[t[s.prop]]);else if(s[t[s.prop]]!==void 0)u=s.map[t[s.prop]];else if(s.prop!==void 0&&s.gradient!==void 0){_=s.prop;var h=s.gradient;h instanceof _Gradient__WEBPACK_IMPORTED_MODULE_0__.GradientType||(h=(0,_Gradient__WEBPACK_IMPORTED_MODULE_0__.getGradient)(s));let g=h.range()||[-1,1];l=getAtomProperty(t,_),l!=null&&(u=h.valueToHex(l,g))}else s.prop!==void 0&&s.map!==void 0?(_=s.prop,l=getAtomProperty(t,_),s.map[l]!==void 0&&(u=s.map[l])):i.colorscheme[t.elem]!==void 0?u=i.colorscheme[t.elem]:console.warn("Could not interpret colorscheme "+s)}else i.colorfunc!==void 0&&(u=i.colorfunc(t));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(u)}function getElement(t){let i=t;return typeof t=="string"?i=document.querySelector("#"+t):typeof t=="object"&&t.get&&(i=t.get(0)),i}function inflateString(t,i=!0){let s;return s=typeof t=="string"?new TextEncoder().encode(t):new Uint8Array(t),(0,pako__WEBPACK_IMPORTED_MODULE_3__.inflate)(s,{to:i?"string":null})}},865:(t,i,s)=>{s.r(i),s.d(i,{CUBE:()=>l});var u=s(378),h=s(392);const _={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"};function l(g,d){d=d||{};const y=[[]];let E=g.split(/\r?\n/);const v=d.assignBonds===void 0||d.assignBonds;if(E.length<6)return y;let R=E[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const z=Math.abs(parseFloat(R[0]));let C={origin:void 0,size:void 0,unit:void 0,matrix4:void 0,matrix:void 0};const I=C.origin=new u.Vector3(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3]));R=E[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),R=E[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const K=R[0]>0?.529177:1;I.multiplyScalar(K);const J=Math.abs(R[0]),X=new u.Vector3(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3])).multiplyScalar(K);R=E[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const b=Math.abs(R[0]),F=new u.Vector3(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3])).multiplyScalar(K);R=E[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const B=Math.abs(R[0]),$=new u.Vector3(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3])).multiplyScalar(K);if(C.size={x:J,y:b,z:B},C.unit=new u.Vector3(X.x,F.y,$.z),X.y!=0||X.z!=0||F.x!=0||F.z!=0||$.x!=0||$.y!=0){C.matrix4=new u.Matrix4(X.x,F.x,$.x,0,X.y,F.y,$.y,0,X.z,F.z,$.z,0,0,0,0,1);let ge=new u.Matrix4().makeTranslation(I.x,I.y,I.z);C.matrix4=C.matrix4.multiplyMatrices(ge,C.matrix4),C.matrix=C.matrix4.matrix3FromTopLeft(),C.origin=new u.Vector3(0,0,0),C.unit=new u.Vector3(1,1,1)}y.modelData=[{cryst:C}],E=E.splice(6,z);for(var Q=y[y.length-1].length,N=Q+E.length,ee=Q;ee<N;++ee){var Se={};Se.serial=ee;var ue=E[ee-Q].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");Se.elem=_[ue[0]],Se.x=parseFloat(ue[2])*K,Se.y=parseFloat(ue[3])*K,Se.z=parseFloat(ue[4])*K,Se.hetflag=!0,Se.bonds=[],Se.bondOrder=[],Se.properties={},y[y.length-1].push(Se)}if(v)for(let ge=0;ge<y.length;ge++)(0,h.assignBonds)(y[ge],d);return y}},972:(t,i,s)=>{var u=s(981),h=!0,_=!0;try{String.fromCharCode.apply(null,[0])}catch{h=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_=!1}for(var l=new u.Buf8(256),g=0;g<256;g++)l[g]=g>=252?6:g>=248?5:g>=240?4:g>=224?3:g>=192?2:1;function d(y,E){if(E<65534&&(y.subarray&&_||!y.subarray&&h))return String.fromCharCode.apply(null,u.shrinkBuf(y,E));for(var v="",R=0;R<E;R++)v+=String.fromCharCode(y[R]);return v}l[254]=l[254]=1,i.string2buf=function(y){var E,v,R,z,C,I=y.length,K=0;for(z=0;z<I;z++)(64512&(v=y.charCodeAt(z)))==55296&&z+1<I&&(64512&(R=y.charCodeAt(z+1)))==56320&&(v=65536+(v-55296<<10)+(R-56320),z++),K+=v<128?1:v<2048?2:v<65536?3:4;for(E=new u.Buf8(K),C=0,z=0;C<K;z++)(64512&(v=y.charCodeAt(z)))==55296&&z+1<I&&(64512&(R=y.charCodeAt(z+1)))==56320&&(v=65536+(v-55296<<10)+(R-56320),z++),v<128?E[C++]=v:v<2048?(E[C++]=192|v>>>6,E[C++]=128|63&v):v<65536?(E[C++]=224|v>>>12,E[C++]=128|v>>>6&63,E[C++]=128|63&v):(E[C++]=240|v>>>18,E[C++]=128|v>>>12&63,E[C++]=128|v>>>6&63,E[C++]=128|63&v);return E},i.buf2binstring=function(y){return d(y,y.length)},i.binstring2buf=function(y){for(var E=new u.Buf8(y.length),v=0,R=E.length;v<R;v++)E[v]=y.charCodeAt(v);return E},i.buf2string=function(y,E){var v,R,z,C,I=E||y.length,K=new Array(2*I);for(R=0,v=0;v<I;)if((z=y[v++])<128)K[R++]=z;else if((C=l[z])>4)K[R++]=65533,v+=C-1;else{for(z&=C===2?31:C===3?15:7;C>1&&v<I;)z=z<<6|63&y[v++],C--;C>1?K[R++]=65533:z<65536?K[R++]=z:(z-=65536,K[R++]=55296|z>>10&1023,K[R++]=56320|1023&z)}return d(K,R)},i.utf8border=function(y,E){var v;for((E=E||y.length)>y.length&&(E=y.length),v=E-1;v>=0&&(192&y[v])==128;)v--;return v<0||v===0?E:v+l[y[v]]>E?v:E}},981:(t,i)=>{var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function u(l,g){return Object.prototype.hasOwnProperty.call(l,g)}i.assign=function(l){for(var g=Array.prototype.slice.call(arguments,1);g.length;){var d=g.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var y in d)u(d,y)&&(l[y]=d[y])}}return l},i.shrinkBuf=function(l,g){return l.length===g?l:l.subarray?l.subarray(0,g):(l.length=g,l)};var h={arraySet:function(l,g,d,y,E){if(g.subarray&&l.subarray)l.set(g.subarray(d,d+y),E);else for(var v=0;v<y;v++)l[E+v]=g[d+v]},flattenChunks:function(l){var g,d,y,E,v,R;for(y=0,g=0,d=l.length;g<d;g++)y+=l[g].length;for(R=new Uint8Array(y),E=0,g=0,d=l.length;g<d;g++)v=l[g],R.set(v,E),E+=v.length;return R}},_={arraySet:function(l,g,d,y,E){for(var v=0;v<y;v++)l[E+v]=g[d+v]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,h)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,_))},i.setTyped(s)}},__webpack_module_cache__={};function __webpack_require__(t){var i=__webpack_module_cache__[t];if(i!==void 0)return i.exports;var s=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(s.exports,s,s.exports,__webpack_require__),s.exports}__webpack_require__.d=(t,i)=>{for(var s in i)__webpack_require__.o(i,s)&&!__webpack_require__.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},__webpack_require__.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),__webpack_require__.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__(16),__webpack_require__(185);var __webpack_exports__=__webpack_require__(307);return __webpack_exports__})(),module.exports=factory()})(_3DmolMin)),_3DmolMin.exports}require_3DmolMin();const covalentRadii={H:.31,He:.28,Li:1.28,Be:.96,B:.84,C:.76,N:.71,O:.66,F:.57,Ne:.58,Na:1.66,Mg:1.41,Al:1.21,Si:1.11,P:1.07,S:1.05,Cl:1.02,Ar:1.06,K:2.03,Ca:1.76,Sc:1.7,Ti:1.6,V:1.53,Cr:1.39,Mn:1.61,Fe:1.52,Co:1.5,Ni:1.24,Cu:1.32,Zn:1.22,Ga:1.22,Ge:1.2,As:1.19,Se:1.2,Br:1.2,Kr:1.16,Rb:2.2,Sr:1.95,Y:1.9,Zr:1.75,Nb:1.64,Mo:1.54,Tc:1.47,Ru:1.46,Rh:1.42,Pd:1.39,Ag:1.45,Cd:1.44,In:1.42,Sn:1.39,Sb:1.39,Te:1.38,I:1.39,Xe:1.4,Cs:2.44,Ba:2.15,La:2.07,Ce:2.04,Pr:2.03,Nd:2.01,Pm:1.99,Sm:1.98,Eu:1.98,Gd:1.96,Tb:1.94,Dy:1.92,Ho:1.92,Er:1.89,Tm:1.9,Yb:1.87,Lu:1.75,Hf:1.87,Ta:1.7,W:1.62,Re:1.51,Os:1.44,Ir:1.41,Pt:1.36,Au:1.36,Hg:1.32,Tl:1.45,Pb:1.46,Bi:1.48,Po:1.4,At:1.5,Rn:1.5,Fr:2.6,Ra:2.21,Ac:2.15,Th:2.06,Pa:2,U:1.96,Np:1.9,Pu:1.87,Am:1.8,Cm:1.69},$3Dmol$1=window.$3Dmol;function mod(t,i){return(t%i+i)%i}function setCustomBondLengths(){function t(i,s){$3Dmol$1.setBondLength(i,s)}Object.keys(covalentRadii).forEach(i=>{t(i,1.05*covalentRadii[i])})}const Visualizer3dmol=reactExports.forwardRef(({viewerParams:t,cifText:i},s)=>{const u=reactExports.useRef(null),h=reactExports.useRef(null),_=reactExports.useRef("gldiv-"+(Math.random()+1).toString(36).substring(7));reactExports.useEffect(()=>{setCustomBondLengths()},[]);const l=()=>{if(h.current=u.current.addModel(),i){let y=$3Dmol$1.Parsers.CIF(i),E=y[0],v=y.modelData[0].cryst;h.current.setCrystData(v.a,v.b,v.c,v.alpha,v.beta,v.gamma);let R=h.current.modelData.cryst.matrix,z=new $3Dmol$1.Matrix3().getInverse3(R),C=[],I=[];E.forEach(X=>{let b=new $3Dmol$1.Vector3(X.x,X.y,X.z);if(t.packedCell){let F=b.clone().applyMatrix3(z);b=new $3Dmol$1.Vector3(mod(F.x,1),mod(F.y,1),mod(F.z,1)).applyMatrix3(R)}I.push({elem:X.elem,x:b.x,y:b.y,z:b.z})});let K=.03,J=t.supercell;for(let X=-1;X<J[0]+1;X++)for(let b=-1;b<J[1]+1;b++)for(let F=-1;F<J[2]+1;F++){let B=new $3Dmol$1.Vector3(X,b,F);if(B.applyMatrix3(R),X==-1||X==J[0]||b==-1||b==J[1]||F==-1||F==J[2])if(t.packedCell)I.forEach($=>{let Q=new $3Dmol$1.Vector3($.x,$.y,$.z);Q.add(B);let N=Q.clone().applyMatrix3(z);N.x>-K&&N.x<J[0]+K&&N.y>-K&&N.y<J[1]+K&&N.z>-K&&N.z<J[2]+K&&C.push({elem:$.elem,x:Q.x,y:Q.y,z:Q.z})});else continue;else I.forEach($=>{C.push({elem:$.elem,x:$.x+B.x,y:$.y+B.y,z:$.z+B.z})})}h.current.addAtoms(C)}},g=()=>{u.current.removeAllModels(),l();let y={sphere:{scale:.3,colorscheme:"Jmol"}};t.vdwRadius&&(y.sphere.scale=1),t.bonds&&(y.stick={radius:.15,colorscheme:"Jmol"}),u.current.setStyle(y),u.current.addUnitCell(h.current),h.current.assignBonds(),u.current.removeAllLabels(),t.atomLabels&&h.current.atoms.forEach(E=>{u.current.addLabel(E.elem,{position:{x:E.x,y:E.y,z:E.z},fontColor:"black",bold:!0,fontSize:18,showBackground:!1,backgroundOpacity:1,inFront:!0},null,!0)}),u.current.zoomTo(),u.current.zoom(1.4),u.current.render()},d=(y,E)=>{y=="camera"&&(E=="x"&&u.current.setView([0,0,0,0,-.5,-.5,-.5,.5]),E=="y"&&u.current.setView([0,0,0,0,.5,.5,.5,.5]),E=="z"&&u.current.setView([0,0,0,0,0,0,0,1]),u.current.zoomTo(),u.current.zoom(1.4))};return reactExports.useImperativeHandle(s,()=>({handleEvent:d})),reactExports.useEffect(()=>{let y={backgroundColor:"white",orthographic:!0};u.current=$3Dmol$1.createViewer(_.current,y),g()},[]),reactExports.useEffect(()=>{u.current&&g()},[t,i]),jsxRuntimeExports.jsx("div",{id:_.current,className:"gldiv",children:"No data!"})});Visualizer3dmol.displayName="Visualizer3dmol";const StructureWindow=({mouseEnabled:t,setMouseEnabledState:i,visualizerRef:s,viewerParams:u,cifText:h})=>{let _="structure-window";t||(_+=" disable-mouse");let l="Click to interact",g="mouse-disabled-note";return t&&(g="mouse-disabled-note on"),jsxRuntimeExports.jsxs("div",{className:"structure-window-outer",children:[jsxRuntimeExports.jsx("div",{className:"structure-window-click-handler",onClick:()=>i(!0),children:jsxRuntimeExports.jsx("div",{className:_,children:jsxRuntimeExports.jsx(Visualizer3dmol,{ref:s,viewerParams:u,cifText:h})})}),jsxRuntimeExports.jsx("div",{className:g,onClick:()=>i(!t),children:l})]})},StructureVisualizer=t=>{const[i,s]=reactExports.useState({supercell:t.initSupercell||[2,2,2],bonds:!0,packedCell:!0,atomLabels:!1,vdwRadius:!1}),[u,h]=reactExports.useState(!1),_=reactExports.useRef(null),l=reactExports.useRef(null);reactExports.useEffect(()=>{const E=v=>{l&&!l.current.contains(v.target)&&h(!1)};return document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[]);const g=E=>{h(E)},d=(E,v)=>{s(R=>({...R,[E]:v}))},y=(E,v)=>{_.current.handleEvent(E,v)};return jsxRuntimeExports.jsxs("div",{ref:l,className:"structure-visualizer",children:[jsxRuntimeExports.jsx(StructureWindow,{visualizerRef:_,viewerParams:i,cifText:t.cifText,mouseEnabled:u,setMouseEnabledState:g}),jsxRuntimeExports.jsx(ControlBox,{viewerParams:i,onViewerParamChange:d,onViewerEvent:y})]})};function DownloadIcon({size:t=14,className:i=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[jsxRuntimeExports.jsx("path",{d:"M12 15V3"}),jsxRuntimeExports.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),jsxRuntimeExports.jsx("path",{d:"m7 10 5 5 5-5"})]})}function NextIcon({size:t=14,className:i=""}){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,hegiht:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:jsxRuntimeExports.jsx("path",{d:"m9 18 6-6-6-6"})})}function PreviousIcon({size:t=14,className:i=""}){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,hegiht:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:jsxRuntimeExports.jsx("path",{d:"m15 18-6-6 6-6"})})}function FirstIcon({size:t=14,className:i=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,hegiht:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[jsxRuntimeExports.jsx("path",{d:"m17 18-6-6 6-6"}),jsxRuntimeExports.jsx("path",{d:"M7 6v12"})]})}function LastIcon({size:t=14,className:i=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,hegiht:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[jsxRuntimeExports.jsx("path",{d:"m7 18 6-6-6-6"}),jsxRuntimeExports.jsx("path",{d:"M17 6v12"})]})}var ARRAY_TYPE=typeof Float32Array<"u"?Float32Array:Array;function create$1(){var t=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function fromValues$1(t,i,s,u,h,_,l,g,d){var y=new ARRAY_TYPE(9);return y[0]=t,y[1]=i,y[2]=s,y[3]=u,y[4]=h,y[5]=_,y[6]=l,y[7]=g,y[8]=d,y}function invert(t,i){var s=i[0],u=i[1],h=i[2],_=i[3],l=i[4],g=i[5],d=i[6],y=i[7],E=i[8],v=E*l-g*y,R=-E*_+g*d,z=y*_-l*d,C=s*v+u*R+h*z;return C?(C=1/C,t[0]=v*C,t[1]=(-E*u+h*y)*C,t[2]=(g*u-h*l)*C,t[3]=R*C,t[4]=(E*s-h*d)*C,t[5]=(-g*s+h*_)*C,t[6]=z*C,t[7]=(-y*s+u*d)*C,t[8]=(l*s-u*_)*C,t):null}function create(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function length(t){var i=t[0],s=t[1],u=t[2];return Math.sqrt(i*i+s*s+u*u)}function fromValues(t,i,s){var u=new ARRAY_TYPE(3);return u[0]=t,u[1]=i,u[2]=s,u}function dot(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]}function transformMat3(t,i,s){var u=i[0],h=i[1],_=i[2];return t[0]=u*s[0]+h*s[3]+_*s[6],t[1]=u*s[1]+h*s[4]+_*s[7],t[2]=u*s[2]+h*s[5]+_*s[8],t}(function(){var t=create();return function(i,s,u,h,_,l){var g,d;for(s||(s=3),u||(u=0),h?d=Math.min(h*s+u,i.length):d=i.length,g=u;g<d;g+=s)t[0]=i[g],t[1]=i[g+1],t[2]=i[g+2],_(t,t,l),i[g]=t[0],i[g+1]=t[1],i[g+2]=t[2];return i}})();function vecLength(t){return length(t)}function radToDeg$1(t){return t*180/Math.PI}function cartesianToFractional(t,i){const s=i[0],u=i[1],h=i[2],_=fromValues$1(s[0],s[1],s[2],u[0],u[1],u[2],h[0],h[1],h[2]),l=create$1();if(!invert(l,_))throw new Error("Singular lattice matrix");return t.map(g=>{const d=fromValues(g.x,g.y,g.z),y=create();return transformMat3(y,d,l),{element:g.element,x:y[0],y:y[1],z:y[2]}})}function latticeMatrixToCIFParams(t){const i=fromValues(...t[0]),s=fromValues(...t[1]),u=fromValues(...t[2]),h=vecLength(i),_=vecLength(s),l=vecLength(u),g=Math.min(1,Math.max(-1,dot(s,u)/(_*l))),d=Math.min(1,Math.max(-1,dot(i,u)/(h*l))),y=Math.min(1,Math.max(-1,dot(i,s)/(h*_))),E=radToDeg$1(Math.acos(g)),v=radToDeg$1(Math.acos(d)),R=radToDeg$1(Math.acos(y));return{a:h,b:_,c:l,alpha:E,beta:v,gamma:R}}function generateCIFfromMatrix(t){const{lattice:i,sites:s}=t,u=cartesianToFractional(s,i),{a:h,b:_,c:l,alpha:g,beta:d,gamma:y}=latticeMatrixToCIFParams(i);let E=`data_generated_structure
_symmetry_space_group_name_H-M   'P 1'
_cell_length_a   ${h.toFixed(6)}
_cell_length_b   ${_.toFixed(6)}
_cell_length_c   ${l.toFixed(6)}
_cell_angle_alpha   ${g.toFixed(6)}
_cell_angle_beta    ${d.toFixed(6)}
_cell_angle_gamma   ${y.toFixed(6)}

loop_
_atom_site_label
_atom_site_type_symbol
_atom_site_fract_x
_atom_site_fract_y
_atom_site_fract_z
`;return u.forEach((v,R)=>{E+=`${v.element}${R+1} ${v.element} ${v.x.toFixed(6)} ${v.y.toFixed(6)} ${v.z.toFixed(6)}
`}),E}function generateXYZ(t){const{lattice:i,sites:s}=t,u=s.length,h=i.flat().map(l=>l.toFixed(6)).join(" ");let _=`${u}
`;return _+=`Lattice="${h}" Properties=species:S:1:pos:R:3
`,s.forEach(l=>{_+=`${l.element} ${l.x.toFixed(6)} ${l.y.toFixed(6)} ${l.z.toFixed(6)}
`}),_}function generatePOSCAR(t){const{lattice:i,sites:s}=t,u=[...new Set(s.map(g=>g.element))],h=u.map(g=>s.filter(d=>d.element===g).length),_=i.map(g=>g.map(d=>d.toFixed(6)).join(" ")).join(`
`),l=u.flatMap(g=>s.filter(d=>d.element===g).map(d=>`${d.x.toFixed(6)} ${d.y.toFixed(6)} ${d.z.toFixed(6)}`));return["Generated structure from OPTIMADE CLIENT","1.0",_,u.join(" "),h.join(" "),"Cartesian",...l].join(`
`)}function generateXSF(t){const{lattice:i,sites:s}=t;let u=`CRYSTAL
PRIMVEC
`;return i.forEach(h=>{u+=h.map(_=>_.toFixed(6)).join(" ")+`
`}),u+=`PRIMCOORD
${s.length} 1
`,s.forEach(h=>{u+=`${h.element} ${h.x.toFixed(6)} ${h.y.toFixed(6)} ${h.z.toFixed(6)}
`}),u}const defaultFormats=[{format:"json",label:"JSON"},{format:"cif",label:"CIF"},{format:"xyz",label:"XYZ"},{format:"xsf",label:"XSF"},{format:"poscar",label:"VASP"}];function downloadFile(t,i){const s=new Blob([t],{type:"text/plain"}),u=URL.createObjectURL(s),h=document.createElement("a");h.href=u,h.download=i,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(u)}function StructureDownload({OptimadeStructure:t,download_formats:i}){const[s,u]=reactExports.useState(!1),h=reactExports.useRef(null),_=i||defaultFormats,l=t.attributes.lattice_vectors,g=t?.attributes?.cartesian_site_positions||[],d=t.attributes.species_at_sites,y=g.map((R,z)=>({element:d[z],x:R[0],y:R[1],z:R[2]})),E={lattice:l,sites:y},v=R=>{let z="",C="structure";R==="cif"?(z=generateCIFfromMatrix(E),C+=".cif"):R==="xyz"?(z=generateXYZ(E),C+=".xyz"):R==="poscar"?(z=generatePOSCAR(E),C+=".vasp"):R==="xsf"?(z=generateXSF(E),C+=".xsf"):R==="json"&&(z=JSON.stringify(t,null,2),C+=".json"),z&&downloadFile(z,C),u(!1)};return reactExports.useEffect(()=>{const R=z=>{h.current&&!h.current.contains(z.target)&&u(!1)};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]),jsxRuntimeExports.jsxs("div",{className:"relative inline-block",ref:h,children:[jsxRuntimeExports.jsx("div",{onClick:()=>u(R=>!R),className:`${baseButtonStyle} ${textSmall} py-2! px-2!`,title:"Download",children:jsxRuntimeExports.jsx(DownloadIcon,{})}),s&&jsxRuntimeExports.jsx("div",{className:"absolute right-0 mt-0.5 bg-white rounded-sm shadow-sm ring-1 ring-slate-500 z-100",children:jsxRuntimeExports.jsx("ul",{children:_.map(({format:R,label:z})=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{onClick:()=>v(R),className:`${textSmall} w-full text-left px-3 py-1.25 text-slate-700 hover:bg-gray-100 hover:cursor-pointer`,children:z})},R))})})]})}function StructureViewerWithDownload({OptimadeStructure:t}){const i=t.attributes.lattice_vectors,s=t?.attributes?.cartesian_site_positions||null,u=t.attributes.species_at_sites;let h=[];s&&(h=s.map((g,d)=>({element:u[d],x:g[0],y:g[1],z:g[2]})));const _={lattice:i,sites:h},l=reactExports.useMemo(()=>generateCIFfromMatrix(_),[_]);return s?jsxRuntimeExports.jsxs("div",{className:"relative min-h-[450px] ",children:[jsxRuntimeExports.jsx("div",{className:"w-full h-[450px]",children:jsxRuntimeExports.jsx(StructureVisualizer,{cifText:l},l)}),jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2 z-10",children:jsxRuntimeExports.jsx(StructureDownload,{OptimadeStructure:t})})]}):jsxRuntimeExports.jsx("div",{className:`${containerStyle} min-h-[450px] flex items-center justify-center`,children:jsxRuntimeExports.jsxs("div",{className:textError,children:[jsxRuntimeExports.jsx("p",{children:"Unexpected or malformed data format found. "}),jsxRuntimeExports.jsx("p",{children:"--"}),jsxRuntimeExports.jsx("p",{children:"Crystal structure rendering skipped..."})]})})}function QEInputButton({cifText:t}){const i="https://qeinputgenerator.materialscloud.io",s=async()=>{if(!t){alert("No CIF data available");return}const u=window.open("","_blank");try{const h=new FormData;h.append("fileformat","cif-ase"),h.append("structurefile",new Blob([t],{type:"text/plain;charset=utf-8"}),"structure.cif");const _=await fetch(`${i}/compute/upload_structure/`,{method:"POST",body:h});if(!_.ok)throw new Error(`Upload failed: ${_.statusText}`);const l=await _.json();l.redirect?u.location=`${i}${l.redirect}`:(u.close(),alert("Unexpected response from server"))}catch(h){console.error(h),u.close(),alert("Failed to upload structure.")}};return jsxRuntimeExports.jsx("button",{onClick:s,disabled:!t,title:"Use the chosen structure in the QE Input Generator Tool",className:`${baseButtonStyle} ${textNormal}`,children:"Use in QE Input Generator"})}function ResultViewer({selectedResult:t}){const i=t?.attributes?.lattice_vectors??[],s=t?.attributes?.cartesian_site_positions??[],u=t?.attributes?.species_at_sites??[],h=s.map((g,d)=>({element:u[d],x:g[0],y:g[1],z:g[2]})),_=reactExports.useMemo(()=>({lattice:i,sites:h}),[i,h]),l=reactExports.useMemo(()=>generateCIFfromMatrix(_),[_]);return jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col",children:[t&&jsxRuntimeExports.jsxs("div",{className:"@container w-full flex flex-col md:flex-row gap-2 md:gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-full md:w-1/2",children:jsxRuntimeExports.jsx(StructureViewerWithDownload,{OptimadeStructure:t,cifText:l})}),jsxRuntimeExports.jsx("div",{className:containerStyleHalf,children:jsxRuntimeExports.jsx(JsonView,{data:t,compactTopLevel:!0,shouldExpandNode:g=>g<2,style:{backgroundColor:""}})})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 md:mt-4 flex justify-center",children:jsxRuntimeExports.jsx(QEInputButton,{cifText:l})})]})}const slateDropdown=`min-w-[325]
  w-full border-2 border-slate-300
  bg-slate-200 py-1 px-3 rounded shadow hover:cursor-pointer
  hover:bg-slate-300 disabled:cursor-not-allowed
  disabled:bg-gray-100 text-sm md:text-base
`,longSlateDropdown=slateDropdown+" min-w-[300px] max-w-[700px]";function ResultsDropdown({results:t,resultsLoading:i,selectedResult:s,setSelectedResult:u}){const h=_=>{const l=t?.data?.find(g=>String(g.id)===_.target.value);l&&u(l)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select a result"}),jsxRuntimeExports.jsx("select",{className:`${slateDropdown} w-full`,value:s?.id||"",onChange:h,disabled:i||!t?.data?.length,children:t?.data?.length?t.data.map(_=>jsxRuntimeExports.jsx("option",{value:_.id,children:`${_.attributes?.chemical_formula_descriptive||_.attributes?.chemical_formula_hill||"Unknown"} (${_.id})`},_.id)):jsxRuntimeExports.jsx("option",{value:"",children:"No results for current query"})})]})}const tableTitleclassName="font-semibold border-b [&>th]:px-2",tableRowclassName="border-b border-slate-300 *:py-0.5 *:pl-2 pr-8 *:break-words";function OptimadeProviderInfo({queryUrl:t}){const[i,s]=reactExports.useState(null),[u,h]=reactExports.useState([]),[_,l]=reactExports.useState(!1),[g,d]=reactExports.useState(!1),y=reactExports.useRef(null),[E,v]=reactExports.useState("0px");return reactExports.useEffect(()=>{if(!t)return;l(!0),s(null),h([]);async function R(){try{const{customProps:z,error:C}=await getInfo({providerUrl:t});C&&h([C]),z&&s(z)}catch(z){h([z])}finally{l(!1)}}R()},[t]),reactExports.useEffect(()=>{y.current&&v(g?`${y.current.scrollHeight}px`:"0px")},[g,i,u,_]),!t||u.length>0&&!_?null:jsxRuntimeExports.jsxs("div",{className:containerStyleDropdown,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>d(!g),className:"w-full flex justify-between p-3 bg-slate-100 hover:bg-slate-200 hover:cursor-pointer transition",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Custom attributes in selected database"}),jsxRuntimeExports.jsx("span",{children:g?"":""})]}),jsxRuntimeExports.jsx("div",{ref:y,style:{maxHeight:E},className:"transition-[max-height] duration-300 ease-in-out",children:jsxRuntimeExports.jsxs("div",{className:"pt-2 max-h-96 overflow-y-auto",children:[_&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-4",children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 border-2 border-t-2 border-gray-400 border-t-blue-500 rounded-full animate-spin mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"Loading provider info"})]}),i&&!_&&jsxRuntimeExports.jsx("div",{className:"",children:jsxRuntimeExports.jsxs("table",{className:"w-full table-fixed text-left border-collapse",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:tableTitleclassName,children:[jsxRuntimeExports.jsx("th",{children:"Field"}),jsxRuntimeExports.jsx("th",{children:"Description"}),jsxRuntimeExports.jsx("th",{children:"Unit"})]})}),jsxRuntimeExports.jsx("tbody",{children:Object.entries(i).map(([R,z])=>jsxRuntimeExports.jsxs("tr",{className:tableRowclassName,children:[jsxRuntimeExports.jsx("td",{children:R}),jsxRuntimeExports.jsx("td",{children:z.description||"-"}),jsxRuntimeExports.jsx("td",{children:z.unit||"-"})]},R))})]})})]})})]})}const buttonClassName="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 hover:cursor-pointer disabled:bg-gray-200 disabled:opacity-50 disabled:cursor-default";function PaginationHandler({currentPage:t,totalPages:i,resultsLoading:s,metaData:u,onPageChange:h}){if(!i||i<1)return null;const _=u?.data_returned||"N/A",l=t>1;let g=!1;return(u?.more_data_available===!0||t<i)&&(g=!0),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-slate-700 text-sm text-center w-full md:w-auto",children:`Filtered results: ${_} of ${u.data_available} | Showing page ${t} of ${i}`}),jsxRuntimeExports.jsx("button",{onClick:()=>h(1),disabled:t===1||s,className:buttonClassName,children:jsxRuntimeExports.jsx(FirstIcon,{})}),jsxRuntimeExports.jsx("button",{onClick:()=>h(t-1),disabled:!l||s,className:buttonClassName,children:jsxRuntimeExports.jsx(PreviousIcon,{})}),jsxRuntimeExports.jsx("button",{onClick:()=>h(t+1),disabled:!g||s,className:buttonClassName,children:jsxRuntimeExports.jsx(NextIcon,{})}),jsxRuntimeExports.jsx("button",{onClick:()=>h(i),disabled:t===i||s,className:buttonClassName,children:jsxRuntimeExports.jsx(LastIcon,{})})]})}const LayoutGroupContext=reactExports.createContext({});function useConstant(t){const i=reactExports.useRef(null);return i.current===null&&(i.current=t()),i.current}const isBrowser$1=typeof window<"u",useIsomorphicLayoutEffect=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(t,i){t.indexOf(i)===-1&&t.push(i)}function removeItem(t,i){const s=t.indexOf(i);s>-1&&t.splice(s,1)}const clamp=(t,i,s)=>s>i?i:s<t?t:s;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function isObject(t){return typeof t=="object"&&t!==null}const isZeroValueString=t=>/^0[^.\s]+$/u.test(t);function memo(t){let i;return()=>(i===void 0&&(i=t()),i)}const noop=t=>t,combineFunctions=(t,i)=>s=>i(t(s)),pipe=(...t)=>t.reduce(combineFunctions),progress=(t,i,s)=>{const u=i-t;return u===0?1:(s-t)/u};class SubscriptionManager{constructor(){this.subscriptions=[]}add(i){return addUniqueItem(this.subscriptions,i),()=>removeItem(this.subscriptions,i)}notify(i,s,u){const h=this.subscriptions.length;if(h)if(h===1)this.subscriptions[0](i,s,u);else for(let _=0;_<h;_++){const l=this.subscriptions[_];l&&l(i,s,u)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=t=>t*1e3,millisecondsToSeconds=t=>t/1e3;function velocityPerSecond(t,i){return i?t*(1e3/i):0}const calcBezier=(t,i,s)=>(((1-3*s+3*i)*t+(3*s-6*i))*t+3*i)*t,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(t,i,s,u,h){let _,l,g=0;do l=i+(s-i)/2,_=calcBezier(l,u,h)-t,_>0?s=l:i=l;while(Math.abs(_)>subdivisionPrecision&&++g<subdivisionMaxIterations);return l}function cubicBezier(t,i,s,u){if(t===i&&s===u)return noop;const h=_=>binarySubdivide(_,0,1,t,s);return _=>_===0||_===1?_:calcBezier(h(_),i,u)}const mirrorEasing=t=>i=>i<=.5?t(2*i)/2:(2-t(2*(1-i)))/2,reverseEasing=t=>i=>1-t(1-i),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=t=>(t*=2)<1?.5*backIn(t):.5*(2-Math.pow(2,-10*(t-1))),circIn=t=>1-Math.sin(Math.acos(t)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=t=>Array.isArray(t)&&typeof t[0]!="number",isBezierDefinition=t=>Array.isArray(t)&&typeof t[0]=="number",easingLookup={linear:noop,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=t=>typeof t=="string",easingDefinitionToFunction=t=>{if(isBezierDefinition(t)){invariant(t.length===4);const[i,s,u,h]=t;return cubicBezier(i,s,u,h)}else if(isValidEasing(t))return easingLookup[t];return t},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(t,i){let s=new Set,u=new Set,h=!1,_=!1;const l=new WeakSet;let g={delta:0,timestamp:0,isProcessing:!1};function d(E){l.has(E)&&(y.schedule(E),t()),E(g)}const y={schedule:(E,v=!1,R=!1)=>{const C=R&&h?s:u;return v&&l.add(E),C.has(E)||C.add(E),E},cancel:E=>{u.delete(E),l.delete(E)},process:E=>{if(g=E,h){_=!0;return}h=!0,[s,u]=[u,s],s.forEach(d),s.clear(),h=!1,_&&(_=!1,y.process(E))}};return y}const maxElapsed=40;function createRenderBatcher(t,i){let s=!1,u=!0;const h={delta:0,timestamp:0,isProcessing:!1},_=()=>s=!0,l=stepsOrder.reduce((b,F)=>(b[F]=createRenderStep(_),b),{}),{setup:g,read:d,resolveKeyframes:y,preUpdate:E,update:v,preRender:R,render:z,postRender:C}=l,I=()=>{const b=MotionGlobalConfig.useManualTiming?h.timestamp:performance.now();s=!1,MotionGlobalConfig.useManualTiming||(h.delta=u?1e3/60:Math.max(Math.min(b-h.timestamp,maxElapsed),1)),h.timestamp=b,h.isProcessing=!0,g.process(h),d.process(h),y.process(h),E.process(h),v.process(h),R.process(h),z.process(h),C.process(h),h.isProcessing=!1,s&&i&&(u=!1,t(I))},K=()=>{s=!0,u=!0,h.isProcessing||t(I)};return{schedule:stepsOrder.reduce((b,F)=>{const B=l[F];return b[F]=($,Q=!1,N=!1)=>(s||K(),B.schedule($,Q,N)),b},{}),cancel:b=>{for(let F=0;F<stepsOrder.length;F++)l[stepsOrder[F]].cancel(b)},state:h,steps:l}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop,!0);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:t=>{now=t,queueMicrotask(clearTime)}},checkStringStartsWith=t=>i=>typeof i=="string"&&i.startsWith(t),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=t=>startsAsVariableToken(t)?singleCssVariableRegex.test(t.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function containsCSSVariable(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const number={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},alpha={...number,transform:t=>clamp(0,1,t)},scale={...number,default:1},sanitize=t=>Math.round(t*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(t){return t==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(t,i)=>s=>!!(typeof s=="string"&&singleColorRegex.test(s)&&s.startsWith(t)||i&&!isNullish(s)&&Object.prototype.hasOwnProperty.call(s,i)),splitColor=(t,i,s)=>u=>{if(typeof u!="string")return u;const[h,_,l,g]=u.match(floatRegex);return{[t]:parseFloat(h),[i]:parseFloat(_),[s]:parseFloat(l),alpha:g!==void 0?parseFloat(g):1}},clampRgbUnit=t=>clamp(0,255,t),rgbUnit={...number,transform:t=>Math.round(clampRgbUnit(t))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:t,green:i,blue:s,alpha:u=1})=>"rgba("+rgbUnit.transform(t)+", "+rgbUnit.transform(i)+", "+rgbUnit.transform(s)+", "+sanitize(alpha.transform(u))+")"};function parseHex(t){let i="",s="",u="",h="";return t.length>5?(i=t.substring(1,3),s=t.substring(3,5),u=t.substring(5,7),h=t.substring(7,9)):(i=t.substring(1,2),s=t.substring(2,3),u=t.substring(3,4),h=t.substring(4,5),i+=i,s+=s,u+=u,h+=h),{red:parseInt(i,16),green:parseInt(s,16),blue:parseInt(u,16),alpha:h?parseInt(h,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=t=>({test:i=>typeof i=="string"&&i.endsWith(t)&&i.split(" ").length===1,parse:parseFloat,transform:i=>`${i}${t}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:t=>percent.parse(t)/100,transform:t=>percent.transform(t*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:t,saturation:i,lightness:s,alpha:u=1})=>"hsla("+Math.round(t)+", "+percent.transform(sanitize(i))+", "+percent.transform(sanitize(s))+", "+sanitize(alpha.transform(u))+")"},color={test:t=>rgba.test(t)||hex.test(t)||hsla.test(t),parse:t=>rgba.test(t)?rgba.parse(t):hsla.test(t)?hsla.parse(t):hex.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?rgba.transform(t):hsla.transform(t),getAnimatableNone:t=>{const i=color.parse(t);return i.alpha=0,color.transform(i)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(t){return isNaN(t)&&typeof t=="string"&&(t.match(floatRegex)?.length||0)+(t.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(t){const i=t.toString(),s=[],u={color:[],number:[],var:[]},h=[];let _=0;const g=i.replace(complexRegex,d=>(color.test(d)?(u.color.push(_),h.push(COLOR_TOKEN),s.push(color.parse(d))):d.startsWith(VAR_FUNCTION_TOKEN)?(u.var.push(_),h.push(VAR_TOKEN),s.push(d)):(u.number.push(_),h.push(NUMBER_TOKEN),s.push(parseFloat(d))),++_,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:s,split:g,indexes:u,types:h}}function parseComplexValue(t){return analyseComplexValue(t).values}function createTransformer(t){const{split:i,types:s}=analyseComplexValue(t),u=i.length;return h=>{let _="";for(let l=0;l<u;l++)if(_+=i[l],h[l]!==void 0){const g=s[l];g===NUMBER_TOKEN?_+=sanitize(h[l]):g===COLOR_TOKEN?_+=color.transform(h[l]):_+=h[l]}return _}}const convertNumbersToZero=t=>typeof t=="number"?0:color.test(t)?color.getAnimatableNone(t):t;function getAnimatableNone$1(t){const i=parseComplexValue(t);return createTransformer(t)(i.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(t,i,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(i-t)*6*s:s<1/2?i:s<2/3?t+(i-t)*(2/3-s)*6:t}function hslaToRgba({hue:t,saturation:i,lightness:s,alpha:u}){t/=360,i/=100,s/=100;let h=0,_=0,l=0;if(!i)h=_=l=s;else{const g=s<.5?s*(1+i):s+i-s*i,d=2*s-g;h=hueToRgb(d,g,t+1/3),_=hueToRgb(d,g,t),l=hueToRgb(d,g,t-1/3)}return{red:Math.round(h*255),green:Math.round(_*255),blue:Math.round(l*255),alpha:u}}function mixImmediate(t,i){return s=>s>0?i:t}const mixNumber$1=(t,i,s)=>t+(i-t)*s,mixLinearColor=(t,i,s)=>{const u=t*t,h=s*(i*i-u)+u;return h<0?0:Math.sqrt(h)},colorTypes=[hex,rgba,hsla],getColorType=t=>colorTypes.find(i=>i.test(t));function asRGBA(t){const i=getColorType(t);if(!i)return!1;let s=i.parse(t);return i===hsla&&(s=hslaToRgba(s)),s}const mixColor=(t,i)=>{const s=asRGBA(t),u=asRGBA(i);if(!s||!u)return mixImmediate(t,i);const h={...s};return _=>(h.red=mixLinearColor(s.red,u.red,_),h.green=mixLinearColor(s.green,u.green,_),h.blue=mixLinearColor(s.blue,u.blue,_),h.alpha=mixNumber$1(s.alpha,u.alpha,_),rgba.transform(h))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(t,i){return invisibleValues.has(t)?s=>s<=0?t:i:s=>s>=1?i:t}function mixNumber(t,i){return s=>mixNumber$1(t,i,s)}function getMixer(t){return typeof t=="number"?mixNumber:typeof t=="string"?isCSSVariableToken(t)?mixImmediate:color.test(t)?mixColor:mixComplex:Array.isArray(t)?mixArray:typeof t=="object"?color.test(t)?mixColor:mixObject:mixImmediate}function mixArray(t,i){const s=[...t],u=s.length,h=t.map((_,l)=>getMixer(_)(_,i[l]));return _=>{for(let l=0;l<u;l++)s[l]=h[l](_);return s}}function mixObject(t,i){const s={...t,...i},u={};for(const h in s)t[h]!==void 0&&i[h]!==void 0&&(u[h]=getMixer(t[h])(t[h],i[h]));return h=>{for(const _ in u)s[_]=u[_](h);return s}}function matchOrder(t,i){const s=[],u={color:0,var:0,number:0};for(let h=0;h<i.values.length;h++){const _=i.types[h],l=t.indexes[_][u[_]],g=t.values[l]??0;s[h]=g,u[_]++}return s}const mixComplex=(t,i)=>{const s=complex.createTransformer(i),u=analyseComplexValue(t),h=analyseComplexValue(i);return u.indexes.var.length===h.indexes.var.length&&u.indexes.color.length===h.indexes.color.length&&u.indexes.number.length>=h.indexes.number.length?invisibleValues.has(t)&&!h.values.length||invisibleValues.has(i)&&!u.values.length?mixVisibility(t,i):pipe(mixArray(matchOrder(u,h),h.values),s):mixImmediate(t,i)};function mix(t,i,s){return typeof t=="number"&&typeof i=="number"&&typeof s=="number"?mixNumber$1(t,i,s):getMixer(t)(t,i)}const frameloopDriver=t=>{const i=({timestamp:s})=>t(s);return{start:(s=!0)=>frame.update(i,s),stop:()=>cancelFrame(i),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(t,i,s=10)=>{let u="";const h=Math.max(Math.round(i/s),2);for(let _=0;_<h;_++)u+=Math.round(t(_/(h-1))*1e4)/1e4+", ";return`linear(${u.substring(0,u.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(t){let i=0;const s=50;let u=t.next(i);for(;!u.done&&i<maxGeneratorDuration;)i+=s,u=t.next(i);return i>=maxGeneratorDuration?1/0:i}function createGeneratorEasing(t,i=100,s){const u=s({...t,keyframes:[0,i]}),h=Math.min(calcGeneratorDuration(u),maxGeneratorDuration);return{type:"keyframes",ease:_=>u.next(h*_).value/i,duration:millisecondsToSeconds(h)}}const velocitySampleDuration=5;function calcGeneratorVelocity(t,i,s){const u=Math.max(i-velocitySampleDuration,0);return velocityPerSecond(s-t(u),i-u)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:t=springDefaults.duration,bounce:i=springDefaults.bounce,velocity:s=springDefaults.velocity,mass:u=springDefaults.mass}){let h,_,l=1-i;l=clamp(springDefaults.minDamping,springDefaults.maxDamping,l),t=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(t)),l<1?(h=y=>{const E=y*l,v=E*t,R=E-s,z=calcAngularFreq(y,l),C=Math.exp(-v);return safeMin-R/z*C},_=y=>{const v=y*l*t,R=v*s+s,z=Math.pow(l,2)*Math.pow(y,2)*t,C=Math.exp(-v),I=calcAngularFreq(Math.pow(y,2),l);return(-h(y)+safeMin>0?-1:1)*((R-z)*C)/I}):(h=y=>{const E=Math.exp(-y*t),v=(y-s)*t+1;return-safeMin+E*v},_=y=>{const E=Math.exp(-y*t),v=(s-y)*(t*t);return E*v});const g=5/t,d=approximateRoot(h,_,g);if(t=secondsToMilliseconds(t),isNaN(d))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:t};{const y=Math.pow(d,2)*u;return{stiffness:y,damping:l*2*Math.sqrt(u*y),duration:t}}}const rootIterations=12;function approximateRoot(t,i,s){let u=s;for(let h=1;h<rootIterations;h++)u=u-t(u)/i(u);return u}function calcAngularFreq(t,i){return t*Math.sqrt(1-i*i)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(t,i){return i.some(s=>t[s]!==void 0)}function getSpringOptions(t){let i={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...t};if(!isSpringType(t,physicsKeys)&&isSpringType(t,durationKeys))if(t.visualDuration){const s=t.visualDuration,u=2*Math.PI/(s*1.2),h=u*u,_=2*clamp(.05,1,1-(t.bounce||0))*Math.sqrt(h);i={...i,mass:springDefaults.mass,stiffness:h,damping:_}}else{const s=findSpring(t);i={...i,...s,mass:springDefaults.mass},i.isResolvedFromDuration=!0}return i}function spring(t=springDefaults.visualDuration,i=springDefaults.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:i}:t;let{restSpeed:u,restDelta:h}=s;const _=s.keyframes[0],l=s.keyframes[s.keyframes.length-1],g={done:!1,value:_},{stiffness:d,damping:y,mass:E,duration:v,velocity:R,isResolvedFromDuration:z}=getSpringOptions({...s,velocity:-millisecondsToSeconds(s.velocity||0)}),C=R||0,I=y/(2*Math.sqrt(d*E)),K=l-_,J=millisecondsToSeconds(Math.sqrt(d/E)),X=Math.abs(K)<5;u||(u=X?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),h||(h=X?springDefaults.restDelta.granular:springDefaults.restDelta.default);let b;if(I<1){const B=calcAngularFreq(J,I);b=$=>{const Q=Math.exp(-I*J*$);return l-Q*((C+I*J*K)/B*Math.sin(B*$)+K*Math.cos(B*$))}}else if(I===1)b=B=>l-Math.exp(-J*B)*(K+(C+J*K)*B);else{const B=J*Math.sqrt(I*I-1);b=$=>{const Q=Math.exp(-I*J*$),N=Math.min(B*$,300);return l-Q*((C+I*J*K)*Math.sinh(N)+B*K*Math.cosh(N))/B}}const F={calculatedDuration:z&&v||null,next:B=>{const $=b(B);if(z)g.done=B>=v;else{let Q=B===0?C:0;I<1&&(Q=B===0?secondsToMilliseconds(C):calcGeneratorVelocity(b,B,$));const N=Math.abs(Q)<=u,ee=Math.abs(l-$)<=h;g.done=N&&ee}return g.value=g.done?l:$,g},toString:()=>{const B=Math.min(calcGeneratorDuration(F),maxGeneratorDuration),$=generateLinearEasing(Q=>F.next(B*Q).value,B,30);return B+"ms "+$},toTransition:()=>{}};return F}spring.applyToOptions=t=>{const i=createGeneratorEasing(t,100,spring);return t.ease=i.ease,t.duration=secondsToMilliseconds(i.duration),t.type="keyframes",t};function inertia({keyframes:t,velocity:i=0,power:s=.8,timeConstant:u=325,bounceDamping:h=10,bounceStiffness:_=500,modifyTarget:l,min:g,max:d,restDelta:y=.5,restSpeed:E}){const v=t[0],R={done:!1,value:v},z=N=>g!==void 0&&N<g||d!==void 0&&N>d,C=N=>g===void 0?d:d===void 0||Math.abs(g-N)<Math.abs(d-N)?g:d;let I=s*i;const K=v+I,J=l===void 0?K:l(K);J!==K&&(I=J-v);const X=N=>-I*Math.exp(-N/u),b=N=>J+X(N),F=N=>{const ee=X(N),Se=b(N);R.done=Math.abs(ee)<=y,R.value=R.done?J:Se};let B,$;const Q=N=>{z(R.value)&&(B=N,$=spring({keyframes:[R.value,C(R.value)],velocity:calcGeneratorVelocity(b,N,R.value),damping:h,stiffness:_,restDelta:y,restSpeed:E}))};return Q(0),{calculatedDuration:null,next:N=>{let ee=!1;return!$&&B===void 0&&(ee=!0,F(N),Q(N)),B!==void 0&&N>=B?$.next(N-B):(!ee&&F(N),R)}}}function createMixers(t,i,s){const u=[],h=s||MotionGlobalConfig.mix||mix,_=t.length-1;for(let l=0;l<_;l++){let g=h(t[l],t[l+1]);if(i){const d=Array.isArray(i)?i[l]||noop:i;g=pipe(d,g)}u.push(g)}return u}function interpolate(t,i,{clamp:s=!0,ease:u,mixer:h}={}){const _=t.length;if(invariant(_===i.length),_===1)return()=>i[0];if(_===2&&i[0]===i[1])return()=>i[1];const l=t[0]===t[1];t[0]>t[_-1]&&(t=[...t].reverse(),i=[...i].reverse());const g=createMixers(i,u,h),d=g.length,y=E=>{if(l&&E<t[0])return i[0];let v=0;if(d>1)for(;v<t.length-2&&!(E<t[v+1]);v++);const R=progress(t[v],t[v+1],E);return g[v](R)};return s?E=>y(clamp(t[0],t[_-1],E)):y}function fillOffset(t,i){const s=t[t.length-1];for(let u=1;u<=i;u++){const h=progress(0,i,u);t.push(mixNumber$1(s,1,h))}}function defaultOffset(t){const i=[0];return fillOffset(i,t.length-1),i}function convertOffsetToTimes(t,i){return t.map(s=>s*i)}function defaultEasing(t,i){return t.map(()=>i||easeInOut).splice(0,t.length-1)}function keyframes({duration:t=300,keyframes:i,times:s,ease:u="easeInOut"}){const h=isEasingArray(u)?u.map(easingDefinitionToFunction):easingDefinitionToFunction(u),_={done:!1,value:i[0]},l=convertOffsetToTimes(s&&s.length===i.length?s:defaultOffset(i),t),g=interpolate(l,i,{ease:Array.isArray(h)?h:defaultEasing(i,h)});return{calculatedDuration:t,next:d=>(_.value=g(d),_.done=d>=t,_)}}const isNotNull$1=t=>t!==null;function getFinalKeyframe$1(t,{repeat:i,repeatType:s="loop"},u,h=1){const _=t.filter(isNotNull$1),g=h<0||i&&s!=="loop"&&i%2===1?0:_.length-1;return!g||u===void 0?_[g]:u}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(t){typeof t.type=="string"&&(t.type=transitionTypeMap[t.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(i=>{this.resolve=i})}notifyFinished(){this.resolve()}then(i,s){return this.finished.then(i,s)}}const percentToProgress=t=>t/100;class JSAnimation extends WithPromise{constructor(i){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=i,this.initAnimation(),this.play(),i.autoplay===!1&&this.pause()}initAnimation(){const{options:i}=this;replaceTransitionType(i);const{type:s=keyframes,repeat:u=0,repeatDelay:h=0,repeatType:_,velocity:l=0}=i;let{keyframes:g}=i;const d=s||keyframes;d!==keyframes&&typeof g[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(g[0],g[1])),g=[0,100]);const y=d({...i,keyframes:g});_==="mirror"&&(this.mirroredGenerator=d({...i,keyframes:[...g].reverse(),velocity:-l})),y.calculatedDuration===null&&(y.calculatedDuration=calcGeneratorDuration(y));const{calculatedDuration:E}=y;this.calculatedDuration=E,this.resolvedDuration=E+h,this.totalDuration=this.resolvedDuration*(u+1)-h,this.generator=y}updateTime(i){const s=Math.round(i-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(i,s=!1){const{generator:u,totalDuration:h,mixKeyframes:_,mirroredGenerator:l,resolvedDuration:g,calculatedDuration:d}=this;if(this.startTime===null)return u.next(0);const{delay:y=0,keyframes:E,repeat:v,repeatType:R,repeatDelay:z,type:C,onUpdate:I,finalKeyframe:K}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,i):this.speed<0&&(this.startTime=Math.min(i-h/this.speed,this.startTime)),s?this.currentTime=i:this.updateTime(i);const J=this.currentTime-y*(this.playbackSpeed>=0?1:-1),X=this.playbackSpeed>=0?J<0:J>h;this.currentTime=Math.max(J,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let b=this.currentTime,F=u;if(v){const N=Math.min(this.currentTime,h)/g;let ee=Math.floor(N),Se=N%1;!Se&&N>=1&&(Se=1),Se===1&&ee--,ee=Math.min(ee,v+1),ee%2&&(R==="reverse"?(Se=1-Se,z&&(Se-=z/g)):R==="mirror"&&(F=l)),b=clamp(0,1,Se)*g}const B=X?{done:!1,value:E[0]}:F.next(b);_&&(B.value=_(B.value));let{done:$}=B;!X&&d!==null&&($=this.playbackSpeed>=0?this.currentTime>=h:this.currentTime<=0);const Q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$);return Q&&C!==inertia&&(B.value=getFinalKeyframe$1(E,this.options,K,this.speed)),I&&I(B.value),Q&&this.finish(),B}then(i,s){return this.finished.then(i,s)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get iterationDuration(){const{delay:i=0}=this.options||{};return this.duration+millisecondsToSeconds(i)}get time(){return millisecondsToSeconds(this.currentTime)}set time(i){i=secondsToMilliseconds(i),this.currentTime=i,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=i:this.driver&&(this.startTime=this.driver.now()-i/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(i){this.updateTime(time.now());const s=this.playbackSpeed!==i;this.playbackSpeed=i,s&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:i=frameloopDriver,startTime:s}=this.options;this.driver||(this.driver=i(h=>this.tick(h))),this.options.onPlay?.();const u=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=u):this.holdTime!==null?this.startTime=u-this.holdTime:this.startTime||(this.startTime=s??u),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(i){return this.startTime=0,this.tick(i,!0)}attachTimeline(i){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),i.observe(this)}}function fillWildcards(t){for(let i=1;i<t.length;i++)t[i]??(t[i]=t[i-1])}const radToDeg=t=>t*180/Math.PI,rotate=t=>{const i=radToDeg(Math.atan2(t[1],t[0]));return rebaseAngle(i)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate,rotateZ:rotate,skewX:t=>radToDeg(Math.atan(t[1])),skewY:t=>radToDeg(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},rebaseAngle=t=>(t=t%360,t<0&&(t+=360),t),rotateZ=rotate,scaleX=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),scaleY=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:t=>(scaleX(t)+scaleY(t))/2,rotateX:t=>rebaseAngle(radToDeg(Math.atan2(t[6],t[5]))),rotateY:t=>rebaseAngle(radToDeg(Math.atan2(-t[2],t[0]))),rotateZ,rotate:rotateZ,skewX:t=>radToDeg(Math.atan(t[4])),skewY:t=>radToDeg(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function defaultTransformValue(t){return t.includes("scale")?1:0}function parseValueFromTransform(t,i){if(!t||t==="none")return defaultTransformValue(i);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let u,h;if(s)u=matrix3dParsers,h=s;else{const g=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);u=matrix2dParsers,h=g}if(!h)return defaultTransformValue(i);const _=u[i],l=h[1].split(",").map(convertTransformToNumber);return typeof _=="function"?_(l):l[_]}const readTransformValue=(t,i)=>{const{transform:s="none"}=getComputedStyle(t);return parseValueFromTransform(s,i)};function convertTransformToNumber(t){return parseFloat(t.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=t=>t===number||t===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(t=>!transformKeys.has(t));function removeNonTranslationalTransform(t){const i=[];return nonTranslationalTransformKeys.forEach(s=>{const u=t.getValue(s);u!==void 0&&(i.push([s,u.get()]),u.set(s.startsWith("scale")?1:0))}),i}const positionalValues={width:({x:t},{paddingLeft:i="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(i)-parseFloat(s),height:({y:t},{paddingTop:i="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(i)-parseFloat(s),top:(t,{top:i})=>parseFloat(i),left:(t,{left:i})=>parseFloat(i),bottom:({y:t},{top:i})=>parseFloat(i)+(t.max-t.min),right:({x:t},{left:i})=>parseFloat(i)+(t.max-t.min),x:(t,{transform:i})=>parseValueFromTransform(i,"x"),y:(t,{transform:i})=>parseValueFromTransform(i,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const t=Array.from(toResolve).filter(u=>u.needsMeasurement),i=new Set(t.map(u=>u.element)),s=new Map;i.forEach(u=>{const h=removeNonTranslationalTransform(u);h.length&&(s.set(u,h),u.render())}),t.forEach(u=>u.measureInitialState()),i.forEach(u=>{u.render();const h=s.get(u);h&&h.forEach(([_,l])=>{u.getValue(_)?.set(l)})}),t.forEach(u=>u.measureEndState()),t.forEach(u=>{u.suspendedScrollY!==void 0&&window.scrollTo(0,u.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(t=>t.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(i,s,u,h,_,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...i],this.onComplete=s,this.name=u,this.motionValue=h,this.element=_,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:i,name:s,element:u,motionValue:h}=this;if(i[0]===null){const _=h?.get(),l=i[i.length-1];if(_!==void 0)i[0]=_;else if(u&&s){const g=u.readValue(s,l);g!=null&&(i[0]=g)}i[0]===void 0&&(i[0]=l),h&&_===void 0&&h.set(i[0])}fillWildcards(i)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(i=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,i),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=t=>t.startsWith("--");function setStyle(t,i,s){isCSSVar(i)?t.style.setProperty(i,s):t.style[i]=s}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(t,i){const s=memo(t);return()=>supportsFlags[i]??s()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([t,i,s,u])=>`cubic-bezier(${t}, ${i}, ${s}, ${u})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(t,i){if(t)return typeof t=="function"?supportsLinearEasing()?generateLinearEasing(t,i):"ease-out":isBezierDefinition(t)?cubicBezierAsString(t):Array.isArray(t)?t.map(s=>mapEasingToNativeEasing(s,i)||supportedWaapiEasing.easeOut):supportedWaapiEasing[t]}function startWaapiAnimation(t,i,s,{delay:u=0,duration:h=300,repeat:_=0,repeatType:l="loop",ease:g="easeOut",times:d}={},y=void 0){const E={[i]:s};d&&(E.offset=d);const v=mapEasingToNativeEasing(g,h);Array.isArray(v)&&(E.easing=v);const R={delay:u,duration:h,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:_+1,direction:l==="reverse"?"alternate":"normal"};return y&&(R.pseudoElement=y),t.animate(E,R)}function isGenerator(t){return typeof t=="function"&&"applyToOptions"in t}function applyGeneratorOptions({type:t,...i}){return isGenerator(t)&&supportsLinearEasing()?t.applyToOptions(i):(i.duration??(i.duration=300),i.ease??(i.ease="easeOut"),i)}class NativeAnimation extends WithPromise{constructor(i){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!i)return;const{element:s,name:u,keyframes:h,pseudoElement:_,allowFlatten:l=!1,finalKeyframe:g,onComplete:d}=i;this.isPseudoElement=!!_,this.allowFlatten=l,this.options=i,invariant(typeof i.type!="string");const y=applyGeneratorOptions(i);this.animation=startWaapiAnimation(s,u,h,y,_),y.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!_){const E=getFinalKeyframe$1(h,this.options,g,this.speed);this.updateMotionValue?this.updateMotionValue(E):setStyle(s,u,E),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:i}=this;i==="idle"||i==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const i=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(i))}get iterationDuration(){const{delay:i=0}=this.options||{};return this.duration+millisecondsToSeconds(i)}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(i){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(i)}get speed(){return this.animation.playbackRate}set speed(i){i<0&&(this.finishedTime=null),this.animation.playbackRate=i}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(i){this.manualStartTime=this.animation.startTime=i}attachTimeline({timeline:i,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,i&&supportsScrollTimeline()?(this.animation.timeline=i,noop):s(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(t){return t in unsupportedEasingFunctions}function replaceStringEasing(t){typeof t.ease=="string"&&isUnsupportedEase(t.ease)&&(t.ease=unsupportedEasingFunctions[t.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(i){replaceStringEasing(i),replaceTransitionType(i),super(i),i.startTime!==void 0&&(this.startTime=i.startTime),this.options=i}updateMotionValue(i){const{motionValue:s,onUpdate:u,onComplete:h,element:_,...l}=this.options;if(!s)return;if(i!==void 0){s.set(i);return}const g=new JSAnimation({...l,autoplay:!1}),d=Math.max(sampleDelta,time.now()-this.startTime),y=clamp(0,sampleDelta,d-sampleDelta);s.setWithVelocity(g.sample(Math.max(0,d-y)).value,g.sample(d).value,y),g.stop()}}const isAnimatable=(t,i)=>i==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(complex.test(t)||t==="0")&&!t.startsWith("url("));function hasKeyframesChanged(t){const i=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==i)return!0}function canAnimate(t,i,s,u){const h=t[0];if(h===null)return!1;if(i==="display"||i==="visibility")return!0;const _=t[t.length-1],l=isAnimatable(h,i),g=isAnimatable(_,i);return!l||!g?!1:hasKeyframesChanged(t)||(s==="spring"||isGenerator(s))&&u}function makeAnimationInstant(t){t.duration=0,t.type="keyframes"}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(t){const{motionValue:i,name:s,repeatDelay:u,repeatType:h,damping:_,type:l}=t;if(!(i?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:y}=i.owner.getProps();return supportsWaapi()&&s&&acceleratedValues.has(s)&&(s!=="transform"||!y)&&!d&&!u&&h!=="mirror"&&_!==0&&l!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:i=!0,delay:s=0,type:u="keyframes",repeat:h=0,repeatDelay:_=0,repeatType:l="loop",keyframes:g,name:d,motionValue:y,element:E,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();const R={autoplay:i,delay:s,type:u,repeat:h,repeatDelay:_,repeatType:l,name:d,motionValue:y,element:E,...v},z=E?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new z(g,(C,I,K)=>this.onKeyframesResolved(C,I,R,!K),d,y,E),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(i,s,u,h){this.keyframeResolver=void 0;const{name:_,type:l,velocity:g,delay:d,isHandoff:y,onUpdate:E}=u;this.resolvedAt=time.now(),canAnimate(i,_,l,g)||((MotionGlobalConfig.instantAnimations||!d)&&E?.(getFinalKeyframe$1(i,u,s)),i[0]=i[i.length-1],makeAnimationInstant(u),u.repeat=0);const R={startTime:h?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...u,keyframes:i},z=!y&&supportsBrowserAnimation(R)?new NativeAnimationExtended({...R,element:R.motionValue.owner.current}):new JSAnimation(R);z.finished.then(()=>this.notifyFinished()).catch(noop),this.pendingTimeline&&(this.stopTimeline=z.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=z}get finished(){return this._animation?this.animation.finished:this._finished}then(i,s){return this.finished.finally(i).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(i){this.animation.time=i}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(i){this.animation.speed=i}get startTime(){return this.animation.startTime}attachTimeline(i){return this._animation?this.stopTimeline=this.animation.attachTimeline(i):this.pendingTimeline=i,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(t){const i=splitCSSVariableRegex.exec(t);if(!i)return[,];const[,s,u,h]=i;return[`--${s??u}`,h]}function getVariableValue(t,i,s=1){const[u,h]=parseCSSVariable(t);if(!u)return;const _=window.getComputedStyle(i).getPropertyValue(u);if(_){const l=_.trim();return isNumericalString(l)?parseFloat(l):l}return isCSSVariableToken(h)?getVariableValue(h,i,s+1):h}function getValueTransition(t,i){return t?.[i]??t?.default??t}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(t,{keyframes:i})=>i.length>2?keyframesTransition:transformProps.has(t)?t.startsWith("scale")?criticallyDampedSpring(i[1]):underDampedSpring:ease;function isTransitionDefined({when:t,delay:i,delayChildren:s,staggerChildren:u,staggerDirection:h,repeat:_,repeatType:l,repeatDelay:g,from:d,elapsed:y,...E}){return!!Object.keys(E).length}const isNotNull=t=>t!==null;function getFinalKeyframe(t,{repeat:i,repeatType:s="loop"},u){const h=t.filter(isNotNull),_=i&&s!=="loop"&&i%2===1?0:h.length-1;return h[_]}function calcChildStagger(t,i,s,u=0,h=1){const _=Array.from(t).sort((y,E)=>y.sortNodePosition(E)).indexOf(i),l=t.size,g=(l-1)*u;return typeof s=="function"?s(_,l):h===1?_*u:g-_*u}const animateMotionValue=(t,i,s,u={},h,_)=>l=>{const g=getValueTransition(u,t)||{},d=g.delay||u.delay||0;let{elapsed:y=0}=u;y=y-secondsToMilliseconds(d);const E={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:i.getVelocity(),...g,delay:-y,onUpdate:R=>{i.set(R),g.onUpdate&&g.onUpdate(R)},onComplete:()=>{l(),g.onComplete&&g.onComplete()},name:t,motionValue:i,element:_?void 0:h};isTransitionDefined(g)||Object.assign(E,getDefaultTransition(t,E)),E.duration&&(E.duration=secondsToMilliseconds(E.duration)),E.repeatDelay&&(E.repeatDelay=secondsToMilliseconds(E.repeatDelay)),E.from!==void 0&&(E.keyframes[0]=E.from);let v=!1;if((E.type===!1||E.duration===0&&!E.repeatDelay)&&(makeAnimationInstant(E),E.delay===0&&(v=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(v=!0,makeAnimationInstant(E),E.delay=0),E.allowFlatten=!g.type&&!g.ease,v&&!_&&i.get()!==void 0){const R=getFinalKeyframe(E.keyframes,g);if(R!==void 0){frame.update(()=>{E.onUpdate(R),E.onComplete()});return}}return g.isSync?new JSAnimation(E):new AsyncMotionValueAnimation(E)},positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),MAX_VELOCITY_DELTA=30,isFloat=t=>!isNaN(parseFloat(t));class MotionValue{constructor(i,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=u=>{const h=time.now();if(this.updatedAt!==h&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(u),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const _ of this.dependents)_.dirty()},this.hasAnimated=!1,this.setCurrent(i),this.owner=s.owner}setCurrent(i){this.current=i,this.updatedAt=time.now(),this.canTrackVelocity===null&&i!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(i=this.current){this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt}onChange(i){return this.on("change",i)}on(i,s){this.events[i]||(this.events[i]=new SubscriptionManager);const u=this.events[i].add(s);return i==="change"?()=>{u(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:u}clearListeners(){for(const i in this.events)this.events[i].clear()}attach(i,s){this.passiveEffect=i,this.stopPassiveEffect=s}set(i){this.passiveEffect?this.passiveEffect(i,this.updateAndNotify):this.updateAndNotify(i)}setWithVelocity(i,s,u){this.set(s),this.prev=void 0,this.prevFrameValue=i,this.prevUpdatedAt=this.updatedAt-u}jump(i,s=!0){this.updateAndNotify(i),this.prev=i,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(i){this.dependents||(this.dependents=new Set),this.dependents.add(i)}removeDependent(i){this.dependents&&this.dependents.delete(i)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const i=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||i-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(i){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=i(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(t,i){return new MotionValue(t,i)}function getValueState(t){const i=[{},{}];return t?.values.forEach((s,u)=>{i[0][u]=s.get(),i[1][u]=s.getVelocity()}),i}function resolveVariantFromProps(t,i,s,u){if(typeof i=="function"){const[h,_]=getValueState(u);i=i(s!==void 0?s:t.custom,h,_)}if(typeof i=="string"&&(i=t.variants&&t.variants[i]),typeof i=="function"){const[h,_]=getValueState(u);i=i(s!==void 0?s:t.custom,h,_)}return i}function resolveVariant(t,i,s){const u=t.getProps();return resolveVariantFromProps(u,i,s!==void 0?s:u.custom,t)}const isKeyframesTarget=t=>Array.isArray(t);function setMotionValue(t,i,s){t.hasValue(i)?t.getValue(i).set(s):t.addValue(i,motionValue(s))}function resolveFinalValueInKeyframes(t){return isKeyframesTarget(t)?t[t.length-1]||0:t}function setTarget(t,i){const s=resolveVariant(t,i);let{transitionEnd:u={},transition:h={},..._}=s||{};_={..._,...u};for(const l in _){const g=resolveFinalValueInKeyframes(_[l]);setMotionValue(t,l,g)}}const isMotionValue=t=>!!(t&&t.getVelocity);function isWillChangeMotionValue(t){return!!(isMotionValue(t)&&t.add)}function addValueToWillChange(t,i){const s=t.getValue("willChange");if(isWillChangeMotionValue(s))return s.add(i);if(!s&&MotionGlobalConfig.WillChange){const u=new MotionGlobalConfig.WillChange("auto");t.addValue("willChange",u),u.add(i)}}function camelToDash(t){return t.replace(/([A-Z])/g,i=>`-${i.toLowerCase()}`)}const optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(t){return t.props[optimizedAppearDataAttribute]}function shouldBlockAnimation({protectedKeys:t,needsAnimating:i},s){const u=t.hasOwnProperty(s)&&i[s]!==!0;return i[s]=!1,u}function animateTarget(t,i,{delay:s=0,transitionOverride:u,type:h}={}){let{transition:_=t.getDefaultTransition(),transitionEnd:l,...g}=i;u&&(_=u);const d=[],y=h&&t.animationState&&t.animationState.getState()[h];for(const E in g){const v=t.getValue(E,t.latestValues[E]??null),R=g[E];if(R===void 0||y&&shouldBlockAnimation(y,E))continue;const z={delay:s,...getValueTransition(_||{},E)},C=v.get();if(C!==void 0&&!v.isAnimating&&!Array.isArray(R)&&R===C&&!z.velocity)continue;let I=!1;if(window.MotionHandoffAnimation){const J=getOptimisedAppearId(t);if(J){const X=window.MotionHandoffAnimation(J,E,frame);X!==null&&(z.startTime=X,I=!0)}}addValueToWillChange(t,E),v.start(animateMotionValue(E,v,R,t.shouldReduceMotion&&positionalKeys.has(E)?{type:!1}:z,t,I));const K=v.animation;K&&d.push(K)}return l&&Promise.all(d).then(()=>{frame.update(()=>{l&&setTarget(t,l)})}),d}function animateVariant(t,i,s={}){const u=resolveVariant(t,i,s.type==="exit"?t.presenceContext?.custom:void 0);let{transition:h=t.getDefaultTransition()||{}}=u||{};s.transitionOverride&&(h=s.transitionOverride);const _=u?()=>Promise.all(animateTarget(t,u,s)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:y=0,staggerChildren:E,staggerDirection:v}=h;return animateChildren(t,i,d,y,E,v,s)}:()=>Promise.resolve(),{when:g}=h;if(g){const[d,y]=g==="beforeChildren"?[_,l]:[l,_];return d().then(()=>y())}else return Promise.all([_(),l(s.delay)])}function animateChildren(t,i,s=0,u=0,h=0,_=1,l){const g=[];for(const d of t.variantChildren)d.notify("AnimationStart",i),g.push(animateVariant(d,i,{...l,delay:s+(typeof u=="function"?0:u)+calcChildStagger(t.variantChildren,d,u,h,_)}).then(()=>d.notify("AnimationComplete",i)));return Promise.all(g)}function animateVisualElement(t,i,s={}){t.notify("AnimationStart",i);let u;if(Array.isArray(i)){const h=i.map(_=>animateVariant(t,_,s));u=Promise.all(h)}else if(typeof i=="string")u=animateVariant(t,i,s);else{const h=typeof i=="function"?resolveVariant(t,i,s.custom):i;u=Promise.all(animateTarget(t,h,s))}return u.then(()=>{t.notify("AnimationComplete",i)})}const auto={test:t=>t==="auto",parse:t=>t},testValueType=t=>i=>i.test(t),dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=t=>dimensionValueTypes.find(testValueType(t));function isNone(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||isZeroValueString(t):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(t){const[i,s]=t.slice(0,-1).split("(");if(i==="drop-shadow")return t;const[u]=s.match(floatRegex)||[];if(!u)return t;const h=s.replace(u,"");let _=maxDefaults.has(i)?1:0;return u!==s&&(_*=100),i+"("+_+h+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:t=>{const i=t.match(functionRegex);return i?i.map(applyDefaultFilter).join(" "):t}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,inset:px,insetBlock:px,insetBlockStart:px,insetBlockEnd:px,insetInline:px,insetInlineStart:px,insetInlineEnd:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,paddingBlock:px,paddingBlockStart:px,paddingBlockEnd:px,paddingInline:px,paddingInlineStart:px,paddingInlineEnd:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,marginBlock:px,marginBlockStart:px,marginBlockEnd:px,marginInline:px,marginInlineStart:px,marginInlineEnd:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=t=>defaultValueTypes[t];function getAnimatableNone(t,i){let s=getDefaultValueType(t);return s!==filter&&(s=complex),s.getAnimatableNone?s.getAnimatableNone(i):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(t,i,s){let u=0,h;for(;u<t.length&&!h;){const _=t[u];typeof _=="string"&&!invalidTemplates.has(_)&&analyseComplexValue(_).values.length&&(h=t[u]),u++}if(h&&s)for(const _ of i)t[_]=getAnimatableNone(s,h)}class DOMKeyframesResolver extends KeyframeResolver{constructor(i,s,u,h,_){super(i,s,u,h,_,!0)}readKeyframes(){const{unresolvedKeyframes:i,element:s,name:u}=this;if(!s||!s.current)return;super.readKeyframes();for(let E=0;E<i.length;E++){let v=i[E];if(typeof v=="string"&&(v=v.trim(),isCSSVariableToken(v))){const R=getVariableValue(v,s.current);R!==void 0&&(i[E]=R),E===i.length-1&&(this.finalKeyframe=v)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(u)||i.length!==2)return;const[h,_]=i,l=findDimensionValueType(h),g=findDimensionValueType(_),d=containsCSSVariable(h),y=containsCSSVariable(_);if(d!==y&&positionalValues[u]){this.needsMeasurement=!0;return}if(l!==g)if(isNumOrPxType(l)&&isNumOrPxType(g))for(let E=0;E<i.length;E++){const v=i[E];typeof v=="string"&&(i[E]=parseFloat(v))}else positionalValues[u]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:i,name:s}=this,u=[];for(let h=0;h<i.length;h++)(i[h]===null||isNone(i[h]))&&u.push(h);u.length&&makeNoneKeyframesAnimatable(i,u,s)}measureInitialState(){const{element:i,unresolvedKeyframes:s,name:u}=this;if(!i||!i.current)return;u==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[u](i.measureViewportBox(),window.getComputedStyle(i.current)),s[0]=this.measuredOrigin;const h=s[s.length-1];h!==void 0&&i.getValue(u,h).jump(h,!1)}measureEndState(){const{element:i,name:s,unresolvedKeyframes:u}=this;if(!i||!i.current)return;const h=i.getValue(s);h&&h.jump(this.measuredOrigin,!1);const _=u.length-1,l=u[_];u[_]=positionalValues[s](i.measureViewportBox(),window.getComputedStyle(i.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([g,d])=>{i.getValue(g).set(d)}),this.resolveNoneKeyframes()}}function resolveElements(t,i,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let u=document;const h=s?.[t]??u.querySelectorAll(t);return h?Array.from(h):[]}return Array.from(t)}const getValueAsType=(t,i)=>i&&typeof t=="number"?i.transform(t):t;function isHTMLElement(t){return isObject(t)&&"offsetHeight"in t}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(t){return t==="x"||t==="y"?isDragging[t]?null:(isDragging[t]=!0,()=>{isDragging[t]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(t,i){const s=resolveElements(t),u=new AbortController,h={passive:!0,...i,signal:u.signal};return[s,h,()=>u.abort()]}function isValidHover(t){return!(t.pointerType==="touch"||isDragActive())}function hover(t,i,s={}){const[u,h,_]=setupGesture(t,s),l=g=>{if(!isValidHover(g))return;const{target:d}=g,y=i(d,g);if(typeof y!="function"||!d)return;const E=v=>{isValidHover(v)&&(y(v),d.removeEventListener("pointerleave",E))};d.addEventListener("pointerleave",E,h)};return u.forEach(g=>{g.addEventListener("pointerenter",l,h)}),_}const isNodeOrChild=(t,i)=>i?t===i?!0:isNodeOrChild(t,i.parentElement):!1,isPrimaryPointer=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,interactiveElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(t){return interactiveElements.has(t.tagName)||t.isContentEditable===!0}const isPressing=new WeakSet;function filterEvents(t){return i=>{i.key==="Enter"&&t(i)}}function firePointerEvent(t,i){t.dispatchEvent(new PointerEvent("pointer"+i,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(t,i)=>{const s=t.currentTarget;if(!s)return;const u=filterEvents(()=>{if(isPressing.has(s))return;firePointerEvent(s,"down");const h=filterEvents(()=>{firePointerEvent(s,"up")}),_=()=>firePointerEvent(s,"cancel");s.addEventListener("keyup",h,i),s.addEventListener("blur",_,i)});s.addEventListener("keydown",u,i),s.addEventListener("blur",()=>s.removeEventListener("keydown",u),i)};function isValidPressEvent(t){return isPrimaryPointer(t)&&!isDragActive()}function press(t,i,s={}){const[u,h,_]=setupGesture(t,s),l=g=>{const d=g.currentTarget;if(!isValidPressEvent(g))return;isPressing.add(d);const y=i(d,g),E=(z,C)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",R),isPressing.has(d)&&isPressing.delete(d),isValidPressEvent(z)&&typeof y=="function"&&y(z,{success:C})},v=z=>{E(z,d===window||d===document||s.useGlobalTarget||isNodeOrChild(d,z.target))},R=z=>{E(z,!1)};window.addEventListener("pointerup",v,h),window.addEventListener("pointercancel",R,h)};return u.forEach(g=>{(s.useGlobalTarget?window:g).addEventListener("pointerdown",l,h),isHTMLElement(g)&&(g.addEventListener("focus",y=>enableKeyboardPress(y,h)),!isElementKeyboardAccessible(g)&&!g.hasAttribute("tabindex")&&(g.tabIndex=0))}),_}function isSVGElement(t){return isObject(t)&&"ownerSVGElement"in t}function isSVGSVGElement(t){return isSVGElement(t)&&t.tagName==="svg"}const valueTypes=[...dimensionValueTypes,color,complex],findValueType=t=>valueTypes.find(testValueType(t)),createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1},isBrowser=typeof window<"u";function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),i=()=>prefersReducedMotion.current=t.matches;t.addEventListener("change",i),i()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function isAnimationControls(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function isVariantLabel(t){return typeof t=="string"||Array.isArray(t)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(t){return isAnimationControls(t.animate)||variantProps.some(i=>isVariantLabel(t[i]))}function isVariantNode(t){return!!(isControllingVariants(t)||t.variants)}function updateMotionValuesFromProps(t,i,s){for(const u in i){const h=i[u],_=s[u];if(isMotionValue(h))t.addValue(u,h);else if(isMotionValue(_))t.addValue(u,motionValue(h,{owner:t}));else if(_!==h)if(t.hasValue(u)){const l=t.getValue(u);l.liveStyle===!0?l.jump(h):l.hasAnimated||l.set(h)}else{const l=t.getStaticValue(u);t.addValue(u,motionValue(l!==void 0?l:h,{owner:t}))}}for(const u in s)i[u]===void 0&&t.removeValue(u);return i}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let featureDefinitions={};function setFeatureDefinitions(t){featureDefinitions=t}function getFeatureDefinitions(){return featureDefinitions}class VisualElement{scrapeMotionValuesFromProps(i,s,u){return{}}constructor({parent:i,props:s,presenceContext:u,reducedMotionConfig:h,blockInitialAnimation:_,visualState:l},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const R=time.now();this.renderScheduledAt<R&&(this.renderScheduledAt=R,frame.render(this.render,!1,!0))};const{latestValues:d,renderState:y}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=s.initial?{...d}:{},this.renderState=y,this.parent=i,this.props=s,this.presenceContext=u,this.depth=i?i.depth+1:0,this.reducedMotionConfig=h,this.options=g,this.blockInitialAnimation=!!_,this.isControllingVariants=isControllingVariants(s),this.isVariantNode=isVariantNode(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(i&&i.current);const{willChange:E,...v}=this.scrapeMotionValuesFromProps(s,{},this);for(const R in v){const z=v[R];d[R]!==void 0&&isMotionValue(z)&&z.set(d[R])}}mount(i){this.current=i,visualElementStore.set(i,this),this.projection&&!this.projection.instance&&this.projection.mount(i),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,u)=>this.bindToMotionValue(u,s)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=prefersReducedMotion.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(i=>i()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const i in this.events)this.events[i].clear();for(const i in this.features){const s=this.features[i];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(i){this.children.add(i),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(i)}removeChild(i){this.children.delete(i),this.enteringChildren&&this.enteringChildren.delete(i)}bindToMotionValue(i,s){this.valueSubscriptions.has(i)&&this.valueSubscriptions.get(i)();const u=transformProps.has(i);u&&this.onBindTransform&&this.onBindTransform();const h=s.on("change",l=>{this.latestValues[i]=l,this.props.onUpdate&&frame.preRender(this.notifyUpdate),u&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let _;typeof window<"u"&&window.MotionCheckAppearSync&&(_=window.MotionCheckAppearSync(this,i,s)),this.valueSubscriptions.set(i,()=>{h(),_&&_(),s.owner&&s.stop()})}sortNodePosition(i){return!this.current||!this.sortInstanceNodePosition||this.type!==i.type?0:this.sortInstanceNodePosition(this.current,i.current)}updateFeatures(){let i="animation";for(i in featureDefinitions){const s=featureDefinitions[i];if(!s)continue;const{isEnabled:u,Feature:h}=s;if(!this.features[i]&&h&&u(this.props)&&(this.features[i]=new h(this)),this.features[i]){const _=this.features[i];_.isMounted?_.update():(_.mount(),_.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(i){return this.latestValues[i]}setStaticValue(i,s){this.latestValues[i]=s}update(i,s){(i.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=i,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let u=0;u<propEventHandlers.length;u++){const h=propEventHandlers[u];this.propEventSubscriptions[h]&&(this.propEventSubscriptions[h](),delete this.propEventSubscriptions[h]);const _="on"+h,l=i[_];l&&(this.propEventSubscriptions[h]=this.on(h,l))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(i,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(i){return this.props.variants?this.props.variants[i]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(i){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(i),()=>s.variantChildren.delete(i)}addValue(i,s){const u=this.values.get(i);s!==u&&(u&&this.removeValue(i),this.bindToMotionValue(i,s),this.values.set(i,s),this.latestValues[i]=s.get())}removeValue(i){this.values.delete(i);const s=this.valueSubscriptions.get(i);s&&(s(),this.valueSubscriptions.delete(i)),delete this.latestValues[i],this.removeValueFromRenderState(i,this.renderState)}hasValue(i){return this.values.has(i)}getValue(i,s){if(this.props.values&&this.props.values[i])return this.props.values[i];let u=this.values.get(i);return u===void 0&&s!==void 0&&(u=motionValue(s===null?void 0:s,{owner:this}),this.addValue(i,u)),u}readValue(i,s){let u=this.latestValues[i]!==void 0||!this.current?this.latestValues[i]:this.getBaseTargetFromProps(this.props,i)??this.readValueFromInstance(this.current,i,this.options);return u!=null&&(typeof u=="string"&&(isNumericalString(u)||isZeroValueString(u))?u=parseFloat(u):!findValueType(u)&&complex.test(s)&&(u=getAnimatableNone(i,s)),this.setBaseTarget(i,isMotionValue(u)?u.get():u)),isMotionValue(u)?u.get():u}setBaseTarget(i,s){this.baseTarget[i]=s}getBaseTarget(i){const{initial:s}=this.props;let u;if(typeof s=="string"||typeof s=="object"){const _=resolveVariantFromProps(this.props,s,this.presenceContext?.custom);_&&(u=_[i])}if(s&&u!==void 0)return u;const h=this.getBaseTargetFromProps(this.props,i);return h!==void 0&&!isMotionValue(h)?h:this.initialValues[i]!==void 0&&u===void 0?void 0:this.baseTarget[i]}on(i,s){return this.events[i]||(this.events[i]=new SubscriptionManager),this.events[i].add(s)}notify(i,...s){this.events[i]&&this.events[i].notify(...s)}scheduleRenderMicrotask(){microtask.render(this.render)}}class Feature{constructor(i){this.isMounted=!1,this.node=i}update(){}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(i,s){return i.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(i,s){const u=i.style;return u?u[s]:void 0}removeValueFromRenderState(i,{vars:s,style:u}){delete s[i],delete u[i]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:i}=this.props;isMotionValue(i)&&(this.childSubscription=i.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function convertBoundingBoxToBox({top:t,left:i,right:s,bottom:u}){return{x:{min:i,max:s},y:{min:t,max:u}}}function convertBoxToBoundingBox({x:t,y:i}){return{top:i.min,right:t.max,bottom:i.max,left:t.min}}function transformBoxPoints(t,i){if(!i)return t;const s=i({x:t.left,y:t.top}),u=i({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:u.y,right:u.x}}function isIdentityScale(t){return t===void 0||t===1}function hasScale({scale:t,scaleX:i,scaleY:s}){return!isIdentityScale(t)||!isIdentityScale(i)||!isIdentityScale(s)}function hasTransform(t){return hasScale(t)||has2DTranslate(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function has2DTranslate(t){return is2DTranslate(t.x)||is2DTranslate(t.y)}function is2DTranslate(t){return t&&t!=="0%"}function scalePoint(t,i,s){const u=t-s,h=i*u;return s+h}function applyPointDelta(t,i,s,u,h){return h!==void 0&&(t=scalePoint(t,h,u)),scalePoint(t,s,u)+i}function applyAxisDelta(t,i=0,s=1,u,h){t.min=applyPointDelta(t.min,i,s,u,h),t.max=applyPointDelta(t.max,i,s,u,h)}function applyBoxDelta(t,{x:i,y:s}){applyAxisDelta(t.x,i.translate,i.scale,i.originPoint),applyAxisDelta(t.y,s.translate,s.scale,s.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(t,i,s,u=!1){const h=s.length;if(!h)return;i.x=i.y=1;let _,l;for(let g=0;g<h;g++){_=s[g],l=_.projectionDelta;const{visualElement:d}=_.options;d&&d.props.style&&d.props.style.display==="contents"||(u&&_.options.layoutScroll&&_.scroll&&_!==_.root&&transformBox(t,{x:-_.scroll.offset.x,y:-_.scroll.offset.y}),l&&(i.x*=l.x.scale,i.y*=l.y.scale,applyBoxDelta(t,l)),u&&hasTransform(_.latestValues)&&transformBox(t,_.latestValues))}i.x<TREE_SCALE_SNAP_MAX&&i.x>TREE_SCALE_SNAP_MIN&&(i.x=1),i.y<TREE_SCALE_SNAP_MAX&&i.y>TREE_SCALE_SNAP_MIN&&(i.y=1)}function translateAxis(t,i){t.min=t.min+i,t.max=t.max+i}function transformAxis(t,i,s,u,h=.5){const _=mixNumber$1(t.min,t.max,h);applyAxisDelta(t,i,s,_,u)}function transformBox(t,i){transformAxis(t.x,i.x,i.scaleX,i.scale,i.originX),transformAxis(t.y,i.y,i.scaleY,i.scale,i.originY)}function measureViewportBox(t,i){return convertBoundingBoxToBox(transformBoxPoints(t.getBoundingClientRect(),i))}function measurePageBox(t,i,s){const u=measureViewportBox(t,s),{scroll:h}=i;return h&&(translateAxis(u.x,h.offset.x),translateAxis(u.y,h.offset.y)),u}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(t,i,s){let u="",h=!0;for(let _=0;_<numTransforms;_++){const l=transformPropOrder[_],g=t[l];if(g===void 0)continue;let d=!0;if(typeof g=="number"?d=g===(l.startsWith("scale")?1:0):d=parseFloat(g)===0,!d||s){const y=getValueAsType(g,numberValueTypes[l]);if(!d){h=!1;const E=translateAlias[l]||l;u+=`${E}(${y}) `}s&&(i[l]=y)}}return u=u.trim(),s?u=s(i,h?"":u):h&&(u="none"),u}function buildHTMLStyles(t,i,s){const{style:u,vars:h,transformOrigin:_}=t;let l=!1,g=!1;for(const d in i){const y=i[d];if(transformProps.has(d)){l=!0;continue}else if(isCSSVariableName(d)){h[d]=y;continue}else{const E=getValueAsType(y,numberValueTypes[d]);d.startsWith("origin")?(g=!0,_[d]=E):u[d]=E}}if(i.transform||(l||s?u.transform=buildTransform(i,t.transform,s):u.transform&&(u.transform="none")),g){const{originX:d="50%",originY:y="50%",originZ:E=0}=_;u.transformOrigin=`${d} ${y} ${E}`}}function renderHTML(t,{style:i,vars:s},u,h){const _=t.style;let l;for(l in i)_[l]=i[l];h?.applyProjectionStyles(_,u);for(l in s)_.setProperty(l,s[l])}function pixelsToPercent(t,i){return i.max===i.min?0:t/(i.max-i.min)*100}const correctBorderRadius={correct:(t,i)=>{if(!i.target)return t;if(typeof t=="string")if(px.test(t))t=parseFloat(t);else return t;const s=pixelsToPercent(t,i.target.x),u=pixelsToPercent(t,i.target.y);return`${s}% ${u}%`}},correctBoxShadow={correct:(t,{treeScale:i,projectionDelta:s})=>{const u=t,h=complex.parse(t);if(h.length>5)return u;const _=complex.createTransformer(t),l=typeof h[0]!="number"?1:0,g=s.x.scale*i.x,d=s.y.scale*i.y;h[0+l]/=g,h[1+l]/=d;const y=mixNumber$1(g,d,.5);return typeof h[2+l]=="number"&&(h[2+l]/=y),typeof h[3+l]=="number"&&(h[3+l]/=y),_(h)}},scaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function isForcedMotionValue(t,{layout:i,layoutId:s}){return transformProps.has(t)||t.startsWith("origin")||(i||s!==void 0)&&(!!scaleCorrectors[t]||t==="opacity")}function scrapeMotionValuesFromProps$1(t,i,s){const u=t.style,h=i?.style,_={};if(!u)return _;for(const l in u)(isMotionValue(u[l])||h&&isMotionValue(h[l])||isForcedMotionValue(l,t)||s?.getValue(l)?.liveStyle!==void 0)&&(_[l]=u[l]);return _}function getComputedStyle$1(t){return window.getComputedStyle(t)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(i,s){if(transformProps.has(s))return this.projection?.isProjecting?defaultTransformValue(s):readTransformValue(i,s);{const u=getComputedStyle$1(i),h=(isCSSVariableName(s)?u.getPropertyValue(s):u[s])||0;return typeof h=="string"?h.trim():h}}measureInstanceViewportBox(i,{transformPagePoint:s}){return measureViewportBox(i,s)}build(i,s,u){buildHTMLStyles(i,s,u.transformTemplate)}scrapeMotionValuesFromProps(i,s,u){return scrapeMotionValuesFromProps$1(i,s,u)}}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(t,i,s=1,u=0,h=!0){t.pathLength=1;const _=h?dashKeys:camelKeys;t[_.offset]=px.transform(-u);const l=px.transform(i),g=px.transform(s);t[_.array]=`${l} ${g}`}const cssMotionPathProperties=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function buildSVGAttrs(t,{attrX:i,attrY:s,attrScale:u,pathLength:h,pathSpacing:_=1,pathOffset:l=0,...g},d,y,E){if(buildHTMLStyles(t,g,y),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:R}=t;v.transform&&(R.transform=v.transform,delete v.transform),(R.transform||v.transformOrigin)&&(R.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),R.transform&&(R.transformBox=E?.transformBox??"fill-box",delete v.transformBox);for(const z of cssMotionPathProperties)v[z]!==void 0&&(R[z]=v[z],delete v[z]);i!==void 0&&(v.x=i),s!==void 0&&(v.y=s),u!==void 0&&(v.scale=u),h!==void 0&&buildSVGPath(v,h,_,l,!1)}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),isSVGTag=t=>typeof t=="string"&&t.toLowerCase()==="svg";function renderSVG(t,i,s,u){renderHTML(t,i,void 0,u);for(const h in i.attrs)t.setAttribute(camelCaseAttributes.has(h)?h:camelToDash(h),i.attrs[h])}function scrapeMotionValuesFromProps(t,i,s){const u=scrapeMotionValuesFromProps$1(t,i,s);for(const h in t)if(isMotionValue(t[h])||isMotionValue(i[h])){const _=transformPropOrder.indexOf(h)!==-1?"attr"+h.charAt(0).toUpperCase()+h.substring(1):h;u[_]=t[h]}return u}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(i,s){return i[s]}readValueFromInstance(i,s){if(transformProps.has(s)){const u=getDefaultValueType(s);return u&&u.default||0}return s=camelCaseAttributes.has(s)?s:camelToDash(s),i.getAttribute(s)}scrapeMotionValuesFromProps(i,s,u){return scrapeMotionValuesFromProps(i,s,u)}build(i,s,u){buildSVGAttrs(i,s,this.isSVGTag,u.transformTemplate,u.style)}renderInstance(i,s,u,h){renderSVG(i,s,u,h)}mount(i){this.isSVGTag=isSVGTag(i.tagName),super.mount(i)}}const numVariantProps=variantProps.length;function getVariantContext(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?getVariantContext(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const i={};for(let s=0;s<numVariantProps;s++){const u=variantProps[s],h=t.props[u];(isVariantLabel(h)||h===!1)&&(i[u]=h)}return i}function shallowCompare(t,i){if(!Array.isArray(i))return!1;const s=i.length;if(s!==t.length)return!1;for(let u=0;u<s;u++)if(i[u]!==t[u])return!1;return!0}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function createAnimateFunction(t){return i=>Promise.all(i.map(({animation:s,options:u})=>animateVisualElement(t,s,u)))}function createAnimationState(t){let i=createAnimateFunction(t),s=createState(),u=!0;const h=d=>(y,E)=>{const v=resolveVariant(t,E,d==="exit"?t.presenceContext?.custom:void 0);if(v){const{transition:R,transitionEnd:z,...C}=v;y={...y,...C,...z}}return y};function _(d){i=d(t)}function l(d){const{props:y}=t,E=getVariantContext(t.parent)||{},v=[],R=new Set;let z={},C=1/0;for(let K=0;K<numAnimationTypes;K++){const J=reversePriorityOrder[K],X=s[J],b=y[J]!==void 0?y[J]:E[J],F=isVariantLabel(b),B=J===d?X.isActive:null;B===!1&&(C=K);let $=b===E[J]&&b!==y[J]&&F;if($&&u&&t.manuallyAnimateOnMount&&($=!1),X.protectedKeys={...z},!X.isActive&&B===null||!b&&!X.prevProp||isAnimationControls(b)||typeof b=="boolean")continue;const Q=checkVariantsDidChange(X.prevProp,b);let N=Q||J===d&&X.isActive&&!$&&F||K>C&&F,ee=!1;const Se=Array.isArray(b)?b:[b];let ue=Se.reduce(h(J),{});B===!1&&(ue={});const{prevResolvedValues:ge={}}=X,me={...ge,...ue},Me=he=>{N=!0,R.has(he)&&(ee=!0,R.delete(he)),X.needsAnimating[he]=!0;const se=t.getValue(he);se&&(se.liveStyle=!1)};for(const he in me){const se=ue[he],q=ge[he];if(z.hasOwnProperty(he))continue;let Pe=!1;isKeyframesTarget(se)&&isKeyframesTarget(q)?Pe=!shallowCompare(se,q):Pe=se!==q,Pe?se!=null?Me(he):R.add(he):se!==void 0&&R.has(he)?Me(he):X.protectedKeys[he]=!0}X.prevProp=b,X.prevResolvedValues=ue,X.isActive&&(z={...z,...ue}),u&&t.blockInitialAnimation&&(N=!1);const ce=$&&Q;N&&(!ce||ee)&&v.push(...Se.map(he=>{const se={type:J};if(typeof he=="string"&&u&&!ce&&t.manuallyAnimateOnMount&&t.parent){const{parent:q}=t,Pe=resolveVariant(q,he);if(q.enteringChildren&&Pe){const{delayChildren:fe}=Pe.transition||{};se.delay=calcChildStagger(q.enteringChildren,t,fe)}}return{animation:he,options:se}}))}if(R.size){const K={};if(typeof y.initial!="boolean"){const J=resolveVariant(t,Array.isArray(y.initial)?y.initial[0]:y.initial);J&&J.transition&&(K.transition=J.transition)}R.forEach(J=>{const X=t.getBaseTarget(J),b=t.getValue(J);b&&(b.liveStyle=!0),K[J]=X??null}),v.push({animation:K})}let I=!!v.length;return u&&(y.initial===!1||y.initial===y.animate)&&!t.manuallyAnimateOnMount&&(I=!1),u=!1,I?i(v):Promise.resolve()}function g(d,y){if(s[d].isActive===y)return Promise.resolve();t.variantChildren?.forEach(v=>v.animationState?.setActive(d,y)),s[d].isActive=y;const E=l(d);for(const v in s)s[v].protectedKeys={};return E}return{animateChanges:l,setActive:g,setAnimateFunction:_,getState:()=>s,reset:()=>{s=createState()}}}function checkVariantsDidChange(t,i){return typeof i=="string"?i!==t:Array.isArray(i)?!shallowCompare(i,t):!1}function createTypeState(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(t){return t.max-t.min}function isNear(t,i,s){return Math.abs(t-i)<=s}function calcAxisDelta(t,i,s,u=.5){t.origin=u,t.originPoint=mixNumber$1(i.min,i.max,t.origin),t.scale=calcLength(s)/calcLength(i),t.translate=mixNumber$1(s.min,s.max,t.origin)-t.originPoint,(t.scale>=SCALE_MIN&&t.scale<=SCALE_MAX||isNaN(t.scale))&&(t.scale=1),(t.translate>=TRANSLATE_MIN&&t.translate<=TRANSLATE_MAX||isNaN(t.translate))&&(t.translate=0)}function calcBoxDelta(t,i,s,u){calcAxisDelta(t.x,i.x,s.x,u?u.originX:void 0),calcAxisDelta(t.y,i.y,s.y,u?u.originY:void 0)}function calcRelativeAxis(t,i,s){t.min=s.min+i.min,t.max=t.min+calcLength(i)}function calcRelativeBox(t,i,s){calcRelativeAxis(t.x,i.x,s.x),calcRelativeAxis(t.y,i.y,s.y)}function calcRelativeAxisPosition(t,i,s){t.min=i.min-s.min,t.max=t.min+calcLength(i)}function calcRelativePosition(t,i,s){calcRelativeAxisPosition(t.x,i.x,s.x),calcRelativeAxisPosition(t.y,i.y,s.y)}function removePointDelta(t,i,s,u,h){return t-=i,t=scalePoint(t,1/s,u),h!==void 0&&(t=scalePoint(t,1/h,u)),t}function removeAxisDelta(t,i=0,s=1,u=.5,h,_=t,l=t){if(percent.test(i)&&(i=parseFloat(i),i=mixNumber$1(l.min,l.max,i/100)-l.min),typeof i!="number")return;let g=mixNumber$1(_.min,_.max,u);t===_&&(g-=i),t.min=removePointDelta(t.min,i,s,g,h),t.max=removePointDelta(t.max,i,s,g,h)}function removeAxisTransforms(t,i,[s,u,h],_,l){removeAxisDelta(t,i[s],i[u],i[h],i.scale,_,l)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(t,i,s,u){removeAxisTransforms(t.x,i,xKeys,s?s.x:void 0,u?u.x:void 0),removeAxisTransforms(t.y,i,yKeys,s?s.y:void 0,u?u.y:void 0)}function copyAxisInto(t,i){t.min=i.min,t.max=i.max}function copyBoxInto(t,i){copyAxisInto(t.x,i.x),copyAxisInto(t.y,i.y)}function copyAxisDeltaInto(t,i){t.translate=i.translate,t.scale=i.scale,t.originPoint=i.originPoint,t.origin=i.origin}function isAxisDeltaZero(t){return t.translate===0&&t.scale===1}function isDeltaZero(t){return isAxisDeltaZero(t.x)&&isAxisDeltaZero(t.y)}function axisEquals(t,i){return t.min===i.min&&t.max===i.max}function boxEquals(t,i){return axisEquals(t.x,i.x)&&axisEquals(t.y,i.y)}function axisEqualsRounded(t,i){return Math.round(t.min)===Math.round(i.min)&&Math.round(t.max)===Math.round(i.max)}function boxEqualsRounded(t,i){return axisEqualsRounded(t.x,i.x)&&axisEqualsRounded(t.y,i.y)}function aspectRatio(t){return calcLength(t.x)/calcLength(t.y)}function axisDeltaEquals(t,i){return t.translate===i.translate&&t.scale===i.scale&&t.originPoint===i.originPoint}function eachAxis(t){return[t("x"),t("y")]}function buildProjectionTransform(t,i,s){let u="";const h=t.x.translate/i.x,_=t.y.translate/i.y,l=s?.z||0;if((h||_||l)&&(u=`translate3d(${h}px, ${_}px, ${l}px) `),(i.x!==1||i.y!==1)&&(u+=`scale(${1/i.x}, ${1/i.y}) `),s){const{transformPerspective:y,rotate:E,rotateX:v,rotateY:R,skewX:z,skewY:C}=s;y&&(u=`perspective(${y}px) ${u}`),E&&(u+=`rotate(${E}deg) `),v&&(u+=`rotateX(${v}deg) `),R&&(u+=`rotateY(${R}deg) `),z&&(u+=`skewX(${z}deg) `),C&&(u+=`skewY(${C}deg) `)}const g=t.x.scale*i.x,d=t.y.scale*i.y;return(g!==1||d!==1)&&(u+=`scale(${g}, ${d})`),u||"none"}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=t=>typeof t=="string"?parseFloat(t):t,isPx=t=>typeof t=="number"||px.test(t);function mixValues(t,i,s,u,h,_){h?(t.opacity=mixNumber$1(0,s.opacity??1,easeCrossfadeIn(u)),t.opacityExit=mixNumber$1(i.opacity??1,0,easeCrossfadeOut(u))):_&&(t.opacity=mixNumber$1(i.opacity??1,s.opacity??1,u));for(let l=0;l<numBorders;l++){const g=`border${borders[l]}Radius`;let d=getRadius(i,g),y=getRadius(s,g);if(d===void 0&&y===void 0)continue;d||(d=0),y||(y=0),d===0||y===0||isPx(d)===isPx(y)?(t[g]=Math.max(mixNumber$1(asNumber(d),asNumber(y),u),0),(percent.test(y)||percent.test(d))&&(t[g]+="%")):t[g]=y}(i.rotate||s.rotate)&&(t.rotate=mixNumber$1(i.rotate||0,s.rotate||0,u))}function getRadius(t,i){return t[i]!==void 0?t[i]:t.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop);function compress(t,i,s){return u=>u<t?0:u>i?1:s(progress(t,i,u))}function delay(t,i){const s=time.now(),u=({timestamp:h})=>{const _=h-s;_>=i&&(cancelFrame(u),t(_-i))};return frame.setup(u,!0),()=>cancelFrame(u)}function addDomEvent(t,i,s,u={passive:!0}){return t.addEventListener(i,s,u),()=>t.removeEventListener(i,s)}function resolveMotionValue(t){return isMotionValue(t)?t.get():t}function animateSingleValue(t,i,s){const u=isMotionValue(t)?t:motionValue(t);return u.start(animateMotionValue("",u,i,s)),u.animation}const compareByDepth=(t,i)=>t.depth-i.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(i){addUniqueItem(this.children,i),this.isDirty=!0}remove(i){removeItem(this.children,i),this.isDirty=!0}forEach(i){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(i)}}class NodeStack{constructor(){this.members=[]}add(i){addUniqueItem(this.members,i),i.scheduleRender()}remove(i){if(removeItem(this.members,i),i===this.prevLead&&(this.prevLead=void 0),i===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(i){const s=this.members.findIndex(h=>i===h);if(s===0)return!1;let u;for(let h=s;h>=0;h--){const _=this.members[h];if(_.isPresent!==!1){u=_;break}}return u?(this.promote(u),!0):!1}promote(i,s){const u=this.lead;if(i!==u&&(this.prevLead=u,this.lead=i,i.show(),u)){u.instance&&u.scheduleRender(),i.scheduleRender(),i.resumeFrom=u,s&&(i.resumeFrom.preserveOpacity=!0),u.snapshot&&(i.snapshot=u.snapshot,i.snapshot.latestValues=u.animationValues||u.latestValues),i.root&&i.root.isUpdating&&(i.isLayoutDirty=!0);const{crossfade:h}=i.options;h===!1&&u.hide()}}exitAnimationComplete(){this.members.forEach(i=>{const{options:s,resumingFrom:u}=i;s.onExitComplete&&s.onExitComplete(),u&&u.options.onExitComplete&&u.options.onExitComplete()})}scheduleRender(){this.members.forEach(i=>{i.instance&&i.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1},transformAxes=["","X","Y","Z"],animationTarget=1e3;let id$1=0;function resetDistortingTransform(t,i,s,u){const{latestValues:h}=i;h[t]&&(s[t]=h[t],i.setStaticValue(t,0),u&&(u[t]=0))}function cancelTreeOptimisedTransformAnimations(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:i}=t.options;if(!i)return;const s=getOptimisedAppearId(i);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:h,layoutId:_}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",frame,!(h||_))}const{parent:u}=t;u&&!u.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(u)}function createProjectionNode$1({attachResizeListener:t,defaultParent:i,measureScroll:s,checkIsScrollRoot:u,resetTransform:h}){return class{constructor(l={},g=i?.()){this.id=id$1++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=g?g.root||g:this,this.path=g?[...g.path,g]:[],this.parent=g,this.depth=g?g.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(l,g){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new SubscriptionManager),this.eventHandlers.get(l).add(g)}notifyListeners(l,...g){const d=this.eventHandlers.get(l);d&&d.notify(...g)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=isSVGElement(l)&&!isSVGSVGElement(l),this.instance=l;const{layoutId:g,layout:d,visualElement:y}=this.options;if(y&&!y.current&&y.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||g)&&(this.isLayoutDirty=!0),t){let E,v=0;const R=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{v=window.innerWidth}),t(l,()=>{const z=window.innerWidth;z!==v&&(v=z,this.root.updateBlockedByResize=!0,E&&E(),E=delay(R,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}g&&this.root.registerSharedNode(g,this),this.options.animate!==!1&&y&&(g||d)&&this.addEventListener("didUpdate",({delta:E,hasLayoutChanged:v,hasRelativeLayoutChanged:R,layout:z})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||y.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:I,onLayoutAnimationComplete:K}=y.getProps(),J=!this.targetLayout||!boxEqualsRounded(this.targetLayout,z),X=!v&&R;if(this.options.layoutRoot||this.resumeFrom||X||v&&(J||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...getValueTransition(C,"layout"),onPlay:I,onComplete:K};(y.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(E,X)}else v||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=z})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let E=0;E<this.path.length;E++){const v=this.path[E];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:g,layout:d}=this.options;if(g===void 0&&!d)return;const y=this.getTransformTemplate();this.prevTransformTemplateValue=y?y(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const g=time.now();frameData.delta=clamp(0,1e3/60,g-frameData.timestamp),frameData.timestamp=g,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:g}=this.options;g&&g.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let g=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(g=!1),g&&this.instance){const d=u(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!h)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,g=this.projectionDelta&&!isDeltaZero(this.projectionDelta),d=this.getTransformTemplate(),y=d?d(this.latestValues,""):void 0,E=y!==this.prevTransformTemplateValue;l&&this.instance&&(g||hasTransform(this.latestValues)||E)&&(h(this.instance,y),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const g=this.measurePageBox();let d=this.removeElementScroll(g);return l&&(d=this.removeTransform(d)),roundBox(d),{animationId:this.root.animationId,measuredBox:g,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return createBox();const g=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:y}=this.root;y&&(translateAxis(g.x,y.offset.x),translateAxis(g.y,y.offset.y))}return g}removeElementScroll(l){const g=createBox();if(copyBoxInto(g,l),this.scroll?.wasRoot)return g;for(let d=0;d<this.path.length;d++){const y=this.path[d],{scroll:E,options:v}=y;y!==this.root&&E&&v.layoutScroll&&(E.wasRoot&&copyBoxInto(g,l),translateAxis(g.x,E.offset.x),translateAxis(g.y,E.offset.y))}return g}applyTransform(l,g=!1){const d=createBox();copyBoxInto(d,l);for(let y=0;y<this.path.length;y++){const E=this.path[y];!g&&E.options.layoutScroll&&E.scroll&&E!==E.root&&transformBox(d,{x:-E.scroll.offset.x,y:-E.scroll.offset.y}),hasTransform(E.latestValues)&&transformBox(d,E.latestValues)}return hasTransform(this.latestValues)&&transformBox(d,this.latestValues),d}removeTransform(l){const g=createBox();copyBoxInto(g,l);for(let d=0;d<this.path.length;d++){const y=this.path[d];if(!y.instance||!hasTransform(y.latestValues))continue;hasScale(y.latestValues)&&y.updateSnapshot();const E=createBox(),v=y.measurePageBox();copyBoxInto(E,v),removeBoxTransforms(g,y.latestValues,y.snapshot?y.snapshot.layoutBox:void 0,E)}return hasTransform(this.latestValues)&&removeBoxTransforms(g,this.latestValues),g}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const g=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=g.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=g.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=g.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==g;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:E,layoutId:v}=this.options;if(!this.layout||!(E||v))return;this.resolvedRelativeTargetAt=frameData.timestamp;const R=this.getClosestProjectingParent();R&&this.linkedParentVersion!==R.layoutVersion&&!R.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(R&&R.layout?this.createRelativeTarget(R,this.layout.layoutBox,R.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,R&&!!R.resumingFrom==!!this.resumingFrom&&!R.options.layoutScroll&&R.target&&this.animationProgress!==1?this.createRelativeTarget(R,this.target,R.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,g,d){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,g,d),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const l=this.getLead(),g=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),g&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(d=!1),d)return;const{layout:y,layoutId:E}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||E))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,R=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,g),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=createBox());const{target:z}=l;if(!z){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,z,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==R||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",z))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(l,g=!1){const d=this.snapshot,y=d?d.latestValues:{},E={...this.latestValues},v=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!g;const R=createBox(),z=d?d.source:void 0,C=this.layout?this.layout.source:void 0,I=z!==C,K=this.getStack(),J=!K||K.members.length<=1,X=!!(I&&!J&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let b;this.mixTargetDelta=F=>{const B=F/1e3;mixAxisDelta(v.x,l.x,B),mixAxisDelta(v.y,l.y,B),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(R,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,R,B),b&&boxEquals(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=createBox()),copyBoxInto(b,this.relativeTarget)),I&&(this.animationValues=E,mixValues(E,y,this.latestValues,B,X,J)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),l.onUpdate&&l.onUpdate(g)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:g,target:d,layout:y,latestValues:E}=l;if(!(!g||!d||!y)){if(this!==l&&this.layout&&y&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,y.layoutBox)){d=this.target||createBox();const v=calcLength(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const R=calcLength(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+R}copyBoxInto(g,d),transformBox(g,E),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,g,E)}}registerSharedNode(l,g){this.sharedNodes.has(l)||this.sharedNodes.set(l,new NodeStack),this.sharedNodes.get(l).add(g);const y=g.options.initialPromotionConfig;g.promote({transition:y?y.transition:void 0,preserveFollowOpacity:y&&y.shouldPreserveFollowOpacity?y.shouldPreserveFollowOpacity(g):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:g,preserveFollowOpacity:d}={}){const y=this.getStack();y&&y.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),g&&this.setOptions({transition:g})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let g=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(g=!0),!g)return;const y={};d.z&&resetDistortingTransform("z",l,y,this.animationValues);for(let E=0;E<transformAxes.length;E++)resetDistortingTransform(`rotate${transformAxes[E]}`,l,y,this.animationValues),resetDistortingTransform(`skew${transformAxes[E]}`,l,y,this.animationValues);l.render();for(const E in y)l.setStaticValue(E,y[E]),this.animationValues&&(this.animationValues[E]=y[E]);l.scheduleRender()}applyProjectionStyles(l,g){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=resolveMotionValue(g?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=resolveMotionValue(g?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const E=y.animationValues||y.latestValues;this.applyTransformsToTarget();let v=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,E);d&&(v=d(E,v)),l.transform=v;const{x:R,y:z}=this.projectionDelta;l.transformOrigin=`${R.origin*100}% ${z.origin*100}% 0`,y.animationValues?l.opacity=y===this?E.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:l.opacity=y===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const C in scaleCorrectors){if(E[C]===void 0)continue;const{correct:I,applyTo:K,isCSSVariable:J}=scaleCorrectors[C],X=v==="none"?E[C]:I(E[C],y);if(K){const b=K.length;for(let F=0;F<b;F++)l[K[F]]=X}else J?this.options.visualElement.renderState.vars[C]=X:l[C]=X}this.options.layoutId&&(l.pointerEvents=y===this?resolveMotionValue(g?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(t){t.updateLayout()}function notifyLayoutUpdate(t){const i=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&i&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:u}=t.layout,{animationType:h}=t.options,_=i.source!==t.layout.source;h==="size"?eachAxis(E=>{const v=_?i.measuredBox[E]:i.layoutBox[E],R=calcLength(v);v.min=s[E].min,v.max=v.min+R}):shouldAnimatePositionOnly(h,i.layoutBox,s)&&eachAxis(E=>{const v=_?i.measuredBox[E]:i.layoutBox[E],R=calcLength(s[E]);v.max=v.min+R,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[E].max=t.relativeTarget[E].min+R)});const l=createDelta();calcBoxDelta(l,s,i.layoutBox);const g=createDelta();_?calcBoxDelta(g,t.applyTransform(u,!0),i.measuredBox):calcBoxDelta(g,s,i.layoutBox);const d=!isDeltaZero(l);let y=!1;if(!t.resumeFrom){const E=t.getClosestProjectingParent();if(E&&!E.resumeFrom){const{snapshot:v,layout:R}=E;if(v&&R){const z=createBox();calcRelativePosition(z,i.layoutBox,v.layoutBox);const C=createBox();calcRelativePosition(C,s,R.layoutBox),boxEqualsRounded(z,C)||(y=!0),E.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=z,t.relativeParent=E)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:i,delta:g,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:y})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function propagateDirtyNodes(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function cleanDirtyNodes(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function clearSnapshot(t){t.clearSnapshot()}function clearMeasurements(t){t.clearMeasurements()}function clearIsLayoutDirty(t){t.isLayoutDirty=!1}function resetTransformStyle(t){const{visualElement:i}=t.options;i&&i.getProps().onBeforeLayoutMeasure&&i.notify("BeforeLayoutMeasure"),t.resetTransform()}function finishAnimation(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function resolveTargetDelta(t){t.resolveTargetDelta()}function calcProjection(t){t.calcProjection()}function resetSkewAndRotation(t){t.resetSkewAndRotation()}function removeLeadSnapshots(t){t.removeLeadSnapshot()}function mixAxisDelta(t,i,s){t.translate=mixNumber$1(i.translate,0,s),t.scale=mixNumber$1(i.scale,1,s),t.origin=i.origin,t.originPoint=i.originPoint}function mixAxis(t,i,s,u){t.min=mixNumber$1(i.min,s.min,u),t.max=mixNumber$1(i.max,s.max,u)}function mixBox(t,i,s,u){mixAxis(t.x,i.x,s.x,u),mixAxis(t.y,i.y,s.y,u)}function hasOpacityCrossfade(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop;function roundAxis(t){t.min=roundPoint(t.min),t.max=roundPoint(t.max)}function roundBox(t){roundAxis(t.x),roundAxis(t.y)}function shouldAnimatePositionOnly(t,i,s){return t==="position"||t==="preserve-aspect"&&!isNear(aspectRatio(i),aspectRatio(s),.2)}function checkNodeWasScrollRoot(t){return t!==t.root&&t.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(t,i)=>addDomEvent(t,"resize",i),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const t=new DocumentProjectionNode({});t.mount(window),t.setOptions({layoutScroll:!0}),rootProjectionNode.current=t}return rootProjectionNode.current},resetTransform:(t,i)=>{t.style.transform=i!==void 0?i:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),MotionConfigContext=reactExports.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function setRef(t,i){if(typeof t=="function")return t(i);t!=null&&(t.current=i)}function composeRefs(...t){return i=>{let s=!1;const u=t.map(h=>{const _=setRef(h,i);return!s&&typeof _=="function"&&(s=!0),_});if(s)return()=>{for(let h=0;h<u.length;h++){const _=u[h];typeof _=="function"?_():setRef(t[h],null)}}}}function useComposedRefs(...t){return reactExports.useCallback(composeRefs(...t),t)}class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(i){const s=this.props.childRef.current;if(s&&i.isPresent&&!this.props.isPresent){const u=s.offsetParent,h=isHTMLElement(u)&&u.offsetWidth||0,_=this.props.sizeRef.current;_.height=s.offsetHeight||0,_.width=s.offsetWidth||0,_.top=s.offsetTop,_.left=s.offsetLeft,_.right=h-_.width-_.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:t,isPresent:i,anchorX:s,root:u}){const h=reactExports.useId(),_=reactExports.useRef(null),l=reactExports.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:g}=reactExports.useContext(MotionConfigContext),d=t.props?.ref??t?.ref,y=useComposedRefs(_,d);return reactExports.useInsertionEffect(()=>{const{width:E,height:v,top:R,left:z,right:C}=l.current;if(i||!_.current||!E||!v)return;const I=s==="left"?`left: ${z}`:`right: ${C}`;_.current.dataset.motionPopId=h;const K=document.createElement("style");g&&(K.nonce=g);const J=u??document.head;return J.appendChild(K),K.sheet&&K.sheet.insertRule(`
          [data-motion-pop-id="${h}"] {
            position: absolute !important;
            width: ${E}px !important;
            height: ${v}px !important;
            ${I}px !important;
            top: ${R}px !important;
          }
        `),()=>{J.contains(K)&&J.removeChild(K)}},[i]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:i,childRef:_,sizeRef:l,children:reactExports.cloneElement(t,{ref:y})})}const PresenceChild=({children:t,initial:i,isPresent:s,onExitComplete:u,custom:h,presenceAffectsLayout:_,mode:l,anchorX:g,root:d})=>{const y=useConstant(newChildrenMap),E=reactExports.useId();let v=!0,R=reactExports.useMemo(()=>(v=!1,{id:E,initial:i,isPresent:s,custom:h,onExitComplete:z=>{y.set(z,!0);for(const C of y.values())if(!C)return;u&&u()},register:z=>(y.set(z,!1),()=>y.delete(z))}),[s,y,u]);return _&&v&&(R={...R}),reactExports.useMemo(()=>{y.forEach((z,C)=>y.set(C,!1))},[s]),reactExports.useEffect(()=>{!s&&!y.size&&u&&u()},[s]),l==="popLayout"&&(t=jsxRuntimeExports.jsx(PopChild,{isPresent:s,anchorX:g,root:d,children:t})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:R,children:t})};function newChildrenMap(){return new Map}function usePresence(t=!0){const i=reactExports.useContext(PresenceContext);if(i===null)return[!0,null];const{isPresent:s,onExitComplete:u,register:h}=i,_=reactExports.useId();reactExports.useEffect(()=>{if(t)return h(_)},[t]);const l=reactExports.useCallback(()=>t&&u&&u(_),[_,u,t]);return!s&&u?[!1,l]:[!0]}const getChildKey=t=>t.key||"";function onlyElements(t){const i=[];return reactExports.Children.forEach(t,s=>{reactExports.isValidElement(s)&&i.push(s)}),i}const AnimatePresence=({children:t,custom:i,initial:s=!0,onExitComplete:u,presenceAffectsLayout:h=!0,mode:_="sync",propagate:l=!1,anchorX:g="left",root:d})=>{const[y,E]=usePresence(l),v=reactExports.useMemo(()=>onlyElements(t),[t]),R=l&&!y?[]:v.map(getChildKey),z=reactExports.useRef(!0),C=reactExports.useRef(v),I=useConstant(()=>new Map),K=reactExports.useRef(new Set),[J,X]=reactExports.useState(v),[b,F]=reactExports.useState(v);useIsomorphicLayoutEffect(()=>{z.current=!1,C.current=v;for(let Q=0;Q<b.length;Q++){const N=getChildKey(b[Q]);R.includes(N)?(I.delete(N),K.current.delete(N)):I.get(N)!==!0&&I.set(N,!1)}},[b,R.length,R.join("-")]);const B=[];if(v!==J){let Q=[...v];for(let N=0;N<b.length;N++){const ee=b[N],Se=getChildKey(ee);R.includes(Se)||(Q.splice(N,0,ee),B.push(ee))}return _==="wait"&&B.length&&(Q=B),F(onlyElements(Q)),X(v),null}const{forceRender:$}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:b.map(Q=>{const N=getChildKey(Q),ee=l&&!y?!1:v===b||R.includes(N),Se=()=>{if(K.current.has(N))return;if(K.current.add(N),I.has(N))I.set(N,!0);else return;let ue=!0;I.forEach(ge=>{ge||(ue=!1)}),ue&&($?.(),F(C.current),l&&E?.(),u&&u())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:ee,initial:!z.current||s?void 0:!1,custom:i,presenceAffectsLayout:h,mode:_,root:d,onExitComplete:ee?void 0:Se,anchorX:g,children:Q},N)})})},LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let isInitialized=!1;function initFeatureDefinitions(){if(isInitialized)return;const t={};for(const i in featureProps)t[i]={isEnabled:s=>featureProps[i].some(u=>!!s[u])};setFeatureDefinitions(t),isInitialized=!0}function getInitializedFeatureDefinitions(){return initFeatureDefinitions(),getFeatureDefinitions()}function loadFeatures(t){const i=getInitializedFeatureDefinitions();for(const s in t)i[s]={...i[s],...t[s]};setFeatureDefinitions(i)}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||validMotionProps.has(t)}let shouldForward=t=>!isValidMotionProp(t);function loadExternalIsValidProp(t){typeof t=="function"&&(shouldForward=i=>i.startsWith("on")?!isValidMotionProp(i):t(i))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(t,i,s){const u={};for(const h in t)h==="values"&&typeof t.values=="object"||(shouldForward(h)||s===!0&&isValidMotionProp(h)||!i&&!isValidMotionProp(h)||t.draggable&&h.startsWith("onDrag"))&&(u[h]=t[h]);return u}const MotionContext=reactExports.createContext({});function getCurrentTreeVariants(t,i){if(isControllingVariants(t)){const{initial:s,animate:u}=t;return{initial:s===!1||isVariantLabel(s)?s:void 0,animate:isVariantLabel(u)?u:void 0}}return t.inherit!==!1?i:{}}function useCreateMotionContext(t){const{initial:i,animate:s}=getCurrentTreeVariants(t,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:i,animate:s}),[variantLabelsAsDependency(i),variantLabelsAsDependency(s)])}function variantLabelsAsDependency(t){return Array.isArray(t)?t.join(" "):t}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(t,i,s){for(const u in i)!isMotionValue(i[u])&&!isForcedMotionValue(u,s)&&(t[u]=i[u])}function useInitialMotionValues({transformTemplate:t},i){return reactExports.useMemo(()=>{const s=createHtmlRenderState();return buildHTMLStyles(s,i,t),Object.assign({},s.vars,s.style)},[i])}function useStyle(t,i){const s=t.style||{},u={};return copyRawValuesOnly(u,s,t),Object.assign(u,useInitialMotionValues(t,i)),u}function useHTMLProps(t,i){const s={},u=useStyle(t,i);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,u.userSelect=u.WebkitUserSelect=u.WebkitTouchCallout="none",u.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=u,s}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}});function useSVGProps(t,i,s,u){const h=reactExports.useMemo(()=>{const _=createSvgRenderState();return buildSVGAttrs(_,i,isSVGTag(u),t.transformTemplate,t.style),{..._.attrs,style:{..._.style}}},[i]);if(t.style){const _={};copyRawValuesOnly(_,t.style,t),h.style={..._,...h.style}}return h}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(t){return typeof t!="string"||t.includes("-")?!1:!!(lowercaseSVGElements.indexOf(t)>-1||/[A-Z]/u.test(t))}function useRender(t,i,s,{latestValues:u},h,_=!1,l){const d=(l??isSVGComponent(t)?useSVGProps:useHTMLProps)(i,u,h,t),y=filterProps(i,typeof t=="string",_),E=t!==reactExports.Fragment?{...y,...d,ref:s}:{},{children:v}=i,R=reactExports.useMemo(()=>isMotionValue(v)?v.get():v,[v]);return reactExports.createElement(t,{...E,children:R})}function makeState({scrapeMotionValuesFromProps:t,createRenderState:i},s,u,h){return{latestValues:makeLatestValues(s,u,h,t),renderState:i()}}function makeLatestValues(t,i,s,u){const h={},_=u(t,{});for(const R in _)h[R]=resolveMotionValue(_[R]);let{initial:l,animate:g}=t;const d=isControllingVariants(t),y=isVariantNode(t);i&&y&&!d&&t.inherit!==!1&&(l===void 0&&(l=i.initial),g===void 0&&(g=i.animate));let E=s?s.initial===!1:!1;E=E||l===!1;const v=E?g:l;if(v&&typeof v!="boolean"&&!isAnimationControls(v)){const R=Array.isArray(v)?v:[v];for(let z=0;z<R.length;z++){const C=resolveVariantFromProps(t,R[z]);if(C){const{transitionEnd:I,transition:K,...J}=C;for(const X in J){let b=J[X];if(Array.isArray(b)){const F=E?b.length-1:0;b=b[F]}b!==null&&(h[X]=b)}for(const X in I)h[X]=I[X]}}}return h}const makeUseVisualState=t=>(i,s)=>{const u=reactExports.useContext(MotionContext),h=reactExports.useContext(PresenceContext),_=()=>makeState(t,i,u,h);return s?_():useConstant(_)},useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState}),useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function useMotionRef(t,i,s){const u=reactExports.useRef(s);reactExports.useInsertionEffect(()=>{u.current=s});const h=reactExports.useRef(null);return reactExports.useCallback(_=>{_&&t.onMount?.(_),i&&(_?i.mount(_):i.unmount());const l=u.current;if(typeof l=="function")if(_){const g=l(_);typeof g=="function"&&(h.current=g)}else h.current?(h.current(),h.current=null):l(_);else l&&(l.current=_)},[i])}const SwitchLayoutGroupContext=reactExports.createContext({});function isRefObject(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function useVisualElement(t,i,s,u,h,_){const{visualElement:l}=reactExports.useContext(MotionContext),g=reactExports.useContext(LazyContext),d=reactExports.useContext(PresenceContext),y=reactExports.useContext(MotionConfigContext).reducedMotion,E=reactExports.useRef(null);u=u||g.renderer,!E.current&&u&&(E.current=u(t,{visualState:i,parent:l,props:s,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:y,isSVG:_}));const v=E.current,R=reactExports.useContext(SwitchLayoutGroupContext);v&&!v.projection&&h&&(v.type==="html"||v.type==="svg")&&createProjectionNode(E.current,s,h,R);const z=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{v&&z.current&&v.update(s,d)});const C=s[optimizedAppearDataAttribute],I=reactExports.useRef(!!C&&!window.MotionHandoffIsComplete?.(C)&&window.MotionHasOptimisedAnimation?.(C));return useIsomorphicLayoutEffect(()=>{v&&(z.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),v.scheduleRenderMicrotask(),I.current&&v.animationState&&v.animationState.animateChanges())}),reactExports.useEffect(()=>{v&&(!I.current&&v.animationState&&v.animationState.animateChanges(),I.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(C)}),I.current=!1),v.enteringChildren=void 0)}),v}function createProjectionNode(t,i,s,u){const{layoutId:h,layout:_,drag:l,dragConstraints:g,layoutScroll:d,layoutRoot:y,layoutCrossfade:E}=i;t.projection=new s(t.latestValues,i["data-framer-portal-id"]?void 0:getClosestProjectingNode(t.parent)),t.projection.setOptions({layoutId:h,layout:_,alwaysMeasureLayout:!!l||g&&isRefObject(g),visualElement:t,animationType:typeof _=="string"?_:"both",initialPromotionConfig:u,crossfade:E,layoutScroll:d,layoutRoot:y})}function getClosestProjectingNode(t){if(t)return t.options.allowProjection!==!1?t.projection:getClosestProjectingNode(t.parent)}function createMotionComponent(t,{forwardMotionProps:i=!1,type:s}={},u,h){u&&loadFeatures(u);const _=s?s==="svg":isSVGComponent(t),l=_?useSVGVisualState:useHTMLVisualState;function g(y,E){let v;const R={...reactExports.useContext(MotionConfigContext),...y,layoutId:useLayoutId(y)},{isStatic:z}=R,C=useCreateMotionContext(y),I=l(y,z);if(!z&&isBrowser$1){useStrictMode();const K=getProjectionFunctionality(R);v=K.MeasureLayout,C.visualElement=useVisualElement(t,I,R,h,K.ProjectionNode,_)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:C,children:[v&&C.visualElement?jsxRuntimeExports.jsx(v,{visualElement:C.visualElement,...R}):null,useRender(t,y,useMotionRef(I,C.visualElement,E),I,z,i,_)]})}g.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const d=reactExports.forwardRef(g);return d[motionComponentSymbol]=t,d}function useLayoutId({layoutId:t}){const i=reactExports.useContext(LayoutGroupContext).id;return i&&t!==void 0?i+"-"+t:t}function useStrictMode(t,i){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(t){const i=getInitializedFeatureDefinitions(),{drag:s,layout:u}=i;if(!s&&!u)return{};const h={...s,...u};return{MeasureLayout:s?.isEnabled(t)||u?.isEnabled(t)?h.MeasureLayout:void 0,ProjectionNode:h.ProjectionNode}}function createMotionProxy(t,i){if(typeof Proxy>"u")return createMotionComponent;const s=new Map,u=(_,l)=>createMotionComponent(_,l,t,i),h=(_,l)=>u(_,l);return new Proxy(h,{get:(_,l)=>l==="create"?u:(s.has(l)||s.set(l,createMotionComponent(l,void 0,t,i)),s.get(l))})}const createDomVisualElement=(t,i)=>i.isSVG??isSVGComponent(t)?new SVGVisualElement(i):new HTMLVisualElement(i,{allowProjection:t!==reactExports.Fragment});class AnimationFeature extends Feature{constructor(i){super(i),i.animationState||(i.animationState=createAnimationState(i))}updateAnimationControlsSubscription(){const{animate:i}=this.node.getProps();isAnimationControls(i)&&(this.unmountControls=i.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:i}=this.node.getProps(),{animate:s}=this.node.prevProps||{};i!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id++}update(){if(!this.node.presenceContext)return;const{isPresent:i,onExitComplete:s}=this.node.presenceContext,{isPresent:u}=this.node.prevPresenceContext||{};if(!this.node.animationState||i===u)return;const h=this.node.animationState.setActive("exit",!i);s&&!i&&h.then(()=>{s(this.id)})}mount(){const{register:i,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),i&&(this.unmount=i(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function extractEventInfo(t){return{point:{x:t.pageX,y:t.pageY}}}const addPointerInfo=t=>i=>isPrimaryPointer(i)&&t(i,extractEventInfo(i));function addPointerEvent(t,i,s,u){return addDomEvent(t,i,addPointerInfo(s),u)}const getContextWindow=({current:t})=>t?t.ownerDocument.defaultView:null,distance=(t,i)=>Math.abs(t-i);function distance2D(t,i){const s=distance(t.x,i.x),u=distance(t.y,i.y);return Math.sqrt(s**2+u**2)}const overflowStyles=new Set(["auto","scroll"]);class PanSession{constructor(i,s,{transformPagePoint:u,contextWindow:h=window,dragSnapToOrigin:_=!1,distanceThreshold:l=3,element:g}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=z=>{this.handleScroll(z.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const z=getPanInfo(this.lastMoveEventInfo,this.history),C=this.startEvent!==null,I=distance2D(z.offset,{x:0,y:0})>=this.distanceThreshold;if(!C&&!I)return;const{point:K}=z,{timestamp:J}=frameData;this.history.push({...K,timestamp:J});const{onStart:X,onMove:b}=this.handlers;C||(X&&X(this.lastMoveEvent,z),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,z)},this.handlePointerMove=(z,C)=>{this.lastMoveEvent=z,this.lastMoveEventInfo=transformPoint(C,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(z,C)=>{this.end();const{onEnd:I,onSessionEnd:K,resumeAnimation:J}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&J&&J(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const X=getPanInfo(z.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(C,this.transformPagePoint),this.history);this.startEvent&&I&&I(z,X),K&&K(z,X)},!isPrimaryPointer(i))return;this.dragSnapToOrigin=_,this.handlers=s,this.transformPagePoint=u,this.distanceThreshold=l,this.contextWindow=h||window;const d=extractEventInfo(i),y=transformPoint(d,this.transformPagePoint),{point:E}=y,{timestamp:v}=frameData;this.history=[{...E,timestamp:v}];const{onSessionStart:R}=s;R&&R(i,getPanInfo(y,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp)),g&&this.startScrollTracking(g)}startScrollTracking(i){let s=i.parentElement;for(;s;){const u=getComputedStyle(s);(overflowStyles.has(u.overflowX)||overflowStyles.has(u.overflowY))&&this.scrollPositions.set(s,{x:s.scrollLeft,y:s.scrollTop}),s=s.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(i){const s=this.scrollPositions.get(i);if(!s)return;const u=i===window,h=u?{x:window.scrollX,y:window.scrollY}:{x:i.scrollLeft,y:i.scrollTop},_={x:h.x-s.x,y:h.y-s.y};_.x===0&&_.y===0||(u?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=_.x,this.lastMoveEventInfo.point.y+=_.y):this.history.length>0&&(this.history[0].x-=_.x,this.history[0].y-=_.y),this.scrollPositions.set(i,h),frame.update(this.updatePoint,!0))}updateHandlers(i){this.handlers=i}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),cancelFrame(this.updatePoint)}}function transformPoint(t,i){return i?{point:i(t.point)}:t}function subtractPoint(t,i){return{x:t.x-i.x,y:t.y-i.y}}function getPanInfo({point:t},i){return{point:t,delta:subtractPoint(t,lastDevicePoint(i)),offset:subtractPoint(t,startDevicePoint(i)),velocity:getVelocity(i,.1)}}function startDevicePoint(t){return t[0]}function lastDevicePoint(t){return t[t.length-1]}function getVelocity(t,i){if(t.length<2)return{x:0,y:0};let s=t.length-1,u=null;const h=lastDevicePoint(t);for(;s>=0&&(u=t[s],!(h.timestamp-u.timestamp>secondsToMilliseconds(i)));)s--;if(!u)return{x:0,y:0};const _=millisecondsToSeconds(h.timestamp-u.timestamp);if(_===0)return{x:0,y:0};const l={x:(h.x-u.x)/_,y:(h.y-u.y)/_};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function applyConstraints(t,{min:i,max:s},u){return i!==void 0&&t<i?t=u?mixNumber$1(i,t,u.min):Math.max(t,i):s!==void 0&&t>s&&(t=u?mixNumber$1(s,t,u.max):Math.min(t,s)),t}function calcRelativeAxisConstraints(t,i,s){return{min:i!==void 0?t.min+i:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function calcRelativeConstraints(t,{top:i,left:s,bottom:u,right:h}){return{x:calcRelativeAxisConstraints(t.x,s,h),y:calcRelativeAxisConstraints(t.y,i,u)}}function calcViewportAxisConstraints(t,i){let s=i.min-t.min,u=i.max-t.max;return i.max-i.min<t.max-t.min&&([s,u]=[u,s]),{min:s,max:u}}function calcViewportConstraints(t,i){return{x:calcViewportAxisConstraints(t.x,i.x),y:calcViewportAxisConstraints(t.y,i.y)}}function calcOrigin(t,i){let s=.5;const u=calcLength(t),h=calcLength(i);return h>u?s=progress(i.min,i.max-u,t.min):u>h&&(s=progress(t.min,t.max-h,i.min)),clamp(0,1,s)}function rebaseAxisConstraints(t,i){const s={};return i.min!==void 0&&(s.min=i.min-t.min),i.max!==void 0&&(s.max=i.max-t.min),s}const defaultElastic=.35;function resolveDragElastic(t=defaultElastic){return t===!1?t=0:t===!0&&(t=defaultElastic),{x:resolveAxisElastic(t,"left","right"),y:resolveAxisElastic(t,"top","bottom")}}function resolveAxisElastic(t,i,s){return{min:resolvePointElastic(t,i),max:resolvePointElastic(t,s)}}function resolvePointElastic(t,i){return typeof t=="number"?t:t[i]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(i){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=i}start(i,{snapToCursor:s=!1,distanceThreshold:u}={}){const{presenceContext:h}=this.visualElement;if(h&&h.isPresent===!1)return;const _=v=>{s?(this.stopAnimation(),this.snapToCursor(extractEventInfo(v).point)):this.pauseAnimation()},l=(v,R)=>{this.stopAnimation();const{drag:z,dragPropagation:C,onDragStart:I}=this.getProps();if(z&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(z),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=R,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(J=>{let X=this.getAxisMotionValue(J).get()||0;if(percent.test(X)){const{projection:b}=this.visualElement;if(b&&b.layout){const F=b.layout.layoutBox[J];F&&(X=calcLength(F)*(parseFloat(X)/100))}}this.originPoint[J]=X}),I&&frame.postRender(()=>I(v,R)),addValueToWillChange(this.visualElement,"transform");const{animationState:K}=this.visualElement;K&&K.setActive("whileDrag",!0)},g=(v,R)=>{this.latestPointerEvent=v,this.latestPanInfo=R;const{dragPropagation:z,dragDirectionLock:C,onDirectionLock:I,onDrag:K}=this.getProps();if(!z&&!this.openDragLock)return;const{offset:J}=R;if(C&&this.currentDirection===null){this.currentDirection=getCurrentDirection(J),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",R.point,J),this.updateAxis("y",R.point,J),this.visualElement.render(),K&&K(v,R)},d=(v,R)=>{this.latestPointerEvent=v,this.latestPanInfo=R,this.stop(v,R),this.latestPointerEvent=null,this.latestPanInfo=null},y=()=>eachAxis(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:E}=this.getProps();this.panSession=new PanSession(i,{onSessionStart:_,onStart:l,onMove:g,onSessionEnd:d,resumeAnimation:y},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:E,distanceThreshold:u,contextWindow:getContextWindow(this.visualElement),element:this.visualElement.current})}stop(i,s){const u=i||this.latestPointerEvent,h=s||this.latestPanInfo,_=this.isDragging;if(this.cancel(),!_||!h||!u)return;const{velocity:l}=h;this.startAnimation(l);const{onDragEnd:g}=this.getProps();g&&frame.postRender(()=>g(u,h))}cancel(){this.isDragging=!1;const{projection:i,animationState:s}=this.visualElement;i&&(i.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:u}=this.getProps();!u&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(i,s,u){const{drag:h}=this.getProps();if(!u||!shouldDrag(i,h,this.currentDirection))return;const _=this.getAxisMotionValue(i);let l=this.originPoint[i]+u[i];this.constraints&&this.constraints[i]&&(l=applyConstraints(l,this.constraints[i],this.elastic[i])),_.set(l)}resolveConstraints(){const{dragConstraints:i,dragElastic:s}=this.getProps(),u=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,h=this.constraints;i&&isRefObject(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&u?this.constraints=calcRelativeConstraints(u.layoutBox,i):this.constraints=!1,this.elastic=resolveDragElastic(s),h!==this.constraints&&u&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(_=>{this.constraints!==!1&&this.getAxisMotionValue(_)&&(this.constraints[_]=rebaseAxisConstraints(u.layoutBox[_],this.constraints[_]))})}resolveRefConstraints(){const{dragConstraints:i,onMeasureDragConstraints:s}=this.getProps();if(!i||!isRefObject(i))return!1;const u=i.current,{projection:h}=this.visualElement;if(!h||!h.layout)return!1;const _=measurePageBox(u,h.root,this.visualElement.getTransformPagePoint());let l=calcViewportConstraints(h.layout.layoutBox,_);if(s){const g=s(convertBoxToBoundingBox(l));this.hasMutatedConstraints=!!g,g&&(l=convertBoundingBoxToBox(g))}return l}startAnimation(i){const{drag:s,dragMomentum:u,dragElastic:h,dragTransition:_,dragSnapToOrigin:l,onDragTransitionEnd:g}=this.getProps(),d=this.constraints||{},y=eachAxis(E=>{if(!shouldDrag(E,s,this.currentDirection))return;let v=d&&d[E]||{};l&&(v={min:0,max:0});const R=h?200:1e6,z=h?40:1e7,C={type:"inertia",velocity:u?i[E]:0,bounceStiffness:R,bounceDamping:z,timeConstant:750,restDelta:1,restSpeed:10,..._,...v};return this.startAxisValueAnimation(E,C)});return Promise.all(y).then(g)}startAxisValueAnimation(i,s){const u=this.getAxisMotionValue(i);return addValueToWillChange(this.visualElement,i),u.start(animateMotionValue(i,u,0,s,this.visualElement,!1))}stopAnimation(){eachAxis(i=>this.getAxisMotionValue(i).stop())}pauseAnimation(){eachAxis(i=>this.getAxisMotionValue(i).animation?.pause())}getAnimationState(i){return this.getAxisMotionValue(i).animation?.state}getAxisMotionValue(i){const s=`_drag${i.toUpperCase()}`,u=this.visualElement.getProps(),h=u[s];return h||this.visualElement.getValue(i,(u.initial?u.initial[i]:void 0)||0)}snapToCursor(i){eachAxis(s=>{const{drag:u}=this.getProps();if(!shouldDrag(s,u,this.currentDirection))return;const{projection:h}=this.visualElement,_=this.getAxisMotionValue(s);if(h&&h.layout){const{min:l,max:g}=h.layout.layoutBox[s],d=_.get()||0;_.set(i[s]-mixNumber$1(l,g,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:i,dragConstraints:s}=this.getProps(),{projection:u}=this.visualElement;if(!isRefObject(s)||!u||!this.constraints)return;this.stopAnimation();const h={x:0,y:0};eachAxis(l=>{const g=this.getAxisMotionValue(l);if(g&&this.constraints!==!1){const d=g.get();h[l]=calcOrigin({min:d,max:d},this.constraints[l])}});const{transformTemplate:_}=this.visualElement.getProps();this.visualElement.current.style.transform=_?_({},""):"none",u.root&&u.root.updateScroll(),u.updateLayout(),this.resolveConstraints(),eachAxis(l=>{if(!shouldDrag(l,i,null))return;const g=this.getAxisMotionValue(l),{min:d,max:y}=this.constraints[l];g.set(mixNumber$1(d,y,h[l]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const i=this.visualElement.current,s=addPointerEvent(i,"pointerdown",d=>{const{drag:y,dragListener:E=!0}=this.getProps();y&&E&&!isElementKeyboardAccessible(d.target)&&this.start(d)}),u=()=>{const{dragConstraints:d}=this.getProps();isRefObject(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:h}=this.visualElement,_=h.addEventListener("measure",u);h&&!h.layout&&(h.root&&h.root.updateScroll(),h.updateLayout()),frame.read(u);const l=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),g=h.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:y})=>{this.isDragging&&y&&(eachAxis(E=>{const v=this.getAxisMotionValue(E);v&&(this.originPoint[E]+=d[E].translate,v.set(v.get()+d[E].translate))}),this.visualElement.render())}));return()=>{l(),s(),_(),g&&g()}}getProps(){const i=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:u=!1,dragPropagation:h=!1,dragConstraints:_=!1,dragElastic:l=defaultElastic,dragMomentum:g=!0}=i;return{...i,drag:s,dragDirectionLock:u,dragPropagation:h,dragConstraints:_,dragElastic:l,dragMomentum:g}}}function shouldDrag(t,i,s){return(i===!0||i===t)&&(s===null||s===t)}function getCurrentDirection(t,i=10){let s=null;return Math.abs(t.y)>i?s="y":Math.abs(t.x)>i&&(s="x"),s}class DragGesture extends Feature{constructor(i){super(i),this.removeGroupControls=noop,this.removeListeners=noop,this.controls=new VisualElementDragControls(i)}mount(){const{dragControls:i}=this.node.getProps();i&&(this.removeGroupControls=i.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop}update(){const{dragControls:i}=this.node.getProps(),{dragControls:s}=this.node.prevProps||{};i!==s&&(this.removeGroupControls(),i&&(this.removeGroupControls=i.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=t=>(i,s)=>{t&&frame.postRender(()=>t(i,s))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop}onPointerDown(i){this.session=new PanSession(i,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:i,onPanStart:s,onPan:u,onPanEnd:h}=this.node.getProps();return{onSessionStart:asyncHandler(i),onStart:asyncHandler(s),onMove:u,onEnd:(_,l)=>{delete this.session,h&&frame.postRender(()=>h(_,l))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",i=>this.onPointerDown(i))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:i,layoutGroup:s,switchLayoutGroup:u,layoutId:h}=this.props,{projection:_}=i;_&&(s.group&&s.group.add(_),u&&u.register&&h&&u.register(_),hasTakenAnySnapshot&&_.root.didUpdate(),_.addEventListener("animationComplete",()=>{this.safeToRemove()}),_.setOptions({..._.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(i){const{layoutDependency:s,visualElement:u,drag:h,isPresent:_}=this.props,{projection:l}=u;return l&&(l.isPresent=_,hasTakenAnySnapshot=!0,h||i.layoutDependency!==s||s===void 0||i.isPresent!==_?l.willUpdate():this.safeToRemove(),i.isPresent!==_&&(_?l.promote():l.relegate()||frame.postRender(()=>{const g=l.getStack();(!g||!g.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:i}=this.props.visualElement;i&&(i.root.didUpdate(),microtask.postRender(()=>{!i.currentAnimation&&i.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:i,layoutGroup:s,switchLayoutGroup:u}=this.props,{projection:h}=i;hasTakenAnySnapshot=!0,h&&(h.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(h),u&&u.deregister&&u.deregister(h))}safeToRemove(){const{safeToRemove:i}=this.props;i&&i()}render(){return null}}function MeasureLayout(t){const[i,s]=usePresence(),u=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...t,layoutGroup:u,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:i,safeToRemove:s})}const drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(t,i,s){const{props:u}=t;t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",s==="Start");const h="onHover"+s,_=u[h];_&&frame.postRender(()=>_(i,extractEventInfo(i)))}class HoverGesture extends Feature{mount(){const{current:i}=this.node;i&&(this.unmount=hover(i,(s,u)=>(handleHoverEvent(this.node,u,"Start"),h=>handleHoverEvent(this.node,h,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let i=!1;try{i=this.node.current.matches(":focus-visible")}catch{i=!0}!i||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(t,i,s){const{props:u}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&u.whileTap&&t.animationState.setActive("whileTap",s==="Start");const h="onTap"+(s==="End"?"":s),_=u[h];_&&frame.postRender(()=>_(i,extractEventInfo(i)))}class PressGesture extends Feature{mount(){const{current:i}=this.node;i&&(this.unmount=press(i,(s,u)=>(handlePressEvent(this.node,u,"Start"),(h,{success:_})=>handlePressEvent(this.node,h,_?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=t=>{const i=observerCallbacks.get(t.target);i&&i(t)},fireAllObserverCallbacks=t=>{t.forEach(fireObserverCallback)};function initIntersectionObserver({root:t,...i}){const s=t||document;observers.has(s)||observers.set(s,{});const u=observers.get(s),h=JSON.stringify(i);return u[h]||(u[h]=new IntersectionObserver(fireAllObserverCallbacks,{root:t,...i})),u[h]}function observeIntersection(t,i,s){const u=initIntersectionObserver(i);return observerCallbacks.set(t,s),u.observe(t),()=>{observerCallbacks.delete(t),u.unobserve(t)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:i={}}=this.node.getProps(),{root:s,margin:u,amount:h="some",once:_}=i,l={root:s?s.current:void 0,rootMargin:u,threshold:typeof h=="number"?h:thresholdNames[h]},g=d=>{const{isIntersecting:y}=d;if(this.isInView===y||(this.isInView=y,_&&!y&&this.hasEnteredView))return;y&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",y);const{onViewportEnter:E,onViewportLeave:v}=this.node.getProps(),R=y?E:v;R&&R(d)};return observeIntersection(this.node.current,l,g)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:i,prevProps:s}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(i,s))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:t={}},{viewport:i={}}={}){return s=>t[s]!==i[s]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement);function OptimadeNoResults({queryUrl:t,currentFilter:i}){const s=`${t}/structures?filter=${encodeURIComponent(i)}`,u=`${t}/structures?filter=${decodeURIComponent(i)}`;return jsxRuntimeExports.jsxs("div",{className:`${warningContainerStyle} ${textSmall}`,children:[jsxRuntimeExports.jsx("strong",{className:"font-semibold",children:"Warning: "}),"No results returned for this query. Try to relax the filters.",jsxRuntimeExports.jsxs("p",{className:"pt-2",children:["Attempted Query:"," ",jsxRuntimeExports.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:`${textHyperlink} break-all`,children:u})]})]})}var dist={},Navbar={};const mcloud_logo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGIAAABPCAYAAAAQlxDmAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QgeDQk2h9q0aQAADmpJREFUeNrtXXuYU9W1/61zkgzDc2ByMuM45GR4fDyGZHiM16uFXm2V6idWKWpLa6Gg9oHaa1Xwtra0Kn0/KKKoxVKxLVKq9T7Ui9ZPvNZXZQAzmaBYYJLMMDBJEMSBYSY5Z90/Mthz9jxIhuRMBrP+y87JPnvt317PvfYOUKACFahABSpQz0SDefDbAFupe9SIU5/ldkeiOhZrKwCRQwpWw5FsK50tMc1hovMATAagArAJjx4mpn0gfQcTvZXU+IWZTfGWAhBnSIGxzlqWaBmAawCM6EcXDEIdM/8mkXBsqm1pOVEAIu2ZAwVU50IQ3QbGeVns+igYj9mIfzY1HD9YAKIP8o8tm0ayvg6MOWmy0Anw8S4Vla7EfECM770Tia27DtAKQBiobhbsjphyLwh3ALD38ti7BLykE79qk7TX2k8Wx42qhgFpd+XIkiQVVUPCJwmYDeAiAEN66W8HSbTU2xitLwABoK6iwumwJ/7cNWkitRGwWSfp0ZpQ698zNvKVI8foUtH1TLgJwLQeHjlOoEXecPQvH2sgGsaWnqdL0tMAzhW+0pjwoI7E92eEjh7NitpzO68kojUAqrrZJcL9vlDsWwToHzsggu4xUzWSXwUwWvhqD4GWesPR17P9zncnOUd0nqQfAri1+2Twz73h+IqPFRDBcaPdmmZ7A0CF8NWT8gksyXVgFnA75zHRHwCMEmTjDl84/quPBRBBRRmuDcXLAGYJDv8vfeHoCqvUw9uqMkMCngegmFQi8/yaSPx/rJwTaSCA0IrxQE8g1ISjd1qpo6eHY7tYlz4F0PuGZpmIngiMdY0/q4EIVLnmgrBIkMstvnB0QHRzTVNrA0j/HIAOQ/MwlviBsxaIf0yYUMQ6PySoxD2dnfYlA+WtAIAvFP8/ZtwlNF/mdyvXnJVAnEgeWwpgnFFLEWhpPuR/fJHYWjBeMQkqYdUWQD6rgKibBTtYv0vw3R/MhYvaT69Fl3XcACBpaJ40xWONVFgGhD2mXEUg1dDULhH9CHlE1c2xvQQ8ZlosjNvOLtVEWGxmkDd6G6OtyDPSZP45zInA8+s9pZPPCiACqms+AfNMQMj8O+QhTd8ffw/gOnPATWuD1XAMWiCCHqXcr7p+wcDmbi/WZTkfgWCAQDRUEOdLtDblLb9HuWzQRdZ+1XkjgdaitxQ0owng+b5IfEe+gFA3C3ZHXHkEwJI+HnvWnnQsnnLgwOG8lwi/R1lMoPXofR8AIIwF0StvV5X+S74A4Tis/PE0IADAFQlb5zN1s3rdM8kPIOrdo0YTo6eo9CSAhNA2VNKlhzkP0vEB1TUfjGt7+OrDHtr+1R53ZdWbouwDodwFwk8MTUdZ58V7muLPVldD1tqUmwCsgSFQIuYfMOTXBgwFCcOYtTVG95qB1ySdFnubovuCHqVcY34IoKsNv2odQcM8VaHQybwDom7c6FEOzbYbxtQ289d8kfhvTGCpyloAtyB/6YRMGF8dih36iLeKiqEOW+JdEMYaY4yaSGxN3qimf0yYUFSvKrc4NNvbEPYXNMn2Qjf0mZ9HflO9EQQAqG1pOQEiMQWyut6j/Cmglk4ZUCC2AHK9qtzcnvhgH4C1ADziMzLr54htOqE8z4HobXzndNMojOsYUkO96tp0JqnzfqumYKUyQZOxEcCFp3HMX+hUYvNqd6QM9S5PSYnM9u0AJghPHgawB2ArE4CUmnSa2m0umL/qi8TXf2TMq1xzWeetp5mz40y03BeKPkwA5xwIv8e5kJjWAxiWrqgD+G8QO8D0RQCVwjBWy8Oj/1EdROeA6CG3cxaIngVQZo7t8BQDbxNjIghfQvfyzt5oa7Fd+/zEve8fyxkQ9W7nTSB6uAe19iEBaxm8G6DbANSm2eV+bzg2cSD3IwwB6Po0H08Q8w9ZojAxbuBU/ZRIO9kmXV6zrzWadRvhV13LQPRI99/RE0mdJ3vDsbt94fgfNUpcCkIgzZTC7oEGIbUipWDaIIA+743E7/GFYo95w7E5BFoAoFl4biYl9Vd2TihXsgpEwO26lMD3C1LUDsJSXzj6RWPF9YzQ0aPFNm02A7/tIYgTRXIaD9DeuWB1p6ajEHRJn+0NR582NnrD0b+QRLXixhKASXJC+9O2NFQapaeOysaBeDvAY8wRJ33GF46+0acUjS9zIaF/koDxXW/8NwCXC2JxnS8S+/NAgcCAVK8qOwiYbmhuIcIDrEMHiEH42+l4TeWqnFuEwO+jwogzB0J1/hWgS0ySIOEyX2PslX4y/SIBF/+zjcOJhGPqQG2ZBjyurzPzQ8ZhSkxzpkWiGUf7wWo4tDblP4XFxkzSBX2VjJ5WJfhV1wIBBBBwS39A6PqtbtPw1a7cU1cbqUX2zh8MBAg7xzormPmn5kHS+v6AAADVQXTKJ3BdyhU39Mj6Q32pYOl0AZvE/GPBv/4vbzi24UyYr26O7QVhjSC+3/RXOSdZDYRNovsAjDQ0HWGZvndG/MVibUzSV2B2QmY09FEV0icQU9zOy5kw0dDUYZPt/56NCWhLFt0DYL+hqYiY1luZiW1QnRcDWGpeELwiXZezL6oJtb4JYKOpb+p9/7tPIHSiJWZh4N9NbTwYzsYkXNjc3E6g5YIBmROwqJZoG2DTQauF5h17wvGsbeEypPtgrgq5oLf9716B2OUpKSHgSlPeSJYezuZkdJ1J2CoYkV8FFWV4roFwupVlAGqM606X9GXZPEFUE25tZIE/1qVFGQFhY9snYD6545/WGPVne0JkDbcaDTeASn0or8wlCEGPUs6EewUD/ej0xsNv5cA33mh+TY+HcXoHgonmCB3+by4mpbo5thfgHwmG+/agR5meKyC01MaUsRz/YLEtuTwX7yoq5udhlrLauoqKoenbCOZaM5K0PVcT06YN+YVguGWNsToXhjvgcV4kbokyeGUmCbpMaPKe+IcA3jM02e0OzZeBsaYy0yqS9YZcAXFhc3M7MYve2EUB1bkwm++pmwU7p/bTjQC/6QvHNyCXRGgQYqmyTLymUpOIdRQdzuVYvZH4MwQ8JXCwut49anS23mGPK8sBqjYm8HSWb8x10pEYMfNn3ZkJECUmkT5w4ChyTEmS7wRgTHO4AEdWDLf/3DGVBHxbaH5keuRQELknYe64JBMgjAc3UFlZ6cj1aGeEDoXAdI8g1t/MRu0T2aS1AIxu8QHHEP6OFTGLDioSnJGODIy1uZ5nCJ0cbcWgix0j1wjGTZJ16ZdnYrgDVa653TKiTN/pMqQ5JzJnrcFMx9IHQkLI5O9LPNmKQU/cu7eDddwIw54vA7MDbueN/emv0eMZwjqvE6bmpZpI9HELU1qTBI+0Mf04gk2rEhLkmVaNuqYp9jeIhptoVX8M9zE+fgdO7YV0mSJodJtVvHSVZprcVclG76UNhAS8ISBziYUrCJzUvgXAeNbaReRYlUkfuzzlHgIEO0Brfc2tAav4cLyvXCDYpsaezoX0IRHSNnOkjU8HqlxllknFgfebGXSv2Wzha37VmbZkytDXADBGsS2OIfr3rVxQpPMXBB5eyijF4Yu07gewy5h+0nW+wUomEs7orwHabZxbAtals8cdcDvngfmz5sXEd1hloIHUdRMMWigEc09lBETXwB8XOrm1pzxJrqh2BxJE+s0wFWvR+QG3s88F8XplZTGnLj8xG+hQfLOVC6mzXfqGEI8dOhyO/TVjIIba9A0Ajhiayh2OTktF2xuKvwzQJsFw/9g/vszV229GyB3fhekYMXUSNEuLnv3njqkE8d1CSPDri837E+kBkUqE8WpBTG5vcLs+YSVTNujLARh971Ipqa/rcQI8ZeczsELIMaz2hg+/Y5mjAUhklzfAvAUbldvxYB/OUd/UlRltNNkKwqadY50VVjE2NRw/yIyVArML/KpydzcvifUnYawjYjRxu3SflQun3uNaCcalQlR3V1837qQVrQbcrkuZeKsJOEIgaZM/PXPvoZgVzG0DbKUeZScYXoGFTSRhI2u6B6lz26VCOuGamnD0KctAUJWbAfHEFL/oDcfn9lWYnHbaIKAqqxi4W2jeq8t8RepIrAV6V3UtIPCTmcRTvnDsPKvUUYOq3NvDHB0kiWac7kx52qWO08KxldT9mO4ESaPtfo/zC5bYCu3ktsyceH7JinEFPUp5QFWe6QGEYwyel87B/rSBIECXhscWA3ha+GokMT1RryrP1ruds3LJsE5DMkxxSCU5BUBRhterzts1xjsQy0iBDyDhyppwfGea85sZbQHkKapyPwPLeunwVZ3wqGaTn8um/Xi9srJ4mNyxRbzBAKlc/+tInbkQtyBPSExz+1u11xv/kzxltcT6lwB8WYgTTlGzJNG8TIot+p9adruuZ+J16P3SWwbwLoAgg0NE1P8yFcYwMK4yHiTsopc7E/Zra1ta4inX1bmQmP4gSHqSga0S+B0m0s9AHEtAPAnATMEtFem5zoR98akx5RwIoOuCxKR8P4iuwgCQRnLVjNChkNmgOx8n0JcHYDgxZrrTF4n+PtNjWxnZiJ6oev+RiC8Sv1pims3AM7D2wMkxEYQUQ5LVtxq3MGiFYwiPr4lEH+8PCGcsESLtrjpHTeqJRQCuAKgWOb79qyeJqFedvwfo+hxPfitALxLrm+OR+Nbe0hYDBoTJgR83elRRQp7IRFUskZN0HtlvE0GkADyJgMtgPn3zcqecvLp2/5EPAKDerVwLwmZB0g8y8ByBw2Dq32FJiTsBOgpdaiLmxmlN0f39XfmWA5Gb1IGyBIwN3VYn85sgUgBcYOKJsJ3bpYtrWluP5ztvg+6vbQKq8iQDC9J4tE3WMCNV0pn/JA02IDoS9kXEON0VEkfA0vzBAsKglIhTeZ2AqixDKqg03oPRAcYTxLTK2xTdN5h4GtT/unUqzwOgPEncnuhwNOXrfwgVqEAFKlCBCtRf+n97Y2CaOfCNbwAAAABJRU5ErkJggg==",mcloud_logo$1=Object.freeze(Object.defineProperty({__proto__:null,default:mcloud_logo},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(mcloud_logo$1);var hasRequiredNavbar;function requireNavbar(){if(hasRequiredNavbar)return Navbar;hasRequiredNavbar=1,Object.defineProperty(Navbar,"__esModule",{value:!0}),Navbar.default=void 0;var t=u(require$$1),i=s(requireReact());function s(d,y){if(typeof WeakMap=="function")var E=new WeakMap,v=new WeakMap;return(s=function(R,z){if(!z&&R&&R.__esModule)return R;var C,I,K={__proto__:null,default:R};if(R===null||typeof R!="object"&&typeof R!="function")return K;if(C=z?v:E){if(C.has(R))return C.get(R);C.set(R,K)}for(const J in R)J!=="default"&&{}.hasOwnProperty.call(R,J)&&((I=(C=Object.defineProperty)&&Object.getOwnPropertyDescriptor(R,J))&&(I.get||I.set)?C(K,J,I):K[J]=R[J]);return K})(d,y)}function u(d){return d&&d.__esModule?d:{default:d}}const h={learn:{name:"LEARN",link:"https://www.materialscloud.org/learn"},work:{name:"WORK",link:"https://www.materialscloud.org/work"},discover:{name:"DISCOVER",link:"https://www.materialscloud.org/discover"},explore:{name:"EXPLORE",link:"https://www.materialscloud.org/explore"},archive:{name:"ARCHIVE",link:"https://www.materialscloud.org/archive"}},_={policies:{name:"Policies",link:"https://www.materialscloud.org/policies"},dmp:{name:"Data Management Plan",link:"https://www.materialscloud.org/dmp"},terms:{name:"Terms of Use",link:"https://www.materialscloud.org/termssummary"},infrastructure:{name:"Infrastructure",link:"https://www.materialscloud.org/infrastructure"},team:{name:"Team & Contact",link:"https://www.materialscloud.org/team"},partners:{name:"Partners",link:"https://www.materialscloud.org/home#partners"},restapi:{name:"Connect your REST API",link:"https://www.materialscloud.org/explore/connect"}},l=d=>{let{activeSection:y}=d;const[E,v]=(0,i.useState)(!1),R=(0,i.useRef)(null);(0,i.useEffect)(()=>{function I(K){R.current&&!R.current.contains(K.target)&&v(!1)}return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[]);const z=()=>v(I=>!I),C="dropdown-content"+(E?" dropdown-open":"");return i.default.createElement("div",{ref:R,className:"more-dropdown"},i.default.createElement("span",{className:"more-btn",onClick:z},"More ",i.default.createElement("i",{className:"fa fa-caret-down"})),i.default.createElement("div",{className:C},Object.keys(_).map((I,K)=>{const{link:J,name:X}=_[I],b=I===y?"active":"";return i.default.createElement("a",{key:K,className:b,href:J},X)})))},g=d=>{let{activeSection:y}=d;return i.default.createElement("div",{className:"mc-navbar"},i.default.createElement("a",{className:"mc-navbrand",href:"https://www.materialscloud.org/home"},i.default.createElement("img",{src:t.default,loading:"lazy",height:"50",alt:"MC logo"})),Object.keys(h).map((E,v)=>{let R="mc-navlink";return E===y&&(R+=" active"),i.default.createElement("a",{key:v,className:R,href:h[E].link},h[E].name)}),i.default.createElement(l,{activeSection:y}))};return Navbar.default=g,Navbar}var Breadcrumbs={},hasRequiredBreadcrumbs;function requireBreadcrumbs(){if(hasRequiredBreadcrumbs)return Breadcrumbs;hasRequiredBreadcrumbs=1,Object.defineProperty(Breadcrumbs,"__esModule",{value:!0}),Breadcrumbs.default=void 0;var t=i(requireReact());function i(u){return u&&u.__esModule?u:{default:u}}const s=u=>{let{breadcrumbsPath:h}=u;return t.default.createElement("ul",{className:"mc-breadcrumb"},h.map((_,l)=>t.default.createElement("li",{key:l},t.default.createElement("a",{href:_.link},_.name))))};return Breadcrumbs.default=s,Breadcrumbs}var hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1,Object.defineProperty(dist,"__esModule",{value:!0}),dist.default=void 0;var t=u(requireReact()),i=u(requireNavbar()),s=u(requireBreadcrumbs());function u(_){return _&&_.__esModule?_:{default:_}}const h=_=>{let{activeSection:l,breadcrumbsPath:g}=_;return t.default.createElement("div",null,t.default.createElement(i.default,{activeSection:l}),t.default.createElement(s.default,{breadcrumbsPath:g}))};return dist.default=h,dist}var distExports=requireDist();const MaterialsCloudHeader=getDefaultExportFromCjs(distExports);function OptimadeChildInfo({child:t}){if(!t||t.id==="__custom__")return;const{name:i,description:s,homepage:u,base_url:h,..._}=t;return jsxRuntimeExports.jsxs("div",{className:`${containerStyle} ${textTiny} h-35 overflow-auto`,children:[jsxRuntimeExports.jsx("h3",{className:`${textNormal} pb-1.5`,children:i}),s&&jsxRuntimeExports.jsx("p",{className:"pb-1",children:s}),u&&jsxRuntimeExports.jsxs("p",{children:["Homepage:"," ",jsxRuntimeExports.jsx("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:textHyperlink,children:u})]}),h&&jsxRuntimeExports.jsxs("p",{children:["Base url:"," ",jsxRuntimeExports.jsx("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:textHyperlink,children:h})]})]})}function OptimadeParentInfo({provider:t,providers:i}){if(!t||!i)return null;const s=i.find(d=>d.attributes?.base_url===t.attributes?.base_url);if(!s)return null;const{name:u,description:h,homepage:_,base_url:l,...g}=s.attributes??{};return jsxRuntimeExports.jsxs("div",{className:`${containerStyle} h-35 overflow-auto ${textTiny}`,children:[jsxRuntimeExports.jsx("h3",{className:`${textNormal} pb-1.5`,children:u}),h&&jsxRuntimeExports.jsx("p",{className:"pb-1",children:h}),_&&jsxRuntimeExports.jsxs("p",{children:["Homepage:"," ",jsxRuntimeExports.jsx("a",{href:_,target:"_blank",rel:"noopener noreferrer",className:textHyperlink,children:_})]}),l&&jsxRuntimeExports.jsxs("p",{children:["Index metadb:"," ",jsxRuntimeExports.jsx("a",{href:`${l}/links`,target:"_blank",rel:"noopener noreferrer",className:textHyperlink,children:`${l}/links`})]})]})}function ParentProviderDropdown({providers:t,selectedProvider:i,onSelectProvider:s}){const u=i?i.id==="__custom__"?"__custom__":i.attributes.base_url:"__none__";return jsxRuntimeExports.jsxs("select",{className:longSlateDropdown,value:u,onChange:h=>{const _=h.target.value;if(_==="__custom__")s({id:"__custom__",attributes:{base_url:""}});else{const l=t.find(g=>g.attributes?.base_url===_);s(l||null)}},children:[jsxRuntimeExports.jsx("option",{value:"__none__",disabled:!0,children:"Select a provider"}),t.map(h=>jsxRuntimeExports.jsx("option",{value:h.attributes?.base_url||"",children:`${h.id}: ${h.attributes?.name}`},h.attributes?.id??h.id??h.attributes?.base_url)),jsxRuntimeExports.jsx("option",{value:"__custom__",children:"Custom endpoint"})]})}function ChildProviderDropdown({selectedProvider:t,selectedChild:i,onSelectChild:s}){const[u,h]=reactExports.useState([]),[_,l]=reactExports.useState(!1),[g,d]=reactExports.useState(i?.base_url||"");return reactExports.useEffect(()=>{if(!t||t.id==="__custom__"){h([]),t?.id==="__custom__"?s({id:"__custom__",name:"Custom Endpoint",base_url:g}):s(null);return}async function y(){try{l(!0);const{children:E}=await getProviderLinks(t.attributes.base_url),v=E.map(R=>({id:R.id,...R.attributes??{}}));h(v),v.length===1?s(v[0]):s(null)}catch(E){console.error(E),h([]),s(null)}finally{l(!1)}}y()},[t,s]),t?t.id==="__custom__"?jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter custom endpoint URL",className:"flex-1 ring-1 ring-slate-300 rounded-sm px-2 py-1",value:g,onChange:y=>d(y.target.value)}),jsxRuntimeExports.jsx("button",{className:`${baseButtonStyle} rounded-sm md:py-1!`,onClick:()=>s({id:"__custom__",name:"Custom Endpoint",base_url:g}),children:"Submit"})]}):jsxRuntimeExports.jsx("select",{className:longSlateDropdown,value:i?.id||"",onChange:y=>{const E=u.find(v=>v.id===y.target.value);s(E||null)},disabled:_,children:_?jsxRuntimeExports.jsx("option",{children:"Loading"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("option",{value:"",disabled:!0,children:"Select a subdatabase"}),u.map(y=>jsxRuntimeExports.jsx("option",{value:y.id,children:`${y.id}: ${y.name}`},y.id))]})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function OptimadeClient({hideProviderList:t=["exmpl","matcloud"]}){const[i,s]=useSearchParams(),[u,h]=reactExports.useState([]),_=i.has("custom"),l=i.get("custom_url"),[g,d]=reactExports.useState(_?{id:"__custom__",base_url:""}:null),[y,E]=reactExports.useState(l?{id:"__custom__",base_url:l}:null);reactExports.useEffect(()=>{if((!g||g.id!=="__custom__")&&i.has("custom")){const Se=new URLSearchParams(i);Se.delete("custom"),Se.delete("custom_url"),s(Se,{replace:!0})}},[g]),reactExports.useEffect(()=>{const Se=new URLSearchParams(i);y?.id==="__custom__"&&y.base_url?(Se.set("custom",""),Se.set("custom_url",y.base_url)):(Se.delete("custom"),Se.delete("custom_url")),s(Se,{replace:!0})},[y]);const[v,R]=reactExports.useState(""),[z,C]=reactExports.useState(1),[I,K]=reactExports.useState(null),[J,X]=reactExports.useState(null),[b,F]=reactExports.useState(!1),[B,$]=reactExports.useState({data_returned:0,data_available:0}),[Q,N]=reactExports.useState(1);reactExports.useEffect(()=>{(async()=>{try{const ue=await getProvidersList(void 0,t);h(ue.data)}catch(ue){console.error(ue)}})()},[]);const ee=reactExports.useCallback(async()=>{if(y?.base_url){F(!0);try{const Se=await getStructures({providerUrl:y?.base_url,filter:v,page:z});K(Se);const ue=Se?.meta??{data_returned:0,data_available:0};$(ue),N(ue.data_returned!=null?Math.max(1,Math.ceil(ue.data_returned/20)):"N/A"),X(Se?.data[0]||null)}catch(Se){console.error(Se),X(null)}finally{F(!1)}}},[y,v,z]);return reactExports.useEffect(()=>{ee()},[ee]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MaterialsCloudHeader,{className:"header",activeSection:"work",breadcrumbsPath:[{name:"Work",link:"https://www.materialscloud.org/work"},{name:"OPTIMADE-Client",link:null}]}),jsxRuntimeExports.jsx("div",{className:"min-h-screen max-w-5xl mx-auto bg-white mb-4 shadow-md rounded-xs",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center w-full px-2 md:px-4 py-2",children:[jsxRuntimeExports.jsx(OptimadeHeader,{}),jsxRuntimeExports.jsx("div",{className:"p-2 w-full",children:jsxRuntimeExports.jsx(OptimadeFAQs,{})}),jsxRuntimeExports.jsxs("div",{className:"pt-4 p-2 w-full flex flex-col gap-2 max-w-[650px]",children:[jsxRuntimeExports.jsx(ParentProviderDropdown,{providers:u,selectedProvider:g,onSelectProvider:d}),jsxRuntimeExports.jsx(ChildProviderDropdown,{selectedProvider:g,selectedChild:y,onSelectChild:E})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row w-full max-w-5xl px-2 md:px-4 py-2 gap-4",children:[jsxRuntimeExports.jsx("div",{className:"md:w-1/2 w-full",children:jsxRuntimeExports.jsx(OptimadeParentInfo,{provider:g,providers:u})}),jsxRuntimeExports.jsx("div",{className:"md:w-1/2 w-full",children:jsxRuntimeExports.jsx(OptimadeChildInfo,{child:y})})]}),jsxRuntimeExports.jsx("div",{className:"p-2 w-full",children:y?.base_url&&jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3,ease:"easeInOut"},className:containerStyle,children:jsxRuntimeExports.jsx(OptimadeFilters,{queryUrl:y?.base_url,onSubmit:Se=>{R(Se),C(1)}})},"filters")})}),jsxRuntimeExports.jsx("div",{className:"p-2 w-full",children:jsxRuntimeExports.jsx(OptimadeProviderInfo,{queryUrl:y?.base_url})}),y?.base_url&&jsxRuntimeExports.jsxs("div",{className:"px-2 md:px-4 w-full",children:[b&&jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center h-[610px]",children:jsxRuntimeExports.jsx("div",{className:"w-16 h-16 border-4 border-gray-300 border-t-blue-500 rounded-full animate-spin"})}),jsxRuntimeExports.jsx("div",{className:"border-b border-slate-300 py-2"}),!b&&!J&&v&&jsxRuntimeExports.jsx("div",{className:"p-2",children:jsxRuntimeExports.jsx(OptimadeNoResults,{queryUrl:y?.base_url,currentFilter:v})}),!b&&I&&J&&jsxRuntimeExports.jsxs("div",{className:"py-1 md:py-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-end gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(ResultsDropdown,{results:I,resultsLoading:b,selectedResult:J,setSelectedResult:X})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(PaginationHandler,{currentPage:z,totalPages:Q,resultsLoading:b,metaData:B,onPageChange:C})})]}),jsxRuntimeExports.jsx("div",{className:"py-4",children:jsxRuntimeExports.jsx(ResultViewer,{selectedResult:J})})]})]})]})})]})}const badProviders=["exmpl","aiida","aflow","ccdc","ccpnc","httk","matcloud","mpds","mpod","optimake","optimade","pcod","psdi"];function App(){return jsxRuntimeExports.jsx(OptimadeClient,{hideProviderList:badProviders})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})})}));
