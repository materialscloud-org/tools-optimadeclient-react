(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const x of c)if(x.type==="childList")for(const u of x.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function s(c){const x={};return c.integrity&&(x.integrity=c.integrity),c.referrerPolicy&&(x.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?x.credentials="include":c.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function o(c){if(c.ep)return;c.ep=!0;const x=s(c);fetch(c.href,x)}})();function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var r=e.default;if(typeof r=="function"){var s=function o(){var c=!1;try{c=this instanceof o}catch{}return c?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};s.prototype=r.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var c=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(s,o,c.get?c:{enumerable:!0,get:function(){return e[o]}})}),s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var e=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),v=Symbol.iterator;function k(Ee){return Ee===null||typeof Ee!="object"?null:(Ee=v&&Ee[v]||Ee["@@iterator"],typeof Ee=="function"?Ee:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,j={};function se(Ee,Ge,tt){this.props=Ee,this.context=Ge,this.refs=j,this.updater=tt||H}se.prototype.isReactComponent={},se.prototype.setState=function(Ee,Ge){if(typeof Ee!="object"&&typeof Ee!="function"&&Ee!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ee,Ge,"setState")},se.prototype.forceUpdate=function(Ee){this.updater.enqueueForceUpdate(this,Ee,"forceUpdate")};function ce(){}ce.prototype=se.prototype;function ne(Ee,Ge,tt){this.props=Ee,this.context=Ge,this.refs=j,this.updater=tt||H}var E=ne.prototype=new ce;E.constructor=ne,P(E,se.prototype),E.isPureReactComponent=!0;var K=Array.isArray,Y=Object.prototype.hasOwnProperty,re={current:null},ue={key:!0,ref:!0,__self:!0,__source:!0};function q(Ee,Ge,tt){var ve,ze={},rt=null,at=null;if(Ge!=null)for(ve in Ge.ref!==void 0&&(at=Ge.ref),Ge.key!==void 0&&(rt=""+Ge.key),Ge)Y.call(Ge,ve)&&!ue.hasOwnProperty(ve)&&(ze[ve]=Ge[ve]);var Ke=arguments.length-2;if(Ke===1)ze.children=tt;else if(1<Ke){for(var ft=Array(Ke),vt=0;vt<Ke;vt++)ft[vt]=arguments[vt+2];ze.children=ft}if(Ee&&Ee.defaultProps)for(ve in Ke=Ee.defaultProps,Ke)ze[ve]===void 0&&(ze[ve]=Ke[ve]);return{$$typeof:e,type:Ee,key:rt,ref:at,props:ze,_owner:re.current}}function he(Ee,Ge){return{$$typeof:e,type:Ee.type,key:Ge,ref:Ee.ref,props:Ee.props,_owner:Ee._owner}}function Oe(Ee){return typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===e}function be(Ee){var Ge={"=":"=0",":":"=2"};return"$"+Ee.replace(/[=:]/g,function(tt){return Ge[tt]})}var Te=/\/+/g;function Ae(Ee,Ge){return typeof Ee=="object"&&Ee!==null&&Ee.key!=null?be(""+Ee.key):Ge.toString(36)}function Ve(Ee,Ge,tt,ve,ze){var rt=typeof Ee;(rt==="undefined"||rt==="boolean")&&(Ee=null);var at=!1;if(Ee===null)at=!0;else switch(rt){case"string":case"number":at=!0;break;case"object":switch(Ee.$$typeof){case e:case r:at=!0}}if(at)return at=Ee,ze=ze(at),Ee=ve===""?"."+Ae(at,0):ve,K(ze)?(tt="",Ee!=null&&(tt=Ee.replace(Te,"$&/")+"/"),Ve(ze,Ge,tt,"",function(vt){return vt})):ze!=null&&(Oe(ze)&&(ze=he(ze,tt+(!ze.key||at&&at.key===ze.key?"":(""+ze.key).replace(Te,"$&/")+"/")+Ee)),Ge.push(ze)),1;if(at=0,ve=ve===""?".":ve+":",K(Ee))for(var Ke=0;Ke<Ee.length;Ke++){rt=Ee[Ke];var ft=ve+Ae(rt,Ke);at+=Ve(rt,Ge,tt,ft,ze)}else if(ft=k(Ee),typeof ft=="function")for(Ee=ft.call(Ee),Ke=0;!(rt=Ee.next()).done;)rt=rt.value,ft=ve+Ae(rt,Ke++),at+=Ve(rt,Ge,tt,ft,ze);else if(rt==="object")throw Ge=String(Ee),Error("Objects are not valid as a React child (found: "+(Ge==="[object Object]"?"object with keys {"+Object.keys(Ee).join(", ")+"}":Ge)+"). If you meant to render a collection of children, use an array instead.");return at}function _e(Ee,Ge,tt){if(Ee==null)return Ee;var ve=[],ze=0;return Ve(Ee,ve,"","",function(rt){return Ge.call(tt,rt,ze++)}),ve}function W(Ee){if(Ee._status===-1){var Ge=Ee._result;Ge=Ge(),Ge.then(function(tt){(Ee._status===0||Ee._status===-1)&&(Ee._status=1,Ee._result=tt)},function(tt){(Ee._status===0||Ee._status===-1)&&(Ee._status=2,Ee._result=tt)}),Ee._status===-1&&(Ee._status=0,Ee._result=Ge)}if(Ee._status===1)return Ee._result.default;throw Ee._result}var we={current:null},ge={transition:null},ae={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:ge,ReactCurrentOwner:re};function Ue(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:_e,forEach:function(Ee,Ge,tt){_e(Ee,function(){Ge.apply(this,arguments)},tt)},count:function(Ee){var Ge=0;return _e(Ee,function(){Ge++}),Ge},toArray:function(Ee){return _e(Ee,function(Ge){return Ge})||[]},only:function(Ee){if(!Oe(Ee))throw Error("React.Children.only expected to receive a single React element child.");return Ee}},react_production_min.Component=se,react_production_min.Fragment=s,react_production_min.Profiler=c,react_production_min.PureComponent=ne,react_production_min.StrictMode=o,react_production_min.Suspense=d,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,react_production_min.act=Ue,react_production_min.cloneElement=function(Ee,Ge,tt){if(Ee==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ee+".");var ve=P({},Ee.props),ze=Ee.key,rt=Ee.ref,at=Ee._owner;if(Ge!=null){if(Ge.ref!==void 0&&(rt=Ge.ref,at=re.current),Ge.key!==void 0&&(ze=""+Ge.key),Ee.type&&Ee.type.defaultProps)var Ke=Ee.type.defaultProps;for(ft in Ge)Y.call(Ge,ft)&&!ue.hasOwnProperty(ft)&&(ve[ft]=Ge[ft]===void 0&&Ke!==void 0?Ke[ft]:Ge[ft])}var ft=arguments.length-2;if(ft===1)ve.children=tt;else if(1<ft){Ke=Array(ft);for(var vt=0;vt<ft;vt++)Ke[vt]=arguments[vt+2];ve.children=Ke}return{$$typeof:e,type:Ee.type,key:ze,ref:rt,props:ve,_owner:at}},react_production_min.createContext=function(Ee){return Ee={$$typeof:u,_currentValue:Ee,_currentValue2:Ee,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Ee.Provider={$$typeof:x,_context:Ee},Ee.Consumer=Ee},react_production_min.createElement=q,react_production_min.createFactory=function(Ee){var Ge=q.bind(null,Ee);return Ge.type=Ee,Ge},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(Ee){return{$$typeof:p,render:Ee}},react_production_min.isValidElement=Oe,react_production_min.lazy=function(Ee){return{$$typeof:C,_payload:{_status:-1,_result:Ee},_init:W}},react_production_min.memo=function(Ee,Ge){return{$$typeof:w,type:Ee,compare:Ge===void 0?null:Ge}},react_production_min.startTransition=function(Ee){var Ge=ge.transition;ge.transition={};try{Ee()}finally{ge.transition=Ge}},react_production_min.unstable_act=Ue,react_production_min.useCallback=function(Ee,Ge){return we.current.useCallback(Ee,Ge)},react_production_min.useContext=function(Ee){return we.current.useContext(Ee)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(Ee){return we.current.useDeferredValue(Ee)},react_production_min.useEffect=function(Ee,Ge){return we.current.useEffect(Ee,Ge)},react_production_min.useId=function(){return we.current.useId()},react_production_min.useImperativeHandle=function(Ee,Ge,tt){return we.current.useImperativeHandle(Ee,Ge,tt)},react_production_min.useInsertionEffect=function(Ee,Ge){return we.current.useInsertionEffect(Ee,Ge)},react_production_min.useLayoutEffect=function(Ee,Ge){return we.current.useLayoutEffect(Ee,Ge)},react_production_min.useMemo=function(Ee,Ge){return we.current.useMemo(Ee,Ge)},react_production_min.useReducer=function(Ee,Ge,tt){return we.current.useReducer(Ee,Ge,tt)},react_production_min.useRef=function(Ee){return we.current.useRef(Ee)},react_production_min.useState=function(Ee){return we.current.useState(Ee)},react_production_min.useSyncExternalStore=function(Ee,Ge,tt){return we.current.useSyncExternalStore(Ee,Ge,tt)},react_production_min.useTransition=function(){return we.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var e=requireReact(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function u(p,d,w){var C,v={},k=null,H=null;w!==void 0&&(k=""+w),d.key!==void 0&&(k=""+d.key),d.ref!==void 0&&(H=d.ref);for(C in d)o.call(d,C)&&!x.hasOwnProperty(C)&&(v[C]=d[C]);if(p&&p.defaultProps)for(C in d=p.defaultProps,d)v[C]===void 0&&(v[C]=d[C]);return{$$typeof:r,type:p,key:k,ref:H,props:v,_owner:c.current}}return reactJsxRuntime_production_min.Fragment=s,reactJsxRuntime_production_min.jsx=u,reactJsxRuntime_production_min.jsxs=u,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact(),client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(e){function r(ge,ae){var Ue=ge.length;ge.push(ae);e:for(;0<Ue;){var Ee=Ue-1>>>1,Ge=ge[Ee];if(0<c(Ge,ae))ge[Ee]=ae,ge[Ue]=Ge,Ue=Ee;else break e}}function s(ge){return ge.length===0?null:ge[0]}function o(ge){if(ge.length===0)return null;var ae=ge[0],Ue=ge.pop();if(Ue!==ae){ge[0]=Ue;e:for(var Ee=0,Ge=ge.length,tt=Ge>>>1;Ee<tt;){var ve=2*(Ee+1)-1,ze=ge[ve],rt=ve+1,at=ge[rt];if(0>c(ze,Ue))rt<Ge&&0>c(at,ze)?(ge[Ee]=at,ge[rt]=Ue,Ee=rt):(ge[Ee]=ze,ge[ve]=Ue,Ee=ve);else if(rt<Ge&&0>c(at,Ue))ge[Ee]=at,ge[rt]=Ue,Ee=rt;else break e}}return ae}function c(ge,ae){var Ue=ge.sortIndex-ae.sortIndex;return Ue!==0?Ue:ge.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;e.unstable_now=function(){return x.now()}}else{var u=Date,p=u.now();e.unstable_now=function(){return u.now()-p}}var d=[],w=[],C=1,v=null,k=3,H=!1,P=!1,j=!1,se=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(ge){for(var ae=s(w);ae!==null;){if(ae.callback===null)o(w);else if(ae.startTime<=ge)o(w),ae.sortIndex=ae.expirationTime,r(d,ae);else break;ae=s(w)}}function K(ge){if(j=!1,E(ge),!P)if(s(d)!==null)P=!0,W(Y);else{var ae=s(w);ae!==null&&we(K,ae.startTime-ge)}}function Y(ge,ae){P=!1,j&&(j=!1,ce(q),q=-1),H=!0;var Ue=k;try{for(E(ae),v=s(d);v!==null&&(!(v.expirationTime>ae)||ge&&!be());){var Ee=v.callback;if(typeof Ee=="function"){v.callback=null,k=v.priorityLevel;var Ge=Ee(v.expirationTime<=ae);ae=e.unstable_now(),typeof Ge=="function"?v.callback=Ge:v===s(d)&&o(d),E(ae)}else o(d);v=s(d)}if(v!==null)var tt=!0;else{var ve=s(w);ve!==null&&we(K,ve.startTime-ae),tt=!1}return tt}finally{v=null,k=Ue,H=!1}}var re=!1,ue=null,q=-1,he=5,Oe=-1;function be(){return!(e.unstable_now()-Oe<he)}function Te(){if(ue!==null){var ge=e.unstable_now();Oe=ge;var ae=!0;try{ae=ue(!0,ge)}finally{ae?Ae():(re=!1,ue=null)}}else re=!1}var Ae;if(typeof ne=="function")Ae=function(){ne(Te)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,_e=Ve.port2;Ve.port1.onmessage=Te,Ae=function(){_e.postMessage(null)}}else Ae=function(){se(Te,0)};function W(ge){ue=ge,re||(re=!0,Ae())}function we(ge,ae){q=se(function(){ge(e.unstable_now())},ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ge){ge.callback=null},e.unstable_continueExecution=function(){P||H||(P=!0,W(Y))},e.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<ge?Math.floor(1e3/ge):5},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_getFirstCallbackNode=function(){return s(d)},e.unstable_next=function(ge){switch(k){case 1:case 2:case 3:var ae=3;break;default:ae=k}var Ue=k;k=ae;try{return ge()}finally{k=Ue}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ge,ae){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var Ue=k;k=ge;try{return ae()}finally{k=Ue}},e.unstable_scheduleCallback=function(ge,ae,Ue){var Ee=e.unstable_now();switch(typeof Ue=="object"&&Ue!==null?(Ue=Ue.delay,Ue=typeof Ue=="number"&&0<Ue?Ee+Ue:Ee):Ue=Ee,ge){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=Ue+Ge,ge={id:C++,callback:ae,priorityLevel:ge,startTime:Ue,expirationTime:Ge,sortIndex:-1},Ue>Ee?(ge.sortIndex=Ue,r(w,ge),s(d)===null&&ge===s(w)&&(j?(ce(q),q=-1):j=!0,we(K,Ue-Ee))):(ge.sortIndex=Ge,r(d,ge),P||H||(P=!0,W(Y))),ge},e.unstable_shouldYield=be,e.unstable_wrapCallback=function(ge){var ae=k;return function(){var Ue=k;k=ae;try{return ge.apply(this,arguments)}finally{k=Ue}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var e=requireReact(),r=requireScheduler();function s(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,c={};function x(t,i){u(t,i),u(t+"Capture",i)}function u(t,i){for(c[t]=i,t=0;t<i.length;t++)o.add(i[t])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C={},v={};function k(t){return d.call(v,t)?!0:d.call(C,t)?!1:w.test(t)?v[t]=!0:(C[t]=!0,!1)}function H(t,i,l,m){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return m?!1:l!==null?!l.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function P(t,i,l,m){if(i===null||typeof i>"u"||H(t,i,l,m))return!0;if(m)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function j(t,i,l,m,G,Z,pe){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=m,this.attributeNamespace=G,this.mustUseProperty=l,this.propertyName=t,this.type=i,this.sanitizeURL=Z,this.removeEmptyString=pe}var se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){se[t]=new j(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];se[i]=new j(i,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){se[t]=new j(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){se[t]=new j(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){se[t]=new j(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){se[t]=new j(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){se[t]=new j(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){se[t]=new j(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){se[t]=new j(t,5,!1,t.toLowerCase(),null,!1,!1)});var ce=/[\-:]([a-z])/g;function ne(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(ce,ne);se[i]=new j(i,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(ce,ne);se[i]=new j(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(ce,ne);se[i]=new j(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){se[t]=new j(t,1,!1,t.toLowerCase(),null,!1,!1)}),se.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){se[t]=new j(t,1,!1,t.toLowerCase(),null,!0,!0)});function E(t,i,l,m){var G=se.hasOwnProperty(i)?se[i]:null;(G!==null?G.type!==0:m||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(P(i,l,G,m)&&(l=null),m||G===null?k(i)&&(l===null?t.removeAttribute(i):t.setAttribute(i,""+l)):G.mustUseProperty?t[G.propertyName]=l===null?G.type===3?!1:"":l:(i=G.attributeName,m=G.attributeNamespace,l===null?t.removeAttribute(i):(G=G.type,l=G===3||G===4&&l===!0?"":""+l,m?t.setAttributeNS(m,i,l):t.setAttribute(i,l))))}var K=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),re=Symbol.for("react.portal"),ue=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),Oe=Symbol.for("react.provider"),be=Symbol.for("react.context"),Te=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),Ve=Symbol.for("react.suspense_list"),_e=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),ge=Symbol.iterator;function ae(t){return t===null||typeof t!="object"?null:(t=ge&&t[ge]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,Ee;function Ge(t){if(Ee===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Ee=i&&i[1]||""}return`
`+Ee+t}var tt=!1;function ve(t,i){if(!t||tt)return"";tt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(ot){var m=ot}Reflect.construct(t,[],i)}else{try{i.call()}catch(ot){m=ot}t.call(i.prototype)}else{try{throw Error()}catch(ot){m=ot}t()}}catch(ot){if(ot&&m&&typeof ot.stack=="string"){for(var G=ot.stack.split(`
`),Z=m.stack.split(`
`),pe=G.length-1,Fe=Z.length-1;1<=pe&&0<=Fe&&G[pe]!==Z[Fe];)Fe--;for(;1<=pe&&0<=Fe;pe--,Fe--)if(G[pe]!==Z[Fe]){if(pe!==1||Fe!==1)do if(pe--,Fe--,0>Fe||G[pe]!==Z[Fe]){var Xe=`
`+G[pe].replace(" at new "," at ");return t.displayName&&Xe.includes("<anonymous>")&&(Xe=Xe.replace("<anonymous>",t.displayName)),Xe}while(1<=pe&&0<=Fe);break}}}finally{tt=!1,Error.prepareStackTrace=l}return(t=t?t.displayName||t.name:"")?Ge(t):""}function ze(t){switch(t.tag){case 5:return Ge(t.type);case 16:return Ge("Lazy");case 13:return Ge("Suspense");case 19:return Ge("SuspenseList");case 0:case 2:case 15:return t=ve(t.type,!1),t;case 11:return t=ve(t.type.render,!1),t;case 1:return t=ve(t.type,!0),t;default:return""}}function rt(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ue:return"Fragment";case re:return"Portal";case he:return"Profiler";case q:return"StrictMode";case Ae:return"Suspense";case Ve:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case be:return(t.displayName||"Context")+".Consumer";case Oe:return(t._context.displayName||"Context")+".Provider";case Te:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _e:return i=t.displayName||null,i!==null?i:rt(t.type)||"Memo";case W:i=t._payload,t=t._init;try{return rt(t(i))}catch{}}return null}function at(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rt(i);case 8:return i===q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ke(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ft(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function vt(t){var i=ft(t)?"checked":"value",l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),m=""+t[i];if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var G=l.get,Z=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return G.call(this)},set:function(pe){m=""+pe,Z.call(this,pe)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return m},setValue:function(pe){m=""+pe},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function yt(t){t._valueTracker||(t._valueTracker=vt(t))}function Kt(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var l=i.getValue(),m="";return t&&(m=ft(t)?t.checked?"true":"false":t.value),t=m,t!==l?(i.setValue(t),!0):!1}function zt(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vr(t,i){var l=i.checked;return Ue({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??t._wrapperState.initialChecked})}function yr(t,i){var l=i.defaultValue==null?"":i.defaultValue,m=i.checked!=null?i.checked:i.defaultChecked;l=Ke(i.value!=null?i.value:l),t._wrapperState={initialChecked:m,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function jr(t,i){i=i.checked,i!=null&&E(t,"checked",i,!1)}function Lr(t,i){jr(t,i);var l=Ke(i.value),m=i.type;if(l!=null)m==="number"?(l===0&&t.value===""||t.value!=l)&&(t.value=""+l):t.value!==""+l&&(t.value=""+l);else if(m==="submit"||m==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?Rr(t,i.type,l):i.hasOwnProperty("defaultValue")&&Rr(t,i.type,Ke(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function Cr(t,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var m=i.type;if(!(m!=="submit"&&m!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,l||i===t.value||(t.value=i),t.defaultValue=i}l=t.name,l!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,l!==""&&(t.name=l)}function Rr(t,i,l){(i!=="number"||zt(t.ownerDocument)!==t)&&(l==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+l&&(t.defaultValue=""+l))}var Pr=Array.isArray;function Ei(t,i,l,m){if(t=t.options,i){i={};for(var G=0;G<l.length;G++)i["$"+l[G]]=!0;for(l=0;l<t.length;l++)G=i.hasOwnProperty("$"+t[l].value),t[l].selected!==G&&(t[l].selected=G),G&&m&&(t[l].defaultSelected=!0)}else{for(l=""+Ke(l),i=null,G=0;G<t.length;G++){if(t[G].value===l){t[G].selected=!0,m&&(t[G].defaultSelected=!0);return}i!==null||t[G].disabled||(i=t[G])}i!==null&&(i.selected=!0)}}function Br(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(s(91));return Ue({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wr(t,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(s(92));if(Pr(l)){if(1<l.length)throw Error(s(93));l=l[0]}i=l}i==null&&(i=""),l=i}t._wrapperState={initialValue:Ke(l)}}function Gi(t,i){var l=Ke(i.value),m=Ke(i.defaultValue);l!=null&&(l=""+l,l!==t.value&&(t.value=l),i.defaultValue==null&&t.defaultValue!==l&&(t.defaultValue=l)),m!=null&&(t.defaultValue=""+m)}function Di(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function tn(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ce(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?tn(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Le,We=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,m,G){MSApp.execUnsafeLocalFunction(function(){return t(i,l,m,G)})}:t})(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(Le=Le||document.createElement("div"),Le.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Le.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function St(t,i){if(i){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=i;return}}t.textContent=i}var mt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ht=["Webkit","ms","Moz","O"];Object.keys(mt).forEach(function(t){Ht.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),mt[i]=mt[t]})});function bt(t,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||mt.hasOwnProperty(t)&&mt[t]?(""+i).trim():i+"px"}function $t(t,i){t=t.style;for(var l in i)if(i.hasOwnProperty(l)){var m=l.indexOf("--")===0,G=bt(l,i[l],m);l==="float"&&(l="cssFloat"),m?t.setProperty(l,G):t[l]=G}}var Jt=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wt(t,i){if(i){if(Jt[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(s(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(s(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(s(61))}if(i.style!=null&&typeof i.style!="object")throw Error(s(62))}}function Ar(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xi=null;function zi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _i=null,Ti=null,Zr=null;function $r(t){if(t=Ws(t)){if(typeof _i!="function")throw Error(s(280));var i=t.stateNode;i&&(i=fa(i),_i(t.stateNode,t.type,i))}}function Gr(t){Ti?Zr?Zr.push(t):Zr=[t]:Ti=t}function fr(){if(Ti){var t=Ti,i=Zr;if(Zr=Ti=null,$r(t),i)for(t=0;t<i.length;t++)$r(i[t])}}function Ri(t,i){return t(i)}function Ii(){}var an=!1;function Fi(t,i,l){if(an)return t(i,l);an=!0;try{return Ri(t,i,l)}finally{an=!1,(Ti!==null||Zr!==null)&&(Ii(),fr())}}function qi(t,i){var l=t.stateNode;if(l===null)return null;var m=fa(l);if(m===null)return null;l=m[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(t=t.type,m=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!m;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var Ni=!1;if(p)try{var Ci={};Object.defineProperty(Ci,"passive",{get:function(){Ni=!0}}),window.addEventListener("test",Ci,Ci),window.removeEventListener("test",Ci,Ci)}catch{Ni=!1}function Yr(t,i,l,m,G,Z,pe,Fe,Xe){var ot=Array.prototype.slice.call(arguments,3);try{i.apply(l,ot)}catch(Pt){this.onError(Pt)}}var li=!1,Qi=null,Mi=!1,rn=null,fn={onError:function(t){li=!0,Qi=t}};function vn(t,i,l,m,G,Z,pe,Fe,Xe){li=!1,Qi=null,Yr.apply(fn,arguments)}function _r(t,i,l,m,G,Z,pe,Fe,Xe){if(vn.apply(this,arguments),li){if(li){var ot=Qi;li=!1,Qi=null}else throw Error(s(198));Mi||(Mi=!0,rn=ot)}}function ei(t){var i=t,l=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(l=i.return),t=i.return;while(t)}return i.tag===3?l:null}function si(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function on(t){if(ei(t)!==t)throw Error(s(188))}function Yt(t){var i=t.alternate;if(!i){if(i=ei(t),i===null)throw Error(s(188));return i!==t?null:t}for(var l=t,m=i;;){var G=l.return;if(G===null)break;var Z=G.alternate;if(Z===null){if(m=G.return,m!==null){l=m;continue}break}if(G.child===Z.child){for(Z=G.child;Z;){if(Z===l)return on(G),t;if(Z===m)return on(G),i;Z=Z.sibling}throw Error(s(188))}if(l.return!==m.return)l=G,m=Z;else{for(var pe=!1,Fe=G.child;Fe;){if(Fe===l){pe=!0,l=G,m=Z;break}if(Fe===m){pe=!0,m=G,l=Z;break}Fe=Fe.sibling}if(!pe){for(Fe=Z.child;Fe;){if(Fe===l){pe=!0,l=Z,m=G;break}if(Fe===m){pe=!0,m=Z,l=G;break}Fe=Fe.sibling}if(!pe)throw Error(s(189))}}if(l.alternate!==m)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?t:i}function T(t){return t=Yt(t),t!==null?me(t):null}function me(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=me(t);if(i!==null)return i;t=t.sibling}return null}var Pe=r.unstable_scheduleCallback,Qe=r.unstable_cancelCallback,$e=r.unstable_shouldYield,Mt=r.unstable_requestPaint,xt=r.unstable_now,At=r.unstable_getCurrentPriorityLevel,Vt=r.unstable_ImmediatePriority,Ut=r.unstable_UserBlockingPriority,Xt=r.unstable_NormalPriority,Tr=r.unstable_LowPriority,lr=r.unstable_IdlePriority,zr=null,Fr=null;function Jr(t){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(zr,t,void 0,(t.current.flags&128)===128)}catch{}}var kr=Math.clz32?Math.clz32:Vi,Xr=Math.log,Dr=Math.LN2;function Vi(t){return t>>>=0,t===0?32:31-(Xr(t)/Dr|0)|0}var ur=64,fi=4194304;function ye(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function n(t,i){var l=t.pendingLanes;if(l===0)return 0;var m=0,G=t.suspendedLanes,Z=t.pingedLanes,pe=l&268435455;if(pe!==0){var Fe=pe&~G;Fe!==0?m=ye(Fe):(Z&=pe,Z!==0&&(m=ye(Z)))}else pe=l&~G,pe!==0?m=ye(pe):Z!==0&&(m=ye(Z));if(m===0)return 0;if(i!==0&&i!==m&&(i&G)===0&&(G=m&-m,Z=i&-i,G>=Z||G===16&&(Z&4194240)!==0))return i;if((m&4)!==0&&(m|=l&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=m;0<i;)l=31-kr(i),G=1<<l,m|=t[l],i&=~G;return m}function a(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h(t,i){for(var l=t.suspendedLanes,m=t.pingedLanes,G=t.expirationTimes,Z=t.pendingLanes;0<Z;){var pe=31-kr(Z),Fe=1<<pe,Xe=G[pe];Xe===-1?((Fe&l)===0||(Fe&m)!==0)&&(G[pe]=a(Fe,i)):Xe<=i&&(t.expiredLanes|=Fe),Z&=~Fe}}function f(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function z(){var t=ur;return ur<<=1,(ur&4194240)===0&&(ur=64),t}function _(t){for(var i=[],l=0;31>l;l++)i.push(t);return i}function V(t,i,l){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-kr(i),t[i]=l}function B(t,i){var l=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var m=t.eventTimes;for(t=t.expirationTimes;0<l;){var G=31-kr(l),Z=1<<G;i[G]=0,m[G]=-1,t[G]=-1,l&=~Z}}function I(t,i){var l=t.entangledLanes|=i;for(t=t.entanglements;l;){var m=31-kr(l),G=1<<m;G&i|t[m]&i&&(t[m]|=i),l&=~G}}var U=0;function X(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var ie,J,Q,te,ee,le=!1,de=[],fe=null,Se=null,xe=null,Me=new Map,Be=new Map,Ne=[],je="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function De(t,i){switch(t){case"focusin":case"focusout":fe=null;break;case"dragenter":case"dragleave":Se=null;break;case"mouseover":case"mouseout":xe=null;break;case"pointerover":case"pointerout":Me.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Be.delete(i.pointerId)}}function Je(t,i,l,m,G,Z){return t===null||t.nativeEvent!==Z?(t={blockedOn:i,domEventName:l,eventSystemFlags:m,nativeEvent:Z,targetContainers:[G]},i!==null&&(i=Ws(i),i!==null&&J(i)),t):(t.eventSystemFlags|=m,i=t.targetContainers,G!==null&&i.indexOf(G)===-1&&i.push(G),t)}function ct(t,i,l,m,G){switch(i){case"focusin":return fe=Je(fe,t,i,l,m,G),!0;case"dragenter":return Se=Je(Se,t,i,l,m,G),!0;case"mouseover":return xe=Je(xe,t,i,l,m,G),!0;case"pointerover":var Z=G.pointerId;return Me.set(Z,Je(Me.get(Z)||null,t,i,l,m,G)),!0;case"gotpointercapture":return Z=G.pointerId,Be.set(Z,Je(Be.get(Z)||null,t,i,l,m,G)),!0}return!1}function dt(t){var i=ss(t.target);if(i!==null){var l=ei(i);if(l!==null){if(i=l.tag,i===13){if(i=si(l),i!==null){t.blockedOn=i,ee(t.priority,function(){Q(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lt(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var l=pt(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(l===null){l=t.nativeEvent;var m=new l.constructor(l.type,l);xi=m,l.target.dispatchEvent(m),xi=null}else return i=Ws(l),i!==null&&J(i),t.blockedOn=l,!1;i.shift()}return!0}function _t(t,i,l){lt(t)&&l.delete(i)}function Et(){le=!1,fe!==null&&lt(fe)&&(fe=null),Se!==null&&lt(Se)&&(Se=null),xe!==null&&lt(xe)&&(xe=null),Me.forEach(_t),Be.forEach(_t)}function ut(t,i){t.blockedOn===i&&(t.blockedOn=null,le||(le=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Et)))}function Ct(t){function i(G){return ut(G,t)}if(0<de.length){ut(de[0],t);for(var l=1;l<de.length;l++){var m=de[l];m.blockedOn===t&&(m.blockedOn=null)}}for(fe!==null&&ut(fe,t),Se!==null&&ut(Se,t),xe!==null&&ut(xe,t),Me.forEach(i),Be.forEach(i),l=0;l<Ne.length;l++)m=Ne[l],m.blockedOn===t&&(m.blockedOn=null);for(;0<Ne.length&&(l=Ne[0],l.blockedOn===null);)dt(l),l.blockedOn===null&&Ne.shift()}var Ye=K.ReactCurrentBatchConfig,ht=!0;function Ot(t,i,l,m){var G=U,Z=Ye.transition;Ye.transition=null;try{U=1,Dt(t,i,l,m)}finally{U=G,Ye.transition=Z}}function gt(t,i,l,m){var G=U,Z=Ye.transition;Ye.transition=null;try{U=4,Dt(t,i,l,m)}finally{U=G,Ye.transition=Z}}function Dt(t,i,l,m){if(ht){var G=pt(t,i,l,m);if(G===null)oo(t,i,m,Lt,l),De(t,m);else if(ct(G,t,i,l,m))m.stopPropagation();else if(De(t,m),i&4&&-1<je.indexOf(t)){for(;G!==null;){var Z=Ws(G);if(Z!==null&&ie(Z),Z=pt(t,i,l,m),Z===null&&oo(t,i,m,Lt,l),Z===G)break;G=Z}G!==null&&m.stopPropagation()}else oo(t,i,m,null,l)}}var Lt=null;function pt(t,i,l,m){if(Lt=null,t=zi(m),t=ss(t),t!==null)if(i=ei(t),i===null)t=null;else if(l=i.tag,l===13){if(t=si(i),t!==null)return t;t=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return Lt=t,null}function Bt(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(At()){case Vt:return 1;case Ut:return 4;case Xt:case Tr:return 16;case lr:return 536870912;default:return 16}default:return 16}}var tr=null,jt=null,wt=null;function cr(){if(wt)return wt;var t,i=jt,l=i.length,m,G="value"in tr?tr.value:tr.textContent,Z=G.length;for(t=0;t<l&&i[t]===G[t];t++);var pe=l-t;for(m=1;m<=pe&&i[l-m]===G[Z-m];m++);return wt=G.slice(t,1<m?1-m:void 0)}function qt(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ar(){return!0}function Qt(){return!1}function nr(t){function i(l,m,G,Z,pe){this._reactName=l,this._targetInst=G,this.type=m,this.nativeEvent=Z,this.target=pe,this.currentTarget=null;for(var Fe in t)t.hasOwnProperty(Fe)&&(l=t[Fe],this[Fe]=l?l(Z):Z[Fe]);return this.isDefaultPrevented=(Z.defaultPrevented!=null?Z.defaultPrevented:Z.returnValue===!1)?ar:Qt,this.isPropagationStopped=Qt,this}return Ue(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ar)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ar)},persist:function(){},isPersistent:ar}),i}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kr=nr(Mr),Nr=Ue({},Mr,{view:0,detail:0}),pi=nr(Nr),ri,Ir,ii,wi=Ue({},Nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:it,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ii&&(ii&&t.type==="mousemove"?(ri=t.screenX-ii.screenX,Ir=t.screenY-ii.screenY):Ir=ri=0,ii=t),ri)},movementY:function(t){return"movementY"in t?t.movementY:Ir}}),mi=nr(wi),bi=Ue({},wi,{dataTransfer:0}),Hi=nr(bi),Pi=Ue({},Nr,{relatedTarget:0}),Wi=nr(Pi),ti=Ue({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),ni=nr(ti),ai=Ue({},Mr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hi=nr(ai),g=Ue({},Mr,{data:0}),oe=nr(g),b={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ie={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ke={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Re(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=ke[t])?!!i[t]:!1}function it(){return Re}var He=Ue({},Nr,{key:function(t){if(t.key){var i=b[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=qt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ie[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:it,charCode:function(t){return t.type==="keypress"?qt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Tt=nr(He),qe=Ue({},wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nt=nr(qe),Sr=Ue({},Nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:it}),rr=nr(Sr),kt=Ue({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),gi=nr(kt),Vr=Ue({},wi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hr=nr(Vr),Hr=[9,13,27,32],xr=p&&"CompositionEvent"in window,Ft=null;p&&"documentMode"in document&&(Ft=document.documentMode);var gr=p&&"TextEvent"in window&&!Ft,Ur=p&&(!xr||Ft&&8<Ft&&11>=Ft),Gt=" ",Or=!1;function wr(t,i){switch(t){case"keyup":return Hr.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Er=!1;function $i(t,i){switch(t){case"compositionend":return dr(i);case"keypress":return i.which!==32?null:(Or=!0,Gt);case"textInput":return t=i.data,t===Gt&&Or?null:t;default:return null}}function rs(t,i){if(Er)return t==="compositionend"||!xr&&wr(t,i)?(t=cr(),wt=jt=tr=null,Er=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ur&&i.locale!=="ko"?null:i.data;default:return null}}var vs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function is(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!vs[t.type]:i==="textarea"}function ns(t,i,l,m){Gr(m),i=ca(i,"onChange"),0<i.length&&(l=new Kr("onChange","change",null,l,m),t.push({event:l,listeners:i}))}var Fs=null,Ns=null;function xc(t){Ll(t,0)}function aa(t){var i=bs(t);if(Kt(i))return t}function _c(t,i){if(t==="change")return i}var yl=!1;if(p){var Ya;if(p){var Ja="oninput"in document;if(!Ja){var xl=document.createElement("div");xl.setAttribute("oninput","return;"),Ja=typeof xl.oninput=="function"}Ya=Ja}else Ya=!1;yl=Ya&&(!document.documentMode||9<document.documentMode)}function _l(){Fs&&(Fs.detachEvent("onpropertychange",wl),Ns=Fs=null)}function wl(t){if(t.propertyName==="value"&&aa(Ns)){var i=[];ns(i,Ns,t,zi(t)),Fi(xc,i)}}function wc(t,i,l){t==="focusin"?(_l(),Fs=i,Ns=l,Fs.attachEvent("onpropertychange",wl)):t==="focusout"&&_l()}function bc(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return aa(Ns)}function Sc(t,i){if(t==="click")return aa(i)}function Ec(t,i){if(t==="input"||t==="change")return aa(i)}function Cc(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var En=typeof Object.is=="function"?Object.is:Cc;function Vs(t,i){if(En(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var l=Object.keys(t),m=Object.keys(i);if(l.length!==m.length)return!1;for(m=0;m<l.length;m++){var G=l[m];if(!d.call(i,G)||!En(t[G],i[G]))return!1}return!0}function bl(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sl(t,i){var l=bl(t);t=0;for(var m;l;){if(l.nodeType===3){if(m=t+l.textContent.length,t<=i&&m>=i)return{node:l,offset:i-t};t=m}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=bl(l)}}function El(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?El(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Cl(){for(var t=window,i=zt();i instanceof t.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)t=i.contentWindow;else break;i=zt(t.document)}return i}function eo(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function Ac(t){var i=Cl(),l=t.focusedElem,m=t.selectionRange;if(i!==l&&l&&l.ownerDocument&&El(l.ownerDocument.documentElement,l)){if(m!==null&&eo(l)){if(i=m.start,t=m.end,t===void 0&&(t=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(t,l.value.length);else if(t=(i=l.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var G=l.textContent.length,Z=Math.min(m.start,G);m=m.end===void 0?Z:Math.min(m.end,G),!t.extend&&Z>m&&(G=m,m=Z,Z=G),G=Sl(l,Z);var pe=Sl(l,m);G&&pe&&(t.rangeCount!==1||t.anchorNode!==G.node||t.anchorOffset!==G.offset||t.focusNode!==pe.node||t.focusOffset!==pe.offset)&&(i=i.createRange(),i.setStart(G.node,G.offset),t.removeAllRanges(),Z>m?(t.addRange(i),t.extend(pe.node,pe.offset)):(i.setEnd(pe.node,pe.offset),t.addRange(i)))}}for(i=[],t=l;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)t=i[l],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Tc=p&&"documentMode"in document&&11>=document.documentMode,ys=null,to=null,js=null,ro=!1;function Al(t,i,l){var m=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ro||ys==null||ys!==zt(m)||(m=ys,"selectionStart"in m&&eo(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),js&&Vs(js,m)||(js=m,m=ca(to,"onSelect"),0<m.length&&(i=new Kr("onSelect","select",null,i,l),t.push({event:i,listeners:m}),i.target=ys)))}function oa(t,i){var l={};return l[t.toLowerCase()]=i.toLowerCase(),l["Webkit"+t]="webkit"+i,l["Moz"+t]="moz"+i,l}var xs={animationend:oa("Animation","AnimationEnd"),animationiteration:oa("Animation","AnimationIteration"),animationstart:oa("Animation","AnimationStart"),transitionend:oa("Transition","TransitionEnd")},io={},Tl={};p&&(Tl=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function la(t){if(io[t])return io[t];if(!xs[t])return t;var i=xs[t],l;for(l in i)if(i.hasOwnProperty(l)&&l in Tl)return io[t]=i[l];return t}var Rl=la("animationend"),Ml=la("animationiteration"),Pl=la("animationstart"),kl=la("transitionend"),Dl=new Map,Il="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Un(t,i){Dl.set(t,i),x(i,[t])}for(var no=0;no<Il.length;no++){var so=Il[no],Rc=so.toLowerCase(),Mc=so[0].toUpperCase()+so.slice(1);Un(Rc,"on"+Mc)}Un(Rl,"onAnimationEnd"),Un(Ml,"onAnimationIteration"),Un(Pl,"onAnimationStart"),Un("dblclick","onDoubleClick"),Un("focusin","onFocus"),Un("focusout","onBlur"),Un(kl,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bs));function Ol(t,i,l){var m=t.type||"unknown-event";t.currentTarget=l,_r(m,i,void 0,t),t.currentTarget=null}function Ll(t,i){i=(i&4)!==0;for(var l=0;l<t.length;l++){var m=t[l],G=m.event;m=m.listeners;e:{var Z=void 0;if(i)for(var pe=m.length-1;0<=pe;pe--){var Fe=m[pe],Xe=Fe.instance,ot=Fe.currentTarget;if(Fe=Fe.listener,Xe!==Z&&G.isPropagationStopped())break e;Ol(G,Fe,ot),Z=Xe}else for(pe=0;pe<m.length;pe++){if(Fe=m[pe],Xe=Fe.instance,ot=Fe.currentTarget,Fe=Fe.listener,Xe!==Z&&G.isPropagationStopped())break e;Ol(G,Fe,ot),Z=Xe}}}if(Mi)throw t=rn,Mi=!1,rn=null,t}function ui(t,i){var l=i[po];l===void 0&&(l=i[po]=new Set);var m=t+"__bubble";l.has(m)||(zl(i,t,2,!1),l.add(m))}function ao(t,i,l){var m=0;i&&(m|=4),zl(l,t,m,i)}var ua="_reactListening"+Math.random().toString(36).slice(2);function Us(t){if(!t[ua]){t[ua]=!0,o.forEach(function(l){l!=="selectionchange"&&(Pc.has(l)||ao(l,!1,t),ao(l,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[ua]||(i[ua]=!0,ao("selectionchange",!1,i))}}function zl(t,i,l,m){switch(Bt(i)){case 1:var G=Ot;break;case 4:G=gt;break;default:G=Dt}l=G.bind(null,i,l,t),G=void 0,!Ni||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(G=!0),m?G!==void 0?t.addEventListener(i,l,{capture:!0,passive:G}):t.addEventListener(i,l,!0):G!==void 0?t.addEventListener(i,l,{passive:G}):t.addEventListener(i,l,!1)}function oo(t,i,l,m,G){var Z=m;if((i&1)===0&&(i&2)===0&&m!==null)e:for(;;){if(m===null)return;var pe=m.tag;if(pe===3||pe===4){var Fe=m.stateNode.containerInfo;if(Fe===G||Fe.nodeType===8&&Fe.parentNode===G)break;if(pe===4)for(pe=m.return;pe!==null;){var Xe=pe.tag;if((Xe===3||Xe===4)&&(Xe=pe.stateNode.containerInfo,Xe===G||Xe.nodeType===8&&Xe.parentNode===G))return;pe=pe.return}for(;Fe!==null;){if(pe=ss(Fe),pe===null)return;if(Xe=pe.tag,Xe===5||Xe===6){m=Z=pe;continue e}Fe=Fe.parentNode}}m=m.return}Fi(function(){var ot=Z,Pt=zi(l),It=[];e:{var Rt=Dl.get(t);if(Rt!==void 0){var Zt=Kr,ir=t;switch(t){case"keypress":if(qt(l)===0)break e;case"keydown":case"keyup":Zt=Tt;break;case"focusin":ir="focus",Zt=Wi;break;case"focusout":ir="blur",Zt=Wi;break;case"beforeblur":case"afterblur":Zt=Wi;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Zt=mi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Zt=Hi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Zt=rr;break;case Rl:case Ml:case Pl:Zt=ni;break;case kl:Zt=gi;break;case"scroll":Zt=pi;break;case"wheel":Zt=hr;break;case"copy":case"cut":case"paste":Zt=hi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Zt=nt}var sr=(i&4)!==0,Ai=!sr&&t==="scroll",et=sr?Rt!==null?Rt+"Capture":null:Rt;sr=[];for(var Ze=ot,st;Ze!==null;){st=Ze;var Nt=st.stateNode;if(st.tag===5&&Nt!==null&&(st=Nt,et!==null&&(Nt=qi(Ze,et),Nt!=null&&sr.push(Gs(Ze,Nt,st)))),Ai)break;Ze=Ze.return}0<sr.length&&(Rt=new Zt(Rt,ir,null,l,Pt),It.push({event:Rt,listeners:sr}))}}if((i&7)===0){e:{if(Rt=t==="mouseover"||t==="pointerover",Zt=t==="mouseout"||t==="pointerout",Rt&&l!==xi&&(ir=l.relatedTarget||l.fromElement)&&(ss(ir)||ir[On]))break e;if((Zt||Rt)&&(Rt=Pt.window===Pt?Pt:(Rt=Pt.ownerDocument)?Rt.defaultView||Rt.parentWindow:window,Zt?(ir=l.relatedTarget||l.toElement,Zt=ot,ir=ir?ss(ir):null,ir!==null&&(Ai=ei(ir),ir!==Ai||ir.tag!==5&&ir.tag!==6)&&(ir=null)):(Zt=null,ir=ot),Zt!==ir)){if(sr=mi,Nt="onMouseLeave",et="onMouseEnter",Ze="mouse",(t==="pointerout"||t==="pointerover")&&(sr=nt,Nt="onPointerLeave",et="onPointerEnter",Ze="pointer"),Ai=Zt==null?Rt:bs(Zt),st=ir==null?Rt:bs(ir),Rt=new sr(Nt,Ze+"leave",Zt,l,Pt),Rt.target=Ai,Rt.relatedTarget=st,Nt=null,ss(Pt)===ot&&(sr=new sr(et,Ze+"enter",ir,l,Pt),sr.target=st,sr.relatedTarget=Ai,Nt=sr),Ai=Nt,Zt&&ir)t:{for(sr=Zt,et=ir,Ze=0,st=sr;st;st=_s(st))Ze++;for(st=0,Nt=et;Nt;Nt=_s(Nt))st++;for(;0<Ze-st;)sr=_s(sr),Ze--;for(;0<st-Ze;)et=_s(et),st--;for(;Ze--;){if(sr===et||et!==null&&sr===et.alternate)break t;sr=_s(sr),et=_s(et)}sr=null}else sr=null;Zt!==null&&Fl(It,Rt,Zt,sr,!1),ir!==null&&Ai!==null&&Fl(It,Ai,ir,sr,!0)}}e:{if(Rt=ot?bs(ot):window,Zt=Rt.nodeName&&Rt.nodeName.toLowerCase(),Zt==="select"||Zt==="input"&&Rt.type==="file")var or=_c;else if(is(Rt))if(yl)or=Ec;else{or=bc;var pr=wc}else(Zt=Rt.nodeName)&&Zt.toLowerCase()==="input"&&(Rt.type==="checkbox"||Rt.type==="radio")&&(or=Sc);if(or&&(or=or(t,ot))){ns(It,or,l,Pt);break e}pr&&pr(t,Rt,ot),t==="focusout"&&(pr=Rt._wrapperState)&&pr.controlled&&Rt.type==="number"&&Rr(Rt,"number",Rt.value)}switch(pr=ot?bs(ot):window,t){case"focusin":(is(pr)||pr.contentEditable==="true")&&(ys=pr,to=ot,js=null);break;case"focusout":js=to=ys=null;break;case"mousedown":ro=!0;break;case"contextmenu":case"mouseup":case"dragend":ro=!1,Al(It,l,Pt);break;case"selectionchange":if(Tc)break;case"keydown":case"keyup":Al(It,l,Pt)}var mr;if(xr)e:{switch(t){case"compositionstart":var br="onCompositionStart";break e;case"compositionend":br="onCompositionEnd";break e;case"compositionupdate":br="onCompositionUpdate";break e}br=void 0}else Er?wr(t,l)&&(br="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(br="onCompositionStart");br&&(Ur&&l.locale!=="ko"&&(Er||br!=="onCompositionStart"?br==="onCompositionEnd"&&Er&&(mr=cr()):(tr=Pt,jt="value"in tr?tr.value:tr.textContent,Er=!0)),pr=ca(ot,br),0<pr.length&&(br=new oe(br,t,null,l,Pt),It.push({event:br,listeners:pr}),mr?br.data=mr:(mr=dr(l),mr!==null&&(br.data=mr)))),(mr=gr?$i(t,l):rs(t,l))&&(ot=ca(ot,"onBeforeInput"),0<ot.length&&(Pt=new oe("onBeforeInput","beforeinput",null,l,Pt),It.push({event:Pt,listeners:ot}),Pt.data=mr))}Ll(It,i)})}function Gs(t,i,l){return{instance:t,listener:i,currentTarget:l}}function ca(t,i){for(var l=i+"Capture",m=[];t!==null;){var G=t,Z=G.stateNode;G.tag===5&&Z!==null&&(G=Z,Z=qi(t,l),Z!=null&&m.unshift(Gs(t,Z,G)),Z=qi(t,i),Z!=null&&m.push(Gs(t,Z,G))),t=t.return}return m}function _s(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Fl(t,i,l,m,G){for(var Z=i._reactName,pe=[];l!==null&&l!==m;){var Fe=l,Xe=Fe.alternate,ot=Fe.stateNode;if(Xe!==null&&Xe===m)break;Fe.tag===5&&ot!==null&&(Fe=ot,G?(Xe=qi(l,Z),Xe!=null&&pe.unshift(Gs(l,Xe,Fe))):G||(Xe=qi(l,Z),Xe!=null&&pe.push(Gs(l,Xe,Fe)))),l=l.return}pe.length!==0&&t.push({event:i,listeners:pe})}var kc=/\r\n?/g,Dc=/\u0000|\uFFFD/g;function Nl(t){return(typeof t=="string"?t:""+t).replace(kc,`
`).replace(Dc,"")}function ha(t,i,l){if(i=Nl(i),Nl(t)!==i&&l)throw Error(s(425))}function da(){}var lo=null,uo=null;function co(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ho=typeof setTimeout=="function"?setTimeout:void 0,Ic=typeof clearTimeout=="function"?clearTimeout:void 0,Vl=typeof Promise=="function"?Promise:void 0,Oc=typeof queueMicrotask=="function"?queueMicrotask:typeof Vl<"u"?function(t){return Vl.resolve(null).then(t).catch(Lc)}:ho;function Lc(t){setTimeout(function(){throw t})}function fo(t,i){var l=i,m=0;do{var G=l.nextSibling;if(t.removeChild(l),G&&G.nodeType===8)if(l=G.data,l==="/$"){if(m===0){t.removeChild(G),Ct(i);return}m--}else l!=="$"&&l!=="$?"&&l!=="$!"||m++;l=G}while(l);Ct(i)}function Gn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function jl(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return t;i--}else l==="/$"&&i++}t=t.previousSibling}return null}var ws=Math.random().toString(36).slice(2),Pn="__reactFiber$"+ws,Hs="__reactProps$"+ws,On="__reactContainer$"+ws,po="__reactEvents$"+ws,zc="__reactListeners$"+ws,Fc="__reactHandles$"+ws;function ss(t){var i=t[Pn];if(i)return i;for(var l=t.parentNode;l;){if(i=l[On]||l[Pn]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(t=jl(t);t!==null;){if(l=t[Pn])return l;t=jl(t)}return i}t=l,l=t.parentNode}return null}function Ws(t){return t=t[Pn]||t[On],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function bs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(s(33))}function fa(t){return t[Hs]||null}var mo=[],Ss=-1;function Hn(t){return{current:t}}function ci(t){0>Ss||(t.current=mo[Ss],mo[Ss]=null,Ss--)}function oi(t,i){Ss++,mo[Ss]=t.current,t.current=i}var Wn={},Zi=Hn(Wn),ln=Hn(!1),as=Wn;function Es(t,i){var l=t.type.contextTypes;if(!l)return Wn;var m=t.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===i)return m.__reactInternalMemoizedMaskedChildContext;var G={},Z;for(Z in l)G[Z]=i[Z];return m&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=G),G}function un(t){return t=t.childContextTypes,t!=null}function pa(){ci(ln),ci(Zi)}function Bl(t,i,l){if(Zi.current!==Wn)throw Error(s(168));oi(Zi,i),oi(ln,l)}function Ul(t,i,l){var m=t.stateNode;if(i=i.childContextTypes,typeof m.getChildContext!="function")return l;m=m.getChildContext();for(var G in m)if(!(G in i))throw Error(s(108,at(t)||"Unknown",G));return Ue({},l,m)}function ma(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wn,as=Zi.current,oi(Zi,t),oi(ln,ln.current),!0}function Gl(t,i,l){var m=t.stateNode;if(!m)throw Error(s(169));l?(t=Ul(t,i,as),m.__reactInternalMemoizedMergedChildContext=t,ci(ln),ci(Zi),oi(Zi,t)):ci(ln),oi(ln,l)}var Ln=null,ga=!1,go=!1;function Hl(t){Ln===null?Ln=[t]:Ln.push(t)}function Nc(t){ga=!0,Hl(t)}function $n(){if(!go&&Ln!==null){go=!0;var t=0,i=U;try{var l=Ln;for(U=1;t<l.length;t++){var m=l[t];do m=m(!0);while(m!==null)}Ln=null,ga=!1}catch(G){throw Ln!==null&&(Ln=Ln.slice(t+1)),Pe(Vt,$n),G}finally{U=i,go=!1}}return null}var Cs=[],As=0,va=null,ya=0,yn=[],xn=0,os=null,zn=1,Fn="";function ls(t,i){Cs[As++]=ya,Cs[As++]=va,va=t,ya=i}function Wl(t,i,l){yn[xn++]=zn,yn[xn++]=Fn,yn[xn++]=os,os=t;var m=zn;t=Fn;var G=32-kr(m)-1;m&=~(1<<G),l+=1;var Z=32-kr(i)+G;if(30<Z){var pe=G-G%5;Z=(m&(1<<pe)-1).toString(32),m>>=pe,G-=pe,zn=1<<32-kr(i)+G|l<<G|m,Fn=Z+t}else zn=1<<Z|l<<G|m,Fn=t}function vo(t){t.return!==null&&(ls(t,1),Wl(t,1,0))}function yo(t){for(;t===va;)va=Cs[--As],Cs[As]=null,ya=Cs[--As],Cs[As]=null;for(;t===os;)os=yn[--xn],yn[xn]=null,Fn=yn[--xn],yn[xn]=null,zn=yn[--xn],yn[xn]=null}var pn=null,mn=null,di=!1,Cn=null;function $l(t,i){var l=Sn(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=t,i=t.deletions,i===null?(t.deletions=[l],t.flags|=16):i.push(l)}function Xl(t,i){switch(t.tag){case 5:var l=t.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,pn=t,mn=Gn(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,pn=t,mn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=os!==null?{id:zn,overflow:Fn}:null,t.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=Sn(18,null,null,0),l.stateNode=i,l.return=t,t.child=l,pn=t,mn=null,!0):!1;default:return!1}}function xo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _o(t){if(di){var i=mn;if(i){var l=i;if(!Xl(t,i)){if(xo(t))throw Error(s(418));i=Gn(l.nextSibling);var m=pn;i&&Xl(t,i)?$l(m,l):(t.flags=t.flags&-4097|2,di=!1,pn=t)}}else{if(xo(t))throw Error(s(418));t.flags=t.flags&-4097|2,di=!1,pn=t}}}function Kl(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pn=t}function xa(t){if(t!==pn)return!1;if(!di)return Kl(t),di=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!co(t.type,t.memoizedProps)),i&&(i=mn)){if(xo(t))throw ql(),Error(s(418));for(;i;)$l(t,i),i=Gn(i.nextSibling)}if(Kl(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"){if(i===0){mn=Gn(t.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}t=t.nextSibling}mn=null}}else mn=pn?Gn(t.stateNode.nextSibling):null;return!0}function ql(){for(var t=mn;t;)t=Gn(t.nextSibling)}function Ts(){mn=pn=null,di=!1}function wo(t){Cn===null?Cn=[t]:Cn.push(t)}var Vc=K.ReactCurrentBatchConfig;function $s(t,i,l){if(t=l.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(s(309));var m=l.stateNode}if(!m)throw Error(s(147,t));var G=m,Z=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===Z?i.ref:(i=function(pe){var Fe=G.refs;pe===null?delete Fe[Z]:Fe[Z]=pe},i._stringRef=Z,i)}if(typeof t!="string")throw Error(s(284));if(!l._owner)throw Error(s(290,t))}return t}function _a(t,i){throw t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function Ql(t){var i=t._init;return i(t._payload)}function Zl(t){function i(et,Ze){if(t){var st=et.deletions;st===null?(et.deletions=[Ze],et.flags|=16):st.push(Ze)}}function l(et,Ze){if(!t)return null;for(;Ze!==null;)i(et,Ze),Ze=Ze.sibling;return null}function m(et,Ze){for(et=new Map;Ze!==null;)Ze.key!==null?et.set(Ze.key,Ze):et.set(Ze.index,Ze),Ze=Ze.sibling;return et}function G(et,Ze){return et=es(et,Ze),et.index=0,et.sibling=null,et}function Z(et,Ze,st){return et.index=st,t?(st=et.alternate,st!==null?(st=st.index,st<Ze?(et.flags|=2,Ze):st):(et.flags|=2,Ze)):(et.flags|=1048576,Ze)}function pe(et){return t&&et.alternate===null&&(et.flags|=2),et}function Fe(et,Ze,st,Nt){return Ze===null||Ze.tag!==6?(Ze=dl(st,et.mode,Nt),Ze.return=et,Ze):(Ze=G(Ze,st),Ze.return=et,Ze)}function Xe(et,Ze,st,Nt){var or=st.type;return or===ue?Pt(et,Ze,st.props.children,Nt,st.key):Ze!==null&&(Ze.elementType===or||typeof or=="object"&&or!==null&&or.$$typeof===W&&Ql(or)===Ze.type)?(Nt=G(Ze,st.props),Nt.ref=$s(et,Ze,st),Nt.return=et,Nt):(Nt=Ha(st.type,st.key,st.props,null,et.mode,Nt),Nt.ref=$s(et,Ze,st),Nt.return=et,Nt)}function ot(et,Ze,st,Nt){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==st.containerInfo||Ze.stateNode.implementation!==st.implementation?(Ze=fl(st,et.mode,Nt),Ze.return=et,Ze):(Ze=G(Ze,st.children||[]),Ze.return=et,Ze)}function Pt(et,Ze,st,Nt,or){return Ze===null||Ze.tag!==7?(Ze=gs(st,et.mode,Nt,or),Ze.return=et,Ze):(Ze=G(Ze,st),Ze.return=et,Ze)}function It(et,Ze,st){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return Ze=dl(""+Ze,et.mode,st),Ze.return=et,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case Y:return st=Ha(Ze.type,Ze.key,Ze.props,null,et.mode,st),st.ref=$s(et,null,Ze),st.return=et,st;case re:return Ze=fl(Ze,et.mode,st),Ze.return=et,Ze;case W:var Nt=Ze._init;return It(et,Nt(Ze._payload),st)}if(Pr(Ze)||ae(Ze))return Ze=gs(Ze,et.mode,st,null),Ze.return=et,Ze;_a(et,Ze)}return null}function Rt(et,Ze,st,Nt){var or=Ze!==null?Ze.key:null;if(typeof st=="string"&&st!==""||typeof st=="number")return or!==null?null:Fe(et,Ze,""+st,Nt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case Y:return st.key===or?Xe(et,Ze,st,Nt):null;case re:return st.key===or?ot(et,Ze,st,Nt):null;case W:return or=st._init,Rt(et,Ze,or(st._payload),Nt)}if(Pr(st)||ae(st))return or!==null?null:Pt(et,Ze,st,Nt,null);_a(et,st)}return null}function Zt(et,Ze,st,Nt,or){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number")return et=et.get(st)||null,Fe(Ze,et,""+Nt,or);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case Y:return et=et.get(Nt.key===null?st:Nt.key)||null,Xe(Ze,et,Nt,or);case re:return et=et.get(Nt.key===null?st:Nt.key)||null,ot(Ze,et,Nt,or);case W:var pr=Nt._init;return Zt(et,Ze,st,pr(Nt._payload),or)}if(Pr(Nt)||ae(Nt))return et=et.get(st)||null,Pt(Ze,et,Nt,or,null);_a(Ze,Nt)}return null}function ir(et,Ze,st,Nt){for(var or=null,pr=null,mr=Ze,br=Ze=0,Ui=null;mr!==null&&br<st.length;br++){mr.index>br?(Ui=mr,mr=null):Ui=mr.sibling;var Qr=Rt(et,mr,st[br],Nt);if(Qr===null){mr===null&&(mr=Ui);break}t&&mr&&Qr.alternate===null&&i(et,mr),Ze=Z(Qr,Ze,br),pr===null?or=Qr:pr.sibling=Qr,pr=Qr,mr=Ui}if(br===st.length)return l(et,mr),di&&ls(et,br),or;if(mr===null){for(;br<st.length;br++)mr=It(et,st[br],Nt),mr!==null&&(Ze=Z(mr,Ze,br),pr===null?or=mr:pr.sibling=mr,pr=mr);return di&&ls(et,br),or}for(mr=m(et,mr);br<st.length;br++)Ui=Zt(mr,et,br,st[br],Nt),Ui!==null&&(t&&Ui.alternate!==null&&mr.delete(Ui.key===null?br:Ui.key),Ze=Z(Ui,Ze,br),pr===null?or=Ui:pr.sibling=Ui,pr=Ui);return t&&mr.forEach(function(ts){return i(et,ts)}),di&&ls(et,br),or}function sr(et,Ze,st,Nt){var or=ae(st);if(typeof or!="function")throw Error(s(150));if(st=or.call(st),st==null)throw Error(s(151));for(var pr=or=null,mr=Ze,br=Ze=0,Ui=null,Qr=st.next();mr!==null&&!Qr.done;br++,Qr=st.next()){mr.index>br?(Ui=mr,mr=null):Ui=mr.sibling;var ts=Rt(et,mr,Qr.value,Nt);if(ts===null){mr===null&&(mr=Ui);break}t&&mr&&ts.alternate===null&&i(et,mr),Ze=Z(ts,Ze,br),pr===null?or=ts:pr.sibling=ts,pr=ts,mr=Ui}if(Qr.done)return l(et,mr),di&&ls(et,br),or;if(mr===null){for(;!Qr.done;br++,Qr=st.next())Qr=It(et,Qr.value,Nt),Qr!==null&&(Ze=Z(Qr,Ze,br),pr===null?or=Qr:pr.sibling=Qr,pr=Qr);return di&&ls(et,br),or}for(mr=m(et,mr);!Qr.done;br++,Qr=st.next())Qr=Zt(mr,et,br,Qr.value,Nt),Qr!==null&&(t&&Qr.alternate!==null&&mr.delete(Qr.key===null?br:Qr.key),Ze=Z(Qr,Ze,br),pr===null?or=Qr:pr.sibling=Qr,pr=Qr);return t&&mr.forEach(function(xh){return i(et,xh)}),di&&ls(et,br),or}function Ai(et,Ze,st,Nt){if(typeof st=="object"&&st!==null&&st.type===ue&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case Y:e:{for(var or=st.key,pr=Ze;pr!==null;){if(pr.key===or){if(or=st.type,or===ue){if(pr.tag===7){l(et,pr.sibling),Ze=G(pr,st.props.children),Ze.return=et,et=Ze;break e}}else if(pr.elementType===or||typeof or=="object"&&or!==null&&or.$$typeof===W&&Ql(or)===pr.type){l(et,pr.sibling),Ze=G(pr,st.props),Ze.ref=$s(et,pr,st),Ze.return=et,et=Ze;break e}l(et,pr);break}else i(et,pr);pr=pr.sibling}st.type===ue?(Ze=gs(st.props.children,et.mode,Nt,st.key),Ze.return=et,et=Ze):(Nt=Ha(st.type,st.key,st.props,null,et.mode,Nt),Nt.ref=$s(et,Ze,st),Nt.return=et,et=Nt)}return pe(et);case re:e:{for(pr=st.key;Ze!==null;){if(Ze.key===pr)if(Ze.tag===4&&Ze.stateNode.containerInfo===st.containerInfo&&Ze.stateNode.implementation===st.implementation){l(et,Ze.sibling),Ze=G(Ze,st.children||[]),Ze.return=et,et=Ze;break e}else{l(et,Ze);break}else i(et,Ze);Ze=Ze.sibling}Ze=fl(st,et.mode,Nt),Ze.return=et,et=Ze}return pe(et);case W:return pr=st._init,Ai(et,Ze,pr(st._payload),Nt)}if(Pr(st))return ir(et,Ze,st,Nt);if(ae(st))return sr(et,Ze,st,Nt);_a(et,st)}return typeof st=="string"&&st!==""||typeof st=="number"?(st=""+st,Ze!==null&&Ze.tag===6?(l(et,Ze.sibling),Ze=G(Ze,st),Ze.return=et,et=Ze):(l(et,Ze),Ze=dl(st,et.mode,Nt),Ze.return=et,et=Ze),pe(et)):l(et,Ze)}return Ai}var Rs=Zl(!0),Yl=Zl(!1),wa=Hn(null),ba=null,Ms=null,bo=null;function So(){bo=Ms=ba=null}function Eo(t){var i=wa.current;ci(wa),t._currentValue=i}function Co(t,i,l){for(;t!==null;){var m=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),t===l)break;t=t.return}}function Ps(t,i){ba=t,bo=Ms=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&i)!==0&&(cn=!0),t.firstContext=null)}function _n(t){var i=t._currentValue;if(bo!==t)if(t={context:t,memoizedValue:i,next:null},Ms===null){if(ba===null)throw Error(s(308));Ms=t,ba.dependencies={lanes:0,firstContext:t}}else Ms=Ms.next=t;return i}var us=null;function Ao(t){us===null?us=[t]:us.push(t)}function Jl(t,i,l,m){var G=i.interleaved;return G===null?(l.next=l,Ao(i)):(l.next=G.next,G.next=l),i.interleaved=l,Nn(t,m)}function Nn(t,i){t.lanes|=i;var l=t.alternate;for(l!==null&&(l.lanes|=i),l=t,t=t.return;t!==null;)t.childLanes|=i,l=t.alternate,l!==null&&(l.childLanes|=i),l=t,t=t.return;return l.tag===3?l.stateNode:null}var Xn=!1;function To(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eu(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vn(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function Kn(t,i,l){var m=t.updateQueue;if(m===null)return null;if(m=m.shared,(qr&2)!==0){var G=m.pending;return G===null?i.next=i:(i.next=G.next,G.next=i),m.pending=i,Nn(t,l)}return G=m.interleaved,G===null?(i.next=i,Ao(m)):(i.next=G.next,G.next=i),m.interleaved=i,Nn(t,l)}function Sa(t,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var m=i.lanes;m&=t.pendingLanes,l|=m,i.lanes=l,I(t,l)}}function tu(t,i){var l=t.updateQueue,m=t.alternate;if(m!==null&&(m=m.updateQueue,l===m)){var G=null,Z=null;if(l=l.firstBaseUpdate,l!==null){do{var pe={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};Z===null?G=Z=pe:Z=Z.next=pe,l=l.next}while(l!==null);Z===null?G=Z=i:Z=Z.next=i}else G=Z=i;l={baseState:m.baseState,firstBaseUpdate:G,lastBaseUpdate:Z,shared:m.shared,effects:m.effects},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=i:t.next=i,l.lastBaseUpdate=i}function Ea(t,i,l,m){var G=t.updateQueue;Xn=!1;var Z=G.firstBaseUpdate,pe=G.lastBaseUpdate,Fe=G.shared.pending;if(Fe!==null){G.shared.pending=null;var Xe=Fe,ot=Xe.next;Xe.next=null,pe===null?Z=ot:pe.next=ot,pe=Xe;var Pt=t.alternate;Pt!==null&&(Pt=Pt.updateQueue,Fe=Pt.lastBaseUpdate,Fe!==pe&&(Fe===null?Pt.firstBaseUpdate=ot:Fe.next=ot,Pt.lastBaseUpdate=Xe))}if(Z!==null){var It=G.baseState;pe=0,Pt=ot=Xe=null,Fe=Z;do{var Rt=Fe.lane,Zt=Fe.eventTime;if((m&Rt)===Rt){Pt!==null&&(Pt=Pt.next={eventTime:Zt,lane:0,tag:Fe.tag,payload:Fe.payload,callback:Fe.callback,next:null});e:{var ir=t,sr=Fe;switch(Rt=i,Zt=l,sr.tag){case 1:if(ir=sr.payload,typeof ir=="function"){It=ir.call(Zt,It,Rt);break e}It=ir;break e;case 3:ir.flags=ir.flags&-65537|128;case 0:if(ir=sr.payload,Rt=typeof ir=="function"?ir.call(Zt,It,Rt):ir,Rt==null)break e;It=Ue({},It,Rt);break e;case 2:Xn=!0}}Fe.callback!==null&&Fe.lane!==0&&(t.flags|=64,Rt=G.effects,Rt===null?G.effects=[Fe]:Rt.push(Fe))}else Zt={eventTime:Zt,lane:Rt,tag:Fe.tag,payload:Fe.payload,callback:Fe.callback,next:null},Pt===null?(ot=Pt=Zt,Xe=It):Pt=Pt.next=Zt,pe|=Rt;if(Fe=Fe.next,Fe===null){if(Fe=G.shared.pending,Fe===null)break;Rt=Fe,Fe=Rt.next,Rt.next=null,G.lastBaseUpdate=Rt,G.shared.pending=null}}while(!0);if(Pt===null&&(Xe=It),G.baseState=Xe,G.firstBaseUpdate=ot,G.lastBaseUpdate=Pt,i=G.shared.interleaved,i!==null){G=i;do pe|=G.lane,G=G.next;while(G!==i)}else Z===null&&(G.shared.lanes=0);ds|=pe,t.lanes=pe,t.memoizedState=It}}function ru(t,i,l){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var m=t[i],G=m.callback;if(G!==null){if(m.callback=null,m=l,typeof G!="function")throw Error(s(191,G));G.call(m)}}}var Xs={},kn=Hn(Xs),Ks=Hn(Xs),qs=Hn(Xs);function cs(t){if(t===Xs)throw Error(s(174));return t}function Ro(t,i){switch(oi(qs,i),oi(Ks,t),oi(kn,Xs),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Ce(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=Ce(i,t)}ci(kn),oi(kn,i)}function ks(){ci(kn),ci(Ks),ci(qs)}function iu(t){cs(qs.current);var i=cs(kn.current),l=Ce(i,t.type);i!==l&&(oi(Ks,t),oi(kn,l))}function Mo(t){Ks.current===t&&(ci(kn),ci(Ks))}var vi=Hn(0);function Ca(t){for(var i=t;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Po=[];function ko(){for(var t=0;t<Po.length;t++)Po[t]._workInProgressVersionPrimary=null;Po.length=0}var Aa=K.ReactCurrentDispatcher,Do=K.ReactCurrentBatchConfig,hs=0,yi=null,Oi=null,ji=null,Ta=!1,Qs=!1,Zs=0,jc=0;function Yi(){throw Error(s(321))}function Io(t,i){if(i===null)return!1;for(var l=0;l<i.length&&l<t.length;l++)if(!En(t[l],i[l]))return!1;return!0}function Oo(t,i,l,m,G,Z){if(hs=Z,yi=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Aa.current=t===null||t.memoizedState===null?Hc:Wc,t=l(m,G),Qs){Z=0;do{if(Qs=!1,Zs=0,25<=Z)throw Error(s(301));Z+=1,ji=Oi=null,i.updateQueue=null,Aa.current=$c,t=l(m,G)}while(Qs)}if(Aa.current=Pa,i=Oi!==null&&Oi.next!==null,hs=0,ji=Oi=yi=null,Ta=!1,i)throw Error(s(300));return t}function Lo(){var t=Zs!==0;return Zs=0,t}function Dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ji===null?yi.memoizedState=ji=t:ji=ji.next=t,ji}function wn(){if(Oi===null){var t=yi.alternate;t=t!==null?t.memoizedState:null}else t=Oi.next;var i=ji===null?yi.memoizedState:ji.next;if(i!==null)ji=i,Oi=t;else{if(t===null)throw Error(s(310));Oi=t,t={memoizedState:Oi.memoizedState,baseState:Oi.baseState,baseQueue:Oi.baseQueue,queue:Oi.queue,next:null},ji===null?yi.memoizedState=ji=t:ji=ji.next=t}return ji}function Ys(t,i){return typeof i=="function"?i(t):i}function zo(t){var i=wn(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=t;var m=Oi,G=m.baseQueue,Z=l.pending;if(Z!==null){if(G!==null){var pe=G.next;G.next=Z.next,Z.next=pe}m.baseQueue=G=Z,l.pending=null}if(G!==null){Z=G.next,m=m.baseState;var Fe=pe=null,Xe=null,ot=Z;do{var Pt=ot.lane;if((hs&Pt)===Pt)Xe!==null&&(Xe=Xe.next={lane:0,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null}),m=ot.hasEagerState?ot.eagerState:t(m,ot.action);else{var It={lane:Pt,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null};Xe===null?(Fe=Xe=It,pe=m):Xe=Xe.next=It,yi.lanes|=Pt,ds|=Pt}ot=ot.next}while(ot!==null&&ot!==Z);Xe===null?pe=m:Xe.next=Fe,En(m,i.memoizedState)||(cn=!0),i.memoizedState=m,i.baseState=pe,i.baseQueue=Xe,l.lastRenderedState=m}if(t=l.interleaved,t!==null){G=t;do Z=G.lane,yi.lanes|=Z,ds|=Z,G=G.next;while(G!==t)}else G===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function Fo(t){var i=wn(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=t;var m=l.dispatch,G=l.pending,Z=i.memoizedState;if(G!==null){l.pending=null;var pe=G=G.next;do Z=t(Z,pe.action),pe=pe.next;while(pe!==G);En(Z,i.memoizedState)||(cn=!0),i.memoizedState=Z,i.baseQueue===null&&(i.baseState=Z),l.lastRenderedState=Z}return[Z,m]}function nu(){}function su(t,i){var l=yi,m=wn(),G=i(),Z=!En(m.memoizedState,G);if(Z&&(m.memoizedState=G,cn=!0),m=m.queue,No(lu.bind(null,l,m,t),[t]),m.getSnapshot!==i||Z||ji!==null&&ji.memoizedState.tag&1){if(l.flags|=2048,Js(9,ou.bind(null,l,m,G,i),void 0,null),Bi===null)throw Error(s(349));(hs&30)!==0||au(l,i,G)}return G}function au(t,i,l){t.flags|=16384,t={getSnapshot:i,value:l},i=yi.updateQueue,i===null?(i={lastEffect:null,stores:null},yi.updateQueue=i,i.stores=[t]):(l=i.stores,l===null?i.stores=[t]:l.push(t))}function ou(t,i,l,m){i.value=l,i.getSnapshot=m,uu(i)&&cu(t)}function lu(t,i,l){return l(function(){uu(i)&&cu(t)})}function uu(t){var i=t.getSnapshot;t=t.value;try{var l=i();return!En(t,l)}catch{return!0}}function cu(t){var i=Nn(t,1);i!==null&&Mn(i,t,1,-1)}function hu(t){var i=Dn();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:t},i.queue=t,t=t.dispatch=Gc.bind(null,yi,t),[i.memoizedState,t]}function Js(t,i,l,m){return t={tag:t,create:i,destroy:l,deps:m,next:null},i=yi.updateQueue,i===null?(i={lastEffect:null,stores:null},yi.updateQueue=i,i.lastEffect=t.next=t):(l=i.lastEffect,l===null?i.lastEffect=t.next=t:(m=l.next,l.next=t,t.next=m,i.lastEffect=t)),t}function du(){return wn().memoizedState}function Ra(t,i,l,m){var G=Dn();yi.flags|=t,G.memoizedState=Js(1|i,l,void 0,m===void 0?null:m)}function Ma(t,i,l,m){var G=wn();m=m===void 0?null:m;var Z=void 0;if(Oi!==null){var pe=Oi.memoizedState;if(Z=pe.destroy,m!==null&&Io(m,pe.deps)){G.memoizedState=Js(i,l,Z,m);return}}yi.flags|=t,G.memoizedState=Js(1|i,l,Z,m)}function fu(t,i){return Ra(8390656,8,t,i)}function No(t,i){return Ma(2048,8,t,i)}function pu(t,i){return Ma(4,2,t,i)}function mu(t,i){return Ma(4,4,t,i)}function gu(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function vu(t,i,l){return l=l!=null?l.concat([t]):null,Ma(4,4,gu.bind(null,i,t),l)}function Vo(){}function yu(t,i){var l=wn();i=i===void 0?null:i;var m=l.memoizedState;return m!==null&&i!==null&&Io(i,m[1])?m[0]:(l.memoizedState=[t,i],t)}function xu(t,i){var l=wn();i=i===void 0?null:i;var m=l.memoizedState;return m!==null&&i!==null&&Io(i,m[1])?m[0]:(t=t(),l.memoizedState=[t,i],t)}function _u(t,i,l){return(hs&21)===0?(t.baseState&&(t.baseState=!1,cn=!0),t.memoizedState=l):(En(l,i)||(l=z(),yi.lanes|=l,ds|=l,t.baseState=!0),i)}function Bc(t,i){var l=U;U=l!==0&&4>l?l:4,t(!0);var m=Do.transition;Do.transition={};try{t(!1),i()}finally{U=l,Do.transition=m}}function wu(){return wn().memoizedState}function Uc(t,i,l){var m=Yn(t);if(l={lane:m,action:l,hasEagerState:!1,eagerState:null,next:null},bu(t))Su(i,l);else if(l=Jl(t,i,l,m),l!==null){var G=sn();Mn(l,t,m,G),Eu(l,i,m)}}function Gc(t,i,l){var m=Yn(t),G={lane:m,action:l,hasEagerState:!1,eagerState:null,next:null};if(bu(t))Su(i,G);else{var Z=t.alternate;if(t.lanes===0&&(Z===null||Z.lanes===0)&&(Z=i.lastRenderedReducer,Z!==null))try{var pe=i.lastRenderedState,Fe=Z(pe,l);if(G.hasEagerState=!0,G.eagerState=Fe,En(Fe,pe)){var Xe=i.interleaved;Xe===null?(G.next=G,Ao(i)):(G.next=Xe.next,Xe.next=G),i.interleaved=G;return}}catch{}l=Jl(t,i,G,m),l!==null&&(G=sn(),Mn(l,t,m,G),Eu(l,i,m))}}function bu(t){var i=t.alternate;return t===yi||i!==null&&i===yi}function Su(t,i){Qs=Ta=!0;var l=t.pending;l===null?i.next=i:(i.next=l.next,l.next=i),t.pending=i}function Eu(t,i,l){if((l&4194240)!==0){var m=i.lanes;m&=t.pendingLanes,l|=m,i.lanes=l,I(t,l)}}var Pa={readContext:_n,useCallback:Yi,useContext:Yi,useEffect:Yi,useImperativeHandle:Yi,useInsertionEffect:Yi,useLayoutEffect:Yi,useMemo:Yi,useReducer:Yi,useRef:Yi,useState:Yi,useDebugValue:Yi,useDeferredValue:Yi,useTransition:Yi,useMutableSource:Yi,useSyncExternalStore:Yi,useId:Yi,unstable_isNewReconciler:!1},Hc={readContext:_n,useCallback:function(t,i){return Dn().memoizedState=[t,i===void 0?null:i],t},useContext:_n,useEffect:fu,useImperativeHandle:function(t,i,l){return l=l!=null?l.concat([t]):null,Ra(4194308,4,gu.bind(null,i,t),l)},useLayoutEffect:function(t,i){return Ra(4194308,4,t,i)},useInsertionEffect:function(t,i){return Ra(4,2,t,i)},useMemo:function(t,i){var l=Dn();return i=i===void 0?null:i,t=t(),l.memoizedState=[t,i],t},useReducer:function(t,i,l){var m=Dn();return i=l!==void 0?l(i):i,m.memoizedState=m.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},m.queue=t,t=t.dispatch=Uc.bind(null,yi,t),[m.memoizedState,t]},useRef:function(t){var i=Dn();return t={current:t},i.memoizedState=t},useState:hu,useDebugValue:Vo,useDeferredValue:function(t){return Dn().memoizedState=t},useTransition:function(){var t=hu(!1),i=t[0];return t=Bc.bind(null,t[1]),Dn().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,l){var m=yi,G=Dn();if(di){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),Bi===null)throw Error(s(349));(hs&30)!==0||au(m,i,l)}G.memoizedState=l;var Z={value:l,getSnapshot:i};return G.queue=Z,fu(lu.bind(null,m,Z,t),[t]),m.flags|=2048,Js(9,ou.bind(null,m,Z,l,i),void 0,null),l},useId:function(){var t=Dn(),i=Bi.identifierPrefix;if(di){var l=Fn,m=zn;l=(m&~(1<<32-kr(m)-1)).toString(32)+l,i=":"+i+"R"+l,l=Zs++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=jc++,i=":"+i+"r"+l.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},Wc={readContext:_n,useCallback:yu,useContext:_n,useEffect:No,useImperativeHandle:vu,useInsertionEffect:pu,useLayoutEffect:mu,useMemo:xu,useReducer:zo,useRef:du,useState:function(){return zo(Ys)},useDebugValue:Vo,useDeferredValue:function(t){var i=wn();return _u(i,Oi.memoizedState,t)},useTransition:function(){var t=zo(Ys)[0],i=wn().memoizedState;return[t,i]},useMutableSource:nu,useSyncExternalStore:su,useId:wu,unstable_isNewReconciler:!1},$c={readContext:_n,useCallback:yu,useContext:_n,useEffect:No,useImperativeHandle:vu,useInsertionEffect:pu,useLayoutEffect:mu,useMemo:xu,useReducer:Fo,useRef:du,useState:function(){return Fo(Ys)},useDebugValue:Vo,useDeferredValue:function(t){var i=wn();return Oi===null?i.memoizedState=t:_u(i,Oi.memoizedState,t)},useTransition:function(){var t=Fo(Ys)[0],i=wn().memoizedState;return[t,i]},useMutableSource:nu,useSyncExternalStore:su,useId:wu,unstable_isNewReconciler:!1};function An(t,i){if(t&&t.defaultProps){i=Ue({},i),t=t.defaultProps;for(var l in t)i[l]===void 0&&(i[l]=t[l]);return i}return i}function jo(t,i,l,m){i=t.memoizedState,l=l(m,i),l=l==null?i:Ue({},i,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var ka={isMounted:function(t){return(t=t._reactInternals)?ei(t)===t:!1},enqueueSetState:function(t,i,l){t=t._reactInternals;var m=sn(),G=Yn(t),Z=Vn(m,G);Z.payload=i,l!=null&&(Z.callback=l),i=Kn(t,Z,G),i!==null&&(Mn(i,t,G,m),Sa(i,t,G))},enqueueReplaceState:function(t,i,l){t=t._reactInternals;var m=sn(),G=Yn(t),Z=Vn(m,G);Z.tag=1,Z.payload=i,l!=null&&(Z.callback=l),i=Kn(t,Z,G),i!==null&&(Mn(i,t,G,m),Sa(i,t,G))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var l=sn(),m=Yn(t),G=Vn(l,m);G.tag=2,i!=null&&(G.callback=i),i=Kn(t,G,m),i!==null&&(Mn(i,t,m,l),Sa(i,t,m))}};function Cu(t,i,l,m,G,Z,pe){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(m,Z,pe):i.prototype&&i.prototype.isPureReactComponent?!Vs(l,m)||!Vs(G,Z):!0}function Au(t,i,l){var m=!1,G=Wn,Z=i.contextType;return typeof Z=="object"&&Z!==null?Z=_n(Z):(G=un(i)?as:Zi.current,m=i.contextTypes,Z=(m=m!=null)?Es(t,G):Wn),i=new i(l,Z),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=ka,t.stateNode=i,i._reactInternals=t,m&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=G,t.__reactInternalMemoizedMaskedChildContext=Z),i}function Tu(t,i,l,m){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,m),i.state!==t&&ka.enqueueReplaceState(i,i.state,null)}function Bo(t,i,l,m){var G=t.stateNode;G.props=l,G.state=t.memoizedState,G.refs={},To(t);var Z=i.contextType;typeof Z=="object"&&Z!==null?G.context=_n(Z):(Z=un(i)?as:Zi.current,G.context=Es(t,Z)),G.state=t.memoizedState,Z=i.getDerivedStateFromProps,typeof Z=="function"&&(jo(t,i,Z,l),G.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(i=G.state,typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount(),i!==G.state&&ka.enqueueReplaceState(G,G.state,null),Ea(t,l,G,m),G.state=t.memoizedState),typeof G.componentDidMount=="function"&&(t.flags|=4194308)}function Ds(t,i){try{var l="",m=i;do l+=ze(m),m=m.return;while(m);var G=l}catch(Z){G=`
Error generating stack: `+Z.message+`
`+Z.stack}return{value:t,source:i,stack:G,digest:null}}function Uo(t,i,l){return{value:t,source:null,stack:l??null,digest:i??null}}function Go(t,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var Xc=typeof WeakMap=="function"?WeakMap:Map;function Ru(t,i,l){l=Vn(-1,l),l.tag=3,l.payload={element:null};var m=i.value;return l.callback=function(){Na||(Na=!0,nl=m),Go(t,i)},l}function Mu(t,i,l){l=Vn(-1,l),l.tag=3;var m=t.type.getDerivedStateFromError;if(typeof m=="function"){var G=i.value;l.payload=function(){return m(G)},l.callback=function(){Go(t,i)}}var Z=t.stateNode;return Z!==null&&typeof Z.componentDidCatch=="function"&&(l.callback=function(){Go(t,i),typeof m!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var pe=i.stack;this.componentDidCatch(i.value,{componentStack:pe!==null?pe:""})}),l}function Pu(t,i,l){var m=t.pingCache;if(m===null){m=t.pingCache=new Xc;var G=new Set;m.set(i,G)}else G=m.get(i),G===void 0&&(G=new Set,m.set(i,G));G.has(l)||(G.add(l),t=oh.bind(null,t,i,l),i.then(t,t))}function ku(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function Du(t,i,l,m,G){return(t.mode&1)===0?(t===i?t.flags|=65536:(t.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Vn(-1,1),i.tag=2,Kn(l,i,1))),l.lanes|=1),t):(t.flags|=65536,t.lanes=G,t)}var Kc=K.ReactCurrentOwner,cn=!1;function nn(t,i,l,m){i.child=t===null?Yl(i,null,l,m):Rs(i,t.child,l,m)}function Iu(t,i,l,m,G){l=l.render;var Z=i.ref;return Ps(i,G),m=Oo(t,i,l,m,Z,G),l=Lo(),t!==null&&!cn?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~G,jn(t,i,G)):(di&&l&&vo(i),i.flags|=1,nn(t,i,m,G),i.child)}function Ou(t,i,l,m,G){if(t===null){var Z=l.type;return typeof Z=="function"&&!hl(Z)&&Z.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=Z,Lu(t,i,Z,m,G)):(t=Ha(l.type,null,m,i,i.mode,G),t.ref=i.ref,t.return=i,i.child=t)}if(Z=t.child,(t.lanes&G)===0){var pe=Z.memoizedProps;if(l=l.compare,l=l!==null?l:Vs,l(pe,m)&&t.ref===i.ref)return jn(t,i,G)}return i.flags|=1,t=es(Z,m),t.ref=i.ref,t.return=i,i.child=t}function Lu(t,i,l,m,G){if(t!==null){var Z=t.memoizedProps;if(Vs(Z,m)&&t.ref===i.ref)if(cn=!1,i.pendingProps=m=Z,(t.lanes&G)!==0)(t.flags&131072)!==0&&(cn=!0);else return i.lanes=t.lanes,jn(t,i,G)}return Ho(t,i,l,m,G)}function zu(t,i,l){var m=i.pendingProps,G=m.children,Z=t!==null?t.memoizedState:null;if(m.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},oi(Os,gn),gn|=l;else{if((l&1073741824)===0)return t=Z!==null?Z.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,oi(Os,gn),gn|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=Z!==null?Z.baseLanes:l,oi(Os,gn),gn|=m}else Z!==null?(m=Z.baseLanes|l,i.memoizedState=null):m=l,oi(Os,gn),gn|=m;return nn(t,i,G,l),i.child}function Fu(t,i){var l=i.ref;(t===null&&l!==null||t!==null&&t.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function Ho(t,i,l,m,G){var Z=un(l)?as:Zi.current;return Z=Es(i,Z),Ps(i,G),l=Oo(t,i,l,m,Z,G),m=Lo(),t!==null&&!cn?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~G,jn(t,i,G)):(di&&m&&vo(i),i.flags|=1,nn(t,i,l,G),i.child)}function Nu(t,i,l,m,G){if(un(l)){var Z=!0;ma(i)}else Z=!1;if(Ps(i,G),i.stateNode===null)Ia(t,i),Au(i,l,m),Bo(i,l,m,G),m=!0;else if(t===null){var pe=i.stateNode,Fe=i.memoizedProps;pe.props=Fe;var Xe=pe.context,ot=l.contextType;typeof ot=="object"&&ot!==null?ot=_n(ot):(ot=un(l)?as:Zi.current,ot=Es(i,ot));var Pt=l.getDerivedStateFromProps,It=typeof Pt=="function"||typeof pe.getSnapshotBeforeUpdate=="function";It||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Fe!==m||Xe!==ot)&&Tu(i,pe,m,ot),Xn=!1;var Rt=i.memoizedState;pe.state=Rt,Ea(i,m,pe,G),Xe=i.memoizedState,Fe!==m||Rt!==Xe||ln.current||Xn?(typeof Pt=="function"&&(jo(i,l,Pt,m),Xe=i.memoizedState),(Fe=Xn||Cu(i,l,Fe,m,Rt,Xe,ot))?(It||typeof pe.UNSAFE_componentWillMount!="function"&&typeof pe.componentWillMount!="function"||(typeof pe.componentWillMount=="function"&&pe.componentWillMount(),typeof pe.UNSAFE_componentWillMount=="function"&&pe.UNSAFE_componentWillMount()),typeof pe.componentDidMount=="function"&&(i.flags|=4194308)):(typeof pe.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=Xe),pe.props=m,pe.state=Xe,pe.context=ot,m=Fe):(typeof pe.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{pe=i.stateNode,eu(t,i),Fe=i.memoizedProps,ot=i.type===i.elementType?Fe:An(i.type,Fe),pe.props=ot,It=i.pendingProps,Rt=pe.context,Xe=l.contextType,typeof Xe=="object"&&Xe!==null?Xe=_n(Xe):(Xe=un(l)?as:Zi.current,Xe=Es(i,Xe));var Zt=l.getDerivedStateFromProps;(Pt=typeof Zt=="function"||typeof pe.getSnapshotBeforeUpdate=="function")||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Fe!==It||Rt!==Xe)&&Tu(i,pe,m,Xe),Xn=!1,Rt=i.memoizedState,pe.state=Rt,Ea(i,m,pe,G);var ir=i.memoizedState;Fe!==It||Rt!==ir||ln.current||Xn?(typeof Zt=="function"&&(jo(i,l,Zt,m),ir=i.memoizedState),(ot=Xn||Cu(i,l,ot,m,Rt,ir,Xe)||!1)?(Pt||typeof pe.UNSAFE_componentWillUpdate!="function"&&typeof pe.componentWillUpdate!="function"||(typeof pe.componentWillUpdate=="function"&&pe.componentWillUpdate(m,ir,Xe),typeof pe.UNSAFE_componentWillUpdate=="function"&&pe.UNSAFE_componentWillUpdate(m,ir,Xe)),typeof pe.componentDidUpdate=="function"&&(i.flags|=4),typeof pe.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof pe.componentDidUpdate!="function"||Fe===t.memoizedProps&&Rt===t.memoizedState||(i.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Fe===t.memoizedProps&&Rt===t.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=ir),pe.props=m,pe.state=ir,pe.context=Xe,m=ot):(typeof pe.componentDidUpdate!="function"||Fe===t.memoizedProps&&Rt===t.memoizedState||(i.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Fe===t.memoizedProps&&Rt===t.memoizedState||(i.flags|=1024),m=!1)}return Wo(t,i,l,m,Z,G)}function Wo(t,i,l,m,G,Z){Fu(t,i);var pe=(i.flags&128)!==0;if(!m&&!pe)return G&&Gl(i,l,!1),jn(t,i,Z);m=i.stateNode,Kc.current=i;var Fe=pe&&typeof l.getDerivedStateFromError!="function"?null:m.render();return i.flags|=1,t!==null&&pe?(i.child=Rs(i,t.child,null,Z),i.child=Rs(i,null,Fe,Z)):nn(t,i,Fe,Z),i.memoizedState=m.state,G&&Gl(i,l,!0),i.child}function Vu(t){var i=t.stateNode;i.pendingContext?Bl(t,i.pendingContext,i.pendingContext!==i.context):i.context&&Bl(t,i.context,!1),Ro(t,i.containerInfo)}function ju(t,i,l,m,G){return Ts(),wo(G),i.flags|=256,nn(t,i,l,m),i.child}var $o={dehydrated:null,treeContext:null,retryLane:0};function Xo(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bu(t,i,l){var m=i.pendingProps,G=vi.current,Z=!1,pe=(i.flags&128)!==0,Fe;if((Fe=pe)||(Fe=t!==null&&t.memoizedState===null?!1:(G&2)!==0),Fe?(Z=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(G|=1),oi(vi,G&1),t===null)return _o(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((i.mode&1)===0?i.lanes=1:t.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(pe=m.children,t=m.fallback,Z?(m=i.mode,Z=i.child,pe={mode:"hidden",children:pe},(m&1)===0&&Z!==null?(Z.childLanes=0,Z.pendingProps=pe):Z=Wa(pe,m,0,null),t=gs(t,m,l,null),Z.return=i,t.return=i,Z.sibling=t,i.child=Z,i.child.memoizedState=Xo(l),i.memoizedState=$o,t):Ko(i,pe));if(G=t.memoizedState,G!==null&&(Fe=G.dehydrated,Fe!==null))return qc(t,i,pe,m,Fe,G,l);if(Z){Z=m.fallback,pe=i.mode,G=t.child,Fe=G.sibling;var Xe={mode:"hidden",children:m.children};return(pe&1)===0&&i.child!==G?(m=i.child,m.childLanes=0,m.pendingProps=Xe,i.deletions=null):(m=es(G,Xe),m.subtreeFlags=G.subtreeFlags&14680064),Fe!==null?Z=es(Fe,Z):(Z=gs(Z,pe,l,null),Z.flags|=2),Z.return=i,m.return=i,m.sibling=Z,i.child=m,m=Z,Z=i.child,pe=t.child.memoizedState,pe=pe===null?Xo(l):{baseLanes:pe.baseLanes|l,cachePool:null,transitions:pe.transitions},Z.memoizedState=pe,Z.childLanes=t.childLanes&~l,i.memoizedState=$o,m}return Z=t.child,t=Z.sibling,m=es(Z,{mode:"visible",children:m.children}),(i.mode&1)===0&&(m.lanes=l),m.return=i,m.sibling=null,t!==null&&(l=i.deletions,l===null?(i.deletions=[t],i.flags|=16):l.push(t)),i.child=m,i.memoizedState=null,m}function Ko(t,i){return i=Wa({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function Da(t,i,l,m){return m!==null&&wo(m),Rs(i,t.child,null,l),t=Ko(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function qc(t,i,l,m,G,Z,pe){if(l)return i.flags&256?(i.flags&=-257,m=Uo(Error(s(422))),Da(t,i,pe,m)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(Z=m.fallback,G=i.mode,m=Wa({mode:"visible",children:m.children},G,0,null),Z=gs(Z,G,pe,null),Z.flags|=2,m.return=i,Z.return=i,m.sibling=Z,i.child=m,(i.mode&1)!==0&&Rs(i,t.child,null,pe),i.child.memoizedState=Xo(pe),i.memoizedState=$o,Z);if((i.mode&1)===0)return Da(t,i,pe,null);if(G.data==="$!"){if(m=G.nextSibling&&G.nextSibling.dataset,m)var Fe=m.dgst;return m=Fe,Z=Error(s(419)),m=Uo(Z,m,void 0),Da(t,i,pe,m)}if(Fe=(pe&t.childLanes)!==0,cn||Fe){if(m=Bi,m!==null){switch(pe&-pe){case 4:G=2;break;case 16:G=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:G=32;break;case 536870912:G=268435456;break;default:G=0}G=(G&(m.suspendedLanes|pe))!==0?0:G,G!==0&&G!==Z.retryLane&&(Z.retryLane=G,Nn(t,G),Mn(m,t,G,-1))}return cl(),m=Uo(Error(s(421))),Da(t,i,pe,m)}return G.data==="$?"?(i.flags|=128,i.child=t.child,i=lh.bind(null,t),G._reactRetry=i,null):(t=Z.treeContext,mn=Gn(G.nextSibling),pn=i,di=!0,Cn=null,t!==null&&(yn[xn++]=zn,yn[xn++]=Fn,yn[xn++]=os,zn=t.id,Fn=t.overflow,os=i),i=Ko(i,m.children),i.flags|=4096,i)}function Uu(t,i,l){t.lanes|=i;var m=t.alternate;m!==null&&(m.lanes|=i),Co(t.return,i,l)}function qo(t,i,l,m,G){var Z=t.memoizedState;Z===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:l,tailMode:G}:(Z.isBackwards=i,Z.rendering=null,Z.renderingStartTime=0,Z.last=m,Z.tail=l,Z.tailMode=G)}function Gu(t,i,l){var m=i.pendingProps,G=m.revealOrder,Z=m.tail;if(nn(t,i,m.children,l),m=vi.current,(m&2)!==0)m=m&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Uu(t,l,i);else if(t.tag===19)Uu(t,l,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}m&=1}if(oi(vi,m),(i.mode&1)===0)i.memoizedState=null;else switch(G){case"forwards":for(l=i.child,G=null;l!==null;)t=l.alternate,t!==null&&Ca(t)===null&&(G=l),l=l.sibling;l=G,l===null?(G=i.child,i.child=null):(G=l.sibling,l.sibling=null),qo(i,!1,G,l,Z);break;case"backwards":for(l=null,G=i.child,i.child=null;G!==null;){if(t=G.alternate,t!==null&&Ca(t)===null){i.child=G;break}t=G.sibling,G.sibling=l,l=G,G=t}qo(i,!0,l,null,Z);break;case"together":qo(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ia(t,i){(i.mode&1)===0&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function jn(t,i,l){if(t!==null&&(i.dependencies=t.dependencies),ds|=i.lanes,(l&i.childLanes)===0)return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,l=es(t,t.pendingProps),i.child=l,l.return=i;t.sibling!==null;)t=t.sibling,l=l.sibling=es(t,t.pendingProps),l.return=i;l.sibling=null}return i.child}function Qc(t,i,l){switch(i.tag){case 3:Vu(i),Ts();break;case 5:iu(i);break;case 1:un(i.type)&&ma(i);break;case 4:Ro(i,i.stateNode.containerInfo);break;case 10:var m=i.type._context,G=i.memoizedProps.value;oi(wa,m._currentValue),m._currentValue=G;break;case 13:if(m=i.memoizedState,m!==null)return m.dehydrated!==null?(oi(vi,vi.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?Bu(t,i,l):(oi(vi,vi.current&1),t=jn(t,i,l),t!==null?t.sibling:null);oi(vi,vi.current&1);break;case 19:if(m=(l&i.childLanes)!==0,(t.flags&128)!==0){if(m)return Gu(t,i,l);i.flags|=128}if(G=i.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),oi(vi,vi.current),m)break;return null;case 22:case 23:return i.lanes=0,zu(t,i,l)}return jn(t,i,l)}var Hu,Qo,Wu,$u;Hu=function(t,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)t.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Qo=function(){},Wu=function(t,i,l,m){var G=t.memoizedProps;if(G!==m){t=i.stateNode,cs(kn.current);var Z=null;switch(l){case"input":G=vr(t,G),m=vr(t,m),Z=[];break;case"select":G=Ue({},G,{value:void 0}),m=Ue({},m,{value:void 0}),Z=[];break;case"textarea":G=Br(t,G),m=Br(t,m),Z=[];break;default:typeof G.onClick!="function"&&typeof m.onClick=="function"&&(t.onclick=da)}Wt(l,m);var pe;l=null;for(ot in G)if(!m.hasOwnProperty(ot)&&G.hasOwnProperty(ot)&&G[ot]!=null)if(ot==="style"){var Fe=G[ot];for(pe in Fe)Fe.hasOwnProperty(pe)&&(l||(l={}),l[pe]="")}else ot!=="dangerouslySetInnerHTML"&&ot!=="children"&&ot!=="suppressContentEditableWarning"&&ot!=="suppressHydrationWarning"&&ot!=="autoFocus"&&(c.hasOwnProperty(ot)?Z||(Z=[]):(Z=Z||[]).push(ot,null));for(ot in m){var Xe=m[ot];if(Fe=G?.[ot],m.hasOwnProperty(ot)&&Xe!==Fe&&(Xe!=null||Fe!=null))if(ot==="style")if(Fe){for(pe in Fe)!Fe.hasOwnProperty(pe)||Xe&&Xe.hasOwnProperty(pe)||(l||(l={}),l[pe]="");for(pe in Xe)Xe.hasOwnProperty(pe)&&Fe[pe]!==Xe[pe]&&(l||(l={}),l[pe]=Xe[pe])}else l||(Z||(Z=[]),Z.push(ot,l)),l=Xe;else ot==="dangerouslySetInnerHTML"?(Xe=Xe?Xe.__html:void 0,Fe=Fe?Fe.__html:void 0,Xe!=null&&Fe!==Xe&&(Z=Z||[]).push(ot,Xe)):ot==="children"?typeof Xe!="string"&&typeof Xe!="number"||(Z=Z||[]).push(ot,""+Xe):ot!=="suppressContentEditableWarning"&&ot!=="suppressHydrationWarning"&&(c.hasOwnProperty(ot)?(Xe!=null&&ot==="onScroll"&&ui("scroll",t),Z||Fe===Xe||(Z=[])):(Z=Z||[]).push(ot,Xe))}l&&(Z=Z||[]).push("style",l);var ot=Z;(i.updateQueue=ot)&&(i.flags|=4)}},$u=function(t,i,l,m){l!==m&&(i.flags|=4)};function ea(t,i){if(!di)switch(t.tailMode){case"hidden":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var m=null;l!==null;)l.alternate!==null&&(m=l),l=l.sibling;m===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:m.sibling=null}}function Ji(t){var i=t.alternate!==null&&t.alternate.child===t.child,l=0,m=0;if(i)for(var G=t.child;G!==null;)l|=G.lanes|G.childLanes,m|=G.subtreeFlags&14680064,m|=G.flags&14680064,G.return=t,G=G.sibling;else for(G=t.child;G!==null;)l|=G.lanes|G.childLanes,m|=G.subtreeFlags,m|=G.flags,G.return=t,G=G.sibling;return t.subtreeFlags|=m,t.childLanes=l,i}function Zc(t,i,l){var m=i.pendingProps;switch(yo(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ji(i),null;case 1:return un(i.type)&&pa(),Ji(i),null;case 3:return m=i.stateNode,ks(),ci(ln),ci(Zi),ko(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(t===null||t.child===null)&&(xa(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Cn!==null&&(ol(Cn),Cn=null))),Qo(t,i),Ji(i),null;case 5:Mo(i);var G=cs(qs.current);if(l=i.type,t!==null&&i.stateNode!=null)Wu(t,i,l,m,G),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!m){if(i.stateNode===null)throw Error(s(166));return Ji(i),null}if(t=cs(kn.current),xa(i)){m=i.stateNode,l=i.type;var Z=i.memoizedProps;switch(m[Pn]=i,m[Hs]=Z,t=(i.mode&1)!==0,l){case"dialog":ui("cancel",m),ui("close",m);break;case"iframe":case"object":case"embed":ui("load",m);break;case"video":case"audio":for(G=0;G<Bs.length;G++)ui(Bs[G],m);break;case"source":ui("error",m);break;case"img":case"image":case"link":ui("error",m),ui("load",m);break;case"details":ui("toggle",m);break;case"input":yr(m,Z),ui("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!Z.multiple},ui("invalid",m);break;case"textarea":Wr(m,Z),ui("invalid",m)}Wt(l,Z),G=null;for(var pe in Z)if(Z.hasOwnProperty(pe)){var Fe=Z[pe];pe==="children"?typeof Fe=="string"?m.textContent!==Fe&&(Z.suppressHydrationWarning!==!0&&ha(m.textContent,Fe,t),G=["children",Fe]):typeof Fe=="number"&&m.textContent!==""+Fe&&(Z.suppressHydrationWarning!==!0&&ha(m.textContent,Fe,t),G=["children",""+Fe]):c.hasOwnProperty(pe)&&Fe!=null&&pe==="onScroll"&&ui("scroll",m)}switch(l){case"input":yt(m),Cr(m,Z,!0);break;case"textarea":yt(m),Di(m);break;case"select":case"option":break;default:typeof Z.onClick=="function"&&(m.onclick=da)}m=G,i.updateQueue=m,m!==null&&(i.flags|=4)}else{pe=G.nodeType===9?G:G.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=tn(l)),t==="http://www.w3.org/1999/xhtml"?l==="script"?(t=pe.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof m.is=="string"?t=pe.createElement(l,{is:m.is}):(t=pe.createElement(l),l==="select"&&(pe=t,m.multiple?pe.multiple=!0:m.size&&(pe.size=m.size))):t=pe.createElementNS(t,l),t[Pn]=i,t[Hs]=m,Hu(t,i,!1,!1),i.stateNode=t;e:{switch(pe=Ar(l,m),l){case"dialog":ui("cancel",t),ui("close",t),G=m;break;case"iframe":case"object":case"embed":ui("load",t),G=m;break;case"video":case"audio":for(G=0;G<Bs.length;G++)ui(Bs[G],t);G=m;break;case"source":ui("error",t),G=m;break;case"img":case"image":case"link":ui("error",t),ui("load",t),G=m;break;case"details":ui("toggle",t),G=m;break;case"input":yr(t,m),G=vr(t,m),ui("invalid",t);break;case"option":G=m;break;case"select":t._wrapperState={wasMultiple:!!m.multiple},G=Ue({},m,{value:void 0}),ui("invalid",t);break;case"textarea":Wr(t,m),G=Br(t,m),ui("invalid",t);break;default:G=m}Wt(l,G),Fe=G;for(Z in Fe)if(Fe.hasOwnProperty(Z)){var Xe=Fe[Z];Z==="style"?$t(t,Xe):Z==="dangerouslySetInnerHTML"?(Xe=Xe?Xe.__html:void 0,Xe!=null&&We(t,Xe)):Z==="children"?typeof Xe=="string"?(l!=="textarea"||Xe!=="")&&St(t,Xe):typeof Xe=="number"&&St(t,""+Xe):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(c.hasOwnProperty(Z)?Xe!=null&&Z==="onScroll"&&ui("scroll",t):Xe!=null&&E(t,Z,Xe,pe))}switch(l){case"input":yt(t),Cr(t,m,!1);break;case"textarea":yt(t),Di(t);break;case"option":m.value!=null&&t.setAttribute("value",""+Ke(m.value));break;case"select":t.multiple=!!m.multiple,Z=m.value,Z!=null?Ei(t,!!m.multiple,Z,!1):m.defaultValue!=null&&Ei(t,!!m.multiple,m.defaultValue,!0);break;default:typeof G.onClick=="function"&&(t.onclick=da)}switch(l){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ji(i),null;case 6:if(t&&i.stateNode!=null)$u(t,i,t.memoizedProps,m);else{if(typeof m!="string"&&i.stateNode===null)throw Error(s(166));if(l=cs(qs.current),cs(kn.current),xa(i)){if(m=i.stateNode,l=i.memoizedProps,m[Pn]=i,(Z=m.nodeValue!==l)&&(t=pn,t!==null))switch(t.tag){case 3:ha(m.nodeValue,l,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ha(m.nodeValue,l,(t.mode&1)!==0)}Z&&(i.flags|=4)}else m=(l.nodeType===9?l:l.ownerDocument).createTextNode(m),m[Pn]=i,i.stateNode=m}return Ji(i),null;case 13:if(ci(vi),m=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(di&&mn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)ql(),Ts(),i.flags|=98560,Z=!1;else if(Z=xa(i),m!==null&&m.dehydrated!==null){if(t===null){if(!Z)throw Error(s(318));if(Z=i.memoizedState,Z=Z!==null?Z.dehydrated:null,!Z)throw Error(s(317));Z[Pn]=i}else Ts(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ji(i),Z=!1}else Cn!==null&&(ol(Cn),Cn=null),Z=!0;if(!Z)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(m=m!==null,m!==(t!==null&&t.memoizedState!==null)&&m&&(i.child.flags|=8192,(i.mode&1)!==0&&(t===null||(vi.current&1)!==0?Li===0&&(Li=3):cl())),i.updateQueue!==null&&(i.flags|=4),Ji(i),null);case 4:return ks(),Qo(t,i),t===null&&Us(i.stateNode.containerInfo),Ji(i),null;case 10:return Eo(i.type._context),Ji(i),null;case 17:return un(i.type)&&pa(),Ji(i),null;case 19:if(ci(vi),Z=i.memoizedState,Z===null)return Ji(i),null;if(m=(i.flags&128)!==0,pe=Z.rendering,pe===null)if(m)ea(Z,!1);else{if(Li!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(pe=Ca(t),pe!==null){for(i.flags|=128,ea(Z,!1),m=pe.updateQueue,m!==null&&(i.updateQueue=m,i.flags|=4),i.subtreeFlags=0,m=l,l=i.child;l!==null;)Z=l,t=m,Z.flags&=14680066,pe=Z.alternate,pe===null?(Z.childLanes=0,Z.lanes=t,Z.child=null,Z.subtreeFlags=0,Z.memoizedProps=null,Z.memoizedState=null,Z.updateQueue=null,Z.dependencies=null,Z.stateNode=null):(Z.childLanes=pe.childLanes,Z.lanes=pe.lanes,Z.child=pe.child,Z.subtreeFlags=0,Z.deletions=null,Z.memoizedProps=pe.memoizedProps,Z.memoizedState=pe.memoizedState,Z.updateQueue=pe.updateQueue,Z.type=pe.type,t=pe.dependencies,Z.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),l=l.sibling;return oi(vi,vi.current&1|2),i.child}t=t.sibling}Z.tail!==null&&xt()>Ls&&(i.flags|=128,m=!0,ea(Z,!1),i.lanes=4194304)}else{if(!m)if(t=Ca(pe),t!==null){if(i.flags|=128,m=!0,l=t.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),ea(Z,!0),Z.tail===null&&Z.tailMode==="hidden"&&!pe.alternate&&!di)return Ji(i),null}else 2*xt()-Z.renderingStartTime>Ls&&l!==1073741824&&(i.flags|=128,m=!0,ea(Z,!1),i.lanes=4194304);Z.isBackwards?(pe.sibling=i.child,i.child=pe):(l=Z.last,l!==null?l.sibling=pe:i.child=pe,Z.last=pe)}return Z.tail!==null?(i=Z.tail,Z.rendering=i,Z.tail=i.sibling,Z.renderingStartTime=xt(),i.sibling=null,l=vi.current,oi(vi,m?l&1|2:l&1),i):(Ji(i),null);case 22:case 23:return ul(),m=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==m&&(i.flags|=8192),m&&(i.mode&1)!==0?(gn&1073741824)!==0&&(Ji(i),i.subtreeFlags&6&&(i.flags|=8192)):Ji(i),null;case 24:return null;case 25:return null}throw Error(s(156,i.tag))}function Yc(t,i){switch(yo(i),i.tag){case 1:return un(i.type)&&pa(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ks(),ci(ln),ci(Zi),ko(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 5:return Mo(i),null;case 13:if(ci(vi),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ts()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ci(vi),null;case 4:return ks(),null;case 10:return Eo(i.type._context),null;case 22:case 23:return ul(),null;case 24:return null;default:return null}}var Oa=!1,en=!1,Jc=typeof WeakSet=="function"?WeakSet:Set,er=null;function Is(t,i){var l=t.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(m){Si(t,i,m)}else l.current=null}function Zo(t,i,l){try{l()}catch(m){Si(t,i,m)}}var Xu=!1;function eh(t,i){if(lo=ht,t=Cl(),eo(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var m=l.getSelection&&l.getSelection();if(m&&m.rangeCount!==0){l=m.anchorNode;var G=m.anchorOffset,Z=m.focusNode;m=m.focusOffset;try{l.nodeType,Z.nodeType}catch{l=null;break e}var pe=0,Fe=-1,Xe=-1,ot=0,Pt=0,It=t,Rt=null;t:for(;;){for(var Zt;It!==l||G!==0&&It.nodeType!==3||(Fe=pe+G),It!==Z||m!==0&&It.nodeType!==3||(Xe=pe+m),It.nodeType===3&&(pe+=It.nodeValue.length),(Zt=It.firstChild)!==null;)Rt=It,It=Zt;for(;;){if(It===t)break t;if(Rt===l&&++ot===G&&(Fe=pe),Rt===Z&&++Pt===m&&(Xe=pe),(Zt=It.nextSibling)!==null)break;It=Rt,Rt=It.parentNode}It=Zt}l=Fe===-1||Xe===-1?null:{start:Fe,end:Xe}}else l=null}l=l||{start:0,end:0}}else l=null;for(uo={focusedElem:t,selectionRange:l},ht=!1,er=i;er!==null;)if(i=er,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,er=t;else for(;er!==null;){i=er;try{var ir=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ir!==null){var sr=ir.memoizedProps,Ai=ir.memoizedState,et=i.stateNode,Ze=et.getSnapshotBeforeUpdate(i.elementType===i.type?sr:An(i.type,sr),Ai);et.__reactInternalSnapshotBeforeUpdate=Ze}break;case 3:var st=i.stateNode.containerInfo;st.nodeType===1?st.textContent="":st.nodeType===9&&st.documentElement&&st.removeChild(st.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Nt){Si(i,i.return,Nt)}if(t=i.sibling,t!==null){t.return=i.return,er=t;break}er=i.return}return ir=Xu,Xu=!1,ir}function ta(t,i,l){var m=i.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var G=m=m.next;do{if((G.tag&t)===t){var Z=G.destroy;G.destroy=void 0,Z!==void 0&&Zo(i,l,Z)}G=G.next}while(G!==m)}}function La(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&t)===t){var m=l.create;l.destroy=m()}l=l.next}while(l!==i)}}function Yo(t){var i=t.ref;if(i!==null){var l=t.stateNode;t.tag,t=l,typeof i=="function"?i(t):i.current=t}}function Ku(t){var i=t.alternate;i!==null&&(t.alternate=null,Ku(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[Pn],delete i[Hs],delete i[po],delete i[zc],delete i[Fc])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qu(t){return t.tag===5||t.tag===3||t.tag===4}function Qu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qu(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jo(t,i,l){var m=t.tag;if(m===5||m===6)t=t.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(t,i):l.insertBefore(t,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(t,l)):(i=l,i.appendChild(t)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=da));else if(m!==4&&(t=t.child,t!==null))for(Jo(t,i,l),t=t.sibling;t!==null;)Jo(t,i,l),t=t.sibling}function el(t,i,l){var m=t.tag;if(m===5||m===6)t=t.stateNode,i?l.insertBefore(t,i):l.appendChild(t);else if(m!==4&&(t=t.child,t!==null))for(el(t,i,l),t=t.sibling;t!==null;)el(t,i,l),t=t.sibling}var Xi=null,Tn=!1;function qn(t,i,l){for(l=l.child;l!==null;)Zu(t,i,l),l=l.sibling}function Zu(t,i,l){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(zr,l)}catch{}switch(l.tag){case 5:en||Is(l,i);case 6:var m=Xi,G=Tn;Xi=null,qn(t,i,l),Xi=m,Tn=G,Xi!==null&&(Tn?(t=Xi,l=l.stateNode,t.nodeType===8?t.parentNode.removeChild(l):t.removeChild(l)):Xi.removeChild(l.stateNode));break;case 18:Xi!==null&&(Tn?(t=Xi,l=l.stateNode,t.nodeType===8?fo(t.parentNode,l):t.nodeType===1&&fo(t,l),Ct(t)):fo(Xi,l.stateNode));break;case 4:m=Xi,G=Tn,Xi=l.stateNode.containerInfo,Tn=!0,qn(t,i,l),Xi=m,Tn=G;break;case 0:case 11:case 14:case 15:if(!en&&(m=l.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){G=m=m.next;do{var Z=G,pe=Z.destroy;Z=Z.tag,pe!==void 0&&((Z&2)!==0||(Z&4)!==0)&&Zo(l,i,pe),G=G.next}while(G!==m)}qn(t,i,l);break;case 1:if(!en&&(Is(l,i),m=l.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=l.memoizedProps,m.state=l.memoizedState,m.componentWillUnmount()}catch(Fe){Si(l,i,Fe)}qn(t,i,l);break;case 21:qn(t,i,l);break;case 22:l.mode&1?(en=(m=en)||l.memoizedState!==null,qn(t,i,l),en=m):qn(t,i,l);break;default:qn(t,i,l)}}function Yu(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var l=t.stateNode;l===null&&(l=t.stateNode=new Jc),i.forEach(function(m){var G=uh.bind(null,t,m);l.has(m)||(l.add(m),m.then(G,G))})}}function Rn(t,i){var l=i.deletions;if(l!==null)for(var m=0;m<l.length;m++){var G=l[m];try{var Z=t,pe=i,Fe=pe;e:for(;Fe!==null;){switch(Fe.tag){case 5:Xi=Fe.stateNode,Tn=!1;break e;case 3:Xi=Fe.stateNode.containerInfo,Tn=!0;break e;case 4:Xi=Fe.stateNode.containerInfo,Tn=!0;break e}Fe=Fe.return}if(Xi===null)throw Error(s(160));Zu(Z,pe,G),Xi=null,Tn=!1;var Xe=G.alternate;Xe!==null&&(Xe.return=null),G.return=null}catch(ot){Si(G,i,ot)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Ju(i,t),i=i.sibling}function Ju(t,i){var l=t.alternate,m=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rn(i,t),In(t),m&4){try{ta(3,t,t.return),La(3,t)}catch(sr){Si(t,t.return,sr)}try{ta(5,t,t.return)}catch(sr){Si(t,t.return,sr)}}break;case 1:Rn(i,t),In(t),m&512&&l!==null&&Is(l,l.return);break;case 5:if(Rn(i,t),In(t),m&512&&l!==null&&Is(l,l.return),t.flags&32){var G=t.stateNode;try{St(G,"")}catch(sr){Si(t,t.return,sr)}}if(m&4&&(G=t.stateNode,G!=null)){var Z=t.memoizedProps,pe=l!==null?l.memoizedProps:Z,Fe=t.type,Xe=t.updateQueue;if(t.updateQueue=null,Xe!==null)try{Fe==="input"&&Z.type==="radio"&&Z.name!=null&&jr(G,Z),Ar(Fe,pe);var ot=Ar(Fe,Z);for(pe=0;pe<Xe.length;pe+=2){var Pt=Xe[pe],It=Xe[pe+1];Pt==="style"?$t(G,It):Pt==="dangerouslySetInnerHTML"?We(G,It):Pt==="children"?St(G,It):E(G,Pt,It,ot)}switch(Fe){case"input":Lr(G,Z);break;case"textarea":Gi(G,Z);break;case"select":var Rt=G._wrapperState.wasMultiple;G._wrapperState.wasMultiple=!!Z.multiple;var Zt=Z.value;Zt!=null?Ei(G,!!Z.multiple,Zt,!1):Rt!==!!Z.multiple&&(Z.defaultValue!=null?Ei(G,!!Z.multiple,Z.defaultValue,!0):Ei(G,!!Z.multiple,Z.multiple?[]:"",!1))}G[Hs]=Z}catch(sr){Si(t,t.return,sr)}}break;case 6:if(Rn(i,t),In(t),m&4){if(t.stateNode===null)throw Error(s(162));G=t.stateNode,Z=t.memoizedProps;try{G.nodeValue=Z}catch(sr){Si(t,t.return,sr)}}break;case 3:if(Rn(i,t),In(t),m&4&&l!==null&&l.memoizedState.isDehydrated)try{Ct(i.containerInfo)}catch(sr){Si(t,t.return,sr)}break;case 4:Rn(i,t),In(t);break;case 13:Rn(i,t),In(t),G=t.child,G.flags&8192&&(Z=G.memoizedState!==null,G.stateNode.isHidden=Z,!Z||G.alternate!==null&&G.alternate.memoizedState!==null||(il=xt())),m&4&&Yu(t);break;case 22:if(Pt=l!==null&&l.memoizedState!==null,t.mode&1?(en=(ot=en)||Pt,Rn(i,t),en=ot):Rn(i,t),In(t),m&8192){if(ot=t.memoizedState!==null,(t.stateNode.isHidden=ot)&&!Pt&&(t.mode&1)!==0)for(er=t,Pt=t.child;Pt!==null;){for(It=er=Pt;er!==null;){switch(Rt=er,Zt=Rt.child,Rt.tag){case 0:case 11:case 14:case 15:ta(4,Rt,Rt.return);break;case 1:Is(Rt,Rt.return);var ir=Rt.stateNode;if(typeof ir.componentWillUnmount=="function"){m=Rt,l=Rt.return;try{i=m,ir.props=i.memoizedProps,ir.state=i.memoizedState,ir.componentWillUnmount()}catch(sr){Si(m,l,sr)}}break;case 5:Is(Rt,Rt.return);break;case 22:if(Rt.memoizedState!==null){rc(It);continue}}Zt!==null?(Zt.return=Rt,er=Zt):rc(It)}Pt=Pt.sibling}e:for(Pt=null,It=t;;){if(It.tag===5){if(Pt===null){Pt=It;try{G=It.stateNode,ot?(Z=G.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none"):(Fe=It.stateNode,Xe=It.memoizedProps.style,pe=Xe!=null&&Xe.hasOwnProperty("display")?Xe.display:null,Fe.style.display=bt("display",pe))}catch(sr){Si(t,t.return,sr)}}}else if(It.tag===6){if(Pt===null)try{It.stateNode.nodeValue=ot?"":It.memoizedProps}catch(sr){Si(t,t.return,sr)}}else if((It.tag!==22&&It.tag!==23||It.memoizedState===null||It===t)&&It.child!==null){It.child.return=It,It=It.child;continue}if(It===t)break e;for(;It.sibling===null;){if(It.return===null||It.return===t)break e;Pt===It&&(Pt=null),It=It.return}Pt===It&&(Pt=null),It.sibling.return=It.return,It=It.sibling}}break;case 19:Rn(i,t),In(t),m&4&&Yu(t);break;case 21:break;default:Rn(i,t),In(t)}}function In(t){var i=t.flags;if(i&2){try{e:{for(var l=t.return;l!==null;){if(qu(l)){var m=l;break e}l=l.return}throw Error(s(160))}switch(m.tag){case 5:var G=m.stateNode;m.flags&32&&(St(G,""),m.flags&=-33);var Z=Qu(t);el(t,Z,G);break;case 3:case 4:var pe=m.stateNode.containerInfo,Fe=Qu(t);Jo(t,Fe,pe);break;default:throw Error(s(161))}}catch(Xe){Si(t,t.return,Xe)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function th(t,i,l){er=t,ec(t)}function ec(t,i,l){for(var m=(t.mode&1)!==0;er!==null;){var G=er,Z=G.child;if(G.tag===22&&m){var pe=G.memoizedState!==null||Oa;if(!pe){var Fe=G.alternate,Xe=Fe!==null&&Fe.memoizedState!==null||en;Fe=Oa;var ot=en;if(Oa=pe,(en=Xe)&&!ot)for(er=G;er!==null;)pe=er,Xe=pe.child,pe.tag===22&&pe.memoizedState!==null?ic(G):Xe!==null?(Xe.return=pe,er=Xe):ic(G);for(;Z!==null;)er=Z,ec(Z),Z=Z.sibling;er=G,Oa=Fe,en=ot}tc(t)}else(G.subtreeFlags&8772)!==0&&Z!==null?(Z.return=G,er=Z):tc(t)}}function tc(t){for(;er!==null;){var i=er;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:en||La(5,i);break;case 1:var m=i.stateNode;if(i.flags&4&&!en)if(l===null)m.componentDidMount();else{var G=i.elementType===i.type?l.memoizedProps:An(i.type,l.memoizedProps);m.componentDidUpdate(G,l.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var Z=i.updateQueue;Z!==null&&ru(i,Z,m);break;case 3:var pe=i.updateQueue;if(pe!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}ru(i,pe,l)}break;case 5:var Fe=i.stateNode;if(l===null&&i.flags&4){l=Fe;var Xe=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":Xe.autoFocus&&l.focus();break;case"img":Xe.src&&(l.src=Xe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var ot=i.alternate;if(ot!==null){var Pt=ot.memoizedState;if(Pt!==null){var It=Pt.dehydrated;It!==null&&Ct(It)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}en||i.flags&512&&Yo(i)}catch(Rt){Si(i,i.return,Rt)}}if(i===t){er=null;break}if(l=i.sibling,l!==null){l.return=i.return,er=l;break}er=i.return}}function rc(t){for(;er!==null;){var i=er;if(i===t){er=null;break}var l=i.sibling;if(l!==null){l.return=i.return,er=l;break}er=i.return}}function ic(t){for(;er!==null;){var i=er;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{La(4,i)}catch(Xe){Si(i,l,Xe)}break;case 1:var m=i.stateNode;if(typeof m.componentDidMount=="function"){var G=i.return;try{m.componentDidMount()}catch(Xe){Si(i,G,Xe)}}var Z=i.return;try{Yo(i)}catch(Xe){Si(i,Z,Xe)}break;case 5:var pe=i.return;try{Yo(i)}catch(Xe){Si(i,pe,Xe)}}}catch(Xe){Si(i,i.return,Xe)}if(i===t){er=null;break}var Fe=i.sibling;if(Fe!==null){Fe.return=i.return,er=Fe;break}er=i.return}}var rh=Math.ceil,za=K.ReactCurrentDispatcher,tl=K.ReactCurrentOwner,bn=K.ReactCurrentBatchConfig,qr=0,Bi=null,ki=null,Ki=0,gn=0,Os=Hn(0),Li=0,ra=null,ds=0,Fa=0,rl=0,ia=null,hn=null,il=0,Ls=1/0,Bn=null,Na=!1,nl=null,Qn=null,Va=!1,Zn=null,ja=0,na=0,sl=null,Ba=-1,Ua=0;function sn(){return(qr&6)!==0?xt():Ba!==-1?Ba:Ba=xt()}function Yn(t){return(t.mode&1)===0?1:(qr&2)!==0&&Ki!==0?Ki&-Ki:Vc.transition!==null?(Ua===0&&(Ua=z()),Ua):(t=U,t!==0||(t=window.event,t=t===void 0?16:Bt(t.type)),t)}function Mn(t,i,l,m){if(50<na)throw na=0,sl=null,Error(s(185));V(t,l,m),((qr&2)===0||t!==Bi)&&(t===Bi&&((qr&2)===0&&(Fa|=l),Li===4&&Jn(t,Ki)),dn(t,m),l===1&&qr===0&&(i.mode&1)===0&&(Ls=xt()+500,ga&&$n()))}function dn(t,i){var l=t.callbackNode;h(t,i);var m=n(t,t===Bi?Ki:0);if(m===0)l!==null&&Qe(l),t.callbackNode=null,t.callbackPriority=0;else if(i=m&-m,t.callbackPriority!==i){if(l!=null&&Qe(l),i===1)t.tag===0?Nc(sc.bind(null,t)):Hl(sc.bind(null,t)),Oc(function(){(qr&6)===0&&$n()}),l=null;else{switch(X(m)){case 1:l=Vt;break;case 4:l=Ut;break;case 16:l=Xt;break;case 536870912:l=lr;break;default:l=Xt}l=fc(l,nc.bind(null,t))}t.callbackPriority=i,t.callbackNode=l}}function nc(t,i){if(Ba=-1,Ua=0,(qr&6)!==0)throw Error(s(327));var l=t.callbackNode;if(zs()&&t.callbackNode!==l)return null;var m=n(t,t===Bi?Ki:0);if(m===0)return null;if((m&30)!==0||(m&t.expiredLanes)!==0||i)i=Ga(t,m);else{i=m;var G=qr;qr|=2;var Z=oc();(Bi!==t||Ki!==i)&&(Bn=null,Ls=xt()+500,ps(t,i));do try{sh();break}catch(Fe){ac(t,Fe)}while(!0);So(),za.current=Z,qr=G,ki!==null?i=0:(Bi=null,Ki=0,i=Li)}if(i!==0){if(i===2&&(G=f(t),G!==0&&(m=G,i=al(t,G))),i===1)throw l=ra,ps(t,0),Jn(t,m),dn(t,xt()),l;if(i===6)Jn(t,m);else{if(G=t.current.alternate,(m&30)===0&&!ih(G)&&(i=Ga(t,m),i===2&&(Z=f(t),Z!==0&&(m=Z,i=al(t,Z))),i===1))throw l=ra,ps(t,0),Jn(t,m),dn(t,xt()),l;switch(t.finishedWork=G,t.finishedLanes=m,i){case 0:case 1:throw Error(s(345));case 2:ms(t,hn,Bn);break;case 3:if(Jn(t,m),(m&130023424)===m&&(i=il+500-xt(),10<i)){if(n(t,0)!==0)break;if(G=t.suspendedLanes,(G&m)!==m){sn(),t.pingedLanes|=t.suspendedLanes&G;break}t.timeoutHandle=ho(ms.bind(null,t,hn,Bn),i);break}ms(t,hn,Bn);break;case 4:if(Jn(t,m),(m&4194240)===m)break;for(i=t.eventTimes,G=-1;0<m;){var pe=31-kr(m);Z=1<<pe,pe=i[pe],pe>G&&(G=pe),m&=~Z}if(m=G,m=xt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*rh(m/1960))-m,10<m){t.timeoutHandle=ho(ms.bind(null,t,hn,Bn),m);break}ms(t,hn,Bn);break;case 5:ms(t,hn,Bn);break;default:throw Error(s(329))}}}return dn(t,xt()),t.callbackNode===l?nc.bind(null,t):null}function al(t,i){var l=ia;return t.current.memoizedState.isDehydrated&&(ps(t,i).flags|=256),t=Ga(t,i),t!==2&&(i=hn,hn=l,i!==null&&ol(i)),t}function ol(t){hn===null?hn=t:hn.push.apply(hn,t)}function ih(t){for(var i=t;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var m=0;m<l.length;m++){var G=l[m],Z=G.getSnapshot;G=G.value;try{if(!En(Z(),G))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Jn(t,i){for(i&=~rl,i&=~Fa,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var l=31-kr(i),m=1<<l;t[l]=-1,i&=~m}}function sc(t){if((qr&6)!==0)throw Error(s(327));zs();var i=n(t,0);if((i&1)===0)return dn(t,xt()),null;var l=Ga(t,i);if(t.tag!==0&&l===2){var m=f(t);m!==0&&(i=m,l=al(t,m))}if(l===1)throw l=ra,ps(t,0),Jn(t,i),dn(t,xt()),l;if(l===6)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,ms(t,hn,Bn),dn(t,xt()),null}function ll(t,i){var l=qr;qr|=1;try{return t(i)}finally{qr=l,qr===0&&(Ls=xt()+500,ga&&$n())}}function fs(t){Zn!==null&&Zn.tag===0&&(qr&6)===0&&zs();var i=qr;qr|=1;var l=bn.transition,m=U;try{if(bn.transition=null,U=1,t)return t()}finally{U=m,bn.transition=l,qr=i,(qr&6)===0&&$n()}}function ul(){gn=Os.current,ci(Os)}function ps(t,i){t.finishedWork=null,t.finishedLanes=0;var l=t.timeoutHandle;if(l!==-1&&(t.timeoutHandle=-1,Ic(l)),ki!==null)for(l=ki.return;l!==null;){var m=l;switch(yo(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&pa();break;case 3:ks(),ci(ln),ci(Zi),ko();break;case 5:Mo(m);break;case 4:ks();break;case 13:ci(vi);break;case 19:ci(vi);break;case 10:Eo(m.type._context);break;case 22:case 23:ul()}l=l.return}if(Bi=t,ki=t=es(t.current,null),Ki=gn=i,Li=0,ra=null,rl=Fa=ds=0,hn=ia=null,us!==null){for(i=0;i<us.length;i++)if(l=us[i],m=l.interleaved,m!==null){l.interleaved=null;var G=m.next,Z=l.pending;if(Z!==null){var pe=Z.next;Z.next=G,m.next=pe}l.pending=m}us=null}return t}function ac(t,i){do{var l=ki;try{if(So(),Aa.current=Pa,Ta){for(var m=yi.memoizedState;m!==null;){var G=m.queue;G!==null&&(G.pending=null),m=m.next}Ta=!1}if(hs=0,ji=Oi=yi=null,Qs=!1,Zs=0,tl.current=null,l===null||l.return===null){Li=1,ra=i,ki=null;break}e:{var Z=t,pe=l.return,Fe=l,Xe=i;if(i=Ki,Fe.flags|=32768,Xe!==null&&typeof Xe=="object"&&typeof Xe.then=="function"){var ot=Xe,Pt=Fe,It=Pt.tag;if((Pt.mode&1)===0&&(It===0||It===11||It===15)){var Rt=Pt.alternate;Rt?(Pt.updateQueue=Rt.updateQueue,Pt.memoizedState=Rt.memoizedState,Pt.lanes=Rt.lanes):(Pt.updateQueue=null,Pt.memoizedState=null)}var Zt=ku(pe);if(Zt!==null){Zt.flags&=-257,Du(Zt,pe,Fe,Z,i),Zt.mode&1&&Pu(Z,ot,i),i=Zt,Xe=ot;var ir=i.updateQueue;if(ir===null){var sr=new Set;sr.add(Xe),i.updateQueue=sr}else ir.add(Xe);break e}else{if((i&1)===0){Pu(Z,ot,i),cl();break e}Xe=Error(s(426))}}else if(di&&Fe.mode&1){var Ai=ku(pe);if(Ai!==null){(Ai.flags&65536)===0&&(Ai.flags|=256),Du(Ai,pe,Fe,Z,i),wo(Ds(Xe,Fe));break e}}Z=Xe=Ds(Xe,Fe),Li!==4&&(Li=2),ia===null?ia=[Z]:ia.push(Z),Z=pe;do{switch(Z.tag){case 3:Z.flags|=65536,i&=-i,Z.lanes|=i;var et=Ru(Z,Xe,i);tu(Z,et);break e;case 1:Fe=Xe;var Ze=Z.type,st=Z.stateNode;if((Z.flags&128)===0&&(typeof Ze.getDerivedStateFromError=="function"||st!==null&&typeof st.componentDidCatch=="function"&&(Qn===null||!Qn.has(st)))){Z.flags|=65536,i&=-i,Z.lanes|=i;var Nt=Mu(Z,Fe,i);tu(Z,Nt);break e}}Z=Z.return}while(Z!==null)}uc(l)}catch(or){i=or,ki===l&&l!==null&&(ki=l=l.return);continue}break}while(!0)}function oc(){var t=za.current;return za.current=Pa,t===null?Pa:t}function cl(){(Li===0||Li===3||Li===2)&&(Li=4),Bi===null||(ds&268435455)===0&&(Fa&268435455)===0||Jn(Bi,Ki)}function Ga(t,i){var l=qr;qr|=2;var m=oc();(Bi!==t||Ki!==i)&&(Bn=null,ps(t,i));do try{nh();break}catch(G){ac(t,G)}while(!0);if(So(),qr=l,za.current=m,ki!==null)throw Error(s(261));return Bi=null,Ki=0,Li}function nh(){for(;ki!==null;)lc(ki)}function sh(){for(;ki!==null&&!$e();)lc(ki)}function lc(t){var i=dc(t.alternate,t,gn);t.memoizedProps=t.pendingProps,i===null?uc(t):ki=i,tl.current=null}function uc(t){var i=t;do{var l=i.alternate;if(t=i.return,(i.flags&32768)===0){if(l=Zc(l,i,gn),l!==null){ki=l;return}}else{if(l=Yc(l,i),l!==null){l.flags&=32767,ki=l;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Li=6,ki=null;return}}if(i=i.sibling,i!==null){ki=i;return}ki=i=t}while(i!==null);Li===0&&(Li=5)}function ms(t,i,l){var m=U,G=bn.transition;try{bn.transition=null,U=1,ah(t,i,l,m)}finally{bn.transition=G,U=m}return null}function ah(t,i,l,m){do zs();while(Zn!==null);if((qr&6)!==0)throw Error(s(327));l=t.finishedWork;var G=t.finishedLanes;if(l===null)return null;if(t.finishedWork=null,t.finishedLanes=0,l===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var Z=l.lanes|l.childLanes;if(B(t,Z),t===Bi&&(ki=Bi=null,Ki=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Va||(Va=!0,fc(Xt,function(){return zs(),null})),Z=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||Z){Z=bn.transition,bn.transition=null;var pe=U;U=1;var Fe=qr;qr|=4,tl.current=null,eh(t,l),Ju(l,t),Ac(uo),ht=!!lo,uo=lo=null,t.current=l,th(l),Mt(),qr=Fe,U=pe,bn.transition=Z}else t.current=l;if(Va&&(Va=!1,Zn=t,ja=G),Z=t.pendingLanes,Z===0&&(Qn=null),Jr(l.stateNode),dn(t,xt()),i!==null)for(m=t.onRecoverableError,l=0;l<i.length;l++)G=i[l],m(G.value,{componentStack:G.stack,digest:G.digest});if(Na)throw Na=!1,t=nl,nl=null,t;return(ja&1)!==0&&t.tag!==0&&zs(),Z=t.pendingLanes,(Z&1)!==0?t===sl?na++:(na=0,sl=t):na=0,$n(),null}function zs(){if(Zn!==null){var t=X(ja),i=bn.transition,l=U;try{if(bn.transition=null,U=16>t?16:t,Zn===null)var m=!1;else{if(t=Zn,Zn=null,ja=0,(qr&6)!==0)throw Error(s(331));var G=qr;for(qr|=4,er=t.current;er!==null;){var Z=er,pe=Z.child;if((er.flags&16)!==0){var Fe=Z.deletions;if(Fe!==null){for(var Xe=0;Xe<Fe.length;Xe++){var ot=Fe[Xe];for(er=ot;er!==null;){var Pt=er;switch(Pt.tag){case 0:case 11:case 15:ta(8,Pt,Z)}var It=Pt.child;if(It!==null)It.return=Pt,er=It;else for(;er!==null;){Pt=er;var Rt=Pt.sibling,Zt=Pt.return;if(Ku(Pt),Pt===ot){er=null;break}if(Rt!==null){Rt.return=Zt,er=Rt;break}er=Zt}}}var ir=Z.alternate;if(ir!==null){var sr=ir.child;if(sr!==null){ir.child=null;do{var Ai=sr.sibling;sr.sibling=null,sr=Ai}while(sr!==null)}}er=Z}}if((Z.subtreeFlags&2064)!==0&&pe!==null)pe.return=Z,er=pe;else e:for(;er!==null;){if(Z=er,(Z.flags&2048)!==0)switch(Z.tag){case 0:case 11:case 15:ta(9,Z,Z.return)}var et=Z.sibling;if(et!==null){et.return=Z.return,er=et;break e}er=Z.return}}var Ze=t.current;for(er=Ze;er!==null;){pe=er;var st=pe.child;if((pe.subtreeFlags&2064)!==0&&st!==null)st.return=pe,er=st;else e:for(pe=Ze;er!==null;){if(Fe=er,(Fe.flags&2048)!==0)try{switch(Fe.tag){case 0:case 11:case 15:La(9,Fe)}}catch(or){Si(Fe,Fe.return,or)}if(Fe===pe){er=null;break e}var Nt=Fe.sibling;if(Nt!==null){Nt.return=Fe.return,er=Nt;break e}er=Fe.return}}if(qr=G,$n(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(zr,t)}catch{}m=!0}return m}finally{U=l,bn.transition=i}}return!1}function cc(t,i,l){i=Ds(l,i),i=Ru(t,i,1),t=Kn(t,i,1),i=sn(),t!==null&&(V(t,1,i),dn(t,i))}function Si(t,i,l){if(t.tag===3)cc(t,t,l);else for(;i!==null;){if(i.tag===3){cc(i,t,l);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Qn===null||!Qn.has(m))){t=Ds(l,t),t=Mu(i,t,1),i=Kn(i,t,1),t=sn(),i!==null&&(V(i,1,t),dn(i,t));break}}i=i.return}}function oh(t,i,l){var m=t.pingCache;m!==null&&m.delete(i),i=sn(),t.pingedLanes|=t.suspendedLanes&l,Bi===t&&(Ki&l)===l&&(Li===4||Li===3&&(Ki&130023424)===Ki&&500>xt()-il?ps(t,0):rl|=l),dn(t,i)}function hc(t,i){i===0&&((t.mode&1)===0?i=1:(i=fi,fi<<=1,(fi&130023424)===0&&(fi=4194304)));var l=sn();t=Nn(t,i),t!==null&&(V(t,i,l),dn(t,l))}function lh(t){var i=t.memoizedState,l=0;i!==null&&(l=i.retryLane),hc(t,l)}function uh(t,i){var l=0;switch(t.tag){case 13:var m=t.stateNode,G=t.memoizedState;G!==null&&(l=G.retryLane);break;case 19:m=t.stateNode;break;default:throw Error(s(314))}m!==null&&m.delete(i),hc(t,l)}var dc;dc=function(t,i,l){if(t!==null)if(t.memoizedProps!==i.pendingProps||ln.current)cn=!0;else{if((t.lanes&l)===0&&(i.flags&128)===0)return cn=!1,Qc(t,i,l);cn=(t.flags&131072)!==0}else cn=!1,di&&(i.flags&1048576)!==0&&Wl(i,ya,i.index);switch(i.lanes=0,i.tag){case 2:var m=i.type;Ia(t,i),t=i.pendingProps;var G=Es(i,Zi.current);Ps(i,l),G=Oo(null,i,m,t,G,l);var Z=Lo();return i.flags|=1,typeof G=="object"&&G!==null&&typeof G.render=="function"&&G.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,un(m)?(Z=!0,ma(i)):Z=!1,i.memoizedState=G.state!==null&&G.state!==void 0?G.state:null,To(i),G.updater=ka,i.stateNode=G,G._reactInternals=i,Bo(i,m,t,l),i=Wo(null,i,m,!0,Z,l)):(i.tag=0,di&&Z&&vo(i),nn(null,i,G,l),i=i.child),i;case 16:m=i.elementType;e:{switch(Ia(t,i),t=i.pendingProps,G=m._init,m=G(m._payload),i.type=m,G=i.tag=hh(m),t=An(m,t),G){case 0:i=Ho(null,i,m,t,l);break e;case 1:i=Nu(null,i,m,t,l);break e;case 11:i=Iu(null,i,m,t,l);break e;case 14:i=Ou(null,i,m,An(m.type,t),l);break e}throw Error(s(306,m,""))}return i;case 0:return m=i.type,G=i.pendingProps,G=i.elementType===m?G:An(m,G),Ho(t,i,m,G,l);case 1:return m=i.type,G=i.pendingProps,G=i.elementType===m?G:An(m,G),Nu(t,i,m,G,l);case 3:e:{if(Vu(i),t===null)throw Error(s(387));m=i.pendingProps,Z=i.memoizedState,G=Z.element,eu(t,i),Ea(i,m,null,l);var pe=i.memoizedState;if(m=pe.element,Z.isDehydrated)if(Z={element:m,isDehydrated:!1,cache:pe.cache,pendingSuspenseBoundaries:pe.pendingSuspenseBoundaries,transitions:pe.transitions},i.updateQueue.baseState=Z,i.memoizedState=Z,i.flags&256){G=Ds(Error(s(423)),i),i=ju(t,i,m,l,G);break e}else if(m!==G){G=Ds(Error(s(424)),i),i=ju(t,i,m,l,G);break e}else for(mn=Gn(i.stateNode.containerInfo.firstChild),pn=i,di=!0,Cn=null,l=Yl(i,null,m,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ts(),m===G){i=jn(t,i,l);break e}nn(t,i,m,l)}i=i.child}return i;case 5:return iu(i),t===null&&_o(i),m=i.type,G=i.pendingProps,Z=t!==null?t.memoizedProps:null,pe=G.children,co(m,G)?pe=null:Z!==null&&co(m,Z)&&(i.flags|=32),Fu(t,i),nn(t,i,pe,l),i.child;case 6:return t===null&&_o(i),null;case 13:return Bu(t,i,l);case 4:return Ro(i,i.stateNode.containerInfo),m=i.pendingProps,t===null?i.child=Rs(i,null,m,l):nn(t,i,m,l),i.child;case 11:return m=i.type,G=i.pendingProps,G=i.elementType===m?G:An(m,G),Iu(t,i,m,G,l);case 7:return nn(t,i,i.pendingProps,l),i.child;case 8:return nn(t,i,i.pendingProps.children,l),i.child;case 12:return nn(t,i,i.pendingProps.children,l),i.child;case 10:e:{if(m=i.type._context,G=i.pendingProps,Z=i.memoizedProps,pe=G.value,oi(wa,m._currentValue),m._currentValue=pe,Z!==null)if(En(Z.value,pe)){if(Z.children===G.children&&!ln.current){i=jn(t,i,l);break e}}else for(Z=i.child,Z!==null&&(Z.return=i);Z!==null;){var Fe=Z.dependencies;if(Fe!==null){pe=Z.child;for(var Xe=Fe.firstContext;Xe!==null;){if(Xe.context===m){if(Z.tag===1){Xe=Vn(-1,l&-l),Xe.tag=2;var ot=Z.updateQueue;if(ot!==null){ot=ot.shared;var Pt=ot.pending;Pt===null?Xe.next=Xe:(Xe.next=Pt.next,Pt.next=Xe),ot.pending=Xe}}Z.lanes|=l,Xe=Z.alternate,Xe!==null&&(Xe.lanes|=l),Co(Z.return,l,i),Fe.lanes|=l;break}Xe=Xe.next}}else if(Z.tag===10)pe=Z.type===i.type?null:Z.child;else if(Z.tag===18){if(pe=Z.return,pe===null)throw Error(s(341));pe.lanes|=l,Fe=pe.alternate,Fe!==null&&(Fe.lanes|=l),Co(pe,l,i),pe=Z.sibling}else pe=Z.child;if(pe!==null)pe.return=Z;else for(pe=Z;pe!==null;){if(pe===i){pe=null;break}if(Z=pe.sibling,Z!==null){Z.return=pe.return,pe=Z;break}pe=pe.return}Z=pe}nn(t,i,G.children,l),i=i.child}return i;case 9:return G=i.type,m=i.pendingProps.children,Ps(i,l),G=_n(G),m=m(G),i.flags|=1,nn(t,i,m,l),i.child;case 14:return m=i.type,G=An(m,i.pendingProps),G=An(m.type,G),Ou(t,i,m,G,l);case 15:return Lu(t,i,i.type,i.pendingProps,l);case 17:return m=i.type,G=i.pendingProps,G=i.elementType===m?G:An(m,G),Ia(t,i),i.tag=1,un(m)?(t=!0,ma(i)):t=!1,Ps(i,l),Au(i,m,G),Bo(i,m,G,l),Wo(null,i,m,!0,t,l);case 19:return Gu(t,i,l);case 22:return zu(t,i,l)}throw Error(s(156,i.tag))};function fc(t,i){return Pe(t,i)}function ch(t,i,l,m){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,i,l,m){return new ch(t,i,l,m)}function hl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hh(t){if(typeof t=="function")return hl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Te)return 11;if(t===_e)return 14}return 2}function es(t,i){var l=t.alternate;return l===null?(l=Sn(t.tag,i,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=i,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&14680064,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,i=t.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l}function Ha(t,i,l,m,G,Z){var pe=2;if(m=t,typeof t=="function")hl(t)&&(pe=1);else if(typeof t=="string")pe=5;else e:switch(t){case ue:return gs(l.children,G,Z,i);case q:pe=8,G|=8;break;case he:return t=Sn(12,l,i,G|2),t.elementType=he,t.lanes=Z,t;case Ae:return t=Sn(13,l,i,G),t.elementType=Ae,t.lanes=Z,t;case Ve:return t=Sn(19,l,i,G),t.elementType=Ve,t.lanes=Z,t;case we:return Wa(l,G,Z,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Oe:pe=10;break e;case be:pe=9;break e;case Te:pe=11;break e;case _e:pe=14;break e;case W:pe=16,m=null;break e}throw Error(s(130,t==null?t:typeof t,""))}return i=Sn(pe,l,i,G),i.elementType=t,i.type=m,i.lanes=Z,i}function gs(t,i,l,m){return t=Sn(7,t,m,i),t.lanes=l,t}function Wa(t,i,l,m){return t=Sn(22,t,m,i),t.elementType=we,t.lanes=l,t.stateNode={isHidden:!1},t}function dl(t,i,l){return t=Sn(6,t,null,i),t.lanes=l,t}function fl(t,i,l){return i=Sn(4,t.children!==null?t.children:[],t.key,i),i.lanes=l,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function dh(t,i,l,m,G){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_(0),this.expirationTimes=_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_(0),this.identifierPrefix=m,this.onRecoverableError=G,this.mutableSourceEagerHydrationData=null}function pl(t,i,l,m,G,Z,pe,Fe,Xe){return t=new dh(t,i,l,Fe,Xe),i===1?(i=1,Z===!0&&(i|=8)):i=0,Z=Sn(3,null,null,i),t.current=Z,Z.stateNode=t,Z.memoizedState={element:m,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},To(Z),t}function fh(t,i,l){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:m==null?null:""+m,children:t,containerInfo:i,implementation:l}}function pc(t){if(!t)return Wn;t=t._reactInternals;e:{if(ei(t)!==t||t.tag!==1)throw Error(s(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(un(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(s(171))}if(t.tag===1){var l=t.type;if(un(l))return Ul(t,l,i)}return i}function mc(t,i,l,m,G,Z,pe,Fe,Xe){return t=pl(l,m,!0,t,G,Z,pe,Fe,Xe),t.context=pc(null),l=t.current,m=sn(),G=Yn(l),Z=Vn(m,G),Z.callback=i??null,Kn(l,Z,G),t.current.lanes=G,V(t,G,m),dn(t,m),t}function $a(t,i,l,m){var G=i.current,Z=sn(),pe=Yn(G);return l=pc(l),i.context===null?i.context=l:i.pendingContext=l,i=Vn(Z,pe),i.payload={element:t},m=m===void 0?null:m,m!==null&&(i.callback=m),t=Kn(G,i,pe),t!==null&&(Mn(t,G,pe,Z),Sa(t,G,pe)),pe}function Xa(t){return t=t.current,t.child?(t.child.tag===5,t.child.stateNode):null}function gc(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<i?l:i}}function ml(t,i){gc(t,i),(t=t.alternate)&&gc(t,i)}function ph(){return null}var vc=typeof reportError=="function"?reportError:function(t){console.error(t)};function gl(t){this._internalRoot=t}Ka.prototype.render=gl.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));$a(t,i,null,null)},Ka.prototype.unmount=gl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;fs(function(){$a(null,t,null,null)}),i[On]=null}};function Ka(t){this._internalRoot=t}Ka.prototype.unstable_scheduleHydration=function(t){if(t){var i=te();t={blockedOn:null,target:t,priority:i};for(var l=0;l<Ne.length&&i!==0&&i<Ne[l].priority;l++);Ne.splice(l,0,t),l===0&&dt(t)}};function vl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function qa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yc(){}function mh(t,i,l,m,G){if(G){if(typeof m=="function"){var Z=m;m=function(){var ot=Xa(pe);Z.call(ot)}}var pe=mc(i,m,t,0,null,!1,!1,"",yc);return t._reactRootContainer=pe,t[On]=pe.current,Us(t.nodeType===8?t.parentNode:t),fs(),pe}for(;G=t.lastChild;)t.removeChild(G);if(typeof m=="function"){var Fe=m;m=function(){var ot=Xa(Xe);Fe.call(ot)}}var Xe=pl(t,0,!1,null,null,!1,!1,"",yc);return t._reactRootContainer=Xe,t[On]=Xe.current,Us(t.nodeType===8?t.parentNode:t),fs(function(){$a(i,Xe,l,m)}),Xe}function Qa(t,i,l,m,G){var Z=l._reactRootContainer;if(Z){var pe=Z;if(typeof G=="function"){var Fe=G;G=function(){var Xe=Xa(pe);Fe.call(Xe)}}$a(i,pe,t,G)}else pe=mh(l,i,t,G,m);return Xa(pe)}ie=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var l=ye(i.pendingLanes);l!==0&&(I(i,l|1),dn(i,xt()),(qr&6)===0&&(Ls=xt()+500,$n()))}break;case 13:fs(function(){var m=Nn(t,1);if(m!==null){var G=sn();Mn(m,t,1,G)}}),ml(t,1)}},J=function(t){if(t.tag===13){var i=Nn(t,134217728);if(i!==null){var l=sn();Mn(i,t,134217728,l)}ml(t,134217728)}},Q=function(t){if(t.tag===13){var i=Yn(t),l=Nn(t,i);if(l!==null){var m=sn();Mn(l,t,i,m)}ml(t,i)}},te=function(){return U},ee=function(t,i){var l=U;try{return U=t,i()}finally{U=l}},_i=function(t,i,l){switch(i){case"input":if(Lr(t,l),i=l.name,l.type==="radio"&&i!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var m=l[i];if(m!==t&&m.form===t.form){var G=fa(m);if(!G)throw Error(s(90));Kt(m),Lr(m,G)}}}break;case"textarea":Gi(t,l);break;case"select":i=l.value,i!=null&&Ei(t,!!l.multiple,i,!1)}},Ri=ll,Ii=fs;var gh={usingClientEntryPoint:!1,Events:[Ws,bs,fa,Gr,fr,ll]},sa={findFiberByHostInstance:ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yh={bundleType:sa.bundleType,version:sa.version,rendererPackageName:sa.rendererPackageName,rendererConfig:sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=T(t),t===null?null:t.stateNode},findFiberByHostInstance:sa.findFiberByHostInstance||ph,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Za.isDisabled&&Za.supportsFiber)try{zr=Za.inject(yh),Fr=Za}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gh,reactDom_production_min.createPortal=function(t,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vl(i))throw Error(s(200));return fh(t,i,null,l)},reactDom_production_min.createRoot=function(t,i){if(!vl(t))throw Error(s(299));var l=!1,m="",G=vc;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onRecoverableError!==void 0&&(G=i.onRecoverableError)),i=pl(t,1,!1,null,null,l,!1,m,G),t[On]=i.current,Us(t.nodeType===8?t.parentNode:t),new gl(i)},reactDom_production_min.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=T(i),t=t===null?null:t.stateNode,t},reactDom_production_min.flushSync=function(t){return fs(t)},reactDom_production_min.hydrate=function(t,i,l){if(!qa(i))throw Error(s(200));return Qa(null,t,i,!0,l)},reactDom_production_min.hydrateRoot=function(t,i,l){if(!vl(t))throw Error(s(405));var m=l!=null&&l.hydratedSources||null,G=!1,Z="",pe=vc;if(l!=null&&(l.unstable_strictMode===!0&&(G=!0),l.identifierPrefix!==void 0&&(Z=l.identifierPrefix),l.onRecoverableError!==void 0&&(pe=l.onRecoverableError)),i=mc(i,null,t,1,l??null,G,!1,Z,pe),t[On]=i.current,Us(t),m)for(t=0;t<m.length;t++)l=m[t],G=l._getVersion,G=G(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,G]:i.mutableSourceEagerHydrationData.push(l,G);return new Ka(i)},reactDom_production_min.render=function(t,i,l){if(!qa(i))throw Error(s(200));return Qa(null,t,i,!1,l)},reactDom_production_min.unmountComponentAtNode=function(t){if(!qa(t))throw Error(s(40));return t._reactRootContainer?(fs(function(){Qa(null,null,t,!1,function(){t._reactRootContainer=null,t[On]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=ll,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(t,i,l,m){if(!qa(l))throw Error(s(200));if(t==null||t._reactInternals===void 0)throw Error(s(38));return Qa(t,i,l,!1,m)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var e=requireReactDom();return client.createRoot=e.createRoot,client.hydrateRoot=e.hydrateRoot,client}var clientExports=requireClient();var PopStateEventType="popstate";function createBrowserHistory(e={}){function r(o,c){let{pathname:x,search:u,hash:p}=o.location;return createLocation("",{pathname:x,search:u,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(o,c){return typeof c=="string"?c:createPath(c)}return getUrlBasedHistory(r,s,null,e)}function invariant$1(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function warning(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(e,r){return{usr:e.state,key:e.key,idx:r}}function createLocation(e,r,s=null,o){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof r=="string"?parsePath(r):r,state:s,key:r&&r.key||o||createKey()}}function createPath({pathname:e="/",search:r="",hash:s=""}){return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function parsePath(e){let r={};if(e){let s=e.indexOf("#");s>=0&&(r.hash=e.substring(s),e=e.substring(0,s));let o=e.indexOf("?");o>=0&&(r.search=e.substring(o),e=e.substring(0,o)),e&&(r.pathname=e)}return r}function getUrlBasedHistory(e,r,s,o={}){let{window:c=document.defaultView,v5Compat:x=!1}=o,u=c.history,p="POP",d=null,w=C();w==null&&(w=0,u.replaceState({...u.state,idx:w},""));function C(){return(u.state||{idx:null}).idx}function v(){p="POP";let se=C(),ce=se==null?null:se-w;w=se,d&&d({action:p,location:j.location,delta:ce})}function k(se,ce){p="PUSH";let ne=createLocation(j.location,se,ce);w=C()+1;let E=getHistoryState(ne,w),K=j.createHref(ne);try{u.pushState(E,"",K)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;c.location.assign(K)}x&&d&&d({action:p,location:j.location,delta:1})}function H(se,ce){p="REPLACE";let ne=createLocation(j.location,se,ce);w=C();let E=getHistoryState(ne,w),K=j.createHref(ne);u.replaceState(E,"",K),x&&d&&d({action:p,location:j.location,delta:0})}function P(se){return createBrowserURLImpl(se)}let j={get action(){return p},get location(){return e(c,u)},listen(se){if(d)throw new Error("A history only accepts one active listener");return c.addEventListener(PopStateEventType,v),d=se,()=>{c.removeEventListener(PopStateEventType,v),d=null}},createHref(se){return r(c,se)},createURL:P,encodeLocation(se){let ce=P(se);return{pathname:ce.pathname,search:ce.search,hash:ce.hash}},push:k,replace:H,go(se){return u.go(se)}};return j}function createBrowserURLImpl(e,r=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),invariant$1(s,"No window.location.(origin|href) available to create URL");let o=typeof e=="string"?e:createPath(e);return o=o.replace(/ $/,"%20"),!r&&o.startsWith("//")&&(o=s+o),new URL(o,s)}function matchRoutes(e,r,s="/"){return matchRoutesImpl(e,r,s,!1)}function matchRoutesImpl(e,r,s,o){let c=typeof r=="string"?parsePath(r):r,x=stripBasename(c.pathname||"/",s);if(x==null)return null;let u=flattenRoutes(e);rankRouteBranches(u);let p=null;for(let d=0;p==null&&d<u.length;++d){let w=decodePath(x);p=matchRouteBranch(u[d],w,o)}return p}function flattenRoutes(e,r=[],s=[],o="",c=!1){let x=(u,p,d=c,w)=>{let C={relativePath:w===void 0?u.path||"":w,caseSensitive:u.caseSensitive===!0,childrenIndex:p,route:u};if(C.relativePath.startsWith("/")){if(!C.relativePath.startsWith(o)&&d)return;invariant$1(C.relativePath.startsWith(o),`Absolute route path "${C.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(o.length)}let v=joinPaths([o,C.relativePath]),k=s.concat(C);u.children&&u.children.length>0&&(invariant$1(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),flattenRoutes(u.children,r,k,v,d)),!(u.path==null&&!u.index)&&r.push({path:v,score:computeScore(v,u.index),routesMeta:k})};return e.forEach((u,p)=>{if(u.path===""||!u.path?.includes("?"))x(u,p);else for(let d of explodeOptionalSegments(u.path))x(u,p,!0,d)}),r}function explodeOptionalSegments(e){let r=e.split("/");if(r.length===0)return[];let[s,...o]=r,c=s.endsWith("?"),x=s.replace(/\?$/,"");if(o.length===0)return c?[x,""]:[x];let u=explodeOptionalSegments(o.join("/")),p=[];return p.push(...u.map(d=>d===""?x:[x,d].join("/"))),c&&p.push(...u),p.map(d=>e.startsWith("/")&&d===""?"/":d)}function rankRouteBranches(e){e.sort((r,s)=>r.score!==s.score?s.score-r.score:compareIndexes(r.routesMeta.map(o=>o.childrenIndex),s.routesMeta.map(o=>o.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,r){let s=e.split("/"),o=s.length;return s.some(isSplat)&&(o+=splatPenalty),r&&(o+=indexRouteValue),s.filter(c=>!isSplat(c)).reduce((c,x)=>c+(paramRe.test(x)?dynamicSegmentValue:x===""?emptySegmentValue:staticSegmentValue),o)}function compareIndexes(e,r){return e.length===r.length&&e.slice(0,-1).every((o,c)=>o===r[c])?e[e.length-1]-r[r.length-1]:0}function matchRouteBranch(e,r,s=!1){let{routesMeta:o}=e,c={},x="/",u=[];for(let p=0;p<o.length;++p){let d=o[p],w=p===o.length-1,C=x==="/"?r:r.slice(x.length)||"/",v=matchPath({path:d.relativePath,caseSensitive:d.caseSensitive,end:w},C),k=d.route;if(!v&&w&&s&&!o[o.length-1].route.index&&(v=matchPath({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},C)),!v)return null;Object.assign(c,v.params),u.push({params:c,pathname:joinPaths([x,v.pathname]),pathnameBase:normalizePathname(joinPaths([x,v.pathnameBase])),route:k}),v.pathnameBase!=="/"&&(x=joinPaths([x,v.pathnameBase]))}return u}function matchPath(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,o]=compilePath(e.path,e.caseSensitive,e.end),c=r.match(s);if(!c)return null;let x=c[0],u=x.replace(/(.)\/+$/,"$1"),p=c.slice(1);return{params:o.reduce((w,{paramName:C,isOptional:v},k)=>{if(C==="*"){let P=p[k]||"";u=x.slice(0,x.length-P.length).replace(/(.)\/+$/,"$1")}const H=p[k];return v&&!H?w[C]=void 0:w[C]=(H||"").replace(/%2F/g,"/"),w},{}),pathname:x,pathnameBase:u,pattern:e}}function compilePath(e,r=!1,s=!0){warning(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let o=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,p,d)=>(o.push({paramName:p,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(o.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,r?void 0:"i"),o]}function decodePath(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return warning(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),e}}function stripBasename(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let s=r.endsWith("/")?r.length-1:r.length,o=e.charAt(s);return o&&o!=="/"?null:e.slice(s)||"/"}var ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function resolvePath(e,r="/"){let{pathname:s,search:o="",hash:c=""}=typeof e=="string"?parsePath(e):e,x;return s?(s=s.replace(/\/\/+/g,"/"),s.startsWith("/")?x=resolvePathname(s.substring(1),"/"):x=resolvePathname(s,r)):x=r,{pathname:x,search:normalizeSearch(o),hash:normalizeHash(c)}}function resolvePathname(e,r){let s=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function getInvalidPathError(e,r,s,o){return`Cannot include a '${e}' character in a manually specified \`to.${r}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(e){return e.filter((r,s)=>s===0||r.route.path&&r.route.path.length>0)}function getResolveToMatches(e){let r=getPathContributingMatches(e);return r.map((s,o)=>o===r.length-1?s.pathname:s.pathnameBase)}function resolveTo(e,r,s,o=!1){let c;typeof e=="string"?c=parsePath(e):(c={...e},invariant$1(!c.pathname||!c.pathname.includes("?"),getInvalidPathError("?","pathname","search",c)),invariant$1(!c.pathname||!c.pathname.includes("#"),getInvalidPathError("#","pathname","hash",c)),invariant$1(!c.search||!c.search.includes("#"),getInvalidPathError("#","search","hash",c)));let x=e===""||c.pathname==="",u=x?"/":c.pathname,p;if(u==null)p=s;else{let v=r.length-1;if(!o&&u.startsWith("..")){let k=u.split("/");for(;k[0]==="..";)k.shift(),v-=1;c.pathname=k.join("/")}p=v>=0?r[v]:"/"}let d=resolvePath(c,p),w=u&&u!=="/"&&u.endsWith("/"),C=(x||u===".")&&s.endsWith("/");return!d.pathname.endsWith("/")&&(w||C)&&(d.pathname+="/"),d}var joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,normalizeHash=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,ErrorResponseImpl=class{constructor(e,r,s,o=!1){this.status=e,this.statusText=r||"",this.internal=o,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function getRoutePattern(e){return e.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function parseToInfo(e,r){let s=e;if(typeof s!="string"||!ABSOLUTE_URL_REGEX.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let o=s,c=!1;if(isBrowser$2)try{let x=new URL(window.location.href),u=s.startsWith("//")?new URL(x.protocol+s):new URL(s),p=stripBasename(u.pathname,r);u.origin===x.origin&&p!=null?s=p+u.search+u.hash:c=!0}catch{warning(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:c,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var RSCRouterContext=reactExports.createContext(!1),ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";var ERROR_DIGEST_BASE="REACT_ROUTER_ERROR",ERROR_DIGEST_REDIRECT="REDIRECT",ERROR_DIGEST_ROUTE_ERROR_RESPONSE="ROUTE_ERROR_RESPONSE";function decodeRedirectErrorDigest(e){if(e.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_REDIRECT}:{`))try{let r=JSON.parse(e.slice(28));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.location=="string"&&typeof r.reloadDocument=="boolean"&&typeof r.replace=="boolean")return r}catch{}}function decodeRouteErrorResponseDigest(e){if(e.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_ROUTE_ERROR_RESPONSE}:{`))try{let r=JSON.parse(e.slice(40));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string")return new ErrorResponseImpl(r.status,r.statusText,r.data)}catch{}}function useHref(e,{relative:r}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:o}=reactExports.useContext(NavigationContext),{hash:c,pathname:x,search:u}=useResolvedPath(e,{relative:r}),p=x;return s!=="/"&&(p=x==="/"?s:joinPaths([s,x])),o.createHref({pathname:p,search:u,hash:c})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=reactExports.useContext(RouteContext);return e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let e=reactExports.useContext(DataRouterContext),{basename:r,navigator:s}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),x=JSON.stringify(getResolveToMatches(o)),u=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{u.current=!0}),reactExports.useCallback((d,w={})=>{if(warning(u.current,navigateEffectWarning),!u.current)return;if(typeof d=="number"){s.go(d);return}let C=resolveTo(d,JSON.parse(x),c,w.relative==="path");e==null&&r!=="/"&&(C.pathname=C.pathname==="/"?r:joinPaths([r,C.pathname])),(w.replace?s.replace:s.push)(C,w.state,w)},[r,s,x,c,e])}reactExports.createContext(null);function useResolvedPath(e,{relative:r}={}){let{matches:s}=reactExports.useContext(RouteContext),{pathname:o}=useLocation(),c=JSON.stringify(getResolveToMatches(s));return reactExports.useMemo(()=>resolveTo(e,JSON.parse(c),o,r==="path"),[e,c,o,r])}function useRoutesImpl(e,r,s,o,c){invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:x}=reactExports.useContext(NavigationContext),{matches:u}=reactExports.useContext(RouteContext),p=u[u.length-1],d=p?p.params:{},w=p?p.pathname:"/",C=p?p.pathnameBase:"/",v=p&&p.route;{let ne=v&&v.path||"";warningOnce(w,!v||ne.endsWith("*")||ne.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${ne}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ne}"> to <Route path="${ne==="/"?"*":`${ne}/*`}">.`)}let k=useLocation(),H;H=k;let P=H.pathname||"/",j=P;if(C!=="/"){let ne=C.replace(/^\//,"").split("/");j="/"+P.replace(/^\//,"").split("/").slice(ne.length).join("/")}let se=matchRoutes(e,{pathname:j});return warning(v||se!=null,`No routes matched location "${H.pathname}${H.search}${H.hash}" `),warning(se==null||se[se.length-1].route.element!==void 0||se[se.length-1].route.Component!==void 0||se[se.length-1].route.lazy!==void 0,`Matched leaf route at location "${H.pathname}${H.search}${H.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(se&&se.map(ne=>Object.assign({},ne,{params:Object.assign({},d,ne.params),pathname:joinPaths([C,x.encodeLocation?x.encodeLocation(ne.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ne.pathname]),pathnameBase:ne.pathnameBase==="/"?C:joinPaths([C,x.encodeLocation?x.encodeLocation(ne.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ne.pathnameBase])})),u,s,o,c)}function DefaultErrorComponent(){let e=useRouteError(),r=isRouteErrorResponse(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:o},x={padding:"2px 4px",backgroundColor:o},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:x},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:x},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},r),s?reactExports.createElement("pre",{style:c},s):null,u)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){this.props.onError?this.props.onError(e,r):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const s=decodeRouteErrorResponseDigest(e.digest);s&&(e=s)}let r=e!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?reactExports.createElement(RSCErrorHandler,{error:e},r):r}};RenderErrorBoundary.contextType=RSCRouterContext;var errorRedirectHandledMap=new WeakMap;function RSCErrorHandler({children:e,error:r}){let{basename:s}=reactExports.useContext(NavigationContext);if(typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){let o=decodeRedirectErrorDigest(r.digest);if(o){let c=errorRedirectHandledMap.get(r);if(c)throw c;let x=parseToInfo(o.location,s);if(isBrowser$2&&!errorRedirectHandledMap.get(r))if(x.isExternal||o.reloadDocument)window.location.href=x.absoluteURL||x.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(x.to,{replace:o.replace}));throw errorRedirectHandledMap.set(r,u),u}return reactExports.createElement("meta",{httpEquiv:"refresh",content:`0;url=${x.absoluteURL||x.to}`})}}return e}function RenderedRoute({routeContext:e,match:r,children:s}){let o=reactExports.useContext(DataRouterContext);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),reactExports.createElement(RouteContext.Provider,{value:e},s)}function _renderMatches(e,r=[],s=null,o=null,c=null){if(e==null){if(!s)return null;if(s.errors)e=s.matches;else if(r.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let x=e,u=s?.errors;if(u!=null){let C=x.findIndex(v=>v.route.id&&u?.[v.route.id]!==void 0);invariant$1(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),x=x.slice(0,Math.min(x.length,C+1))}let p=!1,d=-1;if(s)for(let C=0;C<x.length;C++){let v=x[C];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=C),v.route.id){let{loaderData:k,errors:H}=s,P=v.route.loader&&!k.hasOwnProperty(v.route.id)&&(!H||H[v.route.id]===void 0);if(v.route.lazy||P){p=!0,d>=0?x=x.slice(0,d+1):x=[x[0]];break}}}let w=s&&o?(C,v)=>{o(C,{location:s.location,params:s.matches?.[0]?.params??{},unstable_pattern:getRoutePattern(s.matches),errorInfo:v})}:void 0;return x.reduceRight((C,v,k)=>{let H,P=!1,j=null,se=null;s&&(H=u&&v.route.id?u[v.route.id]:void 0,j=v.route.errorElement||defaultErrorElement,p&&(d<0&&k===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,se=null):d===k&&(P=!0,se=v.route.hydrateFallbackElement||null)));let ce=r.concat(x.slice(0,k+1)),ne=()=>{let E;return H?E=j:P?E=se:v.route.Component?E=reactExports.createElement(v.route.Component,null):v.route.element?E=v.route.element:E=C,reactExports.createElement(RenderedRoute,{match:v,routeContext:{outlet:C,matches:ce,isDataRoute:s!=null},children:E})};return s&&(v.route.ErrorBoundary||v.route.errorElement||k===0)?reactExports.createElement(RenderErrorBoundary,{location:s.location,revalidation:s.revalidation,component:j,error:H,children:ne(),routeContext:{outlet:null,matches:ce,isDataRoute:!0},onError:w}):ne()},null)}function getDataRouterConsoleError(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(e){let r=reactExports.useContext(DataRouterContext);return invariant$1(r,getDataRouterConsoleError(e)),r}function useDataRouterState(e){let r=reactExports.useContext(DataRouterStateContext);return invariant$1(r,getDataRouterConsoleError(e)),r}function useRouteContext(e){let r=reactExports.useContext(RouteContext);return invariant$1(r,getDataRouterConsoleError(e)),r}function useCurrentRouteId(e){let r=useRouteContext(e),s=r.matches[r.matches.length-1];return invariant$1(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let e=reactExports.useContext(RouteErrorContext),r=useDataRouterState("useRouteError"),s=useCurrentRouteId("useRouteError");return e!==void 0?e:r.errors?.[s]}function useNavigateStable(){let{router:e}=useDataRouterContext("useNavigate"),r=useCurrentRouteId("useNavigate"),s=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{s.current=!0}),reactExports.useCallback(async(c,x={})=>{warning(s.current,navigateEffectWarning),s.current&&(typeof c=="number"?await e.navigate(c):await e.navigate(c,{fromRouteId:r,...x}))},[e,r])}var alreadyWarned={};function warningOnce(e,r,s){!r&&!alreadyWarned[e]&&(alreadyWarned[e]=!0,warning(!1,s))}reactExports.memo(DataRoutes);function DataRoutes({routes:e,future:r,state:s,onError:o}){return useRoutesImpl(e,void 0,s,o,r)}function Router({basename:e="/",children:r=null,location:s,navigationType:o="POP",navigator:c,static:x=!1,unstable_useTransitions:u}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=e.replace(/^\/*/,"/"),d=reactExports.useMemo(()=>({basename:p,navigator:c,static:x,unstable_useTransitions:u,future:{}}),[p,c,x,u]);typeof s=="string"&&(s=parsePath(s));let{pathname:w="/",search:C="",hash:v="",state:k=null,key:H="default"}=s,P=reactExports.useMemo(()=>{let j=stripBasename(w,p);return j==null?null:{location:{pathname:j,search:C,hash:v,state:k,key:H},navigationType:o}},[p,w,C,v,k,H,o]);return warning(P!=null,`<Router basename="${p}"> is not able to match the URL "${w}${C}${v}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:reactExports.createElement(NavigationContext.Provider,{value:d},reactExports.createElement(LocationContext.Provider,{children:r,value:P}))}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function isButtonElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="button"}function isFormElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="form"}function isInputElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="input"}function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function shouldProcessLinkClick(e,r){return e.button===0&&(!r||r==="_self")&&!isModifiedEvent(e)}function createSearchParams(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((r,s)=>{let o=e[s];return r.concat(Array.isArray(o)?o.map(c=>[s,c]):[[s,o]])},[]))}function getSearchParamsForLocation(e,r){let s=createSearchParams(e);return r&&r.forEach((o,c)=>{s.has(c)||r.getAll(c).forEach(x=>{s.append(c,x)})}),s}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(e){return e!=null&&!supportedFormEncTypes.has(e)?(warning(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):e}function getFormSubmissionInfo(e,r){let s,o,c,x,u;if(isFormElement(e)){let p=e.getAttribute("action");o=p?stripBasename(p,r):null,s=e.getAttribute("method")||defaultMethod,c=getFormEncType(e.getAttribute("enctype"))||defaultEncType,x=new FormData(e)}else if(isButtonElement(e)||isInputElement(e)&&(e.type==="submit"||e.type==="image")){let p=e.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||p.getAttribute("action");if(o=d?stripBasename(d,r):null,s=e.getAttribute("formmethod")||p.getAttribute("method")||defaultMethod,c=getFormEncType(e.getAttribute("formenctype"))||getFormEncType(p.getAttribute("enctype"))||defaultEncType,x=new FormData(p,e),!isFormDataSubmitterSupported()){let{name:w,type:C,value:v}=e;if(C==="image"){let k=w?`${w}.`:"";x.append(`${k}x`,"0"),x.append(`${k}y`,"0")}else w&&x.append(w,v)}}else{if(isHtmlElement(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=defaultMethod,o=null,c=defaultEncType,u=e}return x&&c==="text/plain"&&(u=x,x=void 0),{action:o,method:s.toLowerCase(),encType:c,formData:x,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function singleFetchUrl(e,r,s,o){let c=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s?c.pathname.endsWith("/")?c.pathname=`${c.pathname}_.${o}`:c.pathname=`${c.pathname}.${o}`:c.pathname==="/"?c.pathname=`_root.${o}`:r&&stripBasename(c.pathname,r)==="/"?c.pathname=`${r.replace(/\/$/,"")}/_root.${o}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${o}`,c}async function loadRouteModule(e,r){if(e.id in r)return r[e.id];try{let s=await import(e.module);return r[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function getKeyedPrefetchLinks(e,r,s){let o=await Promise.all(e.map(async c=>{let x=r.routes[c.route.id];if(x){let u=await loadRouteModule(x,s);return u.links?u.links():[]}return[]}));return dedupeLinkDescriptors(o.flat(1).filter(isHtmlLinkDescriptor).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function getNewMatchesForLinks(e,r,s,o,c,x){let u=(d,w)=>s[w]?d.route.id!==s[w].route.id:!0,p=(d,w)=>s[w].pathname!==d.pathname||s[w].route.path?.endsWith("*")&&s[w].params["*"]!==d.params["*"];return x==="assets"?r.filter((d,w)=>u(d,w)||p(d,w)):x==="data"?r.filter((d,w)=>{let C=o.routes[d.route.id];if(!C||!C.hasLoader)return!1;if(u(d,w)||p(d,w))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function getModuleLinkHrefs(e,r,{includeHydrateFallback:s}={}){return dedupeHrefs(e.map(o=>{let c=r.routes[o.route.id];if(!c)return[];let x=[c.module];return c.clientActionModule&&(x=x.concat(c.clientActionModule)),c.clientLoaderModule&&(x=x.concat(c.clientLoaderModule)),s&&c.hydrateFallbackModule&&(x=x.concat(c.hydrateFallbackModule)),c.imports&&(x=x.concat(c.imports)),x}).flat(1))}function dedupeHrefs(e){return[...new Set(e)]}function sortKeys(e){let r={},s=Object.keys(e).sort();for(let o of s)r[o]=e[o];return r}function dedupeLinkDescriptors(e,r){let s=new Set;return new Set(r),e.reduce((o,c)=>{let x=JSON.stringify(sortKeys(c));return s.has(x)||(s.add(x),o.push({key:x,link:c})),o},[])}function useDataRouterContext2(){let e=reactExports.useContext(DataRouterContext);return invariant2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function useDataRouterStateContext(){let e=reactExports.useContext(DataRouterStateContext);return invariant2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let e=reactExports.useContext(FrameworkContext);return invariant2(e,"You must render this element inside a <HydratedRouter> element"),e}function usePrefetchBehavior(e,r){let s=reactExports.useContext(FrameworkContext),[o,c]=reactExports.useState(!1),[x,u]=reactExports.useState(!1),{onFocus:p,onBlur:d,onMouseEnter:w,onMouseLeave:C,onTouchStart:v}=r,k=reactExports.useRef(null);reactExports.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let j=ce=>{ce.forEach(ne=>{u(ne.isIntersecting)})},se=new IntersectionObserver(j,{threshold:.5});return k.current&&se.observe(k.current),()=>{se.disconnect()}}},[e]),reactExports.useEffect(()=>{if(o){let j=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(j)}}},[o]);let H=()=>{c(!0)},P=()=>{c(!1),u(!1)};return s?e!=="intent"?[x,k,{}]:[x,k,{onFocus:composeEventHandlers(p,H),onBlur:composeEventHandlers(d,P),onMouseEnter:composeEventHandlers(w,H),onMouseLeave:composeEventHandlers(C,P),onTouchStart:composeEventHandlers(v,H)}]:[!1,k,{}]}function composeEventHandlers(e,r){return s=>{e&&e(s),s.defaultPrevented||r(s)}}function PrefetchPageLinks({page:e,...r}){let{router:s}=useDataRouterContext2(),o=reactExports.useMemo(()=>matchRoutes(s.routes,e,s.basename),[s.routes,e,s.basename]);return o?reactExports.createElement(PrefetchPageLinksImpl,{page:e,matches:o,...r}):null}function useKeyedPrefetchLinks(e){let{manifest:r,routeModules:s}=useFrameworkContext(),[o,c]=reactExports.useState([]);return reactExports.useEffect(()=>{let x=!1;return getKeyedPrefetchLinks(e,r,s).then(u=>{x||c(u)}),()=>{x=!0}},[e,r,s]),o}function PrefetchPageLinksImpl({page:e,matches:r,...s}){let o=useLocation(),{future:c,manifest:x,routeModules:u}=useFrameworkContext(),{basename:p}=useDataRouterContext2(),{loaderData:d,matches:w}=useDataRouterStateContext(),C=reactExports.useMemo(()=>getNewMatchesForLinks(e,r,w,x,o,"data"),[e,r,w,x,o]),v=reactExports.useMemo(()=>getNewMatchesForLinks(e,r,w,x,o,"assets"),[e,r,w,x,o]),k=reactExports.useMemo(()=>{if(e===o.pathname+o.search+o.hash)return[];let j=new Set,se=!1;if(r.forEach(ne=>{let E=x.routes[ne.route.id];!E||!E.hasLoader||(!C.some(K=>K.route.id===ne.route.id)&&ne.route.id in d&&u[ne.route.id]?.shouldRevalidate||E.hasClientLoader?se=!0:j.add(ne.route.id))}),j.size===0)return[];let ce=singleFetchUrl(e,p,c.unstable_trailingSlashAwareDataRequests,"data");return se&&j.size>0&&ce.searchParams.set("_routes",r.filter(ne=>j.has(ne.route.id)).map(ne=>ne.route.id).join(",")),[ce.pathname+ce.search]},[p,c.unstable_trailingSlashAwareDataRequests,d,o,x,C,r,e,u]),H=reactExports.useMemo(()=>getModuleLinkHrefs(v,x),[v,x]),P=useKeyedPrefetchLinks(v);return reactExports.createElement(reactExports.Fragment,null,k.map(j=>reactExports.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...s})),H.map(j=>reactExports.createElement("link",{key:j,rel:"modulepreload",href:j,...s})),P.map(({key:j,link:se})=>reactExports.createElement("link",{key:j,nonce:s.nonce,...se,crossOrigin:se.crossOrigin??s.crossOrigin})))}function mergeRefs(...e){return r=>{e.forEach(s=>{typeof s=="function"?s(r):s!=null&&(s.current=r)})}}var isBrowser2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser2&&(window.__reactRouterVersion="7.13.0")}catch{}function BrowserRouter({basename:e,children:r,unstable_useTransitions:s,window:o}){let c=reactExports.useRef();c.current==null&&(c.current=createBrowserHistory({window:o,v5Compat:!0}));let x=c.current,[u,p]=reactExports.useState({action:x.action,location:x.location}),d=reactExports.useCallback(w=>{s===!1?p(w):reactExports.startTransition(()=>p(w))},[s]);return reactExports.useLayoutEffect(()=>x.listen(d),[x,d]),reactExports.createElement(Router,{basename:e,children:r,location:u.location,navigationType:u.action,navigator:x,unstable_useTransitions:s})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:r,discover:s="render",prefetch:o="none",relative:c,reloadDocument:x,replace:u,state:p,target:d,to:w,preventScrollReset:C,viewTransition:v,unstable_defaultShouldRevalidate:k,...H},P){let{basename:j,unstable_useTransitions:se}=reactExports.useContext(NavigationContext),ce=typeof w=="string"&&ABSOLUTE_URL_REGEX2.test(w),ne=parseToInfo(w,j);w=ne.to;let E=useHref(w,{relative:c}),[K,Y,re]=usePrefetchBehavior(o,H),ue=useLinkClickHandler(w,{replace:u,state:p,target:d,preventScrollReset:C,relative:c,viewTransition:v,unstable_defaultShouldRevalidate:k,unstable_useTransitions:se});function q(Oe){r&&r(Oe),Oe.defaultPrevented||ue(Oe)}let he=reactExports.createElement("a",{...H,...re,href:ne.absoluteURL||E,onClick:ne.isExternal||x?r:q,ref:mergeRefs(P,Y),target:d,"data-discover":!ce&&s==="render"?"true":void 0});return K&&!ce?reactExports.createElement(reactExports.Fragment,null,he,reactExports.createElement(PrefetchPageLinks,{page:E})):he});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":r="page",caseSensitive:s=!1,className:o="",end:c=!1,style:x,to:u,viewTransition:p,children:d,...w},C){let v=useResolvedPath(u,{relative:w.relative}),k=useLocation(),H=reactExports.useContext(DataRouterStateContext),{navigator:P,basename:j}=reactExports.useContext(NavigationContext),se=H!=null&&useViewTransitionState(v)&&p===!0,ce=P.encodeLocation?P.encodeLocation(v).pathname:v.pathname,ne=k.pathname,E=H&&H.navigation&&H.navigation.location?H.navigation.location.pathname:null;s||(ne=ne.toLowerCase(),E=E?E.toLowerCase():null,ce=ce.toLowerCase()),E&&j&&(E=stripBasename(E,j)||E);const K=ce!=="/"&&ce.endsWith("/")?ce.length-1:ce.length;let Y=ne===ce||!c&&ne.startsWith(ce)&&ne.charAt(K)==="/",re=E!=null&&(E===ce||!c&&E.startsWith(ce)&&E.charAt(ce.length)==="/"),ue={isActive:Y,isPending:re,isTransitioning:se},q=Y?r:void 0,he;typeof o=="function"?he=o(ue):he=[o,Y?"active":null,re?"pending":null,se?"transitioning":null].filter(Boolean).join(" ");let Oe=typeof x=="function"?x(ue):x;return reactExports.createElement(Link,{...w,"aria-current":q,className:he,ref:C,style:Oe,to:u,viewTransition:p},typeof d=="function"?d(ue):d)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:e="render",fetcherKey:r,navigate:s,reloadDocument:o,replace:c,state:x,method:u=defaultMethod,action:p,onSubmit:d,relative:w,preventScrollReset:C,viewTransition:v,unstable_defaultShouldRevalidate:k,...H},P)=>{let{unstable_useTransitions:j}=reactExports.useContext(NavigationContext),se=useSubmit(),ce=useFormAction(p,{relative:w}),ne=u.toLowerCase()==="get"?"get":"post",E=typeof p=="string"&&ABSOLUTE_URL_REGEX2.test(p),K=Y=>{if(d&&d(Y),Y.defaultPrevented)return;Y.preventDefault();let re=Y.nativeEvent.submitter,ue=re?.getAttribute("formmethod")||u,q=()=>se(re||Y.currentTarget,{fetcherKey:r,method:ue,navigate:s,replace:c,state:x,relative:w,preventScrollReset:C,viewTransition:v,unstable_defaultShouldRevalidate:k});j&&s!==!1?reactExports.startTransition(()=>q()):q()};return reactExports.createElement("form",{ref:P,method:ne,action:ce,onSubmit:o?d:K,...H,"data-discover":!E&&e==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(e){let r=reactExports.useContext(DataRouterContext);return invariant$1(r,getDataRouterConsoleError2(e)),r}function useLinkClickHandler(e,{target:r,replace:s,state:o,preventScrollReset:c,relative:x,viewTransition:u,unstable_defaultShouldRevalidate:p,unstable_useTransitions:d}={}){let w=useNavigate(),C=useLocation(),v=useResolvedPath(e,{relative:x});return reactExports.useCallback(k=>{if(shouldProcessLinkClick(k,r)){k.preventDefault();let H=s!==void 0?s:createPath(C)===createPath(v),P=()=>w(e,{replace:H,state:o,preventScrollReset:c,relative:x,viewTransition:u,unstable_defaultShouldRevalidate:p});d?reactExports.startTransition(()=>P()):P()}},[C,w,v,s,o,r,e,c,x,u,p,d])}function useSearchParams(e){warning(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=reactExports.useRef(createSearchParams(e)),s=reactExports.useRef(!1),o=useLocation(),c=reactExports.useMemo(()=>getSearchParamsForLocation(o.search,s.current?null:r.current),[o.search]),x=useNavigate(),u=reactExports.useCallback((p,d)=>{const w=createSearchParams(typeof p=="function"?p(new URLSearchParams(c)):p);s.current=!0,x("?"+w,d)},[x,c]);return[c,u]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:e}=useDataRouterContext3("useSubmit"),{basename:r}=reactExports.useContext(NavigationContext),s=useRouteId(),o=e.fetch,c=e.navigate;return reactExports.useCallback(async(x,u={})=>{let{action:p,method:d,encType:w,formData:C,body:v}=getFormSubmissionInfo(x,r);if(u.navigate===!1){let k=u.fetcherKey||getUniqueFetcherId();await o(k,s,u.action||p,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:C,body:v,formMethod:u.method||d,formEncType:u.encType||w,flushSync:u.flushSync})}else await c(u.action||p,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:C,body:v,formMethod:u.method||d,formEncType:u.encType||w,replace:u.replace,state:u.state,fromRouteId:s,flushSync:u.flushSync,viewTransition:u.viewTransition})},[o,c,r,s])}function useFormAction(e,{relative:r}={}){let{basename:s}=reactExports.useContext(NavigationContext),o=reactExports.useContext(RouteContext);invariant$1(o,"useFormAction must be used inside a RouteContext");let[c]=o.matches.slice(-1),x={...useResolvedPath(e||".",{relative:r})},u=useLocation();if(e==null){x.search=u.search;let p=new URLSearchParams(x.search),d=p.getAll("index");if(d.some(C=>C==="")){p.delete("index"),d.filter(v=>v).forEach(v=>p.append("index",v));let C=p.toString();x.search=C?`?${C}`:""}}return(!e||e===".")&&c.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(x.pathname=x.pathname==="/"?s:joinPaths([s,x.pathname])),createPath(x)}function useViewTransitionState(e,{relative:r}={}){let s=reactExports.useContext(ViewTransitionContext);invariant$1(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=useDataRouterContext3("useViewTransitionState"),c=useResolvedPath(e,{relative:r});if(!s.isTransitioning)return!1;let x=stripBasename(s.currentLocation.pathname,o)||s.currentLocation.pathname,u=stripBasename(s.nextLocation.pathname,o)||s.nextLocation.pathname;return matchPath(c.pathname,u)!=null||matchPath(c.pathname,x)!=null}var dist={},Navbar={};const mcloud_logo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGIAAABPCAYAAAAQlxDmAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QgeDQk2h9q0aQAADmpJREFUeNrtXXuYU9W1/61zkgzDc2ByMuM45GR4fDyGZHiM16uFXm2V6idWKWpLa6Gg9oHaa1Xwtra0Kn0/KKKoxVKxLVKq9T7Ui9ZPvNZXZQAzmaBYYJLMMDBJEMSBYSY5Z90/Mthz9jxIhuRMBrP+y87JPnvt317PvfYOUKACFahABSpQz0SDefDbAFupe9SIU5/ldkeiOhZrKwCRQwpWw5FsK50tMc1hovMATAagArAJjx4mpn0gfQcTvZXU+IWZTfGWAhBnSIGxzlqWaBmAawCM6EcXDEIdM/8mkXBsqm1pOVEAIu2ZAwVU50IQ3QbGeVns+igYj9mIfzY1HD9YAKIP8o8tm0ayvg6MOWmy0Anw8S4Vla7EfECM770Tia27DtAKQBiobhbsjphyLwh3ALD38ti7BLykE79qk7TX2k8Wx42qhgFpd+XIkiQVVUPCJwmYDeAiAEN66W8HSbTU2xitLwABoK6iwumwJ/7cNWkitRGwWSfp0ZpQ698zNvKVI8foUtH1TLgJwLQeHjlOoEXecPQvH2sgGsaWnqdL0tMAzhW+0pjwoI7E92eEjh7NitpzO68kojUAqrrZJcL9vlDsWwToHzsggu4xUzWSXwUwWvhqD4GWesPR17P9zncnOUd0nqQfAri1+2Twz73h+IqPFRDBcaPdmmZ7A0CF8NWT8gksyXVgFnA75zHRHwCMEmTjDl84/quPBRBBRRmuDcXLAGYJDv8vfeHoCqvUw9uqMkMCngegmFQi8/yaSPx/rJwTaSCA0IrxQE8g1ISjd1qpo6eHY7tYlz4F0PuGZpmIngiMdY0/q4EIVLnmgrBIkMstvnB0QHRzTVNrA0j/HIAOQ/MwlviBsxaIf0yYUMQ6PySoxD2dnfYlA+WtAIAvFP8/ZtwlNF/mdyvXnJVAnEgeWwpgnFFLEWhpPuR/fJHYWjBeMQkqYdUWQD6rgKibBTtYv0vw3R/MhYvaT69Fl3XcACBpaJ40xWONVFgGhD2mXEUg1dDULhH9CHlE1c2xvQQ8ZlosjNvOLtVEWGxmkDd6G6OtyDPSZP45zInA8+s9pZPPCiACqms+AfNMQMj8O+QhTd8ffw/gOnPATWuD1XAMWiCCHqXcr7p+wcDmbi/WZTkfgWCAQDRUEOdLtDblLb9HuWzQRdZ+1XkjgdaitxQ0owng+b5IfEe+gFA3C3ZHXHkEwJI+HnvWnnQsnnLgwOG8lwi/R1lMoPXofR8AIIwF0StvV5X+S74A4Tis/PE0IADAFQlb5zN1s3rdM8kPIOrdo0YTo6eo9CSAhNA2VNKlhzkP0vEB1TUfjGt7+OrDHtr+1R53ZdWbouwDodwFwk8MTUdZ58V7muLPVldD1tqUmwCsgSFQIuYfMOTXBgwFCcOYtTVG95qB1ySdFnubovuCHqVcY34IoKsNv2odQcM8VaHQybwDom7c6FEOzbYbxtQ289d8kfhvTGCpyloAtyB/6YRMGF8dih36iLeKiqEOW+JdEMYaY4yaSGxN3qimf0yYUFSvKrc4NNvbEPYXNMn2Qjf0mZ9HflO9EQQAqG1pOQEiMQWyut6j/Cmglk4ZUCC2AHK9qtzcnvhgH4C1ADziMzLr54htOqE8z4HobXzndNMojOsYUkO96tp0JqnzfqumYKUyQZOxEcCFp3HMX+hUYvNqd6QM9S5PSYnM9u0AJghPHgawB2ArE4CUmnSa2m0umL/qi8TXf2TMq1xzWeetp5mz40y03BeKPkwA5xwIv8e5kJjWAxiWrqgD+G8QO8D0RQCVwjBWy8Oj/1EdROeA6CG3cxaIngVQZo7t8BQDbxNjIghfQvfyzt5oa7Fd+/zEve8fyxkQ9W7nTSB6uAe19iEBaxm8G6DbANSm2eV+bzg2cSD3IwwB6Po0H08Q8w9ZojAxbuBU/ZRIO9kmXV6zrzWadRvhV13LQPRI99/RE0mdJ3vDsbt94fgfNUpcCkIgzZTC7oEGIbUipWDaIIA+743E7/GFYo95w7E5BFoAoFl4biYl9Vd2TihXsgpEwO26lMD3C1LUDsJSXzj6RWPF9YzQ0aPFNm02A7/tIYgTRXIaD9DeuWB1p6ajEHRJn+0NR582NnrD0b+QRLXixhKASXJC+9O2NFQapaeOysaBeDvAY8wRJ33GF46+0acUjS9zIaF/koDxXW/8NwCXC2JxnS8S+/NAgcCAVK8qOwiYbmhuIcIDrEMHiEH42+l4TeWqnFuEwO+jwogzB0J1/hWgS0ySIOEyX2PslX4y/SIBF/+zjcOJhGPqQG2ZBjyurzPzQ8ZhSkxzpkWiGUf7wWo4tDblP4XFxkzSBX2VjJ5WJfhV1wIBBBBwS39A6PqtbtPw1a7cU1cbqUX2zh8MBAg7xzormPmn5kHS+v6AAADVQXTKJ3BdyhU39Mj6Q32pYOl0AZvE/GPBv/4vbzi24UyYr26O7QVhjSC+3/RXOSdZDYRNovsAjDQ0HWGZvndG/MVibUzSV2B2QmY09FEV0icQU9zOy5kw0dDUYZPt/56NCWhLFt0DYL+hqYiY1luZiW1QnRcDWGpeELwiXZezL6oJtb4JYKOpb+p9/7tPIHSiJWZh4N9NbTwYzsYkXNjc3E6g5YIBmROwqJZoG2DTQauF5h17wvGsbeEypPtgrgq5oLf9716B2OUpKSHgSlPeSJYezuZkdJ1J2CoYkV8FFWV4roFwupVlAGqM606X9GXZPEFUE25tZIE/1qVFGQFhY9snYD6545/WGPVne0JkDbcaDTeASn0or8wlCEGPUs6EewUD/ej0xsNv5cA33mh+TY+HcXoHgonmCB3+by4mpbo5thfgHwmG+/agR5meKyC01MaUsRz/YLEtuTwX7yoq5udhlrLauoqKoenbCOZaM5K0PVcT06YN+YVguGWNsToXhjvgcV4kbokyeGUmCbpMaPKe+IcA3jM02e0OzZeBsaYy0yqS9YZcAXFhc3M7MYve2EUB1bkwm++pmwU7p/bTjQC/6QvHNyCXRGgQYqmyTLymUpOIdRQdzuVYvZH4MwQ8JXCwut49anS23mGPK8sBqjYm8HSWb8x10pEYMfNn3ZkJECUmkT5w4ChyTEmS7wRgTHO4AEdWDLf/3DGVBHxbaH5keuRQELknYe64JBMgjAc3UFlZ6cj1aGeEDoXAdI8g1t/MRu0T2aS1AIxu8QHHEP6OFTGLDioSnJGODIy1uZ5nCJ0cbcWgix0j1wjGTZJ16ZdnYrgDVa653TKiTN/pMqQ5JzJnrcFMx9IHQkLI5O9LPNmKQU/cu7eDddwIw54vA7MDbueN/emv0eMZwjqvE6bmpZpI9HELU1qTBI+0Mf04gk2rEhLkmVaNuqYp9jeIhptoVX8M9zE+fgdO7YV0mSJodJtVvHSVZprcVclG76UNhAS8ISBziYUrCJzUvgXAeNbaReRYlUkfuzzlHgIEO0Brfc2tAav4cLyvXCDYpsaezoX0IRHSNnOkjU8HqlxllknFgfebGXSv2Wzha37VmbZkytDXADBGsS2OIfr3rVxQpPMXBB5eyijF4Yu07gewy5h+0nW+wUomEs7orwHabZxbAtals8cdcDvngfmz5sXEd1hloIHUdRMMWigEc09lBETXwB8XOrm1pzxJrqh2BxJE+s0wFWvR+QG3s88F8XplZTGnLj8xG+hQfLOVC6mzXfqGEI8dOhyO/TVjIIba9A0Ajhiayh2OTktF2xuKvwzQJsFw/9g/vszV229GyB3fhekYMXUSNEuLnv3njqkE8d1CSPDri837E+kBkUqE8WpBTG5vcLs+YSVTNujLARh971Ipqa/rcQI8ZeczsELIMaz2hg+/Y5mjAUhklzfAvAUbldvxYB/OUd/UlRltNNkKwqadY50VVjE2NRw/yIyVArML/KpydzcvifUnYawjYjRxu3SflQun3uNaCcalQlR3V1837qQVrQbcrkuZeKsJOEIgaZM/PXPvoZgVzG0DbKUeZScYXoGFTSRhI2u6B6lz26VCOuGamnD0KctAUJWbAfHEFL/oDcfn9lWYnHbaIKAqqxi4W2jeq8t8RepIrAV6V3UtIPCTmcRTvnDsPKvUUYOq3NvDHB0kiWac7kx52qWO08KxldT9mO4ESaPtfo/zC5bYCu3ktsyceH7JinEFPUp5QFWe6QGEYwyel87B/rSBIECXhscWA3ha+GokMT1RryrP1ruds3LJsE5DMkxxSCU5BUBRhterzts1xjsQy0iBDyDhyppwfGea85sZbQHkKapyPwPLeunwVZ3wqGaTn8um/Xi9srJ4mNyxRbzBAKlc/+tInbkQtyBPSExz+1u11xv/kzxltcT6lwB8WYgTTlGzJNG8TIot+p9adruuZ+J16P3SWwbwLoAgg0NE1P8yFcYwMK4yHiTsopc7E/Zra1ta4inX1bmQmP4gSHqSga0S+B0m0s9AHEtAPAnATMEtFem5zoR98akx5RwIoOuCxKR8P4iuwgCQRnLVjNChkNmgOx8n0JcHYDgxZrrTF4n+PtNjWxnZiJ6oev+RiC8Sv1pims3AM7D2wMkxEYQUQ5LVtxq3MGiFYwiPr4lEH+8PCGcsESLtrjpHTeqJRQCuAKgWOb79qyeJqFedvwfo+hxPfitALxLrm+OR+Nbe0hYDBoTJgR83elRRQp7IRFUskZN0HtlvE0GkADyJgMtgPn3zcqecvLp2/5EPAKDerVwLwmZB0g8y8ByBw2Dq32FJiTsBOgpdaiLmxmlN0f39XfmWA5Gb1IGyBIwN3VYn85sgUgBcYOKJsJ3bpYtrWluP5ztvg+6vbQKq8iQDC9J4tE3WMCNV0pn/JA02IDoS9kXEON0VEkfA0vzBAsKglIhTeZ2AqixDKqg03oPRAcYTxLTK2xTdN5h4GtT/unUqzwOgPEncnuhwNOXrfwgVqEAFKlCBCtRf+n97Y2CaOfCNbwAAAABJRU5ErkJggg==",mcloud_logo$1=Object.freeze(Object.defineProperty({__proto__:null,default:mcloud_logo},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(mcloud_logo$1);var hasRequiredNavbar;function requireNavbar(){if(hasRequiredNavbar)return Navbar;hasRequiredNavbar=1,Object.defineProperty(Navbar,"__esModule",{value:!0}),Navbar.default=void 0;var e=o(require$$1),r=s(requireReact());function s(d,w){if(typeof WeakMap=="function")var C=new WeakMap,v=new WeakMap;return(s=function(k,H){if(!H&&k&&k.__esModule)return k;var P,j,se={__proto__:null,default:k};if(k===null||typeof k!="object"&&typeof k!="function")return se;if(P=H?v:C){if(P.has(k))return P.get(k);P.set(k,se)}for(const ce in k)ce!=="default"&&{}.hasOwnProperty.call(k,ce)&&((j=(P=Object.defineProperty)&&Object.getOwnPropertyDescriptor(k,ce))&&(j.get||j.set)?P(se,ce,j):se[ce]=k[ce]);return se})(d,w)}function o(d){return d&&d.__esModule?d:{default:d}}const c={learn:{name:"LEARN",link:"https://www.materialscloud.org/learn"},work:{name:"WORK",link:"https://www.materialscloud.org/work"},discover:{name:"DISCOVER",link:"https://www.materialscloud.org/discover"},explore:{name:"EXPLORE",link:"https://www.materialscloud.org/explore"},archive:{name:"ARCHIVE",link:"https://www.materialscloud.org/archive"}},x={policies:{name:"Policies",link:"https://www.materialscloud.org/policies"},dmp:{name:"Data Management Plan",link:"https://www.materialscloud.org/dmp"},terms:{name:"Terms of Use",link:"https://www.materialscloud.org/termssummary"},infrastructure:{name:"Infrastructure",link:"https://www.materialscloud.org/infrastructure"},team:{name:"Team & Contact",link:"https://www.materialscloud.org/team"},partners:{name:"Partners",link:"https://www.materialscloud.org/home#partners"},restapi:{name:"Connect your REST API",link:"https://www.materialscloud.org/explore/connect"}},u=d=>{let{activeSection:w}=d;const[C,v]=(0,r.useState)(!1),k=(0,r.useRef)(null);(0,r.useEffect)(()=>{function j(se){k.current&&!k.current.contains(se.target)&&v(!1)}return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const H=()=>v(j=>!j),P="dropdown-content"+(C?" dropdown-open":"");return r.default.createElement("div",{ref:k,className:"more-dropdown"},r.default.createElement("span",{className:"more-btn",onClick:H},"More ",r.default.createElement("i",{className:"fa fa-caret-down"})),r.default.createElement("div",{className:P},Object.keys(x).map((j,se)=>{const{link:ce,name:ne}=x[j],E=j===w?"active":"";return r.default.createElement("a",{key:se,className:E,href:ce},ne)})))},p=d=>{let{activeSection:w}=d;return r.default.createElement("div",{className:"mc-navbar"},r.default.createElement("a",{className:"mc-navbrand",href:"https://www.materialscloud.org/home"},r.default.createElement("img",{src:e.default,loading:"lazy",height:"50",alt:"MC logo"})),Object.keys(c).map((C,v)=>{let k="mc-navlink";return C===w&&(k+=" active"),r.default.createElement("a",{key:v,className:k,href:c[C].link},c[C].name)}),r.default.createElement(u,{activeSection:w}))};return Navbar.default=p,Navbar}var Breadcrumbs={},hasRequiredBreadcrumbs;function requireBreadcrumbs(){if(hasRequiredBreadcrumbs)return Breadcrumbs;hasRequiredBreadcrumbs=1,Object.defineProperty(Breadcrumbs,"__esModule",{value:!0}),Breadcrumbs.default=void 0;var e=r(requireReact());function r(o){return o&&o.__esModule?o:{default:o}}const s=o=>{let{breadcrumbsPath:c}=o;return e.default.createElement("ul",{className:"mc-breadcrumb"},c.map((x,u)=>e.default.createElement("li",{key:u},e.default.createElement("a",{href:x.link},x.name))))};return Breadcrumbs.default=s,Breadcrumbs}var hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1,Object.defineProperty(dist,"__esModule",{value:!0}),dist.default=void 0;var e=o(requireReact()),r=o(requireNavbar()),s=o(requireBreadcrumbs());function o(x){return x&&x.__esModule?x:{default:x}}const c=x=>{let{activeSection:u,breadcrumbsPath:p}=x;return e.default.createElement("div",null,e.default.createElement(r.default,{activeSection:u}),e.default.createElement(s.default,{breadcrumbsPath:p}))};return dist.default=c,dist}var distExports=requireDist();const MaterialsCloudHeader=getDefaultExportFromCjs(distExports);function OptimadeHeader(){return jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("img",{src:"/optimade_logo-min.png",alt:"OptimadeLogo",className:"h-18 sm:h-24 md:h-32 w-auto object-contain"})})}const baseContainer="w-full border border-slate-500 rounded-sm bg-slate-50 shadow-sm ",containerStyle=baseContainer+" p-2",containerStyleDropdown=baseContainer+" overflow-hidden text-[11px] md:text-[13px]",containerStyleHalf=baseContainer+` p-2 md:w-1/2  min-h-48 md:h-[450px] h-[200px] text-[11px] md:text-[13px]
   overflow-auto`,warningContainerStyle="w-full rounded-sm bg-yellow-100 border border-yellow-400 text-yellow-800 p-3 text-center",textNormal=" text-sm md:text-base",textLarge=" text-base md:text-lg",textHyperlink=" text-blue-500 hover:underline hover:text-blue-600",textSmall=" text-xs md:text-sm",textTiny=" text-[13px] md:text-[13px]",textError=" text-center text-red-500",sectionclassName="space-y-2";function OptimadeFAQs(){const[e,r]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:`${containerStyle} ${textSmall} [&>p]:pl-4 [&>section>p]:pl-1`,children:[jsxRuntimeExports.jsxs("section",{className:sectionclassName,children:[jsxRuntimeExports.jsxs("p",{children:["The Materials Cloud OPTIMADE Client is a tool to search through databases exposing an"," ",jsxRuntimeExports.jsx("a",{href:"https://www.optimade.org/",target:"_blank",className:textHyperlink,rel:"noopener noreferrer",children:"OPTIMADE RESTful API"}),". All providers are retrieved from the"," ",jsxRuntimeExports.jsx("a",{href:"https://providers.optimade.org/",target:"_blank",className:textHyperlink,rel:"noopener noreferrer",children:"official OPTIMADE consortium's list"}),"."]}),jsxRuntimeExports.jsxs("button",{className:`flex items-center px-2 mt-2 mb-1 ${textHyperlink} hover:cursor-pointer`,onClick:()=>r(!e),children:[jsxRuntimeExports.jsx("span",{className:textHyperlink,children:e?"Hide additional Info":"More info"}),jsxRuntimeExports.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${e?"rotate-90":"rotate-0"}`,fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]}),e&&jsxRuntimeExports.jsxs("section",{className:sectionclassName,children:[jsxRuntimeExports.jsx("h1",{className:textLarge,children:"Frequently asked questions"}),jsxRuntimeExports.jsx("h4",{className:textNormal,children:"Why is a given provider not shown in the client?"}),jsxRuntimeExports.jsxs("p",{children:["This webapp has filtered some providers for various reasons; some do not support open queries and others have no link to a meta-database. To check the validity of a particular provider visit"," ",jsxRuntimeExports.jsx("a",{href:"https://optimade.org/providers-dashboard/",target:"_blank",className:textHyperlink,rel:"noopener noreferrer",children:"the providers dashboard"}),". Querying of missing providers should still be possible through the 'Custom endpoint' method."]}),jsxRuntimeExports.jsx("h4",{className:textNormal,children:"Why does the structure visualiser not work for some structures?"}),jsxRuntimeExports.jsx("p",{children:"The visualiser is fairly primitive and the OPTIMADE specification is very broad. For complex structure data (assemblies, unknown positions, or partial occupancies), the JSON response is still fetched but the visualisation often fails."}),jsxRuntimeExports.jsxs("p",{className:"italic",children:["An earlier version of this tool was developed by Casper Welzel Andersen. See the source code"," ",jsxRuntimeExports.jsx("a",{href:"https://github.com/CasperWA/voila-optimade-client",target:"_blank",className:textHyperlink,rel:"noopener noreferrer",children:"here."})]})]})]})}const isBoolean=e=>typeof e=="boolean"||e instanceof Boolean,isNumber=e=>typeof e=="number"||e instanceof Number,isBigInt=e=>typeof e=="bigint"||e instanceof BigInt,isDate=e=>!!e&&e instanceof Date,isString=e=>typeof e=="string"||e instanceof String,isArray=e=>Array.isArray(e),isObject$1=e=>typeof e=="object"&&e!==null,isFunction=e=>!!e&&e instanceof Object&&typeof e=="function";function quoteString(e,r){return r===void 0&&(r=!1),!e||r?`"${e}"`:e}function quoteStringValue(e,r,s){return s?JSON.stringify(e):r?`"${e}"`:e}function ExpandableObject(e){let{field:r,value:s,data:o,lastElement:c,openBracket:x,closeBracket:u,level:p,style:d,shouldExpandNode:w,clickToExpandNode:C,outerRef:v,beforeExpandChange:k}=e;const H=reactExports.useRef(!1),[P,j]=reactExports.useState(()=>w(p,s,r)),se=reactExports.useRef(null);reactExports.useEffect(()=>{H.current?j(w(p,s,r)):H.current=!0},[w]);const ce=reactExports.useId();if(o.length===0)return EmptyObject({field:r,openBracket:x,closeBracket:u,lastElement:c,style:d});const ne=P?d.collapseIcon:d.expandIcon,E=P?d.ariaLables.collapseJson:d.ariaLables.expandJson,K=p+1,Y=o.length-1,re=he=>{P!==he&&(!k||k({level:p,value:s,field:r,newExpandValue:he}))&&j(he)},ue=he=>{if(he.key==="ArrowRight"||he.key==="ArrowLeft")he.preventDefault(),re(he.key==="ArrowRight");else if(he.key==="ArrowUp"||he.key==="ArrowDown"){he.preventDefault();const Oe=he.key==="ArrowUp"?-1:1;if(!v.current)return;const be=v.current.querySelectorAll("[role=button]");let Te=-1;for(let Ve=0;Ve<be.length;Ve++)if(be[Ve].tabIndex===0){Te=Ve;break}if(Te<0)return;const Ae=(Te+Oe+be.length)%be.length;be[Te].tabIndex=-1,be[Ae].tabIndex=0,be[Ae].focus()}},q=()=>{var he;re(!P);const Oe=se.current;if(!Oe)return;const be=(he=v.current)===null||he===void 0?void 0:he.querySelector('[role=button][tabindex="0"]');be&&(be.tabIndex=-1),Oe.tabIndex=0,Oe.focus()};return reactExports.createElement("div",{className:d.basicChildStyle,role:"treeitem","aria-expanded":P,"aria-selected":void 0},reactExports.createElement("span",{className:ne,onClick:q,onKeyDown:ue,role:"button","aria-label":E,"aria-expanded":P,"aria-controls":P?ce:void 0,ref:se,tabIndex:p===0?0:-1}),(r||r==="")&&(C?reactExports.createElement("span",{className:d.clickableLabel,onClick:q,onKeyDown:ue},quoteString(r,d.quotesForFieldNames),":"):reactExports.createElement("span",{className:d.label},quoteString(r,d.quotesForFieldNames),":")),reactExports.createElement("span",{className:d.punctuation},x),P?reactExports.createElement("ul",{id:ce,role:"group",className:d.childFieldsContainer},o.map((he,Oe)=>reactExports.createElement(DataRender,{key:he[0]||Oe,field:he[0],value:he[1],style:d,lastElement:Oe===Y,level:K,shouldExpandNode:w,clickToExpandNode:C,beforeExpandChange:k,outerRef:v}))):reactExports.createElement("span",{className:d.collapsedContent,onClick:q,onKeyDown:ue}),reactExports.createElement("span",{className:d.punctuation},u),!c&&reactExports.createElement("span",{className:d.punctuation},","))}function EmptyObject(e){let{field:r,openBracket:s,closeBracket:o,lastElement:c,style:x}=e;return reactExports.createElement("div",{className:x.basicChildStyle,role:"treeitem","aria-selected":void 0},(r||r==="")&&reactExports.createElement("span",{className:x.label},quoteString(r,x.quotesForFieldNames),":"),reactExports.createElement("span",{className:x.punctuation},s),reactExports.createElement("span",{className:x.punctuation},o),!c&&reactExports.createElement("span",{className:x.punctuation},","))}function JsonObject(e){let{field:r,value:s,style:o,lastElement:c,shouldExpandNode:x,clickToExpandNode:u,level:p,outerRef:d,beforeExpandChange:w}=e;return ExpandableObject({field:r,value:s,lastElement:c||!1,level:p,openBracket:"{",closeBracket:"}",style:o,shouldExpandNode:x,clickToExpandNode:u,data:Object.keys(s).map(C=>[C,s[C]]),outerRef:d,beforeExpandChange:w})}function JsonArray(e){let{field:r,value:s,style:o,lastElement:c,level:x,shouldExpandNode:u,clickToExpandNode:p,outerRef:d,beforeExpandChange:w}=e;return ExpandableObject({field:r,value:s,lastElement:c||!1,level:x,openBracket:"[",closeBracket:"]",style:o,shouldExpandNode:u,clickToExpandNode:p,data:s.map(C=>[void 0,C]),outerRef:d,beforeExpandChange:w})}function JsonPrimitiveValue(e){let{field:r,value:s,style:o,lastElement:c}=e,x,u=o.otherValue;return s===null?(x="null",u=o.nullValue):s===void 0?(x="undefined",u=o.undefinedValue):isString(s)?(x=quoteStringValue(s,!o.noQuotesForStringValues,o.stringifyStringValues),u=o.stringValue):isBoolean(s)?(x=s?"true":"false",u=o.booleanValue):isNumber(s)?(x=s.toString(),u=o.numberValue):isBigInt(s)?(x=`${s.toString()}n`,u=o.numberValue):isDate(s)?x=s.toISOString():isFunction(s)?x="function() { }":x=s.toString(),reactExports.createElement("div",{className:o.basicChildStyle,role:"treeitem","aria-selected":void 0},(r||r==="")&&reactExports.createElement("span",{className:o.label},quoteString(r,o.quotesForFieldNames),":"),reactExports.createElement("span",{className:u},x),!c&&reactExports.createElement("span",{className:o.punctuation},","))}function DataRender(e){const r=e.value;return isArray(r)?reactExports.createElement(JsonArray,Object.assign({},e)):isObject$1(r)&&!isDate(r)&&!isFunction(r)?reactExports.createElement(JsonObject,Object.assign({},e)):reactExports.createElement(JsonPrimitiveValue,Object.assign({},e))}var styles={"container-light":"_2IvMF _GzYRV","basic-element-style":"_2bkNM","child-fields-container":"_1BXBN","label-light":"_1MGIk","clickable-label-light":"_2YKJg _1MGIk _1MFti","punctuation-light":"_3uHL6 _3eOF8","value-null-light":"_2T6PJ","value-undefined-light":"_1Gho6","value-string-light":"_vGjyY","value-number-light":"_1bQdo","value-boolean-light":"_3zQKs","value-other-light":"_1xvuR","collapse-icon-light":"_oLqym _f10Tu _1MFti _1LId0","expand-icon-light":"_2AXVT _f10Tu _1MFti _1UmXx","collapsed-content-light":"_2KJWg _1pNG9 _1MFti"};const defaultAriaLables={collapseJson:"collapse JSON",expandJson:"expand JSON"},defaultStyles={container:styles["container-light"],basicChildStyle:styles["basic-element-style"],childFieldsContainer:styles["child-fields-container"],label:styles["label-light"],clickableLabel:styles["clickable-label-light"],nullValue:styles["value-null-light"],undefinedValue:styles["value-undefined-light"],stringValue:styles["value-string-light"],booleanValue:styles["value-boolean-light"],numberValue:styles["value-number-light"],otherValue:styles["value-other-light"],punctuation:styles["punctuation-light"],collapseIcon:styles["collapse-icon-light"],expandIcon:styles["expand-icon-light"],collapsedContent:styles["collapsed-content-light"],noQuotesForStringValues:!1,quotesForFieldNames:!1,ariaLables:defaultAriaLables,stringifyStringValues:!1},allExpanded=()=>!0,JsonView=e=>{let{data:r,style:s=defaultStyles,shouldExpandNode:o=allExpanded,clickToExpandNode:c=!1,beforeExpandChange:x,compactTopLevel:u,...p}=e;const d=reactExports.useRef(null);return reactExports.createElement("div",Object.assign({"aria-label":"JSON view"},p,{className:s.container,ref:d,role:"tree"}),u&&isObject$1(r)?Object.entries(r).map(w=>{let[C,v]=w;return reactExports.createElement(DataRender,{key:C,field:C,value:v,style:{...defaultStyles,...s},lastElement:!0,level:1,shouldExpandNode:o,clickToExpandNode:c,beforeExpandChange:x,outerRef:d})}):reactExports.createElement(DataRender,{value:r,style:{...defaultStyles,...s},lastElement:!0,level:0,shouldExpandNode:o,clickToExpandNode:c,outerRef:d,beforeExpandChange:x}))},ControlBox=({viewerParams:e,onViewerParamChange:r,onViewerEvent:s})=>{const o=(u,p)=>{let d=e.supercell;d[u]=parseInt(p),r("supercell",d)},c=u=>{r(u,!e[u])},x=u=>{s("camera",u)};return jsxRuntimeExports.jsxs("div",{className:"control-box",children:[jsxRuntimeExports.jsxs("div",{className:"control-box-row",children:[jsxRuntimeExports.jsxs("div",{className:"supercell-container",children:[jsxRuntimeExports.jsx("label",{children:"Supercell: "}),jsxRuntimeExports.jsx("div",{style:{display:"flex"},children:[0,1,2].map(u=>jsxRuntimeExports.jsx("input",{className:"supercell-input",type:"number",min:"1",max:"99",value:e.supercell[u],onChange:p=>o(u,p.target.value)},u))})]}),jsxRuntimeExports.jsxs("div",{className:"camera-controls",children:[jsxRuntimeExports.jsx("label",{children:"Camera: "}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>x("x"),children:"x"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>x("y"),children:"y"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>x("z"),children:"z"})]})]}),jsxRuntimeExports.jsxs("div",{className:"control-box-row",style:{display:"flex"},children:[jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:e.bonds,onChange:()=>c("bonds")}),jsxRuntimeExports.jsx("span",{children:"Bonds"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:e.packedCell,onChange:()=>c("packedCell")}),jsxRuntimeExports.jsx("span",{children:"Packed cell"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:e.atomLabels,onChange:()=>c("atomLabels")}),jsxRuntimeExports.jsx("span",{children:"Atom labels"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:e.spaceFilling,onChange:()=>c("vdwRadius")}),jsxRuntimeExports.jsx("span",{children:"vdW radius"})]})]})]})};var _3DmolMin={exports:{}};var hasRequired_3DmolMin;function require_3DmolMin(){return hasRequired_3DmolMin||(hasRequired_3DmolMin=1,(function(module,exports$1){var factory;factory=()=>(()=>{var __webpack_modules__={3:(e,r,s)=>{var o=s(663),c=s(981),x=s(972),u=s(681),p=s(834),d=s(746),w=s(670),C=Object.prototype.toString;function v(H){if(!(this instanceof v))return new v(H);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},H||{});var P=this.options;P.raw&&P.windowBits>=0&&P.windowBits<16&&(P.windowBits=-P.windowBits,P.windowBits===0&&(P.windowBits=-15)),!(P.windowBits>=0&&P.windowBits<16)||H&&H.windowBits||(P.windowBits+=32),P.windowBits>15&&P.windowBits<48&&(15&P.windowBits||(P.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var j=o.inflateInit2(this.strm,P.windowBits);if(j!==u.Z_OK)throw new Error(p[j]);if(this.header=new w,o.inflateGetHeader(this.strm,this.header),P.dictionary&&(typeof P.dictionary=="string"?P.dictionary=x.string2buf(P.dictionary):C.call(P.dictionary)==="[object ArrayBuffer]"&&(P.dictionary=new Uint8Array(P.dictionary)),P.raw&&(j=o.inflateSetDictionary(this.strm,P.dictionary))!==u.Z_OK))throw new Error(p[j])}function k(H,P){var j=new v(P);if(j.push(H,!0),j.err)throw j.msg||p[j.err];return j.result}v.prototype.push=function(H,P){var j,se,ce,ne,E,K=this.strm,Y=this.options.chunkSize,re=this.options.dictionary,ue=!1;if(this.ended)return!1;se=P===~~P?P:P===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof H=="string"?K.input=x.binstring2buf(H):C.call(H)==="[object ArrayBuffer]"?K.input=new Uint8Array(H):K.input=H,K.next_in=0,K.avail_in=K.input.length;do{if(K.avail_out===0&&(K.output=new c.Buf8(Y),K.next_out=0,K.avail_out=Y),(j=o.inflate(K,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&re&&(j=o.inflateSetDictionary(this.strm,re)),j===u.Z_BUF_ERROR&&ue===!0&&(j=u.Z_OK,ue=!1),j!==u.Z_STREAM_END&&j!==u.Z_OK)return this.onEnd(j),this.ended=!0,!1;K.next_out&&(K.avail_out!==0&&j!==u.Z_STREAM_END&&(K.avail_in!==0||se!==u.Z_FINISH&&se!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(ce=x.utf8border(K.output,K.next_out),ne=K.next_out-ce,E=x.buf2string(K.output,ce),K.next_out=ne,K.avail_out=Y-ne,ne&&c.arraySet(K.output,K.output,ce,ne,0),this.onData(E)):this.onData(c.shrinkBuf(K.output,K.next_out)))),K.avail_in===0&&K.avail_out===0&&(ue=!0)}while((K.avail_in>0||K.avail_out===0)&&j!==u.Z_STREAM_END);return j===u.Z_STREAM_END&&(se=u.Z_FINISH),se===u.Z_FINISH?(j=o.inflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===u.Z_OK):se!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),K.avail_out=0,!0)},v.prototype.onData=function(H){this.chunks.push(H)},v.prototype.onEnd=function(H){H===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=H,this.msg=this.strm.msg},r.Inflate=v,r.inflate=k,r.inflateRaw=function(H,P){return(P=P||{}).raw=!0,k(H,P)},r.ungzip=k},16:(e,r,s)=>{s.r(r),s.d(r,{CAP:()=>o,CC:()=>w.CC,CONTEXTS_PER_VIEWPORT:()=>Xt,Color:()=>w.Color,CustomLinear:()=>C.CustomLinear,Cylinder:()=>p.Cylinder,GLDraw:()=>c,GLModel:()=>_r,GLShape:()=>$e,GLViewer:()=>lr,GLVolumetricRender:()=>Ut,Gradient:()=>C.Gradient,GradientType:()=>C.GradientType,Label:()=>Vt,LabelCount:()=>xt,MarchingCube:()=>T,MarchingCubeInitializer:()=>Yt,Matrix3:()=>d.Matrix3,Matrix4:()=>d.Matrix4,Parsers:()=>Wt,PausableTimer:()=>v.PausableTimer,PointGrid:()=>me,ProteinSurface:()=>Pe,Quaternion:()=>d.Quaternion,ROYGB:()=>C.ROYGB,RWB:()=>C.RWB,Ray:()=>d.Ray,Sinebow:()=>C.Sinebow,Sphere:()=>p.Sphere,SurfaceType:()=>ei,Triangle:()=>p.Triangle,Vector2:()=>d.Vector2,Vector3:()=>d.Vector3,VolumeData:()=>Qe.VolumeData,adjustVolumeStyle:()=>v.adjustVolumeStyle,applyPartialCharges:()=>fi,autoinit:()=>kr,autoload:()=>Vi,base64ToArray:()=>v.base64ToArray,bondLength:()=>Ke.bondLength,builtinColorSchemes:()=>w.builtinColorSchemes,builtinGradients:()=>C.builtinGradients,chains:()=>w.chains,clamp:()=>d.clamp,conversionMatrix3:()=>d.conversionMatrix3,createStereoViewer:()=>Jr,createViewer:()=>zr,createViewerGrid:()=>Fr,deepCopy:()=>v.deepCopy,degToRad:()=>d.degToRad,download:()=>v.download,drawCartoon:()=>Te,elementColors:()=>w.elementColors,extend:()=>v.extend,get:()=>v.get,getAtomProperty:()=>v.getAtomProperty,getColorFromStyle:()=>v.getColorFromStyle,getElement:()=>v.getElement,getExtent:()=>v.getExtent,getGradient:()=>C.getGradient,getPropertyRange:()=>v.getPropertyRange,getbin:()=>v.getbin,htmlColors:()=>w.htmlColors,inflateString:()=>v.inflateString,isEmptyObject:()=>v.isEmptyObject,isNumeric:()=>v.isNumeric,makeFunction:()=>v.makeFunction,mergeGeos:()=>v.mergeGeos,normalizeValue:()=>C.normalizeValue,partialCharges:()=>ur,processing_autoinit:()=>Xr,residues:()=>w.residues,setBondLength:()=>Ke.setBondLength,setSyncSurface:()=>on,specStringToObject:()=>v.specStringToObject,splitMesh:()=>Mt,ssColors:()=>w.ssColors,subdivide_spline:()=>k,syncSurface:()=>si,viewers:()=>Dr});var o,c,x=s(111),u=s(378),p=s(99),d=s(529),w=s(222);(function(ye){ye[ye.NONE=0]="NONE",ye[ye.FLAT=1]="FLAT",ye[ye.ROUND=2]="ROUND"})(o||(o={})),(function(ye){function n(f,z,_){var V,B,I,U,X,ie=Math.hypot(f,z);ie<1e-4?(B=0,I=1):(B=-f/ie,I=z/ie),z=-B*f+I*z,(V=Math.hypot(z,_))<1e-4?(U=0,X=1):(U=_/V,X=z/V);var J=new Float32Array(9);return J[0]=I,J[1]=B,J[2]=0,J[3]=-B*X,J[4]=I*X,J[5]=U,J[6]=B*U,J[7]=-I*U,J[8]=X,J}var a=new class{constructor(){this.cache={};let f,z=[],_=Math.pow(2,4),V=2,B=Math.pow(2,V),I=_/B;for(z[0]=new d.Vector3(-1,0,0),z[I]=new d.Vector3(0,0,1),z[2*I]=new d.Vector3(1,0,0),z[3*I]=new d.Vector3(0,0,-1),V=3;V<=4;V++){for(B=Math.pow(2,V-1),I=_/B,f=0;f<B-1;f++)z[I/2+f*I]=z[f*I].clone().add(z[(f+1)*I]).normalize();f=B-1,z[I/2+f*I]=z[f*I].clone().add(z[0]).normalize()}this.basisVectors=z}getVerticesForRadius(f,z,_){if(this.cache!==void 0&&this.cache[f]!==void 0&&this.cache[f][z+_]!==void 0)return this.cache[f][z+_];for(var V,B=this.basisVectors.length,I=[],U=[],X=0;X<B;X++)I.push(this.basisVectors[X].clone().multiplyScalar(f)),I.push(this.basisVectors[X].clone().multiplyScalar(f)),V=this.basisVectors[X].clone().normalize(),U.push(V),U.push(V);var ie,J,Q=[],te=10,ee=B,le=2*Math.PI,de=Math.PI,fe=!1,Se=!1;for(J=0;J<=te;J++){fe=J===0||J===te,Se=J===5;var xe=[],Me=[];for(ie=0;ie<=ee;ie++)if(Se){var Be=ie<ee?2*ie:0;Me.push(Be+1),xe.push(Be)}else{var Ne=ie/ee,je=J/te;if(fe&&ie!==0)fe&&xe.push(I.length-1);else if(ie<ee){var De=new d.Vector3;De.x=-f*Math.cos(0+Ne*le)*Math.sin(0+je*de),De.y=z==1?0:f*Math.cos(0+je*de),De.z=f*Math.sin(0+Ne*le)*Math.sin(0+je*de),Math.abs(De.x)<1e-5&&(De.x=0),Math.abs(De.y)<1e-5&&(De.y=0),Math.abs(De.z)<1e-5&&(De.z=0),z==o.FLAT?(V=new d.Vector3(0,Math.cos(0+je*de),0)).normalize():(V=new d.Vector3(De.x,De.y,De.z)).normalize(),I.push(De),U.push(V),xe.push(I.length-1)}else xe.push(I.length-ee)}Se&&Q.push(Me),Q.push(xe)}var Je={vertices:I,normals:U,verticesRows:Q,w:ee,h:te};return f in this.cache||(this.cache[f]={}),this.cache[f][z+_]=Je,Je}};ye.drawCylinder=function(f,z,_,V,B,I=0,U=0){if(!z||!_)return;let X=function(ke){if(typeof ke=="string"){let Re=ke;return Re.toLowerCase()=="flat"?o.FLAT:Re.toLowerCase()=="round"?o.ROUND:o.NONE}return ke};I=X(I);var ie=(U=X(U))||I;B=B||{r:0,g:0,b:0};var J,Q,te,ee,le,de,fe=n(_.x-z.x,_.y-z.y,_.z-z.z),Se=a.getVerticesForRadius(V,U,"to"),xe=Se.w,Me=Se.h,Be=ie?Me*xe+2:2*xe,Ne=f.updateGeoGroup(Be),je=Se.vertices,De=Se.normals,Je=Se.verticesRows,ct=Je[Me/2],dt=Je[Me/2+1],lt=Ne.vertices,_t=Ne.vertexArray,Et=Ne.normalArray,ut=Ne.colorArray,Ct=Ne.faceArray;for(te=0;te<xe;++te){var Ye=2*te;ee=fe[0]*je[Ye].x+fe[3]*je[Ye].y+fe[6]*je[Ye].z,le=fe[1]*je[Ye].x+fe[4]*je[Ye].y+fe[7]*je[Ye].z,de=fe[5]*je[Ye].y+fe[8]*je[Ye].z,J=3*(lt+Ye),Q=Ne.faceidx,_t[J]=ee+z.x,_t[J+1]=le+z.y,_t[J+2]=de+z.z,_t[J+3]=ee+_.x,_t[J+4]=le+_.y,_t[J+5]=de+_.z,Et[J]=ee,Et[J+3]=ee,Et[J+1]=le,Et[J+4]=le,Et[J+2]=de,Et[J+5]=de,ut[J]=B.r,ut[J+3]=B.r,ut[J+1]=B.g,ut[J+4]=B.g,ut[J+2]=B.b,ut[J+5]=B.b,Ct[Q]=dt[te]+lt,Ct[Q+1]=dt[te+1]+lt,Ct[Q+2]=ct[te]+lt,Ct[Q+3]=ct[te]+lt,Ct[Q+4]=dt[te+1]+lt,Ct[Q+5]=ct[te+1]+lt,Ne.faceidx+=6}if(ie){var ht,Ot,gt,Dt,Lt,pt,Bt,tr,jt,wt,cr,qt,ar,Qt,nr,Mr,Kr,Nr,pi,ri,Ir,ii,wi,mi,bi,Hi,Pi,Wi,ti,ni,ai,hi,g=I?Me+1:Me/2+1;for(le=U?0:Me/2;le<g;le++)if(le!==Me/2){var oe=le<=Me/2?_:z,b=a.getVerticesForRadius(V,U,"to"),Ie=a.getVerticesForRadius(V,I,"from");for(oe===_?(je=b.vertices,De=b.normals,Je=b.verticesRows):oe==z&&(je=Ie.vertices,De=Ie.normals,Je=Ie.verticesRows),ee=0;ee<xe;ee++)Q=Ne.faceidx,ti=3*((ht=Je[le][ee+1])+lt),ni=3*((Ot=Je[le][ee])+lt),ai=3*((gt=Je[le+1][ee])+lt),hi=3*((Dt=Je[le+1][ee+1])+lt),Lt=fe[0]*je[ht].x+fe[3]*je[ht].y+fe[6]*je[ht].z,pt=fe[0]*je[Ot].x+fe[3]*je[Ot].y+fe[6]*je[Ot].z,Bt=fe[0]*je[gt].x+fe[3]*je[gt].y+fe[6]*je[gt].z,tr=fe[0]*je[Dt].x+fe[3]*je[Dt].y+fe[6]*je[Dt].z,jt=fe[1]*je[ht].x+fe[4]*je[ht].y+fe[7]*je[ht].z,wt=fe[1]*je[Ot].x+fe[4]*je[Ot].y+fe[7]*je[Ot].z,cr=fe[1]*je[gt].x+fe[4]*je[gt].y+fe[7]*je[gt].z,qt=fe[1]*je[Dt].x+fe[4]*je[Dt].y+fe[7]*je[Dt].z,ar=fe[5]*je[ht].y+fe[8]*je[ht].z,Qt=fe[5]*je[Ot].y+fe[8]*je[Ot].z,nr=fe[5]*je[gt].y+fe[8]*je[gt].z,Mr=fe[5]*je[Dt].y+fe[8]*je[Dt].z,_t[ti]=Lt+oe.x,_t[ni]=pt+oe.x,_t[ai]=Bt+oe.x,_t[hi]=tr+oe.x,_t[ti+1]=jt+oe.y,_t[ni+1]=wt+oe.y,_t[ai+1]=cr+oe.y,_t[hi+1]=qt+oe.y,_t[ti+2]=ar+oe.z,_t[ni+2]=Qt+oe.z,_t[ai+2]=nr+oe.z,_t[hi+2]=Mr+oe.z,ut[ti]=B.r,ut[ni]=B.r,ut[ai]=B.r,ut[hi]=B.r,ut[ti+1]=B.g,ut[ni+1]=B.g,ut[ai+1]=B.g,ut[hi+1]=B.g,ut[ti+2]=B.b,ut[ni+2]=B.b,ut[ai+2]=B.b,ut[hi+2]=B.b,Kr=fe[0]*De[ht].x+fe[3]*De[ht].y+fe[6]*De[ht].z,Nr=fe[0]*De[Ot].x+fe[3]*De[Ot].y+fe[6]*De[Ot].z,pi=fe[0]*De[gt].x+fe[3]*De[gt].y+fe[6]*De[gt].z,ri=fe[0]*De[Dt].x+fe[3]*De[Dt].y+fe[6]*De[Dt].z,Ir=fe[1]*De[ht].x+fe[4]*De[ht].y+fe[7]*De[ht].z,ii=fe[1]*De[Ot].x+fe[4]*De[Ot].y+fe[7]*De[Ot].z,wi=fe[1]*De[gt].x+fe[4]*De[gt].y+fe[7]*De[gt].z,mi=fe[1]*De[Dt].x+fe[4]*De[Dt].y+fe[7]*De[Dt].z,bi=fe[5]*De[ht].y+fe[8]*De[ht].z,Hi=fe[5]*De[Ot].y+fe[8]*De[Ot].z,Pi=fe[5]*De[gt].y+fe[8]*De[gt].z,Wi=fe[5]*De[Dt].y+fe[8]*De[Dt].z,le===0?(Et[ti]=Kr,Et[ai]=pi,Et[hi]=ri,Et[ti+1]=Ir,Et[ai+1]=wi,Et[hi+1]=mi,Et[ti+2]=bi,Et[ai+2]=Pi,Et[hi+2]=Wi,Ct[Q]=ht+lt,Ct[Q+1]=gt+lt,Ct[Q+2]=Dt+lt,Ne.faceidx+=3):le===g-1?(Et[ti]=Kr,Et[ni]=Nr,Et[ai]=pi,Et[ti+1]=Ir,Et[ni+1]=ii,Et[ai+1]=wi,Et[ti+2]=bi,Et[ni+2]=Hi,Et[ai+2]=Pi,Ct[Q]=ht+lt,Ct[Q+1]=Ot+lt,Ct[Q+2]=gt+lt,Ne.faceidx+=3):(Et[ti]=Kr,Et[ni]=Nr,Et[hi]=ri,Et[ti+1]=Ir,Et[ni+1]=ii,Et[hi+1]=mi,Et[ti+2]=bi,Et[ni+2]=Hi,Et[hi+2]=Wi,Et[ni]=Nr,Et[ai]=pi,Et[hi]=ri,Et[ni+1]=ii,Et[ai+1]=wi,Et[hi+1]=mi,Et[ni+2]=Hi,Et[ai+2]=Pi,Et[hi+2]=Wi,Ct[Q]=ht+lt,Ct[Q+1]=Ot+lt,Ct[Q+2]=Dt+lt,Ct[Q+3]=Ot+lt,Ct[Q+4]=gt+lt,Ct[Q+5]=Dt+lt,Ne.faceidx+=6)}}Ne.vertices+=Be},ye.drawCone=function(f,z,_,V,B){if(!z||!_)return;B=B||{r:0,g:0,b:0};let I=new d.Vector3(_.x-z.x,_.y-z.y,_.z-z.z);var U=n(I.x,I.y,I.z);I=I.normalize();var X,ie,J,Q,te,ee,le=a.basisVectors.length,de=a.basisVectors,fe=le+2,Se=f.updateGeoGroup(fe),xe=Se.vertices,Me=Se.vertexArray,Be=Se.normalArray,Ne=Se.colorArray,je=Se.faceArray;for(Me[X=3*xe]=z.x,Me[X+1]=z.y,Me[X+2]=z.z,Be[X]=-I.x,Be[X+1]=-I.y,Be[X+2]=-I.z,Ne[X]=B.r,Ne[X+1]=B.g,Ne[X+2]=B.b,Me[X+3]=_.x,Me[X+4]=_.y,Me[X+5]=_.z,Be[X+3]=I.x,Be[X+4]=I.y,Be[X+5]=I.z,Ne[X+3]=B.r,Ne[X+4]=B.g,Ne[X+5]=B.b,X+=6,J=0;J<le;++J){var De=de[J].clone();De.multiplyScalar(V),Q=U[0]*De.x+U[3]*De.y+U[6]*De.z,te=U[1]*De.x+U[4]*De.y+U[7]*De.z,ee=U[5]*De.y+U[8]*De.z,Me[X]=Q+z.x,Me[X+1]=te+z.y,Me[X+2]=ee+z.z,Be[X]=Q,Be[X+1]=te,Be[X+2]=ee,Ne[X]=B.r,Ne[X+1]=B.g,Ne[X+2]=B.b,X+=3}for(Se.vertices+=le+2,ie=Se.faceidx,J=0;J<le;J++){var Je=xe+2+J,ct=xe+2+(J+1)%le;je[ie]=Je,je[ie+1]=ct,je[ie+2]=xe,je[ie+=3]=Je,je[ie+1]=ct,je[ie+2]=xe+1,ie+=3}Se.faceidx+=6*le};var h=new class{constructor(){this.cache=new Map}getVerticesForRadius(f,z){z=z||2,this.cache.has(z)||this.cache.set(z,new Map);let _=this.cache.get(z);if(_.has(f))return _.get(f);var V={vertices:[],verticesRows:[],normals:[]},B=16*z,I=10*z;f<1&&(B=10*z,I=8*z);var U,X,ie=2*Math.PI,J=Math.PI;for(X=0;X<=I;X++){let te=[];for(U=0;U<=B;U++){let ee=U/B,le=X/I,de=-f*Math.cos(0+ee*ie)*Math.sin(0+le*J),fe=f*Math.cos(0+le*J),Se=f*Math.sin(0+ee*ie)*Math.sin(0+le*J);var Q=new d.Vector3(de,fe,Se);Q.normalize(),V.vertices.push({x:de,y:fe,z:Se}),V.normals.push(Q),te.push(V.vertices.length-1)}V.verticesRows.push(te)}return _.set(f,V),V}};ye.drawSphere=function(f,z,_,V,B){var I=h.getVerticesForRadius(_,B),U=I.vertices,X=I.normals,ie=f.updateGeoGroup(U.length),J=ie.vertices,Q=ie.vertexArray,te=ie.colorArray,ee=ie.faceArray,le=ie.lineArray,de=ie.normalArray;for(let xe=0,Me=U.length;xe<Me;++xe){let Be=3*(J+xe),Ne=U[xe];Q[Be]=Ne.x+z.x,Q[Be+1]=Ne.y+z.y,Q[Be+2]=Ne.z+z.z,te[Be]=V.r,te[Be+1]=V.g,te[Be+2]=V.b}ie.vertices+=U.length;let fe=I.verticesRows,Se=fe.length-1;for(let xe=0;xe<Se;xe++){let Me=fe[xe].length-1;for(let Be=0;Be<Me;Be++){let Ne=ie.faceidx,je=ie.lineidx,De=fe[xe][Be+1]+J,Je=3*De,ct=fe[xe][Be]+J,dt=3*ct,lt=fe[xe+1][Be]+J,_t=3*lt,Et=fe[xe+1][Be+1]+J,ut=3*Et,Ct=X[De-J],Ye=X[ct-J],ht=X[lt-J],Ot=X[Et-J];Math.abs(U[De-J].y)===_?(de[Je]=Ct.x,de[_t]=ht.x,de[ut]=Ot.x,de[Je+1]=Ct.y,de[_t+1]=ht.y,de[ut+1]=Ot.y,de[Je+2]=Ct.z,de[_t+2]=ht.z,de[ut+2]=Ot.z,ee[Ne]=De,ee[Ne+1]=lt,ee[Ne+2]=Et,le[je]=De,le[je+1]=lt,le[je+2]=De,le[je+3]=Et,le[je+4]=lt,le[je+5]=Et,ie.faceidx+=3,ie.lineidx+=6):Math.abs(U[lt-J].y)===_?(de[Je]=Ct.x,de[dt]=Ye.x,de[_t]=ht.x,de[Je+1]=Ct.y,de[dt+1]=Ye.y,de[_t+1]=ht.y,de[Je+2]=Ct.z,de[dt+2]=Ye.z,de[_t+2]=ht.z,ee[Ne]=De,ee[Ne+1]=ct,ee[Ne+2]=lt,le[je]=De,le[je+1]=ct,le[je+2]=De,le[je+3]=lt,le[je+4]=ct,le[je+5]=lt,ie.faceidx+=3,ie.lineidx+=6):(de[Je]=Ct.x,de[dt]=Ye.x,de[ut]=Ot.x,de[Je+1]=Ct.y,de[dt+1]=Ye.y,de[ut+1]=Ot.y,de[Je+2]=Ct.z,de[dt+2]=Ye.z,de[ut+2]=Ot.z,de[dt]=Ye.x,de[_t]=ht.x,de[ut]=Ot.x,de[dt+1]=Ye.y,de[_t+1]=ht.y,de[ut+1]=Ot.y,de[dt+2]=Ye.z,de[_t+2]=ht.z,de[ut+2]=Ot.z,ee[Ne]=De,ee[Ne+1]=ct,ee[Ne+2]=Et,ee[Ne+3]=ct,ee[Ne+4]=lt,ee[Ne+5]=Et,le[je]=De,le[je+1]=ct,le[je+2]=De,le[je+3]=Et,le[je+4]=ct,le[je+5]=lt,le[je+6]=lt,le[je+7]=Et,ie.faceidx+=6,ie.lineidx+=8)}}}})(c||(c={}));var C=s(546),v=s(864);function k(ye,n){var a,h,f,z,_,V,B,I,U,X=[],ie=ye;for((ie=[]).push(ye[0]),a=1,h=ye.length-1;a<h;a++)if(_=ye[a],V=ye[a+1],_.smoothen){var J=new d.Vector3((_.x+V.x)/2,(_.y+V.y)/2,(_.z+V.z)/2);J.atom=_.atom,ie.push(J)}else ie.push(_);for(ie.push(ye[ye.length-1]),a=-1,f=ie.length;a<=f-3;a++)if(z=ie[a===-1?0:a],_=ie[a+1],V=ie[a+2],B=ie[a===f-3?f-1:a+3],I=new d.Vector3().subVectors(V,z).multiplyScalar(.5),U=new d.Vector3().subVectors(B,_).multiplyScalar(.5),!V.skip)for(var Q=0;Q<n;Q++){var te=1/n*Q,ee=_.x+te*I.x+te*te*(-3*_.x+3*V.x-2*I.x-U.x)+te*te*te*(2*_.x-2*V.x+I.x+U.x),le=_.y+te*I.y+te*te*(-3*_.y+3*V.y-2*I.y-U.y)+te*te*te*(2*_.y-2*V.y+I.y+U.y),de=_.z+te*I.z+te*te*(-3*_.z+3*V.z-2*I.z-U.z)+te*te*te*(2*_.z-2*V.z+I.z+U.z),fe=new d.Vector3(ee,le,de);fe.atom=Q<n/2?_.atom:V.atom,X.push(fe)}return X.push(ie[ie.length-1]),X}const H=.5,P=1.3,j=.8,se=.4,ce=.4;function ne(ye,n,a,h){for(var f,z,_,V,B=0,I=n.length;B<I;B++){V=Math.round(B*(h.length-1)/I),_=w.CC.color(h[V]);var U=ye.updateGeoGroup(2),X=U.vertexArray,ie=U.colorArray,J=U.faceArray;X[z=3*(f=U.vertices)]=n[B].x,X[z+1]=n[B].y,X[z+2]=n[B].z,X[z+3]=a[B].x,X[z+4]=a[B].y,X[z+5]=a[B].z;for(var Q=0;Q<6;++Q)ie[z+3*Q]=_.r,ie[z+1+3*Q]=_.g,ie[z+2+3*Q]=_.b;if(B>0){var te=[f,f+1,f-1,f-2],ee=U.faceidx;J[ee]=te[0],J[ee+1]=te[1],J[ee+2]=te[3],J[ee+3]=te[1],J[ee+4]=te[2],J[ee+5]=te[3],U.faceidx+=6}U.vertices+=2}}function E(ye,n,a,h,f,z,_){_&&_!=="default"||(_="rectangle"),_==="edged"?(function(V,B,I,U,X){if(!(B.length<2)){var ie,J;if(ie=B[0],J=B[B.length-1],ie=k(ie,U),J=k(J,U),!X)return ne(V,ie,J,I);var Q,te,ee,le,de,fe,Se,xe,Me,Be,Ne,je,De,Je,ct,dt,lt,_t,Et,ut,Ct,Ye,ht=[],Ot=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]];for(De=0,Je=ie.length;De<Je;De++){if(Be=Math.round(De*(I.length-1)/Je),Me=w.CC.color(I[Be]),ht.push(te=ie[De]),ht.push(te),ht.push(ee=J[De]),ht.push(ee),De<Je-1){var gt=ie[De+1].clone().sub(ie[De]);Q=J[De].clone().sub(ie[De]).cross(gt).normalize().multiplyScalar(X)}for(ht.push(le=ie[De].clone().add(Q)),ht.push(le),ht.push(de=J[De].clone().add(Q)),ht.push(de),te.atom!==void 0&&(Ne=te.atom),ut=(Et=V.updateGeoGroup(8)).vertexArray,Ct=Et.colorArray,Ye=Et.faceArray,ut[Se=3*(fe=Et.vertices)]=te.x,ut[Se+1]=te.y,ut[Se+2]=te.z,ut[Se+3]=te.x,ut[Se+4]=te.y,ut[Se+5]=te.z,ut[Se+6]=ee.x,ut[Se+7]=ee.y,ut[Se+8]=ee.z,ut[Se+9]=ee.x,ut[Se+10]=ee.y,ut[Se+11]=ee.z,ut[Se+12]=le.x,ut[Se+13]=le.y,ut[Se+14]=le.z,ut[Se+15]=le.x,ut[Se+16]=le.y,ut[Se+17]=le.z,ut[Se+18]=de.x,ut[Se+19]=de.y,ut[Se+20]=de.z,ut[Se+21]=de.x,ut[Se+22]=de.y,ut[Se+23]=de.z,ct=0;ct<8;++ct)Ct[Se+3*ct]=Me.r,Ct[Se+1+3*ct]=Me.g,Ct[Se+2+3*ct]=Me.b;if(De>0){var Dt=je!==void 0&&Ne!==void 0&&je.serial!==Ne.serial;for(ct=0;ct<4;ct++){var Lt=[fe+Ot[ct][0],fe+Ot[ct][1],fe+Ot[ct][2],fe+Ot[ct][3]];if(Ye[xe=Et.faceidx]=Lt[0],Ye[xe+1]=Lt[1],Ye[xe+2]=Lt[3],Ye[xe+3]=Lt[1],Ye[xe+4]=Lt[2],Ye[xe+5]=Lt[3],Et.faceidx+=6,Ne.clickable||je.clickable||Ne.hoverable||je.hoverable){var pt=ht[Lt[3]].clone(),Bt=ht[Lt[0]].clone(),tr=ht[Lt[2]].clone(),jt=ht[Lt[1]].clone();if(pt.atom=ht[Lt[3]].atom||null,tr.atom=ht[Lt[2]].atom||null,Bt.atom=ht[Lt[0]].atom||null,jt.atom=ht[Lt[1]].atom||null,Dt){var wt=pt.clone().add(Bt).multiplyScalar(.5),cr=tr.clone().add(jt).multiplyScalar(.5),qt=pt.clone().add(jt).multiplyScalar(.5);ct%2==0?((je.clickable||je.hoverable)&&(dt=new p.Triangle(wt,qt,pt),lt=new p.Triangle(cr,tr,qt),_t=new p.Triangle(qt,tr,pt),je.intersectionShape.triangle.push(dt),je.intersectionShape.triangle.push(lt),je.intersectionShape.triangle.push(_t)),(Ne.clickable||Ne.hoverable)&&(dt=new p.Triangle(Bt,jt,qt),lt=new p.Triangle(jt,cr,qt),_t=new p.Triangle(Bt,qt,wt),Ne.intersectionShape.triangle.push(dt),Ne.intersectionShape.triangle.push(lt),Ne.intersectionShape.triangle.push(_t))):((Ne.clickable||Ne.hoverable)&&(dt=new p.Triangle(wt,qt,pt),lt=new p.Triangle(cr,tr,qt),_t=new p.Triangle(qt,tr,pt),Ne.intersectionShape.triangle.push(dt),Ne.intersectionShape.triangle.push(lt),Ne.intersectionShape.triangle.push(_t)),(je.clickable||je.hoverable)&&(dt=new p.Triangle(Bt,jt,qt),lt=new p.Triangle(jt,cr,qt),_t=new p.Triangle(Bt,qt,wt),je.intersectionShape.triangle.push(dt),je.intersectionShape.triangle.push(lt),je.intersectionShape.triangle.push(_t)))}else(Ne.clickable||Ne.hoverable)&&(dt=new p.Triangle(Bt,jt,pt),lt=new p.Triangle(jt,tr,pt),Ne.intersectionShape.triangle.push(dt),Ne.intersectionShape.triangle.push(lt))}}}Et.vertices+=8,je=Ne}var ar=ht.length-8;for(ut=(Et=V.updateGeoGroup(8)).vertexArray,Ct=Et.colorArray,Ye=Et.faceArray,Se=3*(fe=Et.vertices),xe=Et.faceidx,De=0;De<4;De++){ht.push(ht[2*De]),ht.push(ht[ar+2*De]);var Qt=ht[2*De],nr=ht[ar+2*De];ut[Se+6*De]=Qt.x,ut[Se+1+6*De]=Qt.y,ut[Se+2+6*De]=Qt.z,ut[Se+3+6*De]=nr.x,ut[Se+4+6*De]=nr.y,ut[Se+5+6*De]=nr.z,Ct[Se+6*De]=Me.r,Ct[Se+1+6*De]=Me.g,Ct[Se+2+6*De]=Me.b,Ct[Se+3+6*De]=Me.r,Ct[Se+4+6*De]=Me.g,Ct[Se+5+6*De]=Me.b}ar+=8,dt=[fe,fe+2,fe+6,fe+4],lt=[fe+1,fe+5,fe+7,fe+3],Ye[xe]=dt[0],Ye[xe+1]=dt[1],Ye[xe+2]=dt[3],Ye[xe+3]=dt[1],Ye[xe+4]=dt[2],Ye[xe+5]=dt[3],Ye[xe+6]=lt[0],Ye[xe+7]=lt[1],Ye[xe+8]=lt[3],Ye[xe+9]=lt[1],Ye[xe+10]=lt[2],Ye[xe+11]=lt[3],Et.faceidx+=12,Et.vertices+=8}})(ye,n,a,h,f):_!=="rectangle"&&_!=="oval"&&_!=="parabola"||(function(V,B,I,U,X,ie,J){var Q,te,ee,le,de,fe,Se,xe,Me,Be;if((ee=B.length)<2||B[0].length<2)return;for(Q=0;Q<ee;Q++)B[Q]=k(B[Q],U);if(le=B[0].length,!X)return ne(V,B[0],B[ee-1],I);var Ne=[],je=[],De=[];for(te=0;te<ee;te++)Ne.push(.25+1.5*Math.sqrt((ee-1)*te-Math.pow(te,2))/(ee-1)),je.push(.5),De.push(2*(Math.pow(te/ee,2)-te/ee)+.6);var Je,ct,dt,lt,_t,Et,ut,Ct,Ye,ht,Ot=[];for(te=0;te<2*ee-1;te++)Ot[te]=[te,te+1,te+1-2*ee,te-2*ee];Ot[2*ee-1]=[te,te+1-2*ee,te+1-4*ee,te-2*ee];let gt=V.updateGeoGroup();for(Q=0;Q<le;Q++){let Bt=V.groups,tr=!1;var Dt,Lt;for(gt=V.updateGeoGroup(2*ee),Bt!=V.groups&&Q>0&&(Q-=1,tr=!0),Et=Math.round(Q*(I.length-1)/le),_t=w.CC.color(I[Et]),Me=Se,Be=xe,Se=[],xe=[],de=[],B[0][Q].atom!==void 0&&(lt=B[0][Q].atom,J==="oval"?fe=Ne:J==="rectangle"?fe=je:J==="parabola"&&(fe=De)),fe||(fe=je),te=0;te<ee;te++)Dt=Q<le-1?B[te][Q+1].clone().sub(B[te][Q]):B[te][Q-1].clone().sub(B[te][Q]).negate(),Lt=te<ee-1?B[te+1][Q].clone().sub(B[te][Q]):B[te-1][Q].clone().sub(B[te][Q]).negate(),de[te]=Lt.cross(Dt).normalize().multiplyScalar(X*fe[te]);for(te=0;te<ee;te++)Se[te]=B[te][Q].clone().add(de[te].clone().negate());for(te=0;te<ee;te++)xe[te]=B[te][Q].clone().add(de[te]);for(ut=gt.vertexArray,Ct=gt.colorArray,Ye=gt.faceArray,ct=3*(Je=gt.vertices),te=0;te<ee;te++)ut[ct+3*te+0]=Se[te].x,ut[ct+3*te+1]=Se[te].y,ut[ct+3*te+2]=Se[te].z;for(te=0;te<ee;te++)ut[ct+3*te+0+3*ee]=xe[ee-1-te].x,ut[ct+3*te+1+3*ee]=xe[ee-1-te].y,ut[ct+3*te+2+3*ee]=xe[ee-1-te].z;for(te=0;te<2*ee;++te)Ct[ct+3*te+0]=_t.r,Ct[ct+3*te+1]=_t.g,Ct[ct+3*te+2]=_t.b;if(Q>0&&!tr){for(te=0;te<2*ee;te++)ht=[Je+Ot[te][0],Je+Ot[te][1],Je+Ot[te][2],Je+Ot[te][3]],Ye[dt=gt.faceidx]=ht[0],Ye[dt+1]=ht[1],Ye[dt+2]=ht[3],Ye[dt+3]=ht[1],Ye[dt+4]=ht[2],Ye[dt+5]=ht[3],gt.faceidx+=6;if(lt.clickable||lt.hoverable){var pt=[];for(te in pt.push(new p.Triangle(Me[0],Se[0],Se[ee-1])),pt.push(new p.Triangle(Me[0],Se[ee-1],Me[ee-1])),pt.push(new p.Triangle(Me[ee-1],Se[ee-1],xe[ee-1])),pt.push(new p.Triangle(Me[ee-1],xe[ee-1],Be[ee-1])),pt.push(new p.Triangle(xe[0],Be[0],Be[ee-1])),pt.push(new p.Triangle(xe[ee-1],xe[0],Be[ee-1])),pt.push(new p.Triangle(Se[0],Me[0],Be[0])),pt.push(new p.Triangle(xe[0],Se[0],Be[0])),pt)lt.intersectionShape.triangle.push(pt[te])}}gt.vertices+=2*ee}for(ut=gt.vertexArray,Ct=gt.colorArray,Ye=gt.faceArray,ct=3*(Je=gt.vertices),dt=gt.faceidx,Q=0;Q<ee-1;Q++)ht=[Q,Q+1,2*ee-2-Q,2*ee-1-Q],Ye[dt=gt.faceidx]=ht[0],Ye[dt+1]=ht[1],Ye[dt+2]=ht[3],Ye[dt+3]=ht[1],Ye[dt+4]=ht[2],Ye[dt+5]=ht[3],gt.faceidx+=6;for(Q=0;Q<ee-1;Q++)ht=[Je-1-Q,Je-2-Q,Je-2*ee+Q+1,Je-2*ee+Q],Ye[dt=gt.faceidx]=ht[0],Ye[dt+1]=ht[1],Ye[dt+2]=ht[3],Ye[dt+3]=ht[1],Ye[dt+4]=ht[2],Ye[dt+5]=ht[3],gt.faceidx+=6})(ye,n,a,h,f,0,_)}function K(ye){return ye&&ye.elem==="C"&&ye.atom==="CA"}function Y(ye,n){if(ye&&n&&ye.chain===n.chain){if(!(ye.hetflag||n.hetflag||ye.reschain!==n.reschain||ye.resi!==n.resi&&ye.resi!==n.resi-1))return!0;if(ye.resi<n.resi){var a=ye.x-n.x,h=ye.y-n.y,f=ye.z-n.z,z=a*a+h*h+f*f;if(ye.atom=="CA"&&n.atom=="CA"&&z<16||(ye.atom=="P"||n.atom=="P")&&z<64)return!0}}return!1}function re(ye,n,a,h,f){if(n!=null&&n.vertices!=0){f&&(n.initTypedArrays(),n.setUpNormals());var z=new u.MeshDoubleLambertMaterial;z.vertexColors=u.Coloring.FaceColors,typeof a=="number"&&a>=0&&a<1&&(z.transparent=!0,z.opacity=a),z.outline=h;var _=new u.Mesh(n,z);ye.add(_)}}function ue(ye,n,a,h,f,z,_,V,B){var I,U,X,ie,J,Q;if(h&&f&&_){var te=f.sub(h);te.normalize();var ee=V[B];for(U=B+1;U<V.length&&(ee=V[U]).atom!=_.atom;U++);if((ee=ee?new d.Vector3(ee.x,ee.y,ee.z):new d.Vector3(0,0,0)).sub(h),_.ss==="arrow start"){var le=ee.clone().multiplyScalar(.3).cross(f);h.add(le);var de=ee.clone().cross(te).normalize();te.rotateAboutVector(de,.43)}for(_.style.cartoon.ribbon?I=_.style.cartoon.thickness||se:_.style.cartoon.width?I=_.style.cartoon.width:_.ss==="c"?I=_.atom==="P"?j:H:_.ss==="arrow start"?(I=P,J=!0):I=_.ss==="arrow end"||_.ss==="h"&&_.style.cartoon.tubes||_.ss==="tube start"?H:P,z!=null&&te.dot(z)<0&&te.negate(),te.multiplyScalar(I),U=0;U<n;U++)X=2*U/(n-1)-1,(ie=new d.Vector3(h.x+X*te.x,h.y+X*te.y,h.z+X*te.z)).atom=_,_.ss==="s"&&(ie.smoothen=!0),ye[U].push(ie);if(J)for(te.multiplyScalar(2),U=0;U<n;U++)X=2*U/(n-1)-1,(ie=new d.Vector3(h.x+X*te.x,h.y+X*te.y,h.z+X*te.z)).atom=_,ie.smoothen=!1,ie.skip=!0,ye[U].push(ie);return Q=_.style.cartoon.style||"default",ye.style?ye.style!=Q&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),ye.style="default"):ye.style=Q,_.ss!=="arrow start"&&_.ss!=="arrow end"||(_.ss="s"),J}}const q={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},he={DA:!0,DG:!0,A:!0,G:!0},Oe={DT:!0,DC:!0,U:!0,C:!0,T:!0},be={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function Te(ye,n,a,h=10){let f=h,z=h;var _,V,B,I,U,X,ie,J,Q,te,ee,le,de,fe,Se,xe,Me,Be,Ne=new u.Geometry(!0),je=new u.Geometry(!0),De=[],Je=[],ct=1,dt=!1,lt={};for(var _t in C.Gradient.builtinGradients)C.Gradient.builtinGradients.hasOwnProperty(_t)&&(lt[_t]=new C.Gradient.builtinGradients[_t](a[1],a[0]));var Et=function(Qt,nr){return a&&nr.color==="spectrum"?nr.colorscheme in lt?lt[nr.colorscheme].valueToHex(Qt.resi):lt.sinebow.valueToHex(Qt.resi):(0,v.getColorFromStyle)(Qt,nr).getHex()};for(J=0;J<f;J++)Je[J]=[];var ut=!1,Ct=!1,Ye=[];for(J in n){if((I=n[J]).elem==="C"&&I.atom==="CA"){var ht=Y(B,I);ht&&I.ss==="s"?ut=!0:ut&&(B&&V&&B.style.cartoon.arrows&&V.style.cartoon.arrows&&(B.ss="arrow end",V.ss="arrow start"),ut=!1),ht&&(B.ss==="h"||B.ss=="tube start")&&B.style.cartoon.tubes?!Ct&&B.ss!="tube start"&&I.style.cartoon.tubes&&(I.ss="tube start",Ct=!0):Ct&&(B.ss==="tube start"?B.ss="tube end":V&&V.style.cartoon.tubes&&(V.ss="tube end"),Ct=!1),V=B,B=I}I&&I.atom in q&&Ye.push(I)}Ct&&B.style.cartoon.tubes&&(B.ss="tube end",Ct=!1);var Ot=function(Qt){Je[0].length>0&&E(je,Je,De,z,ie,0,Je.style);var nr=[],Mr=null;if(Qt){for(J=0;J<f;J++)nr[J]=Je[J][Je[J].length-1];Mr=De[De.length-1]}for(Je=[],J=0;J<f;J++)Je[J]=[];if(De=[],Qt){for(J=0;J<f;J++)Je[J].push(nr[J]);De.push(Mr)}re(ye,je,ct,dt,!0),re(ye,Ne,ct,dt,!1),je=new u.Geometry(!0),Ne=new u.Geometry(!0)};B=void 0;let gt=[];for(var Dt=0;Dt<Ye.length;Dt++){var Lt=(I=Ye[Dt]).resn.trim(),pt=Lt in be;if(ct=1,_=I.style.cartoon,B&&B.style.cartoon&&(ct=B.style.cartoon.opacity),B&&B.style.cartoon&&B.style.cartoon.outline&&(dt=B.style.cartoon.outline),!B||!B.style.cartoon||I.style.cartoon&&B.style.cartoon.opacity==I.style.cartoon.opacity||Ot(B.chain==I.chain),B&&I&&!Y(B,I)&&B.chain&&B.chain==I.chain&&!B.hetflag&&!I.hetflag&&B.reschain+1==I.reschain&&gt.push([B,I]),_.style==="trace"){if(!I.hetflag&&(I.elem==="C"&&I.atom==="CA"||pt&&I.atom==="P"||I.atom==="BB")){if(X=Et(I,_),ie=(0,v.isNumeric)(_.thickness)?_.thickness:se,Y(B,I))if(X==U){var Bt=w.CC.color(X);c.drawCylinder(Ne,B,I,ie,Bt,2,2)}else{var tr=new d.Vector3().addVectors(B,I).multiplyScalar(.5),jt=w.CC.color(U),wt=w.CC.color(X);c.drawCylinder(Ne,B,tr,ie,jt,2,0),c.drawCylinder(Ne,tr,I,ie,wt,0,2)}if((I.clickable===!0||I.hoverable)&&I.intersectionShape!==void 0){var cr=new d.Vector3(I.x,I.y,I.z);I.intersectionShape.sphere.push(new p.Sphere(cr,ie))}B=I,U=X}}else{if(K(I)||pt&&(I.atom==="P"||I.atom.indexOf("O5")==0)){if(Be)if(I.ss==="tube end")Be=!1,Me=new d.Vector3(I.x,I.y,I.z),c.drawCylinder(Ne,xe,Me,2,w.CC.color(U),1,1),I.ss="h";else{if(B.chain==I.chain&&B.ss!=="tube end")continue;Be=!1,B.ss="h",Me=new d.Vector3(B.x,B.y,B.z),c.drawCylinder(Ne,xe,Me,2,w.CC.color(U),1,1)}if(B&&(!Y(B,I)||B.ss==="tube start")){for(B.ss==="tube start"&&(Be=!0,xe=new d.Vector3(B.x,B.y,B.z),B.ss="h"),Se&&(fe=le?new d.Vector3().addVectors(B,le).multiplyScalar(.5):new d.Vector3(B.x,B.y,B.z),c.drawCylinder(Ne,fe,Se,ce,w.CC.color(Se.color),0,2),ue(Je,f,!0,le,de,ee,B,Ye,Dt),De.push(X),fe=null,Se=null),Je[0].length>0&&E(je,Je,De,z,ie,0,Je.style),Je=[],J=0;J<f;J++)Je[J]=[];De=[]}if(B===void 0||B.rescode!=I.rescode||B.resi!=I.resi){if(Se&&B!=null){var qt=(fe=new d.Vector3().addVectors(B,I).multiplyScalar(.5)).clone().sub(Se).multiplyScalar(.02);fe.add(qt),c.drawCylinder(Ne,fe,Se,ce,w.CC.color(Se.color),0,2),fe=null,Se=null}X=Et(I,_),De.push(X),ie=(0,v.isNumeric)(_.thickness)?_.thickness:se,B=I,(Q=new d.Vector3(B.x,B.y,B.z)).resi=B.resi,U=X}I.clickable!==!0&&I.hoverable!==!0||I.intersectionShape!==void 0&&I.intersectionShape.triangle!==void 0||(I.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else B!=null&&(K(B)&&I.atom==="O"||pt&&B.atom==="P"&&(I.atom==="OP2"||I.atom==="O2P")||pt&&B.atom.indexOf("O5")==0&&I.atom.indexOf("C5")==0)?((te=new d.Vector3(I.x,I.y,I.z)).resi=I.resi,I.atom!=="OP2"&&I.atom!=="O2P"||(de=new d.Vector3(I.x,I.y,I.z))):pt&&I.atom.indexOf("O3")==0?le=new d.Vector3(I.x,I.y,I.z):(I.atom==="N1"&&Lt in he||I.atom==="N3"&&Lt in Oe)&&((Se=new d.Vector3(I.x,I.y,I.z)).color=(0,v.getColorFromStyle)(I,_).getHex());te&&Q&&te.resi===Q.resi&&(ue(Je,f,!0,Q,te,ee,B,Ye,Dt),ee=te,Q=null,te=null,De.push(X))}}Se&&(fe=le?new d.Vector3().addVectors(B,le).multiplyScalar(.5):new d.Vector3(B.x,B.y,B.z),c.drawCylinder(Ne,fe,Se,ce,w.CC.color(Se.color),0,2),ue(Je,f,!0,le,de,ee,B,Ye,Dt),De.push(X)),Ot(!1);var ar=function(Qt,nr){if(Qt.style.cartoon.gapcutoff&&Qt.style.cartoon.gapcutoff==nr.style.cartoon.gapcutoff){let Kr=Qt.style.cartoon.gapcutoff,Nr=nr.resi-Qt.resi;if(Nr>0&&Nr<Kr){let pi=.25,ri=nr.x-Qt.x,Ir=nr.y-Qt.y,ii=nr.z-Qt.z,wi=Math.sqrt(ri*ri+Ir*Ir+ii*ii),mi=wi/(2*Nr),bi=new d.Vector3(Qt.x,Qt.y,Qt.z),Hi=wi/mi,Pi=new d.Vector3((nr.x-Qt.x)/Hi,(nr.y-Qt.y)/Hi,(nr.z-Qt.z)/Hi);bi.add({x:Pi.x/2,y:Pi.y/2,z:Pi.z/2});let Wi=bi.clone().add(Pi);Pi.multiplyScalar(2);let ti=(0,v.extend)({},Qt);for(var Mr=0;Mr<Nr;Mr++){ti.resi+=1;let ni=Et(ti,ti.style.cartoon);c.drawCylinder(Ne,bi,Wi,pi,w.CC.color(ni),o.FLAT,o.FLAT),bi.add(Pi),Wi.add(Pi)}Ot(!1)}}};for(let Qt of gt)ar(Qt[0],Qt[1])}var Ae=s(797),Ve=s(865),_e=s(392);function W(ye,n){for(var a=[[]],h=(n=n||{}).assignBonds===void 0||n.assignBonds,f=ye.trimStart().split(/\r?\n|\r/);f.length>0&&!(f.length<3);){var z=parseInt(f[0]);if(isNaN(z)||z<=0||f.length<z+2)break;var _=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi.exec(f[1]);if(_!=null&&_.length>1){var V=new Float32Array(_[1].split(/\s+/)),B=new u.Matrix3(V[0],V[3],V[6],V[1],V[4],V[7],V[2],V[5],V[8]);a.modelData=[{cryst:{matrix:B}}]}for(var I=2,U=a[a.length-1].length,X=U+z,ie=U;ie<X;ie++){var J=f[I++].trim().split(/\s+/),Q={};Q.serial=ie;var te=J[0];Q.atom=Q.elem=te[0].toUpperCase()+te.substring(1,2).toLowerCase(),Q.x=parseFloat(J[1]),Q.y=parseFloat(J[2]),Q.z=parseFloat(J[3]),Q.hetflag=!0,Q.bonds=[],Q.bondOrder=[],Q.properties={},a[a.length-1][ie]=Q,J.length>=7&&(Q.dx=parseFloat(J[4]),Q.dy=parseFloat(J[5]),Q.dz=parseFloat(J[6]))}if(!n.multimodel)break;a.push([]),f.splice(0,I)}if(h)for(let le=0;le<a.length;le++)(0,_e.assignBonds)(a[le],n);if(n.onemol){var ee=a;(a=[]).push(ee[0]);for(let le=1;le<ee.length;le++){let de=a[0].length;for(let fe=0;fe<ee[le].length;fe++){let Se=ee[le][fe];for(let xe=0;xe<Se.bonds.length;xe++)Se.bonds[xe]=Se.bonds[xe]+de;Se.index=a[0].length,Se.serial=a[0].length,a[0].push(Se)}}}return a}function we(ye,n){var a="V2000",h=ye.split(/\r?\n|\r/);return h.length>3&&h[3].length>38&&(a=h[3].substring(34,39)),a==="V2000"?(function(f,z){var _=[[]],V=!1;for(z.keepH!==void 0&&(V=!z.keepH);f.length>0&&!(f.length<4);){var B=parseInt(f[3].substring(0,3));if(isNaN(B)||B<=0)break;var I=parseInt(f[3].substring(3,6)),U=4;if(f.length<4+B+I)break;var X,ie,J=[],Q=_[_.length-1].length,te=Q+B;for(X=Q;X<te;X++,U++){var ee={},le=(ie=f[U]).substring(31,34).replace(/ /g,"");ee.atom=ee.elem=le[0].toUpperCase()+le.substring(1).toLowerCase(),ee.elem==="H"&&V||(ee.serial=X,J[X]=_[_.length-1].length,ee.x=parseFloat(ie.substring(0,10)),ee.y=parseFloat(ie.substring(10,20)),ee.z=parseFloat(ie.substring(20,30)),ee.hetflag=!0,ee.bonds=[],ee.bondOrder=[],ee.properties={},ee.index=_[_.length-1].length,_[_.length-1].push(ee))}for(X=0;X<I;X++,U++){ie=f[U];var de=J[parseInt(ie.substring(0,3))-1+Q],fe=J[parseInt(ie.substring(3,6))-1+Q],Se=parseFloat(ie.substring(6));de!==void 0&&fe!==void 0&&(_[_.length-1][de].bonds.push(fe),_[_.length-1][de].bondOrder.push(Se),_[_.length-1][fe].bonds.push(de),_[_.length-1][fe].bondOrder.push(Se))}if(!z.multimodel)break;for(z.onemol||_.push([]);f[U]!=="$$$$"&&U<f.length;)U++;f.splice(0,++U)}return _})(h,n):a==="V3000"?(function(f,z){var _=[[]],V=!1;for(z.keepH!==void 0&&(V=!z.keepH);f.length>0&&!(f.length<8)&&f[4].startsWith("M  V30 BEGIN CTAB")&&f[5].startsWith("M  V30 COUNTS")&&!(f[5].length<14);){var B=f[5].substring(13).match(/\S+/g);if(B.length<2)break;var I=parseInt(B[0]);if(isNaN(I)||I<=0)break;var U=parseInt(B[1]),X=7;if(f.length<8+I+U)break;var ie,J=[],Q=_[_.length-1].length,te=Q+I;for(ie=Q;ie<te;ie++,X++){var ee=f[X].substring(6).match(/\S+/g);if(ee.length>4){var le={},de=ee[1].replace(/ /g,"");le.atom=le.elem=de[0].toUpperCase()+de.substring(1).toLowerCase(),le.elem==="H"&&V||(le.serial=ie,J[ie]=_[_.length-1].length,le.x=parseFloat(ee[2]),le.y=parseFloat(ee[3]),le.z=parseFloat(ee[4]),le.hetflag=!0,le.bonds=[],le.bondOrder=[],le.properties={},le.index=_[_.length-1].length,_[_.length-1].push(le))}}if(f[X]!=="M  V30 END ATOM"||(X++,U===0||f[X]!=="M  V30 BEGIN BOND"))break;for(X++,ie=0;ie<U;ie++,X++){var fe=f[X].substring(6).match(/\S+/g);if(fe.length>3){var Se=J[parseInt(fe[2])-1+Q],xe=J[parseInt(fe[3])-1+Q],Me=parseFloat(fe[1]);Se!==void 0&&xe!==void 0&&(_[_.length-1][Se].bonds.push(xe),_[_.length-1][Se].bondOrder.push(Me),_[_.length-1][xe].bonds.push(Se),_[_.length-1][xe].bondOrder.push(Me))}}if(!z.multimodel)break;for(z.onemol||_.push([]);f[X]!=="$$$$"&&X<f.length;)X++;f.splice(0,++X)}return _})(h,n):[[""]]}function ge(ye,n){var a=[[]];typeof ye=="string"&&(ye=JSON.parse(ye));for(var h=ye.m,f=h[0].a,z=h[0].b,_=h[0].s,V=n!==void 0&&n.parseStyle!==void 0?n.parseStyle:_!==void 0,B=a[a.length-1].length,I=0;I<f.length;I++){var U=f[I],X={};X.id=U.i,X.x=U.x,X.y=U.y,X.z=U.z||0,X.bonds=[],X.bondOrder=[];var ie=U.l||"C";X.elem=ie[0].toUpperCase()+ie.substring(1).toLowerCase(),X.serial=a[a.length-1].length,V&&(X.style=_[U.s||0]),a[a.length-1].push(X)}for(let J=0;J<z.length;J++){let Q=z[J],te=Q.b+B,ee=Q.e+B,le=Q.o||1,de=a[a.length-1][te],fe=a[a.length-1][ee];de.bonds.push(ee),de.bondOrder.push(le),fe.bonds.push(te),fe.bondOrder.push(le)}return a}function ae(ye,n){(function(I,U){const X=U||3.2,ie=X*X,J=[];for(let Q=0,te=I.length;Q<te;Q++){I[Q].index=Q;const ee=I[Q];ee.hetflag||ee.atom!=="N"&&ee.atom!=="O"||(J.push(ee),ee.hbondOther=null,ee.hbondDistanceSq=Number.POSITIVE_INFINITY)}J.sort(function(Q,te){return Q.z-te.z});for(let Q=0,te=J.length;Q<te;Q++){const ee=J[Q];for(let le=Q+1;le<te;le++){const de=J[le],fe=de.z-ee.z;if(fe>X)break;if(de.atom==ee.atom)continue;const Se=Math.abs(de.y-ee.y);if(Se>X)continue;const xe=Math.abs(de.x-ee.x);if(xe>X)continue;const Me=xe*xe+Se*Se+fe*fe;Me>ie||de.chain==ee.chain&&Math.abs(de.resi-ee.resi)<4||(Me<ee.hbondDistanceSq&&(ee.hbondOther=de,ee.hbondDistanceSq=Me),Me<de.hbondDistanceSq&&(de.hbondOther=ee,de.hbondDistanceSq=Me))}}})(ye,n);const a={};let h,f,z,_,V,B;for(h=0,f=ye.length;h<f;h++)if(V=ye[h],a[V.chain]===void 0&&(a[V.chain]=[]),isFinite(V.hbondDistanceSq)){const I=V.hbondOther;a[I.chain]===void 0&&(a[I.chain]=[]),Math.abs(I.resi-V.resi)===4&&(a[V.chain][V.resi]="h")}for(z in a)for(_=1;_<a[z].length-1;_++){const I=a[z][_-1],U=a[z][_+1];B=a[z][_],I=="h"&&I==U&&B!=I&&(a[z][_]=I)}for(h=0,f=ye.length;h<f;h++)V=ye[h],isFinite(V.hbondDistanceSq)&&a[V.chain][V.resi]!="h"&&V.ss!=="h"&&(a[V.chain][V.resi]="maybesheet");for(let I=0,U=ye.length;I<U;I++)if(V=ye[I],isFinite(V.hbondDistanceSq)&&a[V.chain][V.resi]=="maybesheet"){let X=V.hbondOther,ie=a[X.chain][X.resi];ie!="maybesheet"&&ie!="s"||(a[V.chain][V.resi]="s",a[X.chain][X.resi]="s")}for(let I in a){for(let U=1;U<a[I].length-1;U++){const X=a[I][U-1],ie=a[I][U+1];B=a[I][U],X=="s"&&X==ie&&B!=X&&(a[I][U]=X)}for(let U=0;U<a[I].length;U++){const X=a[I][U];X!="h"&&X!="s"||a[I][U-1]!=X&&a[I][U+1]!=X&&delete a[I][U]}}for(h=0,f=ye.length;h<f;h++)V=ye[h],B=a[V.chain][V.resi],delete V.hbondOther,delete V.hbondDistanceSq,B!==void 0&&B!=="maybesheet"&&(V.ss=B,a[V.chain][V.resi-1]!=B&&(V.ssbegin=!0),a[V.chain][V.resi+1]!=B&&(V.ssend=!0))}function Ue(ye,n,a,h){const f=!a.duplicateAssemblyAtoms,z=n.length;let _=z,V=-1,B=null,I=null;(a.normalizeAssembly||a.wrapAtoms)&&h&&(B=(0,u.conversionMatrix3)(h.a,h.b,h.c,h.alpha,h.beta,h.gamma),I=new u.Matrix3,I.getInverse3(B));let U=function(J){let Q=J.clone().applyMatrix3(I);const te=[Q.x,Q.y,Q.z],ee=[0,0,0];for(let de=0;de<3;de++){for(;te[de]<-.001;)te[de]+=1,ee[de]+=1;for(;te[de]>1.001;)te[de]-=1,ee[de]-=1}const le=new u.Vector3(ee[0],ee[1],ee[2]);return le.applyMatrix3(B),le};if(a.normalizeAssembly&&h)for(let J=0;J<ye.length;J++){const Q=new u.Vector3(0,0,0);for(let ee=0;ee<z;ee++){const le=new u.Vector3(n[ee].x,n[ee].y,n[ee].z);le.applyMatrix4(ye[J]),Q.add(le)}Q.divideScalar(z);const te=U(Q);ye[J].isNearlyIdentity()&&te.lengthSq()>.001&&(V=J),ye[J].translate(te)}if(f){if(ye.length>1)for(let J=0;J<n.length;J++){var X=[];for(let Q=0;Q<ye.length;Q++)if(!ye[Q].isNearlyIdentity()){var ie=new u.Vector3;ie.set(n[J].x,n[J].y,n[J].z),ie.applyMatrix4(ye[Q]),X.push(ie)}n[J].symmetries=X}}else{for(let J=0;J<z;J++)n[J].sym=-1;for(let J=0;J<ye.length;J++)if(ye[J].isNearlyIdentity()||V==J)for(let Q=0;Q<z;Q++)n[Q].sym=J;else{let Q=new u.Vector3;for(let te=0;te<z;te++){const ee=[];for(let de=0;de<n[te].bonds.length;de++)ee.push(n[te].bonds[de]+_);if(Q.set(n[te].x,n[te].y,n[te].z),Q.applyMatrix4(ye[J]),a.wrapAtoms&&h){let de=U(Q);Q.add(de)}const le={};for(const de in n[te])le[de]=n[te][de];le.x=Q.x,le.y=Q.y,le.z=Q.z,le.bonds=ee,le.sym=J,le.index=n.length,n.push(le)}_=n.length}if(a.wrapAtoms&&h){let J=new u.Vector3;for(let Q=0;Q<z;Q++){J.set(n[Q].x,n[Q].y,n[Q].z);let te=U(J);J.add(te),n[Q].x=J.x,n[Q].y=J.y,n[Q].z=J.z}}if(V>=0){const J=new u.Vector3;for(let Q=0;Q<z;Q++)J.set(n[Q].x,n[Q].y,n[Q].z),J.applyMatrix4(ye[V]),n[Q].x=J.x,n[Q].y=J.y,n[Q].z=J.z}ye.length=0}}var Ee=s(408);const Ge=new Set(["ABU","ACD","ALA","ALB","ALI","ARG","AR0","ASN","ASP","ASX","BAS","CYS","CYH","CYX","CSS","CSH","GLN","GLU","GLX","GLY","HIS","HIE","HID","HIP","HYP","ILE","ILU","LEU","LYS","MET","PCA","PGA","PHE","PR0","PRO","PRZ","SER","THR","TRP","TYR","VAL","A","1MA","C","5MC","OMC","G","1MG","2MG","M2G","7MG","OMG","YG","I","T","U","+U","H2U","5MU","PSU","ACE","F0R","H2O","HOH","WAT"]);function tt(ye,n){const a=[],h=[];for(let V=0,B=ye.length;V<B;V++){const I=ye[V];I.index=V,I.hetflag||!Ge.has(I.resn)?h.push(I):a.push(I)}(0,_e.assignBonds)(h,n),a.sort(function(V,B){return V.chain!==B.chain?V.chain<B.chain?-1:1:V.resi-B.resi});let f,z=-1,_=-1;for(let V=0,B=a.length;V<B;V++){const I=a[V];I.resi!==z&&(z=I.resi,f||_++,f=!1),I.reschain=_;for(let U=V+1;U<a.length;U++){const X=a[U];if(X.chain!==I.chain||X.resi-I.resi>1)break;(0,Ee.areConnected)(I,X,n)&&(I.bonds.indexOf(X.index)===-1&&(I.bonds.push(X.index),I.bondOrder.push(1),X.bonds.push(I.index),X.bondOrder.push(1)),I.resi!==X.resi&&(f=!0))}}}const ve=function(ye,n,a,h){return new u.Vector3(n,a,h).applyMatrix3(ye)};function ze(ye,n={}){const a=[],h=!n.doAssembly,f=a.modelData=[],z=n.assignBonds===void 0||n.assignBonds;function _(ie,J){const Q=[];let te=0,ee=0;for(;ee<ie.length;){for(;ie.substring(ee,ee+J.length)!==J&&ee<ie.length;)if(ie[ee]==="'"){for(ee++;ee<ie.length&&ie[ee]!=="'";)ee++;for(;ie.substring(ee,ee+J.length)!==J&&ee<ie.length;)ee++}else if(ie[ee]==='"'){for(ee++;ee<ie.length&&ie[ee]!=='"';)ee++;ee++}else ee++;Q.push(ie.substring(te,ee)),te=ee+=J.length}return Q}const V=ye.split(/\r?\n|\r/),B=[];let I=!1;for(let ie=0;ie<V.length;ie++){var U=V[ie].split("#")[0];if(I?U[0]===";"&&(I=!1):U[0]===";"&&(I=!0),I||U!==""){if(!I&&(U=U.trim())[0]==="_"){const J=U.split(/\s/)[0].indexOf(".");if(J>-1){let Q=U.split("");Q[J]="_",U=(U=Q.join("")).substring(0,J)+"_"+U.substring(J+1)}}B.push(U)}}let X=0;for(;X<B.length;){for(;!B[X].startsWith("data_")||B[X]==="data_global";)X++;X++;const ie={};for(;X<B.length&&!B[X].startsWith("data_");)if(B[X][0]===void 0)X++;else if(B[X][0]==="_"){const ee=B[X].split(/\s/)[0].toLowerCase(),le=ie[ee]=ie[ee]||[],de=B[X].substring(B[X].indexOf(ee)+ee.length);if(de==="")if(X++,B[X][0]===";"){let fe=B[X].substring(1);for(X++;B[X]!==";";)fe=fe+`
`+B[X],X++;le.push(fe)}else le.push(B[X]);else le.push(de.trim());X++}else if(B[X].substring(0,5)==="loop_"){X++;const ee=[];for(;B[X]===""||B[X][0]==="_";){if(B[X]!==""){let de=B[X].split(/\s/)[0].toLowerCase(),fe=ie[de]=ie[de]||[];ee.push(fe)}X++}let le=0;for(;X<B.length&&B[X][0]!=="_"&&!B[X].startsWith("loop_")&&!B[X].startsWith("data_");){let de=_(B[X]," ");for(let fe=0;fe<de.length;fe++)de[fe]!==""&&(ee[le].push(de[fe]),le=(le+1)%ee.length);X++}}else X++;f.push({symmetries:[]}),a.push([]);const J=ie._atom_site_id!==void 0?ie._atom_site_id.length:ie._atom_site_label.length;let Q;if(ie._cell_length_a!==void 0){const ee=parseFloat(ie._cell_length_a),le=parseFloat(ie._cell_length_b),de=parseFloat(ie._cell_length_c),fe=parseFloat(ie._cell_angle_alpha)||90,Se=parseFloat(ie._cell_angle_beta)||90,xe=parseFloat(ie._cell_angle_gamma)||90;Q=(0,u.conversionMatrix3)(ee,le,de,fe,Se,xe),f[f.length-1].cryst={a:ee,b:le,c:de,alpha:fe,beta:Se,gamma:xe}}for(let ee=0;ee<J;ee++){if(ie._atom_site_group_pdb!==void 0&&ie._atom_site_group_pdb[ee]==="TER")continue;const le={};if(ie._atom_site_cartn_x!==void 0)le.x=parseFloat(ie._atom_site_cartn_x[ee]),le.y=parseFloat(ie._atom_site_cartn_y[ee]),le.z=parseFloat(ie._atom_site_cartn_z[ee]);else{const fe=ve(Q,parseFloat(ie._atom_site_fract_x[ee]),parseFloat(ie._atom_site_fract_y[ee]),parseFloat(ie._atom_site_fract_z[ee]));le.x=fe.x,le.y=fe.y,le.z=fe.z}le.chain=ie._atom_site_auth_asym_id?ie._atom_site_auth_asym_id[ee]:ie._atom_site_label_asym_id?ie._atom_site_label_asym_id[ee]:void 0,le.lchain=ie._atom_site_label_asym_id?ie._atom_site_label_asym_id[ee]:void 0,le.resi=ie._atom_site_auth_seq_id?parseInt(ie._atom_site_auth_seq_id[ee]):ie._atom_site_label_seq_id?ie._atom_site_label_seq_id[ee]:void 0,le.resn=ie._atom_site_auth_comp_id?ie._atom_site_auth_comp_id[ee].trim():ie._atom_site_label_comp_id?ie._atom_site_label_comp_id[ee].trim():void 0,le.atom=ie._atom_site_auth_atom_id?ie._atom_site_auth_atom_id[ee].replace(/"/gm,""):ie._atom_site_label_atom_id?ie._atom_site_label_atom_id[ee].replace(/"/gm,""):void 0,le.hetflag=!ie._atom_site_group_pdb||ie._atom_site_group_pdb[ee]==="HETA"||ie._atom_site_group_pdb[ee]==="HETATM",ie._atom_site_b_iso_or_equiv&&(le.b=parseFloat(ie._atom_site_b_iso_or_equiv[ee]));let de="X";ie._atom_site_type_symbol?de=ie._atom_site_type_symbol[ee].replace(/\(?\+?\d+.*/,""):ie._atom_site_label&&(de=ie._atom_site_label[ee].split("_")[0].replace(/\(?\d+.*/,"")),le.elem=de[0].toUpperCase()+de.substring(1,2).toLowerCase(),le.bonds=[],le.ss="c",le.serial=ee,le.bondOrder=[],le.properties={},a[a.length-1].push(le)}if(ie._pdbx_struct_oper_list_id!==void 0&&!h)for(let ee=0;ee<ie._pdbx_struct_oper_list_id.length;ee++){const le=parseFloat(ie["_pdbx_struct_oper_list_matrix[1][1]"][ee]),de=parseFloat(ie["_pdbx_struct_oper_list_matrix[1][2]"][ee]),fe=parseFloat(ie["_pdbx_struct_oper_list_matrix[1][3]"][ee]),Se=parseFloat(ie["_pdbx_struct_oper_list_vector[1]"][ee]),xe=parseFloat(ie["_pdbx_struct_oper_list_matrix[2][1]"][ee]),Me=parseFloat(ie["_pdbx_struct_oper_list_matrix[2][2]"][ee]),Be=parseFloat(ie["_pdbx_struct_oper_list_matrix[2][3]"][ee]),Ne=parseFloat(ie["_pdbx_struct_oper_list_vector[2]"][ee]),je=parseFloat(ie["_pdbx_struct_oper_list_matrix[3][1]"][ee]),De=parseFloat(ie["_pdbx_struct_oper_list_matrix[3][2]"][ee]),Je=parseFloat(ie["_pdbx_struct_oper_list_matrix[3][3]"][ee]),ct=parseFloat(ie["_pdbx_struct_oper_list_vector[3]"][ee]),dt=new u.Matrix4(le,de,fe,Se,xe,Me,Be,Ne,je,De,Je,ct);f[f.length-1].symmetries.push(dt)}const te=function(ee){const le=ee.match("-"),de=(ee=ee.replace(/[-xyz]/g,"")).split("/");let fe,Se;return Se=de[1]===void 0?1:parseInt(de[1]),fe=de[0]===""?1:parseInt(de[0]),fe/Se*(le?-1:1)};if(ie._symmetry_equiv_pos_as_xyz!==void 0&&!h)for(let ee=0;ee<ie._symmetry_equiv_pos_as_xyz.length;ee++){const le=ie._symmetry_equiv_pos_as_xyz[ee].replace(/["' ]/g,"").split(",").map(function(xe){return xe.replace(/-/g,"+-")});let de=new u.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let xe=0;xe<3;xe++){const Me=le[xe].split("+");for(let Be=0;Be<Me.length;Be++){const Ne=Me[Be];if(Ne==="")continue;const je=te(Ne);Ne.match("x")?de.elements[xe+0]=je:Ne.match("y")?de.elements[xe+4]=je:Ne.match("z")?de.elements[xe+8]=je:de.elements[xe+12]=je}}const fe=Q.getMatrix4(),Se=new u.Matrix4().getInverse(fe,!0);de=new u.Matrix4().multiplyMatrices(de,Se),de=new u.Matrix4().multiplyMatrices(fe,de),f[f.length-1].symmetries.push(de)}}for(let ie=0;ie<a.length;ie++)!z||n.duplicateAssemblyAtoms&&!n.dontConnectDuplicatedAtoms||tt(a[ie],n),ae(a[ie],n.hbondCutoff),Ue(f[ie].symmetries,a[ie],n,f[ie].cryst),n.duplicateAssemblyAtoms&&!n.dontConnectDuplicatedAtoms&&z&&tt(a[ie],n);return a}let rt={"C.1":"C",C1:"C","C.2":"C",C2:"C","C.3":"C",C3:"C","C.ar":"C",Car:"C","C.cat":"C",Ccat:"C","H.spc":"H",Hspc:"H","H.t3p":"H",Ht3p:"H","N.1":"N",N1:"N","N.2":"N",N2:"N","N.3":"N",N3:"N","N.4":"N",N4:"N","N.am":"N",Nam:"N","N.ar":"N",Nar:"N","N.p13":"N",Np13:"N","O.2":"O",O2:"O","O.3":"O",O3:"O","O.co2":"O",Oco2:"O","O.spc":"O",Ospc:"O","O.t3p":"O",Ot3p:"O","P.3":"P",P3:"P","S.2":"S",S2:"S","S.3":"S",S3:"S","S.o":"S",So:"S","S.o2":"S",So2:"S"};function at(ye,n){var a=[[]],h=!1;n.keepH!==void 0&&(h=!n.keepH);var f=ye.search(/@<TRIPOS>MOLECULE/),z=ye.search(/@<TRIPOS>ATOM/);if(f==-1||z==-1)return a;for(var _=ye.substring(f).split(/\r?\n|\r/);_.length>0;){var V=[],B=_[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),I=parseInt(B[0]),U=0;B.length>1&&(U=parseInt(B[1]));var X,ie=4;for(X=3;X<_.length;X++)if(_[X]=="@<TRIPOS>ATOM"){ie=X+1;break}var J=a[a.length-1].length,Q=J+I;for(X=J;X<Q;X++){var te={},ee=(B=_[ie++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "))[5];if(ee=rt[ee]!==void 0?rt[ee]:(ee=ee.split(".")[0])[0].toUpperCase()+ee.substring(1).toLowerCase(),te.atom=B[1],te.elem=ee,!(te.elem=="H"&&h)){var le=a[a.length-1].length,de=parseInt(B[0]);te.serial=de,te.x=parseFloat(B[2]),te.y=parseFloat(B[3]),te.z=parseFloat(B[4]),te.atom=B[5];var fe=parseFloat(B[8]);te.index=le,te.bonds=[],te.bondOrder=[],te.properties={charge:fe,partialCharge:fe},V[de]=le,a[a.length-1].push(te)}}for(var Se=!1;ie<_.length;)if(_[ie++]=="@<TRIPOS>BOND"){Se=!0;break}if(Se&&U)for(X=0;X<U;X++){B=_[ie++].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var xe=parseInt(B[1]),Me=a[a.length-1][V[xe]],Be=parseInt(B[2]),Ne=a[a.length-1][V[Be]],je=parseInt(B[3]);isNaN(je)&&(je=1),Me!==void 0&&Ne!==void 0&&(Me.bonds.push(V[Be]),Me.bondOrder.push(je),Ne.bonds.push(V[xe]),Ne.bondOrder.push(je))}if(!n.multimodel)break;n.onemol||a.push([]),_.splice(0,ie),ye=_.join(`
`)}return a}var Ke=s(40);function ft(ye,n){let a=ye.replace(/ /g,"");return a.length>0&&a[0]==="H"&&a!=="Hg"&&a!=="He"&&a!=="Hf"&&a!=="Hs"&&a!=="Ho"&&(a="H"),a.length>1&&(a=a[0].toUpperCase()+a.substring(1).toLowerCase(),Ke.bondTable[a]===void 0?a=a[0]:n&&(a==="Ca"||a==="Cd")&&(a="C")),a}function vt(ye){for(const n in ye)return!1;return!0}function yt(ye,n,a){const h=[],f=n.assignBonds===void 0||n.assignBonds,z=!n.keepH,_=!!n.noSecondaryStructure,V=!n.noComputeSecondaryStructure,B=!n.doAssembly,I=n.altLoc?n.altLoc:"A",U={symmetries:[],cryst:void 0};let X,ie=[];const J=[];let Q;const te={};for(let ee=0;ee<ye.length;ee++){Q=ye[ee].replace(/^\s*/,"");const le=Q.substring(0,6);let de,fe,Se;if(le.indexOf("END")===0){if(ie=ye.slice(ee+1),le==="END")for(const xe in a)a.hasOwnProperty(xe)&&delete a[xe];break}if(le==="ATOM  "||le==="HETATM"){let xe,Me,Be,Ne,je,De,Je,ct,dt,lt,_t,Et;if(_t=Q.substring(16,17),_t!==" "&&_t!==I&&I!=="*"||(lt=parseInt(Q.substring(6,11)),X=Q.substring(12,16).replace(/ /g,""),xe=Q.substring(17,20).replace(/ /g,""),Me=Q.substring(21,22),Be=parseInt(Q.substring(22,26)),Ne=Q.substring(26,27),je=parseFloat(Q.substring(30,38)),De=parseFloat(Q.substring(38,46)),Je=parseFloat(Q.substring(46,54)),Et=parseFloat(Q.substring(60,68)),dt=Q.substring(76,78).replace(/ /g,""),dt=dt===""||Ke.bondTable[dt]===void 0?ft(Q.substring(12,14),Q[0]=="A"):dt[0].toUpperCase()+dt.substring(1).toLowerCase(),dt==="H"&&z))continue;ct=le[0]=="H",J[lt]=h.length,h.push({resn:xe,x:je,y:De,z:Je,elem:dt,hetflag:ct,altLoc:_t,chain:Me,resi:Be,icode:Ne,rescode:Be+(Ne!==" "?"^"+Ne:""),serial:lt,atom:X,bonds:[],ss:"c",bondOrder:[],properties:{},b:Et,pdbline:Q})}else if(le==="SHEET "){de=Q.substring(21,22),fe=parseInt(Q.substring(22,26)),Se=parseInt(Q.substring(33,37)),de in a||(a[de]={}),a[de][fe]="s1";for(let xe=fe+1;xe<Se;xe++)a[de][xe]="s";a[de][Se]="s2"}else if(le==="CONECT"){const xe=J[parseInt(Q.substring(6,11))],Me=h[xe],Be=[11,16,21,26];for(let Ne=0;Ne<4;Ne++){const je=J[parseInt(Q.substring(Be[Ne],Be[Ne]+5))];let De=xe+":"+je;const Je=h[je];if(Me!==void 0&&Je!==void 0)if(te[De]){te[De]+=1;for(let ct=0;ct<Me.bonds.length;ct++)if(Me.bonds[ct]==je){const dt=te[De];Me.bondOrder[ct]=dt>=4?1:dt}}else te[De]=1,Me.bonds.length!=0&&Me.bonds[Me.bonds.length-1]===je||(Me.bonds.push(je),Me.bondOrder.push(1))}}else if(le==="HELIX "){de=Q.substring(19,20),fe=parseInt(Q.substring(21,25)),Se=parseInt(Q.substring(33,37)),de in a||(a[de]={}),a[de][fe]="h1";for(let xe=fe+1;xe<Se;xe++)a[de][xe]="h";a[de][Se]="h2"}else if(B||le!=="REMARK"||Q.substring(13,18)!=="BIOMT"){if(le==="CRYST1"){let xe,Me,Be,Ne,je,De;xe=parseFloat(Q.substring(7,15)),Me=parseFloat(Q.substring(16,24)),Be=parseFloat(Q.substring(25,33)),Ne=parseFloat(Q.substring(34,40)),je=parseFloat(Q.substring(41,47)),De=parseFloat(Q.substring(48,54)),U.cryst={a:xe,b:Me,c:Be,alpha:Ne,beta:je,gamma:De}}else if(le==="ANISOU"){const xe=h[J[parseInt(Q.substring(6,11))]];if(xe){const Me=Q.substring(30).trim().split(/\s+/),Be={u11:parseInt(Me[0]),u22:parseInt(Me[1]),u33:parseInt(Me[2]),u12:parseInt(Me[3]),u13:parseInt(Me[4]),u23:parseInt(Me[5])};xe.uMat=Be}}}else{let xe,Me=new u.Matrix4;for(xe=1;xe<=3;xe++)if(Q=ye[ee].replace(/^\s*/,""),parseInt(Q.substring(18,19))==xe)Me.elements[xe-1]=parseFloat(Q.substring(23,33)),Me.elements[xe-1+4]=parseFloat(Q.substring(33,43)),Me.elements[xe-1+8]=parseFloat(Q.substring(43,53)),Me.elements[xe-1+12]=parseFloat(Q.substring(53)),ee++;else for(;Q.substring(13,18)==="BIOMT";)ee++,Q=ye[ee].replace(/^\s*/,"");Me.elements[3]=0,Me.elements[7]=0,Me.elements[11]=0,Me.elements[15]=1,U.symmetries.push(Me),ee--}}if((function(ee,le){for(let de=0,fe=ee.length;de<fe;de++){const Se=ee[de];for(let xe=0;xe<Se.bonds.length;xe++){const Me=ee[Se.bonds[xe]],Be=le[Se.serial];Me&&Be&&Me.bonds.indexOf(Be)<0&&(Me.bonds.push(Be),Me.bondOrder.push(Se.bondOrder[xe]))}}})(h,J),f&&tt(h,n),B||Ue(U.symmetries,h,n,U.cryst),V&&!_&&ae(h,n.hbondCutoff),!vt(a))for(let ee=0;ee<h.length;ee++){const le=h[ee];if(le!==void 0&&le.chain in a&&le.resi in a[le.chain]){const de=a[le.chain][le.resi];le.ss=de[0],de.length>1&&(de[1]=="1"?le.ssbegin=!0:de[1]=="2"&&(le.ssend=!0))}}return[h,U,ie]}function Kt(ye,n){n=n||{};var a=[],h={};a.modelData=[];for(var f=ye.split(/\r?\n|\r/);f.length>0;){var z=yt(f,n,h),_=z[0],V=z[1];if(f=z[2],_.length!=0){if(n.multimodel&&n.onemol&&a.length>0)for(var B=a[0].length,I=0;I<_.length;I++){var U=_[I];U.index=I;for(var X=0;X<U.bonds.length;X++)U.bonds[X]+=B;a[0].push(U)}else a.modelData.push(V),a.push(_);if(!n.multimodel)break}}return a}function zt(ye,n){var a=[[]],h=!n.noSecondaryStructure;a.modelData=[{symmetries:[]}];var f,z=[],_=ye.split(/\r?\n|\r/);for(let Se=0;Se<_.length;Se++){var V=(f=_[Se].replace(/^\s*/,"")).substring(0,6);if(V.indexOf("END")==0){if(n.multimodel){n.onemol||a.push([]);continue}break}if(V=="ATOM  "||V=="HETATM"){var B;let xe=parseInt(f.substring(6,11)),Me=f.substring(12,16).replace(/ /g,""),Be=f.substring(17,20).trim(),Ne=f.substring(21,22),je=parseInt(f.substring(22,26));var I=f.substring(30).trim().split(/\s+/),U=parseFloat(I[0]),X=parseFloat(I[1]),ie=parseFloat(I[2]),J=parseFloat(I[3]),Q=parseFloat(I[4]),te=Me[0];Me.length>1&&Me[1].toUpperCase()!=Me[1]&&(te=Me.substring(0,2)),B=f[0]=="H",z[xe]=a[a.length-1].length,a[a.length-1].push({resn:Be,x:U,y:X,z:ie,elem:te,hetflag:B,chain:Ne,resi:je,serial:xe,atom:Me,bonds:[],ss:"c",bondOrder:[],properties:{charge:J,partialCharge:J,radius:Q},pdbline:f})}else if(V=="CONECT"){var ee=parseInt(f.substring(6,11)),le=a[a.length-1][z[ee]];for(let xe=0;xe<4;xe++){var de=parseInt(f.substring([11,16,21,26][xe],[11,16,21,26][xe]+5)),fe=a[a.length-1][z[de]];le!==void 0&&fe!==void 0&&(le.bonds.push(z[de]),le.bondOrder.push(1))}}}for(let Se=0;Se<a.length;Se++)tt(a[Se],n),h&&ae(a[Se],n.hbondCutoff);return a}var vr=s(471),yr=function(ye){return String.fromCharCode.apply(null,ye).replace(/\0/g,"")},jr=function(ye){return ye==0||ye==2||ye==4?"h":ye==3?"s":"c"};let Lr=new Set(["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","NON-POLYMER","OTHER","PEPTIDE-LIKE","SACCHARIDE"]);function Cr(ye,n){var a=!n.keepH,h=n.altLoc?n.altLoc:"A",f=!!n.noSecondaryStructure,z=!n.noComputeSecondaryStructure,_=!n.doAssembly,V=n.assemblyIndex?n.assemblyIndex:0;ye=typeof ye=="string"?(0,v.base64ToArray)(ye):new Uint8Array(ye);var B,I,U,X,ie,J,Q=vr.decode(ye),te=[[]],ee=te.modelData=[],le=0,de=0,fe=0,Se=Q.secStructList,xe=Q.bFactorList,Me=Q.altLocList,Be=Q.occupancyList,Ne=Q.bondAtomList,je=Q.bondOrderList,De=Q.numModels;if(De==0)return te;n.multimodel||(De=1);var Je=[];if(!_&&Q.bioAssemblyList&&Q.bioAssemblyList.length>0){var ct=Q.bioAssemblyList[V].transformList;for(B=0,J=ct.length;B<J;B++){var dt=new u.Matrix4(ct[B].matrix);dt.transpose(),Je.push(dt)}}var lt=null;if(Q.unitCell){var _t=Q.unitCell;lt={a:_t[0],b:_t[1],c:_t[2],alpha:_t[3],beta:_t[4],gamma:_t[5]}}let Et=[];Q.entityList.forEach(oe=>{oe.chainIndexList.forEach(b=>{Et[b]=oe.type=="polymer"})});var ut=0;for(ie=0;ie<De;ie++){var Ct=Q.chainsPerModel[ie],Ye=te[te.length-1],ht=[];for(ee.push({symmetries:Je,cryst:lt}),B=0;B<Ct;++B){var Ot=Q.groupsPerChain[le],gt=yr(Q.chainIdList.subarray(4*le,4*le+4));Q.chainNameList&&(gt=yr(Q.chainNameList.subarray(4*le,4*le+4)));var Dt=de,Lt="";for(I=0;I<Ot;++I){var pt=Q.groupList[Q.groupTypeList[de]],Bt=pt.atomNameList.length,tr=0,jt=!1,wt=!1;if(Se){tr=Se[de];var cr=jr(tr);de!=0&&cr==Lt||(jt=!0),Lt=cr;var qt=de+1;(qt>=Se.length||jr(Se[qt]!=cr))&&(wt=!0)}var ar=Q.groupIdList[de],Qt=pt.groupName;let oe=pt.chemCompType;var nr=fe;let b=Lr.has(oe)||!Et[le];for(U=0;U<Bt;++U){var Mr=pt.elementList[U];if(a&&Mr=="H")fe+=1;else{var Kr="";xe&&(Kr=xe[fe]);var Nr="";Me&&Me[fe]&&(Nr=String.fromCharCode(Me[fe]));var pi="";if(Be&&(pi=Be[fe]),Nr==""||Nr==h||h=="*"){var ri=Q.atomIdList[fe],Ir=pt.atomNameList[U],ii=0;pt.atomChargeList&&(ii=pt.atomChargeList[U]);var wi=Q.xCoordList[fe],mi=Q.yCoordList[fe],bi=Q.zCoordList[fe];ht[fe]=Ye.length,Ye.push({resn:Qt,x:wi,y:mi,z:bi,elem:Mr,hetflag:b,chain:gt,resi:ar,icode:Nr,rescode:ar+(Nr!=" "?"^"+Nr:""),serial:ri,altLoc:Nr,index:fe,atom:Ir,bonds:[],ss:jr(tr),ssbegin:jt,ssend:wt,bondOrder:[],properties:{charge:ii,occupancy:pi},b:Kr}),fe+=1}else fe+=1}}var Hi=pt.bondAtomList;for(U=0,X=pt.bondOrderList.length;U<X;++U){var Pi=nr+Hi[2*U],Wi=nr+Hi[2*U+1],ti=pt.bondOrderList[U],ni=ht[Pi],ai=ht[Wi],hi=Ye[ni],g=Ye[ai];hi&&g&&(hi.bonds.push(ai),hi.bondOrder.push(ti),g.bonds.push(ni),g.bondOrder.push(ti))}de+=1}for(de=Dt,I=0;I<Ot;++I)de+=1;le+=1}if(Ne)for(let oe=ut,b=Ne.length;oe<b;oe+=2){let Ie=Ne[oe],ke=Ne[oe+1],Re=je?je[oe/2]:1;if(Ie>=fe){ut=oe;break}let it=ht[Ie],He=ht[ke],Tt=Ye[it],qe=Ye[He];Tt&&qe&&(Tt.bonds.push(He),Tt.bondOrder.push(Re),qe.bonds.push(it),qe.bondOrder.push(Re))}n.multimodel&&(n.onemol||te.push([]))}if(!_)for(let oe=0;oe<te.length;oe++)Ue(ee[oe].symmetries,te[oe],n,ee[oe].cryst);return z&&!f&&ae(te,n.hbondCutoff),te}function Rr(ye){var n,a=[],h=0,f=ye.split(/\r?\n|\r/);if(!(f.length>0&&f[0].includes("VERSION")))return[];{var z=f.filter(function(Q){return Q.includes("POINTERS")||Q.includes("ATOM_NAME")||Q.includes("CHARGE")||Q.includes("RADII")||Q.includes("BONDS_INC_HYDROGEN")||Q.includes("BONDS_WITHOUT_HYDROGEN")||Q.includes("RESIDUE_LABEL")||Q.includes("RESIDUE_POINTER")}),_=X("POINTERS");if(_==-1)return[];var V=ie(_),B=parseInt(f[_+1].slice(0,V[1]));let J=parseInt(f[_+2].slice(V[1],V[0]+V[1]));if(isNaN(B)||B<=0)return[];if((_=X("ATOM_NAME"))==-1)return[];var I=(V=ie(_))[0];for(let Q=0;Q<B/V[0];Q++){Q==parseInt(B/V[0])&&(I=B%V[0]);for(let te=0;te<I;te++){let ee={},le={charge:"",radii:""};ee.serial=h,ee.x=0,ee.y=0,ee.z=0,ee.atom=f[_+1].slice(V[1]*te,V[1]*(te+1)).trim(),ee.elem=f[_+1].slice(V[1]*te,V[1]*te+1).trim(),ee.properties=le,ee.bonds=[],ee.bondOrder=[],ee.index=a.length,a.push(ee),h++}_++}if((_=X("CHARGE"))!=-1){h=0,I=(V=ie(_))[0];for(let Q=0;Q<B/V[0];Q++){Q==parseInt(B/V[0])&&(I=B%V[0]);for(let te=0;te<I;te++)a[h].properties.charge=parseFloat(f[_+1].slice(V[1]*te,V[1]*(te+1))),h++;_++}}var U=[];if((_=X("RESIDUE_POINTER"))!=-1){I=(V=ie(_))[0],_+=1;for(let Q=0;Q<J/V[0];Q++){Q==parseInt(J/V[0])&&(I=J%V[0]);for(let te=0;te<I;te++)U.push(parseInt(f[_].slice(V[1]*te,V[1]*(te+1))));_++}if((_=X("RESIDUE_LABEL"))!=-1){let Q=[];I=(V=ie(_))[0],_+=1;for(let de=0;de<J/V[0];de++){de==parseInt(J/V[0])&&(I=J%V[0]);for(let fe=0;fe<I;fe++)Q.push(f[_].slice(V[1]*fe,V[1]*(fe+1)).trim());_++}let te=0,ee=0,le="";U.push(a.length+1);for(let de=0;de<a.length;de++)de+1>=U[te]&&(le=Q[te],te+=1,ee+=1),a[de].resi=ee,a[de].resn=le}}if((_=X("RADII"))!=-1){h=0,I=(V=ie(_))[0];for(let Q=0;Q<B/V[0];Q++){Q==parseInt(B/V[0])&&(I=B%V[0]);for(let te=0;te<I;te++)a[h].properties.radii=parseFloat(f[_+1].slice(V[1]*te,V[1]*(te+1))),h++;_++}}if((_=X("BONDS_WITHOUT_HYDROGEN"))!=-1)for(h=0,I=(V=ie(_))[0],_+=1;!f[_].match(/^%FLAG/);){f[_+1].match(/^%FLAG/)&&(I=B%V[0]);for(let Q=0;Q<I;Q++)h%3==0?n=parseInt(f[_].slice(V[1]*Q,V[1]*(Q+1))/3):h%3==1&&(a[n].bonds.push(parseInt(f[_].slice(V[1]*Q,V[1]*(Q+1))/3)),a[n].bondOrder.push(1)),h++;_++}if((_=X("BONDS_INC_HYDROGEN"))!=-1)for(h=0,I=(V=ie(_))[0],_+=1;!f[_].match(/^%FLAG/);){f[_+1].match(/^%FLAG/)&&(I=B%V[0]);for(let Q=0;Q<I;Q++)h%3==0?n=parseInt(f[_].slice(V[1]*Q,V[1]*(Q+1))/3):h%3==1&&(a[n].bonds.push(parseInt(f[_].slice(V[1]*Q,V[1]*(Q+1))/3)),a[n].bonds.push(1)),h++;_++}}function X(J){var Q=f.indexOf(z.filter(function(te){return te.includes(J)})[0]);if(Number.isInteger(Q)&&Q>0){for(;!f[Q].includes("FORMAT");)Q++;return Q}return-1}function ie(J){var Q=f[J].match(/\((\d*)\S*/),te=f[J].match(/[a-zA-Z](\d*)\)\s*/);return te==null&&(te=f[J].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[parseInt(Q[1]),parseInt(te[1])]}return[a]}function Pr(ye,n){const a=[],h=ye.split(/\r?\n|\r/);for(;h.length>0;){const f=parseInt(h[1]);if(h.length<3||isNaN(f)||f<=0||h.length<f+3)break;const z=[];a.push(z);let _=2;const V=z.length,B=V+f;for(let I=V;I<B;I++){const U=h[_++],X={};X.serial=I,X.atom=U.slice(10,15).trim(),X.elem=ft(X.atom,!0),X.x=10*parseFloat(U.slice(20,28)),X.y=10*parseFloat(U.slice(28,36)),X.z=10*parseFloat(U.slice(36,44)),X.resi=parseInt(U.slice(0,5)),X.resn=U.slice(5,10).trim(),X.bonds=[],X.bondOrder=[],X.properties={},U.length>44&&(X.dx=10*parseFloat(U.slice(44,52)),X.dy=10*parseFloat(U.slice(52,60)),X.dz=10*parseFloat(U.slice(60,68))),z[I]=X}if(h.length<=_+3){const I=h[_++].trim().split(/\s+/);if(I.length===3){for(let U=0;U<3;U++)I[U]=(10*parseFloat(I[U])).toString();a.box=I}}h.splice(0,++_)}for(let f=0;f<a.length;f++)tt(a[f],n);return a}const Ei={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};function Br(ye,n){const a=[],h=ye.split(/\r?\n|\r/);let f=0,z=0,_=0;for(;_<h.length-9;){for(var V=_;V<h.length;V++)if(h[V].match(/ITEM: NUMBER OF ATOMS/)&&(z=parseInt(h[V+1])),h[V].match(/ITEM: ATOMS/)){f=V+1;break}const B=h[f-1].replace("ITEM: ATOMS ","").split(" ");a.push([]);for(let I=f;I<f+z;I++){const U={},X={},ie=h[I].split(" ");for(let J=0;J<ie.length;J++){const Q=Ei[B[J]];Q!==void 0&&(Q==="serial"?U[Q]=parseInt(ie[J]):Q==="x"||Q==="y"||Q==="z"?U[Q]=parseFloat(ie[J]):Q==="charge"||Q==="radius"?X[Q]=parseFloat(ie[J]):U[Q]=ie[J]),U.properties=X,U.bonds=[],U.bondOrder=[]}a[a.length-1][I-f]=U}_=f+z-1}if(n.assignBonds)for(let B=0;B<a.length;B++)(0,_e.assignBonds)(a[B],n);return a}var Wr;(function(ye){(function(n){n[n.Int8=1]="Int8",n[n.Int16=2]="Int16",n[n.Int32=3]="Int32",n[n.Uint8=4]="Uint8",n[n.Uint16=5]="Uint16",n[n.Uint32=6]="Uint32"})(ye.IntDataType||(ye.IntDataType={})),(function(n){n[n.Float32=32]="Float32",n[n.Float64=33]="Float64"})(ye.FloatDataType||(ye.FloatDataType={})),ye.getDataType=function(n){let a;return a=n instanceof Int8Array?ye.IntDataType.Int8:n instanceof Int16Array?ye.IntDataType.Int16:n instanceof Int32Array?ye.IntDataType.Int32:n instanceof Uint8Array?ye.IntDataType.Uint8:n instanceof Uint16Array?ye.IntDataType.Uint16:n instanceof Uint32Array?ye.IntDataType.Uint32:n instanceof Float32Array?ye.FloatDataType.Float32:n instanceof Float64Array?ye.FloatDataType.Float64:ye.IntDataType.Int32,a},ye.isSignedIntegerDataType=function(n){if(n instanceof Int8Array||n instanceof Int16Array||n instanceof Int32Array)return!0;for(let a=0,h=n.length;a<h;a++)if(a<0)return!1;return!0}})(Wr||(Wr={}));const Gi=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function Di(ye){let n=ye.data;for(let a=ye.encoding.length-1;a>=0;a--)n=tn(n,ye.encoding[a]);return n}function tn(ye,n){switch(n.kind){case"ByteArray":switch(n.type){case Wr.IntDataType.Uint8:return ye;case Wr.IntDataType.Int8:return(function(a){return new Int8Array(a.buffer,a.byteOffset)})(ye);case Wr.IntDataType.Int16:return(function(a){return We(a,2,Int16Array)})(ye);case Wr.IntDataType.Uint16:return(function(a){return We(a,2,Uint16Array)})(ye);case Wr.IntDataType.Int32:return(function(a){return We(a,4,Int32Array)})(ye);case Wr.IntDataType.Uint32:return(function(a){return We(a,4,Uint32Array)})(ye);case Wr.FloatDataType.Float32:return(function(a){return We(a,4,Float32Array)})(ye);case Wr.FloatDataType.Float64:return(function(a){return We(a,8,Float64Array)})(ye);default:throw new Error("unreachable")}case"FixedPoint":return(function(a,h){const f=a.length,z=Le(h.srcType,f),_=1/h.factor;for(let V=0;V<f;V++)z[V]=_*a[V];return z})(ye,n);case"IntervalQuantization":return(function(a,h){const f=a.length,z=Le(h.srcType,f),_=(h.max-h.min)/(h.numSteps-1),V=h.min;for(let B=0;B<f;B++)z[B]=V+_*a[B];return z})(ye,n);case"RunLength":return(function(a,h){const f=Ce(h.srcType,h.srcSize);let z=0;for(let _=0,V=a.length;_<V;_+=2){const B=a[_],I=a[_+1];for(let U=0;U<I;++U)f[z++]=B}return f})(ye,n);case"Delta":return(function(a,h){const f=a.length,z=Ce(h.srcType,f);if(!f)return a;z[0]=a[0]+(0|h.origin);for(let _=1;_<f;++_)z[_]=a[_]+z[_-1];return z})(ye,n);case"IntegerPacking":return(function(a,h){return a.length===h.srcSize?a:h.isUnsigned?(function(f,z){const _=z.byteCount===1?255:65535,V=f.length,B=new Int32Array(z.srcSize);let I=0,U=0;for(;I<V;){let X=0,ie=f[I];for(;ie===_;)X+=ie,I++,ie=f[I];X+=ie,B[U]=X,I++,U++}return B})(a,h):(function(f,z){const _=z.byteCount===1?127:32767,V=-_-1,B=f.length,I=new Int32Array(z.srcSize);let U=0,X=0;for(;U<B;){let ie=0,J=f[U];for(;J===_||J===V;)ie+=J,U++,J=f[U];ie+=J,I[X]=ie,U++,X++}return I})(a,h)})(ye,n);case"StringArray":return(function(a,h){const f=Di({encoding:h.offsetEncoding,data:h.offsets}),z=Di({encoding:h.dataEncoding,data:a}),_=h.stringData,V=new Array(f.length);V[0]="";for(let U=1,X=f.length;U<X;U++)V[U]=_.substring(f[U-1],f[U]);let B=0;const I=new Array(z.length);for(let U=0,X=z.length;U<X;U++)I[B++]=V[z[U]+1];return I})(ye,n)}}function Ce(ye,n){switch(ye){case Wr.IntDataType.Int8:return new Int8Array(n);case Wr.IntDataType.Int16:return new Int16Array(n);case Wr.IntDataType.Int32:return new Int32Array(n);case Wr.IntDataType.Uint8:return new Uint8Array(n);case Wr.IntDataType.Uint16:return new Uint16Array(n);case Wr.IntDataType.Uint32:return new Uint32Array(n);default:return new Int32Array(n)}}function Le(ye,n){switch(ye){case Wr.FloatDataType.Float32:return new Float32Array(n);case Wr.FloatDataType.Float64:default:return new Float64Array(n)}}function We(ye,n,a){return ye.byteOffset==0&&ye.byteLength==ye.buffer.byteLength||(ye=new Uint8Array(ye)),new a(Gi?ye.buffer:(function(h,f){const z=new ArrayBuffer(h.length),_=new Uint8Array(z);for(let V=0,B=h.length;V<B;V+=f)for(let I=0;I<f;I++)_[V+f-I-1]=h[V+I];return z})(ye,n))}function St(ye){const n=Object.create(null),a=Object.create(null);for(const h of ye.columns)n[h.name]=h;return{rowCount:ye.rowCount,name:ye.name.substring(1),fieldNames:ye.columns.map(h=>h.name),getField(h){const f=n[h];if(f)return a[h]||(a[h]=Di(f.data)),a[h]}}}var mt=s(471);class Ht{constructor(n){if(this.C={},n){let a=n.getField("comp_id"),h=n.getField("atom_id_1"),f=n.getField("atom_id_2"),z=n.getField("value_order");for(let _=0;_<a.length;_++){let V=a[_],B=h[_],I=f[_],U=z[_],X=1;U=="doub"?X=2:U=="trip"&&(X=3),this.C[V]==null&&(this.C[V]={}),this.C[V][B]==null&&(this.C[V][B]={}),this.C[V][I]==null&&(this.C[V][I]={}),this.C[V][B][I]=X,this.C[V][I][B]=X}}}order(n,a,h){return this.C[n]!==void 0&&this.C[n][a]!==void 0&&this.C[n][a][h]!==void 0?this.C[n][a][h]:0}}class bt{constructor(n){if(this.C=[],n){let a=n.getField("conn_type_id"),h=n.getField("ptnr1_label_asym_id"),f=n.getField("ptnr1_label_seq_id"),z=n.getField("ptnr1_label_comp_id"),_=n.getField("ptnr1_label_atom_id"),V=n.getField("ptnr2_label_asym_id"),B=n.getField("ptnr2_label_seq_id"),I=n.getField("ptnr2_label_comp_id"),U=n.getField("ptnr2_label_atom_id"),X=n.getField("pdbx_value_order");for(let ie=0;ie<a.length;ie++)if(a[ie]=="disulf"||a[ie]=="covale"){let J=X?X[ie]==""?1:parseInt(X[ie]):1;this.C.push([[h[ie],f[ie],z[ie],_[ie]],[V[ie],B[ie],I[ie],U[ie]],J])}}}}class $t{constructor(){this.R={}}add(n){this.R[n.lchain]==null&&(this.R[n.lchain]={}),this.R[n.lchain][n.lresi]==null&&(this.R[n.lchain][n.lresi]={}),this.R[n.lchain][n.lresi][n.lresn]==null&&(this.R[n.lchain][n.lresi][n.lresn]=[]),this.R[n.lchain][n.lresi][n.lresn].push(n),this.R[n.lchain][n.lresi][n.lresn][n.atom]=n}geta([n,a,h,f]){if(this.R[n]!==void 0&&this.R[n][a]!==void 0&&this.R[n][a][h]!==void 0)return this.R[n][a][h][f]}setBonds(n,a){for(let h in this.R)for(let f in this.R[h])for(let z in this.R[h][f]){let _=this.R[h][f][z];for(let V=0;V<_.length;V++)for(let B=V+1;B<_.length;B++){let I=_[V],U=_[B],X=n.order(z,I.atom,U.atom);I.altLoc!=U.altLoc&&I.altLoc!=""&&U.altLoc!=""&&(X=0),X>0&&(I.bonds.push(U.index),U.bonds.push(I.index),I.bondOrder.push(X),U.bondOrder.push(X))}}for(let h of a.C){let f=h[0],z=h[1],_=h[2],V=this.geta(f),B=this.geta(z);V!=null&&B!=null&&(V.bonds.push(B.index),B.bonds.push(V.index),V.bondOrder.push(_),B.bondOrder.push(_))}}}function Jt(ye,n){var a=!n.keepH,h=n.altLoc?n.altLoc:"A",f=!n.noComputeSecondaryStructure;const z=!n.doAssembly,_=n.assignBonds===void 0||n.assignBonds;if(typeof ye=="string")try{ye=(0,v.base64ToArray)(ye)}catch{ye=new TextEncoder().encode(ye)}else ye=new Uint8Array(ye);var V=mt.decodeMsgpack(ye);V==31&&(ye=(0,v.inflateString)(ye,!1),V=mt.decodeMsgpack(ye));var B=[],I=B.modelData=[],U=V.dataBlocks.length;if(U==0)return B;n.multimodel||(U=1);for(let X=0;X<U;X++){let ie=B.length;const J=[];I.push({symmetries:[]}),B.push([]);const Q=V.dataBlocks[X],te=Object.create(null);for(const jt of Q.categories)te[jt.name.substr(1)]=St(jt);let ee={},le=te.struct_conf;if(le){let jt=le.getField("conf_type_id"),wt=le.getField("beg_label_asym_id"),cr=le.getField("beg_label_seq_id"),qt=le.getField("end_label_seq_id");for(let ar=0;ar<jt.length;ar++)if(jt[ar].startsWith("H")){let Qt=wt[ar],nr=cr[ar],Mr=qt[ar];Qt in ee||(ee[Qt]={}),ee[Qt][nr]="h1";for(let Kr=nr+1;Kr<Mr;Kr++)ee[Qt][Kr]="h";ee[Qt][Mr]="h2"}}let de=te.struct_sheet_range;if(de){let jt=de.getField("id"),wt=de.getField("beg_label_asym_id"),cr=de.getField("beg_label_seq_id"),qt=de.getField("end_label_seq_id");for(let ar=0;ar<jt.length;ar++){let Qt=wt[ar],nr=cr[ar],Mr=qt[ar];Qt in ee||(ee[Qt]={}),ee[Qt][nr]="s1";for(let Kr=nr+1;Kr<Mr;Kr++)ee[Qt][Kr]="s";ee[Qt][Mr]="s2"}}let fe=te.pdbx_struct_oper_list,Se=fe.getField("id");if(Se&&!z){let jt=fe.getField("matrix[1][1]"),wt=fe.getField("matrix[1][2]"),cr=fe.getField("matrix[1][3]"),qt=fe.getField("matrix[2][1]"),ar=fe.getField("matrix[2][2]"),Qt=fe.getField("matrix[2][3]"),nr=fe.getField("matrix[3][1]"),Mr=fe.getField("matrix[3][2]"),Kr=fe.getField("matrix[3][3]"),Nr=fe.getField("vector[1]"),pi=fe.getField("vector[2]"),ri=fe.getField("vector[3]");for(let Ir=0;Ir<Se.length;Ir++){const ii=new u.Matrix4(jt[Ir],wt[Ir],cr[Ir],Nr[Ir],qt[Ir],ar[Ir],Qt[Ir],pi[Ir],nr[Ir],Mr[Ir],Kr[Ir],ri[Ir]);I[I.length-1].symmetries.push(ii)}}let xe=new Ht(te.chem_comp_bond),Me=new $t,Be=new bt(te.struct_conn),Ne=te.atom_site,je=Ne.rowCount,De=Ne.getField("group_PDB"),Je=Ne.getField("Cartn_x"),ct=Ne.getField("Cartn_y"),dt=Ne.getField("Cartn_z"),lt=Ne.getField("auth_asym_id"),_t=Ne.getField("label_asym_id"),Et=Ne.getField("auth_seq_id"),ut=Ne.getField("label_seq_id"),Ct=Ne.getField("auth_comp_id"),Ye=Ne.getField("label_comp_id"),ht=Ne.getField("auth_atom_id"),Ot=Ne.getField("label_atom_id"),gt=Ne.getField("type_symbol"),Dt=Ne.getField("B_iso_or_equiv"),Lt=Ne.getField("id"),pt=Ne.getField("label_alt_id"),Bt=Ne.getField("pdbx_PDB_model_num"),tr=Bt?Bt[0]:0;for(let jt=0;jt<je;jt++){if(De!==void 0&&De[jt]==="TER")continue;if(Bt&&Bt[jt]!=tr){if(tr=Bt[jt],!n.multimodel)break;n.onemol||(B.push([]),I.push(I[I.length-1]),tr=Bt[jt],Me.setBonds(xe,Be),Me=new $t)}const wt={};wt.x=Je[jt],wt.y=ct[jt],wt.z=dt[jt],wt.chain=lt?lt[jt]:_t?_t[jt]:void 0,wt.lchain=_t?_t[jt]:void 0,wt.resi=Et?Et[jt]:ut?ut[jt]:void 0,wt.lresi=ut?ut[jt]:void 0,wt.resn=Ct?Ct[jt].trim():Ye?Ye[jt].trim():void 0,wt.lresn=Ye?Ye[jt].trim():void 0,wt.atom=ht?ht[jt].replace(/"/gm,""):Ot?Ot[jt].replace(/"/gm,""):void 0,wt.icode=pt?pt[jt]:void 0,wt.altLoc=wt.icode,wt.hetflag=!De||De[jt]==="HETA"||De[jt]==="HETATM";let cr="X";gt&&(cr=gt[jt].replace(/\(?\+?\d+.*/,"")),wt.elem=cr[0].toUpperCase()+cr.substring(1,2).toLowerCase(),Dt&&(wt.b=Dt[jt]),a&&wt.elem=="H"||wt.altLoc!=""&&wt.altLoc!=h&&h!="*"||(wt.bonds=[],wt.ss="c",wt.serial=Lt[jt],wt.model=tr,wt.bondOrder=[],wt.properties={},wt.index=B[B.length-1].length,J[wt.serial]=[B.length,wt.index],B[B.length-1].push(wt),Me.add(wt))}if(Me.setBonds(xe,Be),!vt(ee))for(let jt=ie;jt<B.length;jt++){let wt=B[jt];for(let cr=0;cr<wt.length;cr++){const qt=wt[cr];if(qt!==void 0&&qt.lchain in ee&&qt.lresi in ee[qt.lchain]){const ar=ee[qt.lchain][qt.lresi];qt.ss=ar[0],ar.length>1&&(ar[1]=="1"?qt.ssbegin=!0:ar[1]=="2"&&(qt.ssend=!0))}}}n.multimodel&&X<U-1&&(n.onemol||(B.push([]),I.push({symmetries:[]})))}for(let X=0;X<B.length;X++)!_||n.duplicateAssemblyAtoms&&!n.dontConnectDuplicatedAtoms||tt(B[X],n),f&&ae(B[X],n.hbondCutoff),Ue(I[X].symmetries,B[X],n,I[X].cryst),n.duplicateAssemblyAtoms&&!n.dontConnectDuplicatedAtoms&&_&&tt(B[X],n);return B}const Wt={vasp:Ae.VASP,VASP:Ae.VASP,cube:Ve.CUBE,CUBE:Ve.CUBE,xyz:W,XYZ:W,sdf:we,SDF:we,json:ge,cdjson:ge,CDJSON:ge,mcif:ze,cif:ze,CIF:ze,mol2:at,MOL2:at,pdb:Kt,PDB:Kt,pdbqt:Kt,PDBQT:Kt,pqr:zt,PQR:zt,mmtf:Cr,MMTF:Cr,prmtop:Rr,PRMTOP:Rr,gro:Pr,GRO:Pr,lammpstrj:Br,LAMMPSTRJ:Br,bcif:Jt,BCIF:Jt};function Ar(ye,n="utf8"){return new TextDecoder(n).decode(ye)}const xi=new TextEncoder,zi=(()=>{const ye=new Uint8Array(4);return!((new Uint32Array(ye.buffer)[0]=1)&ye[0])})(),_i={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Ti{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(n=8192,a={}){let h=!1;typeof n=="number"?n=new ArrayBuffer(n):(h=!0,this.lastWrittenByte=n.byteLength);const f=a.offset?a.offset>>>0:0,z=n.byteLength-f;let _=f;(ArrayBuffer.isView(n)||n instanceof Ti)&&(n.byteLength!==n.buffer.byteLength&&(_=n.byteOffset+f),n=n.buffer),this.lastWrittenByte=h?z:0,this.buffer=n,this.length=z,this.byteLength=z,this.byteOffset=_,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,_,z),this._mark=0,this._marks=[]}available(n=1){return this.offset+n<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(n=1){return this.offset+=n,this}back(n=1){return this.offset-=n,this}seek(n){return this.offset=n,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const n=this._marks.pop();if(n===void 0)throw new Error("Mark stack empty");return this.seek(n),this}rewind(){return this.offset=0,this}ensureAvailable(n=1){if(!this.available(n)){const a=2*(this.offset+n),h=new Uint8Array(a);h.set(new Uint8Array(this.buffer)),this.buffer=h.buffer,this.length=a,this.byteLength=a,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(n=1){return this.readArray(n,"uint8")}readArray(n,a){const h=_i[a].BYTES_PER_ELEMENT*n,f=this.byteOffset+this.offset,z=this.buffer.slice(f,f+h);if(this.littleEndian===zi&&a!=="uint8"&&a!=="int8"){const V=new Uint8Array(this.buffer.slice(f,f+h));V.reverse();const B=new _i[a](V.buffer);return this.offset+=h,B.reverse(),B}const _=new _i[a](z);return this.offset+=h,_}readInt16(){const n=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,n}readUint16(){const n=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,n}readInt32(){const n=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,n}readUint32(){const n=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat32(){const n=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat64(){const n=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,n}readBigInt64(){const n=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,n}readBigUint64(){const n=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,n}readChar(){return String.fromCharCode(this.readInt8())}readChars(n=1){let a="";for(let h=0;h<n;h++)a+=this.readChar();return a}readUtf8(n=1){return Ar(this.readBytes(n))}decodeText(n=1,a="utf8"){return Ar(this.readBytes(n),a)}writeBoolean(n){return this.writeUint8(n?255:0),this}writeInt8(n){return this.ensureAvailable(1),this._data.setInt8(this.offset++,n),this._updateLastWrittenByte(),this}writeUint8(n){return this.ensureAvailable(1),this._data.setUint8(this.offset++,n),this._updateLastWrittenByte(),this}writeByte(n){return this.writeUint8(n)}writeBytes(n){this.ensureAvailable(n.length);for(let a=0;a<n.length;a++)this._data.setUint8(this.offset++,n[a]);return this._updateLastWrittenByte(),this}writeInt16(n){return this.ensureAvailable(2),this._data.setInt16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(n){return this.ensureAvailable(2),this._data.setUint16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(n){return this.ensureAvailable(4),this._data.setInt32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(n){return this.ensureAvailable(4),this._data.setUint32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(n){return this.ensureAvailable(4),this._data.setFloat32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(n){return this.ensureAvailable(8),this._data.setFloat64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(n){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(n){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(n){return this.writeUint8(n.charCodeAt(0))}writeChars(n){for(let a=0;a<n.length;a++)this.writeUint8(n.charCodeAt(a));return this}writeUtf8(n){return this.writeBytes((function(a){return xi.encode(a)})(n))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}const Zr=1,$r=2,Gr=3,fr=4,Ri=5,Ii=6;function an(ye){switch(Number(ye)){case Zr:return"byte";case $r:return"char";case Gr:return"short";case fr:return"int";case Ri:return"float";case Ii:return"double";default:return"undefined"}}function Fi(ye){switch(Number(ye)){case Zr:case $r:return 1;case Gr:return 2;case fr:case Ri:return 4;case Ii:return 8;default:return-1}}function qi(ye){switch(String(ye)){case"byte":return Zr;case"char":return $r;case"short":return Gr;case"int":return fr;case"float":return Ri;case"double":return Ii;default:return-1}}function Ni(ye,n){if(ye!==1){const a=new Array(ye);for(let h=0;h<ye;h++)a[h]=n();return a}return n()}function Ci(ye,n,a){switch(n){case Zr:return Array.from(ye.readBytes(a));case $r:return(h=ye.readChars(a)).charCodeAt(h.length-1)===0?h.substring(0,h.length-1):h;case Gr:return Ni(a,ye.readInt16.bind(ye));case fr:return Ni(a,ye.readInt32.bind(ye));case Ri:return Ni(a,ye.readFloat32.bind(ye));case Ii:return Ni(a,ye.readFloat64.bind(ye));default:throw new Error(`non valid type ${n}`)}var h}function Yr(ye,n){if(ye)throw new TypeError(`Not a valid NetCDF v3.x file: ${n}`)}function li(ye){ye.offset%4!=0&&ye.skip(4-ye.offset%4)}function Qi(ye){const n=ye.readUint32(),a=ye.readChars(n);return li(ye),a}function Mi(ye,n){const a={version:n},h={length:ye.readUint32()},f=(function(_){const V={};let B,I;const U=_.readUint32();let X;if(U===0)return Yr(_.readUint32()!==0,"wrong empty tag for list of dimensions"),[];{Yr(U!==10,"wrong tag for list of dimensions");const ie=_.readUint32();X=new Array(ie);for(let J=0;J<ie;J++){const Q=Qi(_),te=_.readUint32();te===0&&(B=J,I=Q),X[J]={name:Q,size:te}}}return B!==void 0&&(V.recordId=B),I!==void 0&&(V.recordName=I),V.dimensions=X,V})(ye);Array.isArray(f)||(h.id=f.recordId,h.name=f.recordName,a.dimensions=f.dimensions),a.globalAttributes=rn(ye);const z=(function(_,V,B){const I=_.readUint32();let U,X=0;if(I===0)return Yr(_.readUint32()!==0,"wrong empty tag for list of variables"),[];{Yr(I!==11,"wrong tag for list of variables");const ie=_.readUint32();U=new Array(ie);for(let J=0;J<ie;J++){const Q=Qi(_),te=_.readUint32(),ee=new Array(te);for(let Me=0;Me<te;Me++)ee[Me]=_.readUint32();const le=rn(_),de=_.readUint32();Yr(de<1&&de>6,`non valid type ${de}`);const fe=_.readUint32();let Se=_.readUint32();B===2&&(Yr(Se>0,"offsets larger than 4GB not supported"),Se=_.readUint32());let xe=!1;V!==void 0&&ee[0]===V&&(X+=fe,xe=!0),U[J]={name:Q,dimensions:ee,attributes:le,type:an(de),size:fe,offset:Se,record:xe}}}return{variables:U,recordStep:X}})(ye,h?.id,n);return Array.isArray(z)||(a.variables=z.variables,h.recordStep=z.recordStep),a.recordDimension=h,a}function rn(ye){const n=ye.readUint32();let a;if(n===0)return Yr(ye.readUint32()!==0,"wrong empty tag for list of attributes"),[];{Yr(n!==12,"wrong tag for list of attributes");const h=ye.readUint32();a=new Array(h);for(let f=0;f<h;f++){const z=Qi(ye),_=ye.readUint32();Yr(_<1||_>6,`non valid type ${_}`);const V=ye.readUint32(),B=Ci(ye,_,V);li(ye),a[f]={name:z,type:an(_),value:B}}}return a}function fn(){const ye=[];ye.push("DIMENSIONS");for(const a of this.dimensions)ye.push(`  ${a.name.padEnd(30)} = size: ${a.size}`);ye.push(""),ye.push("GLOBAL ATTRIBUTES");for(const a of this.globalAttributes)ye.push(`  ${a.name.padEnd(30)} = ${a.value}`);const n=JSON.parse(JSON.stringify(this.variables));ye.push(""),ye.push("VARIABLES:");for(const a of n){a.value=this.getDataVariable(a);let h=JSON.stringify(a.value);h.length>50&&(h=h.substring(0,50)),isNaN(a.value.length)||(h+=` (length: ${a.value.length})`),ye.push(`  ${a.name.padEnd(30)} = ${h}`)}return ye.join(`
`)}class vn{constructor(n){this.toString=fn;const a=new Ti(n);a.setBigEndian(),Yr(a.readChars(3)!=="CDF","should start with CDF");const h=a.readByte();Yr(h>2,"unknown version"),this.header=Mi(a,h),this.buffer=a}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(n){const a=this.globalAttributes.find(h=>h.name===n);return a?a.value:null}getDataVariableAsString(n){const a=this.getDataVariable(n);return a?a.join(""):null}get variables(){return this.header.variables}getDataVariable(n){let a;if(a=typeof n=="string"?this.header.variables.find(h=>h.name===n):n,a===void 0)throw new Error("Not a valid NetCDF v3.x file: variable not found");return this.buffer.seek(a.offset),a.record?(function(h,f,z){const _=qi(f.type),V=f.size?f.size/Fi(_):1,B=z.length,I=new Array(B),U=z.recordStep;if(!U)throw new Error("recordDimension.recordStep is undefined");for(let X=0;X<B;X++){const ie=h.offset;I[X]=Ci(h,_,V),h.seek(ie+U)}return I})(this.buffer,a,this.header.recordDimension):(function(h,f){const z=qi(f.type),_=f.size/Fi(z),V=new Array(_);for(let B=0;B<_;B++)V[B]=Ci(h,z,1);return V})(this.buffer,a)}dataVariableExists(n){return this.header.variables.find(a=>a.name===n)!==void 0}attributeExists(n){return this.globalAttributes.find(a=>a.name===n)!==void 0}}class _r{static sameObj(n,a){return n&&a?JSON.stringify(n)==JSON.stringify(a):n==a}constructor(n,a,h){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new d.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=w.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=a||{},this.viewer=h,this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:w.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=n}getRadiusFromStyle(n,a){var h=this.defaultSphereRadius;if(a.radius!==void 0)h=a.radius;else if(_r.vdwRadii[n.elem])h=_r.vdwRadii[n.elem];else if(n.elem.length>1){let f=n.elem;f=f[0].toUpperCase()+f[1].toLowerCase(),_r.vdwRadii[f]&&(h=_r.vdwRadii[f])}return a.scale!==void 0&&(h*=a.scale),h}drawAtomCross(n,a){if(n.style.cross){var h=n.style.cross;if(!h.hidden){var f=h.linewidth||_r.defaultlineWidth;a[f]||(a[f]=new u.Geometry);var z=a[f].updateGeoGroup(6),_=this.getRadiusFromStyle(n,h),V=[[_,0,0],[-_,0,0],[0,_,0],[0,-_,0],[0,0,_],[0,0,-_]],B=n.clickable||n.hoverable;B&&n.intersectionShape===void 0&&(n.intersectionShape={sphere:[],cylinder:[],line:[]});for(var I=(0,v.getColorFromStyle)(n,h),U=z.vertexArray,X=z.colorArray,ie=0;ie<6;ie++){var J=3*z.vertices;if(z.vertices++,U[J]=n.x+V[ie][0],U[J+1]=n.y+V[ie][1],U[J+2]=n.z+V[ie][2],X[J]=I.r,X[J+1]=I.g,X[J+2]=I.b,B){var Q=new d.Vector3(V[ie][0],V[ie][1],V[ie][2]);Q.multiplyScalar(.1),Q.set(Q.x+n.x,Q.y+n.y,Q.z+n.z),n.intersectionShape.line.push(Q)}}}}}getGoodCross(n,a,h,f){for(var z=null,_=-1,V=0,B=n.bonds.length;V<B;V++)if(n.bonds[V]!=a.index){let U=n.bonds[V],X=this.atoms[U],ie=new d.Vector3(X.x,X.y,X.z).clone();ie.sub(h);let J=ie.clone();J.cross(f);var I=J.lengthSq();if(I>_&&(z=J,(_=I)>.1))return z}return z}getSideBondV(n,a,h){var f,z,_,V,B=new d.Vector3(n.x,n.y,n.z),I=new d.Vector3(a.x,a.y,a.z).clone(),U=null;if(I.sub(B),n.bonds.length===1)a.bonds.length===1?(U=I.clone(),Math.abs(U.x)>1e-4?U.y+=1:U.x+=1):(f=(h+1)%a.bonds.length,z=a.bonds[f],(_=this.atoms[z]).index==n.index&&(f=(f+1)%a.bonds.length,z=a.bonds[f],_=this.atoms[z]),(V=new d.Vector3(_.x,_.y,_.z).clone()).sub(B),(U=V.clone()).cross(I));else if((U=this.getGoodCross(n,a,B,I)).lengthSq()<.01){var X=this.getGoodCross(a,n,B,I);X!=null&&(U=X)}return U.lengthSq()<.01&&(U=I.clone(),Math.abs(U.x)>1e-4?U.y+=1:U.x+=1),U.cross(I),U.normalize(),U}addLine(n,a,h,f,z,_){n[h]=f.x,n[h+1]=f.y,n[h+2]=f.z,a[h]=_.r,a[h+1]=_.g,a[h+2]=_.b,n[h+3]=z.x,n[h+4]=z.y,n[h+5]=z.z,a[h+3]=_.r,a[h+4]=_.g,a[h+5]=_.b}drawBondLines(n,a,h){if(n.style.line){var f=n.style.line;if(!f.hidden){var z,_,V,B,I=f.linewidth||_r.defaultlineWidth;h[I]||(h[I]=new u.Geometry);for(var U=h[I].updateGeoGroup(6*n.bonds.length),X=U.vertexArray,ie=U.colorArray,J=0;J<n.bonds.length;J++){var Q=a[n.bonds[J]];if(Q.style.line&&!(n.index>=Q.index)){var te=new d.Vector3(n.x,n.y,n.z),ee=new d.Vector3(Q.x,Q.y,Q.z),le=te.clone().add(ee).multiplyScalar(.5),de=!1,fe=n.clickable||n.hoverable,Se=Q.clickable||Q.hoverable;(fe||Se)&&(fe&&(n.intersectionShape===void 0&&(n.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),n.intersectionShape.line.push(te),n.intersectionShape.line.push(le)),Se&&(Q.intersectionShape===void 0&&(Q.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),Q.intersectionShape.line.push(le),Q.intersectionShape.line.push(ee)));var xe=(0,v.getColorFromStyle)(n,n.style.line),Me=(0,v.getColorFromStyle)(Q,Q.style.line);if(n.bondStyles&&n.bondStyles[J]){var Be=n.bondStyles[J];if(!Be.iswire)continue;Be.singleBond&&(de=!0),Be.color1!==void 0&&(xe=w.CC.color(Be.color1)),Be.color2!==void 0&&(Me=w.CC.color(Be.color2))}var Ne,je,De=3*U.vertices;if(n.bondOrder[J]>1&&n.bondOrder[J]<4&&!de){var Je=this.getSideBondV(n,Q,J),ct=ee.clone();ct.sub(te),n.bondOrder[J]==2?(Je.multiplyScalar(.1),(z=te.clone()).add(Je),(_=te.clone()).sub(Je),(V=z.clone()).add(ct),(B=_.clone()).add(ct),xe==Me?(U.vertices+=4,this.addLine(X,ie,De,z,V,xe),this.addLine(X,ie,De+6,_,B,xe)):(U.vertices+=8,ct.multiplyScalar(.5),(Ne=z.clone()).add(ct),(je=_.clone()).add(ct),this.addLine(X,ie,De,z,Ne,xe),this.addLine(X,ie,De+6,Ne,V,Me),this.addLine(X,ie,De+12,_,je,xe),this.addLine(X,ie,De+18,je,B,Me))):n.bondOrder[J]==3&&(Je.multiplyScalar(.1),(z=te.clone()).add(Je),(_=te.clone()).sub(Je),(V=z.clone()).add(ct),(B=_.clone()).add(ct),xe==Me?(U.vertices+=6,this.addLine(X,ie,De,te,ee,xe),this.addLine(X,ie,De+6,z,V,xe),this.addLine(X,ie,De+12,_,B,xe)):(U.vertices+=12,ct.multiplyScalar(.5),(Ne=z.clone()).add(ct),(je=_.clone()).add(ct),this.addLine(X,ie,De,te,le,xe),this.addLine(X,ie,De+6,le,ee,Me),this.addLine(X,ie,De+12,z,Ne,xe),this.addLine(X,ie,De+18,Ne,V,Me),this.addLine(X,ie,De+24,_,je,xe),this.addLine(X,ie,De+30,je,B,Me)))}else xe==Me?(U.vertices+=2,this.addLine(X,ie,De,te,ee,xe)):(U.vertices+=4,this.addLine(X,ie,De,te,le,xe),this.addLine(X,ie,De+6,le,ee,Me))}}}}}drawAtomSphere(n,a){if(n.style.sphere){var h=n.style.sphere;if(!h.hidden){var f=(0,v.getColorFromStyle)(n,h),z=this.getRadiusFromStyle(n,h);if((n.clickable===!0||n.hoverable)&&n.intersectionShape!==void 0){var _=new d.Vector3(n.x,n.y,n.z);n.intersectionShape.sphere.push(new p.Sphere(_,z))}c.drawSphere(a,n,z,f)}}}drawAtomClickSphere(n){if(n.style.clicksphere){var a=n.style.clicksphere;if(!a.hidden){var h=this.getRadiusFromStyle(n,a);if((n.clickable===!0||n.hoverable)&&n.intersectionShape!==void 0){var f=new d.Vector3(n.x,n.y,n.z);n.intersectionShape.sphere.push(new p.Sphere(f,h))}}}}drawAtomInstanced(n,a){if(n.style.sphere){var h=n.style.sphere;if(!h.hidden){var f=this.getRadiusFromStyle(n,h),z=(0,v.getColorFromStyle)(n,h),_=a.updateGeoGroup(1),V=_.vertices,B=3*V,I=_.vertexArray,U=_.colorArray,X=_.radiusArray;if(I[B]=n.x,I[B+1]=n.y,I[B+2]=n.z,U[B]=z.r,U[B+1]=z.g,U[B+2]=z.b,X[V]=f,(n.clickable===!0||n.hoverable)&&n.intersectionShape!==void 0){var ie=new d.Vector3(n.x,n.y,n.z);n.intersectionShape.sphere.push(new p.Sphere(ie,f))}_.vertices+=1}}}drawSphereImposter(n,a,h,f){var z,_=n.updateGeoGroup(4),V=_.vertices,B=3*V,I=_.vertexArray,U=_.colorArray;for(z=0;z<4;z++)I[B+3*z]=a.x,I[B+3*z+1]=a.y,I[B+3*z+2]=a.z;var X=_.normalArray;for(z=0;z<4;z++)U[B+3*z]=f.r,U[B+3*z+1]=f.g,U[B+3*z+2]=f.b;X[B+0]=-h,X[B+1]=h,X[B+2]=0,X[B+3]=-h,X[B+4]=-h,X[B+5]=0,X[B+6]=h,X[B+7]=-h,X[B+8]=0,X[B+9]=h,X[B+10]=h,X[B+11]=0,_.vertices+=4;var ie=_.faceArray,J=_.faceidx;ie[J+0]=V,ie[J+1]=V+1,ie[J+2]=V+2,ie[J+3]=V+2,ie[J+4]=V+3,ie[J+5]=V,_.faceidx+=6}drawAtomImposter(n,a){if(n.style.sphere){var h=n.style.sphere;if(!h.hidden){var f=this.getRadiusFromStyle(n,h),z=(0,v.getColorFromStyle)(n,h);if((n.clickable===!0||n.hoverable)&&n.intersectionShape!==void 0){var _=new d.Vector3(n.x,n.y,n.z);n.intersectionShape.sphere.push(new p.Sphere(_,f))}this.drawSphereImposter(a,n,f,z)}}}calculateDashes(n,a,h,f,z){var _=Math.sqrt(Math.pow(n.x-a.x,2)+Math.pow(n.y-a.y,2)+Math.pow(n.z-a.z,2));h=Math.max(h,0),z=Math.max(z,0)+2*h,(f=Math.max(f,.001))+z>_&&(f=_,z=0);var V,B=Math.floor((_-f)/(f+z))+1;z=(_-B*f)/B;for(var I=new d.Vector3(n.x,n.y,n.z),U=new d.Vector3((a.x-n.x)/(_/z),(a.y-n.y)/(_/z),(a.z-n.z)/(_/z)),X=new d.Vector3((a.x-n.x)/(_/f),(a.y-n.y)/(_/f),(a.z-n.z)/(_/f)),ie=[],J=0;J<B;J++)V=new d.Vector3(I.x+X.x,I.y+X.y,I.z+X.z),ie.push({from:I,to:V}),I=new d.Vector3(V.x+U.x,V.y+U.y,V.z+U.z);return ie}static drawStickImposter(n,a,h,f,z,_=0,V=0){for(var B=n.updateGeoGroup(4),I=B.vertices,U=3*I,X=B.vertexArray,ie=B.colorArray,J=B.radiusArray,Q=B.normalArray,te=z.r,ee=z.g,le=z.b,de=function(Be){var Ne=-Be;return Ne==0&&(Ne=-1e-4),Ne},fe=U,Se=0;Se<4;Se++)X[fe]=a.x,Q[fe]=h.x,ie[fe]=te,X[++fe]=a.y,Q[fe]=h.y,ie[fe]=ee,X[++fe]=a.z,Q[fe]=h.z,ie[fe]=Se<2?le:de(le),fe++;B.vertices+=4,J[I]=-f,J[I+1]=f,J[I+2]=-f,J[I+3]=f;var xe=B.faceArray,Me=B.faceidx;xe[Me+0]=I,xe[Me+1]=I+1,xe[Me+2]=I+2,xe[Me+3]=I+2,xe[Me+4]=I+3,xe[Me+5]=I,B.faceidx+=6}drawBondSticks(n,a,h){var f,z;if(n.style.stick){var _=n.style.stick;if(!_.hidden){var V,B,I,U,X,ie,J,Q,te,ee,le,de,fe,Se,xe=_.radius||this.defaultStickRadius,Me=_.doubleBondScaling||.4,Be=_.tripleBondScaling||.25,Ne=((f=_.dashedBondConfig)===null||f===void 0?void 0:f.dashLength)||.1,je=((z=_.dashedBondConfig)===null||z===void 0?void 0:z.gapLength)||.25,De=xe,Je=_.singleBonds||!1,ct=_.dashedBonds||!1,dt=0,lt=0,_t=(0,v.getColorFromStyle)(n,_);!n.capDrawn&&n.bonds.length<4&&(dt=2);var Et=ri=>{var Ir=h.imposter?_r.drawStickImposter:c.drawCylinder;return!ct&&ri>=1?Ir:(ii,wi,mi,bi,Hi,Pi=0,Wi=0,ti=.1,ni=.25)=>{this.calculateDashes(wi,mi,bi,ti,ni).forEach(ai=>{Ir(ii,ai.from,ai.to,bi,Hi,Pi,Wi)})}};for(I=0;I<n.bonds.length;I++){var ut=Et(n.bondOrder[I]),Ct=a[n.bonds[I]];if(de=fe=Se=null,n.index<Ct.index){var Ye=Ct.style;if(!Ye.stick||Ye.stick.hidden)continue;var ht=(0,v.getColorFromStyle)(Ct,Ye.stick);if(De=xe,U=Je,n.bondStyles&&n.bondStyles[I]){if((X=n.bondStyles[I]).iswire)continue;X.radius&&(De=X.radius),X.singleBond&&(U=!0),X.color1!==void 0&&(_t=w.CC.color(X.color1)),X.color2!==void 0&&(ht=w.CC.color(X.color2))}var Ot=new d.Vector3(n.x,n.y,n.z),gt=new d.Vector3(Ct.x,Ct.y,Ct.z);if(n.bondOrder[I]<=1||U||n.bondOrder[I]>3){if(n.bondOrder[I]<1&&(De*=n.bondOrder[I]),!Ct.capDrawn&&Ct.bonds.length<4&&(lt=2),_t!=ht?(de=new d.Vector3().addVectors(Ot,gt).multiplyScalar(.5),ut(h,Ot,de,De,_t,dt,0,Ne,je),ut(h,de,gt,De,ht,0,lt,Ne,je)):ut(h,Ot,gt,De,_t,dt,lt,Ne,je),V=n.clickable||n.hoverable,B=Ct.clickable||Ct.hoverable,V||B){if(de||(de=new d.Vector3().addVectors(Ot,gt).multiplyScalar(.5)),V){var Dt=new p.Cylinder(Ot,de,De),Lt=new p.Sphere(Ot,De);n.intersectionShape.cylinder.push(Dt),n.intersectionShape.sphere.push(Lt)}if(B){var pt=new p.Cylinder(gt,de,De),Bt=new p.Sphere(gt,De);Ct.intersectionShape.cylinder.push(pt),Ct.intersectionShape.sphere.push(Bt)}}}else if(n.bondOrder[I]>1){var tr=0,jt=0;De!=xe&&(tr=2,jt=2);var wt,cr,qt,ar,Qt,nr=gt.clone(),Mr=null;nr.sub(Ot),Mr=this.getSideBondV(n,Ct,I),n.bondOrder[I]==2?(wt=De*Me,Mr.multiplyScalar(1.5*wt),(cr=Ot.clone()).add(Mr),(qt=Ot.clone()).sub(Mr),(ar=cr.clone()).add(nr),(Qt=qt.clone()).add(nr),_t!=ht?(de=new d.Vector3().addVectors(cr,ar).multiplyScalar(.5),fe=new d.Vector3().addVectors(qt,Qt).multiplyScalar(.5),ut(h,cr,de,wt,_t,tr,0),ut(h,de,ar,wt,ht,0,jt),ut(h,qt,fe,wt,_t,tr,0),ut(h,fe,Qt,wt,ht,0,jt)):(ut(h,cr,ar,wt,_t,tr,jt),ut(h,qt,Qt,wt,_t,tr,jt)),V=n.clickable||n.hoverable,B=Ct.clickable||Ct.hoverable,(V||B)&&(de||(de=new d.Vector3().addVectors(cr,ar).multiplyScalar(.5)),fe||(fe=new d.Vector3().addVectors(qt,Qt).multiplyScalar(.5)),V&&(ie=new p.Cylinder(cr,de,wt),J=new p.Cylinder(qt,fe,wt),n.intersectionShape.cylinder.push(ie),n.intersectionShape.cylinder.push(J)),B&&(te=new p.Cylinder(ar,de,wt),ee=new p.Cylinder(Qt,fe,wt),Ct.intersectionShape.cylinder.push(te),Ct.intersectionShape.cylinder.push(ee)))):n.bondOrder[I]==3&&(wt=De*Be,Mr.cross(nr),Mr.normalize(),Mr.multiplyScalar(3*wt),(cr=Ot.clone()).add(Mr),(qt=Ot.clone()).sub(Mr),(ar=cr.clone()).add(nr),(Qt=qt.clone()).add(nr),_t!=ht?(de=new d.Vector3().addVectors(cr,ar).multiplyScalar(.5),fe=new d.Vector3().addVectors(qt,Qt).multiplyScalar(.5),Se=new d.Vector3().addVectors(Ot,gt).multiplyScalar(.5),ut(h,cr,de,wt,_t,tr,0),ut(h,de,ar,wt,ht,0,jt),ut(h,Ot,Se,wt,_t,dt,0),ut(h,Se,gt,wt,ht,0,lt),ut(h,qt,fe,wt,_t,tr,0),ut(h,fe,Qt,wt,ht,0,jt)):(ut(h,cr,ar,wt,_t,tr,jt),ut(h,Ot,gt,wt,_t,dt,lt),ut(h,qt,Qt,wt,_t,tr,jt)),V=n.clickable||n.hoverable,B=Ct.clickable||Ct.hoverable,(V||B)&&(de||(de=new d.Vector3().addVectors(cr,ar).multiplyScalar(.5)),fe||(fe=new d.Vector3().addVectors(qt,Qt).multiplyScalar(.5)),Se||(Se=new d.Vector3().addVectors(Ot,gt).multiplyScalar(.5)),V&&(ie=new p.Cylinder(cr.clone(),de.clone(),wt),J=new p.Cylinder(qt.clone(),fe.clone(),wt),Q=new p.Cylinder(Ot.clone(),Se.clone(),wt),n.intersectionShape.cylinder.push(ie),n.intersectionShape.cylinder.push(J),n.intersectionShape.cylinder.push(Q)),B&&(te=new p.Cylinder(ar.clone(),de.clone(),wt),ee=new p.Cylinder(Qt.clone(),fe.clone(),wt),le=new p.Cylinder(gt.clone(),Se.clone(),wt),Ct.intersectionShape.cylinder.push(te),Ct.intersectionShape.cylinder.push(ee),Ct.intersectionShape.cylinder.push(le))))}}}var Kr=!1,Nr=0,pi=!1;for(I=0;I<n.bonds.length;I++)U=Je,n.bondStyles&&n.bondStyles[I]&&((X=n.bondStyles[I]).singleBond&&(U=!0),X.radius&&X.radius!=xe&&(pi=!0)),(U||n.bondOrder[I]==1)&&Nr++;pi?Nr>0&&(Kr=!0):Nr==0&&(n.bonds.length>0||_.showNonBonded)&&(Kr=!0),Kr&&(De=xe,h.imposter?this.drawSphereImposter(h.sphereGeometry,n,De,_t):c.drawSphere(h,n,De,_t))}}}createMolObj(n,a){a=a||{};var h,f,z,_,V=new u.Object3D,B=[],I={},U={},X=this.drawAtomSphere,ie=null,J=null;a.supportsImposters?(X=this.drawAtomImposter,(ie=new u.Geometry(!0)).imposter=!0,(J=new u.Geometry(!0,!0)).imposter=!0,J.sphereGeometry=new u.Geometry(!0),J.sphereGeometry.imposter=!0,J.drawnCaps={}):a.supportsAIA?(X=this.drawAtomInstanced,(ie=new u.Geometry(!1,!0,!0)).instanced=!0,J=new u.Geometry(!0)):(ie=new u.Geometry(!0),J=new u.Geometry(!0));var Q,te={},ee=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(h=0,z=n.length;h<z;h++){var le=n[h];if(le&&le.style){for(f in(le.clickable||le.hoverable)&&le.intersectionShape===void 0&&(le.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),_={line:void 0,cross:void 0,stick:void 0,sphere:void 0})le.style[f]?le.style[f].opacity?_[f]=parseFloat(le.style[f].opacity):_[f]=1:_[f]=void 0,te[f]?_[f]!=null&&te[f]!=_[f]&&(console.log("Warning: "+f+" opacity is ambiguous"),te[f]=1):te[f]=_[f];X.call(this,le,ie),this.drawAtomClickSphere(le),this.drawAtomCross(le,U),this.drawBondLines(le,n,I),this.drawBondSticks(le,n,J),le.style.cartoon===void 0||le.style.cartoon.hidden||(le.style.cartoon.color!=="spectrum"||typeof le.resi!="number"||le.hetflag||(le.resi<ee[0]&&(ee[0]=le.resi),le.resi>ee[1]&&(ee[1]=le.resi)),B.push(le))}}if(B.length>0&&Te(V,B,ee,this.defaultCartoonQuality),ie&&ie.vertices>0){ie.initTypedArrays();var de=null,fe=null;ie.imposter?de=new u.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):ie.instanced?(fe=new u.Geometry(!0),c.drawSphere(fe,{x:0,y:0,z:0},1,new w.Color(.5,.5,.5)),fe.initTypedArrays(),de=new u.InstancedMaterial({sphereMaterial:new u.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:fe})):de=new u.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),te.sphere<1&&te.sphere>=0&&(de.transparent=!0,de.opacity=te.sphere),fe=new u.Mesh(ie,de),V.add(fe)}if(J.vertices>0){var Se=null,xe=null,Me=J.sphereGeometry;Me&&Me.vertices!==void 0&&Me.vertices!=0||(Me=null),J.initTypedArrays(),Me&&Me.initTypedArrays();var Be={ambient:0,vertexColors:!0,reflectivity:0};J.imposter?(Se=new u.StickImposterMaterial(Be),xe=new u.SphereImposterMaterial(Be)):(Se=new u.MeshLambertMaterial(Be),xe=new u.MeshLambertMaterial(Be),Se.wireframe&&(J.setUpWireframe(),Me&&Me.setUpWireframe())),te.stick<1&&te.stick>=0&&(Se.transparent=!0,Se.opacity=te.stick,xe.transparent=!0,xe.opacity=te.stick);var Ne=new u.Mesh(J,Se);if(V.add(Ne),Me){var je=new u.Mesh(Me,xe);V.add(je)}}for(h in I)if(I.hasOwnProperty(h)){Q=h;var De=new u.LineBasicMaterial({linewidth:Q,vertexColors:!0});te.line<1&&te.line>=0&&(De.transparent=!0,De.opacity=te.line),I[h].initTypedArrays();var Je=new u.Line(I[h],De,u.LineStyle.LinePieces);V.add(Je)}for(h in U)if(U.hasOwnProperty(h)){Q=h;var ct=new u.LineBasicMaterial({linewidth:Q,vertexColors:!0});te.cross<1&&te.cross>=0&&(ct.transparent=!0,ct.opacity=te.cross),U[h].initTypedArrays();var dt=new u.Line(U[h],ct,u.LineStyle.LinePieces);V.add(dt)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var lt,_t=new u.Object3D;for(lt=0;lt<this.modelData.symmetries.length;lt++){var Et=new u.Object3D;(Et=V.clone()).matrix.copy(this.modelData.symmetries[lt]),Et.matrixAutoUpdate=!1,_t.add(Et)}return _t}return V}getViewer(){return this.viewer}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(n){this.atoms=n.atoms,this.frames=n.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){const n=this.modelData.cryst;this.modelData.cryst.matrix=(0,d.conversionMatrix3)(n.a,n.b,n.c,n.alpha,n.beta,n.gamma)}return this.modelData.cryst}return null}setCrystData(n,a,h,f,z,_){n=n||1,a=a||1,h=h||1,f=f||90,z=z||90,_=_||90;const V=(0,d.conversionMatrix3)(n,a,h,f,z,_);this.modelData.cryst={a:n,b:a,c:h,alpha:f,beta:z,gamma:_,matrix:V}}setCrystMatrix(n){n=n||new d.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:n}}getSymmetries(){return this.modelData.symmetries===void 0&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(n){n===void 0?this.modelData.symmetries=[this.idMatrix]:(this.modelData.symmetries=n,this.molObj=null)}getID(){return this.id}getNumFrames(){return this.frames.numFrames!=null?this.frames.numFrames:this.frames.length}adjustCoord(n,a,h,f){var z=a-n;return z<-h?a+f:z>h?a-f:a}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var n=this.box[0],a=this.box[1],h=this.box[2],f=.9*n,z=.9*a,_=.9*h,V=0;V<this.atomdfs.length;V++)for(var B=this.atomdfs[V],I=1;I<B.length;I++){var U=this.atoms[B[I][0]],X=this.atoms[B[I][1]];U.x=this.adjustCoord(X.x,U.x,f,n),U.y=this.adjustCoord(X.y,U.y,z,a),U.z=this.adjustCoord(X.z,U.z,_,h)}}setFrame(n){var a=this.getNumFrames();let h=this,f=this.viewer;return new Promise(function(z,_){if(a==0&&z(),(n<0||n>=a)&&(n=a-1),h.frames.url!=null){var V=h.frames.url;(0,v.getbin)(V+"/traj/frame/"+n+"/"+h.frames.path,void 0,"POST",void 0).then(function(B){for(var I=new Float32Array(B,44),U=0,X=0;X<h.atoms.length;X++)h.atoms[X].x=I[U++],h.atoms[X].y=I[U++],h.atoms[X].z=I[U++];h.box&&h.atomdfs&&h.adjustCoordinatesToBox(),z()}).catch(_)}else h.atoms=h.frames[n],z();h.molObj=null,h.modelDatas&&n<h.modelDatas.length&&(h.modelData=h.modelDatas[n],h.unitCellObjects&&f&&(f.removeUnitCell(h),f.addUnitCell(h)))})}addFrame(n){this.frames.push(n)}vibrate(n=10,a=1,h=!1,f){var z=0,_=n;let V=this.viewer;h&&(z=-n,_=n),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),z<_&&(this.frames=[]),h&&(this.frames.origIndex=n);for(var B=z;B<_;B++){var I=[],U=this.frames.length;if(B!=0||f){for(var X=0;X<this.atoms.length;X++){var ie=(0,v.getAtomProperty)(this.atoms[X],"dx"),J=(0,v.getAtomProperty)(this.atoms[X],"dy"),Q=(0,v.getAtomProperty)(this.atoms[X],"dz"),te=new d.Vector3(ie,J,Q),ee=new d.Vector3(this.atoms[X].x,this.atoms[X].y,this.atoms[X].z),le=B*a/n;te.multiplyScalar(le),ee.add(te);var de={};for(var fe in this.atoms[X])de[fe]=this.atoms[X][fe];if(de.x=ee.x,de.y=ee.y,de.z=ee.z,I.push(de),V&&f){var Se=(0,v.extend)({},f),xe=new d.Vector3(ie,J,Q);if(xe.multiplyScalar(a),xe.add(ee),Se.start=ee,Se.end=xe,Se.frame=U,!Se.color){var Me=de.style.sphere;Me||(Me=de.style.stick),Me||(Me=de.style.line),Se.color=(0,v.getColorFromStyle)(de,Me)}V.addArrow(Se)}}this.frames.push(I)}else this.frames.push(this.atoms)}}setAtomDefaults(n){for(let a=0;a<n.length;a++){let h=n[a];h&&(h.style=h.style||(0,v.deepCopy)(_r.defaultAtomStyle),h.color=h.color||this.ElementColors[h.elem]||this.defaultColor,h.model=this.id,(h.clickable||h.hoverable)&&(h.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(n,a,h={}){var f=_r.parseMolData(n,a,h);this.dontDuplicateAtoms=!h.duplicateAssemblyAtoms;var z=f.modelData;if(z&&(Array.isArray(z)?(this.modelData=z[0],h.frames&&(this.modelDatas=z)):this.modelData=z),f.box?this.box=f.box:this.box=null,this.frames.length==0){for(let V=0;V<f.length;V++)f[V].length!=0&&this.frames.push(f[V]);this.frames[0]&&(this.atoms=this.frames[0])}else if(h.frames)for(let V=0;V<f.length;V++)this.frames.push(f[V]);else for(var _=0;_<f.length;_++)this.addAtoms(f[_]);for(let V=0;V<this.frames.length;V++)this.setAtomDefaults(this.frames[V]);h.vibrate&&h.vibrate.frames&&h.vibrate.amplitude&&this.vibrate(h.vibrate.frames,h.vibrate.amplitude),h.style&&this.setStyle({},h.style)}setDontDuplicateAtoms(n){this.dontDuplicateAtoms=n}setModelData(n){this.modelData=n}propertyMatches(n,a){if(n==a)return!0;if(typeof a=="string"&&typeof n=="number"){var h=a.match(/(-?\d+)\s*-\s*(-?\d+)/);if(h){var f=parseInt(h[1]),z=parseInt(h[2]);if(h&&n>=f&&n<=z)return!0}}return!1}static deepCopyAndCache(n,a){if(typeof n!="object"||n==null||n instanceof _r||n.__cache_created)return n;const h={};for(const f in n){const z=n[f];if(Array.isArray(z)){h[f]=[];for(let _=0;_<z.length;_++)h[f].push(_r.deepCopyAndCache(z[_],a))}else h[f]=typeof z=="object"&&f!="properties"&&f!="model"?_r.deepCopyAndCache(z,a):z;if(f=="and"||f=="or"){const _=[];for(const V of h[f]){const B=new Set;for(const I of a.selectedAtoms(V))B.add(I.index);_.push(B)}if(f=="and"){const V=function(I,U){const X=new Set;for(const ie of U)I.has(ie)&&X.add(ie);return X};let B=new Set(_[0]);for(const I of _.splice(1))B=V(B,I);h[f].__cached_results=B}else if(f=="or"){const V=new Set;for(const B of _)for(const I of B)V.add(I);h[f].__cached_results=V}}}return h.__cache_created=!0,h}atomIsSelected(n,a){if(a===void 0)return!0;var h=!!a.invert,f=!0;for(var z in a)if(z=="and"||z=="or"||z=="not"){if(z=="not"){if(this.atomIsSelected(n,a[z])){f=!1;break}}else if(a[z].__cached_results===void 0&&(a=_r.deepCopyAndCache(a,this)),!(f=a[z].__cached_results.has(n.index)))break}else if(z==="predicate"){if(!a.predicate(n)){f=!1;break}}else if(z=="properties"&&n[z]){for(var _ in a.properties)if(!_.startsWith("__cache")){if(n.properties[_]===void 0){f=!1;break}if(n.properties[_]!=a.properties[_]){f=!1;break}}}else if(z=="model"){let I=a.model;if(typeof I=="number"&&I<0&&(I=this.viewer.getNextModelId()+I),Array.isArray(I)){let U=!1;for(let X=0;X<I.length;X++)if(I[X]==this||I[X]==this.id){U=!0;break}if(!U){f=!1;break}}else if(I!=this&&I!=this.id){f=!1;break}}else if(a.hasOwnProperty(z)&&!_r.ignoredKeys.has(z)&&!z.startsWith("__cache")){if(n[z]===void 0){f=!1;break}let I=!1;if(z==="bonds"){if(a[z]!=n.bonds.length){f=!1;break}}else if(Array.isArray(a[z])){var V=a[z],B=n[z];for(let U=0;U<V.length;U++)if(this.propertyMatches(B,V[U])){I=!0;break}if(!I){f=!1;break}}else{let U=a[z];if(!this.propertyMatches(n[z],U)){f=!1;break}}}return h?!f:f}static squaredDistance(n,a){var h=a.x-n.x,f=a.y-n.y,z=a.z-n.z;return h*h+f*f+z*z}expandAtomList(n,a){if(a<=0)return n;for(var h=(0,v.getExtent)(n,void 0),f=[[],[],[]],z=0;z<3;z++)f[0][z]=h[0][z]-a,f[1][z]=h[1][z]+a,f[2][z]=h[2][z];var _=[];for(let U=0;U<this.atoms.length;U++){var V=this.atoms[U].x,B=this.atoms[U].y,I=this.atoms[U].z;V>=f[0][0]&&V<=f[1][0]&&B>=f[0][1]&&B<=f[1][1]&&I>=f[0][2]&&I<=f[1][2]&&(V>=h[0][0]&&V<=h[1][0]&&B>=h[0][1]&&B<=h[1][1]&&I>=h[0][2]&&I<=h[1][2]||_.push(this.atoms[U]))}return _}static getFloat(n){return typeof n=="number"?n:parseFloat(n)}selectedAtoms(n,a){var h=[];n=_r.deepCopyAndCache(n||{},this),a||(a=this.atoms);for(var f=a.length,z=0;z<f;z++){var _=a[z];_&&this.atomIsSelected(_,n)&&h.push(_)}if(n.hasOwnProperty("expand")){const de=_r.getFloat(n.expand);let fe=this.expandAtomList(h,de),Se=h.length;const xe=de*de;for(let Me=0;Me<fe.length;Me++)for(let Be=0;Be<Se;Be++){var V=_r.squaredDistance(fe[Me],h[Be]);V<xe&&V>0&&h.push(fe[Me])}}if(n.hasOwnProperty("within")&&n.within.hasOwnProperty("sel")&&n.within.hasOwnProperty("distance")){var B=this.selectedAtoms(n.within.sel,this.atoms),I={};const de=_r.getFloat(n.within.distance),fe=de*de;for(let Se=0;Se<B.length;Se++)for(let xe=0;xe<h.length;xe++){let Me=_r.squaredDistance(B[Se],h[xe]);Me<fe&&Me>0&&(I[xe]=1)}var U=[];if(n.within.invert)for(let Se=0;Se<h.length;Se++)I[Se]||U.push(h[Se]);else for(let Se in I)U.push(h[Se]);h=U}if(n.hasOwnProperty("byres")){var X={},ie=[],J=[];for(let de=0;de<h.length;de++){let fe=h[de];var Q=fe.chain,te=fe.resi;if(X[Q]===void 0&&(X[Q]={}),fe.hasOwnProperty("resi")&&X[Q][te]===void 0){for(X[Q][te]=!0,J.push(fe);J.length>0;)if(fe=J.pop(),Q=fe.chain,te=fe.resi,ie[fe.index]===void 0){ie[fe.index]=!0;for(var ee=0;ee<fe.bonds.length;ee++){var le=this.atoms[fe.bonds[ee]];ie[le.index]===void 0&&le.hasOwnProperty("resi")&&le.chain==Q&&le.resi==te&&(J.push(le),h.push(le))}}}}}return h}addAtoms(n){this.molObj=null;var a,h=this.atoms.length,f=[];for(a=0;a<n.length;a++)n[a].index===void 0&&(n[a].index=a),n[a].serial===void 0&&(n[a].serial=a),f[n[a].index]=h+a;for(a=0;a<n.length;a++){var z=n[a],_=f[z.index],V=(0,v.extend)({},z);V.index=_,V.bonds=[],V.bondOrder=[],V.model=this.id,V.style=V.style||(0,v.deepCopy)(_r.defaultAtomStyle),V.color===void 0&&(V.color=this.ElementColors[V.elem]||this.defaultColor);for(var B=z.bonds?z.bonds.length:0,I=0;I<B;I++){var U=f[z.bonds[I]];U!==void 0&&(V.bonds.push(U),V.bondOrder.push(z.bondOrder?z.bondOrder[I]:1))}this.atoms.push(V)}}assignBonds(){(0,_e.assignBonds)(this.atoms,{assignBonds:!0})}removeAtoms(n){this.molObj=null;var a,h=[];for(a=0;a<n.length;a++)h[n[a].index]=!0;var f=[];for(a=0;a<this.atoms.length;a++){var z=this.atoms[a];h[z.index]||f.push(z)}this.atoms=[],this.addAtoms(f)}setStyle(n,a,h){a===void 0&&h===void 0&&(a=n,n={}),typeof a=="string"&&(a=(0,v.specStringToObject)(a));var f=!1,z=this,_=function(B){var I=z.selectedAtoms(n,B);for(let U=0;U<B.length;U++)B[U]&&(B[U].capDrawn=!1);for(let U=0;U<I.length;U++){f=!0,(I[U].clickable||I[U].hoverable)&&(I[U].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),h||(I[U].style={});for(let X in a)a.hasOwnProperty(X)&&(I[U].style[X]=I[U].style[X]||{},Object.assign(I[U].style[X],a[X]))}};if(n.frame!==void 0&&n.frame<this.frames.length){let B=n.frame;B<0&&(B=this.frames.length+B),_(this.frames[B])}else{_(this.atoms);for(var V=0;V<this.frames.length;V++)this.frames[V]!==this.atoms&&_(this.frames[V])}f&&(this.molObj=null)}setClickable(n,a,h){if(a=!!a,(h=(0,v.makeFunction)(h))!==null){var f=this.selectedAtoms(n,this.atoms),z=f.length;for(let _=0;_<z;_++)f[_].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},f[_].clickable=a,h&&(f[_].callback=h);z>0&&(this.molObj=null)}else console.log("Callback is not a function")}setHoverable(n,a,h,f){if(a=!!a,h=(0,v.makeFunction)(h),f=(0,v.makeFunction)(f),h!==null)if(f!==null){var z=this.selectedAtoms(n,this.atoms),_=z.length;for(let V=0;V<_;V++)z[V].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},z[V].hoverable=a,h&&(z[V].hover_callback=h),f&&(z[V].unhover_callback=f);_>0&&(this.molObj=null)}else console.log("Unhover_callback is not a function");else console.log("Hover_callback is not a function")}enableContextMenu(n,a){var h;a=!!a;var f=this.selectedAtoms(n,this.atoms),z=f.length;for(h=0;h<z;h++)f[h].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},f[h].contextMenuEnabled=a;z>0&&(this.molObj=null)}setColorByElement(n,a){if(this.molObj===null||!_r.sameObj(a,this.lastColors)){this.lastColors=a;var h=this.selectedAtoms(n,h);h.length>0&&(this.molObj=null);for(var f=0;f<h.length;f++){var z=h[f];a[z.elem]!==void 0&&(z.color=a[z.elem])}}}setColorByProperty(n,a,h,f){var z,_,V=this.selectedAtoms(n,V);for(this.lastColors=null,V.length>0&&(this.molObj=null),typeof h=="string"&&C.Gradient.builtinGradients[h]!==void 0&&(h=new C.Gradient.builtinGradients[h]),f||(f=h.range()),f||(f=(0,v.getPropertyRange)(V,a)),z=0;z<V.length;z++)_=V[z],(0,v.getAtomProperty)(_,a)!=null&&(_.color=h.valueToHex(parseFloat(_.properties[a]),f))}setColorByFunction(n,a){var h=this.selectedAtoms(n,h);if(typeof a=="function"){this.lastColors=null,h.length>0&&(this.molObj=null);for(let f=0;f<h.length;f++){let z=h[f];z.color=a(z)}}}toCDObject(n=!1){var a={a:[],b:[]};n&&(a.s=[]);for(let f=0;f<this.atoms.length;f++){let z={},_=this.atoms[f];if(z.x=_.x,z.y=_.y,z.z=_.z,_.elem!="C"&&(z.l=_.elem),n){for(var h=0;h<a.s.length&&JSON.stringify(_.style)!==JSON.stringify(a.s[h]);)h++;h===a.s.length&&a.s.push(_.style),h!==0&&(z.s=h)}a.a.push(z);for(let V=0;V<_.bonds.length;V++){let B=f,I=_.bonds[V];if(B>=I)continue;let U={b:B,e:I},X=_.bondOrder[V];X!=1&&(U.o=X),a.b.push(U)}}return a}globj(n,a){(this.molObj===null||a.regen)&&(this.molObj=this.createMolObj(this.atoms,a),this.renderedMolObj&&(n.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),n.add(this.renderedMolObj))}exportVRML(){return this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1}).vrml()}removegl(n){this.renderedMolObj&&(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),n.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(n,a,h){let f=this.selectedAtoms(a),z=this.viewer,_=(0,v.deepCopy)(h);for(let B=0;B<f.length;B++){let I=f[B];var V=null;I[n]!==void 0?V=String(I[n]):I.properties[n]!==void 0&&(V=String(I.properties[n])),V!=null&&(_.position=I,z.addLabel(V,_))}}addResLabels(n,a,h=!1){let f=this.viewer;var z=[],_=function(B,I){for(var U=B.selectedAtoms(n,U),X={},ie=0;ie<U.length;ie++){var J=U[ie],Q=J.chain,te=J.resn+""+J.resi;X[Q]||(X[Q]={}),X[Q][te]||(X[Q][te]=[]),X[Q][te].push(J)}var ee=(0,v.deepCopy)(a);for(let de in X)if(X.hasOwnProperty(de)){var le=X[de];for(let fe in le)if(le.hasOwnProperty(fe)){let Se=le[fe],xe=new d.Vector3(0,0,0);for(let Be=0;Be<Se.length;Be++){let Ne=Se[Be];xe.x+=Ne.x,xe.y+=Ne.y,xe.z+=Ne.z}xe.divideScalar(Se.length),ee.position=xe,ee.frame=I;let Me=f.addLabel(fe,ee,void 0,!0);z.push(Me)}}};if(h){var V=this.getNumFrames();let B=this.atoms;for(let I=0;I<V;I++)this.frames[I]&&(this.atoms=this.frames[I],_(this,I));this.atoms=B}else _(this);return z}setupDFS(){this.atomdfs=[];var n=this,a=new Int8Array(this.atoms.length);a.fill(0);for(var h=function(_,V,B){B.push([_,V]);var I=n.atoms[_];a[_]=1;for(var U=0;U<I.bonds.length;U++){var X=I.bonds[U];n.atoms[X]&&!a[X]&&h(X,_,B)}},f=0;f<this.atoms.length;f++)if(this.atoms[f]&&!a[f]){var z=[];h(f,-1,z),this.atomdfs.push(z)}}setCoordinatesFromURL(n,a){this.frames=[];var h=this;return this.box&&this.setupDFS(),n.startsWith("http")||(n="http://"+n),(0,v.get)(n+"/traj/numframes/"+a,function(f){if(!isNaN(parseInt(f)))return h.frames.push(h.atoms),h.frames.numFrames=f,h.frames.url=n,h.frames.path=a,h.setFrame(0)})}setCoordinates(n,a){if(!n)return[];if(/\.gz$/.test(a=a||"")){a=a.replace(/\.gz$/,"");try{n=(0,v.inflateString)(n)}catch(U){console.log(U)}}if({mdcrd:"",inpcrd:"",pdb:"",netcdf:"",array:""}.hasOwnProperty(a)){this.frames=[];for(var h=this.atoms.length,f=_r.parseCrd(n,a),z=0;z<f.length;){for(var _=[],V=0;V<h;V++){var B={};for(var I in this.atoms[V])B[I]=this.atoms[V][I];_[V]=B,_[V].x=f[z++],_[V].y=f[z++],_[V].z=f[z++]}this.frames.push(_)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(n){}static parseCrd(n,a){var h=[],f=0;if(a=="pdb")for(var z=n.indexOf(`
ATOM`);z!=-1;){for(;n.slice(z,z+5)==`
ATOM`||n.slice(z,z+7)==`
HETATM`;)h[f++]=parseFloat(n.slice(z+31,z+39)),h[f++]=parseFloat(n.slice(z+39,z+47)),h[f++]=parseFloat(n.slice(z+47,z+55)),z=n.indexOf(`
`,z+54),n.slice(z,z+4)==`
TER`&&(z=n.indexOf(`
`,z+5));z=n.indexOf(`
ATOM`,z)}else if(a=="netcdf"){var _=new vn(n);h=[].concat.apply([],_.getDataVariable("coordinates"))}else{if(a=="array"||Array.isArray(n))return n.flat(2);{let V=n.indexOf(`
`);a=="inpcrd"&&(V=n.indexOf(`
`,V+1)),h=(n=n.slice(V+1)).match(/\S+/g).map(parseFloat)}}return h}static parseMolData(n,a="",h){if(!n)return[];if(/\.gz$/.test(a)){a=a.replace(/\.gz$/,"");try{n=a.match(/bcif/i)?(0,v.inflateString)(n,!1):(0,v.inflateString)(n)}catch(f){console.log(f)}}return Wt[a]===void 0&&(a=a.split(".").pop(),Wt[a]===void 0&&(console.log("Unknown format: "+a),a=n instanceof Uint8Array?"bcif":n.match(/^@<TRIPOS>MOLECULE/gm)?"mol2":n.match(/^data_/gm)&&n.match(/^loop_/gm)?"cif":n.match(/^HETATM/gm)||n.match(/^ATOM/gm)?"pdb":n.match(/ITEM: TIMESTEP/gm)?"lammpstrj":n.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?"sdf":n.match(/^%VERSION\s+VERSION_STAMP/gm)?"prmtop":"xyz",console.log("Best guess: "+a))),(0,Wt[a])(n,h)}}var ei;_r.defaultAtomStyle={line:{}},_r.defaultlineWidth=1,_r.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86},_r.ignoredKeys=new Set(["props","invert","model","frame","byres","expand","within","and","or","not"]),(function(ye){ye[ye.VDW=1]="VDW",ye[ye.MS=2]="MS",ye[ye.SAS=3]="SAS",ye[ye.SES=4]="SES"})(ei||(ei={}));var si=!1;function on(ye){si=ye}(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(si=!0);class Yt{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(n,a,h,f){let z=!!f.fulltable,_=f.hasOwnProperty("origin")&&f.origin.hasOwnProperty("x")?f.origin:{x:0,y:0,z:0},V=!!f.voxel,B=f.matrix,I=f.nX||0,U=f.nY||0,X=f.nZ||0,ie=f.scale||1,J=null;J=f.unitCube?f.unitCube:{x:ie,y:ie,z:ie};let Q,te,ee=new Int32Array(I*U*X);for(Q=0,te=ee.length;Q<te;++Q)ee[Q]=-1;let le=function(xe,Me,Be,Ne,je,De){let Je={x:0,y:0,z:0},ct=je;if(!(Ne&1<<je)&&Ne&1<<De&&(ct=De),1&ct&&Be++,2&ct&&Me++,4&ct&&xe++,B){let lt=new d.Vector3(xe,Me,Be);lt=lt.applyMatrix4(B),Je={x:lt.x,y:lt.y,z:lt.z}}else Je.x=_.x+J.x*xe,Je.y=_.y+J.y*Me,Je.z=_.z+J.z*Be;let dt=(U*xe+Me)*X+Be;return V?(a.push(Je),a.length-1):(ee[dt]<0&&(ee[dt]=a.length,a.push(Je)),ee[dt])},de=new Int32Array(12),fe=z?this.edgeTable2:this.edgeTable,Se=z?this.triTable2:this.triTable;for(Q=0;Q<I-1;++Q)for(let xe=0;xe<U-1;++xe)for(let Me=0;Me<X-1;++Me){let Be=0;for(let De=0;De<8;++De)Be|=!!(n[(U*(Q+((4&De)>>2))+xe+((2&De)>>1))*X+Me+(1&De)]&this.ISDONE)<<De;if(Be===0||Be===255)continue;let Ne=fe[Be];if(Ne===0)continue;let je=Se[Be];1&Ne&&(de[0]=le(Q,xe,Me,Be,0,1)),2&Ne&&(de[1]=le(Q,xe,Me,Be,1,3)),4&Ne&&(de[2]=le(Q,xe,Me,Be,3,2)),8&Ne&&(de[3]=le(Q,xe,Me,Be,2,0)),16&Ne&&(de[4]=le(Q,xe,Me,Be,4,5)),32&Ne&&(de[5]=le(Q,xe,Me,Be,5,7)),64&Ne&&(de[6]=le(Q,xe,Me,Be,7,6)),128&Ne&&(de[7]=le(Q,xe,Me,Be,6,4)),256&Ne&&(de[8]=le(Q,xe,Me,Be,0,4)),512&Ne&&(de[9]=le(Q,xe,Me,Be,1,5)),1024&Ne&&(de[10]=le(Q,xe,Me,Be,3,7)),2048&Ne&&(de[11]=le(Q,xe,Me,Be,2,6));for(let De=0;De<je.length;De+=3){let Je=de[je[De]],ct=de[je[De+1]],dt=de[je[De+2]];V&&De>=3&&(a.push(a[Je]),Je=a.length-1,a.push(a[ct]),ct=a.length-1,a.push(a[dt]),dt=a.length-1),h.push(Je),h.push(ct),h.push(dt)}}}laplacianSmooth(n,a,h){let f,z,_,V,B,I=new Array(a.length);for(f=0,z=a.length;f<z;f++)I[f]={x:0,y:0,z:0};let U,X=new Array(20);for(f=0;f<20;f++)X[f]=new Array(a.length);for(f=0,z=a.length;f<z;f++)X[0][f]=0;for(f=0,z=h.length/3;f<z;f++){let J=3*f,Q=3*f+1,te=3*f+2;for(U=!0,_=0,V=X[0][h[J]];_<V;_++)if(h[Q]==X[_+1][h[J]]){U=!1;break}for(U&&(X[0][h[J]]++,X[X[0][h[J]]][h[J]]=h[Q]),U=!0,_=0,V=X[0][h[J]];_<V;_++)if(h[te]==X[_+1][h[J]]){U=!1;break}for(U&&(X[0][h[J]]++,X[X[0][h[J]]][h[J]]=h[te]),U=!0,_=0,V=X[0][h[Q]];_<V;_++)if(h[J]==X[_+1][h[Q]]){U=!1;break}for(U&&(X[0][h[Q]]++,X[X[0][h[Q]]][h[Q]]=h[J]),U=!0,_=0,V=X[0][h[Q]];_<V;_++)if(h[te]==X[_+1][h[Q]]){U=!1;break}for(U&&(X[0][h[Q]]++,X[X[0][h[Q]]][h[Q]]=h[te]),U=!0,_=0;_<X[0][h[te]];_++)if(h[J]==X[_+1][h[te]]){U=!1;break}for(U&&(X[0][h[te]]++,X[X[0][h[te]]][h[te]]=h[J]),U=!0,_=0,V=X[0][h[te]];_<V;_++)if(h[Q]==X[_+1][h[te]]){U=!1;break}U&&(X[0][h[te]]++,X[X[0][h[te]]][h[te]]=h[Q])}let ie=.5;for(B=0;B<n;B++){for(f=0,z=a.length;f<z;f++)if(X[0][f]<3)I[f].x=a[f].x,I[f].y=a[f].y,I[f].z=a[f].z;else if(X[0][f]==3||X[0][f]==4){for(I[f].x=0,I[f].y=0,I[f].z=0,_=0,V=X[0][f];_<V;_++)I[f].x+=a[X[_+1][f]].x,I[f].y+=a[X[_+1][f]].y,I[f].z+=a[X[_+1][f]].z;I[f].x+=ie*a[f].x,I[f].y+=ie*a[f].y,I[f].z+=ie*a[f].z,I[f].x/=ie+X[0][f],I[f].y/=ie+X[0][f],I[f].z/=ie+X[0][f]}else{for(I[f].x=0,I[f].y=0,I[f].z=0,_=0,V=X[0][f];_<V;_++)I[f].x+=a[X[_+1][f]].x,I[f].y+=a[X[_+1][f]].y,I[f].z+=a[X[_+1][f]].z;I[f].x+=1*a[f].x,I[f].y+=1*a[f].y,I[f].z+=1*a[f].z,I[f].x/=1+X[0][f],I[f].y/=1+X[0][f],I[f].z/=1+X[0][f]}for(f=0,z=a.length;f<z;f++)a[f].x=I[f].x,a[f].y=I[f].y,a[f].z=I[f].z}}}let T=new Yt;class me{constructor(n,a,h){this.data=new Int32Array(n*a*h*3),this.width=a,this.height=h}set(n,a,h,f){let z=3*((n*this.width+a)*this.height+h);this.data[z]=f.ix,this.data[z+1]=f.iy,this.data[z+2]=f.iz}get(n,a,h){let f=3*((n*this.width+a)*this.height+h);return{ix:this.data[f],iy:this.data[f+1],iz:this.data[f+2]}}}class Pe{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])],Pe.MarchingCube||(Pe.MarchingCube=new Yt)}getVDWIndex(n){return n.elem&&this.vdwRadii[n.elem]!==void 0?n.elem:"X"}getFacesAndVertices(n){let a={};for(let z=0,_=n.length;z<_;z++)a[n[z]]=!0;let h=this.verts;for(let z=0,_=h.length;z<_;z++)h[z].x=h[z].x/this.scaleFactor-this.ptranx,h[z].y=h[z].y/this.scaleFactor-this.ptrany,h[z].z=h[z].z/this.scaleFactor-this.ptranz;let f=[];for(let z=0,_=this.faces.length;z<_;z+=3){let V=this.faces[z],B=this.faces[z+1],I=this.faces[z+2],U=h[V].atomid,X=h[B].atomid,ie=h[I].atomid,J=U;X<J&&(J=X),ie<J&&(J=ie),a[J]&&V!==B&&B!==I&&V!==I&&(f.push(V),f.push(B),f.push(I))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:h,faces:f}}initparm(n,a,h){h>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let f=1/this.scaleFactor*5.5;this.pminx=n[0][0],this.pmaxx=n[1][0],this.pminy=n[0][1],this.pmaxy=n[1][1],this.pminz=n[0][2],this.pmaxz=n[1][2],a?(this.pminx-=this.probeRadius+f,this.pminy-=this.probeRadius+f,this.pminz-=this.probeRadius+f,this.pmaxx+=this.probeRadius+f,this.pmaxy+=this.probeRadius+f,this.pmaxz+=this.probeRadius+f):(this.pminx-=f,this.pminy-=f,this.pminz-=f,this.pmaxx+=f,this.pmaxy+=f,this.pmaxz+=f),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(a),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(n){let a={};for(const h in this.vdwRadii){let f=this.vdwRadii[h];a[h]=n?(f+this.probeRadius)*this.scaleFactor+.5:f*this.scaleFactor+.5;let z=a[h]*a[h];this.widxz[h]=Math.floor(a[h])+1,this.depty[h]=new Int32Array(this.widxz[h]*this.widxz[h]);let _=0;for(let V=0;V<this.widxz[h];V++)for(let B=0;B<this.widxz[h];B++){let I=V*V+B*B;if(I>z)this.depty[h][_]=-1;else{let U=Math.sqrt(z-I);this.depty[h][_]=Math.floor(U)}_++}}}fillvoxels(n,a){for(let h=0,f=this.vpBits.length;h<f;h++)this.vpBits[h]=0,this.vpDistance[h]=-1,this.vpAtomID[h]=-1;for(let h in a){let f=n[a[h]];f!==void 0&&this.fillAtom(f,n)}for(let h=0,f=this.vpBits.length;h<f;h++)this.vpBits[h]&this.INOUT&&(this.vpBits[h]|=this.ISDONE)}fillAtom(n,a){let h=Math.floor(.5+this.scaleFactor*(n.x+this.ptranx)),f=Math.floor(.5+this.scaleFactor*(n.y+this.ptrany)),z=Math.floor(.5+this.scaleFactor*(n.z+this.ptranz)),_=this.getVDWIndex(n),V=0,B=this.pWidth*this.pHeight;for(let I=0,U=this.widxz[_];I<U;I++)for(let X=0;X<U;X++){if(this.depty[_][V]!=-1){for(let ie=-1;ie<2;ie++)for(let J=-1;J<2;J++)for(let Q=-1;Q<2;Q++)if(ie!==0&&J!==0&&Q!==0){let te=ie*I,ee=Q*X;for(let le=0;le<=this.depty[_][V];le++){let de=le*J,fe=h+te,Se=f+de,xe=z+ee;if(fe<0||Se<0||xe<0||fe>=this.pLength||Se>=this.pWidth||xe>=this.pHeight)continue;let Me=fe*B+Se*this.pHeight+xe;if(this.vpBits[Me]&this.INOUT){let Be=a[this.vpAtomID[Me]];if(Be.serial!=n.serial){let Ne=h+te-Math.floor(.5+this.scaleFactor*(Be.x+this.ptranx)),je=f+de-Math.floor(.5+this.scaleFactor*(Be.y+this.ptrany)),De=z+ee-Math.floor(.5+this.scaleFactor*(Be.z+this.ptranz));te*te+de*de+ee*ee<Ne*Ne+je*je+De*De&&(this.vpAtomID[Me]=n.serial)}}else this.vpBits[Me]|=this.INOUT,this.vpAtomID[Me]=n.serial}}}V++}}fillvoxelswaals(n,a){for(let h=0,f=this.vpBits.length;h<f;h++)this.vpBits[h]&=~this.ISDONE;for(let h in a){let f=n[a[h]];f!==void 0&&this.fillAtomWaals(f,n)}}fillAtomWaals(n,a){let h=0,f=Math.floor(.5+this.scaleFactor*(n.x+this.ptranx)),z=Math.floor(.5+this.scaleFactor*(n.y+this.ptrany)),_=Math.floor(.5+this.scaleFactor*(n.z+this.ptranz)),V=this.getVDWIndex(n),B=this.pWidth*this.pHeight;for(let I=0,U=this.widxz[V];I<U;I++)for(let X=0;X<U;X++){if(this.depty[V][h]!=-1){for(let ie=-1;ie<2;ie++)for(let J=-1;J<2;J++)for(let Q=-1;Q<2;Q++)if(ie!==0&&J!==0&&Q!==0){let te=ie*I,ee=Q*X;for(let le=0;le<=this.depty[V][h];le++){let de=le*J,fe=f+te,Se=z+de,xe=_+ee;if(fe<0||Se<0||xe<0||fe>=this.pLength||Se>=this.pWidth||xe>=this.pHeight)continue;let Me=fe*B+Se*this.pHeight+xe;if(this.vpBits[Me]&this.ISDONE){let Be=a[this.vpAtomID[Me]];if(Be.serial!=n.serial){let Ne=f+te-Math.floor(.5+this.scaleFactor*(Be.x+this.ptranx)),je=z+de-Math.floor(.5+this.scaleFactor*(Be.y+this.ptrany)),De=_+ee-Math.floor(.5+this.scaleFactor*(Be.z+this.ptranz));te*te+de*de+ee*ee<Ne*Ne+je*je+De*De&&(this.vpAtomID[Me]=n.serial)}}else this.vpBits[Me]|=this.ISDONE,this.vpAtomID[Me]=n.serial}}}h++}}buildboundary(){let n=this.pWidth*this.pHeight;for(let a=0;a<this.pLength;a++)for(let h=0;h<this.pHeight;h++)for(let f=0;f<this.pWidth;f++){let z=a*n+f*this.pHeight+h;if(this.vpBits[z]&this.INOUT){let _=0;for(;_<26;){let V=a+this.nb[_][0],B=h+this.nb[_][2],I=f+this.nb[_][1];if(V>-1&&V<this.pLength&&I>-1&&I<this.pWidth&&B>-1&&B<this.pHeight&&!(this.vpBits[V*n+I*this.pHeight+B]&this.INOUT)){this.vpBits[z]|=this.ISBOUND;break}_++}}}}fastdistancemap(){let n,a=new me(this.pLength,this.pWidth,this.pHeight),h=this.pWidth*this.pHeight,f=this.cutRadius*this.cutRadius,z=[],_=[];for(let I=0;I<this.pLength;I++)for(let U=0;U<this.pWidth;U++)for(let X=0;X<this.pHeight;X++)if(n=I*h+U*this.pHeight+X,this.vpBits[n]&=~this.ISDONE,this.vpBits[n]&this.INOUT&&this.vpBits[n]&this.ISBOUND){let ie={ix:I,iy:U,iz:X};a.set(I,U,X,ie),z.push(ie),this.vpDistance[n]=0,this.vpBits[n]|=this.ISDONE,this.vpBits[n]&=~this.ISBOUND}do{_=this.fastoneshell(z,a),z=[];for(let I=0,U=_.length;I<U;I++)n=h*_[I].ix+this.pHeight*_[I].iy+_[I].iz,this.vpBits[n]&=~this.ISBOUND,this.vpDistance[n]<=1.0404*f&&z.push({ix:_[I].ix,iy:_[I].iy,iz:_[I].iz})}while(z.length!==0);z=[],_=[],a=null;let V=this.scaleFactor-.5;V<0&&(V=0);let B=f-.5/(.1+V);for(let I=0;I<this.pLength;I++)for(let U=0;U<this.pWidth;U++)for(let X=0;X<this.pHeight;X++)n=I*h+U*this.pHeight+X,this.vpBits[n]&=~this.ISBOUND,this.vpBits[n]&this.INOUT&&(this.vpBits[n]&this.ISDONE&&!(this.vpBits[n]&this.ISDONE&&this.vpDistance[n]>=B)||(this.vpBits[n]|=this.ISBOUND))}fastoneshell(n,a){let h,f,z,_,V,B,I,U,X,ie=[];if(n.length===0)return ie;let J={ix:-1,iy:-1,iz:-1},Q=this.pWidth*this.pHeight;for(let te=0,ee=n.length;te<ee;te++){h=n[te].ix,f=n[te].iy,z=n[te].iz,U=a.get(h,f,z);for(let le=0;le<6;le++)J.ix=h+this.nb[le][0],J.iy=f+this.nb[le][1],J.iz=z+this.nb[le][2],J.ix<this.pLength&&J.ix>-1&&J.iy<this.pWidth&&J.iy>-1&&J.iz<this.pHeight&&J.iz>-1&&(X=J.ix*Q+this.pHeight*J.iy+J.iz,this.vpBits[X]&this.INOUT&&!(this.vpBits[X]&this.ISDONE)?(a.set(J.ix,J.iy,z+this.nb[le][2],U),_=J.ix-U.ix,V=J.iy-U.iy,B=J.iz-U.iz,I=_*_+V*V+B*B,this.vpDistance[X]=I,this.vpBits[X]|=this.ISDONE,this.vpBits[X]|=this.ISBOUND,ie.push({ix:J.ix,iy:J.iy,iz:J.iz})):this.vpBits[X]&this.INOUT&&this.vpBits[X]&this.ISDONE&&(_=J.ix-U.ix,V=J.iy-U.iy,B=J.iz-U.iz,I=_*_+V*V+B*B,I<this.vpDistance[X]&&(a.set(J.ix,J.iy,J.iz,U),this.vpDistance[X]=I,this.vpBits[X]&this.ISBOUND||(this.vpBits[X]|=this.ISBOUND,ie.push({ix:J.ix,iy:J.iy,iz:J.iz})))))}for(let te=0,ee=n.length;te<ee;te++){h=n[te].ix,f=n[te].iy,z=n[te].iz,U=a.get(h,f,z);for(let le=6;le<18;le++)J.ix=h+this.nb[le][0],J.iy=f+this.nb[le][1],J.iz=z+this.nb[le][2],J.ix<this.pLength&&J.ix>-1&&J.iy<this.pWidth&&J.iy>-1&&J.iz<this.pHeight&&J.iz>-1&&(X=J.ix*Q+this.pHeight*J.iy+J.iz,this.vpBits[X]&this.INOUT&&!(this.vpBits[X]&this.ISDONE)?(a.set(J.ix,J.iy,z+this.nb[le][2],U),_=J.ix-U.ix,V=J.iy-U.iy,B=J.iz-U.iz,I=_*_+V*V+B*B,this.vpDistance[X]=I,this.vpBits[X]|=this.ISDONE,this.vpBits[X]|=this.ISBOUND,ie.push({ix:J.ix,iy:J.iy,iz:J.iz})):this.vpBits[X]&this.INOUT&&this.vpBits[X]&this.ISDONE&&(_=J.ix-U.ix,V=J.iy-U.iy,B=J.iz-U.iz,I=_*_+V*V+B*B,I<this.vpDistance[X]&&(a.set(J.ix,J.iy,J.iz,U),this.vpDistance[X]=I,this.vpBits[X]&this.ISBOUND||(this.vpBits[X]|=this.ISBOUND,ie.push({ix:J.ix,iy:J.iy,iz:J.iz})))))}for(let te=0,ee=n.length;te<ee;te++){h=n[te].ix,f=n[te].iy,z=n[te].iz,U=a.get(h,f,z);for(let le=18;le<26;le++)J.ix=h+this.nb[le][0],J.iy=f+this.nb[le][1],J.iz=z+this.nb[le][2],J.ix<this.pLength&&J.ix>-1&&J.iy<this.pWidth&&J.iy>-1&&J.iz<this.pHeight&&J.iz>-1&&(X=J.ix*Q+this.pHeight*J.iy+J.iz,this.vpBits[X]&this.INOUT&&!(this.vpBits[X]&this.ISDONE)?(a.set(J.ix,J.iy,z+this.nb[le][2],U),_=J.ix-U.ix,V=J.iy-U.iy,B=J.iz-U.iz,I=_*_+V*V+B*B,this.vpDistance[X]=I,this.vpBits[X]|=this.ISDONE,this.vpBits[X]|=this.ISBOUND,ie.push({ix:J.ix,iy:J.iy,iz:J.iz})):this.vpBits[X]&this.INOUT&&this.vpBits[X]&this.ISDONE&&(_=J.ix-U.ix,V=J.iy-U.iy,B=J.iz-U.iz,I=_*_+V*V+B*B,I<this.vpDistance[X]&&(a.set(J.ix,J.iy,J.iz,U),this.vpDistance[X]=I,this.vpBits[X]&this.ISBOUND||(this.vpBits[X]|=this.ISBOUND,ie.push({ix:J.ix,iy:J.iy,iz:J.iz})))))}return ie}marchingcubeinit(n){for(let a=0,h=this.vpBits.length;a<h;a++)n==1?this.vpBits[a]&=~this.ISBOUND:n==4?(this.vpBits[a]&=~this.ISDONE,this.vpBits[a]&this.ISBOUND&&(this.vpBits[a]|=this.ISDONE),this.vpBits[a]&=~this.ISBOUND):n==2?this.vpBits[a]&this.ISBOUND&&this.vpBits[a]&this.ISDONE?this.vpBits[a]&=~this.ISBOUND:this.vpBits[a]&this.ISBOUND&&!(this.vpBits[a]&this.ISDONE)&&(this.vpBits[a]|=this.ISDONE):n==3&&(this.vpBits[a]&=~this.ISBOUND)}marchingcube(n){this.marchingcubeinit(n),this.verts=[],this.faces=[],Pe.MarchingCube.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let a=this.pWidth*this.pHeight;for(let h=0,f=this.verts.length;h<f;h++)this.verts[h].atomid=this.vpAtomID[this.verts[h].x*a+this.pHeight*this.verts[h].y+this.verts[h].z];Pe.MarchingCube.laplacianSmooth(1,this.verts,this.faces)}}Pe.MarchingCube=new Yt;var Qe=s(848);class $e{static finalizeGeo(n){var a=n.updateGeoGroup(0);a.vertices>0&&a.truncateArrayBuffers(!0,!0)}static updateColor(n,a){var h,f,z;a=a||w.CC.color(a),n.colorsNeedUpdate=!0,a.constructor!==Array&&(h=a.r,f=a.g,z=a.b);for(let _ in n.geometryGroups){let V=n.geometryGroups[_],B=V.colorArray;for(let I=0,U=V.vertices;I<U;++I){if(a.constructor===Array){let X=a[I];h=X.r,f=X.g,z=X.b}B[3*I]=h,B[3*I+1]=f,B[3*I+2]=z}}}static drawArrow(n,a,h){var f=h.start,z=h.end,_=h.radius,V=h.radiusRatio,B=h.mid,I=h.midpos;if(!f||!z)return;var U=a.updateGeoGroup(51),X=new d.Vector3(z.x,z.y,z.z).sub(f);if(I){let bi=X.length();B=I>0?I/bi:(bi+I)/bi}X.multiplyScalar(B);var ie=new d.Vector3(f.x,f.y,f.z).add(X),J=X.clone().negate();let Q=new d.Vector3(f.x,f.y,f.z);n.intersectionShape.cylinder.push(new p.Cylinder(Q,ie.clone(),_)),n.intersectionShape.sphere.push(new p.Sphere(Q,_));var te=[];te[0]=X.clone(),Math.abs(te[0].x)>1e-4?te[0].y+=1:te[0].x+=1,te[0].cross(X),te[0].normalize(),te[4]=te[0].clone(),te[4].crossVectors(te[0],X),te[4].normalize(),te[8]=te[0].clone().negate(),te[12]=te[4].clone().negate(),te[2]=te[0].clone().add(te[4]).normalize(),te[6]=te[4].clone().add(te[8]).normalize(),te[10]=te[8].clone().add(te[12]).normalize(),te[14]=te[12].clone().add(te[0]).normalize(),te[1]=te[0].clone().add(te[2]).normalize(),te[3]=te[2].clone().add(te[4]).normalize(),te[5]=te[4].clone().add(te[6]).normalize(),te[7]=te[6].clone().add(te[8]).normalize(),te[9]=te[8].clone().add(te[10]).normalize(),te[11]=te[10].clone().add(te[12]).normalize(),te[13]=te[12].clone().add(te[14]).normalize(),te[15]=te[14].clone().add(te[0]).normalize();var ee,le,de,fe,Se,xe,Me,Be,Ne,je,De,Je,ct,dt,lt,_t,Et,ut,Ct,Ye,ht,Ot,gt=U.vertices,Dt=U.vertexArray,Lt=U.faceArray,pt=U.normalArray,Bt=U.lineArray;for(le=0,de=te.length;le<de;++le){ee=3*(gt+3*le);var tr=te[le].clone().multiplyScalar(_).add(f),jt=te[le].clone().multiplyScalar(_).add(ie),wt=te[le].clone().multiplyScalar(_*V).add(ie);if(Dt[ee]=tr.x,Dt[ee+1]=tr.y,Dt[ee+2]=tr.z,Dt[ee+3]=jt.x,Dt[ee+4]=jt.y,Dt[ee+5]=jt.z,Dt[ee+6]=wt.x,Dt[ee+7]=wt.y,Dt[ee+8]=wt.z,le>0){var cr=Dt[ee-3],qt=Dt[ee-2],ar=Dt[ee-1],Qt=new d.Vector3(cr,qt,ar),nr=new d.Vector3(z.x,z.y,z.z),Mr=ie.clone(),Kr=new d.Vector3(wt.x,wt.y,wt.z);n.intersectionShape.triangle.push(new p.Triangle(Kr,nr,Qt)),n.intersectionShape.triangle.push(new p.Triangle(Qt.clone(),Mr,Kr.clone()))}}U.vertices+=48,Dt[ee=3*U.vertices]=f.x,Dt[ee+1]=f.y,Dt[ee+2]=f.z,Dt[ee+3]=ie.x,Dt[ee+4]=ie.y,Dt[ee+5]=ie.z,Dt[ee+6]=z.x,Dt[ee+7]=z.y,Dt[ee+8]=z.z,U.vertices+=3;var Nr=U.vertices-3,pi=U.vertices-2,ri=U.vertices-1,Ir=3*Nr,ii=3*pi,wi=3*ri;for(le=0,de=te.length-1;le<de;++le){var mi=gt+3*le;ee=3*mi,Se=U.faceidx,xe=U.lineidx,ct=3*(Me=mi),dt=3*(Be=mi+1),lt=3*(Ne=mi+2),_t=3*(je=mi+4),Et=3*(De=mi+5),ut=3*(Je=mi+3),Ct=Ye=te[le],ht=Ot=te[le+1],pt[ct]=Ct.x,pt[dt]=Ye.x,pt[ut]=Ot.x,pt[ct+1]=Ct.y,pt[dt+1]=Ye.y,pt[ut+1]=Ot.y,pt[ct+2]=Ct.z,pt[dt+2]=Ye.z,pt[ut+2]=Ot.z,pt[dt]=Ye.x,pt[_t]=ht.x,pt[ut]=Ot.x,pt[dt+1]=Ye.y,pt[_t+1]=ht.y,pt[ut+1]=Ot.y,pt[dt+2]=Ye.z,pt[_t+2]=ht.z,pt[ut+2]=Ot.z,pt[lt]=Ye.x,pt[Et]=ht.x,pt[lt+1]=Ye.y,pt[Et+1]=ht.y,pt[lt+2]=Ye.z,pt[Et+2]=ht.z,Lt[Se]=Me,Lt[Se+1]=Be,Lt[Se+2]=Je,Lt[Se+3]=Be,Lt[Se+4]=je,Lt[Se+5]=Je,Lt[Se+6]=Me,Lt[Se+7]=Je,Lt[Se+8]=Nr,Lt[Se+9]=Ne,Lt[Se+10]=pi,Lt[Se+11]=De,Lt[Se+12]=Ne,Lt[Se+13]=ri,Lt[Se+14]=De,Bt[xe]=Me,Bt[xe+1]=Be,Bt[xe+2]=Me,Bt[xe+3]=Je,Bt[xe+4]=je,Bt[xe+5]=Je,Bt[xe+6]=Me,Bt[xe+7]=Je,Bt[xe+8]=Ne,Bt[xe+9]=Be,Bt[xe+10]=Ne,Bt[xe+11]=De,Bt[xe+12]=je,Bt[xe+13]=De,Bt[xe+14]=Ne,Bt[xe+15]=ri,Bt[xe+16]=Ne,Bt[xe+17]=De,Bt[xe+18]=ri,Bt[xe+19]=De,U.faceidx+=15,U.lineidx+=20}fe=[gt+45,gt+46,gt+1,gt,gt+47,gt+2],Se=U.faceidx,xe=U.lineidx,ct=3*(Me=fe[0]),dt=3*(Be=fe[1]),lt=3*(Ne=fe[4]),_t=3*(je=fe[2]),Et=3*(De=fe[5]),ut=3*(Je=fe[3]),Ct=Ye=te[15],ht=Ot=te[0],pt[ct]=Ct.x,pt[dt]=Ye.x,pt[ut]=Ot.x,pt[ct+1]=Ct.y,pt[dt+1]=Ye.y,pt[ut+1]=Ot.y,pt[ct+2]=Ct.z,pt[dt+2]=Ye.z,pt[ut+2]=Ot.z,pt[dt]=Ye.x,pt[_t]=ht.x,pt[ut]=Ot.x,pt[dt+1]=Ye.y,pt[_t+1]=ht.y,pt[ut+1]=Ot.y,pt[dt+2]=Ye.z,pt[_t+2]=ht.z,pt[ut+2]=Ot.z,pt[lt]=Ye.x,pt[Et]=ht.x,pt[lt+1]=Ye.y,pt[Et+1]=ht.y,pt[lt+2]=Ye.z,pt[Et+2]=ht.z,X.normalize(),J.normalize(),pt[Ir]=J.x,pt[ii]=pt[wi]=X.x,pt[Ir+1]=J.y,pt[ii+1]=pt[wi+1]=X.y,pt[Ir+2]=J.z,pt[ii+2]=pt[wi+2]=X.z,Lt[Se]=Me,Lt[Se+1]=Be,Lt[Se+2]=Je,Lt[Se+3]=Be,Lt[Se+4]=je,Lt[Se+5]=Je,Lt[Se+6]=Me,Lt[Se+7]=Je,Lt[Se+8]=Nr,Lt[Se+9]=Ne,Lt[Se+10]=pi,Lt[Se+11]=De,Lt[Se+12]=Ne,Lt[Se+13]=ri,Lt[Se+14]=De,Bt[xe]=Me,Bt[xe+1]=Be,Bt[xe+2]=Me,Bt[xe+3]=Je,Bt[xe+4]=je,Bt[xe+5]=Je,Bt[xe+6]=Me,Bt[xe+7]=Je,Bt[xe+8]=Ne,Bt[xe+9]=Be,Bt[xe+10]=Ne,Bt[xe+11]=De,Bt[xe+12]=je,Bt[xe+13]=De,Bt[xe+14]=Ne,Bt[xe+15]=ri,Bt[xe+16]=Ne,Bt[xe+17]=De,Bt[xe+18]=ri,Bt[xe+19]=De,U.faceidx+=15,U.lineidx+=20}static updateBoundingFromPoints(n,a,h,f){n.center.set(0,0,0);let z=1/0,_=1/0,V=1/0,B=-1/0,I=-1/0,U=-1/0;n.box&&(z=n.box.min.x,B=n.box.max.x,_=n.box.min.y,I=n.box.max.y,V=n.box.min.z,U=n.box.max.z);for(let Q=0,te=f;Q<te;Q++){var X=h[3*Q],ie=h[3*Q+1],J=h[3*Q+2];X<z&&(z=X),ie<_&&(_=ie),J<V&&(V=J),X>B&&(B=X),ie>I&&(I=ie),J>U&&(U=J)}n.center.set((B+z)/2,(I+_)/2,(U+V)/2),n.radius=n.center.distanceTo({x:B,y:I,z:U}),n.box={min:{x:z,y:_,z:V},max:{x:B,y:I,z:U}}}static addCustomGeo(n,a,h,f,z){var _,V,B,I,U,X,ie,J,Q,te=a.addGeoGroup(),ee=h.vertexArr,le=h.normalArr,de=h.faceArr;te.vertices=ee.length,te.faceidx=de.length;var fe=te.vertexArray,Se=te.colorArray;for(f.constructor!==Array&&(J=f.r,Q=f.g,I=f.b),X=0,ie=te.vertices;X<ie;++X)_=3*X,V=ee[X],fe[_]=V.x,fe[_+1]=V.y,fe[_+2]=V.z,f.constructor===Array&&(J=(U=f[X]).r,Q=U.g,I=U.b),Se[_]=J,Se[_+1]=Q,Se[_+2]=I;if(z)for(X=0,ie=te.faceidx/3;X<ie;++X){B=de[_=3*X],I=de[_+1],U=de[_+2];var xe=new d.Vector3,Me=new d.Vector3,Be=new d.Vector3;n.intersectionShape.triangle.push(new p.Triangle(xe.copy(ee[B]),Me.copy(ee[I]),Be.copy(ee[U])))}if(z){var Ne=new d.Vector3(0,0,0),je=0;for(let ct=0;ct<a.geometryGroups.length;ct++)Ne.add(a.geometryGroups[ct].getCentroid()),je++;Ne.divideScalar(je),$e.updateBoundingFromPoints(n.boundingSphere,{centroid:Ne},fe,te.vertices)}if(te.faceArray=new Uint16Array(de),te.truncateArrayBuffers(!0,!0),le.length<te.vertices)te.setNormals();else{var De,Je=te.normalArray=new Float32Array(3*te.vertices);for(X=0,ie=te.vertices;X<ie;++X)_=3*X,De=le[X],Je[_]=De.x,Je[_+1]=De.y,Je[_+2]=De.z}te.setLineIndices(),te.lineidx=te.lineArray.length}static updateFromStyle(n,a){a.color!==void 0?(n.color=a.color||new w.Color,a.color instanceof w.Color||(n.color=w.CC.color(a.color))):n.color=w.CC.color(0),n.wireframe=!!a.wireframe,n.opacity=a.alpha?(0,d.clamp)(a.alpha,0,1):1,a.opacity!==void 0&&(n.opacity=(0,d.clamp)(a.opacity,0,1)),n.side=a.side!==void 0?a.side:u.DoubleSide,n.linewidth=a.linewidth===void 0?1:a.linewidth,n.clickable=!!a.clickable,n.callback=(0,v.makeFunction)(a.callback),n.hoverable=!!a.hoverable,n.hover_callback=(0,v.makeFunction)(a.hover_callback),n.unhover_callback=(0,v.makeFunction)(a.unhover_callback),n.contextMenuEnabled=!!a.contextMenuEnabled,n.hidden=a.hidden,n.frame=a.frame}constructor(n){this.color=16777215,this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.contextMenuEnabled=!1,this.side=u.DoubleSide,this.stylespec=n||{},this.boundingSphere=new p.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},$e.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new u.Geometry(!0),this.linegeo=new u.Geometry(!0)}updateStyle(n){for(var a in n)this.stylespec[a]=n[a];if($e.updateFromStyle(this,this.stylespec),n.voldata&&n.volscheme){(0,v.adjustVolumeStyle)(n);const h=n.volscheme,f=n.voldata,z=w.CC,_=h.range()||[-1,1];this.geo.setColors(function(V,B,I){let U=f.getVal(V,B,I);return z.color(h.valueToHex(U,_))}),delete this.color}}addCustom(n){n.vertexArr=n.vertexArr||[],n.faceArr=n.faceArr||[],n.normalArr=n.normalArr||[],$e.drawCustom(this,this.geo,n)}addSphere(n){n.center||(n.center=new d.Vector3(0,0,0)),n.radius=n.radius?(0,d.clamp)(n.radius,0,1/0):1.5,n.color=w.CC.color(n.color),this.intersectionShape.sphere.push(new p.Sphere(n.center,n.radius)),c.drawSphere(this.geo,n.center,n.radius,n.color,n.quality),this.components.push({centroid:new d.Vector3(n.center.x,n.center.y,n.center.z)});var a=this.geo.updateGeoGroup(0);$e.updateBoundingFromPoints(this.boundingSphere,this.components,a.vertexArray,a.vertices)}addBox(n){var a,h,f,z=n.dimensions||{w:1,h:1,d:1};a=typeof z.w=="number"?{x:z.w,y:0,z:0}:z.w,h=typeof z.h=="number"?{x:0,y:z.h,z:0}:z.h,f=typeof z.d=="number"?{x:0,y:0,z:z.d}:z.d;var _=n.corner;_==null&&(_=n.center!==void 0?{x:n.center.x-.5*(a.x+h.x+f.x),y:n.center.y-.5*(a.y+h.y+f.y),z:n.center.z-.5*(a.z+h.z+f.z)}:{x:0,y:0,z:0});var V=[{x:_.x,y:_.y,z:_.z},{x:_.x+a.x,y:_.y+a.y,z:_.z+a.z},{x:_.x+h.x,y:_.y+h.y,z:_.z+h.z},{x:_.x+a.x+h.x,y:_.y+a.y+h.y,z:_.z+a.z+h.z},{x:_.x+f.x,y:_.y+f.y,z:_.z+f.z},{x:_.x+a.x+f.x,y:_.y+a.y+f.y,z:_.z+a.z+f.z},{x:_.x+h.x+f.x,y:_.y+h.y+f.y,z:_.z+h.z+f.z},{x:_.x+a.x+h.x+f.x,y:_.y+a.y+h.y+f.y,z:_.z+a.z+h.z+f.z}],B=[],I=[];B.splice(B.length,0,V[0],V[1],V[2],V[3]),I.splice(I.length,0,0,2,1,1,2,3);var U=4;B.splice(B.length,0,V[2],V[3],V[6],V[7]),I.splice(I.length,0,U+0,U+2,U+1,U+1,U+2,U+3),U+=4,B.splice(B.length,0,V[4],V[5],V[0],V[1]),I.splice(I.length,0,U+0,U+2,U+1,U+1,U+2,U+3),U+=4,B.splice(B.length,0,V[6],V[7],V[4],V[5]),I.splice(I.length,0,U+0,U+2,U+1,U+1,U+2,U+3),U+=4,B.splice(B.length,0,V[3],V[1],V[7],V[5]),I.splice(I.length,0,U+0,U+2,U+1,U+1,U+2,U+3),U+=4,B.splice(B.length,0,V[2],V[6],V[0],V[4]),I.splice(I.length,0,U+0,U+2,U+1,U+1,U+2,U+3),U+=4;var X=(0,v.extend)({},n);X.vertexArr=B,X.faceArr=I,X.normalArr=[],$e.drawCustom(this,this.geo,X);var ie=new d.Vector3;this.components.push({centroid:ie.addVectors(V[0],V[7]).multiplyScalar(.5)});var J=this.geo.updateGeoGroup(0);$e.updateBoundingFromPoints(this.boundingSphere,this.components,J.vertexArray,J.vertices)}addCylinder(n){var a,h;a=n.start?new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0):new d.Vector3(0,0,0),n.end?(h=new d.Vector3(n.end.x,n.end.y||0,n.end.z||0)).x===void 0&&(h.x=3):h=new d.Vector3(0,0,0);var f=n.radius||.1,z=w.CC.color(n.color);this.intersectionShape.cylinder.push(new p.Cylinder(a,h,f)),c.drawCylinder(this.geo,a,h,f,z,n.fromCap,n.toCap);var _=new d.Vector3;this.components.push({centroid:_.addVectors(a,h).multiplyScalar(.5)});var V=this.geo.updateGeoGroup(0);$e.updateBoundingFromPoints(this.boundingSphere,this.components,V.vertexArray,V.vertices)}addDashedCylinder(n){var a,h;n.dashLength=n.dashLength||.25,n.gapLength=n.gapLength||.25,a=n.start?new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0):new d.Vector3(0,0,0),n.end?(h=new d.Vector3(n.end.x,n.end.y||0,n.end.z||0)).x===void 0&&(h.x=3):h=new d.Vector3(3,0,0);for(var f=n.radius||.1,z=w.CC.color(n.color),_=Math.sqrt(Math.pow(a.x-h.x,2)+Math.pow(a.y-h.y,2)+Math.pow(a.z-h.z,2)),V=_/(n.gapLength+n.dashLength),B=new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0),I=new d.Vector3(n.end.x,n.end.y||0,n.end.z||0),U=new d.Vector3((h.x-a.x)/(_/n.gapLength),(h.y-a.y)/(_/n.gapLength),(h.z-a.z)/(_/n.gapLength)),X=new d.Vector3((h.x-a.x)/(_/n.dashLength),(h.y-a.y)/(_/n.dashLength),(h.z-a.z)/(_/n.dashLength)),ie=0;ie<V;ie++)I=new d.Vector3(B.x+X.x,B.y+X.y,B.z+X.z),this.intersectionShape.cylinder.push(new p.Cylinder(B,I,f)),c.drawCylinder(this.geo,B,I,f,z,n.fromCap,n.toCap),B=new d.Vector3(I.x+U.x,I.y+U.y,I.z+U.z);var J=new d.Vector3;this.components.push({centroid:J.addVectors(a,h).multiplyScalar(.5)});var Q=this.geo.updateGeoGroup(0);$e.updateBoundingFromPoints(this.boundingSphere,this.components,Q.vertexArray,Q.vertices)}addCurve(n){n.points=n.points||[],n.smooth=n.smooth||10,n.fromCap===void 0&&(n.fromCap=2),n.toCap===void 0&&(n.toCap=2);var a=k(n.points,n.smooth);if(a.length<3)console.log("Too few points in addCurve");else{var h=n.radius||.1,f=w.CC.color(n.color),z=0,_=a.length-1,V=a[0].distanceTo(a[1]),B=Math.ceil(2*h/V);if(n.toArrow){let ie={start:a[_-=B],end:a[a.length-1],radius:h,color:f,mid:1e-4};this.addArrow(ie)}if(n.fromArrow){let ie={start:a[z+=B],end:a[0],radius:h,color:f,mid:1e-4};this.addArrow(ie)}for(var I=Math.ceil(a.length/2),U={radius:h,color:f,fromCap:2,toCap:2},X=z;X<_;X++)U.start=a[X],U.end=a[X+1],U.fromCap=2,U.toCap=2,X<I?(U.fromCap=2,U.toCap=0):X>I?(U.fromCap=0,U.toCap=2):(U.fromCap=2,U.toCap=2),this.addCylinder(U)}}addLine(n){var a,h;a=n.start?new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0):new d.Vector3(0,0,0),n.end?(h=new d.Vector3(n.end.x,n.end.y||0,n.end.z||0)).x===void 0&&(h.x=3):h=new d.Vector3(3,0,0);var f=this.geo.updateGeoGroup(2),z=f.vertices,_=3*z,V=f.vertexArray;V[_]=a.x,V[_+1]=a.y,V[_+2]=a.z,V[_+3]=h.x,V[_+4]=h.y,V[_+5]=h.z,f.vertices+=2;var B=f.lineArray,I=f.lineidx;B[I]=z,B[I+1]=z+1,f.lineidx+=2;var U=new d.Vector3;this.components.push({centroid:U.addVectors(a,h).multiplyScalar(.5)}),f=this.geo.updateGeoGroup(0),$e.updateBoundingFromPoints(this.boundingSphere,this.components,f.vertexArray,f.vertices)}addArrow(n){if(n.start?n.start=new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0):n.start=new d.Vector3(0,0,0),n.dir instanceof d.Vector3&&typeof n.length=="number"){var a=n.dir.clone().multiplyScalar(n.length).add(n.start);n.end=a}else n.end?(n.end=new d.Vector3(n.end.x,n.end.y||0,n.end.z||0),n.end.x===void 0&&(n.end.x=3)):n.end=new d.Vector3(3,0,0);n.radius=n.radius||.1,n.radiusRatio=n.radiusRatio||1.618034,n.mid=0<n.mid&&n.mid<1?n.mid:.618034,$e.drawArrow(this,this.geo,n);var h=new d.Vector3;this.components.push({centroid:h.addVectors(n.start,n.end).multiplyScalar(.5)});var f=this.geo.updateGeoGroup(0);$e.updateBoundingFromPoints(this.boundingSphere,this.components,f.vertexArray,f.vertices)}static distance_from(n,a){return Math.sqrt(Math.pow(n.x-a.x,2)+Math.pow(n.y-a.y,2)+Math.pow(n.z-a.z,2))}static inSelectedRegion(n,a,h){for(var f=0;f<a.length;f++)if($e.distance_from(a[f],n)<=h)return!0;return!1}addIsosurface(n,a,h,f){var z,_,V=a.isoval!==void 0&&typeof a.isoval=="number"?a.isoval:0,B=!!a.voxel,I=a.smoothness===void 0?1:a.smoothness,U=n.size.x,X=n.size.y,ie=n.size.z,J=new Int16Array(U*X*ie),Q=n.data;for(z=0,_=J.length;z<_;++z)J[z]=-1;var te=new Uint8Array(U*X*ie);for(z=0,_=Q.length;z<_;++z)(V>=0?Q[z]-V:V-Q[z])>0&&(te[z]|=$e.ISDONE);var ee=[],le=[];T.march(te,ee,le,{fulltable:!0,voxel:B,unitCube:n.unit,origin:n.origin,matrix:n.matrix,nX:U,nY:X,nZ:ie}),!B&&I>0&&T.laplacianSmooth(I,ee,le);var de=[],fe=[],Se=[];if(a.selectedRegion&&a.coords===void 0&&(a.coords=a.selectedRegion),a.coords===void 0&&a.selection!==void 0&&(f?a.coords=f.selectedAtoms(a.selection):console.log("addIsosurface needs viewer is selection provided.")),a.coords!==void 0){var xe=a.coords[0].x,Me=a.coords[0].y,Be=a.coords[0].z,Ne=a.coords[0].x,je=a.coords[0].y,De=a.coords[0].z;for(let Ye=0;Ye<a.coords.length;Ye++)a.coords[Ye].x>xe?xe=a.coords[Ye].x:a.coords[Ye].x<Ne&&(Ne=a.coords[Ye].x),a.coords[Ye].y>Me?Me=a.coords[Ye].y:a.coords[Ye].y<je&&(je=a.coords[Ye].y),a.coords[Ye].z>Be?Be=a.coords[Ye].z:a.coords[Ye].z<De&&(De=a.coords[Ye].z);var Je=2;a.radius!==void 0&&(Je=a.radius),a.selectedOffset!==void 0&&(Je=a.selectedOffset),a.seldist!==void 0&&(Je=a.seldist),Ne-=Je,xe+=Je,je-=Je,Me+=Je,De-=Je,Be+=Je;for(let Ye=0;Ye<ee.length;Ye++)ee[Ye].x>Ne&&ee[Ye].x<xe&&ee[Ye].y>je&&ee[Ye].y<Me&&ee[Ye].z>De&&ee[Ye].z<Be&&$e.inSelectedRegion(ee[Ye],a.coords,Je)?(de.push(fe.length),fe.push(ee[Ye])):de.push(-1);for(let Ye=0;Ye+2<le.length;Ye+=3)de[le[Ye]]!==-1&&de[le[Ye+1]]!==-1&&de[le[Ye+2]]!==-1&&(Se.push(le[Ye]-(le[Ye]-de[le[Ye]])),Se.push(le[Ye+1]-(le[Ye+1]-de[le[Ye+1]])),Se.push(le[Ye+2]-(le[Ye+2]-de[le[Ye+2]])));ee=fe,le=Se}$e.drawCustom(this,this.geo,{vertexArr:ee,faceArr:le,normalArr:[],clickable:a.clickable,hoverable:a.hoverable}),this.updateStyle(a);var ct=new d.Vector3(n.origin.x,n.origin.y,n.origin.z),dt=new d.Vector3(n.size.x*n.unit.x,n.size.y*n.unit.y,n.size.z*n.unit.z),lt=new d.Vector3(0,0,0),_t=ct.clone(),Et=ct.clone().add(dt);for(let Ye=0;Ye<ee.length;Ye++)lt.add(ee[Ye]),_t.max(ee[Ye]),Et.min(ee[Ye]);lt.divideScalar(ee.length);var ut=lt.distanceTo(Et),Ct=lt.distanceTo(_t);this.boundingSphere.center=lt,this.boundingSphere.radius=Math.max(ut,Ct),typeof h=="function"&&h()}addVolumetricData(n,a,h){n=new Qe.VolumeData(n,a),this.addIsosurface(n,h)}finalize(){return $e.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(n){if(this.renderedShapeObj&&(n.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){$e.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),this.color!==void 0&&$e.updateColor(this.geo,this.color),this.shapeObj=new u.Object3D;var a=null;a=this.side==u.DoubleSide?new u.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:u.Coloring.VertexColors}):new u.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:u.Coloring.VertexColors});var h=new u.Mesh(this.geo,a);if(this.shapeObj.add(h),this.linegeo&&this.linegeo.vertices>0){var f=new u.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),z=new u.Line(this.linegeo,f,u.LineStyle.LinePieces);this.shapeObj.add(z)}this.renderedShapeObj=this.shapeObj.clone(),n.add(this.renderedShapeObj)}}removegl(n){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),n.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}function Mt(ye){if(ye.vertexArr.length<64e3)return[ye];var n=[{vertexArr:[],normalArr:[],faceArr:[]}];ye.colorArr&&(n.colorArr=[]);var a=[],h=[],f=0,z=ye.faceArr;for(let V=0,B=z.length;V<B;V+=3){let I=n[f];for(let U=0;U<3;U++){var _=z[V+U];a[_]!==f&&(a[_]=f,h[_]=I.vertexArr.length,I.vertexArr.push(ye.vertexArr[_]),ye.normalArr&&ye.normalArr[_]&&I.normalArr.push(ye.normalArr[_]),ye.colorArr&&ye.colorArr[_]&&I.colorArr.push(ye.colorArr[_])),I.faceArr.push(h[_])}I.vertexArr.length>=64e3&&(n.push({vertexArr:[],normalArr:[],faceArr:[]}),ye.colorArr&&(n.colorArr=[]),f++)}return n}$e.ISDONE=2,$e.drawCustom=function(ye,n,a){var h=a,f=h.vertexArr,z=h.faceArr;f.length!==0&&z.length!==0||console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var _=a.color;_===void 0&&(_=ye.color),_=w.CC.color(_);for(var V=Mt(h),B=0,I=V.length;B<I;B++)$e.addCustomGeo(ye,n,V[B],V[B].colorArr?V[B].colorArr:_,a.clickable)};let xt=0;function At(ye,n,a){var h=a;return ye!==void 0&&(ye instanceof w.Color?h=ye.scaled():(h=w.CC.color(ye)).scaled!==void 0&&(h=h.scaled())),n!==void 0&&(h.a=parseFloat(n)),h}class Vt{constructor(n,a){this.id=xt++,this.stylespec=a||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new u.Sprite,this.text=n,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}hide(){this.sprite&&(this.sprite.visible=!1)}show(){this.sprite&&(this.sprite.visible=!0)}setContext(){var n=this.stylespec,a=n.useScreen!==void 0&&n.useScreen,h=n.showBackground;h!=="0"&&h!=="false"||(h=!1),h===void 0&&(h=!0);var f=n.font?n.font:"sans-serif",z=parseInt(n.fontSize)?parseInt(n.fontSize):18,_=At(n.fontColor,n.fontOpacity,{r:255,g:255,b:255,a:1}),V=n.padding?n.padding:4,B=n.borderThickness?n.borderThickness:0,I=At(n.backgroundColor,n.backgroundOpacity,{r:0,g:0,b:0,a:1}),U=At(n.borderColor,n.borderOpacity,I),X=n.position?n.position:{x:-10,y:1,z:1},ie=n.inFront===void 0||n.inFront;ie!=="false"&&ie!=="0"||(ie=!1);var J=n.alignment||u.SpriteAlignment.topLeft;typeof J=="string"&&J in u.SpriteAlignment&&(J=u.SpriteAlignment[J]);var Q="";n.bold&&(Q="bold "),this.context.font=Q+z+"px  "+f;var te=this.context.measureText(this.text).width;h||(B=0);var ee=te+2.5*B+2*V,le=1.25*z+2*B+2*V;if(n.backgroundImage){var de=n.backgroundImage,fe=n.backgroundWidth?n.backgroundWidth:de.width,Se=n.backgroundHeight?n.backgroundHeight:de.height;fe>ee&&(ee=fe),Se>le&&(le=Se)}if(this.canvas.width=ee,this.canvas.height=le,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),Q="",n.bold&&(Q="bold "),this.context.font=Q+z+"px  "+f,this.context.fillStyle="rgba("+I.r+","+I.g+","+I.b+","+I.a+")",this.context.strokeStyle="rgba("+U.r+","+U.g+","+U.b+","+U.a+")",n.backgroundGradient){let Me=this.context.createLinearGradient(0,le/2,ee,le/2),Be=C.Gradient.getGradient(n.backgroundGradient),Ne=Be.range(),je=-1,De=1;Ne&&(je=Ne[0],De=Ne[1]);let Je=De-je;for(let ct=0;ct<1.01;ct+=.1){let dt=At(Be.valueToHex(je+Je*ct)),lt="rgba("+dt.r+","+dt.g+","+dt.b+","+dt.a+")";Me.addColorStop(ct,lt)}this.context.fillStyle=Me}this.context.lineWidth=B,h&&(function(Me,Be,Ne,je,De,Je,ct){Me.beginPath(),Me.moveTo(Be+Je,Ne),Me.lineTo(Be+je-Je,Ne),Me.quadraticCurveTo(Be+je,Ne,Be+je,Ne+Je),Me.lineTo(Be+je,Ne+De-Je),Me.quadraticCurveTo(Be+je,Ne+De,Be+je-Je,Ne+De),Me.lineTo(Be+Je,Ne+De),Me.quadraticCurveTo(Be,Ne+De,Be,Ne+De-Je),Me.lineTo(Be,Ne+Je),Me.quadraticCurveTo(Be,Ne,Be+Je,Ne),Me.closePath(),Me.fill(),ct&&Me.stroke()})(this.context,B,B,ee-2*B,le-2*B,6,B>0),n.backgroundImage&&this.context.drawImage(de,0,0,ee,le),this.context.fillStyle="rgba("+_.r+","+_.g+","+_.b+","+_.a+")",this.context.fillText(this.text,B+V,z+B+V,te);var xe=new u.Texture(this.canvas);xe.needsUpdate=!0,this.sprite.material=new u.SpriteMaterial({map:xe,useScreenCoordinates:a,alignment:J,depthTest:!ie,screenOffset:n.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(X.x,X.y,X.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}class Ut{static interpolateArray(n,a){function h(X,ie,J){return X+(ie-X)*J}var f=[],z=(n.length-1)/(a-1);f[0]=n[0];for(var _=1;_<a-1;_++){var V=_*z,B=Math.floor(V),I=Math.ceil(V),U=V-B;f[_]=h(n[B],n[I],U)}return f[a-1]=n[n.length-1],f}constructor(n,a,h){this.hidden=!1,this.boundingSphere=new p.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,a=a||{};var f,z,_,V,B,I,U,X,ie,J,Q=Object.assign([],a.transferfn);this.subsamples=a.subsamples||5,Q.forEach(function(ee){ee.value=parseFloat(ee.value)}),Q.sort(function(ee,le){return ee.value-le.value}),this.min=Q[0].value,Q.length==0&&Q.push(Q[0]),this.max=Q[Q.length-1].value;for(let ee=0;ee<Q.length-1;ee++)if(_=w.CC.color(Q[ee].color),V=w.CC.color(Q[ee+1].color),ie=Q[ee].opacity,J=Q[ee+1].opacity,(f=Math.floor(256*(Q[ee].value-this.min)/(this.max-this.min)))!=(z=Math.floor(256*(Q[ee+1].value-this.min)/(this.max-this.min)))){B=Ut.interpolateArray([255*_.r,255*V.r],z-f),I=Ut.interpolateArray([255*_.g,255*V.g],z-f),U=Ut.interpolateArray([255*_.b,255*V.b],z-f),X=Ut.interpolateArray([255*ie,255*J],z-f);for(let le=0;le<B.length;le++)this.transferfunctionbuffer.push(B[le]),this.transferfunctionbuffer.push(I[le]),this.transferfunctionbuffer.push(U[le]),this.transferfunctionbuffer.push(X[le])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),n.matrix){let ee=new d.Vector3(0,0,0),le=new d.Vector3(n.size.x,n.size.y,n.size.z),de=new d.Vector3(1,1,1);ee.applyMatrix4(n.matrix),le.applyMatrix4(n.matrix),de.applyMatrix4(n.matrix).sub(ee),this.extent=[[ee.x,ee.y,ee.z],[le.x,le.y,le.z]];for(let Me=1;Me<7;Me++)le.x=1&Me?n.size.x:0,le.y=2&Me?n.size.y:0,le.z=4&Me?n.size.z:0,le.applyMatrix4(n.matrix),this.extent[0][0]=Math.min(this.extent[0][0],le.x),this.extent[0][1]=Math.min(this.extent[0][1],le.y),this.extent[0][2]=Math.min(this.extent[0][2],le.z),this.extent[1][0]=Math.max(this.extent[1][0],le.x),this.extent[1][1]=Math.max(this.extent[1][1],le.y),this.extent[1][2]=Math.max(this.extent[1][2],le.z);let fe=le.x-ee.x,Se=le.y-ee.y,xe=le.z-ee.z;this.maxdepth=Math.sqrt(fe*fe+Se*Se+xe*xe),this.minunit=Math.min(Math.min(de.x,de.y),de.z),this.texmatrix=new d.Matrix4().identity().scale({x:n.size.x,y:n.size.y,z:n.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(n.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new d.Matrix4().identity();let ee=n.unit.x*n.size.x,le=n.unit.y*n.size.y,de=n.unit.z*n.size.z;this.texmatrix.makeTranslation(-n.origin.x/ee,-n.origin.y/le,-n.origin.z/de),this.texmatrix.scale({x:1/ee,y:1/le,z:1/de}),this.minunit=Math.min(Math.min(n.unit.x,n.unit.y),n.unit.z),this.extent=[[n.origin.x,n.origin.y,n.origin.z],[n.origin.x+ee,n.origin.y+le,n.origin.z+de]],this.maxdepth=Math.sqrt(ee*ee+le*le+de*de)}var te=new $e({});if(te.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=te.finalize(),this.boundingSphere.center=new d.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,a.coords===void 0&&a.selection!==void 0&&(h?a.coords=h.selectedAtoms(a.selection):console.log("Need to provide viewer to volumetric renderer if selection specified.")),a.coords!==void 0&&a.seldist!==void 0){let ee=new Uint8Array(n.data.length),le=a.seldist,de=le*le;for(let fe=0,Se=a.coords.length;fe<Se;fe++){let xe=a.coords[fe],Me=xe.x-le,Be=xe.y-le,Ne=xe.z-le,je=xe.x+le,De=xe.y+le,Je=xe.z+le;if(n.getIndex(Me,Be,Ne)>=0||n.getIndex(je,De,Je)>=0)for(let ct=Me;ct<je;ct+=this.minunit)for(let dt=Be;dt<De;dt+=this.minunit)for(let lt=Ne;lt<Je;lt+=this.minunit){let _t=n.getIndex(ct,dt,lt);_t>=0&&!ee[_t]&&(ct-xe.x)*(ct-xe.x)+(dt-xe.y)*(dt-xe.y)+(lt-xe.z)*(lt-xe.z)<de&&(ee[_t]=1)}}for(let fe=0,Se=n.data.length;fe<Se;fe++)ee[fe]==0&&(n.data[fe]=1/0)}this.data=n}globj(n){if(this.renderedShapeObj&&(n.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new u.Object3D;var a,h=new u.Texture(this.data,!0),f=new u.Texture(this.transferfunctionbuffer,!1);h.needsUpdate=!0,f.needsUpdate=!0,f.flipY=!1,a=new u.VolumetricMaterial({transferfn:f,transfermin:this.min,transfermax:this.max,map:h,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var z=new u.Mesh(this.geo,a);this.shapeObj.add(z),this.renderedShapeObj=this.shapeObj.clone(),n.add(this.renderedShapeObj)}}removegl(n){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),n.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}const Xt=16;class Tr extends Array{constructor(n){super(...n)}getSymmetries(){if(this.length==0)return[];let n=this[0];return n.symmetries===void 0&&this.setSymmetries([new d.Matrix4]),n.symmetries}setSymmetries(n){n===void 0&&(n=[new d.Matrix4]);for(let a of this)a.symmetries=n,a.finished=!1}}class lr{getWidth(){let n=this.container,a=n.offsetWidth;if(a==0&&n.style.display==="none"){let h=n.style.position,f=n.style.visibility;n.style.display="block",n.style.visibility="hidden",n.style.position="absolute",a=n.offsetWidth,n.style.display="none",n.style.visibility=f,n.style.position=h}return a}getHeight(){let n=this.container,a=n.offsetHeight;if(a==0&&n.style.display==="none"){let h=n.style.position,f=n.style.visibility;n.style.display="block",n.style.visibility="hidden",n.style.position="absolute",a=n.offsetHeight,n.style.display="none",n.style.visibility=f,n.style.position=h}return a}setupRenderer(){let n=Object.assign(Object.assign({},this.config),{preserveDrawingBuffer:!0,premultipliedAlpha:!1,containerWidth:this.WIDTH,containerHeight:this.HEIGHT});this.renderer=new u.Renderer(n),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.renderer.domElement.style.padding="0",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.renderer.domElement.style.zIndex="0"}initializeScene(){this.scene=new u.Scene,this.scene.fog=new u.Fog(this.bgColor,100,200),this.modelGroup=new u.Object3D,this.rotationGroup=new u.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new d.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var n=new u.Light(16777215);n.position=new d.Vector3(.2,.2,1).normalize(),n.intensity=1,this.scene.add(n)}_handleLostContext(n){const a=function(h){const f=h.getBoundingClientRect();return!(f.right<0||f.bottom<0||f.top>(window.innerHeight||document.documentElement.clientHeight)||f.left>(window.innerWidth||document.documentElement.clientWidth))};if(a(this.container)){let h=0;for(let f of document.getElementsByTagName("canvas"))if(a(f)&&f._3dmol_viewer!=null&&(f._3dmol_viewer.resize(),h+=1,h>=Xt))break}}initContainer(n){this.container=n,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.glDOM._3dmol_viewer=this,this.glDOM.addEventListener("webglcontextlost",this._handleLostContext.bind(this)),this.nomouse||(this.glDOM.addEventListener("mousedown",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("touchstart",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("wheel",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener("mousemove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("touchmove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("contextmenu",this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var n=0;for(let h in this.surfaces)if(this.surfaces.hasOwnProperty(h)){var a=parseInt(h);isNaN(a)||a>n&&(n=a)}return n+1}setSlabAndFog(){let n=this.camera.position.z-this.rotationGroup.position.z;n<1&&(n=1),this.camera.near=n+this.slabNear,!this.camera.ortho&&this.camera.near<1&&(this.camera.near=1),this.camera.far=n+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=n*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.near+this.fogEnd*(this.camera.far-this.camera.near),this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(n){if(this.renderer.setViewport(),this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!n&&this.linkedViewers.length>0))for(var a=this._viewer.getView(),h=0;h<this.linkedViewers.length;h++)this.linkedViewers[h].setView(a,!0)}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledObjects.splice(0,this.contextMenuEnabledObjects.length);for(let n=0,a=this.models.length;n<a;n++){let h=this.models[n];if(h){let f=h.selectedAtoms({clickable:!0}),z=h.selectedAtoms({hoverable:!0}),_=h.selectedAtoms({contextMenuEnabled:!0});for(let V=0;V<z.length;V++)this.hoverables.push(z[V]);for(let V=0;V<f.length;V++)this.clickables.push(f[V]);for(let V=0;V<_.length;V++)this.contextMenuEnabledObjects.push(_[V])}}for(let n=0,a=this.shapes.length;n<a;n++){let h=this.shapes[n];h&&h.clickable&&this.clickables.push(h),h&&h.hoverable&&this.hoverables.push(h),h&&h.contextMenuEnabled&&this.contextMenuEnabledObjects.push(h)}}handleClickSelection(n,a,h){let f=this.targetedObjects(n,a,this.clickables);if(f.length){var z=f[0].clickable;z.callback!==void 0&&(typeof z.callback!="function"&&(z.callback=(0,v.makeFunction)(z.callback)),typeof z.callback=="function")&&(this.mouseButton===3&&this.contextMenuEnabledObjects.includes(z)&&this.userContextMenuHandler||z.callback(z,this._viewer,h,this.container,f))}}canvasOffset(){let n=this.glDOM,a=n.getBoundingClientRect(),h=n.ownerDocument,f=h.documentElement,z=h.defaultView;return{top:a.top+z.pageYOffset-f.clientTop,left:a.left+z.pageXOffset-f.clientLeft}}setHover(n,a,h){this.current_hover!=n&&(this.current_hover&&(typeof this.current_hover.unhover_callback!="function"&&(this.current_hover.unhover_callback=(0,v.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,a,this.container,h)),this.current_hover=n,n&&n.hover_callback!==void 0&&(typeof n.hover_callback!="function"&&(n.hover_callback=(0,v.makeFunction)(n.hover_callback)),typeof n.hover_callback=="function"&&n.hover_callback(n,this._viewer,a,this.container,h)))}handleHoverSelection(n,a,h){if(this.hoverables.length==0)return;let f=this.targetedObjects(n,a,this.hoverables);if(f.length){var z=f[0].clickable;this.setHover(z,h,f),this.current_hover=z}else this.setHover(null)}handleHoverContinue(n,a){let h=this.targetedObjects(n,a,this.hoverables);h.length!=0&&h[0]!==void 0||this.setHover(null),h[0]!==void 0&&h[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(n,{allowTolerance:a=n.targetTouches,tolerance:h=5}={}){const f=this.getX(n),z=this.getY(n);if(a){const _=Math.abs(f-this.mouseStartX),V=Math.abs(z-this.mouseStartY);return _<=h&&V<=h}return f===this.mouseStartX&&z===this.mouseStartY}calcTouchDistance(n){var a=n.targetTouches[0].pageX-n.targetTouches[1].pageX,h=n.targetTouches[0].pageY-n.targetTouches[1].pageY;return Math.hypot(a,h)}getX(n){var a=n.pageX;return a==null&&(a=n.pageX),n.targetTouches&&n.targetTouches[0]?a=n.targetTouches[0].pageX:n.changedTouches&&n.changedTouches[0]&&(a=n.changedTouches[0].pageX),a}getY(n){var a=n.pageY;return a==null&&(a=n.pageY),n.targetTouches&&n.targetTouches[0]?a=n.targetTouches[0].pageY:n.changedTouches&&n.changedTouches[0]&&(a=n.changedTouches[0].pageY),a}isInViewer(n,a){if(this.viewers!=null){var h=this.WIDTH/this.cols,f=this.HEIGHT/this.rows,z=this.canvasOffset(),_=n-z.left,V=a-z.top,B=this.rows-Math.floor(V/f)-1,I=Math.floor(_/h);if(B!=this.row||I!=this.col)return!1}return!0}adjustZoomToLimits(n){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let a=this.CAMERA_Z-this.config.lowerZoomLimit;n>a&&(n=a)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let a=this.CAMERA_Z-this.config.upperZoomLimit;n<a&&(n=a)}return n>this.CAMERA_Z-1&&(n=this.CAMERA_Z-1),n}static slerp(n,a,h){if(h==1)return a.clone();if(h==0)return n.clone();let f=n.x*a.x+n.y*a.y+n.z*a.z+n.w*a.w;if(f>.9995){let U=new d.Quaternion(n.x+h*(a.x-n.x),n.y+h*(a.y-n.y),n.z+h*(a.z-n.z),n.w+h*(a.w-n.w));return U.normalize(),U}f<0&&(a=a.clone().multiplyScalar(-1),f=-f),f>1?f=1:f<-1&&(f=-1);var z=Math.acos(f)*h,_=a.clone();_.sub(n.clone().multiplyScalar(f)),_.normalize();var V=Math.cos(z),B=Math.sin(z),I=new d.Quaternion(n.x*V+_.x*B,n.y*V+_.y*B,n.z*V+_.z*B,n.w*V+_.w*B);return I.normalize(),I}constructor(n,a={}){if(this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledObjects=[],this.current_hover=null,this.hoverDuration=500,this.longTouchDuration=1e3,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.fogEnd=1,this.slabNear=-50,this.slabFar=50,this.cq=new d.Quaternion(0,0,0,1),this.dq=new d.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=a,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=w.elementColors.defaultColors),this.nomouse=!!this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||"#ffffff",this.config.backgroundColor!==void 0&&(this.bgColor=w.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,this.config.camerax!==void 0&&(this.camerax=typeof this.config.camerax=="string"?parseFloat(this.config.camerax):this.config.camerax),this._viewer=this,this.container=n,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row==null?0:this.config.row,this.col=this.config.col==null?0:this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new u.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new d.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new d.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new u.Raycaster(new d.Vector3(0,0,0),new d.Vector3(0,0,0)),this.projector=new u.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=w.CC.color(this.bgColor),document.body.addEventListener("mouseup",this._handleMouseUp.bind(this)),document.body.addEventListener("touchend",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener("resize",this.resize.bind(this)),window.ResizeObserver!==void 0&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container)),window.IntersectionObserver!==void 0){let h=(f,z)=>{f.forEach(_=>{_.isIntersecting&&this.resize()})};this.intwatcher=new window.IntersectionObserver(h),this.intwatcher.observe(this.container)}try{typeof this.callback=="function"&&this.callback(this)}catch(h){console.log("error with glviewer callback: "+h)}}targetedObjects(n,a,h){var f={x:n,y:a,z:-1};return Array.isArray(h)||(h=this.selectedAtoms(h)),h.length==0?[]:(this.raycaster.setFromCamera(f,this.camera),this.raycaster.intersectObjects(this.modelGroup,h))}modelToScreen(n){let a=!1;Array.isArray(n)||(n=[n],a=!0);let h=this.renderer.getXRatio(),f=this.renderer.getYRatio(),z=this.col,_=this.row,V=z*(this.WIDTH/h),B=(f-_-1)*(this.HEIGHT/f),I=[],U=this.canvasOffset();return n.forEach(X=>{let ie=new d.Vector3(X.x,X.y,X.z);ie.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector(ie,this.camera);let J=this.WIDTH/h*(ie.x+1)/2+U.left+V,Q=-this.HEIGHT/f*(ie.y-1)/2+U.top+B;I.push({x:J,y:Q})}),a&&(I=I[0]),I}screenOffsetToModel(n,a,h){var f=n/this.WIDTH,z=a/this.HEIGHT,_=h===void 0?this.rotationGroup.position.z:h,V=this.rotationGroup.quaternion,B=new d.Vector3(0,0,_);return this.projector.projectVector(B,this.camera),B.x+=2*f,B.y-=2*z,this.projector.unprojectVector(B,this.camera),B.z=0,B.applyQuaternion(V),B}screenToModelDistance(n,a){let h=this.canvasOffset(),f=new d.Vector3(a.x,a.y,a.z);f.applyMatrix4(this.modelGroup.matrixWorld);let z=f.clone();this.projector.projectVector(f,this.camera);let _=new d.Vector3(2*(n.x-h.left)/this.WIDTH-1,2*(n.y-h.top)/-this.HEIGHT+1,f.z);return this.projector.unprojectVector(_,this.camera),_.distanceTo(z)}setViewChangeCallback(n){typeof n!="function"&&n!=null||(this.viewChangeCallback=n)}setStateChangeCallback(n){typeof n!="function"&&n!=null||(this.stateChangeCallback=n)}getConfig(){return this.config}setConfig(n){this.config=n,n.ambientOcclusion&&this.renderer.enableAmbientOcclusion(n.ambientOcclusion)}getInternalState(){var n={models:[],surfaces:[],shapes:[],labels:[]};for(let a=0;a<this.models.length;a++)this.models[a]&&(n.models[a]=this.models[a].getInternalState());return n}setInternalState(n){this.clear();var a=n.models;for(let h=0;h<a.length;h++)a[h]&&(this.models[h]=new _r(h,void 0,this),this.models[h].setInternalState(a[h]));this.render()}setZoomLimits(n,a){n!==void 0&&(this.config.lowerZoomLimit=n),a&&(this.config.upperZoomLimit=a),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(n){n.fov!==void 0&&(this.fov=n.fov,this.camera.fov=this.fov),n.z!==void 0&&(this.CAMERA_Z=n.z,this.camera.z=this.CAMERA_Z),n.orthographic!==void 0&&(this.camera.ortho=n.orthographic),this.setSlabAndFog()}_handleMouseDown(n){if(n.preventDefault(),!this.scene)return;var a=this.getX(n),h=this.getY(n);if(a===void 0)return;this.isDragging=!0,this.mouseButton=n.which,this.mouseStartX=a,this.mouseStartY=h,this.touchHold=!0,this.touchDistanceStart=0,n.targetTouches&&n.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(n)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let f=this;n.targetTouches&&n.targetTouches.length===1&&(this.longTouchTimeout=setTimeout(function(){if(f.touchHold==1){f.glDOM=f.renderer.domElement;const z=n.targetTouches[0],_=new PointerEvent("contextmenu",Object.assign(Object.assign({},n),{pageX:z.pageX,pageY:z.pageY,screenX:z.screenX,screenY:z.screenY,clientX:z.clientX,clientY:z.clientY}));f.glDOM.dispatchEvent(_)}},this.longTouchDuration))}_handleMouseUp(n){if(this.touchHold=!1,this.isDragging&&this.scene){var a=this.getX(n),h=this.getY(n);if(this.closeEnoughForClick(n)&&this.isInViewer(a,h)){let f=this.mouseXY(a,h);this.handleClickSelection(f.x,f.y,n)}}this.isDragging=!1}_handleMouseScroll(n){if(n.preventDefault(),this.scene){var a=this.getX(n),h=this.getY(n);if(a!==void 0&&(this.control_all||this.isInViewer(a,h))){var f=.85*(this.CAMERA_Z-this.rotationGroup.position.z),z=1;if(n.ctrlKey&&(z=-1),n.detail)this.rotationGroup.position.z+=z*f*n.detail/10;else if(n.wheelDelta){let _=600*n.wheelDelta/(n.wheelDelta+600);this.rotationGroup.position.z-=z*f*_/400}this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL("image/png")}apngURI(n){let a=this;return n=n||1,new Promise(function(h){let f=0,z=a.viewChangeCallback,_=[],V=[],B=Date.now();a.viewChangeCallback=function(){V.push(Date.now()-B),B=Date.now(),_.push(new Promise(I=>{a.getCanvas().toBlob(function(U){U.arrayBuffer().then(I)},"image/png")})),f+=1,f==n&&(a.viewChangeCallback=z,Promise.all(_).then(I=>{let U=[];for(let ee=0;ee<I.length;ee++){let le=(0,x.decode)(I[ee]);U.push((0,x.toRGBA8)(le)[0])}let X=a.getCanvas().width,ie=a.getCanvas().height,J=(0,x.encode)(U,X,ie,0,V),Q=new Blob([J],{type:"image/png"}),te=new FileReader;te.onload=function(ee){h(ee.target.result)},te.readAsDataURL(Q)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(n){this.hoverDuration=n}mouseXY(n,a){let h=this.canvasOffset(),f=this.renderer.getXRatio(),z=this.renderer.getYRatio(),_=this.col,V=this.row,B=_*(this.WIDTH/f),I=(z-V-1)*(this.HEIGHT/z);return{x:(n-h.left-B)/(this.WIDTH/f)*2-1,y:-(a-h.top-I)/(this.HEIGHT/z)*2+1}}_handleMouseMove(n){clearTimeout(this.hoverTimeout),n.preventDefault();let a=this.getX(n),h=this.getY(n);if(a===void 0)return;let f=this.renderer.getXRatio(),z=this.renderer.getYRatio(),_=this.mouseXY(a,h),V=this;this.current_hover!==null&&this.handleHoverContinue(_.x,_.y);var B=0;if((this.control_all||this.isInViewer(a,h))&&this.scene&&(this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){V.handleHoverSelection(_.x,_.y,n)},this.hoverDuration)),this.isDragging)){n.targetTouches&&(n.targetTouches.length>1||n.targetTouches.length===1&&!this.closeEnoughForClick(n))&&clearTimeout(this.longTouchTimeout);var I=(a-this.mouseStartX)/this.WIDTH,U=(h-this.mouseStartY)/this.HEIGHT;this.touchDistanceStart!=0&&n.targetTouches&&n.targetTouches.length==2?(B=2,U=2*(this.calcTouchDistance(n)-this.touchDistanceStart)/(this.WIDTH+this.HEIGHT)):n.targetTouches&&n.targetTouches.length==3&&(B=1),I*=f,U*=z;var X,ie=Math.hypot(I,U);if(B==3||this.mouseButton==3&&n.ctrlKey)this.slabNear=this.cslabNear+100*I,this.slabFar=this.cslabFar-100*U;else if(B==2||this.mouseButton==3||n.shiftKey)(X=.85*(this.CAMERA_Z-this.rotationGroup.position.z))<80&&(X=80),this.rotationGroup.position.z=this.cz+U*X,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(B==1||this.mouseButton==2||n.ctrlKey){var J=this.screenOffsetToModel(f*(a-this.mouseStartX),z*(h-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,J)}else if((B===0||this.mouseButton==1)&&ie!==0){var Q=Math.sin(ie*Math.PI)/ie;this.dq.x=Math.cos(ie*Math.PI),this.dq.y=0,this.dq.z=Q*I,this.dq.w=-Q*U,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}_handleContextMenu(n){if(n.preventDefault(),this.closeEnoughForClick(n)){var a=this.mouseStartX,h=this.mouseStartY,f=this.canvasOffset();let _=this.mouseXY(a,h),V=_.x,B=_.y,I=this.targetedObjects(V,B,this.contextMenuEnabledObjects);var z=null;I.length&&(z=I[0].clickable),f=this.canvasOffset(),a=this.mouseStartX-f.left,h=this.mouseStartY-f.top,this.userContextMenuHandler&&(this.userContextMenuHandler(z,a,h,I,n),this.isDragging=!1)}}setContainer(n){let a=(0,v.getElement)(n)||this.container;return this.initContainer(a),this}setBackgroundColor(n,a){(a===void 0||a<0||a>1)&&(a=1);var h=w.CC.color(n);return this.scene.fog.color=h,this.bgColor=h.getHex(),this.renderer.setClearColorHex(h.getHex(),a),this.show(),this}setProjection(n){this.camera.ortho=n==="orthographic",this.setSlabAndFog()}setViewStyle(n){if((n=n||{}).style=n.style||"",n.style.includes("outline")?this.renderer.enableOutline(n):this.renderer.disableOutline(),n.style.includes("ambientOcclusion")){var a={};n.strength&&(a.strength=n.strength),n.radius&&(a.radius=n.radius),this.renderer.enableAmbientOcclusion(a)}else this.renderer.disableAmbientOcclusion();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(n){return this.WIDTH=n||this.WIDTH,this.updateSize(),this}setHeight(n){return this.HEIGHT=n||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let n=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0){let a=!1,h=this.container.querySelector("canvas");h&&h!=this.renderer.getCanvas()?this.config.canvas=h:(h.remove(),this.config&&this.config.canvas!=null&&(delete this.config.canvas,a=!0)),this.setupRenderer(),this.initContainer(this.container),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),n=!0,a&&(this.config.canvas=this.renderer.getCanvas())}if(this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),n){let a=this.renderer.supportedExtensions();if(a.regen=!0,this.viewers)for(let h=0,f=this.viewers.length;h<f;h++)for(let z=0,_=this.viewers[h].length;z<_;z++)this.viewers[h][z].render(null,a);this._viewer.render(null,a)}else this.WIDTH>0&&this.HEIGHT>0&&this.show();return this}getModel(n){return n===void 0?this.models.length==0?null:this.models[this.models.length-1]:n instanceof _r?n:n in this.models?this.models[n]:this.models.length==0?null:this.models[this.models.length-1]}spin(n,a=1,h=!1){if(clearInterval(this.spinInterval),n===void 0&&(n="y"),typeof n=="boolean"){if(!n)return;n="y"}Array.isArray(n)&&(n={x:n[0],y:n[1],z:n[2]});var f=this;this.spinInterval=setInterval(function(){!f.getCanvas().isConnected&&f.renderer.isLost()&&clearInterval(f.spinInterval),(!h||f.container.checkVisibility&&f.container.checkVisibility())&&f.rotate(1*a,n)},25)}animateMotion(n,a,h,f,z,_){var V=Math.ceil(n/20);V<1&&(V=1),this.incAnim();var B={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(a){let X=new Array(V);for(let te=0;te<V;te++){let ee=(te+1)/V,le={mpos:B.mpos,rz:B.rz,rot:B.rot};le.mpos=h.clone().sub(B.mpos).multiplyScalar(ee).add(B.mpos),le.rz=B.rz+ee*(f-B.rz),le.rot=lr.slerp(B.rot,z,ee),le.cam=_.clone().sub(B.cam).multiplyScalar(ee).add(B.cam),X[te]=le}let ie=0,J=this,Q=function(){var te=X[ie];ie+=1,J.modelGroup.position=te.mpos,J.rotationGroup.position.z=te.rz,J.rotationGroup.quaternion=te.rot,J.camera.lookAt(te.cam),ie<X.length?setTimeout(Q,20):J.decAnim(),J.show()};setTimeout(Q,20)}else{var I={};let X=1/V;if(h&&(I.mpos=h.clone().sub(B.mpos).multiplyScalar(X)),f!==void 0&&f!=null&&(I.rz=X*(f-B.rz)),z){var U=lr.slerp(B.rot,z,X);I.rot=B.rot.clone().inverse().multiply(U)}_&&(I.cam=_.clone().sub(B.cam).multiplyScalar(X));let ie=0,J=this,Q=function(){ie+=1,I.mpos&&J.modelGroup.position.add(I.mpos),I.rz&&(J.rotationGroup.position.z+=I.rz),I.rot&&J.rotationGroup.quaternion.multiply(I.rot),I.cam&&(J.lookingAt.add(I.cam),J.camera.lookAt(J.lookingAt)),ie<V?setTimeout(Q,20):J.decAnim(),J.show()};setTimeout(Q,20)}}rotate(n,a="y",h=0,f=!1){if(a=="x"?a={x:1,y:0,z:0}:a=="y"?a={x:0,y:1,z:0}:a=="z"&&(a={x:0,y:0,z:1}),a=="vx"?a={vx:1,vy:0,vz:0}:a=="vy"?a={vx:0,vy:1,vz:0}:a=="vz"&&(a={vx:0,vy:0,vz:1}),a.vx!==void 0){var z=new d.Vector3(a.vx,a.vy,a.vz);z.applyQuaternion(this.rotationGroup.quaternion),a={x:z.x,y:z.y,z:z.z}}var _=(function(B){var I,U,X,ie=Math.sin(B/2),J=Math.cos(B/2);return I=a.x*ie,U=a.y*ie,X=a.z*ie,new d.Quaternion(I,U,X,J).normalize()})(Math.PI*n/180);if(h){var V=new d.Quaternion().copy(this.rotationGroup.quaternion).multiply(_);this.animateMotion(h,f,this.modelGroup.position,this.rotationGroup.position.z,V,this.lookingAt)}else this.rotationGroup.quaternion.multiply(_),this.show();return this}surfacesFinished(){for(var n in this.surfaces)if(!this.surfaces[n][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var n=this.modelGroup.position,a=this.rotationGroup.quaternion;return[n.x,n.y,n.z,this.rotationGroup.position.z,a.x,a.y,a.z,a.w]}setView(n,a){return n!==void 0&&(n instanceof Array||n.length!==8)&&this.modelGroup&&this.rotationGroup?(this.modelGroup.position.x=n[0],this.modelGroup.position.y=n[1],this.modelGroup.position.z=n[2],this.rotationGroup.position.z=n[3],this.rotationGroup.quaternion.x=n[4],this.rotationGroup.quaternion.y=n[5],this.rotationGroup.quaternion.z=n[6],this.rotationGroup.quaternion.w=n[7],n[8]!==void 0&&(this.rotationGroup.position.x=n[8],this.rotationGroup.position.y=n[9]),this.show(a),this):this}render(n,a){this.renderer.setViewport(),this.updateClickables();var h,f,z=this.getView();for(this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState()),a||(a=this.renderer.supportedExtensions()),h=0;h<this.models.length;h++)this.models[h]&&this.models[h].globj(this.modelGroup,a);for(h=0;h<this.shapes.length;h++)this.shapes[h]&&(this.shapes[h].frame===void 0||this.viewer_frame<0||this.shapes[h].frame<0||this.shapes[h].frame==this.viewer_frame?this.shapes[h].globj(this.modelGroup,a):this.shapes[h].removegl(this.modelGroup));for(h=0;h<this.labels.length;h++)a.regen&&(this.labels[h].dispose(),this.modelGroup.remove(this.labels[h].sprite),this.labels[h].setContext(),this.modelGroup.add(this.labels[h].sprite)),this.labels[h]&&this.labels[h].frame!==void 0&&this.labels[h].frame>=0&&(this.modelGroup.remove(this.labels[h].sprite),(this.viewer_frame<0||this.labels[h].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[h].sprite));for(h in this.surfaces)if(this.surfaces.hasOwnProperty(h)){var _=this.surfaces[h];for(f=0;f<_.length;f++)if(_.hasOwnProperty(f)){var V=_[f].geo;if(!_[f].finished||a.regen){V.verticesNeedUpdate=!0,V.elementsNeedUpdate=!0,V.normalsNeedUpdate=!0,V.colorsNeedUpdate=!0,V.buffersNeedUpdate=!0,_[f].mat.needsUpdate=!0,_[f].done&&(_[f].finished=!0),_[f].lastGL&&this.modelGroup.remove(_[f].lastGL);var B=null;if(_[f].mat instanceof u.LineBasicMaterial?B=new u.Line(V,_[f].mat):("wireframe"in _.style&&_.style.wireframe&&V.setUpWireframe(),B=new u.Mesh(V,_[f].mat)),_[f].mat.transparent&&_[f].mat.opacity==0?B.visible=!1:B.visible=!0,_[f].symmetries.length>1||_[f].symmetries.length==1&&!_[f].symmetries[0].isIdentity()){var I,U=new u.Object3D;for(I=0;I<_[f].symmetries.length;I++){var X=B.clone();X.matrix=_[f].symmetries[I],X.matrixAutoUpdate=!1,U.add(X)}_[f].lastGL=U,this.modelGroup.add(U)}else _[f].lastGL=B,this.modelGroup.add(B)}}}return this.setView(z),typeof n=="function"&&n(this),this}getModelList(n){let a=[];if(n===void 0||n.model===void 0)for(let f=0;f<this.models.length;f++)this.models[f]&&a.push(this.models[f]);else{let f=n.model;Array.isArray(f)||(f=[f]);for(let z=0;z<f.length;z++)if(typeof f[z]=="number"){var h=f[z];h<0&&(h+=this.models.length),a.push(this.models[h])}else a.push(f[z])}return a}getAtomsFromSel(n){var a=[];n===void 0&&(n={});var h=this.getModelList(n);for(let f=0;f<h.length;f++)a=a.concat(h[f].selectedAtoms(n));return a}atomIsSelected(n,a){a===void 0&&(a={});for(var h=this.getModelList(a),f=0;f<h.length;f++)if(h[f].atomIsSelected(n,a))return!0;return!1}selectedAtoms(n){return this.getAtomsFromSel(n)}getUniqueValues(n,a){a===void 0&&(a={});var h=this.getAtomsFromSel(a),f={};for(var z in h)h[z].hasOwnProperty(n)&&(f[h[z][n]]=!0);return Object.keys(f)}pdbData(n){for(var a=this.getAtomsFromSel(n),h="",f=0,z=a.length;f<z;++f)h+=a[f].pdbline+`
`;return h}zoom(n=2,a=0,h=!1){var f=(this.CAMERA_Z-this.rotationGroup.position.z)/n,z=this.CAMERA_Z-f;return a>0?this.animateMotion(a,h,this.modelGroup.position,this.adjustZoomToLimits(z),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(z),this.show()),this}translate(n,a,h=0,f=!1){var z=n/this.WIDTH,_=a/this.HEIGHT,V=new d.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(V,this.camera),V.x-=z,V.y-=_,this.projector.unprojectVector(V,this.camera),V.z=0;var B=this.lookingAt.clone().add(V);return h>0?this.animateMotion(h,f,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,B):(this.lookingAt=B,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(n,a,h=0,f=!1){var z=this.screenOffsetToModel(n,a),_=this.modelGroup.position.clone().add(z);return h>0?this.animateMotion(h,f,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=_,this.show()),this}fitSlab(n){n=n||{};var a=this.getAtomsFromSel(n),h=(0,v.getExtent)(a),f=h[1][0]-h[0][0],z=h[1][1]-h[0][1],_=h[1][2]-h[0][2],V=Math.hypot(f,z,_);return V<5&&(V=5),this.slabNear=-V/1.9,this.slabFar=V/2,this}center(n={},a=0,h=!1){var f,z,_=this.getAtomsFromSel(n),V=(0,v.getExtent)(_);(0,v.isEmptyObject)(n)?(this.shapes.forEach(le=>{if(le&&le.boundingSphere&&le.boundingSphere.center){var de=le.boundingSphere.center,fe=le.boundingSphere.radius;fe>0?(_.push(new d.Vector3(de.x+fe,de.y,de.z)),_.push(new d.Vector3(de.x-fe,de.y,de.z)),_.push(new d.Vector3(de.x,de.y+fe,de.z)),_.push(new d.Vector3(de.x,de.y-fe,de.z)),_.push(new d.Vector3(de.x,de.y,de.z+fe)),_.push(new d.Vector3(de.x,de.y,de.z-fe))):_.push(de)}}),V=(0,v.getExtent)(_),f=_,z=V):(f=this.getAtomsFromSel({}),z=(0,v.getExtent)(f));var B=new d.Vector3(V[2][0],V[2][1],V[2][2]),I=z[1][0]-z[0][0],U=z[1][1]-z[0][1],X=z[1][2]-z[0][2],ie=Math.hypot(I,U,X);ie<5&&(ie=5),this.slabNear=-ie/1.9,this.slabFar=ie/2,I=V[1][0]-V[0][0],U=V[1][1]-V[0][1],X=V[1][2]-V[0][2],(ie=Math.hypot(I,U,X))<5&&(ie=5);for(var J=25,Q=0;Q<_.length;Q++)if(_[Q]){var te=B.distanceToSquared(_[Q]);te>J&&(J=te)}ie=2*Math.sqrt(J);var ee=B.clone().multiplyScalar(-1);return a>0?this.animateMotion(a,h,ee,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=ee,this.show()),this}zoomTo(n={},a=0,h=!1){let f=this.getAtomsFromSel(n),z=(0,v.getExtent)(f),_=z;if((0,v.isEmptyObject)(n)){let de=f&&f.length;if(this.shapes.forEach(fe=>{if(fe&&fe.boundingSphere){if(fe.boundingSphere.box){let Me=fe.boundingSphere.box;f.push(new d.Vector3(Me.min.x,Me.min.y,Me.min.z)),f.push(new d.Vector3(Me.max.x,Me.max.y,Me.max.z))}else if(fe.boundingSphere.center){var Se=fe.boundingSphere.center,xe=fe.boundingSphere.radius;xe>0?(f.push(new d.Vector3(Se.x+xe,Se.y,Se.z)),f.push(new d.Vector3(Se.x-xe,Se.y,Se.z)),f.push(new d.Vector3(Se.x,Se.y+xe,Se.z)),f.push(new d.Vector3(Se.x,Se.y-xe,Se.z)),f.push(new d.Vector3(Se.x,Se.y,Se.z+xe)),f.push(new d.Vector3(Se.x,Se.y,Se.z-xe))):f.push(Se)}}}),_=(0,v.getExtent)(f),!de)for(let fe=0;fe<3;fe++)z[2][fe]=(_[0][fe]+_[1][fe])/2}else{let de=this.getAtomsFromSel({});_=(0,v.getExtent)(de)}var V=new d.Vector3(z[2][0],z[2][1],z[2][2]),B=_[1][0]-_[0][0],I=_[1][1]-_[0][1],U=_[1][2]-_[0][2],X=Math.hypot(B,I,U);X<5&&(X=5),this.slabNear=-X/1.9,this.slabFar=X/2,Object.keys(n).length===0&&(this.slabNear=Math.min(2*-X,-50),this.slabFar=Math.max(2*X,50));var ie=this.config.minimumZoomToDistance||5;B=z[1][0]-z[0][0],I=z[1][1]-z[0][1],U=z[1][2]-z[0][2],(X=Math.hypot(B,I,U))<ie&&(X=ie);for(var J=ie*ie,Q=0;Q<f.length;Q++)if(f[Q]){var te=V.distanceToSquared(f[Q]);te>J&&(J=te)}X=2*Math.sqrt(J);var ee=V.clone().multiplyScalar(-1),le=-(.5*X/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return le=this.adjustZoomToLimits(le),a>0?this.animateMotion(a,h,ee,le,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=ee,this.rotationGroup.position.z=le,this.show()),this}setSlab(n,a){this.slabNear=n,this.slabFar=a}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(n,a={},h,f=!1){if(h){var z=(0,v.getExtent)(this.getAtomsFromSel(h));a.position={x:z[2][0],y:z[2][1],z:z[2][2]}}var _=new Vt(n,a);return _.setContext(),this.modelGroup.add(_.sprite),this.labels.push(_),f||this.show(),_}addResLabels(n,a,h=!1){let f=this.labels.length;return this.applyToModels("addResLabels",n,a,h),this.show(),this.labels.slice(f)}addPropertyLabels(n,a,h){return this.applyToModels("addPropertyLabels",n,a,h),this.show(),this}removeLabel(n){for(var a=0;a<this.labels.length;a++)if(this.labels[a]==n){this.labels.splice(a,1),n.dispose(),this.modelGroup.remove(n.sprite);break}return this.show(),this}removeAllLabels(){for(var n=0;n<this.labels.length;n++)this.labels[n]&&this.labels[n].sprite&&this.modelGroup.remove(this.labels[n].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}hideAllLabels(){for(var n=0;n<this.labels.length;n++)this.labels[n]&&this.labels[n].hide();return this.show(),this}showAllLabels(){for(var n=0;n<this.labels.length;n++)this.labels[n]&&this.labels[n].show();return this.show(),this}setLabelStyle(n,a){return this.modelGroup.remove(n.sprite),n.dispose(),n.stylespec=a,n.setContext(),this.modelGroup.add(n.sprite),this.show(),n}setLabelText(n,a){return this.modelGroup.remove(n.sprite),n.dispose(),n.text=a,n.setContext(),this.modelGroup.add(n.sprite),this.show(),n}addShape(n){var a=new $e(n=n||{});return a.shapePosition=this.shapes.length,this.shapes.push(a),a}removeShape(n){if(!n)return this;for(n.removegl(this.modelGroup),delete this.shapes[n.shapePosition];this.shapes.length>0&&this.shapes[this.shapes.length-1]===void 0;)this.shapes.pop();return this}removeAllShapes(){for(var n=0;n<this.shapes.length;n++){var a=this.shapes[n];a&&a.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(n){if(n.hasOwnProperty("x")&&n.hasOwnProperty("y")&&n.hasOwnProperty("z"))return n;var a=this.getAtomsFromSel(n);if(a.length==0)return{x:0,y:0,z:0};var h=(0,v.getExtent)(a);return{x:h[0][0]+(h[1][0]-h[0][0])/2,y:h[0][1]+(h[1][1]-h[0][1])/2,z:h[0][2]+(h[1][2]-h[0][2])/2}}addSphere(n){(n=n||{}).center=this.getSelectionCenter(n.center);var a=new $e(n);return a.shapePosition=this.shapes.length,a.addSphere(n),this.shapes.push(a),a.finalize(),a}addBox(n={}){n.corner!=null&&(n.corner=this.getSelectionCenter(n.corner)),n.center!=null&&(n.center=this.getSelectionCenter(n.center));var a=new $e(n);return a.shapePosition=this.shapes.length,a.addBox(n),this.shapes.push(a),a.finalize(),a}addArrow(n={}){n.start=this.getSelectionCenter(n.start),n.end=this.getSelectionCenter(n.end);var a=new $e(n);return a.shapePosition=this.shapes.length,a.addArrow(n),this.shapes.push(a),a.finalize(),a}addCylinder(n={}){n.start=this.getSelectionCenter(n.start),n.end=this.getSelectionCenter(n.end);var a=new $e(n);return a.shapePosition=this.shapes.length,n.dashed?a.addDashedCylinder(n):a.addCylinder(n),this.shapes.push(a),a.finalize(),a}addCurve(n={}){var a=new $e(n);return a.shapePosition=this.shapes.length,a.addCurve(n),this.shapes.push(a),a.finalize(),a}addLine(n={}){n.start=this.getSelectionCenter(n.start),n.end=this.getSelectionCenter(n.end),n.wireframe=!0;var a=new $e(n);return a.shapePosition=this.shapes.length,n.dashed?a=this.addLineDashed(n,a):a.addLine(n),this.shapes.push(a),a.finalize(),a}addUnitCell(n,a){n=this.getModel(n),(a=a||{alabel:"a",blabel:"b",clabel:"c"}).box=a.box||{},a.astyle=a.astyle||{color:"red",radius:.1,midpos:-1},a.bstyle=a.bstyle||{color:"green",radius:.1,midpos:-1},a.cstyle=a.cstyle||{color:"blue",radius:.1,midpos:-1},a.alabelstyle=a.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1},a.blabelstyle=a.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1},a.clabelstyle=a.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1},n.unitCellObjects&&this.removeUnitCell(n),n.unitCellObjects={shapes:[],labels:[]};var h=n.getCrystData(),f=null;if(h){if(h.matrix)f=h.matrix;else{var z,_,V,B=h.a,I=h.b,U=h.c,X=h.alpha,ie=h.beta,J=h.gamma;X=X*Math.PI/180,ie=ie*Math.PI/180,J=J*Math.PI/180,z=Math.cos(ie),_=(Math.cos(X)-Math.cos(ie)*Math.cos(J))/Math.sin(J),V=Math.sqrt(Math.max(0,1-z*z-_*_)),f=new d.Matrix3(B,I*Math.cos(J),U*z,0,I*Math.sin(J),U*_,0,0,U*V)}var Q=[new d.Vector3(0,0,0),new d.Vector3(1,0,0),new d.Vector3(0,1,0),new d.Vector3(0,0,1),new d.Vector3(1,1,0),new d.Vector3(0,1,1),new d.Vector3(1,0,1),new d.Vector3(1,1,1)];if(h.matrix4)for(let ee=0;ee<Q.length;ee++)h.size&&Q[ee].multiplyVectors(Q[ee],h.size),Q[ee]=Q[ee].applyMatrix4(h.matrix4);else for(let ee=0;ee<Q.length;ee++)Q[ee]=Q[ee].applyMatrix3(f);if(a.box&&!a.box.hidden){a.box.wireframe=!0;var te=new $e(a.box);te.shapePosition=this.shapes.length,te.addLine({start:Q[0],end:Q[1]}),te.addLine({start:Q[0],end:Q[2]}),te.addLine({start:Q[1],end:Q[4]}),te.addLine({start:Q[2],end:Q[4]}),te.addLine({start:Q[0],end:Q[3]}),te.addLine({start:Q[3],end:Q[5]}),te.addLine({start:Q[2],end:Q[5]}),te.addLine({start:Q[1],end:Q[6]}),te.addLine({start:Q[4],end:Q[7]}),te.addLine({start:Q[6],end:Q[7]}),te.addLine({start:Q[3],end:Q[6]}),te.addLine({start:Q[5],end:Q[7]}),this.shapes.push(te),n.unitCellObjects.shapes.push(te),te.finalize()}if(!a.astyle.hidden){a.astyle.start=Q[0],a.astyle.end=Q[1];let ee=this.addArrow(a.astyle);n.unitCellObjects.shapes.push(ee)}if(!a.bstyle.hidden){a.bstyle.start=Q[0],a.bstyle.end=Q[2];let ee=this.addArrow(a.bstyle);n.unitCellObjects.shapes.push(ee)}if(!a.cstyle.hidden){a.cstyle.start=Q[0],a.cstyle.end=Q[3];let ee=this.addArrow(a.cstyle);n.unitCellObjects.shapes.push(ee)}if(a.alabel){a.alabelstyle.position=Q[1];let ee=this.addLabel(a.alabel,a.alabelstyle);n.unitCellObjects.labels.push(ee)}if(a.blabel){a.blabelstyle.position=Q[2];let ee=this.addLabel(a.blabel,a.blabelstyle);n.unitCellObjects.labels.push(ee)}if(a.clabel){a.clabelstyle.position=Q[3];let ee=this.addLabel(a.clabel,a.clabelstyle);n.unitCellObjects.labels.push(ee)}}}removeUnitCell(n){if((n=this.getModel(n)).unitCellObjects){let a=this;n.unitCellObjects.shapes.forEach(function(h){a.removeShape(h)}),n.unitCellObjects.labels.forEach(function(h){a.removeLabel(h)})}delete n.unitCellObjects}replicateUnitCell(n=3,a=n,h=a,f,z,_){let V=(f=this.getModel(f)).getCrystData();if(V){const B=f.selectedAtoms({}),I=V.matrix;let U=function(ie){return ie%2==0?-ie/2:Math.ceil(ie/2)};n<=1&&a<=1&&h<=1&&(_=!0,n=a=h=3);let X=function(ie,J,Q){return!1};if(_){const ie=new d.Matrix3().getInverse3(I);X=function(J,Q,te){let ee=new d.Vector3(J,Q,te).applyMatrix3(ie);return!(ee.x>-1e-4&&ee.x<1.0001&&ee.y>-1e-4&&ee.y<1.0001&&ee.z>-1e-4&&ee.z<1.0001)}}for(let ie=0;ie<n;ie++)for(let J=0;J<a;J++)for(let Q=0;Q<h;Q++){if(ie==0&&J==0&&Q==0)continue;let te=new d.Vector3(U(ie),U(J),U(Q));te.applyMatrix3(I);let ee=[];for(let le=0;le<B.length;le++){let de=B[le].x+te.x,fe=B[le].y+te.y,Se=B[le].z+te.z;if(X(de,fe,Se))continue;let xe={};for(let Me in B[le])xe[Me]=B[le][Me];xe.x=de,xe.y=fe,xe.z=Se,ee.push(xe)}f.addAtoms(ee)}z&&f.assignBonds()}}addLineDashed(n,a){var h,f;n.dashLength=n.dashLength||.5,n.gapLength=n.gapLength||.5,h=n.start?new d.Vector3(n.start.x||0,n.start.y||0,n.start.z||0):new d.Vector3(0,0,0),f=n.end?new d.Vector3(n.end.x,n.end.y||0,n.end.z||0):new d.Vector3(0,0,0);var z,_,V,B=new d.Vector3,I=new d.Vector3,U=new d.Vector3,X=h.clone(),ie=0;for(B.subVectors(f,h),z=B.length(),B.normalize(),I=B.clone(),U=B.clone(),I.multiplyScalar(n.dashLength),U.multiplyScalar(n.gapLength),_=I.length(),V=U.length();ie<z;){if(ie+_>z){n.start=h,n.end=f,a.addLine(n);break}X.addVectors(h,I),n.start=h,n.end=X,a.addLine(n),h=X.clone(),ie+=_,X.addVectors(h,U),h=X.clone(),ie+=V}return a.finalize(),a}addCustom(n){var a=new $e(n=n||{});return a.shapePosition=this.shapes.length,a.addCustom(n),this.shapes.push(a),a.finalize(),a}addVolumetricData(n,a,h={}){var f=new Qe.VolumeData(n,a);return h.hasOwnProperty("transferfn")?this.addVolumetricRender(f,h):this.addIsosurface(f,h)}addIsosurface(n,a={},h){var f=new $e(a);return f.shapePosition=this.shapes.length,f.addIsosurface(n,a,h,this),this.shapes.push(f),f}addVolumetricRender(n,a){var h=new Ut(n,a=a||{},this);return h.shapePosition=this.shapes.length,this.shapes.push(h),h}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(n){if(n){this.scene.fog=new u.Fog(this.bgColor,100,200),this.config.disableFog=!1;const a=n;a.fogStart==null?this.fogStart=.4:this.fogStart=a.fogStart,a.fogEnd==null?this.fogEnd=1:this.fogEnd=a.fogEnd}else this.config.disableFog=!0,this.show()}setFrame(n){this.viewer_frame=n;let a=this;return new Promise(function(h){var f=a.models.map(function(z){return z.setFrame(n)});Promise.all(f).then(function(){h()})})}getFrame(){return this.viewer_frame}getNumFrames(){var n=0;for(let a=0;a<this.models.length;a++)this.models[a].getNumFrames()>n&&(n=this.models[a].getNumFrames());for(let a=0;a<this.shapes.length;a++)this.shapes[a].frame&&this.shapes[a].frame>=n&&(n=this.shapes[a].frame+1);for(let a=0;a<this.labels.length;a++)this.labels[a].frame&&this.labels[a].frame>=n&&(n=this.labels[a].frame+1);return n}getNextModelId(){return this.models.length}animate(n){this.incAnim();var a=100,h="forward",f=1/0;(n=n||{}).interval&&(a=n.interval),n.loop&&(h=n.loop),n.reps&&(f=n.reps);var z=this.getNumFrames(),_=this,V=0;n.startFrame&&(V=n.startFrame%z);var B=1;n.step&&(f/=B=n.step);var I,U,X=0,ie=z*f,J=new Date,Q=function(te){J=new Date,te=="forward"?_.setFrame(V).then(function(){V=(V+B)%z,I()}):te=="backward"?_.setFrame(z-1-V).then(function(){V=(V+B)%z,I()}):_.setFrame(V).then(function(){B*=(V+=B)%(z-1)==0?-1:1,I()})};return I=function(){if(_.render(),_.getCanvas().isConnected)if(++X>=ie||!_.isAnimated())U.cancel(),_.animationTimers.delete(U),_.decAnim();else{var te=a-(new Date().getTime()-J.getTime());te=te>0?te:0,U.cancel(),_.animationTimers.delete(U),U=new v.PausableTimer(Q,te,h),_.animationTimers.add(U)}else _.stopAnimate()},U=new v.PausableTimer(Q,0,h),this.animationTimers.add(U),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(n){n.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(n){n.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(n){n.resume()}),this}isAnimated(){return this.animated>0}getModelOpt(n){return n&&!n.defaultcolors?(n.defaultcolors=this.defaultcolors,n.cartoonQuality=n.cartoonQuality||this.config.cartoonQuality):n===void 0&&(n={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality}),n}addModel(n,a="",h){h=this.getModelOpt(h);var f=new _r(this.models.length,h,this);return f.addMolData(n,a,h),this.models.push(f),f}addModels(n,a,h){(h=this.getModelOpt(h)).multimodel=!0,h.frames=!0;for(var f=_r.parseMolData(n,a,h),z=0;z<f.length;z++){var _=new _r(this.models.length,h,this);_.setAtomDefaults(f[z]),_.addFrame(f[z]),_.setFrame(0),f.modelData&&_.setModelData(f.modelData[z]),_.setDontDuplicateAtoms(!h.duplicateAssemblyAtoms),this.models.push(_)}return this.models}addModelsAsFrames(n,a,h){(h=this.getModelOpt(h)).multimodel=!0,h.frames=!0;var f=new _r(this.models.length,h,this);return f.addMolData(n,a,h),this.models.push(f),f}addAsOneMolecule(n,a,h){(h=this.getModelOpt(h)).multimodel=!0,h.onemol=!0;var f=new _r(this.models.length,h,this);return f.addMolData(n,a,h),this.models.push(f),f}removeModel(n){if(n=this.getModel(n)){for(n.removegl(this.modelGroup),delete this.models[n.getID()];this.models.length>0&&this.models[this.models.length-1]===void 0;)this.models.pop();return this}}removeAllModels(){for(var n=0;n<this.models.length;n++){var a=this.models[n];a&&a.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(n,a){var h={};return h.m=a===void 0?this.models.map(function(f){return f.toCDObject(n)}):[this.models[a].toCDObject()],JSON.stringify(h)}exportVRML(){var n=this.modelGroup;this.applyToModels("removegl",this.modelGroup),this.modelGroup=new u.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var a=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels("removegl",this.modelGroup),this.modelGroup=n,a}createModelFrom(n,a=!1){for(var h=new _r(this.models.length,this.defaultcolors,this),f=0;f<this.models.length;f++)if(this.models[f]){var z=this.models[f].selectedAtoms(n);h.addAtoms(z),a&&this.models[f].removeAtoms(z)}return this.models.push(h),h}applyToModels(n,a,h,f,z,_,V){for(var B=this.getModelList(a),I=0;I<B.length;I++)B[I][n](a,h,f,z,_,V)}setStyle(n,a){return a===void 0&&(a=n,n={}),this.applyToModels("setStyle",n,a,!1),this}addStyle(n,a){return a===void 0&&(a=n,n={}),this.applyToModels("setStyle",n,a,!0),this}setClickable(n,a,h){return this.applyToModels("setClickable",n,a,h),this}setHoverable(n,a,h,f){return this.applyToModels("setHoverable",n,a,h,f),this}enableContextMenu(n,a){return this.applyToModels("enableContextMenu",n,a),this}vibrate(n,a,h,f){return this.applyToModels("vibrate",n,a,h,f),this}setColorByProperty(n,a,h,f){return this.applyToModels("setColorByProperty",n,a,h,f),this}setColorByElement(n,a){return this.applyToModels("setColorByElement",n,a),this}static getAtomsWithin(n,a){var h=[];for(let z=0;z<n.length;z++){var f=n[z];f!==void 0&&(f.x<a[0][0]||f.x>a[1][0]||f.y<a[0][1]||f.y>a[1][1]||f.z<a[0][2]||f.z>a[1][2]||h.push(f))}return h}static volume(n){return(n[1][0]-n[0][0])*(n[1][1]-n[0][1])*(n[1][2]-n[0][2])}carveUpExtent(n,a,h){let f=[],z={};for(let U=0,X=a.length;U<X;U++)z[a[U].index]=U;let _=function(U){let X=[];for(let ie=0,J=U.length;ie<J;ie++)U[ie].index in z&&X.push(z[U[ie].index]);return X},V=function(U){let X=[];return X[0]=[U[0][0],U[0][1],U[0][2]],X[1]=[U[1][0],U[1][1],U[1][2]],X},B=function(U){if(lr.volume(U)<lr.maxVolume)return[U];var X,ie=U[1][0]-U[0][0],J=U[1][1]-U[0][1],Q=U[1][2]-U[0][2];X=ie>J&&ie>Q?0:J>ie&&J>Q?1:2;var te=V(U),ee=V(U),le=(U[1][X]-U[0][X])/2+U[0][X];te[1][X]=le,ee[0][X]=le;var de=B(te),fe=B(ee);return de.concat(fe)},I=B(n);for(let U=0,X=I.length;U<X;U++){let ie=V(I[U]);ie[0][0]-=6,ie[0][1]-=6,ie[0][2]-=6,ie[1][0]+=6,ie[1][1]+=6,ie[1][2]+=6;let J=lr.getAtomsWithin(a,ie),Q=lr.getAtomsWithin(h,I[U]);f.push({extent:I[U],atoms:_(J),toshow:_(Q)})}return f}static generateSurfaceMesh(n,a,h){var f=new u.Geometry(!0),z=f.updateGeoGroup(0),_=[];for(let je=0,De=n.length;je<De;je++){var V=n[je];V&&(V.surfaceColor!==void 0?_[je]=V.surfaceColor:V.color&&(_[je]=w.CC.color(V.color)))}var B=z.vertexArray,I=a.vertices;for(let je=0,De=I.length;je<De;je++){let Je=3*z.vertices;B[Je]=I[je].x,B[Je+1]=I[je].y,B[Je+2]=I[je].z,z.vertices++}var U=z.colorArray;let X=z.atomArray;if(h.voldata&&h.volscheme){var ie=h.volscheme,J=h.voldata,Q=ie.range()||[-1,1];for(let je=0,De=I.length;je<De;je++){let Je=I[je].atomid,ct=J.getVal(I[je].x,I[je].y,I[je].z),dt=w.CC.color(ie.valueToHex(ct,Q)),lt=3*je;U[lt]=dt.r,U[lt+1]=dt.g,U[lt+2]=dt.b,X[je]=n[Je]}}else if(_.length>0)for(let je=0,De=I.length;je<De;je++){let Je=I[je].atomid,ct=3*je;U[ct]=_[Je].r,U[ct+1]=_[Je].g,U[ct+2]=_[Je].b,X[je]=n[Je]}var te=a.faces;z.faceidx=te.length,f.initTypedArrays();var ee,le,de,fe,Se=z.vertexArray,xe=z.normalArray;for(let je=0,De=te.length;je<De;je+=3){var Me=3*te[je],Be=3*te[je+1],Ne=3*te[je+2];ee=new d.Vector3(Se[Me],Se[Me+1],Se[Me+2]),le=new d.Vector3(Se[Be],Se[Be+1],Se[Be+2]),(de=new d.Vector3(Se[Ne],Se[Ne+1],Se[Ne+2])).subVectors(de,le),ee.subVectors(ee,le),de.cross(ee),(fe=de).normalize(),xe[Me]+=fe.x,xe[Be]+=fe.x,xe[Ne]+=fe.x,xe[Me+1]+=fe.y,xe[Be+1]+=fe.y,xe[Ne+1]+=fe.y,xe[Me+2]+=fe.z,xe[Be+2]+=fe.z,xe[Ne+2]+=fe.z}return z.faceArray=new Uint16Array(te),new u.Mesh(f,h)}static generateMeshSyncHelper(n,a,h,f,z,_){var V=new Pe;return V.initparm(a,n!==1,_),V.fillvoxels(z,h),V.buildboundary(),n!=ei.SES&&n!=ei.MS||(V.fastdistancemap(),V.boundingatom(!1),V.fillvoxelswaals(z,h)),V.marchingcube(n),V.getFacesAndVertices(f)}static getMatWithStyle(n){let a=null;for(var h in a=n.onesided?new u.MeshLambertMaterial:new u.MeshDoubleLambertMaterial,a.vertexColors=u.Coloring.VertexColors,n)h==="color"||h==="map"||n.hasOwnProperty(h)&&(a[h]=n[h]);return n.opacity!==void 0&&(n.opacity===1?a.transparent=!1:a.transparent=!0),n.wireframe!==void 0&&(a.wireframe=n.wireframe),a}addMesh(n){let a={geo:n.geometry,mat:n.material,done:!0,finished:!1};var h=this.nextSurfID();return this.surfaces[h]=new Tr([a]),h}static shallowCopy(n){var a=[];let h=n.length;for(let f=0;f<h;f++)a[f]=(0,v.extend)({},n[f]);return a}addSurface(n,a={},h={},f,z,_){let V=this.nextSurfID(),B=null,I=this,U=ei.VDW;typeof n=="string"?lr.surfaceTypeMap[n.toUpperCase()]!==void 0?U=lr.surfaceTypeMap[n]:console.log("Surface type : "+n+" is not recognized"):typeof n=="number"&&(U=n);var X=null,ie=null,J=lr.shallowCopy(this.getAtomsFromSel(h));X=f?lr.shallowCopy(this.getAtomsFromSel(f)):J,(0,v.adjustVolumeStyle)(a);var Q,te=!1;for(Q=0;Q<this.models.length;Q++)if(this.models[Q]){var ee=this.models[Q].getSymmetries();if(ee.length>1||ee.length==1&&!ee[0].isIdentity()){te=!0;break}}var le=function(Be,Ne,je){var De;ie=z?lr.shallowCopy(I.getAtomsFromSel(z)):je;var Je=(0,v.getExtent)(je,!0);if(a.map&&a.map.prop){var ct=a.map.prop;let gt=(0,C.getGradient)(a.map.scheme||a.map.gradient||new C.Gradient.RWB),Dt=gt.range();Dt||(Dt=(0,v.getPropertyRange)(je,ct)),a.colorscheme={prop:ct,gradient:gt}}for(let gt=0,Dt=Ne.length;gt<Dt;gt++)(De=Ne[gt]).surfaceColor=(0,v.getColorFromStyle)(De,a);var dt=lr.volume(Je),lt=I.carveUpExtent(Je,Ne,je);if(ie&&ie.length&&ie.length>0){var _t=(0,v.getExtent)(ie,!0);lt.sort(function(gt,Dt){var Lt=function(pt,Bt){var tr=pt.extent,jt=tr[1][0]-tr[0][0],wt=tr[1][1]-tr[0][1],cr=tr[1][2]-tr[0][2],qt=jt-Bt[2][0];qt*=qt;var ar=wt-Bt[2][1];ar*=ar;var Qt=cr-Bt[2][2];return qt+ar+(Qt*=Qt)};return Lt(gt,_t)-Lt(Dt,_t)})}var Et=[];for(let gt=0,Dt=Ne.length;gt<Dt;gt++)De=Ne[gt],Et[gt]={x:De.x,y:De.y,z:De.z,serial:gt,elem:De.elem};var ut=!!si;if(typeof $3Dmol<"u"&&$3Dmol.SurfaceWorker!==void 0||(console.log("$3Dmol.SurfaceWorker is not defined, using synchronous surface generation."),ut=!0),ut){var Ct=function(gt){return new Promise(function(Dt){for(var Lt=lr.generateMeshSyncHelper(U,lt[gt].extent,lt[gt].atoms,lt[gt].toshow,Et,dt),pt=Mt({vertexArr:Lt.vertices,faceArr:Lt.faces}),Bt=0,tr=pt.length;Bt<tr;Bt++){Lt={vertices:pt[Bt].vertexArr,faces:pt[Bt].faceArr};var jt=lr.generateSurfaceMesh(Ne,Lt,B);(0,v.mergeGeos)(Be.geo,jt)}I.render(),Dt()})},Ye=[];for(let gt=0;gt<lt.length;gt++)Ye.push(Ct(gt));return Promise.all(Ye).then(function(){return Be.done=!0,I.render(),Promise.resolve(V)})}var ht=[];U<0&&(U=0);for(let gt=0,Dt=lr.numWorkers;gt<Dt;gt++){var Ot=new Worker($3Dmol.SurfaceWorker);ht.push(Ot),Ot.postMessage({type:-1,atoms:Et,volume:dt})}return new Promise(function(gt,Dt){var Lt=0,pt=function(){ht&&ht.length&&ht.forEach(function(wt){wt&&wt.terminate&&wt.terminate()})},Bt=function(wt){for(var cr=Mt({vertexArr:wt.data.vertices,faceArr:wt.data.faces}),qt=0,ar=cr.length;qt<ar;qt++){var Qt={vertices:cr[qt].vertexArr,faces:cr[qt].faceArr},nr=lr.generateSurfaceMesh(Ne,Qt,B);(0,v.mergeGeos)(Be.geo,nr)}I.render(),++Lt==lt.length&&(Be.done=!0,pt(),gt(V))},tr=function(wt){pt(),console.log(wt.message+" ("+wt.filename+":"+wt.lineno+")"),Dt(wt)};for(let wt=0;wt<lt.length;wt++){var jt=ht[wt%ht.length];jt.onmessage=Bt,jt.onerror=tr,jt.postMessage({type:U,expandedExtent:lt[wt].extent,extendedAtoms:lt[wt].atoms,atomsToShow:lt[wt].toshow})}})};a=a||{},B=lr.getMatWithStyle(a);let de=new Tr([]);de.style=a,de.atomsel=h,de.allsel=f,de.focus=z;var fe=null;if(te){var Se={},xe={};for(Q=0;Q<this.models.length;Q++)Se[Q]=[],xe[Q]=[];for(Q=0;Q<X.length;Q++)Se[X[Q].model].push(X[Q]);for(Q=0;Q<J.length;Q++)xe[J[Q].model].push(J[Q]);var Me=[];for(Q=0;Q<this.models.length;Q++)xe[Q].length>0&&(de.push({geo:new u.Geometry(!0),mat:B,done:!1,finished:!1,symmetries:this.models[Q].getSymmetries()}),Me.push(le(de[de.length-1],Se[Q],xe[Q])));fe=Promise.all(Me)}else de.push({geo:new u.Geometry(!0),mat:B,done:!1,finished:!1,symmetries:[new d.Matrix4]}),fe=le(de[de.length-1],X,J);return this.surfaces[V]=de,fe.surfid=V,_&&typeof _=="function"?(fe.then(function(Be){_(Be)}),V):fe}setSurfaceMaterialStyle(n,a){if((0,v.adjustVolumeStyle)(a),this.surfaces[n]){var h=this.surfaces[n];for(let z=0;z<h.length;z++){var f=h[z].mat=lr.getMatWithStyle(a);if(h[z].mat.side=u.FrontSide,a.wireframe&&h[z].geo.setUpWireframe(),a.color){h[z].mat.color=w.CC.color(a.color),h[z].geo.colorsNeedUpdate=!0;const _=w.CC.color(a.color);h[z].geo.setColor(_)}else if(f.voldata&&f.volscheme){const _=f.volscheme,V=f.voldata,B=w.CC,I=_.range()||[-1,1];h[z].geo.setColors(function(U,X,ie){let J=V.getVal(U,X,ie);return B.color(_.valueToHex(J,I))})}else{h[z].geo.colorsNeedUpdate=!0;for(let _ of h[z].geo.geometryGroups)for(let V=0;V<_.vertices;V++){let B=(0,v.getColorFromStyle)(_.atomArray[V],a),I=3*V;_.colorArray[I]=B.r,_.colorArray[I+1]=B.g,_.colorArray[I+2]=B.b}}h[z].finished=!1}}return this}getSurface(n){return this.surfaces[n]}removeSurface(n){for(var a=this.surfaces[n],h=0;h<a.length;h++)a[h]&&a[h].lastGL&&(a[h].geo!==void 0&&a[h].geo.dispose(),a[h].mat!==void 0&&a[h].mat.dispose(),this.modelGroup.remove(a[h].lastGL));return delete this.surfaces[n],this.show(),this}removeAllSurfaces(){for(var n in this.surfaces)if(this.surfaces.hasOwnProperty(n)){for(var a=this.surfaces[n],h=0;h<a.length;h++)a[h]&&a[h].lastGL&&(a[h].geo!==void 0&&a[h].geo.dispose(),a[h].mat!==void 0&&a[h].mat.dispose(),this.modelGroup.remove(a[h].lastGL));delete this.surfaces[n]}return this.show(),this}jmolMoveTo(){var n=this.modelGroup.position,a="center { "+-n.x+" "+-n.y+" "+-n.z+" }; ",h=this.rotationGroup.quaternion;return a+="moveto .5 quaternion { "+h.x+" "+h.y+" "+h.z+" "+h.w+" };"}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(n,a){a=a||{};var h=this.getAtomsFromSel(a);if(typeof n=="function")for(let _=0,V=h.length;_<V;_++)n(h[_]);else for(let _=0,V=h.length;_<V;_++){var f=h[_];for(let B=0,I=n.length;B<I;B++){let U=n[B];if(U.props)for(var z in U.props)U.props.hasOwnProperty(z)&&this.atomIsSelected(f,U)&&(f.properties||(f.properties={}),f.properties[z]=U.props[z])}}return this}linkViewer(n){return this.linkedViewers.push(n),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(n){this.rotationGroup.position.z=this.CAMERA_Z-n}setAutoEyeSeparation(n,a){var h=this.getPerceivedDistance();return a||(a=5),n||this.camera.position.x>0?this.camera.position.x=h*Math.tan(Math.PI/180*a):this.camera.position.x=-h*Math.tan(Math.PI/180*a),this.camera.lookAt(new d.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(n){this.config.cartoonQuality=n}}function zr(ye,n){if(ye=(0,v.getElement)(ye)){n=n||{};try{return new lr(ye,n)}catch(a){throw"error creating viewer: "+a}}}function Fr(ye,n={},a={}){if(ye=(0,v.getElement)(ye)){var h=[],f=document.createElement("canvas");a.rows=n.rows,a.cols=n.cols,a.control_all=n.control_all!=null&&n.control_all,ye.appendChild(f);try{for(var z=0;z<n.rows;z++){for(var _=[],V=0;V<n.cols;V++){a.row=z,a.col=V,a.canvas=f,a.viewers=h,a.control_all=n.control_all;var B=zr(ye,(0,v.extend)({},a));_.push(B)}h.unshift(_)}}catch(I){throw"error creating viewer grid: "+I}return h}}function Jr(ye){var n=this;if(ye=(0,v.getElement)(ye)){var a=Fr(ye,{rows:1,cols:2,control_all:!0});this.glviewer1=a[0][0],this.glviewer2=a[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var h=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function(z){return typeof n.glviewer1[z]=="function"}),f=0;f<h.length;f++)this[h[f]]=(function(z){return function(){return[this.glviewer1[z].apply(this.glviewer1,arguments),this.glviewer2[z].apply(this.glviewer2,arguments)]}})(h[f]);this.setCoordinates=function(z,_,V){for(var B=0;B<z.length;B++)z[B].setCoordinates(_,V)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(z){this.glviewer1.render(),this.glviewer2.render(),z&&z(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}lr.numWorkers=4,lr.maxVolume=64e3,lr.surfaceTypeMap={VDW:ei.VDW,MS:ei.MS,SAS:ei.SAS,SES:ei.SES};var kr=!1,Xr=!1,Dr={};function Vi(ye,n){var a,h,f;if(document.querySelector(".viewer_3Dmoljs")!=null&&(kr=!0),kr){Xr=!0,ye=ye??null;var z=0;document.querySelectorAll(".viewer_3Dmoljs").forEach(_=>{var V=[],B=[],I="";_.style.position=="static"&&(_.style.position="relative");var U=null;if(f=null,_.dataset.pdb)V.push("https://files.rcsb.org/view/"+_.dataset.pdb+".pdb"),B.push("pdb");else if(_.dataset.cid)B.push("sdf"),V.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+_.dataset.cid+"/SDF?record_type=3d");else if(_.dataset.href||_.dataset.url){if(I=_.dataset.href?_.dataset.href:_.dataset.url,V.push(I),(f=I.substring(I.lastIndexOf(".")+1))=="gz"){let gt=I.substring(0,I.lastIndexOf(".")).lastIndexOf(".");f=I.substring(gt+1)}B.push(f);var X=I.substring(I.lastIndexOf("/")+1,I.lastIndexOf("."));X=="/"&&(X=I.substring(I.lastIndexOf("/")+1)),_.dataset[B[B.length-1]]=X}let ie=_.dataset;for(a in ie)a.substring(0,3)==="pdb"&&a!=="pdb"?(V.push("https://files.rcsb.org/view/"+ie[a]+".pdb"),B.push("pdb")):a.substring(0,4)==="href"&&a!=="href"?(I=ie[a],V.push(I),B.push(I.substring(I.lastIndexOf(".")+1))):a.substring(0,3)==="cid"&&a!=="cid"&&(V.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+ie[a]+"/SDF?record_type=3d"),B.push("sdf"));var J={};_.dataset.options&&(J=(0,v.specStringToObject)(_.dataset.options));var Q=w.CC.color(_.dataset.backgroundcolor),te=_.dataset.backgroundalpha;te=te==null?1:parseFloat(te);var ee={line:{}};_.dataset.style&&(ee=(0,v.specStringToObject)(_.dataset.style));var le={};_.dataset.select&&(le=(0,v.specStringToObject)(_.dataset.select));var de=[],fe=[],Se=[],xe={},Me=null,Be=_.dataset,Ne=/style(.+)/,je=/surface(.*)/,De=/labelres(.*)/,Je=[];for(h in Be)Object.prototype.hasOwnProperty.call(Be,h)&&Je.push(h);for(Je.sort(),a=0;a<Je.length;a++){h=Je[a];var ct,dt,lt,_t=Ne.exec(h);_t&&(ct="select"+_t[1],dt=(0,v.specStringToObject)(Be[ct]),lt=(0,v.specStringToObject)(Be[h]),de.push([dt,lt])),(_t=je.exec(h))&&(ct="select"+_t[1],dt=(0,v.specStringToObject)(Be[ct]),lt=(0,v.specStringToObject)(Be[h]),fe.push([dt,lt])),(_t=De.exec(h))&&(ct="select"+_t[1],dt=(0,v.specStringToObject)(Be[ct]),lt=(0,v.specStringToObject)(Be[h]),Se.push([dt,lt])),h=="zoomto"&&(xe=(0,v.specStringToObject)(Be[h])),h=="spin"&&(Me=(0,v.specStringToObject)(Be[h]))}var Et=function(gt){for(gt.setStyle(le,ee),U&&U.createSelectionAndStyle(le,ee),a=0;a<de.length;a++){let Dt=de[a][0]||{},Lt=de[a][1]||{line:{}};gt.setStyle(Dt,Lt),U&&U.createSelectionAndStyle(le,ee)}for(a=0;a<fe.length;a++){let Dt=fe[a][0]||{},Lt=fe[a][1]||{};U?gt.addSurface(ei.VDW,Lt,Dt,Dt).then(pt=>{U.loadSurface("VDW",Dt,Lt,pt)}):gt.addSurface(ei.VDW,Lt,Dt,Dt)}for(a=0;a<Se.length;a++){let Dt=Se[a][0]||{},Lt=Se[a][1]||{};gt.addResLabels(Dt,Lt)}gt.render(),gt.zoomTo(xe),Me&&gt.spin(Me.axis,Me.speed)};let ut=ye;try{var Ct=(0,v.specStringToObject)(_.dataset.config)||{};Ct.backgroundColor===void 0&&(Ct.backgroundColor=Q),Ct.backgroundAlpha===void 0&&(Ct.backgroundAlpha=te),ut==null?ut=Dr[_.id||z++]=zr(_,Ct):(ut.setBackgroundColor(Q,te),ut.setConfig(Ct),U&&U.initiateUI()),_.dataset.ui&&$3Dmol.StateManager&&(U=new $3Dmol.StateManager(ut))}catch(gt){console.log(gt),_.textContent="WebGL appears to be disabled."}if(V.length!=0){let gt=0,Dt=((Lt,pt)=>function(Bt){I=V[gt];var tr=Lt.dataset.type||Lt.dataset.datatype||B[gt];if(pt.addModel(Bt,tr,J),U){var jt=Lt.dataset[B[gt]];U.setModelTitle(jt)}gt+=1,gt<V.length?(0,v.get)(V[gt]).then(Dt):(Et(pt),Lt.dataset.callback&&(0,v.makeFunction)(Lt.dataset.callback)(pt),Xr=!1,n&&n(pt))})(_,ut);f&&f.endsWith("gz")?(0,v.getbin)(V[0]).then(Dt):(0,v.get)(V[0]).then(Dt)}else{if(_.dataset.element){var Ye="#"+_.dataset.element,ht=document.querySelector(Ye),Ot=ht?ht.textContent:"";f=_.dataset.type||_.dataset.datatype,ut.addModel(Ot,f,J)}Et(ut),_.dataset.callback&&(0,v.makeFunction)(_.dataset.callback)(ut),Xr=!1,n&&n(ut)}})}}document.onreadystatechange=()=>{document.readyState==="complete"&&Vi()};const ur={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function fi(ye,n){if((!n||ye.partialCharge===void 0)&&ye.resn&&ye.atom){var a=ye.resn+":"+ye.atom;ye.properties.partialCharge=ur[a]}}window&&(window.$3Dmol=r)},40:(e,r,s)=>{s.r(r),s.d(r,{bondLength:()=>c,bondTable:()=>o,setBondLength:()=>x});let o={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function c(u){return o[u]||1.6}function x(u,p){p<0&&(p=0),o[u]=p}},71:(e,r,s)=>{var o=s(107),c=s(981),x=s(972),u=s(834),p=s(746),d=Object.prototype.toString;function w(v){if(!(this instanceof w))return new w(v);this.options=c.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},v||{});var k=this.options;k.raw&&k.windowBits>0?k.windowBits=-k.windowBits:k.gzip&&k.windowBits>0&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var H=o.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(H!==0)throw new Error(u[H]);if(k.header&&o.deflateSetHeader(this.strm,k.header),k.dictionary){var P;if(P=typeof k.dictionary=="string"?x.string2buf(k.dictionary):d.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(H=o.deflateSetDictionary(this.strm,P))!==0)throw new Error(u[H]);this._dict_set=!0}}function C(v,k){var H=new w(k);if(H.push(v,!0),H.err)throw H.msg||u[H.err];return H.result}w.prototype.push=function(v,k){var H,P,j=this.strm,se=this.options.chunkSize;if(this.ended)return!1;P=k===~~k?k:k===!0?4:0,typeof v=="string"?j.input=x.string2buf(v):d.call(v)==="[object ArrayBuffer]"?j.input=new Uint8Array(v):j.input=v,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new c.Buf8(se),j.next_out=0,j.avail_out=se),(H=o.deflate(j,P))!==1&&H!==0)return this.onEnd(H),this.ended=!0,!1;j.avail_out!==0&&(j.avail_in!==0||P!==4&&P!==2)||(this.options.to==="string"?this.onData(x.buf2binstring(c.shrinkBuf(j.output,j.next_out))):this.onData(c.shrinkBuf(j.output,j.next_out)))}while((j.avail_in>0||j.avail_out===0)&&H!==1);return P===4?(H=o.deflateEnd(this.strm),this.onEnd(H),this.ended=!0,H===0):P!==2||(this.onEnd(0),j.avail_out=0,!0)},w.prototype.onData=function(v){this.chunks.push(v)},w.prototype.onEnd=function(v){v===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},r.Deflate=w,r.deflate=C,r.deflateRaw=function(v,k){return(k=k||{}).raw=!0,C(v,k)},r.gzip=function(v,k){return(k=k||{}).gzip=!0,C(v,k)}},75:(e,r,s)=>{function o(g){let oe=g.length;for(;--oe>=0;)g[oe]=0}s.r(r),s.d(r,{Deflate:()=>wi,Inflate:()=>Pi,constants:()=>ai,default:()=>hi,deflate:()=>mi,deflateRaw:()=>bi,gzip:()=>Hi,inflate:()=>Wi,inflateRaw:()=>ti,ungzip:()=>ni});const c=256,x=286,u=30,p=15,d=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),w=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),C=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),v=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),k=new Array(576);o(k);const H=new Array(60);o(H);const P=new Array(512);o(P);const j=new Array(256);o(j);const se=new Array(29);o(se);const ce=new Array(u);function ne(g,oe,b,Ie,ke){this.static_tree=g,this.extra_bits=oe,this.extra_base=b,this.elems=Ie,this.max_length=ke,this.has_stree=g&&g.length}let E,K,Y;function re(g,oe){this.dyn_tree=g,this.max_code=0,this.stat_desc=oe}o(ce);const ue=g=>g<256?P[g]:P[256+(g>>>7)],q=(g,oe)=>{g.pending_buf[g.pending++]=255&oe,g.pending_buf[g.pending++]=oe>>>8&255},he=(g,oe,b)=>{g.bi_valid>16-b?(g.bi_buf|=oe<<g.bi_valid&65535,q(g,g.bi_buf),g.bi_buf=oe>>16-g.bi_valid,g.bi_valid+=b-16):(g.bi_buf|=oe<<g.bi_valid&65535,g.bi_valid+=b)},Oe=(g,oe,b)=>{he(g,b[2*oe],b[2*oe+1])},be=(g,oe)=>{let b=0;do b|=1&g,g>>>=1,b<<=1;while(--oe>0);return b>>>1},Te=(g,oe,b)=>{const Ie=new Array(16);let ke,Re,it=0;for(ke=1;ke<=p;ke++)it=it+b[ke-1]<<1,Ie[ke]=it;for(Re=0;Re<=oe;Re++){let He=g[2*Re+1];He!==0&&(g[2*Re]=be(Ie[He]++,He))}},Ae=g=>{let oe;for(oe=0;oe<x;oe++)g.dyn_ltree[2*oe]=0;for(oe=0;oe<u;oe++)g.dyn_dtree[2*oe]=0;for(oe=0;oe<19;oe++)g.bl_tree[2*oe]=0;g.dyn_ltree[512]=1,g.opt_len=g.static_len=0,g.sym_next=g.matches=0},Ve=g=>{g.bi_valid>8?q(g,g.bi_buf):g.bi_valid>0&&(g.pending_buf[g.pending++]=g.bi_buf),g.bi_buf=0,g.bi_valid=0},_e=(g,oe,b,Ie)=>{const ke=2*oe,Re=2*b;return g[ke]<g[Re]||g[ke]===g[Re]&&Ie[oe]<=Ie[b]},W=(g,oe,b)=>{const Ie=g.heap[b];let ke=b<<1;for(;ke<=g.heap_len&&(ke<g.heap_len&&_e(oe,g.heap[ke+1],g.heap[ke],g.depth)&&ke++,!_e(oe,Ie,g.heap[ke],g.depth));)g.heap[b]=g.heap[ke],b=ke,ke<<=1;g.heap[b]=Ie},we=(g,oe,b)=>{let Ie,ke,Re,it,He=0;if(g.sym_next!==0)do Ie=255&g.pending_buf[g.sym_buf+He++],Ie+=(255&g.pending_buf[g.sym_buf+He++])<<8,ke=g.pending_buf[g.sym_buf+He++],Ie===0?Oe(g,ke,oe):(Re=j[ke],Oe(g,Re+c+1,oe),it=d[Re],it!==0&&(ke-=se[Re],he(g,ke,it)),Ie--,Re=ue(Ie),Oe(g,Re,b),it=w[Re],it!==0&&(Ie-=ce[Re],he(g,Ie,it)));while(He<g.sym_next);Oe(g,256,oe)},ge=(g,oe)=>{const b=oe.dyn_tree,Ie=oe.stat_desc.static_tree,ke=oe.stat_desc.has_stree,Re=oe.stat_desc.elems;let it,He,Tt,qe=-1;for(g.heap_len=0,g.heap_max=573,it=0;it<Re;it++)b[2*it]!==0?(g.heap[++g.heap_len]=qe=it,g.depth[it]=0):b[2*it+1]=0;for(;g.heap_len<2;)Tt=g.heap[++g.heap_len]=qe<2?++qe:0,b[2*Tt]=1,g.depth[Tt]=0,g.opt_len--,ke&&(g.static_len-=Ie[2*Tt+1]);for(oe.max_code=qe,it=g.heap_len>>1;it>=1;it--)W(g,b,it);Tt=Re;do it=g.heap[1],g.heap[1]=g.heap[g.heap_len--],W(g,b,1),He=g.heap[1],g.heap[--g.heap_max]=it,g.heap[--g.heap_max]=He,b[2*Tt]=b[2*it]+b[2*He],g.depth[Tt]=(g.depth[it]>=g.depth[He]?g.depth[it]:g.depth[He])+1,b[2*it+1]=b[2*He+1]=Tt,g.heap[1]=Tt++,W(g,b,1);while(g.heap_len>=2);g.heap[--g.heap_max]=g.heap[1],((nt,Sr)=>{const rr=Sr.dyn_tree,kt=Sr.max_code,gi=Sr.stat_desc.static_tree,Vr=Sr.stat_desc.has_stree,hr=Sr.stat_desc.extra_bits,Hr=Sr.stat_desc.extra_base,xr=Sr.stat_desc.max_length;let Ft,gr,Ur,Gt,Or,wr,dr=0;for(Gt=0;Gt<=p;Gt++)nt.bl_count[Gt]=0;for(rr[2*nt.heap[nt.heap_max]+1]=0,Ft=nt.heap_max+1;Ft<573;Ft++)gr=nt.heap[Ft],Gt=rr[2*rr[2*gr+1]+1]+1,Gt>xr&&(Gt=xr,dr++),rr[2*gr+1]=Gt,gr>kt||(nt.bl_count[Gt]++,Or=0,gr>=Hr&&(Or=hr[gr-Hr]),wr=rr[2*gr],nt.opt_len+=wr*(Gt+Or),Vr&&(nt.static_len+=wr*(gi[2*gr+1]+Or)));if(dr!==0){do{for(Gt=xr-1;nt.bl_count[Gt]===0;)Gt--;nt.bl_count[Gt]--,nt.bl_count[Gt+1]+=2,nt.bl_count[xr]--,dr-=2}while(dr>0);for(Gt=xr;Gt!==0;Gt--)for(gr=nt.bl_count[Gt];gr!==0;)Ur=nt.heap[--Ft],Ur>kt||(rr[2*Ur+1]!==Gt&&(nt.opt_len+=(Gt-rr[2*Ur+1])*rr[2*Ur],rr[2*Ur+1]=Gt),gr--)}})(g,oe),Te(b,qe,g.bl_count)},ae=(g,oe,b)=>{let Ie,ke,Re=-1,it=oe[1],He=0,Tt=7,qe=4;for(it===0&&(Tt=138,qe=3),oe[2*(b+1)+1]=65535,Ie=0;Ie<=b;Ie++)ke=it,it=oe[2*(Ie+1)+1],++He<Tt&&ke===it||(He<qe?g.bl_tree[2*ke]+=He:ke!==0?(ke!==Re&&g.bl_tree[2*ke]++,g.bl_tree[32]++):He<=10?g.bl_tree[34]++:g.bl_tree[36]++,He=0,Re=ke,it===0?(Tt=138,qe=3):ke===it?(Tt=6,qe=3):(Tt=7,qe=4))},Ue=(g,oe,b)=>{let Ie,ke,Re=-1,it=oe[1],He=0,Tt=7,qe=4;for(it===0&&(Tt=138,qe=3),Ie=0;Ie<=b;Ie++)if(ke=it,it=oe[2*(Ie+1)+1],!(++He<Tt&&ke===it)){if(He<qe)do Oe(g,ke,g.bl_tree);while(--He!==0);else ke!==0?(ke!==Re&&(Oe(g,ke,g.bl_tree),He--),Oe(g,16,g.bl_tree),he(g,He-3,2)):He<=10?(Oe(g,17,g.bl_tree),he(g,He-3,3)):(Oe(g,18,g.bl_tree),he(g,He-11,7));He=0,Re=ke,it===0?(Tt=138,qe=3):ke===it?(Tt=6,qe=3):(Tt=7,qe=4)}};let Ee=!1;const Ge=(g,oe,b,Ie)=>{he(g,0+(Ie?1:0),3),Ve(g),q(g,b),q(g,~b),b&&g.pending_buf.set(g.window.subarray(oe,oe+b),g.pending),g.pending+=b};var tt=(g,oe,b,Ie)=>{let ke,Re,it=0;g.level>0?(g.strm.data_type===2&&(g.strm.data_type=(He=>{let Tt,qe=4093624447;for(Tt=0;Tt<=31;Tt++,qe>>>=1)if(1&qe&&He.dyn_ltree[2*Tt]!==0)return 0;if(He.dyn_ltree[18]!==0||He.dyn_ltree[20]!==0||He.dyn_ltree[26]!==0)return 1;for(Tt=32;Tt<c;Tt++)if(He.dyn_ltree[2*Tt]!==0)return 1;return 0})(g)),ge(g,g.l_desc),ge(g,g.d_desc),it=(He=>{let Tt;for(ae(He,He.dyn_ltree,He.l_desc.max_code),ae(He,He.dyn_dtree,He.d_desc.max_code),ge(He,He.bl_desc),Tt=18;Tt>=3&&He.bl_tree[2*v[Tt]+1]===0;Tt--);return He.opt_len+=3*(Tt+1)+5+5+4,Tt})(g),ke=g.opt_len+3+7>>>3,Re=g.static_len+3+7>>>3,Re<=ke&&(ke=Re)):ke=Re=b+5,b+4<=ke&&oe!==-1?Ge(g,oe,b,Ie):g.strategy===4||Re===ke?(he(g,2+(Ie?1:0),3),we(g,k,H)):(he(g,4+(Ie?1:0),3),((He,Tt,qe,nt)=>{let Sr;for(he(He,Tt-257,5),he(He,qe-1,5),he(He,nt-4,4),Sr=0;Sr<nt;Sr++)he(He,He.bl_tree[2*v[Sr]+1],3);Ue(He,He.dyn_ltree,Tt-1),Ue(He,He.dyn_dtree,qe-1)})(g,g.l_desc.max_code+1,g.d_desc.max_code+1,it+1),we(g,g.dyn_ltree,g.dyn_dtree)),Ae(g),Ie&&Ve(g)},ve={_tr_init:g=>{Ee||((()=>{let oe,b,Ie,ke,Re;const it=new Array(16);for(Ie=0,ke=0;ke<28;ke++)for(se[ke]=Ie,oe=0;oe<1<<d[ke];oe++)j[Ie++]=ke;for(j[Ie-1]=ke,Re=0,ke=0;ke<16;ke++)for(ce[ke]=Re,oe=0;oe<1<<w[ke];oe++)P[Re++]=ke;for(Re>>=7;ke<u;ke++)for(ce[ke]=Re<<7,oe=0;oe<1<<w[ke]-7;oe++)P[256+Re++]=ke;for(b=0;b<=p;b++)it[b]=0;for(oe=0;oe<=143;)k[2*oe+1]=8,oe++,it[8]++;for(;oe<=255;)k[2*oe+1]=9,oe++,it[9]++;for(;oe<=279;)k[2*oe+1]=7,oe++,it[7]++;for(;oe<=287;)k[2*oe+1]=8,oe++,it[8]++;for(Te(k,287,it),oe=0;oe<u;oe++)H[2*oe+1]=5,H[2*oe]=be(oe,5);E=new ne(k,d,257,x,p),K=new ne(H,w,0,u,p),Y=new ne(new Array(0),C,0,19,7)})(),Ee=!0),g.l_desc=new re(g.dyn_ltree,E),g.d_desc=new re(g.dyn_dtree,K),g.bl_desc=new re(g.bl_tree,Y),g.bi_buf=0,g.bi_valid=0,Ae(g)},_tr_stored_block:Ge,_tr_flush_block:tt,_tr_tally:(g,oe,b)=>(g.pending_buf[g.sym_buf+g.sym_next++]=oe,g.pending_buf[g.sym_buf+g.sym_next++]=oe>>8,g.pending_buf[g.sym_buf+g.sym_next++]=b,oe===0?g.dyn_ltree[2*b]++:(g.matches++,oe--,g.dyn_ltree[2*(j[b]+c+1)]++,g.dyn_dtree[2*ue(oe)]++),g.sym_next===g.sym_end),_tr_align:g=>{he(g,2,3),Oe(g,256,k),(oe=>{oe.bi_valid===16?(q(oe,oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0):oe.bi_valid>=8&&(oe.pending_buf[oe.pending++]=255&oe.bi_buf,oe.bi_buf>>=8,oe.bi_valid-=8)})(g)}},ze=(g,oe,b,Ie)=>{let ke=65535&g,Re=g>>>16&65535,it=0;for(;b!==0;){it=b>2e3?2e3:b,b-=it;do ke=ke+oe[Ie++]|0,Re=Re+ke|0;while(--it);ke%=65521,Re%=65521}return ke|Re<<16};const rt=new Uint32Array((()=>{let g,oe=[];for(var b=0;b<256;b++){g=b;for(var Ie=0;Ie<8;Ie++)g=1&g?3988292384^g>>>1:g>>>1;oe[b]=g}return oe})());var at=(g,oe,b,Ie)=>{const ke=rt,Re=Ie+b;g^=-1;for(let it=Ie;it<Re;it++)g=g>>>8^ke[255&(g^oe[it])];return-1^g},Ke={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ft={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:vt,_tr_stored_block:yt,_tr_flush_block:Kt,_tr_tally:zt,_tr_align:vr}=ve,{Z_NO_FLUSH:yr,Z_PARTIAL_FLUSH:jr,Z_FULL_FLUSH:Lr,Z_FINISH:Cr,Z_BLOCK:Rr,Z_OK:Pr,Z_STREAM_END:Ei,Z_STREAM_ERROR:Br,Z_DATA_ERROR:Wr,Z_BUF_ERROR:Gi,Z_DEFAULT_COMPRESSION:Di,Z_FILTERED:tn,Z_HUFFMAN_ONLY:Ce,Z_RLE:Le,Z_FIXED:We,Z_DEFAULT_STRATEGY:St,Z_UNKNOWN:mt,Z_DEFLATED:Ht}=ft,bt=258,$t=262,Jt=42,Wt=113,Ar=666,xi=(g,oe)=>(g.msg=Ke[oe],oe),zi=g=>2*g-(g>4?9:0),_i=g=>{let oe=g.length;for(;--oe>=0;)g[oe]=0},Ti=g=>{let oe,b,Ie,ke=g.w_size;oe=g.hash_size,Ie=oe;do b=g.head[--Ie],g.head[Ie]=b>=ke?b-ke:0;while(--oe);oe=ke,Ie=oe;do b=g.prev[--Ie],g.prev[Ie]=b>=ke?b-ke:0;while(--oe)};let Zr=(g,oe,b)=>(oe<<g.hash_shift^b)&g.hash_mask;const $r=g=>{const oe=g.state;let b=oe.pending;b>g.avail_out&&(b=g.avail_out),b!==0&&(g.output.set(oe.pending_buf.subarray(oe.pending_out,oe.pending_out+b),g.next_out),g.next_out+=b,oe.pending_out+=b,g.total_out+=b,g.avail_out-=b,oe.pending-=b,oe.pending===0&&(oe.pending_out=0))},Gr=(g,oe)=>{Kt(g,g.block_start>=0?g.block_start:-1,g.strstart-g.block_start,oe),g.block_start=g.strstart,$r(g.strm)},fr=(g,oe)=>{g.pending_buf[g.pending++]=oe},Ri=(g,oe)=>{g.pending_buf[g.pending++]=oe>>>8&255,g.pending_buf[g.pending++]=255&oe},Ii=(g,oe,b,Ie)=>{let ke=g.avail_in;return ke>Ie&&(ke=Ie),ke===0?0:(g.avail_in-=ke,oe.set(g.input.subarray(g.next_in,g.next_in+ke),b),g.state.wrap===1?g.adler=ze(g.adler,oe,ke,b):g.state.wrap===2&&(g.adler=at(g.adler,oe,ke,b)),g.next_in+=ke,g.total_in+=ke,ke)},an=(g,oe)=>{let b,Ie,ke=g.max_chain_length,Re=g.strstart,it=g.prev_length,He=g.nice_match;const Tt=g.strstart>g.w_size-$t?g.strstart-(g.w_size-$t):0,qe=g.window,nt=g.w_mask,Sr=g.prev,rr=g.strstart+bt;let kt=qe[Re+it-1],gi=qe[Re+it];g.prev_length>=g.good_match&&(ke>>=2),He>g.lookahead&&(He=g.lookahead);do if(b=oe,qe[b+it]===gi&&qe[b+it-1]===kt&&qe[b]===qe[Re]&&qe[++b]===qe[Re+1]){Re+=2,b++;do;while(qe[++Re]===qe[++b]&&qe[++Re]===qe[++b]&&qe[++Re]===qe[++b]&&qe[++Re]===qe[++b]&&qe[++Re]===qe[++b]&&qe[++Re]===qe[++b]&&qe[++Re]===qe[++b]&&qe[++Re]===qe[++b]&&Re<rr);if(Ie=bt-(rr-Re),Re=rr-bt,Ie>it){if(g.match_start=oe,it=Ie,Ie>=He)break;kt=qe[Re+it-1],gi=qe[Re+it]}}while((oe=Sr[oe&nt])>Tt&&--ke!==0);return it<=g.lookahead?it:g.lookahead},Fi=g=>{const oe=g.w_size;let b,Ie,ke;do{if(Ie=g.window_size-g.lookahead-g.strstart,g.strstart>=oe+(oe-$t)&&(g.window.set(g.window.subarray(oe,oe+oe-Ie),0),g.match_start-=oe,g.strstart-=oe,g.block_start-=oe,g.insert>g.strstart&&(g.insert=g.strstart),Ti(g),Ie+=oe),g.strm.avail_in===0)break;if(b=Ii(g.strm,g.window,g.strstart+g.lookahead,Ie),g.lookahead+=b,g.lookahead+g.insert>=3)for(ke=g.strstart-g.insert,g.ins_h=g.window[ke],g.ins_h=Zr(g,g.ins_h,g.window[ke+1]);g.insert&&(g.ins_h=Zr(g,g.ins_h,g.window[ke+3-1]),g.prev[ke&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=ke,ke++,g.insert--,!(g.lookahead+g.insert<3)););}while(g.lookahead<$t&&g.strm.avail_in!==0)},qi=(g,oe)=>{let b,Ie,ke,Re=g.pending_buf_size-5>g.w_size?g.w_size:g.pending_buf_size-5,it=0,He=g.strm.avail_in;do{if(b=65535,ke=g.bi_valid+42>>3,g.strm.avail_out<ke||(ke=g.strm.avail_out-ke,Ie=g.strstart-g.block_start,b>Ie+g.strm.avail_in&&(b=Ie+g.strm.avail_in),b>ke&&(b=ke),b<Re&&(b===0&&oe!==Cr||oe===yr||b!==Ie+g.strm.avail_in)))break;it=oe===Cr&&b===Ie+g.strm.avail_in?1:0,yt(g,0,0,it),g.pending_buf[g.pending-4]=b,g.pending_buf[g.pending-3]=b>>8,g.pending_buf[g.pending-2]=~b,g.pending_buf[g.pending-1]=~b>>8,$r(g.strm),Ie&&(Ie>b&&(Ie=b),g.strm.output.set(g.window.subarray(g.block_start,g.block_start+Ie),g.strm.next_out),g.strm.next_out+=Ie,g.strm.avail_out-=Ie,g.strm.total_out+=Ie,g.block_start+=Ie,b-=Ie),b&&(Ii(g.strm,g.strm.output,g.strm.next_out,b),g.strm.next_out+=b,g.strm.avail_out-=b,g.strm.total_out+=b)}while(it===0);return He-=g.strm.avail_in,He&&(He>=g.w_size?(g.matches=2,g.window.set(g.strm.input.subarray(g.strm.next_in-g.w_size,g.strm.next_in),0),g.strstart=g.w_size,g.insert=g.strstart):(g.window_size-g.strstart<=He&&(g.strstart-=g.w_size,g.window.set(g.window.subarray(g.w_size,g.w_size+g.strstart),0),g.matches<2&&g.matches++,g.insert>g.strstart&&(g.insert=g.strstart)),g.window.set(g.strm.input.subarray(g.strm.next_in-He,g.strm.next_in),g.strstart),g.strstart+=He,g.insert+=He>g.w_size-g.insert?g.w_size-g.insert:He),g.block_start=g.strstart),g.high_water<g.strstart&&(g.high_water=g.strstart),it?4:oe!==yr&&oe!==Cr&&g.strm.avail_in===0&&g.strstart===g.block_start?2:(ke=g.window_size-g.strstart,g.strm.avail_in>ke&&g.block_start>=g.w_size&&(g.block_start-=g.w_size,g.strstart-=g.w_size,g.window.set(g.window.subarray(g.w_size,g.w_size+g.strstart),0),g.matches<2&&g.matches++,ke+=g.w_size,g.insert>g.strstart&&(g.insert=g.strstart)),ke>g.strm.avail_in&&(ke=g.strm.avail_in),ke&&(Ii(g.strm,g.window,g.strstart,ke),g.strstart+=ke,g.insert+=ke>g.w_size-g.insert?g.w_size-g.insert:ke),g.high_water<g.strstart&&(g.high_water=g.strstart),ke=g.bi_valid+42>>3,ke=g.pending_buf_size-ke>65535?65535:g.pending_buf_size-ke,Re=ke>g.w_size?g.w_size:ke,Ie=g.strstart-g.block_start,(Ie>=Re||(Ie||oe===Cr)&&oe!==yr&&g.strm.avail_in===0&&Ie<=ke)&&(b=Ie>ke?ke:Ie,it=oe===Cr&&g.strm.avail_in===0&&b===Ie?1:0,yt(g,g.block_start,b,it),g.block_start+=b,$r(g.strm)),it?3:1)},Ni=(g,oe)=>{let b,Ie;for(;;){if(g.lookahead<$t){if(Fi(g),g.lookahead<$t&&oe===yr)return 1;if(g.lookahead===0)break}if(b=0,g.lookahead>=3&&(g.ins_h=Zr(g,g.ins_h,g.window[g.strstart+3-1]),b=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),b!==0&&g.strstart-b<=g.w_size-$t&&(g.match_length=an(g,b)),g.match_length>=3)if(Ie=zt(g,g.strstart-g.match_start,g.match_length-3),g.lookahead-=g.match_length,g.match_length<=g.max_lazy_match&&g.lookahead>=3){g.match_length--;do g.strstart++,g.ins_h=Zr(g,g.ins_h,g.window[g.strstart+3-1]),b=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart;while(--g.match_length!==0);g.strstart++}else g.strstart+=g.match_length,g.match_length=0,g.ins_h=g.window[g.strstart],g.ins_h=Zr(g,g.ins_h,g.window[g.strstart+1]);else Ie=zt(g,0,g.window[g.strstart]),g.lookahead--,g.strstart++;if(Ie&&(Gr(g,!1),g.strm.avail_out===0))return 1}return g.insert=g.strstart<2?g.strstart:2,oe===Cr?(Gr(g,!0),g.strm.avail_out===0?3:4):g.sym_next&&(Gr(g,!1),g.strm.avail_out===0)?1:2},Ci=(g,oe)=>{let b,Ie,ke;for(;;){if(g.lookahead<$t){if(Fi(g),g.lookahead<$t&&oe===yr)return 1;if(g.lookahead===0)break}if(b=0,g.lookahead>=3&&(g.ins_h=Zr(g,g.ins_h,g.window[g.strstart+3-1]),b=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),g.prev_length=g.match_length,g.prev_match=g.match_start,g.match_length=2,b!==0&&g.prev_length<g.max_lazy_match&&g.strstart-b<=g.w_size-$t&&(g.match_length=an(g,b),g.match_length<=5&&(g.strategy===tn||g.match_length===3&&g.strstart-g.match_start>4096)&&(g.match_length=2)),g.prev_length>=3&&g.match_length<=g.prev_length){ke=g.strstart+g.lookahead-3,Ie=zt(g,g.strstart-1-g.prev_match,g.prev_length-3),g.lookahead-=g.prev_length-1,g.prev_length-=2;do++g.strstart<=ke&&(g.ins_h=Zr(g,g.ins_h,g.window[g.strstart+3-1]),b=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart);while(--g.prev_length!==0);if(g.match_available=0,g.match_length=2,g.strstart++,Ie&&(Gr(g,!1),g.strm.avail_out===0))return 1}else if(g.match_available){if(Ie=zt(g,0,g.window[g.strstart-1]),Ie&&Gr(g,!1),g.strstart++,g.lookahead--,g.strm.avail_out===0)return 1}else g.match_available=1,g.strstart++,g.lookahead--}return g.match_available&&(Ie=zt(g,0,g.window[g.strstart-1]),g.match_available=0),g.insert=g.strstart<2?g.strstart:2,oe===Cr?(Gr(g,!0),g.strm.avail_out===0?3:4):g.sym_next&&(Gr(g,!1),g.strm.avail_out===0)?1:2};function Yr(g,oe,b,Ie,ke){this.good_length=g,this.max_lazy=oe,this.nice_length=b,this.max_chain=Ie,this.func=ke}const li=[new Yr(0,0,0,0,qi),new Yr(4,4,8,4,Ni),new Yr(4,5,16,8,Ni),new Yr(4,6,32,32,Ni),new Yr(4,4,16,16,Ci),new Yr(8,16,32,32,Ci),new Yr(8,16,128,128,Ci),new Yr(8,32,128,256,Ci),new Yr(32,128,258,1024,Ci),new Yr(32,258,258,4096,Ci)];function Qi(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ht,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),_i(this.dyn_ltree),_i(this.dyn_dtree),_i(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),_i(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),_i(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Mi=g=>{if(!g)return 1;const oe=g.state;return!oe||oe.strm!==g||oe.status!==Jt&&oe.status!==57&&oe.status!==69&&oe.status!==73&&oe.status!==91&&oe.status!==103&&oe.status!==Wt&&oe.status!==Ar?1:0},rn=g=>{if(Mi(g))return xi(g,Br);g.total_in=g.total_out=0,g.data_type=mt;const oe=g.state;return oe.pending=0,oe.pending_out=0,oe.wrap<0&&(oe.wrap=-oe.wrap),oe.status=oe.wrap===2?57:oe.wrap?Jt:Wt,g.adler=oe.wrap===2?0:1,oe.last_flush=-2,vt(oe),Pr},fn=g=>{const oe=rn(g);var b;return oe===Pr&&((b=g.state).window_size=2*b.w_size,_i(b.head),b.max_lazy_match=li[b.level].max_lazy,b.good_match=li[b.level].good_length,b.nice_match=li[b.level].nice_length,b.max_chain_length=li[b.level].max_chain,b.strstart=0,b.block_start=0,b.lookahead=0,b.insert=0,b.match_length=b.prev_length=2,b.match_available=0,b.ins_h=0),oe},vn=(g,oe,b,Ie,ke,Re)=>{if(!g)return Br;let it=1;if(oe===Di&&(oe=6),Ie<0?(it=0,Ie=-Ie):Ie>15&&(it=2,Ie-=16),ke<1||ke>9||b!==Ht||Ie<8||Ie>15||oe<0||oe>9||Re<0||Re>We||Ie===8&&it!==1)return xi(g,Br);Ie===8&&(Ie=9);const He=new Qi;return g.state=He,He.strm=g,He.status=Jt,He.wrap=it,He.gzhead=null,He.w_bits=Ie,He.w_size=1<<He.w_bits,He.w_mask=He.w_size-1,He.hash_bits=ke+7,He.hash_size=1<<He.hash_bits,He.hash_mask=He.hash_size-1,He.hash_shift=~~((He.hash_bits+3-1)/3),He.window=new Uint8Array(2*He.w_size),He.head=new Uint16Array(He.hash_size),He.prev=new Uint16Array(He.w_size),He.lit_bufsize=1<<ke+6,He.pending_buf_size=4*He.lit_bufsize,He.pending_buf=new Uint8Array(He.pending_buf_size),He.sym_buf=He.lit_bufsize,He.sym_end=3*(He.lit_bufsize-1),He.level=oe,He.strategy=Re,He.method=b,fn(g)};var _r={deflateInit:(g,oe)=>vn(g,oe,Ht,15,8,St),deflateInit2:vn,deflateReset:fn,deflateResetKeep:rn,deflateSetHeader:(g,oe)=>Mi(g)||g.state.wrap!==2?Br:(g.state.gzhead=oe,Pr),deflate:(g,oe)=>{if(Mi(g)||oe>Rr||oe<0)return g?xi(g,Br):Br;const b=g.state;if(!g.output||g.avail_in!==0&&!g.input||b.status===Ar&&oe!==Cr)return xi(g,g.avail_out===0?Gi:Br);const Ie=b.last_flush;if(b.last_flush=oe,b.pending!==0){if($r(g),g.avail_out===0)return b.last_flush=-1,Pr}else if(g.avail_in===0&&zi(oe)<=zi(Ie)&&oe!==Cr)return xi(g,Gi);if(b.status===Ar&&g.avail_in!==0)return xi(g,Gi);if(b.status===Jt&&b.wrap===0&&(b.status=Wt),b.status===Jt){let ke=Ht+(b.w_bits-8<<4)<<8,Re=-1;if(Re=b.strategy>=Ce||b.level<2?0:b.level<6?1:b.level===6?2:3,ke|=Re<<6,b.strstart!==0&&(ke|=32),ke+=31-ke%31,Ri(b,ke),b.strstart!==0&&(Ri(b,g.adler>>>16),Ri(b,65535&g.adler)),g.adler=1,b.status=Wt,$r(g),b.pending!==0)return b.last_flush=-1,Pr}if(b.status===57){if(g.adler=0,fr(b,31),fr(b,139),fr(b,8),b.gzhead)fr(b,(b.gzhead.text?1:0)+(b.gzhead.hcrc?2:0)+(b.gzhead.extra?4:0)+(b.gzhead.name?8:0)+(b.gzhead.comment?16:0)),fr(b,255&b.gzhead.time),fr(b,b.gzhead.time>>8&255),fr(b,b.gzhead.time>>16&255),fr(b,b.gzhead.time>>24&255),fr(b,b.level===9?2:b.strategy>=Ce||b.level<2?4:0),fr(b,255&b.gzhead.os),b.gzhead.extra&&b.gzhead.extra.length&&(fr(b,255&b.gzhead.extra.length),fr(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(g.adler=at(g.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=69;else if(fr(b,0),fr(b,0),fr(b,0),fr(b,0),fr(b,0),fr(b,b.level===9?2:b.strategy>=Ce||b.level<2?4:0),fr(b,3),b.status=Wt,$r(g),b.pending!==0)return b.last_flush=-1,Pr}if(b.status===69){if(b.gzhead.extra){let ke=b.pending,Re=(65535&b.gzhead.extra.length)-b.gzindex;for(;b.pending+Re>b.pending_buf_size;){let He=b.pending_buf_size-b.pending;if(b.pending_buf.set(b.gzhead.extra.subarray(b.gzindex,b.gzindex+He),b.pending),b.pending=b.pending_buf_size,b.gzhead.hcrc&&b.pending>ke&&(g.adler=at(g.adler,b.pending_buf,b.pending-ke,ke)),b.gzindex+=He,$r(g),b.pending!==0)return b.last_flush=-1,Pr;ke=0,Re-=He}let it=new Uint8Array(b.gzhead.extra);b.pending_buf.set(it.subarray(b.gzindex,b.gzindex+Re),b.pending),b.pending+=Re,b.gzhead.hcrc&&b.pending>ke&&(g.adler=at(g.adler,b.pending_buf,b.pending-ke,ke)),b.gzindex=0}b.status=73}if(b.status===73){if(b.gzhead.name){let ke,Re=b.pending;do{if(b.pending===b.pending_buf_size){if(b.gzhead.hcrc&&b.pending>Re&&(g.adler=at(g.adler,b.pending_buf,b.pending-Re,Re)),$r(g),b.pending!==0)return b.last_flush=-1,Pr;Re=0}ke=b.gzindex<b.gzhead.name.length?255&b.gzhead.name.charCodeAt(b.gzindex++):0,fr(b,ke)}while(ke!==0);b.gzhead.hcrc&&b.pending>Re&&(g.adler=at(g.adler,b.pending_buf,b.pending-Re,Re)),b.gzindex=0}b.status=91}if(b.status===91){if(b.gzhead.comment){let ke,Re=b.pending;do{if(b.pending===b.pending_buf_size){if(b.gzhead.hcrc&&b.pending>Re&&(g.adler=at(g.adler,b.pending_buf,b.pending-Re,Re)),$r(g),b.pending!==0)return b.last_flush=-1,Pr;Re=0}ke=b.gzindex<b.gzhead.comment.length?255&b.gzhead.comment.charCodeAt(b.gzindex++):0,fr(b,ke)}while(ke!==0);b.gzhead.hcrc&&b.pending>Re&&(g.adler=at(g.adler,b.pending_buf,b.pending-Re,Re))}b.status=103}if(b.status===103){if(b.gzhead.hcrc){if(b.pending+2>b.pending_buf_size&&($r(g),b.pending!==0))return b.last_flush=-1,Pr;fr(b,255&g.adler),fr(b,g.adler>>8&255),g.adler=0}if(b.status=Wt,$r(g),b.pending!==0)return b.last_flush=-1,Pr}if(g.avail_in!==0||b.lookahead!==0||oe!==yr&&b.status!==Ar){let ke=b.level===0?qi(b,oe):b.strategy===Ce?((Re,it)=>{let He;for(;;){if(Re.lookahead===0&&(Fi(Re),Re.lookahead===0)){if(it===yr)return 1;break}if(Re.match_length=0,He=zt(Re,0,Re.window[Re.strstart]),Re.lookahead--,Re.strstart++,He&&(Gr(Re,!1),Re.strm.avail_out===0))return 1}return Re.insert=0,it===Cr?(Gr(Re,!0),Re.strm.avail_out===0?3:4):Re.sym_next&&(Gr(Re,!1),Re.strm.avail_out===0)?1:2})(b,oe):b.strategy===Le?((Re,it)=>{let He,Tt,qe,nt;const Sr=Re.window;for(;;){if(Re.lookahead<=bt){if(Fi(Re),Re.lookahead<=bt&&it===yr)return 1;if(Re.lookahead===0)break}if(Re.match_length=0,Re.lookahead>=3&&Re.strstart>0&&(qe=Re.strstart-1,Tt=Sr[qe],Tt===Sr[++qe]&&Tt===Sr[++qe]&&Tt===Sr[++qe])){nt=Re.strstart+bt;do;while(Tt===Sr[++qe]&&Tt===Sr[++qe]&&Tt===Sr[++qe]&&Tt===Sr[++qe]&&Tt===Sr[++qe]&&Tt===Sr[++qe]&&Tt===Sr[++qe]&&Tt===Sr[++qe]&&qe<nt);Re.match_length=bt-(nt-qe),Re.match_length>Re.lookahead&&(Re.match_length=Re.lookahead)}if(Re.match_length>=3?(He=zt(Re,1,Re.match_length-3),Re.lookahead-=Re.match_length,Re.strstart+=Re.match_length,Re.match_length=0):(He=zt(Re,0,Re.window[Re.strstart]),Re.lookahead--,Re.strstart++),He&&(Gr(Re,!1),Re.strm.avail_out===0))return 1}return Re.insert=0,it===Cr?(Gr(Re,!0),Re.strm.avail_out===0?3:4):Re.sym_next&&(Gr(Re,!1),Re.strm.avail_out===0)?1:2})(b,oe):li[b.level].func(b,oe);if(ke!==3&&ke!==4||(b.status=Ar),ke===1||ke===3)return g.avail_out===0&&(b.last_flush=-1),Pr;if(ke===2&&(oe===jr?vr(b):oe!==Rr&&(yt(b,0,0,!1),oe===Lr&&(_i(b.head),b.lookahead===0&&(b.strstart=0,b.block_start=0,b.insert=0))),$r(g),g.avail_out===0))return b.last_flush=-1,Pr}return oe!==Cr?Pr:b.wrap<=0?Ei:(b.wrap===2?(fr(b,255&g.adler),fr(b,g.adler>>8&255),fr(b,g.adler>>16&255),fr(b,g.adler>>24&255),fr(b,255&g.total_in),fr(b,g.total_in>>8&255),fr(b,g.total_in>>16&255),fr(b,g.total_in>>24&255)):(Ri(b,g.adler>>>16),Ri(b,65535&g.adler)),$r(g),b.wrap>0&&(b.wrap=-b.wrap),b.pending!==0?Pr:Ei)},deflateEnd:g=>{if(Mi(g))return Br;const oe=g.state.status;return g.state=null,oe===Wt?xi(g,Wr):Pr},deflateSetDictionary:(g,oe)=>{let b=oe.length;if(Mi(g))return Br;const Ie=g.state,ke=Ie.wrap;if(ke===2||ke===1&&Ie.status!==Jt||Ie.lookahead)return Br;if(ke===1&&(g.adler=ze(g.adler,oe,b,0)),Ie.wrap=0,b>=Ie.w_size){ke===0&&(_i(Ie.head),Ie.strstart=0,Ie.block_start=0,Ie.insert=0);let Tt=new Uint8Array(Ie.w_size);Tt.set(oe.subarray(b-Ie.w_size,b),0),oe=Tt,b=Ie.w_size}const Re=g.avail_in,it=g.next_in,He=g.input;for(g.avail_in=b,g.next_in=0,g.input=oe,Fi(Ie);Ie.lookahead>=3;){let Tt=Ie.strstart,qe=Ie.lookahead-2;do Ie.ins_h=Zr(Ie,Ie.ins_h,Ie.window[Tt+3-1]),Ie.prev[Tt&Ie.w_mask]=Ie.head[Ie.ins_h],Ie.head[Ie.ins_h]=Tt,Tt++;while(--qe);Ie.strstart=Tt,Ie.lookahead=2,Fi(Ie)}return Ie.strstart+=Ie.lookahead,Ie.block_start=Ie.strstart,Ie.insert=Ie.lookahead,Ie.lookahead=0,Ie.match_length=Ie.prev_length=2,Ie.match_available=0,g.next_in=it,g.input=He,g.avail_in=Re,Ie.wrap=ke,Pr},deflateInfo:"pako deflate (from Nodeca project)"};const ei=(g,oe)=>Object.prototype.hasOwnProperty.call(g,oe);var si=function(g){const oe=Array.prototype.slice.call(arguments,1);for(;oe.length;){const b=oe.shift();if(b){if(typeof b!="object")throw new TypeError(b+"must be non-object");for(const Ie in b)ei(b,Ie)&&(g[Ie]=b[Ie])}}return g},on=g=>{let oe=0;for(let Ie=0,ke=g.length;Ie<ke;Ie++)oe+=g[Ie].length;const b=new Uint8Array(oe);for(let Ie=0,ke=0,Re=g.length;Ie<Re;Ie++){let it=g[Ie];b.set(it,ke),ke+=it.length}return b};let Yt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Yt=!1}const T=new Uint8Array(256);for(let g=0;g<256;g++)T[g]=g>=252?6:g>=248?5:g>=240?4:g>=224?3:g>=192?2:1;T[254]=T[254]=1;var me=g=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(g);let oe,b,Ie,ke,Re,it=g.length,He=0;for(ke=0;ke<it;ke++)b=g.charCodeAt(ke),(64512&b)==55296&&ke+1<it&&(Ie=g.charCodeAt(ke+1),(64512&Ie)==56320&&(b=65536+(b-55296<<10)+(Ie-56320),ke++)),He+=b<128?1:b<2048?2:b<65536?3:4;for(oe=new Uint8Array(He),Re=0,ke=0;Re<He;ke++)b=g.charCodeAt(ke),(64512&b)==55296&&ke+1<it&&(Ie=g.charCodeAt(ke+1),(64512&Ie)==56320&&(b=65536+(b-55296<<10)+(Ie-56320),ke++)),b<128?oe[Re++]=b:b<2048?(oe[Re++]=192|b>>>6,oe[Re++]=128|63&b):b<65536?(oe[Re++]=224|b>>>12,oe[Re++]=128|b>>>6&63,oe[Re++]=128|63&b):(oe[Re++]=240|b>>>18,oe[Re++]=128|b>>>12&63,oe[Re++]=128|b>>>6&63,oe[Re++]=128|63&b);return oe},Pe=(g,oe)=>{const b=oe||g.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(g.subarray(0,oe));let Ie,ke;const Re=new Array(2*b);for(ke=0,Ie=0;Ie<b;){let it=g[Ie++];if(it<128){Re[ke++]=it;continue}let He=T[it];if(He>4)Re[ke++]=65533,Ie+=He-1;else{for(it&=He===2?31:He===3?15:7;He>1&&Ie<b;)it=it<<6|63&g[Ie++],He--;He>1?Re[ke++]=65533:it<65536?Re[ke++]=it:(it-=65536,Re[ke++]=55296|it>>10&1023,Re[ke++]=56320|1023&it)}}return((it,He)=>{if(He<65534&&it.subarray&&Yt)return String.fromCharCode.apply(null,it.length===He?it:it.subarray(0,He));let Tt="";for(let qe=0;qe<He;qe++)Tt+=String.fromCharCode(it[qe]);return Tt})(Re,ke)},Qe=(g,oe)=>{(oe=oe||g.length)>g.length&&(oe=g.length);let b=oe-1;for(;b>=0&&(192&g[b])==128;)b--;return b<0||b===0?oe:b+T[g[b]]>oe?b:oe},$e=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Mt=Object.prototype.toString,{Z_NO_FLUSH:xt,Z_SYNC_FLUSH:At,Z_FULL_FLUSH:Vt,Z_FINISH:Ut,Z_OK:Xt,Z_STREAM_END:Tr,Z_DEFAULT_COMPRESSION:lr,Z_DEFAULT_STRATEGY:zr,Z_DEFLATED:Fr}=ft;function Jr(g){this.options=si({level:lr,method:Fr,chunkSize:16384,windowBits:15,memLevel:8,strategy:zr},g||{});let oe=this.options;oe.raw&&oe.windowBits>0?oe.windowBits=-oe.windowBits:oe.gzip&&oe.windowBits>0&&oe.windowBits<16&&(oe.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $e,this.strm.avail_out=0;let b=_r.deflateInit2(this.strm,oe.level,oe.method,oe.windowBits,oe.memLevel,oe.strategy);if(b!==Xt)throw new Error(Ke[b]);if(oe.header&&_r.deflateSetHeader(this.strm,oe.header),oe.dictionary){let Ie;if(Ie=typeof oe.dictionary=="string"?me(oe.dictionary):Mt.call(oe.dictionary)==="[object ArrayBuffer]"?new Uint8Array(oe.dictionary):oe.dictionary,b=_r.deflateSetDictionary(this.strm,Ie),b!==Xt)throw new Error(Ke[b]);this._dict_set=!0}}function kr(g,oe){const b=new Jr(oe);if(b.push(g,!0),b.err)throw b.msg||Ke[b.err];return b.result}Jr.prototype.push=function(g,oe){const b=this.strm,Ie=this.options.chunkSize;let ke,Re;if(this.ended)return!1;for(Re=oe===~~oe?oe:oe===!0?Ut:xt,typeof g=="string"?b.input=me(g):Mt.call(g)==="[object ArrayBuffer]"?b.input=new Uint8Array(g):b.input=g,b.next_in=0,b.avail_in=b.input.length;;)if(b.avail_out===0&&(b.output=new Uint8Array(Ie),b.next_out=0,b.avail_out=Ie),(Re===At||Re===Vt)&&b.avail_out<=6)this.onData(b.output.subarray(0,b.next_out)),b.avail_out=0;else{if(ke=_r.deflate(b,Re),ke===Tr)return b.next_out>0&&this.onData(b.output.subarray(0,b.next_out)),ke=_r.deflateEnd(this.strm),this.onEnd(ke),this.ended=!0,ke===Xt;if(b.avail_out!==0){if(Re>0&&b.next_out>0)this.onData(b.output.subarray(0,b.next_out)),b.avail_out=0;else if(b.avail_in===0)break}else this.onData(b.output)}return!0},Jr.prototype.onData=function(g){this.chunks.push(g)},Jr.prototype.onEnd=function(g){g===Xt&&(this.result=on(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg};var Xr={Deflate:Jr,deflate:kr,deflateRaw:function(g,oe){return(oe=oe||{}).raw=!0,kr(g,oe)},gzip:function(g,oe){return(oe=oe||{}).gzip=!0,kr(g,oe)}};const Dr=16209;var Vi=function(g,oe){let b,Ie,ke,Re,it,He,Tt,qe,nt,Sr,rr,kt,gi,Vr,hr,Hr,xr,Ft,gr,Ur,Gt,Or,wr,dr;const Er=g.state;b=g.next_in,wr=g.input,Ie=b+(g.avail_in-5),ke=g.next_out,dr=g.output,Re=ke-(oe-g.avail_out),it=ke+(g.avail_out-257),He=Er.dmax,Tt=Er.wsize,qe=Er.whave,nt=Er.wnext,Sr=Er.window,rr=Er.hold,kt=Er.bits,gi=Er.lencode,Vr=Er.distcode,hr=(1<<Er.lenbits)-1,Hr=(1<<Er.distbits)-1;e:do{kt<15&&(rr+=wr[b++]<<kt,kt+=8,rr+=wr[b++]<<kt,kt+=8),xr=gi[rr&hr];t:for(;;){if(Ft=xr>>>24,rr>>>=Ft,kt-=Ft,Ft=xr>>>16&255,Ft===0)dr[ke++]=65535&xr;else{if(!(16&Ft)){if(64&Ft){if(32&Ft){Er.mode=16191;break e}g.msg="invalid literal/length code",Er.mode=Dr;break e}xr=gi[(65535&xr)+(rr&(1<<Ft)-1)];continue t}for(gr=65535&xr,Ft&=15,Ft&&(kt<Ft&&(rr+=wr[b++]<<kt,kt+=8),gr+=rr&(1<<Ft)-1,rr>>>=Ft,kt-=Ft),kt<15&&(rr+=wr[b++]<<kt,kt+=8,rr+=wr[b++]<<kt,kt+=8),xr=Vr[rr&Hr];;){if(Ft=xr>>>24,rr>>>=Ft,kt-=Ft,Ft=xr>>>16&255,16&Ft){if(Ur=65535&xr,Ft&=15,kt<Ft&&(rr+=wr[b++]<<kt,kt+=8,kt<Ft&&(rr+=wr[b++]<<kt,kt+=8)),Ur+=rr&(1<<Ft)-1,Ur>He){g.msg="invalid distance too far back",Er.mode=Dr;break e}if(rr>>>=Ft,kt-=Ft,Ft=ke-Re,Ur>Ft){if(Ft=Ur-Ft,Ft>qe&&Er.sane){g.msg="invalid distance too far back",Er.mode=Dr;break e}if(Gt=0,Or=Sr,nt===0){if(Gt+=Tt-Ft,Ft<gr){gr-=Ft;do dr[ke++]=Sr[Gt++];while(--Ft);Gt=ke-Ur,Or=dr}}else if(nt<Ft){if(Gt+=Tt+nt-Ft,Ft-=nt,Ft<gr){gr-=Ft;do dr[ke++]=Sr[Gt++];while(--Ft);if(Gt=0,nt<gr){Ft=nt,gr-=Ft;do dr[ke++]=Sr[Gt++];while(--Ft);Gt=ke-Ur,Or=dr}}}else if(Gt+=nt-Ft,Ft<gr){gr-=Ft;do dr[ke++]=Sr[Gt++];while(--Ft);Gt=ke-Ur,Or=dr}for(;gr>2;)dr[ke++]=Or[Gt++],dr[ke++]=Or[Gt++],dr[ke++]=Or[Gt++],gr-=3;gr&&(dr[ke++]=Or[Gt++],gr>1&&(dr[ke++]=Or[Gt++]))}else{Gt=ke-Ur;do dr[ke++]=dr[Gt++],dr[ke++]=dr[Gt++],dr[ke++]=dr[Gt++],gr-=3;while(gr>2);gr&&(dr[ke++]=dr[Gt++],gr>1&&(dr[ke++]=dr[Gt++]))}break}if(64&Ft){g.msg="invalid distance code",Er.mode=Dr;break e}xr=Vr[(65535&xr)+(rr&(1<<Ft)-1)]}}break}}while(b<Ie&&ke<it);gr=kt>>3,b-=gr,kt-=gr<<3,rr&=(1<<kt)-1,g.next_in=b,g.next_out=ke,g.avail_in=b<Ie?Ie-b+5:5-(b-Ie),g.avail_out=ke<it?it-ke+257:257-(ke-it),Er.hold=rr,Er.bits=kt};const ur=15,fi=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ye=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),a=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var h=(g,oe,b,Ie,ke,Re,it,He)=>{const Tt=He.bits;let qe,nt,Sr,rr,kt,gi,Vr=0,hr=0,Hr=0,xr=0,Ft=0,gr=0,Ur=0,Gt=0,Or=0,wr=0,dr=null;const Er=new Uint16Array(16),$i=new Uint16Array(16);let rs,vs,is,ns=null;for(Vr=0;Vr<=ur;Vr++)Er[Vr]=0;for(hr=0;hr<Ie;hr++)Er[oe[b+hr]]++;for(Ft=Tt,xr=ur;xr>=1&&Er[xr]===0;xr--);if(Ft>xr&&(Ft=xr),xr===0)return ke[Re++]=20971520,ke[Re++]=20971520,He.bits=1,0;for(Hr=1;Hr<xr&&Er[Hr]===0;Hr++);for(Ft<Hr&&(Ft=Hr),Gt=1,Vr=1;Vr<=ur;Vr++)if(Gt<<=1,Gt-=Er[Vr],Gt<0)return-1;if(Gt>0&&(g===0||xr!==1))return-1;for($i[1]=0,Vr=1;Vr<ur;Vr++)$i[Vr+1]=$i[Vr]+Er[Vr];for(hr=0;hr<Ie;hr++)oe[b+hr]!==0&&(it[$i[oe[b+hr]]++]=hr);if(g===0?(dr=ns=it,gi=20):g===1?(dr=fi,ns=ye,gi=257):(dr=n,ns=a,gi=0),wr=0,hr=0,Vr=Hr,kt=Re,gr=Ft,Ur=0,Sr=-1,Or=1<<Ft,rr=Or-1,g===1&&Or>852||g===2&&Or>592)return 1;for(;;){rs=Vr-Ur,it[hr]+1<gi?(vs=0,is=it[hr]):it[hr]>=gi?(vs=ns[it[hr]-gi],is=dr[it[hr]-gi]):(vs=96,is=0),qe=1<<Vr-Ur,nt=1<<gr,Hr=nt;do nt-=qe,ke[kt+(wr>>Ur)+nt]=rs<<24|vs<<16|is;while(nt!==0);for(qe=1<<Vr-1;wr&qe;)qe>>=1;if(qe!==0?(wr&=qe-1,wr+=qe):wr=0,hr++,--Er[Vr]===0){if(Vr===xr)break;Vr=oe[b+it[hr]]}if(Vr>Ft&&(wr&rr)!==Sr){for(Ur===0&&(Ur=Ft),kt+=Hr,gr=Vr-Ur,Gt=1<<gr;gr+Ur<xr&&(Gt-=Er[gr+Ur],!(Gt<=0));)gr++,Gt<<=1;if(Or+=1<<gr,g===1&&Or>852||g===2&&Or>592)return 1;Sr=wr&rr,ke[Sr]=Ft<<24|gr<<16|kt-Re}}return wr!==0&&(ke[kt+wr]=Vr-Ur<<24|64<<16),He.bits=Ft,0};const{Z_FINISH:f,Z_BLOCK:z,Z_TREES:_,Z_OK:V,Z_STREAM_END:B,Z_NEED_DICT:I,Z_STREAM_ERROR:U,Z_DATA_ERROR:X,Z_MEM_ERROR:ie,Z_BUF_ERROR:J,Z_DEFLATED:Q}=ft,te=16180,ee=16190,le=16191,de=16192,fe=16194,Se=16199,xe=16200,Me=16206,Be=16209,Ne=g=>(g>>>24&255)+(g>>>8&65280)+((65280&g)<<8)+((255&g)<<24);function je(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const De=g=>{if(!g)return 1;const oe=g.state;return!oe||oe.strm!==g||oe.mode<te||oe.mode>16211?1:0},Je=g=>{if(De(g))return U;const oe=g.state;return g.total_in=g.total_out=oe.total=0,g.msg="",oe.wrap&&(g.adler=1&oe.wrap),oe.mode=te,oe.last=0,oe.havedict=0,oe.flags=-1,oe.dmax=32768,oe.head=null,oe.hold=0,oe.bits=0,oe.lencode=oe.lendyn=new Int32Array(852),oe.distcode=oe.distdyn=new Int32Array(592),oe.sane=1,oe.back=-1,V},ct=g=>{if(De(g))return U;const oe=g.state;return oe.wsize=0,oe.whave=0,oe.wnext=0,Je(g)},dt=(g,oe)=>{let b;if(De(g))return U;const Ie=g.state;return oe<0?(b=0,oe=-oe):(b=5+(oe>>4),oe<48&&(oe&=15)),oe&&(oe<8||oe>15)?U:(Ie.window!==null&&Ie.wbits!==oe&&(Ie.window=null),Ie.wrap=b,Ie.wbits=oe,ct(g))},lt=(g,oe)=>{if(!g)return U;const b=new je;g.state=b,b.strm=g,b.window=null,b.mode=te;const Ie=dt(g,oe);return Ie!==V&&(g.state=null),Ie};let _t,Et,ut=!0;const Ct=g=>{if(ut){_t=new Int32Array(512),Et=new Int32Array(32);let oe=0;for(;oe<144;)g.lens[oe++]=8;for(;oe<256;)g.lens[oe++]=9;for(;oe<280;)g.lens[oe++]=7;for(;oe<288;)g.lens[oe++]=8;for(h(1,g.lens,0,288,_t,0,g.work,{bits:9}),oe=0;oe<32;)g.lens[oe++]=5;h(2,g.lens,0,32,Et,0,g.work,{bits:5}),ut=!1}g.lencode=_t,g.lenbits=9,g.distcode=Et,g.distbits=5},Ye=(g,oe,b,Ie)=>{let ke;const Re=g.state;return Re.window===null&&(Re.wsize=1<<Re.wbits,Re.wnext=0,Re.whave=0,Re.window=new Uint8Array(Re.wsize)),Ie>=Re.wsize?(Re.window.set(oe.subarray(b-Re.wsize,b),0),Re.wnext=0,Re.whave=Re.wsize):(ke=Re.wsize-Re.wnext,ke>Ie&&(ke=Ie),Re.window.set(oe.subarray(b-Ie,b-Ie+ke),Re.wnext),(Ie-=ke)?(Re.window.set(oe.subarray(b-Ie,b),0),Re.wnext=Ie,Re.whave=Re.wsize):(Re.wnext+=ke,Re.wnext===Re.wsize&&(Re.wnext=0),Re.whave<Re.wsize&&(Re.whave+=ke))),0};var ht={inflateReset:ct,inflateReset2:dt,inflateResetKeep:Je,inflateInit:g=>lt(g,15),inflateInit2:lt,inflate:(g,oe)=>{let b,Ie,ke,Re,it,He,Tt,qe,nt,Sr,rr,kt,gi,Vr,hr,Hr,xr,Ft,gr,Ur,Gt,Or,wr=0;const dr=new Uint8Array(4);let Er,$i;const rs=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(De(g)||!g.output||!g.input&&g.avail_in!==0)return U;b=g.state,b.mode===le&&(b.mode=de),it=g.next_out,ke=g.output,Tt=g.avail_out,Re=g.next_in,Ie=g.input,He=g.avail_in,qe=b.hold,nt=b.bits,Sr=He,rr=Tt,Or=V;e:for(;;)switch(b.mode){case te:if(b.wrap===0){b.mode=de;break}for(;nt<16;){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}if(2&b.wrap&&qe===35615){b.wbits===0&&(b.wbits=15),b.check=0,dr[0]=255&qe,dr[1]=qe>>>8&255,b.check=at(b.check,dr,2,0),qe=0,nt=0,b.mode=16181;break}if(b.head&&(b.head.done=!1),!(1&b.wrap)||(((255&qe)<<8)+(qe>>8))%31){g.msg="incorrect header check",b.mode=Be;break}if((15&qe)!==Q){g.msg="unknown compression method",b.mode=Be;break}if(qe>>>=4,nt-=4,Gt=8+(15&qe),b.wbits===0&&(b.wbits=Gt),Gt>15||Gt>b.wbits){g.msg="invalid window size",b.mode=Be;break}b.dmax=1<<b.wbits,b.flags=0,g.adler=b.check=1,b.mode=512&qe?16189:le,qe=0,nt=0;break;case 16181:for(;nt<16;){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}if(b.flags=qe,(255&b.flags)!==Q){g.msg="unknown compression method",b.mode=Be;break}if(57344&b.flags){g.msg="unknown header flags set",b.mode=Be;break}b.head&&(b.head.text=qe>>8&1),512&b.flags&&4&b.wrap&&(dr[0]=255&qe,dr[1]=qe>>>8&255,b.check=at(b.check,dr,2,0)),qe=0,nt=0,b.mode=16182;case 16182:for(;nt<32;){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}b.head&&(b.head.time=qe),512&b.flags&&4&b.wrap&&(dr[0]=255&qe,dr[1]=qe>>>8&255,dr[2]=qe>>>16&255,dr[3]=qe>>>24&255,b.check=at(b.check,dr,4,0)),qe=0,nt=0,b.mode=16183;case 16183:for(;nt<16;){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}b.head&&(b.head.xflags=255&qe,b.head.os=qe>>8),512&b.flags&&4&b.wrap&&(dr[0]=255&qe,dr[1]=qe>>>8&255,b.check=at(b.check,dr,2,0)),qe=0,nt=0,b.mode=16184;case 16184:if(1024&b.flags){for(;nt<16;){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}b.length=qe,b.head&&(b.head.extra_len=qe),512&b.flags&&4&b.wrap&&(dr[0]=255&qe,dr[1]=qe>>>8&255,b.check=at(b.check,dr,2,0)),qe=0,nt=0}else b.head&&(b.head.extra=null);b.mode=16185;case 16185:if(1024&b.flags&&(kt=b.length,kt>He&&(kt=He),kt&&(b.head&&(Gt=b.head.extra_len-b.length,b.head.extra||(b.head.extra=new Uint8Array(b.head.extra_len)),b.head.extra.set(Ie.subarray(Re,Re+kt),Gt)),512&b.flags&&4&b.wrap&&(b.check=at(b.check,Ie,kt,Re)),He-=kt,Re+=kt,b.length-=kt),b.length))break e;b.length=0,b.mode=16186;case 16186:if(2048&b.flags){if(He===0)break e;kt=0;do Gt=Ie[Re+kt++],b.head&&Gt&&b.length<65536&&(b.head.name+=String.fromCharCode(Gt));while(Gt&&kt<He);if(512&b.flags&&4&b.wrap&&(b.check=at(b.check,Ie,kt,Re)),He-=kt,Re+=kt,Gt)break e}else b.head&&(b.head.name=null);b.length=0,b.mode=16187;case 16187:if(4096&b.flags){if(He===0)break e;kt=0;do Gt=Ie[Re+kt++],b.head&&Gt&&b.length<65536&&(b.head.comment+=String.fromCharCode(Gt));while(Gt&&kt<He);if(512&b.flags&&4&b.wrap&&(b.check=at(b.check,Ie,kt,Re)),He-=kt,Re+=kt,Gt)break e}else b.head&&(b.head.comment=null);b.mode=16188;case 16188:if(512&b.flags){for(;nt<16;){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}if(4&b.wrap&&qe!==(65535&b.check)){g.msg="header crc mismatch",b.mode=Be;break}qe=0,nt=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0),g.adler=b.check=0,b.mode=le;break;case 16189:for(;nt<32;){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}g.adler=b.check=Ne(qe),qe=0,nt=0,b.mode=ee;case ee:if(b.havedict===0)return g.next_out=it,g.avail_out=Tt,g.next_in=Re,g.avail_in=He,b.hold=qe,b.bits=nt,I;g.adler=b.check=1,b.mode=le;case le:if(oe===z||oe===_)break e;case de:if(b.last){qe>>>=7&nt,nt-=7&nt,b.mode=Me;break}for(;nt<3;){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}switch(b.last=1&qe,qe>>>=1,nt-=1,3&qe){case 0:b.mode=16193;break;case 1:if(Ct(b),b.mode=Se,oe===_){qe>>>=2,nt-=2;break e}break;case 2:b.mode=16196;break;case 3:g.msg="invalid block type",b.mode=Be}qe>>>=2,nt-=2;break;case 16193:for(qe>>>=7&nt,nt-=7&nt;nt<32;){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}if((65535&qe)!=(qe>>>16^65535)){g.msg="invalid stored block lengths",b.mode=Be;break}if(b.length=65535&qe,qe=0,nt=0,b.mode=fe,oe===_)break e;case fe:b.mode=16195;case 16195:if(kt=b.length,kt){if(kt>He&&(kt=He),kt>Tt&&(kt=Tt),kt===0)break e;ke.set(Ie.subarray(Re,Re+kt),it),He-=kt,Re+=kt,Tt-=kt,it+=kt,b.length-=kt;break}b.mode=le;break;case 16196:for(;nt<14;){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}if(b.nlen=257+(31&qe),qe>>>=5,nt-=5,b.ndist=1+(31&qe),qe>>>=5,nt-=5,b.ncode=4+(15&qe),qe>>>=4,nt-=4,b.nlen>286||b.ndist>30){g.msg="too many length or distance symbols",b.mode=Be;break}b.have=0,b.mode=16197;case 16197:for(;b.have<b.ncode;){for(;nt<3;){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}b.lens[rs[b.have++]]=7&qe,qe>>>=3,nt-=3}for(;b.have<19;)b.lens[rs[b.have++]]=0;if(b.lencode=b.lendyn,b.lenbits=7,Er={bits:b.lenbits},Or=h(0,b.lens,0,19,b.lencode,0,b.work,Er),b.lenbits=Er.bits,Or){g.msg="invalid code lengths set",b.mode=Be;break}b.have=0,b.mode=16198;case 16198:for(;b.have<b.nlen+b.ndist;){for(;wr=b.lencode[qe&(1<<b.lenbits)-1],hr=wr>>>24,Hr=wr>>>16&255,xr=65535&wr,!(hr<=nt);){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}if(xr<16)qe>>>=hr,nt-=hr,b.lens[b.have++]=xr;else{if(xr===16){for($i=hr+2;nt<$i;){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}if(qe>>>=hr,nt-=hr,b.have===0){g.msg="invalid bit length repeat",b.mode=Be;break}Gt=b.lens[b.have-1],kt=3+(3&qe),qe>>>=2,nt-=2}else if(xr===17){for($i=hr+3;nt<$i;){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}qe>>>=hr,nt-=hr,Gt=0,kt=3+(7&qe),qe>>>=3,nt-=3}else{for($i=hr+7;nt<$i;){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}qe>>>=hr,nt-=hr,Gt=0,kt=11+(127&qe),qe>>>=7,nt-=7}if(b.have+kt>b.nlen+b.ndist){g.msg="invalid bit length repeat",b.mode=Be;break}for(;kt--;)b.lens[b.have++]=Gt}}if(b.mode===Be)break;if(b.lens[256]===0){g.msg="invalid code -- missing end-of-block",b.mode=Be;break}if(b.lenbits=9,Er={bits:b.lenbits},Or=h(1,b.lens,0,b.nlen,b.lencode,0,b.work,Er),b.lenbits=Er.bits,Or){g.msg="invalid literal/lengths set",b.mode=Be;break}if(b.distbits=6,b.distcode=b.distdyn,Er={bits:b.distbits},Or=h(2,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,Er),b.distbits=Er.bits,Or){g.msg="invalid distances set",b.mode=Be;break}if(b.mode=Se,oe===_)break e;case Se:b.mode=xe;case xe:if(He>=6&&Tt>=258){g.next_out=it,g.avail_out=Tt,g.next_in=Re,g.avail_in=He,b.hold=qe,b.bits=nt,Vi(g,rr),it=g.next_out,ke=g.output,Tt=g.avail_out,Re=g.next_in,Ie=g.input,He=g.avail_in,qe=b.hold,nt=b.bits,b.mode===le&&(b.back=-1);break}for(b.back=0;wr=b.lencode[qe&(1<<b.lenbits)-1],hr=wr>>>24,Hr=wr>>>16&255,xr=65535&wr,!(hr<=nt);){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}if(Hr&&!(240&Hr)){for(Ft=hr,gr=Hr,Ur=xr;wr=b.lencode[Ur+((qe&(1<<Ft+gr)-1)>>Ft)],hr=wr>>>24,Hr=wr>>>16&255,xr=65535&wr,!(Ft+hr<=nt);){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}qe>>>=Ft,nt-=Ft,b.back+=Ft}if(qe>>>=hr,nt-=hr,b.back+=hr,b.length=xr,Hr===0){b.mode=16205;break}if(32&Hr){b.back=-1,b.mode=le;break}if(64&Hr){g.msg="invalid literal/length code",b.mode=Be;break}b.extra=15&Hr,b.mode=16201;case 16201:if(b.extra){for($i=b.extra;nt<$i;){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}b.length+=qe&(1<<b.extra)-1,qe>>>=b.extra,nt-=b.extra,b.back+=b.extra}b.was=b.length,b.mode=16202;case 16202:for(;wr=b.distcode[qe&(1<<b.distbits)-1],hr=wr>>>24,Hr=wr>>>16&255,xr=65535&wr,!(hr<=nt);){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}if(!(240&Hr)){for(Ft=hr,gr=Hr,Ur=xr;wr=b.distcode[Ur+((qe&(1<<Ft+gr)-1)>>Ft)],hr=wr>>>24,Hr=wr>>>16&255,xr=65535&wr,!(Ft+hr<=nt);){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}qe>>>=Ft,nt-=Ft,b.back+=Ft}if(qe>>>=hr,nt-=hr,b.back+=hr,64&Hr){g.msg="invalid distance code",b.mode=Be;break}b.offset=xr,b.extra=15&Hr,b.mode=16203;case 16203:if(b.extra){for($i=b.extra;nt<$i;){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}b.offset+=qe&(1<<b.extra)-1,qe>>>=b.extra,nt-=b.extra,b.back+=b.extra}if(b.offset>b.dmax){g.msg="invalid distance too far back",b.mode=Be;break}b.mode=16204;case 16204:if(Tt===0)break e;if(kt=rr-Tt,b.offset>kt){if(kt=b.offset-kt,kt>b.whave&&b.sane){g.msg="invalid distance too far back",b.mode=Be;break}kt>b.wnext?(kt-=b.wnext,gi=b.wsize-kt):gi=b.wnext-kt,kt>b.length&&(kt=b.length),Vr=b.window}else Vr=ke,gi=it-b.offset,kt=b.length;kt>Tt&&(kt=Tt),Tt-=kt,b.length-=kt;do ke[it++]=Vr[gi++];while(--kt);b.length===0&&(b.mode=xe);break;case 16205:if(Tt===0)break e;ke[it++]=b.length,Tt--,b.mode=xe;break;case Me:if(b.wrap){for(;nt<32;){if(He===0)break e;He--,qe|=Ie[Re++]<<nt,nt+=8}if(rr-=Tt,g.total_out+=rr,b.total+=rr,4&b.wrap&&rr&&(g.adler=b.check=b.flags?at(b.check,ke,rr,it-rr):ze(b.check,ke,rr,it-rr)),rr=Tt,4&b.wrap&&(b.flags?qe:Ne(qe))!==b.check){g.msg="incorrect data check",b.mode=Be;break}qe=0,nt=0}b.mode=16207;case 16207:if(b.wrap&&b.flags){for(;nt<32;){if(He===0)break e;He--,qe+=Ie[Re++]<<nt,nt+=8}if(4&b.wrap&&qe!==(4294967295&b.total)){g.msg="incorrect length check",b.mode=Be;break}qe=0,nt=0}b.mode=16208;case 16208:Or=B;break e;case Be:Or=X;break e;case 16210:return ie;default:return U}return g.next_out=it,g.avail_out=Tt,g.next_in=Re,g.avail_in=He,b.hold=qe,b.bits=nt,(b.wsize||rr!==g.avail_out&&b.mode<Be&&(b.mode<Me||oe!==f))&&Ye(g,g.output,g.next_out,rr-g.avail_out),Sr-=g.avail_in,rr-=g.avail_out,g.total_in+=Sr,g.total_out+=rr,b.total+=rr,4&b.wrap&&rr&&(g.adler=b.check=b.flags?at(b.check,ke,rr,g.next_out-rr):ze(b.check,ke,rr,g.next_out-rr)),g.data_type=b.bits+(b.last?64:0)+(b.mode===le?128:0)+(b.mode===Se||b.mode===fe?256:0),(Sr===0&&rr===0||oe===f)&&Or===V&&(Or=J),Or},inflateEnd:g=>{if(De(g))return U;let oe=g.state;return oe.window&&(oe.window=null),g.state=null,V},inflateGetHeader:(g,oe)=>{if(De(g))return U;const b=g.state;return 2&b.wrap?(b.head=oe,oe.done=!1,V):U},inflateSetDictionary:(g,oe)=>{const b=oe.length;let Ie,ke,Re;return De(g)?U:(Ie=g.state,Ie.wrap!==0&&Ie.mode!==ee?U:Ie.mode===ee&&(ke=1,ke=ze(ke,oe,b,0),ke!==Ie.check)?X:(Re=Ye(g,oe,b,b),Re?(Ie.mode=16210,ie):(Ie.havedict=1,V)))},inflateInfo:"pako inflate (from Nodeca project)"},Ot=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const gt=Object.prototype.toString,{Z_NO_FLUSH:Dt,Z_FINISH:Lt,Z_OK:pt,Z_STREAM_END:Bt,Z_NEED_DICT:tr,Z_STREAM_ERROR:jt,Z_DATA_ERROR:wt,Z_MEM_ERROR:cr}=ft;function qt(g){this.options=si({chunkSize:65536,windowBits:15,to:""},g||{});const oe=this.options;oe.raw&&oe.windowBits>=0&&oe.windowBits<16&&(oe.windowBits=-oe.windowBits,oe.windowBits===0&&(oe.windowBits=-15)),!(oe.windowBits>=0&&oe.windowBits<16)||g&&g.windowBits||(oe.windowBits+=32),oe.windowBits>15&&oe.windowBits<48&&(15&oe.windowBits||(oe.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $e,this.strm.avail_out=0;let b=ht.inflateInit2(this.strm,oe.windowBits);if(b!==pt)throw new Error(Ke[b]);if(this.header=new Ot,ht.inflateGetHeader(this.strm,this.header),oe.dictionary&&(typeof oe.dictionary=="string"?oe.dictionary=me(oe.dictionary):gt.call(oe.dictionary)==="[object ArrayBuffer]"&&(oe.dictionary=new Uint8Array(oe.dictionary)),oe.raw&&(b=ht.inflateSetDictionary(this.strm,oe.dictionary),b!==pt)))throw new Error(Ke[b])}function ar(g,oe){const b=new qt(oe);if(b.push(g),b.err)throw b.msg||Ke[b.err];return b.result}qt.prototype.push=function(g,oe){const b=this.strm,Ie=this.options.chunkSize,ke=this.options.dictionary;let Re,it,He;if(this.ended)return!1;for(it=oe===~~oe?oe:oe===!0?Lt:Dt,gt.call(g)==="[object ArrayBuffer]"?b.input=new Uint8Array(g):b.input=g,b.next_in=0,b.avail_in=b.input.length;;){for(b.avail_out===0&&(b.output=new Uint8Array(Ie),b.next_out=0,b.avail_out=Ie),Re=ht.inflate(b,it),Re===tr&&ke&&(Re=ht.inflateSetDictionary(b,ke),Re===pt?Re=ht.inflate(b,it):Re===wt&&(Re=tr));b.avail_in>0&&Re===Bt&&b.state.wrap>0&&g[b.next_in]!==0;)ht.inflateReset(b),Re=ht.inflate(b,it);switch(Re){case jt:case wt:case tr:case cr:return this.onEnd(Re),this.ended=!0,!1}if(He=b.avail_out,b.next_out&&(b.avail_out===0||Re===Bt))if(this.options.to==="string"){let Tt=Qe(b.output,b.next_out),qe=b.next_out-Tt,nt=Pe(b.output,Tt);b.next_out=qe,b.avail_out=Ie-qe,qe&&b.output.set(b.output.subarray(Tt,Tt+qe),0),this.onData(nt)}else this.onData(b.output.length===b.next_out?b.output:b.output.subarray(0,b.next_out));if(Re!==pt||He!==0){if(Re===Bt)return Re=ht.inflateEnd(this.strm),this.onEnd(Re),this.ended=!0,!0;if(b.avail_in===0)break}}return!0},qt.prototype.onData=function(g){this.chunks.push(g)},qt.prototype.onEnd=function(g){g===pt&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=on(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg};var Qt={Inflate:qt,inflate:ar,inflateRaw:function(g,oe){return(oe=oe||{}).raw=!0,ar(g,oe)},ungzip:ar};const{Deflate:nr,deflate:Mr,deflateRaw:Kr,gzip:Nr}=Xr,{Inflate:pi,inflate:ri,inflateRaw:Ir,ungzip:ii}=Qt;var wi=nr,mi=Mr,bi=Kr,Hi=Nr,Pi=pi,Wi=ri,ti=Ir,ni=ii,ai=ft,hi={Deflate:nr,deflate:Mr,deflateRaw:Kr,gzip:Nr,Inflate:pi,inflate:ri,inflateRaw:Ir,ungzip:ii,constants:ft}},99:(e,r,s)=>{s.r(r),s.d(r,{Cylinder:()=>u,Sphere:()=>c,Triangle:()=>d});var o=s(529);class c{constructor(C={x:0,y:0,z:0},v=0){this.center=new o.Vector3(C.x,C.y,C.z),this.radius=v}set(C,v){return this.center.copy(C),this.radius=v,this}copy(C){return this.center.copy(C.center),this.radius=C.radius,this}applyMatrix4(C){return this.center.applyMatrix4(C),this.radius=this.radius*C.getMaxScaleOnAxis(),this}translate(C){return this.center.add(C),this}equals(C){return C.center.equals(this.center)&&C.radius===this.radius}clone(){return new c().copy(this)}}let x=new o.Vector3;class u{constructor(C=new o.Vector3,v=new o.Vector3,k=0){this.c1=C,this.c2=v,this.radius=k,this.direction=new o.Vector3().subVectors(this.c2,this.c1).normalize()}copy(C){return this.c1.copy(C.c1),this.c2.copy(C.c2),this.direction.copy(C.direction),this.radius=C.radius,this}lengthSq(){return x.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(C){return this.direction.add(this.c1).applyMatrix4(C),this.c1.applyMatrix4(C),this.c2.applyMatrix4(C),this.direction.sub(this.c1).normalize(),this.radius=this.radius*C.getMaxScaleOnAxis(),this}}const p=new o.Vector3;class d{constructor(C=new o.Vector3,v=new o.Vector3,k=new o.Vector3){this.a=C,this.b=v,this.c=k}copy(C){return this.a.copy(C.a),this.b.copy(C.b),this.c.copy(C.c),this}applyMatrix4(C){return this.a.applyMatrix4(C),this.b.applyMatrix4(C),this.c.applyMatrix4(C),this}getNormal(){var C=this.a.clone();return C.sub(this.b),p.subVectors(this.c,this.b),C.cross(p),C.normalize(),C}}},107:(e,r,s)=>{var o,c=s(981),x=s(697),u=s(701),p=s(407),d=s(834),w=-2,C=258,v=262,k=103,H=113,P=666;function j(W,we){return W.msg=d[we],we}function se(W){return(W<<1)-(W>4?9:0)}function ce(W){for(var we=W.length;--we>=0;)W[we]=0}function ne(W){var we=W.state,ge=we.pending;ge>W.avail_out&&(ge=W.avail_out),ge!==0&&(c.arraySet(W.output,we.pending_buf,we.pending_out,ge,W.next_out),W.next_out+=ge,we.pending_out+=ge,W.total_out+=ge,W.avail_out-=ge,we.pending-=ge,we.pending===0&&(we.pending_out=0))}function E(W,we){x._tr_flush_block(W,W.block_start>=0?W.block_start:-1,W.strstart-W.block_start,we),W.block_start=W.strstart,ne(W.strm)}function K(W,we){W.pending_buf[W.pending++]=we}function Y(W,we){W.pending_buf[W.pending++]=we>>>8&255,W.pending_buf[W.pending++]=255&we}function re(W,we,ge,ae){var Ue=W.avail_in;return Ue>ae&&(Ue=ae),Ue===0?0:(W.avail_in-=Ue,c.arraySet(we,W.input,W.next_in,Ue,ge),W.state.wrap===1?W.adler=u(W.adler,we,Ue,ge):W.state.wrap===2&&(W.adler=p(W.adler,we,Ue,ge)),W.next_in+=Ue,W.total_in+=Ue,Ue)}function ue(W,we){var ge,ae,Ue=W.max_chain_length,Ee=W.strstart,Ge=W.prev_length,tt=W.nice_match,ve=W.strstart>W.w_size-v?W.strstart-(W.w_size-v):0,ze=W.window,rt=W.w_mask,at=W.prev,Ke=W.strstart+C,ft=ze[Ee+Ge-1],vt=ze[Ee+Ge];W.prev_length>=W.good_match&&(Ue>>=2),tt>W.lookahead&&(tt=W.lookahead);do if(ze[(ge=we)+Ge]===vt&&ze[ge+Ge-1]===ft&&ze[ge]===ze[Ee]&&ze[++ge]===ze[Ee+1]){Ee+=2,ge++;do;while(ze[++Ee]===ze[++ge]&&ze[++Ee]===ze[++ge]&&ze[++Ee]===ze[++ge]&&ze[++Ee]===ze[++ge]&&ze[++Ee]===ze[++ge]&&ze[++Ee]===ze[++ge]&&ze[++Ee]===ze[++ge]&&ze[++Ee]===ze[++ge]&&Ee<Ke);if(ae=C-(Ke-Ee),Ee=Ke-C,ae>Ge){if(W.match_start=we,Ge=ae,ae>=tt)break;ft=ze[Ee+Ge-1],vt=ze[Ee+Ge]}}while((we=at[we&rt])>ve&&--Ue!==0);return Ge<=W.lookahead?Ge:W.lookahead}function q(W){var we,ge,ae,Ue,Ee,Ge=W.w_size;do{if(Ue=W.window_size-W.lookahead-W.strstart,W.strstart>=Ge+(Ge-v)){c.arraySet(W.window,W.window,Ge,Ge,0),W.match_start-=Ge,W.strstart-=Ge,W.block_start-=Ge,we=ge=W.hash_size;do ae=W.head[--we],W.head[we]=ae>=Ge?ae-Ge:0;while(--ge);we=ge=Ge;do ae=W.prev[--we],W.prev[we]=ae>=Ge?ae-Ge:0;while(--ge);Ue+=Ge}if(W.strm.avail_in===0)break;if(ge=re(W.strm,W.window,W.strstart+W.lookahead,Ue),W.lookahead+=ge,W.lookahead+W.insert>=3)for(Ee=W.strstart-W.insert,W.ins_h=W.window[Ee],W.ins_h=(W.ins_h<<W.hash_shift^W.window[Ee+1])&W.hash_mask;W.insert&&(W.ins_h=(W.ins_h<<W.hash_shift^W.window[Ee+3-1])&W.hash_mask,W.prev[Ee&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=Ee,Ee++,W.insert--,!(W.lookahead+W.insert<3)););}while(W.lookahead<v&&W.strm.avail_in!==0)}function he(W,we){for(var ge,ae;;){if(W.lookahead<v){if(q(W),W.lookahead<v&&we===0)return 1;if(W.lookahead===0)break}if(ge=0,W.lookahead>=3&&(W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+3-1])&W.hash_mask,ge=W.prev[W.strstart&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=W.strstart),ge!==0&&W.strstart-ge<=W.w_size-v&&(W.match_length=ue(W,ge)),W.match_length>=3)if(ae=x._tr_tally(W,W.strstart-W.match_start,W.match_length-3),W.lookahead-=W.match_length,W.match_length<=W.max_lazy_match&&W.lookahead>=3){W.match_length--;do W.strstart++,W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+3-1])&W.hash_mask,ge=W.prev[W.strstart&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=W.strstart;while(--W.match_length!==0);W.strstart++}else W.strstart+=W.match_length,W.match_length=0,W.ins_h=W.window[W.strstart],W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+1])&W.hash_mask;else ae=x._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++;if(ae&&(E(W,!1),W.strm.avail_out===0))return 1}return W.insert=W.strstart<2?W.strstart:2,we===4?(E(W,!0),W.strm.avail_out===0?3:4):W.last_lit&&(E(W,!1),W.strm.avail_out===0)?1:2}function Oe(W,we){for(var ge,ae,Ue;;){if(W.lookahead<v){if(q(W),W.lookahead<v&&we===0)return 1;if(W.lookahead===0)break}if(ge=0,W.lookahead>=3&&(W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+3-1])&W.hash_mask,ge=W.prev[W.strstart&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=W.strstart),W.prev_length=W.match_length,W.prev_match=W.match_start,W.match_length=2,ge!==0&&W.prev_length<W.max_lazy_match&&W.strstart-ge<=W.w_size-v&&(W.match_length=ue(W,ge),W.match_length<=5&&(W.strategy===1||W.match_length===3&&W.strstart-W.match_start>4096)&&(W.match_length=2)),W.prev_length>=3&&W.match_length<=W.prev_length){Ue=W.strstart+W.lookahead-3,ae=x._tr_tally(W,W.strstart-1-W.prev_match,W.prev_length-3),W.lookahead-=W.prev_length-1,W.prev_length-=2;do++W.strstart<=Ue&&(W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+3-1])&W.hash_mask,ge=W.prev[W.strstart&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=W.strstart);while(--W.prev_length!==0);if(W.match_available=0,W.match_length=2,W.strstart++,ae&&(E(W,!1),W.strm.avail_out===0))return 1}else if(W.match_available){if((ae=x._tr_tally(W,0,W.window[W.strstart-1]))&&E(W,!1),W.strstart++,W.lookahead--,W.strm.avail_out===0)return 1}else W.match_available=1,W.strstart++,W.lookahead--}return W.match_available&&(ae=x._tr_tally(W,0,W.window[W.strstart-1]),W.match_available=0),W.insert=W.strstart<2?W.strstart:2,we===4?(E(W,!0),W.strm.avail_out===0?3:4):W.last_lit&&(E(W,!1),W.strm.avail_out===0)?1:2}function be(W,we,ge,ae,Ue){this.good_length=W,this.max_lazy=we,this.nice_length=ge,this.max_chain=ae,this.func=Ue}function Te(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(1146),this.dyn_dtree=new c.Buf16(122),this.bl_tree=new c.Buf16(78),ce(this.dyn_ltree),ce(this.dyn_dtree),ce(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(16),this.heap=new c.Buf16(573),ce(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(573),ce(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ae(W){var we;return W&&W.state?(W.total_in=W.total_out=0,W.data_type=2,(we=W.state).pending=0,we.pending_out=0,we.wrap<0&&(we.wrap=-we.wrap),we.status=we.wrap?42:H,W.adler=we.wrap===2?0:1,we.last_flush=0,x._tr_init(we),0):j(W,w)}function Ve(W){var we,ge=Ae(W);return ge===0&&((we=W.state).window_size=2*we.w_size,ce(we.head),we.max_lazy_match=o[we.level].max_lazy,we.good_match=o[we.level].good_length,we.nice_match=o[we.level].nice_length,we.max_chain_length=o[we.level].max_chain,we.strstart=0,we.block_start=0,we.lookahead=0,we.insert=0,we.match_length=we.prev_length=2,we.match_available=0,we.ins_h=0),ge}function _e(W,we,ge,ae,Ue,Ee){if(!W)return w;var Ge=1;if(we===-1&&(we=6),ae<0?(Ge=0,ae=-ae):ae>15&&(Ge=2,ae-=16),Ue<1||Ue>9||ge!==8||ae<8||ae>15||we<0||we>9||Ee<0||Ee>4)return j(W,w);ae===8&&(ae=9);var tt=new Te;return W.state=tt,tt.strm=W,tt.wrap=Ge,tt.gzhead=null,tt.w_bits=ae,tt.w_size=1<<tt.w_bits,tt.w_mask=tt.w_size-1,tt.hash_bits=Ue+7,tt.hash_size=1<<tt.hash_bits,tt.hash_mask=tt.hash_size-1,tt.hash_shift=~~((tt.hash_bits+3-1)/3),tt.window=new c.Buf8(2*tt.w_size),tt.head=new c.Buf16(tt.hash_size),tt.prev=new c.Buf16(tt.w_size),tt.lit_bufsize=1<<Ue+6,tt.pending_buf_size=4*tt.lit_bufsize,tt.pending_buf=new c.Buf8(tt.pending_buf_size),tt.d_buf=1*tt.lit_bufsize,tt.l_buf=3*tt.lit_bufsize,tt.level=we,tt.strategy=Ee,tt.method=ge,Ve(W)}o=[new be(0,0,0,0,function(W,we){var ge=65535;for(ge>W.pending_buf_size-5&&(ge=W.pending_buf_size-5);;){if(W.lookahead<=1){if(q(W),W.lookahead===0&&we===0)return 1;if(W.lookahead===0)break}W.strstart+=W.lookahead,W.lookahead=0;var ae=W.block_start+ge;if((W.strstart===0||W.strstart>=ae)&&(W.lookahead=W.strstart-ae,W.strstart=ae,E(W,!1),W.strm.avail_out===0)||W.strstart-W.block_start>=W.w_size-v&&(E(W,!1),W.strm.avail_out===0))return 1}return W.insert=0,we===4?(E(W,!0),W.strm.avail_out===0?3:4):(W.strstart>W.block_start&&(E(W,!1),W.strm.avail_out),1)}),new be(4,4,8,4,he),new be(4,5,16,8,he),new be(4,6,32,32,he),new be(4,4,16,16,Oe),new be(8,16,32,32,Oe),new be(8,16,128,128,Oe),new be(8,32,128,256,Oe),new be(32,128,258,1024,Oe),new be(32,258,258,4096,Oe)],r.deflateInit=function(W,we){return _e(W,we,8,15,8,0)},r.deflateInit2=_e,r.deflateReset=Ve,r.deflateResetKeep=Ae,r.deflateSetHeader=function(W,we){return W&&W.state?W.state.wrap!==2?w:(W.state.gzhead=we,0):w},r.deflate=function(W,we){var ge,ae,Ue,Ee;if(!W||!W.state||we>5||we<0)return W?j(W,w):w;if(ae=W.state,!W.output||!W.input&&W.avail_in!==0||ae.status===P&&we!==4)return j(W,W.avail_out===0?-5:w);if(ae.strm=W,ge=ae.last_flush,ae.last_flush=we,ae.status===42)if(ae.wrap===2)W.adler=0,K(ae,31),K(ae,139),K(ae,8),ae.gzhead?(K(ae,(ae.gzhead.text?1:0)+(ae.gzhead.hcrc?2:0)+(ae.gzhead.extra?4:0)+(ae.gzhead.name?8:0)+(ae.gzhead.comment?16:0)),K(ae,255&ae.gzhead.time),K(ae,ae.gzhead.time>>8&255),K(ae,ae.gzhead.time>>16&255),K(ae,ae.gzhead.time>>24&255),K(ae,ae.level===9?2:ae.strategy>=2||ae.level<2?4:0),K(ae,255&ae.gzhead.os),ae.gzhead.extra&&ae.gzhead.extra.length&&(K(ae,255&ae.gzhead.extra.length),K(ae,ae.gzhead.extra.length>>8&255)),ae.gzhead.hcrc&&(W.adler=p(W.adler,ae.pending_buf,ae.pending,0)),ae.gzindex=0,ae.status=69):(K(ae,0),K(ae,0),K(ae,0),K(ae,0),K(ae,0),K(ae,ae.level===9?2:ae.strategy>=2||ae.level<2?4:0),K(ae,3),ae.status=H);else{var Ge=8+(ae.w_bits-8<<4)<<8;Ge|=(ae.strategy>=2||ae.level<2?0:ae.level<6?1:ae.level===6?2:3)<<6,ae.strstart!==0&&(Ge|=32),Ge+=31-Ge%31,ae.status=H,Y(ae,Ge),ae.strstart!==0&&(Y(ae,W.adler>>>16),Y(ae,65535&W.adler)),W.adler=1}if(ae.status===69)if(ae.gzhead.extra){for(Ue=ae.pending;ae.gzindex<(65535&ae.gzhead.extra.length)&&(ae.pending!==ae.pending_buf_size||(ae.gzhead.hcrc&&ae.pending>Ue&&(W.adler=p(W.adler,ae.pending_buf,ae.pending-Ue,Ue)),ne(W),Ue=ae.pending,ae.pending!==ae.pending_buf_size));)K(ae,255&ae.gzhead.extra[ae.gzindex]),ae.gzindex++;ae.gzhead.hcrc&&ae.pending>Ue&&(W.adler=p(W.adler,ae.pending_buf,ae.pending-Ue,Ue)),ae.gzindex===ae.gzhead.extra.length&&(ae.gzindex=0,ae.status=73)}else ae.status=73;if(ae.status===73)if(ae.gzhead.name){Ue=ae.pending;do{if(ae.pending===ae.pending_buf_size&&(ae.gzhead.hcrc&&ae.pending>Ue&&(W.adler=p(W.adler,ae.pending_buf,ae.pending-Ue,Ue)),ne(W),Ue=ae.pending,ae.pending===ae.pending_buf_size)){Ee=1;break}Ee=ae.gzindex<ae.gzhead.name.length?255&ae.gzhead.name.charCodeAt(ae.gzindex++):0,K(ae,Ee)}while(Ee!==0);ae.gzhead.hcrc&&ae.pending>Ue&&(W.adler=p(W.adler,ae.pending_buf,ae.pending-Ue,Ue)),Ee===0&&(ae.gzindex=0,ae.status=91)}else ae.status=91;if(ae.status===91)if(ae.gzhead.comment){Ue=ae.pending;do{if(ae.pending===ae.pending_buf_size&&(ae.gzhead.hcrc&&ae.pending>Ue&&(W.adler=p(W.adler,ae.pending_buf,ae.pending-Ue,Ue)),ne(W),Ue=ae.pending,ae.pending===ae.pending_buf_size)){Ee=1;break}Ee=ae.gzindex<ae.gzhead.comment.length?255&ae.gzhead.comment.charCodeAt(ae.gzindex++):0,K(ae,Ee)}while(Ee!==0);ae.gzhead.hcrc&&ae.pending>Ue&&(W.adler=p(W.adler,ae.pending_buf,ae.pending-Ue,Ue)),Ee===0&&(ae.status=k)}else ae.status=k;if(ae.status===k&&(ae.gzhead.hcrc?(ae.pending+2>ae.pending_buf_size&&ne(W),ae.pending+2<=ae.pending_buf_size&&(K(ae,255&W.adler),K(ae,W.adler>>8&255),W.adler=0,ae.status=H)):ae.status=H),ae.pending!==0){if(ne(W),W.avail_out===0)return ae.last_flush=-1,0}else if(W.avail_in===0&&se(we)<=se(ge)&&we!==4)return j(W,-5);if(ae.status===P&&W.avail_in!==0)return j(W,-5);if(W.avail_in!==0||ae.lookahead!==0||we!==0&&ae.status!==P){var tt=ae.strategy===2?(function(ve,ze){for(var rt;;){if(ve.lookahead===0&&(q(ve),ve.lookahead===0)){if(ze===0)return 1;break}if(ve.match_length=0,rt=x._tr_tally(ve,0,ve.window[ve.strstart]),ve.lookahead--,ve.strstart++,rt&&(E(ve,!1),ve.strm.avail_out===0))return 1}return ve.insert=0,ze===4?(E(ve,!0),ve.strm.avail_out===0?3:4):ve.last_lit&&(E(ve,!1),ve.strm.avail_out===0)?1:2})(ae,we):ae.strategy===3?(function(ve,ze){for(var rt,at,Ke,ft,vt=ve.window;;){if(ve.lookahead<=C){if(q(ve),ve.lookahead<=C&&ze===0)return 1;if(ve.lookahead===0)break}if(ve.match_length=0,ve.lookahead>=3&&ve.strstart>0&&(at=vt[Ke=ve.strstart-1])===vt[++Ke]&&at===vt[++Ke]&&at===vt[++Ke]){ft=ve.strstart+C;do;while(at===vt[++Ke]&&at===vt[++Ke]&&at===vt[++Ke]&&at===vt[++Ke]&&at===vt[++Ke]&&at===vt[++Ke]&&at===vt[++Ke]&&at===vt[++Ke]&&Ke<ft);ve.match_length=C-(ft-Ke),ve.match_length>ve.lookahead&&(ve.match_length=ve.lookahead)}if(ve.match_length>=3?(rt=x._tr_tally(ve,1,ve.match_length-3),ve.lookahead-=ve.match_length,ve.strstart+=ve.match_length,ve.match_length=0):(rt=x._tr_tally(ve,0,ve.window[ve.strstart]),ve.lookahead--,ve.strstart++),rt&&(E(ve,!1),ve.strm.avail_out===0))return 1}return ve.insert=0,ze===4?(E(ve,!0),ve.strm.avail_out===0?3:4):ve.last_lit&&(E(ve,!1),ve.strm.avail_out===0)?1:2})(ae,we):o[ae.level].func(ae,we);if(tt!==3&&tt!==4||(ae.status=P),tt===1||tt===3)return W.avail_out===0&&(ae.last_flush=-1),0;if(tt===2&&(we===1?x._tr_align(ae):we!==5&&(x._tr_stored_block(ae,0,0,!1),we===3&&(ce(ae.head),ae.lookahead===0&&(ae.strstart=0,ae.block_start=0,ae.insert=0))),ne(W),W.avail_out===0))return ae.last_flush=-1,0}return we!==4?0:ae.wrap<=0?1:(ae.wrap===2?(K(ae,255&W.adler),K(ae,W.adler>>8&255),K(ae,W.adler>>16&255),K(ae,W.adler>>24&255),K(ae,255&W.total_in),K(ae,W.total_in>>8&255),K(ae,W.total_in>>16&255),K(ae,W.total_in>>24&255)):(Y(ae,W.adler>>>16),Y(ae,65535&W.adler)),ne(W),ae.wrap>0&&(ae.wrap=-ae.wrap),ae.pending!==0?0:1)},r.deflateEnd=function(W){var we;return W&&W.state?(we=W.state.status)!==42&&we!==69&&we!==73&&we!==91&&we!==k&&we!==H&&we!==P?j(W,w):(W.state=null,we===H?j(W,-3):0):w},r.deflateSetDictionary=function(W,we){var ge,ae,Ue,Ee,Ge,tt,ve,ze,rt=we.length;if(!W||!W.state||(Ee=(ge=W.state).wrap)===2||Ee===1&&ge.status!==42||ge.lookahead)return w;for(Ee===1&&(W.adler=u(W.adler,we,rt,0)),ge.wrap=0,rt>=ge.w_size&&(Ee===0&&(ce(ge.head),ge.strstart=0,ge.block_start=0,ge.insert=0),ze=new c.Buf8(ge.w_size),c.arraySet(ze,we,rt-ge.w_size,ge.w_size,0),we=ze,rt=ge.w_size),Ge=W.avail_in,tt=W.next_in,ve=W.input,W.avail_in=rt,W.next_in=0,W.input=we,q(ge);ge.lookahead>=3;){ae=ge.strstart,Ue=ge.lookahead-2;do ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[ae+3-1])&ge.hash_mask,ge.prev[ae&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=ae,ae++;while(--Ue);ge.strstart=ae,ge.lookahead=2,q(ge)}return ge.strstart+=ge.lookahead,ge.block_start=ge.strstart,ge.insert=ge.lookahead,ge.lookahead=0,ge.match_length=ge.prev_length=2,ge.match_available=0,W.next_in=tt,W.input=ve,W.avail_in=Ge,ge.wrap=Ee,0},r.deflateInfo="pako deflate (from Nodeca project)"},111:(e,r,s)=>{var o;o={},e.exports=o,(function(c,x){c.toRGBA8=function(u){var p=u.width,d=u.height;if(u.tabs.acTL==null)return[c.toRGBA8.decodeImage(u.data,p,d,u).buffer];var w=[];u.frames[0].data==null&&(u.frames[0].data=u.data);for(var C,v=new Uint8Array(p*d*4),k=0;k<u.frames.length;k++){var H=u.frames[k],P=H.rect.x,j=H.rect.y,se=H.rect.width,ce=H.rect.height,ne=c.toRGBA8.decodeImage(H.data,se,ce,u);if(k==0?C=ne:H.blend==0?c._copyTile(ne,se,ce,C,p,d,P,j,0):H.blend==1&&c._copyTile(ne,se,ce,C,p,d,P,j,1),w.push(C.buffer),C=C.slice(0),H.dispose!=0){if(H.dispose==1)c._copyTile(v,se,ce,C,p,d,P,j,0);else if(H.dispose==2){for(var E=k-1;u.frames[E].dispose==2;)E--;C=new Uint8Array(w[E]).slice(0)}}}return w},c.toRGBA8.decodeImage=function(u,p,d,w){var C=p*d,v=c.decode._getBPP(w),k=Math.ceil(p*v/8),H=new Uint8Array(4*C),P=new Uint32Array(H.buffer),j=w.ctype,se=w.depth,ce=c._bin.readUshort;if(j==6){var ne=C<<2;if(se==8)for(var E=0;E<ne;E++)H[E]=u[E];if(se==16)for(E=0;E<ne;E++)H[E]=u[E<<1]}else if(j==2){var K=w.tabs.tRNS,Y=-1,re=-1,ue=-1;if(K&&(Y=K[0],re=K[1],ue=K[2]),se==8)for(E=0;E<C;E++){var q=3*E;H[_e=E<<2]=u[q],H[_e+1]=u[q+1],H[_e+2]=u[q+2],H[_e+3]=255,Y!=-1&&u[q]==Y&&u[q+1]==re&&u[q+2]==ue&&(H[_e+3]=0)}if(se==16)for(E=0;E<C;E++)q=6*E,H[_e=E<<2]=u[q],H[_e+1]=u[q+2],H[_e+2]=u[q+4],H[_e+3]=255,Y!=-1&&ce(u,q)==Y&&ce(u,q+2)==re&&ce(u,q+4)==ue&&(H[_e+3]=0)}else if(j==3){var he=w.tabs.PLTE,Oe=w.tabs.tRNS,be=Oe?Oe.length:0;if(se==1)for(var Te=0;Te<d;Te++){var Ae=Te*k,Ve=Te*p;for(E=0;E<p;E++){var _e=Ve+E<<2,W=3*(we=u[Ae+(E>>3)]>>7-(7&E)&1);H[_e]=he[W],H[_e+1]=he[W+1],H[_e+2]=he[W+2],H[_e+3]=we<be?Oe[we]:255}}if(se==2)for(Te=0;Te<d;Te++)for(Ae=Te*k,Ve=Te*p,E=0;E<p;E++)_e=Ve+E<<2,W=3*(we=u[Ae+(E>>2)]>>6-((3&E)<<1)&3),H[_e]=he[W],H[_e+1]=he[W+1],H[_e+2]=he[W+2],H[_e+3]=we<be?Oe[we]:255;if(se==4)for(Te=0;Te<d;Te++)for(Ae=Te*k,Ve=Te*p,E=0;E<p;E++)_e=Ve+E<<2,W=3*(we=u[Ae+(E>>1)]>>4-((1&E)<<2)&15),H[_e]=he[W],H[_e+1]=he[W+1],H[_e+2]=he[W+2],H[_e+3]=we<be?Oe[we]:255;if(se==8)for(E=0;E<C;E++){var we;_e=E<<2,W=3*(we=u[E]),H[_e]=he[W],H[_e+1]=he[W+1],H[_e+2]=he[W+2],H[_e+3]=we<be?Oe[we]:255}}else if(j==4){if(se==8)for(E=0;E<C;E++){_e=E<<2;var ge=u[ae=E<<1];H[_e]=ge,H[_e+1]=ge,H[_e+2]=ge,H[_e+3]=u[ae+1]}if(se==16)for(E=0;E<C;E++){var ae;_e=E<<2,ge=u[ae=E<<2],H[_e]=ge,H[_e+1]=ge,H[_e+2]=ge,H[_e+3]=u[ae+2]}}else if(j==0){if(Y=w.tabs.tRNS?w.tabs.tRNS:-1,se==1)for(E=0;E<C;E++){var Ue=(ge=255*(u[E>>3]>>7-(7&E)&1))==255*Y?0:255;P[E]=Ue<<24|ge<<16|ge<<8|ge}if(se==2)for(E=0;E<C;E++)Ue=(ge=85*(u[E>>2]>>6-((3&E)<<1)&3))==85*Y?0:255,P[E]=Ue<<24|ge<<16|ge<<8|ge;if(se==4)for(E=0;E<C;E++)Ue=(ge=17*(u[E>>1]>>4-((1&E)<<2)&15))==17*Y?0:255,P[E]=Ue<<24|ge<<16|ge<<8|ge;if(se==8)for(E=0;E<C;E++)Ue=(ge=u[E])==Y?0:255,P[E]=Ue<<24|ge<<16|ge<<8|ge;if(se==16)for(E=0;E<C;E++)ge=u[E<<1],Ue=ce(u,E<<1)==Y?0:255,P[E]=Ue<<24|ge<<16|ge<<8|ge}return H},c.decode=function(u){for(var p,d=new Uint8Array(u),w=8,C=c._bin,v=C.readUshort,k=C.readUint,H={tabs:{},frames:[]},P=new Uint8Array(d.length),j=0,se=0,ce=[137,80,78,71,13,10,26,10],ne=0;ne<8;ne++)if(d[ne]!=ce[ne])throw"The input is not a PNG file!";for(;w<d.length;){var E=C.readUint(d,w);w+=4;var K=C.readASCII(d,w,4);if(w+=4,K=="IHDR")c.decode._IHDR(d,w,H);else if(K=="IDAT"){for(ne=0;ne<E;ne++)P[j+ne]=d[w+ne];j+=E}else if(K=="acTL")H.tabs[K]={num_frames:k(d,w),num_plays:k(d,w+4)},p=new Uint8Array(d.length);else if(K=="fcTL"){se!=0&&((Ae=H.frames[H.frames.length-1]).data=c.decode._decompress(H,p.slice(0,se),Ae.rect.width,Ae.rect.height),se=0);var Y={x:k(d,w+12),y:k(d,w+16),width:k(d,w+4),height:k(d,w+8)},re=v(d,w+22);re=v(d,w+20)/(re==0?100:re);var ue={rect:Y,delay:Math.round(1e3*re),dispose:d[w+24],blend:d[w+25]};H.frames.push(ue)}else if(K=="fdAT"){for(ne=0;ne<E-4;ne++)p[se+ne]=d[w+ne+4];se+=E-4}else if(K=="pHYs")H.tabs[K]=[C.readUint(d,w),C.readUint(d,w+4),d[w+8]];else if(K=="cHRM")for(H.tabs[K]=[],ne=0;ne<8;ne++)H.tabs[K].push(C.readUint(d,w+4*ne));else if(K=="tEXt"){H.tabs[K]==null&&(H.tabs[K]={});var q=C.nextZero(d,w),he=C.readASCII(d,w,q-w),Oe=C.readASCII(d,q+1,w+E-q-1);H.tabs[K][he]=Oe}else if(K=="iTXt"){H.tabs[K]==null&&(H.tabs[K]={}),q=0;var be=w;q=C.nextZero(d,be),he=C.readASCII(d,be,q-be),d[be=q+1],d[be+1],be+=2,q=C.nextZero(d,be),C.readASCII(d,be,q-be),be=q+1,q=C.nextZero(d,be),C.readUTF8(d,be,q-be),be=q+1,Oe=C.readUTF8(d,be,E-(be-w)),H.tabs[K][he]=Oe}else if(K=="PLTE")H.tabs[K]=C.readBytes(d,w,E);else if(K=="hIST"){var Te=H.tabs.PLTE.length/3;for(H.tabs[K]=[],ne=0;ne<Te;ne++)H.tabs[K].push(v(d,w+2*ne))}else if(K=="tRNS")H.ctype==3?H.tabs[K]=C.readBytes(d,w,E):H.ctype==0?H.tabs[K]=v(d,w):H.ctype==2&&(H.tabs[K]=[v(d,w),v(d,w+2),v(d,w+4)]);else if(K=="gAMA")H.tabs[K]=C.readUint(d,w)/1e5;else if(K=="sRGB")H.tabs[K]=d[w];else if(K=="bKGD")H.ctype==0||H.ctype==4?H.tabs[K]=[v(d,w)]:H.ctype==2||H.ctype==6?H.tabs[K]=[v(d,w),v(d,w+2),v(d,w+4)]:H.ctype==3&&(H.tabs[K]=d[w]);else if(K=="IEND"){var Ae;se!=0&&((Ae=H.frames[H.frames.length-1]).data=c.decode._decompress(H,p.slice(0,se),Ae.rect.width,Ae.rect.height),se=0),H.data=c.decode._decompress(H,P,H.width,H.height);break}w+=E,C.readUint(d,w),w+=4}return delete H.compress,delete H.interlace,delete H.filter,H},c.decode._decompress=function(u,p,d,w){return u.compress==0&&(p=c.decode._inflate(p)),u.interlace==0?p=c.decode._filterZero(p,u,0,d,w):u.interlace==1&&(p=c.decode._readInterlace(p,u)),p},c.decode._inflate=function(u){return x.inflate(u)},c.decode._readInterlace=function(u,p){for(var d=p.width,w=p.height,C=c.decode._getBPP(p),v=C>>3,k=Math.ceil(d*C/8),H=new Uint8Array(w*k),P=0,j=[0,0,4,0,2,0,1],se=[0,4,0,2,0,1,0],ce=[8,8,8,4,4,2,2],ne=[8,8,4,4,2,2,1],E=0;E<7;){for(var K=ce[E],Y=ne[E],re=0,ue=0,q=j[E];q<w;)q+=K,ue++;for(var he=se[E];he<d;)he+=Y,re++;var Oe=Math.ceil(re*C/8);c.decode._filterZero(u,p,P,re,ue);for(var be=0,Te=j[E];Te<w;){for(var Ae=se[E],Ve=P+be*Oe<<3;Ae<d;){var _e;if(C==1&&(_e=(_e=u[Ve>>3])>>7-(7&Ve)&1,H[Te*k+(Ae>>3)]|=_e<<7-(3&Ae)),C==2&&(_e=(_e=u[Ve>>3])>>6-(7&Ve)&3,H[Te*k+(Ae>>2)]|=_e<<6-((3&Ae)<<1)),C==4&&(_e=(_e=u[Ve>>3])>>4-(7&Ve)&15,H[Te*k+(Ae>>1)]|=_e<<4-((1&Ae)<<2)),C>=8)for(var W=Te*k+Ae*v,we=0;we<v;we++)H[W+we]=u[(Ve>>3)+we];Ve+=C,Ae+=Y}be++,Te+=K}re*ue!=0&&(P+=ue*(1+Oe)),E+=1}return H},c.decode._getBPP=function(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth},c.decode._filterZero=function(u,p,d,w,C){var v=c.decode._getBPP(p),k=Math.ceil(w*v/8),H=c.decode._paeth;v=Math.ceil(v/8);for(var P=0;P<C;P++){var j=d+P*k,se=j+P+1,ce=u[se-1];if(ce==0)for(var ne=0;ne<k;ne++)u[j+ne]=u[se+ne];else if(ce==1){for(ne=0;ne<v;ne++)u[j+ne]=u[se+ne];for(ne=v;ne<k;ne++)u[j+ne]=u[se+ne]+u[j+ne-v]&255}else if(P==0){for(ne=0;ne<v;ne++)u[j+ne]=u[se+ne];if(ce==2)for(ne=v;ne<k;ne++)u[j+ne]=255&u[se+ne];if(ce==3)for(ne=v;ne<k;ne++)u[j+ne]=u[se+ne]+(u[j+ne-v]>>1)&255;if(ce==4)for(ne=v;ne<k;ne++)u[j+ne]=u[se+ne]+H(u[j+ne-v],0,0)&255}else{if(ce==2)for(ne=0;ne<k;ne++)u[j+ne]=u[se+ne]+u[j+ne-k]&255;if(ce==3){for(ne=0;ne<v;ne++)u[j+ne]=u[se+ne]+(u[j+ne-k]>>1)&255;for(ne=v;ne<k;ne++)u[j+ne]=u[se+ne]+(u[j+ne-k]+u[j+ne-v]>>1)&255}if(ce==4){for(ne=0;ne<v;ne++)u[j+ne]=u[se+ne]+H(0,u[j+ne-k],0)&255;for(ne=v;ne<k;ne++)u[j+ne]=u[se+ne]+H(u[j+ne-v],u[j+ne-k],u[j+ne-v-k])&255}}}return u},c.decode._paeth=function(u,p,d){var w=u+p-d,C=Math.abs(w-u),v=Math.abs(w-p),k=Math.abs(w-d);return C<=v&&C<=k?u:v<=k?p:d},c.decode._IHDR=function(u,p,d){var w=c._bin;d.width=w.readUint(u,p),p+=4,d.height=w.readUint(u,p),p+=4,d.depth=u[p],p++,d.ctype=u[p],p++,d.compress=u[p],p++,d.filter=u[p],p++,d.interlace=u[p],p++},c._bin={nextZero:function(u,p){for(;u[p]!=0;)p++;return p},readUshort:function(u,p){return u[p]<<8|u[p+1]},writeUshort:function(u,p,d){u[p]=d>>8&255,u[p+1]=255&d},readUint:function(u,p){return 16777216*u[p]+(u[p+1]<<16|u[p+2]<<8|u[p+3])},writeUint:function(u,p,d){u[p]=d>>24&255,u[p+1]=d>>16&255,u[p+2]=d>>8&255,u[p+3]=255&d},readASCII:function(u,p,d){for(var w="",C=0;C<d;C++)w+=String.fromCharCode(u[p+C]);return w},writeASCII:function(u,p,d){for(var w=0;w<d.length;w++)u[p+w]=d.charCodeAt(w)},readBytes:function(u,p,d){for(var w=[],C=0;C<d;C++)w.push(u[p+C]);return w},pad:function(u){return u.length<2?"0"+u:u},readUTF8:function(u,p,d){for(var w,C="",v=0;v<d;v++)C+="%"+c._bin.pad(u[p+v].toString(16));try{w=decodeURIComponent(C)}catch{return c._bin.readASCII(u,p,d)}return w}},c._copyTile=function(u,p,d,w,C,v,k,H,P){for(var j=Math.min(p,C),se=Math.min(d,v),ce=0,ne=0,E=0;E<se;E++)for(var K=0;K<j;K++)if(k>=0&&H>=0?(ce=E*p+K<<2,ne=(H+E)*C+k+K<<2):(ce=(-H+E)*p-k+K<<2,ne=E*C+K<<2),P==0)w[ne]=u[ce],w[ne+1]=u[ce+1],w[ne+2]=u[ce+2],w[ne+3]=u[ce+3];else if(P==1){var Y=u[ce+3]*.00392156862745098,re=u[ce]*Y,ue=u[ce+1]*Y,q=u[ce+2]*Y,he=w[ne+3]*(1/255),Oe=w[ne]*he,be=w[ne+1]*he,Te=w[ne+2]*he,Ae=1-Y,Ve=Y+he*Ae,_e=Ve==0?0:1/Ve;w[ne+3]=255*Ve,w[ne+0]=(re+Oe*Ae)*_e,w[ne+1]=(ue+be*Ae)*_e,w[ne+2]=(q+Te*Ae)*_e}else if(P==2)Y=u[ce+3],re=u[ce],ue=u[ce+1],q=u[ce+2],he=w[ne+3],Oe=w[ne],be=w[ne+1],Te=w[ne+2],Y==he&&re==Oe&&ue==be&&q==Te?(w[ne]=0,w[ne+1]=0,w[ne+2]=0,w[ne+3]=0):(w[ne]=re,w[ne+1]=ue,w[ne+2]=q,w[ne+3]=Y);else if(P==3){if(Y=u[ce+3],re=u[ce],ue=u[ce+1],q=u[ce+2],he=w[ne+3],Oe=w[ne],be=w[ne+1],Te=w[ne+2],Y==he&&re==Oe&&ue==be&&q==Te)continue;if(Y<220&&he>20)return!1}return!0},c.encode=function(u,p,d,w,C,v){w==null&&(w=0),v==null&&(v=!1);for(var k=new Uint8Array(u[0].byteLength*u.length+100),H=[137,80,78,71,13,10,26,10],P=0;P<8;P++)k[P]=H[P];var j=8,se=c._bin,ce=c.crc.crc,ne=se.writeUint,E=se.writeUshort,K=se.writeASCII,Y=c.encode.compressPNG(u,p,d,w,v);ne(k,j,13),K(k,j+=4,"IHDR"),ne(k,j+=4,p),ne(k,j+=4,d),k[j+=4]=Y.depth,k[++j]=Y.ctype,k[++j]=0,k[++j]=0,k[++j]=0,ne(k,++j,ce(k,j-17,17)),ne(k,j+=4,1),K(k,j+=4,"sRGB"),k[j+=4]=1,ne(k,++j,ce(k,j-5,5)),j+=4;var re=u.length>1;if(re&&(ne(k,j,8),K(k,j+=4,"acTL"),ne(k,j+=4,u.length),ne(k,j+=4,0),ne(k,j+=4,ce(k,j-12,12)),j+=4),Y.ctype==3){for(ne(k,j,3*(_e=Y.plte.length)),K(k,j+=4,"PLTE"),j+=4,P=0;P<_e;P++){var ue=3*P,q=Y.plte[P],he=255&q,Oe=q>>8&255,be=q>>16&255;k[j+ue+0]=he,k[j+ue+1]=Oe,k[j+ue+2]=be}if(ne(k,j+=3*_e,ce(k,j-3*_e-4,3*_e+4)),j+=4,Y.gotAlpha){for(ne(k,j,_e),K(k,j+=4,"tRNS"),j+=4,P=0;P<_e;P++)k[j+P]=Y.plte[P]>>24&255;ne(k,j+=_e,ce(k,j-_e-4,_e+4)),j+=4}}for(var Te=0,Ae=0;Ae<Y.frames.length;Ae++){var Ve=Y.frames[Ae];re&&(ne(k,j,26),K(k,j+=4,"fcTL"),ne(k,j+=4,Te++),ne(k,j+=4,Ve.rect.width),ne(k,j+=4,Ve.rect.height),ne(k,j+=4,Ve.rect.x),ne(k,j+=4,Ve.rect.y),E(k,j+=4,C[Ae]),E(k,j+=2,1e3),k[j+=2]=Ve.dispose,k[++j]=Ve.blend,ne(k,++j,ce(k,j-30,30)),j+=4);var _e,W=Ve.cimg;ne(k,j,(_e=W.length)+(Ae==0?0:4));var we=j+=4;for(K(k,j,Ae==0?"IDAT":"fdAT"),j+=4,Ae!=0&&(ne(k,j,Te++),j+=4),P=0;P<_e;P++)k[j+P]=W[P];ne(k,j+=_e,ce(k,we,j-we)),j+=4}return ne(k,j,0),K(k,j+=4,"IEND"),ne(k,j+=4,ce(k,j-4,4)),j+=4,k.buffer.slice(0,j)},c.encode.compressPNG=function(u,p,d,w,C){for(var v=c.encode.compress(u,p,d,w,!1,C),k=0;k<u.length;k++){var H=v.frames[k],P=(H.rect.width,H.rect.height),j=H.bpl,se=H.bpp,ce=new Uint8Array(P*j+P);H.cimg=c.encode._filterZero(H.img,P,se,j,ce)}return v},c.encode.compress=function(u,p,d,w,C,v){v==null&&(v=!1);for(var k=6,H=8,P=4,j=255,se=0;se<u.length;se++)for(var ce=new Uint8Array(u[se]),ne=ce.length,E=0;E<ne;E+=4)j&=ce[E+3];var K=j!=255,Y={},re=[];if(u.length!=0&&(Y[0]=0,re.push(0),w!=0&&w--),w!=0){var ue=c.quantize(u,w,C);for(u=ue.bufs,E=0;E<ue.plte.length;E++)Y[he=ue.plte[E].est.rgba]==null&&(Y[he]=re.length,re.push(he))}else for(se=0;se<u.length;se++){var q=new Uint32Array(u[se]);for(ne=q.length,E=0;E<ne;E++){var he=q[E];if((E<p||he!=q[E-1]&&he!=q[E-p])&&Y[he]==null&&(Y[he]=re.length,re.push(he),re.length>=300))break}}var Oe=!!K&&C,be=re.length;be<=256&&v==0&&(H=be<=2?1:be<=4?2:be<=16?4:8,C&&(H=8),K=!0);var Te=[];for(se=0;se<u.length;se++){var Ae=new Uint8Array(u[se]),Ve=new Uint32Array(Ae.buffer),_e=0,W=0,we=p,ge=d,ae=0;if(se!=0&&!Oe){for(var Ue=C||se==1||Te[Te.length-2].dispose==2?1:2,Ee=0,Ge=1e9,tt=0;tt<Ue;tt++){for(var ve=new Uint8Array(u[se-1-tt]),ze=new Uint32Array(u[se-1-tt]),rt=p,at=d,Ke=-1,ft=-1,vt=0;vt<d;vt++)for(var yt=0;yt<p;yt++)Ve[E=vt*p+yt]!=ze[E]&&(yt<rt&&(rt=yt),yt>Ke&&(Ke=yt),vt<at&&(at=vt),vt>ft&&(ft=vt));var Kt=Ke==-1?1:(Ke-rt+1)*(ft-at+1);Kt<Ge&&(Ge=Kt,Ee=tt,Ke==-1?(_e=W=0,we=ge=1):(_e=rt,W=at,we=Ke-rt+1,ge=ft-at+1))}ve=new Uint8Array(u[se-1-Ee]),Ee==1&&(Te[Te.length-1].dispose=2);var zt=new Uint8Array(we*ge*4);new Uint32Array(zt.buffer),c._copyTile(ve,p,d,zt,we,ge,-_e,-W,0),c._copyTile(Ae,p,d,zt,we,ge,-_e,-W,3)?(c._copyTile(Ae,p,d,zt,we,ge,-_e,-W,2),ae=1):(c._copyTile(Ae,p,d,zt,we,ge,-_e,-W,0),ae=0),Ae=zt,Ve=new Uint32Array(Ae.buffer)}var vr=4*we;if(be<=256&&v==0){for(vr=Math.ceil(H*we/8),zt=new Uint8Array(vr*ge),vt=0;vt<ge;vt++){E=vt*vr;var yr=vt*we;if(H==8)for(yt=0;yt<we;yt++)zt[E+yt]=Y[Ve[yr+yt]];else if(H==4)for(yt=0;yt<we;yt++)zt[E+(yt>>1)]|=Y[Ve[yr+yt]]<<4-4*(1&yt);else if(H==2)for(yt=0;yt<we;yt++)zt[E+(yt>>2)]|=Y[Ve[yr+yt]]<<6-2*(3&yt);else if(H==1)for(yt=0;yt<we;yt++)zt[E+(yt>>3)]|=Y[Ve[yr+yt]]<<7-1*(7&yt)}Ae=zt,k=3,P=1}else if(K==0&&u.length==1){zt=new Uint8Array(we*ge*3);var jr=we*ge;for(E=0;E<jr;E++){var Lr=3*E,Cr=4*E;zt[Lr]=Ae[Cr],zt[Lr+1]=Ae[Cr+1],zt[Lr+2]=Ae[Cr+2]}Ae=zt,k=2,P=3,vr=3*we}Te.push({rect:{x:_e,y:W,width:we,height:ge},img:Ae,bpl:vr,bpp:P,blend:ae,dispose:Oe?1:0})}return{ctype:k,depth:H,plte:re,gotAlpha:K,frames:Te}},c.encode._filterZero=function(u,p,d,w,C){for(var v=[],k=0;k<5;k++)if(!(p*w>5e5)||k!=2&&k!=3&&k!=4){for(var H=0;H<p;H++)c.encode._filterLine(C,u,H,w,d,k);if(v.push(x.deflate(C)),d==1)break}for(var P,j=1e9,se=0;se<v.length;se++)v[se].length<j&&(P=se,j=v[se].length);return v[P]},c.encode._filterLine=function(u,p,d,w,C,v){var k=d*w,H=k+d,P=c.decode._paeth;if(u[H]=v,H++,v==0)for(var j=0;j<w;j++)u[H+j]=p[k+j];else if(v==1){for(j=0;j<C;j++)u[H+j]=p[k+j];for(j=C;j<w;j++)u[H+j]=p[k+j]-p[k+j-C]+256&255}else if(d==0){for(j=0;j<C;j++)u[H+j]=p[k+j];if(v==2)for(j=C;j<w;j++)u[H+j]=p[k+j];if(v==3)for(j=C;j<w;j++)u[H+j]=p[k+j]-(p[k+j-C]>>1)+256&255;if(v==4)for(j=C;j<w;j++)u[H+j]=p[k+j]-P(p[k+j-C],0,0)+256&255}else{if(v==2)for(j=0;j<w;j++)u[H+j]=p[k+j]+256-p[k+j-w]&255;if(v==3){for(j=0;j<C;j++)u[H+j]=p[k+j]+256-(p[k+j-w]>>1)&255;for(j=C;j<w;j++)u[H+j]=p[k+j]+256-(p[k+j-w]+p[k+j-C]>>1)&255}if(v==4){for(j=0;j<C;j++)u[H+j]=p[k+j]+256-P(0,p[k+j-w],0)&255;for(j=C;j<w;j++)u[H+j]=p[k+j]+256-P(p[k+j-C],p[k+j-w],p[k+j-C-w])&255}}},c.crc={table:(function(){for(var u=new Uint32Array(256),p=0;p<256;p++){for(var d=p,w=0;w<8;w++)1&d?d=3988292384^d>>>1:d>>>=1;u[p]=d}return u})(),update:function(u,p,d,w){for(var C=0;C<w;C++)u=c.crc.table[255&(u^p[d+C])]^u>>>8;return u},crc:function(u,p,d){return 4294967295^c.crc.update(4294967295,u,p,d)}},c.quantize=function(u,p,d){for(var w=[],C=0,v=0;v<u.length;v++)w.push(c.encode.alphaMul(new Uint8Array(u[v]),d)),C+=u[v].byteLength;var k=new Uint8Array(C),H=new Uint32Array(k.buffer),P=0;for(v=0;v<w.length;v++){for(var j=w[v],se=j.length,ce=0;ce<se;ce++)k[P+ce]=j[ce];P+=se}var ne={i0:0,i1:k.length,bst:null,est:null,tdst:0,left:null,right:null};ne.bst=c.quantize.stats(k,ne.i0,ne.i1),ne.est=c.quantize.estats(ne.bst);for(var E=[ne];E.length<p;){var K=0,Y=0;for(v=0;v<E.length;v++)E[v].est.L>K&&(K=E[v].est.L,Y=v);if(K<.001)break;var re=E[Y],ue=c.quantize.splitPixels(k,H,re.i0,re.i1,re.est.e,re.est.eMq255),q={i0:re.i0,i1:ue,bst:null,est:null,tdst:0,left:null,right:null};q.bst=c.quantize.stats(k,q.i0,q.i1),q.est=c.quantize.estats(q.bst);var he={i0:ue,i1:re.i1,bst:null,est:null,tdst:0,left:null,right:null};for(he.bst={R:[],m:[],N:re.bst.N-q.bst.N},v=0;v<16;v++)he.bst.R[v]=re.bst.R[v]-q.bst.R[v];for(v=0;v<4;v++)he.bst.m[v]=re.bst.m[v]-q.bst.m[v];he.est=c.quantize.estats(he.bst),re.left=q,re.right=he,E[Y]=q,E.push(he)}E.sort(function(Ue,Ee){return Ee.bst.N-Ue.bst.N});for(var Oe=0;Oe<w.length;Oe++){var be=c.quantize.planeDst,Te=new Uint8Array(w[Oe].buffer),Ae=new Uint32Array(w[Oe].buffer),Ve=Te.length;for(v=0;v<Ve;v+=4){for(var _e=Te[v]*.00392156862745098,W=Te[v+1]*.00392156862745098,we=Te[v+2]*.00392156862745098,ge=Te[v+3]*.00392156862745098,ae=ne;ae.left;)ae=be(ae.est,_e,W,we,ge)<=0?ae.left:ae.right;Ae[v>>2]=ae.est.rgba}w[Oe]=Ae.buffer}return{bufs:w,plte:E}},c.quantize.getNearest=function(u,p,d,w,C){if(u.left==null)return u.tdst=c.quantize.dist(u.est.q,p,d,w,C),u;var v=c.quantize.planeDst(u.est,p,d,w,C),k=u.left,H=u.right;v>0&&(k=u.right,H=u.left);var P=c.quantize.getNearest(k,p,d,w,C);if(P.tdst<=v*v)return P;var j=c.quantize.getNearest(H,p,d,w,C);return j.tdst<P.tdst?j:P},c.quantize.planeDst=function(u,p,d,w,C){var v=u.e;return v[0]*p+v[1]*d+v[2]*w+v[3]*C-u.eMq},c.quantize.dist=function(u,p,d,w,C){var v=p-u[0],k=d-u[1],H=w-u[2],P=C-u[3];return v*v+k*k+H*H+P*P},c.quantize.splitPixels=function(u,p,d,w,C,v){var k=c.quantize.vecDot;for(w-=4;d<w;){for(;k(u,d,C)<=v;)d+=4;for(;k(u,w,C)>v;)w-=4;if(d>=w)break;var H=p[d>>2];p[d>>2]=p[w>>2],p[w>>2]=H,d+=4,w-=4}for(;k(u,d,C)>v;)d-=4;return d+4},c.quantize.vecDot=function(u,p,d){return u[p]*d[0]+u[p+1]*d[1]+u[p+2]*d[2]+u[p+3]*d[3]},c.quantize.stats=function(u,p,d){for(var w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C=[0,0,0,0],v=d-p>>2,k=p;k<d;k+=4){var H=u[k]*.00392156862745098,P=u[k+1]*(1/255),j=u[k+2]*(1/255),se=u[k+3]*(1/255);C[0]+=H,C[1]+=P,C[2]+=j,C[3]+=se,w[0]+=H*H,w[1]+=H*P,w[2]+=H*j,w[3]+=H*se,w[5]+=P*P,w[6]+=P*j,w[7]+=P*se,w[10]+=j*j,w[11]+=j*se,w[15]+=se*se}return w[4]=w[1],w[8]=w[2],w[12]=w[3],w[9]=w[6],w[13]=w[7],w[14]=w[11],{R:w,m:C,N:v}},c.quantize.estats=function(u){var p=u.R,d=u.m,w=u.N,C=d[0],v=d[1],k=d[2],H=d[3],P=w==0?0:1/w,j=[p[0]-C*C*P,p[1]-C*v*P,p[2]-C*k*P,p[3]-C*H*P,p[4]-v*C*P,p[5]-v*v*P,p[6]-v*k*P,p[7]-v*H*P,p[8]-k*C*P,p[9]-k*v*P,p[10]-k*k*P,p[11]-k*H*P,p[12]-H*C*P,p[13]-H*v*P,p[14]-H*k*P,p[15]-H*H*P],se=j,ce=c.M4,ne=[.5,.5,.5,.5],E=0,K=0;if(w!=0)for(var Y=0;Y<10&&(ne=ce.multVec(se,ne),K=Math.sqrt(ce.dot(ne,ne)),ne=ce.sml(1/K,ne),!(Math.abs(K-E)<1e-9));Y++)E=K;var re=[C*P,v*P,k*P,H*P],ue=ce.dot(ce.sml(255,re),ne),q=re[3]<.001?0:1/re[3];return{Cov:j,q:re,e:ne,L:E,eMq255:ue,eMq:ce.dot(ne,re),rgba:(Math.round(255*re[3])<<24|Math.round(255*re[2]*q)<<16|Math.round(255*re[1]*q)<<8|Math.round(255*re[0]*q))>>>0}},c.M4={multVec:function(u,p){return[u[0]*p[0]+u[1]*p[1]+u[2]*p[2]+u[3]*p[3],u[4]*p[0]+u[5]*p[1]+u[6]*p[2]+u[7]*p[3],u[8]*p[0]+u[9]*p[1]+u[10]*p[2]+u[11]*p[3],u[12]*p[0]+u[13]*p[1]+u[14]*p[2]+u[15]*p[3]]},dot:function(u,p){return u[0]*p[0]+u[1]*p[1]+u[2]*p[2]+u[3]*p[3]},sml:function(u,p){return[u*p[0],u*p[1],u*p[2],u*p[3]]}},c.encode.alphaMul=function(u,p){for(var d=new Uint8Array(u.length),w=u.length>>2,C=0;C<w;C++){var v=C<<2,k=u[v+3];p&&(k=k<128?0:255);var H=k*(1/255);d[v+0]=u[v+0]*H,d[v+1]=u[v+1]*H,d[v+2]=u[v+2]*H,d[v+3]=k}return d}})(o,s(788))},165:e=>{e.exports=function(r,s){var o,c,x,u,p,d,w,C,v,k,H,P,j,se,ce,ne,E,K,Y,re,ue,q,he,Oe,be;o=r.state,c=r.next_in,Oe=r.input,x=c+(r.avail_in-5),u=r.next_out,be=r.output,p=u-(s-r.avail_out),d=u+(r.avail_out-257),w=o.dmax,C=o.wsize,v=o.whave,k=o.wnext,H=o.window,P=o.hold,j=o.bits,se=o.lencode,ce=o.distcode,ne=(1<<o.lenbits)-1,E=(1<<o.distbits)-1;e:do{j<15&&(P+=Oe[c++]<<j,j+=8,P+=Oe[c++]<<j,j+=8),K=se[P&ne];t:for(;;){if(P>>>=Y=K>>>24,j-=Y,(Y=K>>>16&255)==0)be[u++]=65535&K;else{if(!(16&Y)){if(64&Y){if(32&Y){o.mode=12;break e}r.msg="invalid literal/length code",o.mode=30;break e}K=se[(65535&K)+(P&(1<<Y)-1)];continue t}for(re=65535&K,(Y&=15)&&(j<Y&&(P+=Oe[c++]<<j,j+=8),re+=P&(1<<Y)-1,P>>>=Y,j-=Y),j<15&&(P+=Oe[c++]<<j,j+=8,P+=Oe[c++]<<j,j+=8),K=ce[P&E];;){if(P>>>=Y=K>>>24,j-=Y,16&(Y=K>>>16&255)){if(ue=65535&K,j<(Y&=15)&&(P+=Oe[c++]<<j,(j+=8)<Y&&(P+=Oe[c++]<<j,j+=8)),(ue+=P&(1<<Y)-1)>w){r.msg="invalid distance too far back",o.mode=30;break e}if(P>>>=Y,j-=Y,ue>(Y=u-p)){if((Y=ue-Y)>v&&o.sane){r.msg="invalid distance too far back",o.mode=30;break e}if(q=0,he=H,k===0){if(q+=C-Y,Y<re){re-=Y;do be[u++]=H[q++];while(--Y);q=u-ue,he=be}}else if(k<Y){if(q+=C+k-Y,(Y-=k)<re){re-=Y;do be[u++]=H[q++];while(--Y);if(q=0,k<re){re-=Y=k;do be[u++]=H[q++];while(--Y);q=u-ue,he=be}}}else if(q+=k-Y,Y<re){re-=Y;do be[u++]=H[q++];while(--Y);q=u-ue,he=be}for(;re>2;)be[u++]=he[q++],be[u++]=he[q++],be[u++]=he[q++],re-=3;re&&(be[u++]=he[q++],re>1&&(be[u++]=he[q++]))}else{q=u-ue;do be[u++]=be[q++],be[u++]=be[q++],be[u++]=be[q++],re-=3;while(re>2);re&&(be[u++]=be[q++],re>1&&(be[u++]=be[q++]))}break}if(64&Y){r.msg="invalid distance code",o.mode=30;break e}K=ce[(65535&K)+(P&(1<<Y)-1)]}}break}}while(c<x&&u<d);c-=re=j>>3,P&=(1<<(j-=re<<3))-1,r.next_in=c,r.next_out=u,r.avail_in=c<x?x-c+5:5-(c-x),r.avail_out=u<d?d-u+257:257-(u-d),o.hold=P,o.bits=j}},185:()=>{$3Dmol.workerString=(function(){self.onmessage=function(e){var r=e.data,s=r.type;if(s<0)self.atomData=r.atoms,self.volume=r.volume,self.ps=new ProteinSurface;else{var o=self.ps;o.initparm(r.expandedExtent,s!=1,self.volume),o.fillvoxels(self.atomData,r.extendedAtoms),o.buildboundary(),s!==4&&s!==2||(o.fastdistancemap(),o.boundingatom(!1),o.fillvoxelswaals(self.atomData,r.extendedAtoms)),o.marchingcube(s);var c=o.getFacesAndVertices(r.atomsToShow);self.postMessage(c)}}}).toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+=`;
function _classCallCheck() {};`,$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;

`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):void 0},222:(e,r,s)=>{s.r(r),s.d(r,{CC:()=>c,Color:()=>o,builtinColorSchemes:()=>v,chains:()=>C,elementColors:()=>d,htmlColors:()=>x,residues:()=>w,ssColors:()=>u});class o{constructor(H,P,j){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof H=="number"?(this.r=H||0,this.g=P||0,this.b=j||0,this):this.set(H||0)}set(H){return H instanceof o?H.clone():(typeof H=="number"?this.setHex(H):typeof H=="object"&&(this.r=H?.r||0,this.g=H?.g||0,this.b=H?.b||0),this)}setHex(H){return H=Math.floor(H),this.r=(H>>16&255)/255,this.g=(H>>8&255)/255,this.b=(255&H)/255,this}getHex(){return Math.round(255*this.r)<<16|Math.round(255*this.g)<<8|Math.round(255*this.b)}clone(){return new o(this.r,this.g,this.b)}copy(H){return this.r=H.r,this.g=H.g,this.b=H.b,this}scaled(){var H={};return H.r=Math.round(255*this.r),H.g=Math.round(255*this.g),H.b=Math.round(255*this.b),H.a=1,H}}class c{static color(H){if(!H)return c.cache[0];if(H instanceof o)return H;if(typeof H=="number"&&c.cache[H]!==void 0)return c.cache[H];if(H&&Array.isArray(H))return H.map(c.color);let P=c.getHex(H),j=new o(P);return c.cache[P]=j,j}static getHex(H){if(Array.isArray(H))return H.map(c.getHex);if(typeof H=="string"){let P=H;if(!isNaN(parseInt(P)))return parseInt(P);if(P=P.trim(),P.length==4&&P[0]=="#"&&(P="#"+P[1]+P[1]+P[2]+P[2]+P[3]+P[3]),P.length==7&&P[0]=="#")return parseInt(P.substring(1),16);let j=c.rgbRegEx.exec(P);if(j){j[1]!=""&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");let ce=0;for(let ne=2;ne<5;ne++){ce*=256;let E=j[ne].endsWith("%")?255*parseFloat(j[ne])/100:parseFloat(j[ne]);ce+=Math.round(E)}return ce}let se=x[P.toLowerCase()];return se!==void 0?se:(console.error("color not found",H.toLowerCase(),x),0)}return H}}c.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,c.cache={0:new o(0)};const x={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074,b:255,g:32768,r:16711680,c:49087,m:12517567,y:12566272,k:0,w:16777215},u={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},p={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},d={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:p,defaultColors:Object.assign({},p),greenCarbon:Object.assign(Object.assign({},p),{C:65280}),cyanCarbon:Object.assign(Object.assign({},p),{C:65535}),magentaCarbon:Object.assign(Object.assign({},p),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},p),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},p),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},p),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},p),{C:8388736}),blueCarbon:Object.assign(Object.assign({},p),{C:255})},w={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},C={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},v={ssPyMol:{prop:"ss",map:u.pyMol},ssJmol:{prop:"ss",map:u.Jmol},Jmol:{prop:"elem",map:d.Jmol},amino:{prop:"resn",map:w.amino},shapely:{prop:"resn",map:w.shapely},nucleic:{prop:"resn",map:w.nucleic},chain:{prop:"chain",map:C.atom},rasmol:{prop:"elem",map:d.rasmol},default:{prop:"elem",map:d.defaultColors},greenCarbon:{prop:"elem",map:d.greenCarbon},chainHetatm:{prop:"chain",map:C.hetatm},cyanCarbon:{prop:"elem",map:d.cyanCarbon},magentaCarbon:{prop:"elem",map:d.magentaCarbon},purpleCarbon:{prop:"elem",map:d.purpleCarbon},whiteCarbon:{prop:"elem",map:d.whiteCarbon},orangeCarbon:{prop:"elem",map:d.orangeCarbon},yellowCarbon:{prop:"elem",map:d.yellowCarbon},blueCarbon:{prop:"elem",map:d.blueCarbon}}},307:e=>{typeof e.exports=="object"&&(e.exports=window.$3Dmol)},358:(e,r,s)=>{var o=s(981),c=15,x=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(w,C,v,k,H,P,j,se){var ce,ne,E,K,Y,re,ue,q,he,Oe=se.bits,be=0,Te=0,Ae=0,Ve=0,_e=0,W=0,we=0,ge=0,ae=0,Ue=0,Ee=null,Ge=0,tt=new o.Buf16(16),ve=new o.Buf16(16),ze=null,rt=0;for(be=0;be<=c;be++)tt[be]=0;for(Te=0;Te<k;Te++)tt[C[v+Te]]++;for(_e=Oe,Ve=c;Ve>=1&&tt[Ve]===0;Ve--);if(_e>Ve&&(_e=Ve),Ve===0)return H[P++]=20971520,H[P++]=20971520,se.bits=1,0;for(Ae=1;Ae<Ve&&tt[Ae]===0;Ae++);for(_e<Ae&&(_e=Ae),ge=1,be=1;be<=c;be++)if(ge<<=1,(ge-=tt[be])<0)return-1;if(ge>0&&(w===0||Ve!==1))return-1;for(ve[1]=0,be=1;be<c;be++)ve[be+1]=ve[be]+tt[be];for(Te=0;Te<k;Te++)C[v+Te]!==0&&(j[ve[C[v+Te]]++]=Te);if(w===0?(Ee=ze=j,re=19):w===1?(Ee=x,Ge-=257,ze=u,rt-=257,re=256):(Ee=p,ze=d,re=-1),Ue=0,Te=0,be=Ae,Y=P,W=_e,we=0,E=-1,K=(ae=1<<_e)-1,w===1&&ae>852||w===2&&ae>592)return 1;for(;;){ue=be-we,j[Te]<re?(q=0,he=j[Te]):j[Te]>re?(q=ze[rt+j[Te]],he=Ee[Ge+j[Te]]):(q=96,he=0),ce=1<<be-we,Ae=ne=1<<W;do H[Y+(Ue>>we)+(ne-=ce)]=ue<<24|q<<16|he;while(ne!==0);for(ce=1<<be-1;Ue&ce;)ce>>=1;if(ce!==0?(Ue&=ce-1,Ue+=ce):Ue=0,Te++,--tt[be]===0){if(be===Ve)break;be=C[v+j[Te]]}if(be>_e&&(Ue&K)!==E){for(we===0&&(we=_e),Y+=Ae,ge=1<<(W=be-we);W+we<Ve&&!((ge-=tt[W+we])<=0);)W++,ge<<=1;if(ae+=1<<W,w===1&&ae>852||w===2&&ae>592)return 1;H[E=Ue&K]=_e<<24|W<<16|Y-P}}return Ue!==0&&(H[Y+Ue]=be-we<<24|4194304),se.bits=_e,0}},378:(e,r,s)=>{var o;s.r(r),s.d(r,{BackSide:()=>x,Camera:()=>rn,ClampToEdgeWrapping:()=>C,Coloring:()=>o,Cylinder:()=>ae.Cylinder,DoubleSide:()=>u,EventDispatcher:()=>K,FloatType:()=>j,Fog:()=>fn,FrontSide:()=>c,Geometry:()=>be,GeometryGroup:()=>Oe,GeometryIDCount:()=>Te,ImposterMaterial:()=>jr,InstancedMaterial:()=>Lr,Light:()=>W,Line:()=>Le,LineBasicMaterial:()=>q,LineStyle:()=>Ce,LinearFilter:()=>v,LinearMipMapLinearFilter:()=>H,Material:()=>re,MaterialIdCount:()=>ue,Matrix3:()=>d.Matrix3,Matrix4:()=>d.Matrix4,Mesh:()=>We,MeshDoubleLambertMaterial:()=>Rr,MeshLambertMaterial:()=>Cr,MeshOutlineMaterial:()=>Pr,NearestFilter:()=>k,Object3D:()=>Ve,Object3DIDCount:()=>Ae,Projector:()=>ge,Quaternion:()=>d.Quaternion,R32Format:()=>ne,RFormat:()=>ce,RGBAFormat:()=>se,Ray:()=>d.Ray,Raycaster:()=>Ge,Renderer:()=>on,Scene:()=>_e,ShaderLib:()=>li,ShaderUtils:()=>Mi,Shading:()=>p,Sphere:()=>ae.Sphere,SphereImposterMaterial:()=>Ei,SphereImposterOutlineMaterial:()=>Br,Sprite:()=>St,SpriteAlignment:()=>w,SpriteMaterial:()=>Wr,SpritePlugin:()=>vn,StickImposterMaterial:()=>Gi,StickImposterOutlineMaterial:()=>Di,Texture:()=>vr,TextureIdCount:()=>yr,TextureOperations:()=>E,Triangle:()=>ae.Triangle,UVMapping:()=>zt,UnsignedByteType:()=>P,Vector2:()=>d.Vector2,Vector3:()=>d.Vector3,VolumetricMaterial:()=>tn,basic:()=>Ht,clamp:()=>d.clamp,clone:()=>Qi,conversionMatrix3:()=>d.conversionMatrix3,degToRad:()=>d.degToRad,instanced:()=>$t,intersectObject:()=>Kt,lambert:()=>Wt,lambertdouble:()=>xi,outline:()=>_i,screen:()=>Ti,screenaa:()=>Zr,sphereimposter:()=>Gr,sphereimposteroutline:()=>Ri,sprite:()=>Ii,stickimposter:()=>qi,stickimposteroutline:()=>Ni,volumetric:()=>Yr}),(function(Yt){Yt[Yt.NoColors=0]="NoColors",Yt[Yt.FaceColors=1]="FaceColors",Yt[Yt.VertexColors=2]="VertexColors"})(o||(o={}));const c=0,x=1,u=2;var p;(function(Yt){Yt[Yt.NoShading=0]="NoShading",Yt[Yt.FlatShading=1]="FlatShading",Yt[Yt.SmoothShading=2]="SmoothShading"})(p||(p={}));var d=s(529);const w={topLeft:new d.Vector2(1,-1),topCenter:new d.Vector2(0,-1),topRight:new d.Vector2(-1,-1),centerLeft:new d.Vector2(1,0),center:new d.Vector2(0,0),centerRight:new d.Vector2(-1,0),bottomLeft:new d.Vector2(1,1),bottomCenter:new d.Vector2(0,1),bottomRight:new d.Vector2(-1,1)},C=1001,v=1006,k=1007,H=1008,P=1009,j=1010,se=1021,ce=1022,ne=1023;var E;(function(Yt){Yt[Yt.MultiplyOperation=0]="MultiplyOperation",Yt[Yt.MixOperation=1]="MixOperation",Yt[Yt.AddOperation=2]="AddOperation"})(E||(E={}));class K{constructor(){this.listeners={}}dispatchEvent(T){var me=this.listeners[T.type];if(me!==void 0){T.target=this;for(var Pe=0,Qe=me.length;Pe<Qe;Pe++)me[Pe].call(this,T)}}removeEventListener(T,me){if(me){var Pe=this.listeners[T].indexOf(me);Pe!==-1&&this.listeners[T].splice(Pe,1)}else this.listeners[T]=[]}addEventListener(T,me){this.listeners[T]===void 0&&(this.listeners[T]=[]),this.listeners[T].indexOf(me)===-1&&this.listeners[T].push(me)}}var Y=s(222);class re extends K{constructor(){super(...arguments),this.id=ue++,this.name="",this.side=c,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1,this.wireframe=!1,this.shaded=!1}setValues(T={}){if(T!==void 0)for(var me in T){var Pe=T[me];if(Pe!==void 0){if(me in this){var Qe=this[me];Qe instanceof Y.Color&&Pe instanceof Y.Color?Qe.copy(Pe):Qe instanceof Y.Color?Qe.set(Pe):Qe instanceof d.Vector3&&Pe instanceof d.Vector3?Qe.copy(Pe):this[me]=Pe}}else console.warn("$3Dmol.Material: '"+me+"' parameter is undefined.")}}clone(T=new re){return T.name=this.name,T.side=this.side,T.opacity=this.opacity,T.transparent=this.transparent,T.depthTest=this.depthTest,T.depthWrite=this.depthWrite,T.polygonOffset=this.polygonOffset,T.polygonOffsetFactor=this.polygonOffsetFactor,T.polygonOffsetUnits=this.polygonOffsetUnits,T.alphaTest=this.alphaTest,T.overdraw=this.overdraw,T.visible=this.visible,T}makeShaded(T){this.shaded=!0,this.uniforms&&(this.uniforms.shading={type:"i",value:T},this.uniforms.vWidth={type:"f",value:1},this.uniforms.vHeight={type:"f",value:1})}dispose(){this.dispatchEvent({type:"dispose"})}}let ue=0;class q extends re{constructor(T){super(),this.color=new Y.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(T)}clone(T=new q){return super.clone.call(this,T),T.color.copy(this.color),T}}const he=65535;class Oe{constructor(T=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.atomArray=Array(),this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=T}setColor(T){var me=this.vertexArray,Pe=this.colorArray;if(!me)throw new Error("vertex array not initialized");if(!Pe)throw new Error("color array not initialized");let Qe=Y.CC.color(T);for(var $e=0;$e<me.length;$e+=3)Pe[$e]=Qe.r,Pe[$e+1]=Qe.g,Pe[$e+2]=Qe.b}setColors(T){var me=this.vertexArray,Pe=this.colorArray;if(!me)throw new Error("vertex array not initialized");if(!Pe)throw new Error("color array not initialized");if(me.length==Pe.length)for(var Qe=0;Qe<me.length;Qe+=3){var $e=T(me[Qe],me[Qe+1],me[Qe+2]);$e instanceof Y.Color||($e=Y.CC.color($e)),Pe[Qe]=$e.r,Pe[Qe+1]=$e.g,Pe[Qe+2]=$e.b}else console.log("Cannot re-color geometry group due to mismatched lengths.")}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw new Error("vertex array not initialized");for(var T,me,Pe,Qe,$e=new d.Vector3,Mt=0;Mt<this.vertices;++Mt)T=3*Mt,me=this.vertexArray[T],Pe=this.vertexArray[T+1],Qe=this.vertexArray[T+2],$e.x+=me,$e.y+=Pe,$e.z+=Qe;return $e.divideScalar(this.vertices),$e}setNormals(){var T=this.faceArray,me=this.vertexArray,Pe=this.normalArray;if(this.vertices&&this.faceidx){if(!T)throw new Error("face array not initialized");if(!me)throw new Error("vertex array not initialized");if(!Pe)throw new Error("normal array not initialized");for(var Qe,$e,Mt,xt,At,Vt,Ut,Xt=0;Xt<T.length/3;++Xt)Qe=3*T[3*Xt],$e=3*T[3*Xt+1],Mt=3*T[3*Xt+2],xt=new d.Vector3(me[Qe],me[Qe+1],me[Qe+2]),At=new d.Vector3(me[$e],me[$e+1],me[$e+2]),Vt=new d.Vector3(me[Mt],me[Mt+1],me[Mt+2]),xt.subVectors(xt,At),Vt.subVectors(Vt,At),Vt.cross(xt),(Ut=Vt).normalize(),Pe[Qe]+=Ut.x,Pe[$e]+=Ut.x,Pe[Mt]+=Ut.x,Pe[Qe+1]+=Ut.y,Pe[$e+1]+=Ut.y,Pe[Mt+1]+=Ut.y,Pe[Qe+2]+=Ut.z,Pe[$e+2]+=Ut.z,Pe[Mt+2]+=Ut.z}}setLineIndices(){if(this.faceidx&&(!this.lineArray||this.lineArray.length!=2*this.faceidx||this.lineidx!=2*this.faceidx)){var T=this.faceArray,me=this.lineArray=new Uint16Array(2*this.faceidx);if(this.lineidx=2*this.faceidx,!T)throw new Error("face array not initialized");for(var Pe=0;Pe<this.faceidx/3;++Pe){var Qe=3*Pe,$e=2*Qe,Mt=T[Qe],xt=T[Qe+1],At=T[Qe+2];me[$e]=Mt,me[$e+1]=xt,me[$e+2]=Mt,me[$e+3]=At,me[$e+4]=xt,me[$e+5]=At}}}vrml(T,me){var Pe,Qe,$e,Mt,xt,At,Vt,Ut,Xt,Tr,lr,zr,Fr,Jr,kr,Xr,Dr,Vi,ur="";if(ur+=T+`Shape {
`+T+` appearance Appearance {
`+T+`  material Material {
`+T+"   diffuseColor "+((Pe=me?.color)===null||Pe===void 0?void 0:Pe.r)+" "+((Qe=me?.color)===null||Qe===void 0?void 0:Qe.g)+" "+(($e=me?.color)===null||$e===void 0?void 0:$e.b)+`
`,me.wireframe&&this.colorArray){let ye=this.colorArray;ur+=T+"    emissiveColor "+ye[0]+" "+ye[1]+" "+ye[2]+`
`}me?.transparent&&(ur+=T+"   transparency "+(1-me.opacity)+`
`),ur+=T+`  }
`,ur+=T+` }
`;var fi=T;if(T+=" ",me instanceof q||me.wireframe){let ye,n,a;ur+=T+`geometry IndexedLineSet {
`+T+` colorPerVertex TRUE
`+T+` coord Coordinate {
`+T+`  point [
`;for(let h=0;h<this.vertices;++h){let f=3*h;ye=(Mt=this.vertexArray)===null||Mt===void 0?void 0:Mt[f],n=(xt=this.vertexArray)===null||xt===void 0?void 0:xt[f+1],a=(At=this.vertexArray)===null||At===void 0?void 0:At[f+2],ur+=T+"   "+ye+" "+n+" "+a+`,
`}if(ur+=T+`  ]
`,ur+=T+` }
`,this.colorArray&&!me.wireframe){ur+=T+` color Color {
`+T+`  color [
`;for(let h=0;h<this.vertices;++h){let f=3*h;ye=this.colorArray[f],n=this.colorArray[f+1],a=this.colorArray[f+2],ur+=T+"   "+ye+" "+n+" "+a+`,
`}ur+=T+`  ]
`,ur+=T+` }
`}if(ur+=T+` coordIndex [
`,me.wireframe&&this.faceArray)for(let h=0;h<this.faceidx;h+=3)ye=(Vt=this.faceArray)===null||Vt===void 0?void 0:Vt[h],n=(Ut=this.faceArray)===null||Ut===void 0?void 0:Ut[h+1],a=(Xt=this.faceArray)===null||Xt===void 0?void 0:Xt[h+2],ur+=T+"  "+ye+", "+n+", "+a+`, -1,
`;else for(let h=0;h<this.vertices-1;h+=2)ur+=T+"  "+h+", "+(h+1)+`, -1,
`;ur+=T+` ]
`,ur+=T+`}
`}else{let ye,n,a;ur+=T+`geometry IndexedFaceSet {
`+T+` colorPerVertex TRUE
`+T+` normalPerVertex TRUE
`+T+` solid FALSE
`,ur+=T+` coord Coordinate {
`+T+`  point [
`;for(let h=0;h<this.vertices;++h){let f=3*h;ye=(Tr=this.vertexArray)===null||Tr===void 0?void 0:Tr[f],n=(lr=this.vertexArray)===null||lr===void 0?void 0:lr[f+1],a=(zr=this.vertexArray)===null||zr===void 0?void 0:zr[f+2],ur+=T+"   "+ye+" "+n+" "+a+`,
`}ur+=T+`  ]
`,ur+=T+` }
`,ur+=T+` normal Normal {
`+T+`  vector [
`;for(let h=0;h<this.vertices;++h){let f=3*h;ye=(Fr=this.normalArray)===null||Fr===void 0?void 0:Fr[f],n=(Jr=this.normalArray)===null||Jr===void 0?void 0:Jr[f+1],a=(kr=this.normalArray)===null||kr===void 0?void 0:kr[f+2],ur+=T+"   "+ye+" "+n+" "+a+`,
`}if(ur+=T+`  ]
`,ur+=T+` }
`,this.colorArray){ur+=T+` color Color {
`+T+`  color [
`;for(let h=0;h<this.vertices;++h){let f=3*h;ye=this.colorArray[f],n=this.colorArray[f+1],a=this.colorArray[f+2],ur+=T+"   "+ye+" "+n+" "+a+`,
`}ur+=T+`  ]
`,ur+=T+` }
`}ur+=T+` coordIndex [
`;for(let h=0;h<this.faceidx;h+=3)ye=(Xr=this.faceArray)===null||Xr===void 0?void 0:Xr[h],n=(Dr=this.faceArray)===null||Dr===void 0?void 0:Dr[h+1],a=(Vi=this.faceArray)===null||Vi===void 0?void 0:Vi[h+2],ur+=T+"  "+ye+", "+n+", "+a+`, -1,
`;ur+=T+` ]
`,ur+=T+`}
`}return ur+=fi+"}"}truncateArrayBuffers(T=!0,me=!1){var Pe=this.vertexArray,Qe=this.colorArray,$e=this.normalArray,Mt=this.faceArray,xt=this.lineArray,At=this.radiusArray;this.vertexArray=Pe?.subarray(0,3*this.vertices)||null,this.colorArray=Qe?.subarray(0,3*this.vertices)||null,T?(this.normalArray=$e?.subarray(0,3*this.vertices)||null,this.faceArray=Mt?.subarray(0,this.faceidx)||null,this.lineidx>0?this.lineArray=xt?.subarray(0,this.lineidx)||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),At&&(this.radiusArray=At.subarray(0,this.vertices)),me&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}class be extends K{constructor(T=!1,me=!1,Pe=!1){super(),this.name="",this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=Te++,this.mesh=T,this.radii=me,this.offset=Pe}updateGeoGroup(T=0){var me,Pe=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!Pe||Pe.vertices+T>(((me=Pe?.vertexArray)===null||me===void 0?void 0:me.length)||0)/3)&&(Pe=this.addGeoGroup()),Pe}vrml(T,me){for(var Pe="",Qe=this.geometryGroups.length,$e=0;$e<Qe;$e++)Pe+=this.geometryGroups[$e].vrml(T,me)+`,
`;return Pe}addGeoGroup(){var T=new Oe(this.geometryGroups.length);return this.geometryGroups.push(T),this.groups=this.geometryGroups.length,T.vertexArray=new Float32Array(196605),T.colorArray=new Float32Array(196605),this.mesh&&(T.normalArray=new Float32Array(196605),T.faceArray=new Uint16Array(393210),T.lineArray=new Uint16Array(393210)),this.radii&&(T.radiusArray=new Float32Array(he)),T.useOffset=this.offset,T}setUpNormals(...T){for(var me=0;me<this.groups;me++)this.geometryGroups[me].setNormals(...T)}setColors(...T){for(var me=this.geometryGroups.length,Pe=0;Pe<me;Pe++)this.geometryGroups[Pe].setColors(...T)}setColor(...T){let me=this.geometryGroups.length;for(var Pe=0;Pe<me;Pe++)this.geometryGroups[Pe].setColor(...T)}setUpWireframe(...T){let me=this.geometryGroups.length;for(var Pe=0;Pe<me;Pe++)this.geometryGroups[Pe].setLineIndices(...T)}initTypedArrays(){for(var T=0;T<this.groups;T++){var me=this.geometryGroups[T];me.__inittedArrays!==!0&&me.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:"dispose"})}get vertices(){for(var T=0,me=0;me<this.groups;me++)T+=this.geometryGroups[me].vertices;return T}}let Te=0,Ae=0;class Ve{constructor(){this.id=Ae++,this.name="",this.children=[],this.position=new d.Vector3,this.rotation=new d.Vector3,this.matrix=new d.Matrix4,this.matrixWorld=new d.Matrix4,this.quaternion=new d.Quaternion,this.eulerOrder="XYZ",this.up=new d.Vector3(0,1,0),this.scale=new d.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(T){this.matrix.lookAt(T,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error("Unimplemented math operation."):this.rotation instanceof d.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(T){if(T!==this){T.parent=this,this.children.push(T);for(var me=this;me.parent!==void 0;)me=me.parent;me!==void 0&&me instanceof _e&&me.__addObject(T)}else console.error("Can't add $3Dmol.Object3D to itself")}remove(T){var me=this.children.indexOf(T);if(me!==-1){T.parent=void 0,this.children.splice(me,1);for(var Pe=this;Pe.parent!==void 0;)Pe=Pe.parent;Pe!==void 0&&Pe instanceof _e&&Pe.__removeObject(T)}}vrml(T){T||(T=" ");var me=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),Pe=0,Qe=0,$e=0;if(me!=0){let At=Math.sin(me/2);Pe=this.quaternion.x/At,Qe=this.quaternion.y/At,$e=this.quaternion.z/At}var Mt=T+`Transform {
`+T+" center "+this.position.x+" "+this.position.y+" "+this.position.z+`
`+T+" rotation "+Pe+" "+Qe+" "+$e+" "+me+`
`+T+` children [
`;this.geometry&&(Mt+=this.geometry.vrml(T,this.material));for(var xt=0;xt<this.children.length;xt++)Mt+=this.children[xt].vrml(T+" ")+`,
`;return Mt+=` ]
`,Mt+="}"}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof d.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),this.scale.x===1&&this.scale.y===1&&this.scale.z===1||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(T){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&T!==!0||(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var me=0;me<this.children.length;me++)this.children[me].updateMatrixWorld(!0)}clone(T){T===void 0&&(T=new Ve),T.name=this.name,T.up.copy(this.up),T.position.copy(this.position),T.rotation instanceof d.Vector3&&this.rotation instanceof d.Vector3?T.rotation.copy(this.rotation):T.rotation=this.rotation,T.eulerOrder=this.eulerOrder,T.scale.copy(this.scale),T.rotationAutoUpdate=this.rotationAutoUpdate,T.matrix.copy(this.matrix),T.matrixWorld.copy(this.matrixWorld),T.quaternion.copy(this.quaternion),T.matrixAutoUpdate=this.matrixAutoUpdate,T.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,T.useQuaternion=this.useQuaternion,T.visible=this.visible;for(var me=0;me<this.children.length;me++){var Pe=this.children[me];T.add(Pe.clone())}return T}setVisible(T){this.visible=T;for(var me=0;me<this.children.length;me++)this.children[me].setVisible(T)}}class _e extends Ve{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(T){if(T instanceof W)this.__lights.indexOf(T)===-1&&this.__lights.push(T),T.target&&T.target.parent===void 0&&this.add(T.target);else if(this.__objects.indexOf(T)===-1){this.__objects.push(T),this.__objectsAdded.push(T);var me=this.__objectsRemoved.indexOf(T);me!==-1&&this.__objectsRemoved.splice(me,1)}for(var Pe=0;Pe<T.children.length;Pe++)this.__addObject(T.children[Pe])}__removeObject(T){var me;T instanceof W?(me=this.__lights.indexOf(T))!==-1&&this.__lights.splice(me,1):(me=this.__objects.indexOf(T))!==-1&&(this.__objects.splice(me,1),this.__objectsRemoved.push(T),this.__objectsAdded.indexOf(T)!==-1&&this.__objectsAdded.splice(me,1));for(var Pe=0;Pe<T.children.length;Pe++)this.__removeObject(T.children[Pe])}}class W extends Ve{constructor(T,me=1){super(),this.position=new d.Vector3(0,1,0),this.target=new Ve,this.castShadow=!1,this.onlyShadow=!1,this.color=new Y.Color(T),this.intensity=me}}const we=new d.Matrix4;class ge{static unprojectVector(T,me){return me.projectionMatrixInverse.getInverse(me.projectionMatrix),we.multiplyMatrices(me.matrixWorld,me.projectionMatrixInverse),T.applyProjection(we)}static projectVector(T,me){return me.matrixWorldInverse.getInverse(me.matrixWorld),we.multiplyMatrices(me.projectionMatrix,me.matrixWorldInverse),T.applyProjection(we)}projectVector(T,me){return ge.projectVector(T,me)}unprojectVector(T,me){return ge.unprojectVector(T,me)}}var ae=s(99);const Ue=(Yt,T)=>Yt.distance-T.distance,Ee=new d.Matrix4;class Ge{constructor(T,me,Pe,Qe){this.precision=1e-4,this.linePrecision=.2,this.ray=new d.Ray(T,me),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=Qe||0,this.far=Pe||1/0}set(T,me){this.ray.set(T,me)}setFromCamera(T,me){me.ortho?(this.ray.origin.set(T.x,T.y,(me.near+me.far)/(me.near-me.far)).unproject(me),this.ray.direction.set(0,0,-1).transformDirection(me.matrixWorld)):(this.ray.origin.setFromMatrixPosition(me.matrixWorld),this.ray.direction.set(T.x,T.y,T.z),me.projectionMatrixInverse.getInverse(me.projectionMatrix),Ee.multiplyMatrices(me.matrixWorld,me.projectionMatrixInverse),this.ray.direction.applyProjection(Ee),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects(T,me){for(var Pe=[],Qe=0,$e=me.length;Qe<$e;Qe++)Kt(T,me[Qe],this,Pe);return Pe.sort(Ue),Pe}}const tt=Yt=>Math.min(Math.max(Yt,-1),1);var ve=new ae.Sphere,ze=new ae.Cylinder,rt=new ae.Triangle,at=new d.Vector3,Ke=new d.Vector3,ft=new d.Vector3,vt=new d.Vector3,yt=new d.Vector3;function Kt(Yt,T,me,Pe){if(yt.getPositionFromMatrix(Yt.matrixWorld),T.intersectionShape===void 0||T.hidden)return Pe;var Qe,$e,Mt,xt,At,Vt,Ut,Xt,Tr,lr,zr,Fr,Jr,kr,Xr=T.intersectionShape,Dr=me.linePrecision,Vi=(Dr*=Yt.matrixWorld.getMaxScaleOnAxis())*Dr;if(T.boundingSphere!==void 0&&T.boundingSphere instanceof ae.Sphere&&(ve.copy(T.boundingSphere),ve.applyMatrix4(Yt.matrixWorld),!me.ray.isIntersectionSphere(ve)))return Pe;for(Qe=0,$e=Xr.triangle.length;Qe<$e;Qe++)if(Xr.triangle[Qe]instanceof ae.Triangle){if(rt.copy(Xr.triangle[Qe]),rt.applyMatrix4(Yt.matrixWorld),Mt=rt.getNormal(),(xt=me.ray.direction.dot(Mt))>=0||(at.subVectors(rt.a,me.ray.origin),(Ut=Mt.dot(at)/xt)<0))continue;Ke.copy(me.ray.direction).multiplyScalar(Ut).add(me.ray.origin),Ke.sub(rt.a),ft.copy(rt.b).sub(rt.a),vt.copy(rt.c).sub(rt.a);var ur=ft.dot(vt),fi=ft.lengthSq(),ye=vt.lengthSq();if((Fr=(fi*Ke.dot(vt)-ur*Ke.dot(ft))/(fi*ye-ur*ur))<0||Fr>1||(zr=(Ke.dot(ft)-Fr*ur)/fi)<0||zr>1||zr+Fr>1)continue;Pe.push({clickable:T,distance:Ut})}for(Qe=0,$e=Xr.cylinder.length;Qe<$e;Qe++)if(Xr.cylinder[Qe]instanceof ae.Cylinder){if(ze.copy(Xr.cylinder[Qe]),ze.applyMatrix4(Yt.matrixWorld),at.subVectors(ze.c1,me.ray.origin),At=at.dot(ze.direction),Vt=at.dot(me.ray.direction),(Tr=1-(xt=tt(me.ray.direction.dot(ze.direction)))*xt)==0)continue;Jr=(xt*Vt-At)/Tr,kr=(Vt-xt*At)/Tr,Ke.copy(ze.direction).multiplyScalar(Jr).add(ze.c1),ft.copy(me.ray.direction).multiplyScalar(kr).add(me.ray.origin),Xt=vt.subVectors(Ke,ft).lengthSq();var n=ze.radius*ze.radius;if(Xt<=n){if((zr=xt*(Fr=Ut=(lr=(xt*At-Vt)*(xt*At-Vt)-Tr*(at.lengthSq()-At*At-n))<=0?Math.sqrt(Xt):(Vt-xt*At-Math.sqrt(lr))/Tr)-At)<0||zr*zr>ze.lengthSq()||Fr<0)continue;Pe.push({clickable:T,distance:Ut})}}for(Qe=0,$e=Xr.line.length;Qe<$e;Qe+=2){Ke.copy(Xr.line[Qe]),Ke.applyMatrix4(Yt.matrixWorld),ft.copy(Xr.line[Qe+1]),ft.applyMatrix4(Yt.matrixWorld),vt.subVectors(ft,Ke);var a=vt.lengthSq();vt.normalize(),at.subVectors(Ke,me.ray.origin);var h=at.dot(vt);Vt=at.dot(me.ray.direction),(Tr=1-(xt=tt(me.ray.direction.dot(vt)))*xt)!=0&&(Jr=(xt*Vt-h)/Tr,kr=(Vt-xt*h)/Tr,Ke.add(vt.multiplyScalar(Jr)),ft.copy(me.ray.direction).multiplyScalar(kr).add(me.ray.origin),(Xt=vt.subVectors(ft,Ke).lengthSq())<Vi&&Jr*Jr<a&&Pe.push({clickable:T,distance:kr}))}for(Qe=0,$e=Xr.sphere.length;Qe<$e;Qe++)if(Xr.sphere[Qe]instanceof ae.Sphere&&(ve.copy(Xr.sphere[Qe]),ve.applyMatrix4(Yt.matrixWorld),me.ray.isIntersectionSphere(ve))){Ke.subVectors(ve.center,me.ray.origin);var f=Ke.dot(me.ray.direction);if(lr=f*f-(Ke.lengthSq()-ve.radius*ve.radius),f<0)return Pe;Ut=lr<=0?f:f-Math.sqrt(lr),Pe.push({clickable:T,distance:Ut})}return Pe}class zt{}class vr extends K{constructor(T,me){super(),this.id=yr++,this.name="",this.image=T,this.mapping=new zt,this.wrapS=C,this.wrapT=C,this.anisotropy=1,me?(this.format=ce,this.type=j,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=k,this.minFilter=k):(this.format=se,this.type=P,this.offset=new d.Vector2(0,0),this.repeat=new d.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=v,this.minFilter=H),this.needsUpdate=!1,this.onUpdate=null}clone(T=new vr){return T.image=this.image,T.mapping=this.mapping,T.wrapS=this.wrapS,T.wrapT=this.wrapT,T.magFilter=this.magFilter,T.minFilter=this.minFilter,T.anisotropy=this.anisotropy,T.format=this.format,T.type=this.type,T.offset.copy(this.offset),T.repeat.copy(this.repeat),T.premultiplyAlpha=this.premultiplyAlpha,T.flipY=this.flipY,T.unpackAlignment=this.unpackAlignment,T}dispose(){this.dispatchEvent({type:"dispose"})}}let yr=0;class jr extends re{constructor(T){super(),this.color=new Y.Color(16777215),this.ambient=new Y.Color(1048575),this.emissive=new Y.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new d.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=p.SmoothShading,this.shaderID=null,this.vertexColors=o.NoColors,this.skinning=!1,this.setValues(T)}clone(T=new jr){return super.clone.call(this,T),T.color.copy(this.color),T.ambient.copy(this.ambient),T.emissive.copy(this.emissive),T.wrapAround=this.wrapAround,T.wrapRGB.copy(this.wrapRGB),T.map=this.map,T.lightMap=this.lightMap,T.specularMap=this.specularMap,T.envMap=this.envMap,T.combine=this.combine,T.reflectivity=this.reflectivity,T.refractionRatio=this.refractionRatio,T.fog=this.fog,T.shading=this.shading,T.shaderID=this.shaderID,T.vertexColors=this.vertexColors,T.skinning=this.skinning,T.morphTargets=this.morphTargets,T.morphNormals=this.morphNormals,T}}class Lr extends re{constructor(T){super(),this.color=new Y.Color(16777215),this.ambient=new Y.Color(1048575),this.emissive=new Y.Color(0),this.wrapAround=!1,this.wrapRGB=new d.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=p.SmoothShading,this.shaderID="instanced",this.vertexColors=o.NoColors,this.skinning=!1,this.sphere=null,this.setValues(T)}clone(T=new Lr){return super.clone.call(this,T),T.color.copy(this.color),T.ambient.copy(this.ambient),T.emissive.copy(this.emissive),T.wrapAround=this.wrapAround,T.wrapRGB.copy(this.wrapRGB),T.map=this.map,T.lightMap=this.lightMap,T.specularMap=this.specularMap,T.envMap=this.envMap,T.combine=this.combine,T.reflectivity=this.reflectivity,T.refractionRatio=this.refractionRatio,T.fog=this.fog,T.shading=this.shading,T.shaderID=this.shaderID,T.vertexColors=this.vertexColors,T.skinning=this.skinning,T.morphTargets=this.morphTargets,T.morphNormals=this.morphNormals,T.sphere=this.sphere,T}}class Cr extends re{constructor(T){super(),this.color=new Y.Color(16777215),this.ambient=new Y.Color(1048575),this.emissive=new Y.Color(0),this.wrapAround=!1,this.wrapRGB=new d.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=p.SmoothShading,this.shaderID="lambert",this.vertexColors=o.NoColors,this.skinning=!1,this.setValues(T)}clone(T=new Cr){return super.clone.call(this,T),T.color.copy(this.color),T.ambient.copy(this.ambient),T.emissive.copy(this.emissive),T.wrapAround=this.wrapAround,T.wrapRGB.copy(this.wrapRGB),T.map=this.map,T.lightMap=this.lightMap,T.specularMap=this.specularMap,T.envMap=this.envMap,T.combine=this.combine,T.reflectivity=this.reflectivity,T.refractionRatio=this.refractionRatio,T.fog=this.fog,T.shading=this.shading,T.shaderID=this.shaderID,T.vertexColors=this.vertexColors,T.skinning=this.skinning,T.morphTargets=this.morphTargets,T.morphNormals=this.morphNormals,T}}class Rr extends Cr{constructor(T){super(T),this.shaderID="lambertdouble",this.side=u,this.outline=!1}clone(T=new Rr){return super.clone.call(this,T),T}}class Pr extends re{constructor(T){super(),T=T||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=Y.CC.color(T.color||new Y.Color(0,0,0)),this.outlineWidth=T.width||.1,this.outlinePushback=T.pushback||1,this.outlineMaxPixels=T.maxpixels||0}clone(T=new Pr){return super.clone.call(this,T),T.fog=this.fog,T.shaderID=this.shaderID,T.wireframe=this.wireframe,T.outlineColor=this.outlineColor,T.outlineWidth=this.outlineWidth,T.outlinePushback=this.outlinePushback,T.outlineMaxPixels=this.outlineMaxPixels,T}}class Ei extends jr{constructor(T){super(T),this.shaderID="sphereimposter",this.setValues(T)}clone(T=new Ei){return super.clone.call(this,T),T}}class Br extends jr{constructor(T){super(T),T=T||{},this.shaderID="sphereimposteroutline",this.outlineColor=Y.CC.color(T.color||new Y.Color(0,0,0)),this.outlineWidth=T.width||.1,this.outlinePushback=T.pushback||1,this.outlineMaxPixels=T.maxpixels||0,this.setValues(T)}clone(T=new Br){return super.clone.call(this,T),T.outlineColor=this.outlineColor,T.outlineWidth=this.outlineWidth,T.outlinePushback=this.outlinePushback,T.outlineMaxPixels=this.outlineMaxPixels,T}}class Wr extends re{constructor(T){super(),this.color=new Y.Color(16777215),this.map=new vr,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new d.Vector2(0,0),this.uvScale=new d.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=w.center.clone(),this.setValues(T),(T=T||{}).depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),T.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),T.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(T=new Wr){return super.clone.call(this,T),T.color.copy(this.color),T.map=this.map,T.useScreenCoordinates=this.useScreenCoordinates,T.screenOffset=this.screenOffset,T.sizeAttenuation=this.sizeAttenuation,T.scaleByViewport=this.scaleByViewPort,T.alignment.copy(this.alignment),T.uvOffset.copy(this.uvOffset),T}}class Gi extends jr{constructor(T){super(T),this.shaderID="stickimposter",this.setValues(T)}clone(T=new Gi){return super.clone.call(this,T),T}}class Di extends jr{constructor(T={}){super(T),this.shaderID="stickimposteroutline",this.outlineColor=new Y.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,this.outlineMaxPixels=0,T.color&&(this.outlineColor=Y.CC.color(T.color)),T.width&&(this.outlineWidth=T.width),T.pushback&&(this.outlinePushback=T.pushback),T.maxpixels&&(this.outlineMaxPixels=T.maxpixels),this.setValues(T)}clone(T=new Di){return super.clone.call(this,T),T.outlineColor=this.outlineColor,T.outlineWidth=this.outlineWidth,T.outlinePushback=this.outlinePushback,T.outlineMaxPixels=this.outlineMaxPixels,T}}class tn extends re{constructor(T){super(),this.transparent=!1,this.volumetric=!0,this.color=new Y.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID="volumetric",this.side=c,this.setValues(T)}clone(T=new tn){return super.clone.call(this,T),T.transparent=this.transparent,T.volumetric=this.volumetric,T.color=this.color,T.transferfn=this.transferfn,T.map=this.map,T.extent=this.extent,T.maxdepth=this.maxdepth,T.unit=this.unit,T.texmatrix=this.texmatrix,T.transfermin=this.transfermin,T.transfermax=this.transfermax,T.subsamples=this.subsamples,T.shaderID=this.shaderID,T.side=this.side,T}}var Ce;(function(Yt){Yt[Yt.LineStrip=0]="LineStrip",Yt[Yt.LinePieces=1]="LinePieces"})(Ce||(Ce={}));class Le extends Ve{constructor(T,me=new q({color:16777215*Math.random()}),Pe=Ce.LineStrip){super(),this.geometry=T,this.material=me,this.type=Pe}clone(T=new Le(this.geometry,this.material,this.type)){return super.clone.call(this,T),T}}class We extends Ve{constructor(T,me){super(),this.geometry=T,this.material=me}clone(T){return T===void 0&&(T=new We(this.geometry,this.material)),super.clone.call(this,T),T}}class St extends Ve{constructor(T=new Wr){super(),this.material=T,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),this.scale.x===1&&this.scale.y===1||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(T=new St(this.material)){return Ve.prototype.clone.call(this,T),T}}const mt={opacity:{type:"f",value:1},fogColor:{type:"c",value:new Y.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}},Ht={vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;
varying vec4 mvPosition;

void main() {

    vColor = color;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`.replace("#define GLSLIFY 1",""),fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`.replace("#define GLSLIFY 1",""),uniforms:mt},bt={opacity:{type:"f",value:1},fogColor:{type:"c",value:new Y.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},$t={fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`.replace("#define GLSLIFY 1",""),uniforms:bt},Jt={opacity:{type:"f",value:1},fogColor:{type:"c",value:new Y.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Wt={fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
varying vec4 mvPosition;


//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}`.replace("#define GLSLIFY 1",""),vertexShader:`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`.replace("#define GLSLIFY 1",""),uniforms:Jt},Ar={opacity:{type:"f",value:1},fogColor:{type:"c",value:new Y.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},xi={fragmentShader:`
#ifdef SHADED
uniform highp sampler2D shading;
#endif

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    vec3 color = vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( color, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`.replace("#define GLSLIFY 1",""),uniforms:Ar},zi={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new Y.Color(0,0,0)},fogColor:{type:"c",value:new Y.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}},_i={fragmentShader:`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec4 mvPosition;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float vWidth;
uniform float vHeight;
uniform float outlineMaxPixels;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec4 mvPosition;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    vec4 outpos = projectionMatrix * mvPosition;

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*modelViewMatrix * vec4( position, 1.0 );
        float w = outpos.w;
        //normalize homogeneous coords
        unadjusted /= unadjusted.w;
        outpos /= outpos.w;
        vec2 diff = outpos.xy-unadjusted.xy;
        //put into pixels
        diff.x *= vWidth;
        diff.y *= vHeight;
        if ( length(diff) > outlineMaxPixels) {
            vec2 ndiff = normalize(diff)*outlineMaxPixels;
            ndiff.x /= vWidth;
            ndiff.y /= vHeight;
            outpos.xy = unadjusted.xy;
            outpos.xy += ndiff;
        }
        outpos *= w; //if I don't do this things blow up
    }
    gl_Position = outpos;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`.replace("#define GLSLIFY 1",""),uniforms:zi},Ti={fragmentShader:`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);

   //gl_FragColor.g = gl_FragColor.b =  gl_FragColor.r; //debug shading 
}
        `.replace("#define GLSLIFY 1",""),vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `.replace("#define GLSLIFY 1",""),uniforms:{}},Zr={fragmentShader:`
        
precision highp float;
precision highp int;
precision highp sampler2D;

uniform sampler2D tColor;
varying highp vec2 vTexCoords;

// adapted from https://github.com/kosua20/Rendu
// MIT License Copyright (c) 2017 Simon Rodriguez
// by way of molstar (https://github.com/molstar/molstar/blob/master/src/mol-gl/shader/fxaa.frag.ts)

#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))

float rgb2luma(vec3 rgb){
    return sqrt(dot(rgb, vec3(0.299, 0.587, 0.114)));
}

float sampleLuma(vec2 uv) {
    return rgb2luma(texture2D(tColor, uv).rgb);
}

float sampleLuma(vec2 uv, float uOffset, float vOffset) {
    uv += vec2(uOffset, vOffset);
    return sampleLuma(uv);
}

//DEFINEFRAGCOLOR
void main(void) {
    ivec2 dim = textureSize(tColor,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseScreenSize = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec2 coords = vTexCoords;

    vec4 colorCenter = texture2D(tColor, coords);
    float dEdgeThresholdMin = 0.0312;
    float dEdgeThresholdMax = 0.125;
    int dIterations = 12;
    float dSubpixelQuality = 0.3;

    // Luma at the current fragment
    float lumaCenter = rgb2luma(colorCenter.rgb);

    // Luma at the four direct neighbours of the current fragment.
    float lumaDown = sampleLuma(coords, 0.0, -inverseScreenSize.y);
    float lumaUp = sampleLuma(coords, 0.0, inverseScreenSize.y);
    float lumaLeft = sampleLuma(coords, -inverseScreenSize.x, 0.0);
    float lumaRight = sampleLuma(coords, inverseScreenSize.x, 0.0);

    // Find the maximum and minimum luma around the current fragment.
    float lumaMin = min(lumaCenter, min(min(lumaDown, lumaUp), min(lumaLeft, lumaRight)));
    float lumaMax = max(lumaCenter, max(max(lumaDown, lumaUp), max(lumaLeft, lumaRight)));

    // Compute the delta.
    float lumaRange = lumaMax - lumaMin;

    // If the luma variation is lower that a threshold (or if we are in a really dark area),
    // we are not on an edge, don't perform any AA.
    if (lumaRange < max(dEdgeThresholdMin, lumaMax * dEdgeThresholdMax)) {
        gl_FragColor = colorCenter;
        return;
    }

    // Query the 4 remaining corners lumas.
    float lumaDownLeft = sampleLuma(coords, -inverseScreenSize.x, -inverseScreenSize.y);
    float lumaUpRight = sampleLuma(coords, inverseScreenSize.x, inverseScreenSize.y);
    float lumaUpLeft = sampleLuma(coords, -inverseScreenSize.x, inverseScreenSize.y);
    float lumaDownRight = sampleLuma(coords, inverseScreenSize.x, -inverseScreenSize.y);

    // Combine the four edges lumas (using intermediary variables for future computations
    // with the same values).
    float lumaDownUp = lumaDown + lumaUp;
    float lumaLeftRight = lumaLeft + lumaRight;

    // Same for corners
    float lumaLeftCorners = lumaDownLeft + lumaUpLeft;
    float lumaDownCorners = lumaDownLeft + lumaDownRight;
    float lumaRightCorners = lumaDownRight + lumaUpRight;
    float lumaUpCorners = lumaUpRight + lumaUpLeft;

    // Compute an estimation of the gradient along the horizontal and vertical axis.
    float edgeHorizontal = abs(-2.0 * lumaLeft + lumaLeftCorners) + abs(-2.0 * lumaCenter + lumaDownUp) * 2.0 + abs(-2.0 * lumaRight + lumaRightCorners);
    float edgeVertical = abs(-2.0 * lumaUp + lumaUpCorners) + abs(-2.0 * lumaCenter + lumaLeftRight) * 2.0 + abs(-2.0 * lumaDown + lumaDownCorners);

    // Is the local edge horizontal or vertical ?
    bool isHorizontal = (edgeHorizontal >= edgeVertical);

    // Choose the step size (one pixel) accordingly.
    float stepLength = isHorizontal ? inverseScreenSize.y : inverseScreenSize.x;

    // Select the two neighboring texels lumas in the opposite direction to the local edge.
    float luma1 = isHorizontal ? lumaDown : lumaLeft;
    float luma2 = isHorizontal ? lumaUp : lumaRight;
    // Compute gradients in this direction.
    float gradient1 = luma1 - lumaCenter;
    float gradient2 = luma2 - lumaCenter;

    // Which direction is the steepest ?
    bool is1Steepest = abs(gradient1) >= abs(gradient2);

    // Gradient in the corresponding direction, normalized.
    float gradientScaled = 0.25 * max(abs(gradient1), abs(gradient2));

    // Average luma in the correct direction.
    float lumaLocalAverage = 0.0;
    if(is1Steepest){
        // Switch the direction
        stepLength = -stepLength;
        lumaLocalAverage = 0.5 * (luma1 + lumaCenter);
    } else {
        lumaLocalAverage = 0.5 * (luma2 + lumaCenter);
    }

    // Shift UV in the correct direction by half a pixel.
    vec2 currentUv = coords;
    if(isHorizontal){
        currentUv.y += stepLength * 0.5;
    } else {
        currentUv.x += stepLength * 0.5;
    }

    // Compute offset (for each iteration step) in the right direction.
    vec2 offset = isHorizontal ? vec2(inverseScreenSize.x, 0.0) : vec2(0.0, inverseScreenSize.y);
    // Compute UVs to explore on each side of the edge, orthogonally.
    // The QUALITY allows us to step faster.
    vec2 uv1 = currentUv - offset * QUALITY(0);
    vec2 uv2 = currentUv + offset * QUALITY(0);

    // Read the lumas at both current extremities of the exploration segment,
    // and compute the delta wrt to the local average luma.
    float lumaEnd1 = sampleLuma(uv1);
    float lumaEnd2 = sampleLuma(uv2);
    lumaEnd1 -= lumaLocalAverage;
    lumaEnd2 -= lumaLocalAverage;

    // If the luma deltas at the current extremities is larger than the local gradient,
    // we have reached the side of the edge.
    bool reached1 = abs(lumaEnd1) >= gradientScaled;
    bool reached2 = abs(lumaEnd2) >= gradientScaled;
    bool reachedBoth = reached1 && reached2;

    // If the side is not reached, we continue to explore in this direction.
    if(!reached1){
        uv1 -= offset * QUALITY(1);
    }
    if(!reached2){
        uv2 += offset * QUALITY(1);
    }

    // If both sides have not been reached, continue to explore.
    if(!reachedBoth){
        for(int i = 2; i < dIterations; i++){
            // If needed, read luma in 1st direction, compute delta.
            if(!reached1){
                lumaEnd1 = sampleLuma(uv1);
                lumaEnd1 = lumaEnd1 - lumaLocalAverage;
            }
            // If needed, read luma in opposite direction, compute delta.
            if(!reached2){
                lumaEnd2 = sampleLuma(uv2);
                lumaEnd2 = lumaEnd2 - lumaLocalAverage;
            }
            // If the luma deltas at the current extremities is larger than the local gradient,
            // we have reached the side of the edge.
            reached1 = abs(lumaEnd1) >= gradientScaled;
            reached2 = abs(lumaEnd2) >= gradientScaled;
            reachedBoth = reached1 && reached2;

            // If the side is not reached, we continue to explore in this direction,
            // with a variable quality.
            if(!reached1){
                uv1 -= offset * QUALITY(i);
            }
            if(!reached2){
                uv2 += offset * QUALITY(i);
            }

            // If both sides have been reached, stop the exploration.
            if(reachedBoth){
                break;
            }
        }
    }

    // Compute the distances to each side edge of the edge (!).
    float distance1 = isHorizontal ? (coords.x - uv1.x) : (coords.y - uv1.y);
    float distance2 = isHorizontal ? (uv2.x - coords.x) : (uv2.y - coords.y);

    // In which direction is the side of the edge closer ?
    bool isDirection1 = distance1 < distance2;
    float distanceFinal = min(distance1, distance2);

    // Thickness of the edge.
    float edgeThickness = (distance1 + distance2);

    // Is the luma at center smaller than the local average ?
    bool isLumaCenterSmaller = lumaCenter < lumaLocalAverage;

    // If the luma at center is smaller than at its neighbour,
    // the delta luma at each end should be positive (same variation).
    bool correctVariation1 = (lumaEnd1 < 0.0) != isLumaCenterSmaller;
    bool correctVariation2 = (lumaEnd2 < 0.0) != isLumaCenterSmaller;

    // Only keep the result in the direction of the closer side of the edge.
    bool correctVariation = isDirection1 ? correctVariation1 : correctVariation2;

    // UV offset: read in the direction of the closest side of the edge.
    float pixelOffset = - distanceFinal / edgeThickness + 0.5;

    // If the luma variation is incorrect, do not offset.
    float finalOffset = correctVariation ? pixelOffset : 0.0;

    // Sub-pixel shifting
    // Full weighted average of the luma over the 3x3 neighborhood.
    float lumaAverage = (1.0 / 12.0) * (2.0 * (lumaDownUp + lumaLeftRight) + lumaLeftCorners + lumaRightCorners);
    // Ratio of the delta between the global average and the center luma,
    // over the luma range in the 3x3 neighborhood.
    float subPixelOffset1 = clamp(abs(lumaAverage - lumaCenter) / lumaRange, 0.0, 1.0);
    float subPixelOffset2 = (-2.0 * subPixelOffset1 + 3.0) * subPixelOffset1 * subPixelOffset1;
    // Compute a sub-pixel offset based on this delta.
    float subPixelOffsetFinal = subPixelOffset2 * subPixelOffset2 * float(dSubpixelQuality);

    // Pick the biggest of the two offsets.
    finalOffset = max(finalOffset, subPixelOffsetFinal);

    // Compute the final UV coordinates.
    vec2 finalUv = coords;
    if(isHorizontal){
        finalUv.y += finalOffset * stepLength;
    } else {
        finalUv.x += finalOffset * stepLength;
    }

    // Read the color at the new UV coordinates, and use it.
    gl_FragColor = texture2D(tColor, finalUv);
}        

/* old fxaa implementation
uniform highp sampler2D colormap;
varying highp vec2 vTexCoords;


// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0


vec4 applyFXAA(vec2 fragCoord, highp sampler2D tex)
{
    vec4 color;
    ivec2 dim = textureSize(tex,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec4 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP);
    vec4 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP);
    vec4 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP);
    vec4 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP);
    vec4 rgbM  = texture2D(tex, fragCoord );
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW.xyz, luma);
    float lumaNE = dot(rgbNE.xyz, luma);
    float lumaSW = dot(rgbSW.xyz, luma);
    float lumaSE = dot(rgbSE.xyz, luma);
    float lumaM  = dot(rgbM.xyz,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec4 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)) +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)));
    vec4 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5) +
        texture2D(tex, fragCoord  + dir * 0.5));

    float lumaB = dot(rgbB.xyz, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = rgbA;
    else
        color = rgbB;

    return color;
}


//DEFINEFRAGCOLOR
void main (void) {
    ivec2 dim = textureSize(colormap,0);

  gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        
*/`.replace("#define GLSLIFY 1",""),vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `.replace("#define GLSLIFY 1",""),uniforms:{}},$r={opacity:{type:"f",value:1},fogColor:{type:"c",value:new Y.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Gr={vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`.replace("#define GLSLIFY 1",""),fragmentShader:`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    vec3 color = vLight*vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
     
}

`.replace("#define GLSLIFY 1",""),uniforms:$r},fr={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new Y.Color(0,0,0)},fogColor:{type:"c",value:new Y.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}},Ri={fragmentShader:`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform float vHeight;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);

    vec4 adjust = projectionMatrix* vec4(norm,normal.z,1.0); 
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+vec4(adjust.xy,0.0,0.0);

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*vec4(center.x+normal.x, center.y,center.z,1.0); 
        vec4 ccoord = projectionMatrix*vec4(center.xyz,1.0);
        adjust = projectionMatrix* vec4(center.x+norm.x,center.y,center.z,1.0); 
        //subtract center 
        unadjusted.xyz -= ccoord.xyz;
        adjust.xyz -= ccoord.xyz;
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth;
        if(diff > outlineMaxPixels) {
            
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth;
            //adjsut reval by ratio of lengths
            rval *= fixlen/abs(adjust.x);
        }

    }
}

`.replace("#define GLSLIFY 1",""),uniforms:fr},Ii={fragmentShader:`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a <= alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogNear != fogFar) {

        float depth = gl_FragCoord.z / gl_FragCoord.w; //probably wrong
        float fogFactor = smoothstep(fogNear, fogFar, depth);        
        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);
    }
}

`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`.replace("#define GLSLIFY 1",""),uniforms:{}},an={opacity:{type:"f",value:1},fogColor:{type:"c",value:new Y.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Fi=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`,qi={fragmentShader:[Fi,`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    color *= light;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`].join(`
`),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
    bool isperspective = (projectionMatrix[3][3] == 0.0);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(isperspective) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(isperspective) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }

    if(isperspective) { //perspective
      vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
      vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    } else {
      vec3 cr = normalize(cross(vec3(0.0,0.0,-1.0),norm))*radius;
      vec3 doublecr = normalize(cross(vec3(0.0,0.0,-1.0),cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;     
    }

    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`,uniforms:an},Ni={fragmentShader:Fi+`
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`,vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform mat4 projinv;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);

    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    float scale = 1.0;
    if(projectionMatrix[3][3] != 0.0) { //orthographic
        to.z -= outlinePushback;
        pt.z -= outlinePushback;
    } else { //perspective
        vec4 midbefore = pt;
        if(length(to.xyz) < length(pt)) {
            midbefore = to;
        }
        vec4 midafter = midbefore;
        midafter.xyz += normalize(midbefore.xyz)*outlinePushback;

        to.xyz += normalize(to.xyz)*outlinePushback;
        pt.xyz += normalize(pt.xyz)*outlinePushback;

        //figure out a scaling factor for radius to account for perspective setback
        vec4 midbeforer = vec4(midbefore.x+rad,midbefore.y, midbefore.z, midbefore.w);
        vec4 midafterr = vec4(midafter.x+rad,midafter.y, midafter.z, midafter.w);

        vec4 mb = projectionMatrix*midbefore;
        vec4 mbr = projectionMatrix*midbeforer;
        vec4 ma = projectionMatrix*midafter;
        vec4 mar = projectionMatrix*midafterr;
        mb /= mb.w;
        mbr /= mbr.w;
        ma /= ma.w;
        mar /= mar.w;
        scale = abs((mbr.x-mb.x)/(mar.x-ma.x));
        rad *= scale;
        r = abs(rad);
    }
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }

    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }

    if(outlineMaxPixels > 0.0) {
        vec4 cpos = mvPosition;
        vec4 unadjusted = projectionMatrix*vec4(cpos.x+abs(scale*radius), cpos.y,cpos.z,cpos.w); 
        vec4 ccoord = projectionMatrix*cpos;
        vec4 adjust = projectionMatrix*vec4(cpos.x+r,cpos.y,cpos.z,cpos.w); 
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        unadjusted.xyz -= ccoord.xyz/ccoord.w;
        adjust.xyz -= ccoord.xyz/ccoord.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth; //this should now be in pixels
        if(diff > outlineMaxPixels) {
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth; 
            vec4 pcoord = ccoord;
            pcoord.x += fixlen*pcoord.w;
            vec4 altc = projinv*pcoord;
            r= abs(altc.x-cpos.x);
        }
    }

    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`,uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new Y.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new Y.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0},projinv:{type:"mat4",value:[]}}},Ci={opacity:{type:"f",value:1},fogColor:{type:"c",value:new Y.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}},Yr={fragmentShader:`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `.replace("#define GLSLIFY 1",""),vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`.replace("#define GLSLIFY 1",""),uniforms:Ci},li={basic:Ht,blur:{fragmentShader:`const float INV_TOTAL_SAMPLES_FACTOR = 1.0 / 9.0;
uniform highp sampler2D inTex;
varying highp vec2 vTexCoords;
    
void main() {
 
 vec2 texelSize = 1.0 / vec2(textureSize(inTex,0));
 float blurred_visibility_factor = 0.0f;
 for (int t = -1; t <= 1; ++t) {
  for (int s = -1; s <= 1; ++s) {
   vec2 offset = vec2(float(s), float(t)) * texelSize;
   blurred_visibility_factor += texture2D(inTex, vTexCoords + offset).r;
  }
 }
    
 gl_FragDepthEXT = blurred_visibility_factor * INV_TOTAL_SAMPLES_FACTOR;
 
}`,vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `,uniforms:{}},instanced:$t,lambert:Wt,lambertdouble:xi,outline:_i,screen:Ti,screenaa:Zr,ssao:{fragmentShader:`uniform sampler2D depthmap;
varying highp vec2 vTexCoords;
uniform float vWidth;
uniform float vHeight;
uniform float total_strength;
uniform float radius;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

//code for pseudorandom vector from chatgpt
float hash(vec3 p) {
    p = fract(p * vec3(0.1031, 0.1030, 0.0973));
    p += dot(p, p.yzx + 33.33);
    return fract((p.x + p.y) * p.z);
}

// Generate a pseudorandom vec3 from a seed vec3
vec3 pseudorandomVec3(vec3 seed) {
    vec3 randomVec;
    randomVec.x = hash(seed);
    randomVec.y = hash(seed + vec3(1.0, 0.0, 17.1));
    randomVec.z = hash(seed + vec3(0.0, 13.23, 0.0));
    return randomVec;
}

void main(void)
{   
   const float base = 0.2;
   const float area = 0.75;
   const int cycles = 1;

   const int samples = 64;
   vec3 sample_sphere[64] = vec3[](
      vec3(0.091258,-0.510164,0.000000),
      vec3(-0.204347,-0.872967,0.187199),
      vec3(0.009690,-0.263696,-0.110414),
      vec3(0.175208,-0.563987,0.228527),
      vec3(-0.001824,-0.003113,-0.000323),
      vec3(0.411134,-0.719869,-0.261530),
      vec3(-0.074272,-0.377368,0.276290),
      vec3(-0.147773,-0.381587,-0.284529),
      vec3(0.173317,-0.199635,0.063295),
      vec3(-0.186452,-0.199460,0.076965),
      vec3(0.143985,-0.308160,-0.307687),
      vec3(0.053194,-0.148286,0.169589),
      vec3(-0.547656,-0.486476,-0.317378),
      vec3(0.020804,-0.015092,-0.004574),
      vec3(-0.038006,-0.043165,0.054059),
      vec3(-0.094795,-0.443908,-0.731525),
      vec3(0.547552,-0.396466,0.461477),
      vec3(-0.176886,-0.089989,0.007315),
      vec3(0.074401,-0.048840,-0.074039),
      vec3(-0.008240,-0.075697,0.178197),
      vec3(-0.307880,-0.185053,-0.368943),
      vec3(0.309520,-0.108483,0.041646),
      vec3(-0.773478,-0.292946,0.538166),
      vec3(0.184487,-0.231594,-0.820065),
      vec3(0.207318,-0.100531,0.361797),
      vec3(-0.173306,-0.037737,-0.055289),
      vec3(0.548102,-0.105342,-0.253237),
      vec3(-0.119342,-0.043907,0.285162),
      vec3(-0.270247,-0.087861,-0.751357),
      vec3(0.449312,-0.039777,0.236146),
      vec3(-0.743773,-0.036095,0.196056),
      vec3(0.148819,-0.004300,-0.231448),
      vec3(0.008773,0.000809,0.051047),
      vec3(-0.461467,0.027390,-0.357386),
      vec3(0.169626,0.013338,-0.014053),
      vec3(-0.043786,0.007095,0.047331),
      vec3(0.004821,0.140371,-0.988260),
      vec3(0.092402,0.023994,0.101860),
      vec3(-0.295335,0.061530,-0.027372),
      vec3(0.024903,0.007537,-0.018901),
      vec3(-0.081463,0.125402,0.447794),
      vec3(-0.397119,0.231805,-0.631062),
      vec3(0.163853,0.059014,0.044905),
      vec3(-0.495220,0.214357,0.254139),
      vec3(0.306123,0.373687,-0.825715),
      vec3(0.021665,0.026737,0.053220),
      vec3(-0.208231,0.117129,-0.098685),
      vec3(0.139749,0.080968,-0.043086),
      vec3(-0.153599,0.182814,0.262090),
      vec3(-0.159673,0.496777,-0.743568),
      vec3(0.134797,0.117152,0.095753),
      vec3(-0.155626,0.120533,0.019395),
      vec3(0.042311,0.054462,-0.049709),
      vec3(0.001257,0.031288,0.034468),
      vec3(-0.002271,0.003199,-0.002304),
      vec3(0.662104,0.717307,0.033854),
      vec3(-0.373100,0.576021,0.308274),
      vec3(0.024233,0.231316,-0.173688),
      vec3(0.161311,0.420217,0.234273),
      vec3(-0.045248,0.078031,-0.010411),
      vec3(0.167453,0.376942,-0.094872),
      vec3(-0.056194,0.433247,0.173218),
      vec3(-0.016224,0.123149,-0.035569),
      vec3(0.067127,0.407641,0.028479)
   );

   float depth = texture2D(depthmap, vTexCoords).r;
   if(depth == 1.0) {
      discard;
   }

   vec4 screen_position = vec4(vTexCoords, depth,1.0);
   vec4 pos = projinv*screen_position;
   pos /= pos.w;
   vec3 position = pos.xyz;

   //approximate the normal from the depth map; I find this simpler
   //than trying to recompute the exact normal within every possible object shader

   //pixel offset positions in screen space
   ivec2 dim = textureSize(depthmap,0);
   vec2 offset1 = vec2(0.0,1.0/float(dim.y));
   vec2 offset2 = vec2(1.0/float(dim.x),0.0);
   float depth1 = texture2D(depthmap, vTexCoords + offset1).r;
   float depth2 = texture2D(depthmap, vTexCoords + offset2).r;
   
   vec3 p1 = vec3(screen_position.xy+offset1, depth1 - depth);
   vec3 p2 = vec3(screen_position.xy+offset2, depth2 - depth);

   //convert to model space
   vec4 pos1 = projinv*vec4(p1,1);
   pos1 /= pos1.w;
   vec4 pos2 = projinv*vec4(p2,1);
   pos2 /= pos2.w;

   vec3 normal = normalize(cross(pos1.xyz-position, pos2.xyz-position)); //model normal, important we normalize in model space

   //pseudo random number

   float occlusion = 0.0;
   for(int c = 0; c < cycles; c++) {
   vec3 random = normalize(pseudorandomVec3(position+float(c)));
   for(int i=0; i < samples; i++) {

      vec3 ray = radius * reflect(sample_sphere[i],random);
      vec3 hemi_ray = position + sign(dot(ray,normal)) * ray; //model space
      vec4 hemi_screen = projectionMatrix*vec4(hemi_ray,1.0);
      hemi_screen /= hemi_screen.w;
      
      float occ_depth = texture2D(depthmap, clamp(hemi_screen.xy,0.0,1.0)).r;
      float difference = hemi_screen.z - occ_depth;
      
      occlusion += step(0.0, difference) * (1.0-smoothstep(0.0, area, difference));
   }
   }
   float ao = 1.0 - total_strength * occlusion * (1.0 / float(cycles*samples));
   gl_FragDepthEXT = clamp(ao+base,0.0,1.0);

}`,vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `,uniforms:{total_strength:{type:"f",value:1},radius:{type:"f",value:5},projinv:{type:"mat4",value:[]}}},sphereimposter:Gr,sphereimposteroutline:Ri,sprite:Ii,stickimposter:qi,stickimposteroutline:Ni,volumetric:Yr};function Qi(Yt){let T={};for(const Pe in Yt){T[Pe]={},T[Pe].type=Yt[Pe].type;var me=Yt[Pe].value;me instanceof Y.Color?T[Pe].value=me.clone():typeof me=="number"?T[Pe].value=me:me instanceof Array?T[Pe].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return T}const Mi={clone:Qi};class rn extends Ve{constructor(T=50,me=1,Pe=.1,Qe=2e3,$e=!1){super(),this.projectionMatrix=new d.Matrix4,this.projectionMatrixInverse=new d.Matrix4,this.matrixWorldInverse=new d.Matrix4,this.fov=T,this.aspect=me,this.near=Pe,this.far=Qe;var Mt=this.position.z;this.right=Mt*Math.tan(Math.PI/180*T),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!$e,this.updateProjectionMatrix()}lookAt(T){this.matrix.lookAt(this.position,T,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof d.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error("Unimplemented math operation."))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}class fn{constructor(T,me=1,Pe=1e3){this.name="",this.color=new Y.Color(T),this.near=me,this.far=Pe}clone(){return new fn(this.color.getHex(),this.near,this.far)}}class vn{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(T){this.gl=T.context,this.renderer=T,this.precision=T.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var me=0;this.sprite.vertices[me++]=-1,this.sprite.vertices[me++]=-1,this.sprite.vertices[me++]=0,this.sprite.vertices[me++]=0,this.sprite.vertices[me++]=1,this.sprite.vertices[me++]=-1,this.sprite.vertices[me++]=1,this.sprite.vertices[me++]=0,this.sprite.vertices[me++]=1,this.sprite.vertices[me++]=1,this.sprite.vertices[me++]=1,this.sprite.vertices[me++]=1,this.sprite.vertices[me++]=-1,this.sprite.vertices[me++]=1,this.sprite.vertices[me++]=0,this.sprite.vertices[me++]=1,me=0,this.sprite.faces[me++]=0,this.sprite.faces[me++]=1,this.sprite.faces[me++]=2,this.sprite.faces[me++]=0,this.sprite.faces[me++]=2,this.sprite.faces[me++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(li.sprite,this.precision||1),this.sprite.attributes={};const Pe={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,"position"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,"uv"),Pe.uvOffset=this.gl.getUniformLocation(this.sprite.program,"uvOffset"),Pe.uvScale=this.gl.getUniformLocation(this.sprite.program,"uvScale"),Pe.rotation=this.gl.getUniformLocation(this.sprite.program,"rotation"),Pe.scale=this.gl.getUniformLocation(this.sprite.program,"scale"),Pe.alignment=this.gl.getUniformLocation(this.sprite.program,"alignment"),Pe.color=this.gl.getUniformLocation(this.sprite.program,"color"),Pe.map=this.gl.getUniformLocation(this.sprite.program,"map"),Pe.opacity=this.gl.getUniformLocation(this.sprite.program,"opacity"),Pe.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,"useScreenCoordinates"),Pe.screenPosition=this.gl.getUniformLocation(this.sprite.program,"screenPosition"),Pe.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,"modelViewMatrix"),Pe.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,"projectionMatrix"),Pe.fogNear=this.gl.getUniformLocation(this.sprite.program,"fogNear"),Pe.fogFar=this.gl.getUniformLocation(this.sprite.program,"fogFar"),Pe.fogColor=this.gl.getUniformLocation(this.sprite.program,"fogColor"),Pe.alphaTest=this.gl.getUniformLocation(this.sprite.program,"alphaTest"),this.sprite.uniforms=Pe}render(T,me,Pe,Qe,$e){var Mt,xt,At,Vt,Ut,Xt,Tr,lr,zr,Fr;if(!this.gl)throw new Error("WebGLRenderer not initialized");let Jr=[];(Mt=T?.__webglSprites)===null||Mt===void 0||Mt.forEach(V=>{($e&&V.material.depthTest==0||!$e&&V.material.depthTest)&&Jr.push(V)});let kr=Jr.length;if(!kr)return;const Xr=this.sprite.attributes,Dr=this.sprite.uniforms;if(!Dr)throw new Error("Uniforms not defined");var Vi=.5*Pe,ur=.5*Qe;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(Xr.position),this.gl.enableVertexAttribArray(Xr.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(Xr.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(Xr.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv(Dr.projectionMatrix,!1,me.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i(Dr.map,0);var fi,ye=T.fog;let n,a,h;ye?(this.gl.uniform3f(Dr.fogColor,ye.color.r,ye.color.g,ye.color.b),this.gl.uniform1f(Dr.fogNear,ye.near),this.gl.uniform1f(Dr.fogFar,ye.far)):(this.gl.uniform1f(Dr.fogNear,0),this.gl.uniform1f(Dr.fogFar,0));let f=[];for(fi=0;fi<kr;fi++)n=Jr[fi],a=n.material,a&&(a.depthTest!=0||$e)&&n.visible&&a.opacity!==0&&(a.useScreenCoordinates?n.z=-n.position.z:(n._modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,n.matrixWorld),n.z=-n._modelViewMatrix.elements[14]));for(Jr.sort(_r),fi=0;fi<kr;fi++)if(n=Jr[fi],a=n.material,a&&n.visible&&a.opacity!==0&&a.map&&a.map.image&&a.map.image.width){this.gl.uniform1f(Dr?.alphaTest||null,a.alphaTest);var z=a.map.image.width,_=a.map.image.height;f[0]=z*this.renderer.devicePixelRatio/Pe,f[1]=_*this.renderer.devicePixelRatio/Qe,a.useScreenCoordinates===!0?(this.gl.uniform1i(Dr.useScreenCoordinates,1),this.gl.uniform3f(Dr.screenPosition,(n.position.x*this.renderer.devicePixelRatio-Vi)/Vi,(ur-n.position.y*this.renderer.devicePixelRatio)/ur,Math.max(0,Math.min(1,n.position.z)))):(this.gl.uniform1i(Dr.useScreenCoordinates,0),this.gl.uniformMatrix4fv(Dr.modelViewMatrix,!1,n._modelViewMatrix.elements)),h=1/(a.scaleByViewport?Qe:1),f[0]*=h*n.scale.x,f[1]*=h*n.scale.y;let V=(xt=a?.alignment)===null||xt===void 0?void 0:xt.x,B=(At=a?.alignment)===null||At===void 0?void 0:At.y;a.screenOffset&&(V=(V||0)+2*a.screenOffset.x/z,B=(B||0)+2*a.screenOffset.y/_),this.gl.uniform2f(Dr.uvScale,((Vt=a?.uvScale)===null||Vt===void 0?void 0:Vt.x)||1,((Ut=a?.uvScale)===null||Ut===void 0?void 0:Ut.y)||1),this.gl.uniform2f(Dr.uvOffset,((Xt=a?.uvOffset)===null||Xt===void 0?void 0:Xt.x)||0,((Tr=a?.uvOffset)===null||Tr===void 0?void 0:Tr.y)||0),this.gl.uniform2f(Dr.alignment,V||0,B||0),this.gl.uniform1f(Dr.opacity,a.opacity),this.gl.uniform3f(Dr.color,((lr=a?.color)===null||lr===void 0?void 0:lr.r)||0,((zr=a?.color)===null||zr===void 0?void 0:zr.g)||0,((Fr=a?.color)===null||Fr===void 0?void 0:Fr.b)||0),this.gl.uniform1f(Dr.rotation,n.rotation),this.gl.uniform2fv(Dr.scale,f),this.renderer.setDepthTest(a.depthTest),this.renderer.setDepthWrite(a.depthWrite),this.renderer.setTexture(a.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(T,me){if(!this.gl)throw new Error("WebGL Rendering context not found");var Pe=this.gl.createProgram();if(!Pe)throw new Error("Error creating webgl program");var Qe=this.gl.createShader(this.gl.FRAGMENT_SHADER),$e=this.gl.createShader(this.gl.VERTEX_SHADER);if(!Qe)throw new Error("Unable to create fragment shader SpritePlugin.createProgram");if(!$e)throw new Error("Unable to create vertex shader SpritePlugin.createProgram");var Mt="precision "+me+` float;
`;if(this.gl.shaderSource(Qe,Mt+T.fragmentShader),this.gl.shaderSource($e,Mt+T.vertexShader),this.gl.compileShader(Qe),this.gl.compileShader($e),!this.gl.getShaderParameter(Qe,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter($e,this.gl.COMPILE_STATUS))throw new Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(Qe)} 
      ${this.gl.getShaderInfoLog($e)}`);return this.gl.attachShader(Pe,Qe),this.gl.attachShader(Pe,$e),this.gl.linkProgram(Pe),this.gl.getProgramParameter(Pe,this.gl.LINK_STATUS)||console.error("Could not initialize shader"),Pe}}function _r(Yt,T){return Yt.z!==T.z?T.z-Yt.z:T.id-Yt.id}var ei=null,si=null;class on{constructor(T){this.context=null,this.devicePixelRatio=1,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._offscreen=null,this._bitmap=null,this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._vector3=new d.Vector3,this._worldInverse=new d.Matrix4,this._projInverse=new d.Matrix4,this._textureMatrix=new d.Matrix4,this._fullProjModelMatrix=new d.Matrix4,this._fullProjModelMatrixInv=new d.Matrix4,this._direction=new d.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new vn,this._screenshader=null,this._AOshader=null,this._blurshader=null,this._vertexattribpos=null,this._aovertexattribpos=null,this._blurvertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,this._shadingTexture=null,this._scratchTexture=null,this._upscale=null,this._AOstrength=1,this._AOradius=5,this.SHADE_TEXTURE=3,T=T||{},this.row=T.row,this.col=T.col,this.rows=T.rows,this.cols=T.cols,this._canvas=T.canvas!==void 0?T.canvas:document.createElement("canvas"),this._precision=T.precision!==void 0?T.precision:"highp",this._alpha=T.alpha===void 0||T.alpha,this._premultipliedAlpha=T.premultipliedAlpha===void 0||T.premultipliedAlpha,this._antialias=T.antialias!==void 0&&T.antialias,this._upscale=T.upscale!==void 0?T.upscale:this._antialias,this._preserveDrawingBuffer=T.preserveDrawingBuffer!==void 0&&T.preserveDrawingBuffer,this._clearColor=T.clearColor!==void 0?new Y.Color(T.clearColor):new Y.Color(0),this._clearAlpha=T.clearAlpha!==void 0?T.clearAlpha:0,this._outlineMaterial=new Pr(T.outline),this._outlineSphereImposterMaterial=new Br(T.outline),this._outlineStickImposterMaterial=new Di(T.outline),this._outlineEnabled=!!T.outline,this._AOEnabled=!!T.ambientOcclusion,T.ambientOcclusion&&T.ambientOcclusion.strength!==void 0&&(this._AOstrength=parseFloat(T.ambientOcclusion.strength)),this._AOstrength==0&&(this._AOEnabled=!1),T.ambientOcclusion&&T.ambientOcclusion.radius!==void 0&&(this._AOradius=parseFloat(T.ambientOcclusion.radius)),this.domElement=this._canvas,this._canvas.id=T.id,T.containerWidth!=0&&T.containerHeight!=0&&(this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension("ANGLE_instanced_arrays"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension("EXT_frag_depth"),this._extFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._extColorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this.sprites.init(this))}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1(),regen:!1}}getContext(){return this._gl}getCanvas(){return this._canvas}isLost(){return this._gl==null||this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(T,me){this._clearColor.setHex(T),this._clearAlpha=me,this.isLost()||this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(T){this._outlineMaterial=new Pr(T),this._outlineSphereImposterMaterial=new Br(T),this._outlineStickImposterMaterial=new Di(T),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}enableAmbientOcclusion(T){T&&(T.strength&&(this._AOstrength=T.strength),T.scale&&(this._AOradius=T.scale)),this._AOEnabled=this._AOstrength>0}disableAmbientOcclusion(){this._AOEnabled=!1}setViewport(){if(this._offscreen&&(this._offscreen.width=this._canvas.width,this._offscreen.height=this._canvas.height),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&!this.isLost()){var T=this._gl.drawingBufferWidth/this.cols,me=this._gl.drawingBufferHeight/this.rows;this._viewportWidth=T,this._viewportHeight=me,this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(T*this.col,me*this.row,T,me),this._gl.viewport(T*this.col,me*this.row,T,me)}}setSize(T,me){this.devicePixelRatio=window.devicePixelRatio!==void 0?window.devicePixelRatio:1,this._upscale&&this.devicePixelRatio<2&&(this.devicePixelRatio=2),this._canvas.width=T*this.devicePixelRatio,this._canvas.height=me*this.devicePixelRatio,this._canvas.style.width=T+"px",this._canvas.style.height=me+"px",this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null?(this.isLost()||(this._viewportWidth=this._gl.drawingBufferWidth/this.cols,this._viewportHeight=this._gl.drawingBufferHeight/this.rows),this.setViewport()):(this._viewportWidth=this._canvas.width,this._viewportHeight=this._canvas.height,this.isLost()||this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight)),this.initFrameBuffer()}clear(T,me,Pe){var Qe=0;(T===void 0||T)&&(Qe|=this._gl.COLOR_BUFFER_BIT),(me===void 0||me)&&(Qe|=this._gl.DEPTH_BUFFER_BIT),(Pe===void 0||Pe)&&(Qe|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(Qe)}setMaterialFaces(T,me){var Pe=T.side===u,Qe=T.side===x;T.imposter||(Qe=me?!Qe:Qe),this._oldDoubleSided!==Pe&&(Pe?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=Pe),this._oldFlipSided!==Qe&&(Qe?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=Qe),this._gl.cullFace(this._gl.BACK)}setDepthTest(T){this._oldDepthTest!==T&&(T?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=T)}setDepthWrite(T){this._oldDepthWrite!==T&&(this._gl.depthMask(T),this._oldDepthWrite=T)}setBlending(T){T?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND)}initMaterial(T,me,Pe,Qe){var $e,Mt;if(T.addEventListener("dispose",this.onMaterialDispose.bind(this)),Mt=T.shaderID){var xt=li[Mt];T.vertexShader=xt.vertexShader,T.fragmentShader=xt.fragmentShader,T.uniforms=Mi.clone(xt.uniforms),T.shaded&&T.makeShaded(this.SHADE_TEXTURE)}$e={wireframe:T.wireframe,fragdepth:T.imposter,volumetric:T.volumetric,shaded:T.shaded},T.program=this.buildProgram(T.fragmentShader,T.vertexShader,T.uniforms,$e)}renderBuffer(T,me,Pe,Qe,$e,Mt){var xt,At;if(Qe.visible&&(xt=this.setProgram(T,me,Pe,Qe,Mt,this))){At=xt.attributes;var Vt,Ut,Xt=!1,Tr=Qe.wireframe?1:0,lr=16777215*$e.id+2*xt.id+Tr;if(lr!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=lr,Xt=!0),Xt&&(this.disableAttributes(),At.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,$e.__webglVertexBuffer),this.enableAttribute(At.position),this._gl.vertexAttribPointer(At.position,3,this._gl.FLOAT,!1,0,0)),At.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,$e.__webglColorBuffer),this.enableAttribute(At.color),this._gl.vertexAttribPointer(At.color,3,this._gl.FLOAT,!1,0,0)),At.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,$e.__webglNormalBuffer),this.enableAttribute(At.normal),this._gl.vertexAttribPointer(At.normal,3,this._gl.FLOAT,!1,0,0)),At.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,$e.__webglOffsetBuffer),this.enableAttribute(At.offset),this._gl.vertexAttribPointer(At.offset,3,this._gl.FLOAT,!1,0,0)),At.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,$e.__webglRadiusBuffer),this.enableAttribute(At.radius),this._gl.vertexAttribPointer(At.radius,1,this._gl.FLOAT,!1,0,0))),Mt instanceof We){if(Qe.shaderID==="instanced"){var zr=Qe.sphere.geometryGroups[0];Xt&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,$e.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,zr.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,$e.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,zr.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,$e.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,zr.faceArray,this._gl.STATIC_DRAW)),Vt=zr.faceidx,this._extInstanced.vertexAttribDivisorANGLE(At.offset,1),this._extInstanced.vertexAttribDivisorANGLE(At.radius,1),this._extInstanced.vertexAttribDivisorANGLE(At.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,Vt,this._gl.UNSIGNED_SHORT,0,$e.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(At.offset,0),this._extInstanced.vertexAttribDivisorANGLE(At.radius,0),this._extInstanced.vertexAttribDivisorANGLE(At.color,0)}else Qe.wireframe?(Ut=$e.lineidx,this.setLineWidth(Qe.wireframeLinewidth),Xt&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,$e.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,Ut,this._gl.UNSIGNED_SHORT,0)):(Vt=$e.faceidx,Xt&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,$e.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,Vt,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=Vt,this.info.render.faces+=Vt/3}else Mt instanceof Le&&(Ut=$e.vertices,this.setLineWidth(Qe.linewidth),this._gl.drawArrays(this._gl.LINES,0,Ut),this.info.render.calls++)}}clearShading(){this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}setShading(T,me,Pe){let Qe=T.__lights,$e=T.fog,Mt=[];for(let Vt=0,Ut=T.__webglObjects.length;Vt<Ut;Vt++){let Xt=T.__webglObjects[Vt];Xt.render&&Xt[Pe]&&Mt.push(Xt)}if(Mt.length==0)return;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,null,0),this.renderObjects(T.__webglObjects,!0,Pe+"Depth",me,Qe,$e,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._scratchTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._AOshader),this._currentProgram=this._AOshader,this.setDepthTest(-1),this.setDepthWrite(-1);let xt=this._AOshader.uniforms;this._gl.uniform1f(xt.total_strength,this._AOstrength),this._gl.uniform1f(xt.radius,this._AOradius),this._fullProjModelMatrix=new d.Matrix4,this._fullProjModelMatrixInv=new d.Matrix4;let At=Mt[0].object;this._fullProjModelMatrix.multiplyMatrices(me.projectionMatrix,At._modelViewMatrix),this._fullProjModelMatrixInv.getInverse(this._fullProjModelMatrix),this._gl.uniformMatrix4fv(xt.projectionMatrix,!1,this._fullProjModelMatrix.elements),this._gl.uniformMatrix4fv(xt.projinv,!1,this._fullProjModelMatrixInv.elements),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._aovertexattribpos),this._gl.vertexAttribPointer(this._aovertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._blurshader),this._currentProgram=this._blurshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._blurvertexattribpos),this._gl.vertexAttribPointer(this._blurvertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}render(T,me){if(me instanceof rn==0)return void console.error("Renderer.render: camera is not an instance of Camera.");var Pe,Qe,$e,Mt,xt,At=T.__lights,Vt=T.fog;if(this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&T.updateMatrixWorld(),me.parent===void 0&&me.updateMatrixWorld(),me.matrixWorldInverse.getInverse(me.matrixWorld),this.isLost())return;this.autoUpdateObjects&&this.initWebGLObjects(T),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(!0,!0,!0),xt=T.__webglObjects;let Ut=!1,Xt=this._AOEnabled;for(Pe=0,Qe=xt.length;Pe<Qe;Pe++)Mt=($e=xt[Pe]).object,$e.render=!1,Mt.visible&&(this.setupMatrices(Mt,me),this.unrollBufferMaterial($e),$e.render=!0,$e.volumetric&&(Ut=!0),$e.hasAO&&(Xt=!0));if(this.setBlending(!1),Xt&&this.setShading(T,me,"opaque"),this.renderObjects(T.__webglObjects,!0,"opaque",me,At,Vt,!1),Xt&&this.clearShading(),this.renderSprites(T,me,!1),this.renderObjects(T.__webglObjects,!0,"transparentDepth",me,At,Vt,!0),this.renderObjects(T.__webglObjects,!1,"transparent",me,At,Vt,!0),Ut&&this._fb&&(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,null,0),this.renderObjects(T.__webglObjects,!1,"volumetric",me,At,Vt,!0)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(T,me,!0),this._bitmap){const Tr=this._offscreen.transferToImageBitmap();this._bitmap.transferFromImageBitmap(Tr),Tr.close()}}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let T=this._viewportWidth,me=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,T,me),this._gl.viewport(0,0,T,me),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,T,me,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,T,me,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._shadingTexture&&(this._gl.deleteTexture(this._shadingTexture),this._shadingTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,T,me,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.deleteTexture(this._scratchTexture),this._scratchTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,T,me,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.clearDepth(1),this._gl.clear(this._gl.DEPTH_BUFFER_BIT),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let T=this._viewportWidth,me=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,T,me),this._gl.viewport(0,0,T,me),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._shadingTexture=this._gl.createTexture(),this._scratchTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var Pe=this._antialias?li.screenaa:li.screen;this._screenshader=this.buildProgram(Pe.fragmentShader,Pe.vertexShader,Pe.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,"vertexPosition"),this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array([1,1,-1,1,-1,-1,-1,-1,1,-1,1,1]),this._gl.STATIC_DRAW);let Qe=li.ssao;this._AOshader=this.buildProgram(Qe.fragmentShader,Qe.vertexShader,Qe.uniforms,{}),this._aovertexattribpos=this._gl.getAttribLocation(this._AOshader,"vertexPosition");let $e=li.blur;this._blurshader=this.buildProgram($e.fragmentShader,$e.vertexShader,$e.uniforms,{}),this._blurvertexattribpos=this._gl.getAttribLocation(this._blurshader,"vertexPosition")}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(T){if(T.__webglObjects||(T.__webglObjects=[],T.__webglObjectsImmediate=[],T.__webglSprites=[],T.__webglFlares=[]),T.__objectsAdded.length){for(;T.__objectsAdded.length;)this.addObject(T.__objectsAdded[0],T),T.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;T.__objectsRemoved.length;)this.removeObject(T.__objectsRemoved[0],T),T.__objectsRemoved.splice(0,1);for(var me=0,Pe=T.__webglObjects.length;me<Pe;me++)this.updateObject(T.__webglObjects[me].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(T,me){T!=null&&me!=null||(T=this._canvas.width,me=this._canvas.height);var Pe=T/me;return this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&(Pe=T/this.cols/(me/this.rows)),Pe}setTexture(T,me,Pe){if(T.needsUpdate){T.__webglInit||(T.__webglInit=!0,T.addEventListener("dispose",this.onTextureDispose.bind(this)),T.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+me);var Qe=Pe?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(Qe,T.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,T.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,T.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,T.unpackAlignment);var $e=this.paramToGL(T.format),Mt=this.paramToGL(T.type);if(Pe)this.setTextureParameters(this._gl.TEXTURE_3D,T),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,T.image.size.z,T.image.size.y,T.image.size.x,0,this._gl.RED,this._gl.FLOAT,T.image.data);else{var xt=T.image,At=xt.width,Vt=xt.height;At===void 0&&(At=xt.length,$e==this._gl.RGBA&&(At/=4),Vt=1),this.setTextureParameters(this._gl.TEXTURE_2D,T),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,$e,$e,Mt,T.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,$e,At,Vt,0,$e,Mt,T.image)}T.needsUpdate=!1,T.onUpdate&&T.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+me),Pe?this._gl.bindTexture(this._gl.TEXTURE_3D,T.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,T.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(T){this._enabledAttributes[T]||(this._gl.enableVertexAttribArray(T),this._enabledAttributes[T]=!0)}disableAttributes(){for(let T in this._enabledAttributes)this._enabledAttributes[T]&&(this._gl.disableVertexAttribArray(T),this._enabledAttributes[T]=!1)}setPolygonOffset(T,me,Pe){this._oldPolygonOffset!==T&&(T?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(T){T!==this._oldLineWidth&&(this._gl.lineWidth(T),this._oldLineWidth=T)}deallocateGeometry(T){if(T.__webglInit=void 0,T.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(T.__webglVertexBuffer),T.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(T.__webglColorBuffer),T.geometryGroups!==void 0)for(var me=0,Pe=T.groups;me<Pe;me++){var Qe=T.geometryGroups[me];Qe.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(Qe.__webglVertexBuffer),Qe.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(Qe.__webglColorBuffer),Qe.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(Qe.__webglNormalBuffer),Qe.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(Qe.__webglFaceBuffer),Qe.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(Qe.__webglLineBuffer)}}deallocateMaterial(T){var me=T.program;if(me!==void 0){var Pe,Qe,$e;T.program=void 0;var Mt=!1;for(Pe=0,Qe=this._programs.length;Pe<Qe;Pe++)if(($e=this._programs[Pe]).program===me){$e.usedTimes--,$e.usedTimes===0&&(Mt=!0);break}if(Mt===!0){var xt=[];for(Pe=0,Qe=this._programs.length;Pe<Qe;Pe++)($e=this._programs[Pe]).program!==me&&xt.push($e);this._programs=xt,this._gl.deleteProgram(me),this.info.memory.programs--}}}deallocateTexture(T){if(T.image&&T.image.__webglTextureCube)this._gl.deleteTexture(T.image.__webglTextureCube);else{if(!T.__webglInit)return;T.__webglInit=!1,this._gl.deleteTexture(T.__webglTexture)}}onGeometryDispose(T){var me=T.target;me.removeEventListener("dispose",this.onGeometryDispose),this.deallocateGeometry(me),this.info.memory.geometries--}onTextureDispose(T){var me=T.target;me.removeEventListener("dispose",this.onTextureDispose),this.deallocateTexture(me),this.info.memory.textures--}onMaterialDispose(T){var me=T.target;me.removeEventListener("dispose",this.onMaterialDispose),this.deallocateMaterial(me)}getShader(T,me){var Pe;return this.isWebGL1()||me.startsWith("#version")||(me=me.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),me=`#version 300 es
`+(me=(me=(me=(me=(me=T=="fragment"?me.replace(/varying/g,"in"):me.replace(/varying/g,"out")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;")).replace(/gl_FragColor/g,"glFragColor"))),T==="fragment"?Pe=this._gl.createShader(this._gl.FRAGMENT_SHADER):T==="vertex"&&(Pe=this._gl.createShader(this._gl.VERTEX_SHADER)),Pe==null?null:(this._gl.shaderSource(Pe,me),this._gl.compileShader(Pe),this._gl.getShaderParameter(Pe,this._gl.COMPILE_STATUS)?Pe:(console.error(this._gl.getShaderInfoLog(Pe)),console.error("could not initialize shader"),null))}buildProgram(T,me,Pe,Qe){var $e,Mt,xt,At,Vt=[];for($e in Vt.push(T),Vt.push(me),Qe)Vt.push($e),Vt.push(Qe[$e]);for(At=Vt.join(),$e=0,Mt=this._programs.length;$e<Mt;$e++){var Ut=this._programs[$e];if(Ut.code===At)return Ut.usedTimes++,Ut.program}if(this.isWebGL1()&&Qe.volumetric)throw new Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");if((xt=this._gl.createProgram())==null)return null;var Xt,Tr,lr,zr="precision "+this._precision+" float;",Fr=[Qe.volumetric?"#version 300 es":"",zr].join(`
`),Jr=[Qe.volumetric?"#version 300 es":"",Qe.fragdepth&&this.isWebGL1()?"#extension GL_EXT_frag_depth: enable":"",Qe.shaded?"#define SHADED 1":"",Qe.wireframe?"#define WIREFRAME 1":"",zr].join(`
`),kr=this.getShader("fragment",Jr+T),Xr=this.getShader("vertex",Fr+me);for(Tr in Xr!=null&&this._gl.attachShader(xt,Xr),kr!=null&&this._gl.attachShader(xt,kr),this._gl.linkProgram(xt),this._gl.getProgramParameter(xt,this._gl.LINK_STATUS)||console.error("Could not initialize shader"),xt.uniforms={},xt.attributes={},Xt=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","vWidth","vHeight"],Pe)Xt.push(Tr);for(lr=0;lr<Xt.length;lr++){var Dr=Xt[lr];xt.uniforms[Dr]=this._gl.getUniformLocation(xt,Dr)}for(Xt=["position","normal","color","lineDistance","offset","radius"],lr=0;lr<Xt.length;lr++){var Vi=Xt[lr];xt.attributes[Vi]=this._gl.getAttribLocation(xt,Vi)}return xt.id=this._programs_counter++,this._programs.push({program:xt,code:At,usedTimes:1}),this.info.memory.programs=this._programs.length,xt}setProgram(T,me,Pe,Qe,$e,Mt){if(Qe.needsUpdate&&(Qe.program&&this.deallocateMaterial(Qe),this.initMaterial(Qe,me,Pe,$e),Qe.needsUpdate=!1),Qe.program==null)return null;var xt=!1,At=Qe.program,Vt=At.uniforms,Ut=Qe.uniforms;if(At!=this._currentProgram&&(this._gl.useProgram(At),this._currentProgram=At,xt=!0),Qe.id!=this._currentMaterialId&&(this._currentMaterialId=Qe.id,xt=!0),T!=this._currentCamera&&(this._currentCamera=T,xt=!0),Vt.projectionMatrix&&this._gl.uniformMatrix4fv(Vt.projectionMatrix,!1,T.projectionMatrix.elements),Vt.modelViewMatrix&&this._gl.uniformMatrix4fv(Vt.modelViewMatrix,!1,$e._modelViewMatrix.elements),Vt.normalMatrix&&this._gl.uniformMatrix3fv(Vt.normalMatrix,!1,$e._normalMatrix.elements),Vt.projinv&&(this._projInverse.getInverse(T.projectionMatrix),this._gl.uniformMatrix4fv(Vt.projinv,!1,this._projInverse.elements)),Vt.viewMatrix&&this._gl.uniformMatrix4fv(Vt.viewMatrix,!1,T.matrixWorldInverse.elements),Vt.vWidth&&this._gl.uniform1f(Vt.vWidth,this._viewportWidth),Vt.vHeight&&this._gl.uniform1f(Vt.vHeight,this._viewportHeight),xt){if(Ut.fogColor.value=Pe.color,Ut.fogNear.value=Pe.near,Ut.fogFar.value=Pe.far,Qe.shaderID.startsWith("lambert")||Qe.shaderID==="instanced"||Qe.shaderID.endsWith("imposter"))this._lightsNeedUpdate&&(this.setupLights(At,me),this._lightsNeedUpdate=!1),Ut.directionalLightColor.value=this._lights.directional.colors,Ut.directionalLightDirection.value=this._lights.directional.positions;else if(Qe.shaderID.endsWith("outline"))Ut.outlineColor.value=Qe.outlineColor,Ut.outlineWidth.value=Qe.outlineWidth,Ut.outlinePushback.value=Qe.outlinePushback,Ut.outlineMaxPixels.value=Qe.outlineMaxPixels*this.devicePixelRatio;else if(Qe.shaderID==="volumetric"){$e._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse($e._modelViewMatrix),this._projInverse.getInverse(T.projectionMatrix),this._textureMatrix.multiplyMatrices($e.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(Vt.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(Vt.projinv,!1,this._projInverse.elements);let Xt=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);Ut.step.value=$e.material.unit*Xt,Ut.maxdepth.value=$e.material.maxdepth*Xt,Ut.transfermax.value=$e.material.transfermax,Ut.transfermin.value=$e.material.transfermin,Ut.subsamples.value=$e.material.subsamples,Mt.setTexture($e.material.transferfn,4,!1),Mt.setTexture($e.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}Ut.opacity.value=Qe.opacity,this.loadMaterialUniforms(Vt,Ut)}return Ut.shading&&(Ut.shading.value==3?(this._gl.activeTexture(this._gl.TEXTURE0+this.SHADE_TEXTURE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture)):console.error("Invalid shading textures.")),At}loadMaterialUniforms(T,me){var Pe,Qe,$e,Mt;for(Pe in me)T[Pe]&&(Qe=me[Pe].type,$e=me[Pe].value,Mt=T[Pe],Qe==="f"?this._gl.uniform1f(Mt,$e):Qe==="i"?this._gl.uniform1i(Mt,$e):Qe==="fv"?this._gl.uniform3fv(Mt,$e):Qe==="c"?this._gl.uniform3f(Mt,$e.r,$e.g,$e.b):Qe==="f4"&&this._gl.uniform4f(Mt,$e[0],$e[1],$e[2],$e[3]))}addObject(T,me){var Pe,Qe,$e,Mt;if(!T.__webglInit&&(T.__webglInit=!0,T._modelViewMatrix=new d.Matrix4,T._normalMatrix=new d.Matrix3,T.geometry!==void 0&&T.geometry.__webglInit===void 0&&(T.geometry.__webglInit=!0,T.geometry.addEventListener("dispose",this.onGeometryDispose.bind(this))),T instanceof We||T instanceof Le))for(Pe=0,Qe=($e=T.geometry).geometryGroups.length;Pe<Qe;Pe++)(Mt=$e.geometryGroups[Pe]).id=this._geometryGroupCounter++,Mt.__webglVertexBuffer||(T instanceof We?(this.createMeshBuffers(Mt),$e.elementsNeedUpdate=!0,$e.normalsNeedUpdate=!0):T instanceof Le&&this.createLineBuffers(Mt),$e.verticesNeedUpdate=!0,$e.colorsNeedUpdate=!0);if(!T.__webglActive){if(T instanceof We||T instanceof Le)for(Pe=0,Qe=($e=T.geometry).geometryGroups.length;Pe<Qe;Pe++)Mt=$e.geometryGroups[Pe],this.addBuffer(me.__webglObjects,Mt,T);else T instanceof St&&me.__webglSprites.push(T);T.__webglActive=!0}}updateObject(T){var me,Pe=T.geometry;if(T instanceof We||T instanceof Le){for(var Qe=0,$e=Pe.geometryGroups.length;Qe<$e;Qe++)me=Pe.geometryGroups[Qe],(Pe.verticesNeedUpdate||Pe.elementsNeedUpdate||Pe.colorsNeedUpdate||Pe.normalsNeedUpdate)&&this.setBuffers(me,this._gl.STATIC_DRAW);Pe.verticesNeedUpdate=!1,Pe.elementsNeedUpdate=!1,Pe.normalsNeedUpdate=!1,Pe.colorsNeedUpdate=!1,Pe.buffersNeedUpdate=!1}}removeObject(T,me){T instanceof We||T instanceof Le?this.removeInstances(me.__webglObjects,T):T instanceof St&&this.removeInstancesDirect(me.__webglSprites,T),T.__webglActive=!1}removeInstances(T,me){for(var Pe=T.length-1;Pe>=0;--Pe)T[Pe].object===me&&T.splice(Pe,1)}removeInstancesDirect(T,me){for(var Pe=T.length-1;Pe>=0;--Pe)T[Pe]===me&&T.splice(Pe,1)}unrollBufferMaterial(T){var me=T.object.material;if(me.volumetric)T.opaque=null,T.transparent=null,T.volumetric=me;else if(me.transparent){if(T.opaque=null,T.volumetric=null,T.transparent=me,!me.wireframe){let Pe=me.clone();Pe.opacity=0,T.transparentDepth=Pe}}else{if(T.opaque=me,T.transparent=null,T.volumetric=null,!me.wireframe){let Pe=me.clone();Pe.opacity=0,T.opaqueDepth=Pe}me.hasAO&&(T.hasAO=!0),(this._AOEnabled||T.hasAO)&&(T.opaqueShaded=me.clone(),T.opaqueShaded.shaded=!0)}}setBuffers(T,me){var Pe=T.vertexArray,Qe=T.colorArray;if(T.__webglOffsetBuffer!==void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,T.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Pe,me)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,T.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Pe,me)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,T.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Qe,me),T.normalArray&&T.__webglNormalBuffer!==void 0){var $e=T.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,T.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,$e,me)}if(T.radiusArray&&T.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,T.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,T.radiusArray,me)),T.faceArray&&T.__webglFaceBuffer!==void 0){var Mt=T.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,T.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,Mt,me)}if(T.lineArray&&T.__webglLineBuffer!==void 0){var xt=T.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,T.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,xt,me)}}createMeshBuffers(T){T.radiusArray&&(T.__webglRadiusBuffer=this._gl.createBuffer()),T.useOffset&&(T.__webglOffsetBuffer=this._gl.createBuffer()),T.__webglVertexBuffer=this._gl.createBuffer(),T.__webglNormalBuffer=this._gl.createBuffer(),T.__webglColorBuffer=this._gl.createBuffer(),T.__webglFaceBuffer=this._gl.createBuffer(),T.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(T){T.__webglVertexBuffer=this._gl.createBuffer(),T.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(T,me,Pe){T.push({buffer:me,object:Pe,opaque:null,transparent:null})}setupMatrices(T,me){T._modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,T.matrixWorld),T._normalMatrix.getInverse(T._modelViewMatrix),T._normalMatrix.transpose()}filterFallback(T){return this._gl.LINEAR}setTextureParameters(T,me){T==this._gl.TEXTURE_2D?(this._gl.texParameteri(T,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(T,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(T,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(me.magFilter)),this._gl.texParameteri(T,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(me.minFilter))):(this._gl.texParameteri(T,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(T,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(T,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(T,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(T,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(T,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(T,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(T){return T===P?this._gl.UNSIGNED_BYTE:T===se?this._gl.RGBA:T===k?this._gl.NEAREST:0}setupLights(T,me){var Pe,Qe,$e,Mt,xt,At=this._lights,Vt=At.directional.colors,Ut=At.directional.positions,Xt=0,Tr=0;for(Pe=0,Qe=me.length;Pe<Qe;Pe++)if(Mt=($e=me[Pe]).color,xt=$e.intensity,$e instanceof W){if(this._direction.getPositionFromMatrix($e.matrixWorld),this._vector3.getPositionFromMatrix($e.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;Ut[Tr]=this._direction.x,Ut[Tr+1]=this._direction.y,Ut[Tr+2]=this._direction.z,Vt[Tr]=Mt.r*xt,Vt[Tr+1]=Mt.g*xt,Vt[Tr+2]=Mt.b*xt,Tr+=3,Xt++}At.ambient[0]=0,At.ambient[1]=0,At.ambient[2]=0,At.directional.length=Xt}initGL(){try{if(!OffscreenCanvas||this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){if(!(this._gl=this._canvas.getContext("webgl2",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("experimental-webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw"Error creating WebGL context."}else(si==null||si.isContextLost())&&(ei=new OffscreenCanvas(this._canvas.width,this._canvas.height),si=ei.getContext("webgl2",{alpha:!0,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})),this._offscreen=ei,this._gl=si,this._bitmap=this._canvas.getContext("bitmaprenderer",{alpha:!0});var T=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(T[6])}catch(me){console.error(me)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(T,me,Pe,Qe,$e,Mt,xt){var At,Vt,Ut,Xt,Tr,lr,zr;me?(Tr=T.length-1,lr=-1,zr=-1):(Tr=0,lr=T.length,zr=1);for(var Fr=Tr;Fr!==lr;Fr+=zr)if((At=T[Fr]).render){if(Vt=At.object,Ut=At.buffer,Xt=At[Pe],(At.hasAO||this._AOEnabled)&&At[Pe+"Shaded"]&&(Xt=At[Pe+"Shaded"]),!Xt)continue;this.setBlending(xt),this.setDepthTest(Xt.depthTest),this.setDepthWrite(Xt.depthWrite),this.setPolygonOffset(Xt.polygonOffset,Xt.polygonOffsetFactor,Xt.polygonOffsetUnits);var Jr=Vt._modelViewMatrix.isReflected();if(this.setMaterialFaces(Xt,Jr),this.renderBuffer(Qe,$e,Mt,Xt,Ut,Vt),(this._outlineEnabled||Xt.outline)&&!Xt.wireframe&&Xt.shaderID!=="basic"&&Xt.opacity!==0){let kr=this._outlineMaterial;Xt.shaderID=="sphereimposter"?kr=this._outlineSphereImposterMaterial:Xt.shaderID=="stickimposter"&&(kr=this._outlineStickImposterMaterial),this.renderBuffer(Qe,$e,Mt,kr,Ut,Vt)}}}renderSprites(T,me,Pe){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(T,me,this._currentWidth,this._currentHeight,Pe),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}},392:(e,r,s)=>{s.r(r),s.d(r,{assignBonds:()=>u});var o=s(408);const c=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],x=4.95;function u(p,d){for(let v=0,k=p.length;v<k;v++)p[v].index||(p[v].index=v);const w={x:{y:{z:[]}}};for(let v=0;v<p.length;v++){const k=p[v],H=Math.floor(k.x/x),P=Math.floor(k.y/x),j=Math.floor(k.z/x);w[H]||(w[H]={}),w[H][P]||(w[H][P]={}),w[H][P][j]||(w[H][P][j]=[]),w[H][P][j].push(k)}function C(v,k){for(let H=0;H<v.length;H++){const P=v[H];for(let j=0;j<k.length;j++){const se=k[j];if((0,o.areConnected)(P,se,d)){const ce=P.bonds.indexOf(se.index),ne=se.bonds.indexOf(P.index);ce===-1&&ne===-1?(P.bonds.push(se.index),P.bondOrder.push(1),se.bonds.push(P.index),se.bondOrder.push(1)):ce===-1?(P.bonds.push(se.index),P.bondOrder.push(se.bondOrder[ne])):ne===-1&&(se.bonds.push(P.index),se.bondOrder.push(P.bondOrder[ce]))}}}}for(let v in w){const k=parseInt(v);for(let H in w[k]){const P=parseInt(H);for(let j in w[k][P]){const se=parseInt(j),ce=w[k][P][se];for(let ne=0;ne<ce.length;ne++){const E=ce[ne];for(let K=ne+1;K<ce.length;K++){const Y=ce[K];(0,o.areConnected)(E,Y,d)&&E.bonds.indexOf(Y.index)==-1&&(E.bonds.push(Y.index),E.bondOrder.push(1),Y.bonds.push(E.index),Y.bondOrder.push(1))}}for(let ne=0;ne<c.length;ne++){const E=c[ne];w[k+E.x]&&w[k+E.x][P+E.y]&&w[k+E.x][P+E.y][se+E.z]&&C(ce,w[k+E.x][P+E.y][se+E.z])}}}}}},407:e=>{var r=(function(){for(var s,o=[],c=0;c<256;c++){s=c;for(var x=0;x<8;x++)s=1&s?3988292384^s>>>1:s>>>1;o[c]=s}return o})();e.exports=function(s,o,c,x){var u=r,p=x+c;s^=-1;for(var d=x;d<p;d++)s=s>>>8^u[255&(s^o[d])];return-1^s}},408:(e,r,s)=>{s.r(r),s.d(r,{areConnected:()=>x});var o=s(40);const c=new Set(["Na","K","Ca","Mg","Mn","Sr"]);function x(u,p,d){if(d&&d.unboundCations&&(c.has(u.elem)||c.has(p.elem)))return!1;let w=(0,o.bondLength)(u.elem)+(0,o.bondLength)(p.elem);w+=.25,w*=w;let C=u.x-p.x;if(C*=C,C>w)return!1;let v=u.y-p.y;if(v*=v,v>w)return!1;let k=u.z-p.z;if(k*=k,k>w)return!1;const H=C+v+k;return!(isNaN(H)||H<.5||H>w||u.altLoc!==p.altLoc&&u.altLoc.trim()!==""&&p.altLoc.trim()!=="")}},471:function(e,r){(function(s){function o(Ce,Le,We){for(var St=(Ce.byteLength,0),mt=We.length;mt>St;St++){var Ht=We.charCodeAt(St);if(128>Ht)Ce.setUint8(Le++,Ht>>>0&127);else if(2048>Ht)Ce.setUint8(Le++,Ht>>>6&31|192),Ce.setUint8(Le++,Ht>>>0&63|128);else if(65536>Ht)Ce.setUint8(Le++,Ht>>>12&15|224),Ce.setUint8(Le++,Ht>>>6&63|128),Ce.setUint8(Le++,Ht>>>0&63|128);else{if(!(1114112>Ht))throw new Error("bad codepoint "+Ht);Ce.setUint8(Le++,Ht>>>18&7|240),Ce.setUint8(Le++,Ht>>>12&63|128),Ce.setUint8(Le++,Ht>>>6&63|128),Ce.setUint8(Le++,Ht>>>0&63|128)}}}function c(Ce){for(var Le=0,We=0,St=Ce.length;St>We;We++){var mt=Ce.charCodeAt(We);if(128>mt)Le+=1;else if(2048>mt)Le+=2;else if(65536>mt)Le+=3;else{if(!(1114112>mt))throw new Error("bad codepoint "+mt);Le+=4}}return Le}function x(Ce,Le,We){var St=typeof Ce;if(St==="string"){if(32>(mt=c(Ce)))return Le.setUint8(We,160|mt),o(Le,We+1,Ce),1+mt;if(256>mt)return Le.setUint8(We,217),Le.setUint8(We+1,mt),o(Le,We+2,Ce),2+mt;if(65536>mt)return Le.setUint8(We,218),Le.setUint16(We+1,mt),o(Le,We+3,Ce),3+mt;if(4294967296>mt)return Le.setUint8(We,219),Le.setUint32(We+1,mt),o(Le,We+5,Ce),5+mt}if(Ce instanceof Uint8Array){var mt=Ce.byteLength,Ht=new Uint8Array(Le.buffer);if(256>mt)return Le.setUint8(We,196),Le.setUint8(We+1,mt),Ht.set(Ce,We+2),2+mt;if(65536>mt)return Le.setUint8(We,197),Le.setUint16(We+1,mt),Ht.set(Ce,We+3),3+mt;if(4294967296>mt)return Le.setUint8(We,198),Le.setUint32(We+1,mt),Ht.set(Ce,We+5),5+mt}if(St==="number"){if(!isFinite(Ce))throw new Error("Number not finite: "+Ce);if(Math.floor(Ce)!==Ce)return Le.setUint8(We,203),Le.setFloat64(We+1,Ce),9;if(Ce>=0){if(128>Ce)return Le.setUint8(We,Ce),1;if(256>Ce)return Le.setUint8(We,204),Le.setUint8(We+1,Ce),2;if(65536>Ce)return Le.setUint8(We,205),Le.setUint16(We+1,Ce),3;if(4294967296>Ce)return Le.setUint8(We,206),Le.setUint32(We+1,Ce),5;throw new Error("Number too big 0x"+Ce.toString(16))}if(Ce>=-32)return Le.setInt8(We,Ce),1;if(Ce>=-128)return Le.setUint8(We,208),Le.setInt8(We+1,Ce),2;if(Ce>=-32768)return Le.setUint8(We,209),Le.setInt16(We+1,Ce),3;if(Ce>=-2147483648)return Le.setUint8(We,210),Le.setInt32(We+1,Ce),5;throw new Error("Number too small -0x"+(-Ce).toString(16).substr(1))}if(Ce===null)return Le.setUint8(We,192),1;if(St==="boolean")return Le.setUint8(We,Ce?195:194),1;if(St==="object"){var bt=0,$t=Array.isArray(Ce);if($t)mt=Ce.length;else{var Jt=Object.keys(Ce);mt=Jt.length}if(16>mt?(Le.setUint8(We,mt|($t?144:128)),bt=1):65536>mt?(Le.setUint8(We,$t?220:222),Le.setUint16(We+1,mt),bt=3):4294967296>mt&&(Le.setUint8(We,$t?221:223),Le.setUint32(We+1,mt),bt=5),$t)for(var Wt=0;mt>Wt;Wt++)bt+=x(Ce[Wt],Le,We+bt);else for(Wt=0;mt>Wt;Wt++){var Ar=Jt[Wt];bt+=x(Ar,Le,We+bt),bt+=x(Ce[Ar],Le,We+bt)}return bt}throw new Error("Unknown type "+St)}function u(Ce){var Le=typeof Ce;if(Le==="string"){if(32>(We=c(Ce)))return 1+We;if(256>We)return 2+We;if(65536>We)return 3+We;if(4294967296>We)return 5+We}if(Ce instanceof Uint8Array){if(256>(We=Ce.byteLength))return 2+We;if(65536>We)return 3+We;if(4294967296>We)return 5+We}if(Le==="number"){if(Math.floor(Ce)!==Ce)return 9;if(Ce>=0){if(128>Ce)return 1;if(256>Ce)return 2;if(65536>Ce)return 3;if(4294967296>Ce)return 5;throw new Error("Number too big 0x"+Ce.toString(16))}if(Ce>=-32)return 1;if(Ce>=-128)return 2;if(Ce>=-32768)return 3;if(Ce>=-2147483648)return 5;throw new Error("Number too small -0x"+Ce.toString(16).substr(1))}if(Le==="boolean"||Ce===null)return 1;if(Le==="object"){var We,St=0;if(Array.isArray(Ce)){We=Ce.length;for(var mt=0;We>mt;mt++)St+=u(Ce[mt])}else{var Ht=Object.keys(Ce);for(We=Ht.length,mt=0;We>mt;mt++){var bt=Ht[mt];St+=u(bt)+u(Ce[bt])}}if(16>We)return 1+St;if(65536>We)return 3+St;if(4294967296>We)return 5+St;throw new Error("Array or object too long 0x"+We.toString(16))}throw new Error("Unknown type "+Le)}function p(Ce){var Le=new ArrayBuffer(u(Ce));return x(Ce,new DataView(Le),0),new Uint8Array(Le)}function d(Ce,Le,We){return Le?new Ce(Le.buffer,Le.byteOffset,Le.byteLength/(We||1)):void 0}function w(Ce){return d(DataView,Ce)}function C(Ce){return d(Uint8Array,Ce)}function v(Ce){return d(Int8Array,Ce)}function k(Ce){return d(Int32Array,Ce,4)}function H(Ce){return d(Float32Array,Ce,4)}function P(Ce,Le){var We=Ce.length/2;Le||(Le=new Int16Array(We));for(var St=0,mt=0;We>St;++St,mt+=2)Le[St]=Ce[mt]<<8^Ce[mt+1];return Le}function j(Ce,Le){var We=Ce.length;Le||(Le=new Uint8Array(2*We));for(var St=w(Le),mt=0;We>mt;++mt)St.setInt16(2*mt,Ce[mt]);return C(Le)}function se(Ce,Le){var We=Ce.length/4;Le||(Le=new Int32Array(We));for(var St=0,mt=0;We>St;++St,mt+=4)Le[St]=Ce[mt]<<24^Ce[mt+1]<<16^Ce[mt+2]<<8^Ce[mt+3];return Le}function ce(Ce,Le){var We=Ce.length;Le||(Le=new Uint8Array(4*We));for(var St=w(Le),mt=0;We>mt;++mt)St.setInt32(4*mt,Ce[mt]);return C(Le)}function ne(Ce,Le){var We=Ce.length;Le||(Le=new Float32Array(We/4));for(var St=w(Le),mt=w(Ce),Ht=0,bt=0,$t=We/4;$t>Ht;++Ht,bt+=4)St.setFloat32(bt,mt.getFloat32(bt),!0);return Le}function E(Ce,Le,We){var St=Ce.length,mt=1/Le;We||(We=new Float32Array(St));for(var Ht=0;St>Ht;++Ht)We[Ht]=Ce[Ht]*mt;return We}function K(Ce,Le,We){var St=Ce.length;We||(We=new Int32Array(St));for(var mt=0;St>mt;++mt)We[mt]=Math.round(Ce[mt]*Le);return We}function Y(Ce,Le){var We,St;if(!Le){var mt=0;for(We=0,St=Ce.length;St>We;We+=2)mt+=Ce[We+1];Le=new Ce.constructor(mt)}var Ht=0;for(We=0,St=Ce.length;St>We;We+=2)for(var bt=Ce[We],$t=Ce[We+1],Jt=0;$t>Jt;++Jt)Le[Ht]=bt,++Ht;return Le}function re(Ce){if(Ce.length===0)return new Int32Array;var Le,We,St=2;for(Le=1,We=Ce.length;We>Le;++Le)Ce[Le-1]!==Ce[Le]&&(St+=2);var mt=new Int32Array(St),Ht=0,bt=1;for(Le=1,We=Ce.length;We>Le;++Le)Ce[Le-1]!==Ce[Le]?(mt[Ht]=Ce[Le-1],mt[Ht+1]=bt,bt=1,Ht+=2):++bt;return mt[Ht]=Ce[Ce.length-1],mt[Ht+1]=bt,mt}function ue(Ce,Le){var We=Ce.length;Le||(Le=new Ce.constructor(We)),We&&(Le[0]=Ce[0]);for(var St=1;We>St;++St)Le[St]=Ce[St]+Le[St-1];return Le}function q(Ce,Le){var We=Ce.length;Le||(Le=new Ce.constructor(We)),Le[0]=Ce[0];for(var St=1;We>St;++St)Le[St]=Ce[St]-Ce[St-1];return Le}function he(Ce,Le){var We,St,mt=Ce instanceof Int8Array?127:32767,Ht=-mt-1,bt=Ce.length;if(!Le){var $t=0;for(We=0;bt>We;++We)Ce[We]<mt&&Ce[We]>Ht&&++$t;Le=new Int32Array($t)}for(We=0,St=0;bt>We;){for(var Jt=0;Ce[We]===mt||Ce[We]===Ht;)Jt+=Ce[We],++We;Jt+=Ce[We],++We,Le[St]=Jt,++St}return Le}function Oe(Ce,Le){var We,St=32767,mt=-St-1,Ht=Ce.length,bt=0;for(We=0;Ht>We;++We)(Wt=Ce[We])===0?++bt:Wt>0?(bt+=Math.ceil(Wt/St),Wt%St===0&&(bt+=1)):(bt+=Math.ceil(Wt/mt),Wt%mt===0&&(bt+=1));var $t=new Int16Array(bt),Jt=0;for(We=0;Ht>We;++We){var Wt;if((Wt=Ce[We])>=0)for(;Wt>=St;)$t[Jt]=St,++Jt,Wt-=St;else for(;mt>=Wt;)$t[Jt]=mt,++Jt,Wt-=mt;$t[Jt]=Wt,++Jt}return $t}function be(Ce,Le){return ue(Y(Ce),Le)}function Te(Ce){return re(q(Ce))}function Ae(Ce,Le,We){return E(Y(Ce,k(We)),Le,We)}function Ve(Ce,Le){return re(K(Ce,Le))}function _e(Ce,Le,We){return E(ue(Ce,k(We)),Le,We)}function W(Ce,Le,We){return q(K(Ce,Le),We)}function we(Ce,Le,We){return E(he(Ce,k(We)),Le,We)}function ge(Ce,Le,We){var St=he(Ce,k(We));return _e(St,Le,H(St))}function ae(Ce,Le,We){return Oe(W(Ce,Le))}function Ue(Ce){var Le=w(Ce),We=Le.getInt32(0),St=Le.getInt32(4),mt=Ce.subarray(8,12);return[We,Ce=Ce.subarray(12),St,mt]}function Ee(Ce,Le,We,St){var mt=new ArrayBuffer(12+St.byteLength),Ht=new Uint8Array(mt),bt=new DataView(mt);return bt.setInt32(0,Ce),bt.setInt32(4,Le),We&&Ht.set(We,8),Ht.set(St,12),Ht}function Ge(Ce){return Ee(2,Ce.length,void 0,C(Ce))}function tt(Ce){return Ee(4,Ce.length,void 0,ce(Ce))}function ve(Ce,Le){return Ee(5,Ce.length/Le,ce([Le]),C(Ce))}function ze(Ce){return Ee(6,Ce.length,void 0,ce(re(Ce)))}function rt(Ce){return Ee(8,Ce.length,void 0,ce(Te(Ce)))}function at(Ce,Le){return Ee(9,Ce.length,ce([Le]),ce(Ve(Ce,Le)))}function Ke(Ce,Le){return Ee(10,Ce.length,ce([Le]),j(ae(Ce,Le)))}function ft(Ce){var Le={};return Pr.forEach(function(We){Ce[We]!==void 0&&(Le[We]=Ce[We])}),Ce.bondAtomList&&(Le.bondAtomList=tt(Ce.bondAtomList)),Ce.bondOrderList&&(Le.bondOrderList=Ge(Ce.bondOrderList)),Le.xCoordList=Ke(Ce.xCoordList,1e3),Le.yCoordList=Ke(Ce.yCoordList,1e3),Le.zCoordList=Ke(Ce.zCoordList,1e3),Ce.bFactorList&&(Le.bFactorList=Ke(Ce.bFactorList,100)),Ce.atomIdList&&(Le.atomIdList=rt(Ce.atomIdList)),Ce.altLocList&&(Le.altLocList=ze(Ce.altLocList)),Ce.occupancyList&&(Le.occupancyList=at(Ce.occupancyList,100)),Le.groupIdList=rt(Ce.groupIdList),Le.groupTypeList=tt(Ce.groupTypeList),Ce.secStructList&&(Le.secStructList=Ge(Ce.secStructList)),Ce.insCodeList&&(Le.insCodeList=ze(Ce.insCodeList)),Ce.sequenceIndexList&&(Le.sequenceIndexList=rt(Ce.sequenceIndexList)),Le.chainIdList=ve(Ce.chainIdList,4),Ce.chainNameList&&(Le.chainNameList=ve(Ce.chainNameList,4)),Le}function vt(Ce){function Le(Jt){for(var Wt={},Ar=0;Jt>Ar;Ar++)Wt[Ht()]=Ht();return Wt}function We(Jt){var Wt=Ce.subarray(bt,bt+Jt);return bt+=Jt,Wt}function St(Jt){var Wt=Ce.subarray(bt,bt+Jt);bt+=Jt;var Ar=65535;if(Jt>Ar){for(var xi=[],zi=0;zi<Wt.length;zi+=Ar)xi.push(String.fromCharCode.apply(null,Wt.subarray(zi,zi+Ar)));return xi.join("")}return String.fromCharCode.apply(null,Wt)}function mt(Jt){for(var Wt=new Array(Jt),Ar=0;Jt>Ar;Ar++)Wt[Ar]=Ht();return Wt}function Ht(){var Jt,Wt,Ar=Ce[bt];if(!(128&Ar))return bt++,Ar;if((240&Ar)==128)return bt++,Le(Wt=15&Ar);if((240&Ar)==144)return bt++,mt(Wt=15&Ar);if((224&Ar)==160)return bt++,St(Wt=31&Ar);if(!(224&~Ar))return Jt=$t.getInt8(bt),bt++,Jt;switch(Ar){case 192:return bt++,null;case 194:return bt++,!1;case 195:return bt++,!0;case 196:return Wt=$t.getUint8(bt+1),bt+=2,We(Wt);case 197:return Wt=$t.getUint16(bt+1),bt+=3,We(Wt);case 198:return Wt=$t.getUint32(bt+1),bt+=5,We(Wt);case 202:return Jt=$t.getFloat32(bt+1),bt+=5,Jt;case 203:return Jt=$t.getFloat64(bt+1),bt+=9,Jt;case 204:return Jt=Ce[bt+1],bt+=2,Jt;case 205:return Jt=$t.getUint16(bt+1),bt+=3,Jt;case 206:return Jt=$t.getUint32(bt+1),bt+=5,Jt;case 208:return Jt=$t.getInt8(bt+1),bt+=2,Jt;case 209:return Jt=$t.getInt16(bt+1),bt+=3,Jt;case 210:return Jt=$t.getInt32(bt+1),bt+=5,Jt;case 217:return Wt=$t.getUint8(bt+1),bt+=2,St(Wt);case 218:return Wt=$t.getUint16(bt+1),bt+=3,St(Wt);case 219:return Wt=$t.getUint32(bt+1),bt+=5,St(Wt);case 220:return Wt=$t.getUint16(bt+1),bt+=3,mt(Wt);case 221:return Wt=$t.getUint32(bt+1),bt+=5,mt(Wt);case 222:return Wt=$t.getUint16(bt+1),bt+=3,Le(Wt);case 223:return Wt=$t.getUint32(bt+1),bt+=5,Le(Wt)}throw new Error("Unknown type 0x"+Ar.toString(16))}var bt=0,$t=new DataView(Ce.buffer);return Ht()}function yt(Ce,Le,We,St){switch(Ce){case 1:return ne(Le);case 2:return v(Le);case 3:return P(Le);case 4:return se(Le);case 5:return C(Le);case 6:return Y(se(Le),new Uint8Array(We));case 7:return Y(se(Le));case 8:return be(se(Le));case 9:return Ae(se(Le),se(St)[0]);case 10:return ge(P(Le),se(St)[0]);case 11:return E(P(Le),se(St)[0]);case 12:return we(P(Le),se(St)[0]);case 13:return we(v(Le),se(St)[0]);case 14:return he(P(Le));case 15:return he(v(Le))}}function Kt(Ce,Le){var We=(Le=Le||{}).ignoreFields,St={};return Br.forEach(function(mt){var Ht=!!We&&We.indexOf(mt)!==-1,bt=Ce[mt];Ht||bt===void 0||(bt instanceof Uint8Array?St[mt]=yt.apply(null,Ue(bt)):St[mt]=bt)}),St}function zt(Ce){return String.fromCharCode.apply(null,Ce).replace(/\0/g,"")}function vr(Ce,Le,We){var St,mt,Ht,bt,$t,Jt,Wt=(We=We||{}).firstModelOnly,Ar=Le.onModel,xi=Le.onChain,zi=Le.onGroup,_i=Le.onAtom,Ti=Le.onBond,Zr=0,$r=0,Gr=0,fr=0,Ri=0,Ii=-1,an=Ce.chainNameList,Fi=Ce.secStructList,qi=Ce.insCodeList,Ni=Ce.sequenceIndexList,Ci=Ce.atomIdList,Yr=Ce.bFactorList,li=Ce.altLocList,Qi=Ce.occupancyList,Mi=Ce.bondAtomList,rn=Ce.bondOrderList;for(St=0,mt=Ce.chainsPerModel.length;mt>St&&!(Wt&&Zr>0);++St){var fn=Ce.chainsPerModel[Zr];for(Ar&&Ar({chainCount:fn,modelIndex:Zr}),Ht=0;fn>Ht;++Ht){var vn=Ce.groupsPerChain[$r];if(xi){var _r=zt(Ce.chainIdList.subarray(4*$r,4*$r+4)),ei=null;an&&(ei=zt(an.subarray(4*$r,4*$r+4))),xi({groupCount:vn,chainIndex:$r,modelIndex:Zr,chainId:_r,chainName:ei})}for(bt=0;vn>bt;++bt){var si=Ce.groupList[Ce.groupTypeList[Gr]],on=si.atomNameList.length;if(zi){var Yt=null;Fi&&(Yt=Fi[Gr]);var T=null;Ce.insCodeList&&(T=String.fromCharCode(qi[Gr]));var me=null;Ni&&(me=Ni[Gr]),zi({atomCount:on,groupIndex:Gr,chainIndex:$r,modelIndex:Zr,groupId:Ce.groupIdList[Gr],groupType:Ce.groupTypeList[Gr],groupName:si.groupName,singleLetterCode:si.singleLetterCode,chemCompType:si.chemCompType,secStruct:Yt,insCode:T,sequenceIndex:me})}for($t=0;on>$t;++$t){if(_i){var Pe=null;Ci&&(Pe=Ci[fr]);var Qe=null;Yr&&(Qe=Yr[fr]);var $e=null;li&&($e=String.fromCharCode(li[fr]));var Mt=null;Qi&&(Mt=Qi[fr]),_i({atomIndex:fr,groupIndex:Gr,chainIndex:$r,modelIndex:Zr,atomId:Pe,element:si.elementList[$t],atomName:si.atomNameList[$t],formalCharge:si.formalChargeList[$t],xCoord:Ce.xCoordList[fr],yCoord:Ce.yCoordList[fr],zCoord:Ce.zCoordList[fr],bFactor:Qe,altLoc:$e,occupancy:Mt})}fr+=1}if(Ti){var xt=si.bondAtomList;for($t=0,Jt=si.bondOrderList.length;Jt>$t;++$t)Ti({atomIndex1:fr-on+xt[2*$t],atomIndex2:fr-on+xt[2*$t+1],bondOrder:si.bondOrderList[$t]})}Gr+=1}$r+=1}if(Ri=Ii+1,Ii=fr-1,Ti&&Mi)for($t=0,Jt=Mi.length;Jt>$t;$t+=2){var At=Mi[$t],Vt=Mi[$t+1];(At>=Ri&&Ii>=At||Vt>=Ri&&Ii>=Vt)&&Ti({atomIndex1:At,atomIndex2:Vt,bondOrder:rn?rn[$t/2]:null})}Zr+=1}}function yr(Ce){return p(ft(Ce))}function jr(Ce,Le){return Ce instanceof ArrayBuffer&&(Ce=new Uint8Array(Ce)),Kt(Ce instanceof Uint8Array?vt(Ce):Ce,Le)}function Lr(Ce,Le,We,St){function mt(){try{var bt=jr(Ht.response);We(bt)}catch($t){St($t)}}var Ht=new XMLHttpRequest;Ht.addEventListener("load",mt,!0),Ht.addEventListener("error",St,!0),Ht.responseType="arraybuffer",Ht.open("GET",Le+Ce.toUpperCase()),Ht.send()}function Cr(Ce,Le,We){Lr(Ce,Di,Le,We)}function Rr(Ce,Le,We){Lr(Ce,tn,Le,We)}var Pr=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],Ei=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],Br=Pr.concat(Ei),Wr="v1.0.1",Gi="//mmtf.rcsb.org/v1.0/",Di=Gi+"full/",tn=Gi+"reduced/";s.encode=yr,s.decode=jr,s.traverse=vr,s.fetch=Cr,s.fetchReduced=Rr,s.version=Wr,s.fetchUrl=Di,s.fetchReducedUrl=tn,s.encodeMsgpack=p,s.encodeMmtf=ft,s.decodeMsgpack=vt,s.decodeMmtf=Kt})(r)},529:(e,r,s)=>{s.r(r),s.d(r,{Matrix3:()=>j,Matrix4:()=>H,Quaternion:()=>o,Ray:()=>se,Vector2:()=>c,Vector3:()=>P,clamp:()=>x,conversionMatrix3:()=>ce,degToRad:()=>p});class o{constructor(E,K,Y,re){this.x=E||0,this.y=K||0,this.z=Y||0,this.w=re!==void 0?re:1}set(E,K,Y,re){return this.x=E,this.y=K,this.z=Y,this.w=re,this}copy(E){return this.x=E.x,this.y=E.y,this.z=E.z,this.w=E.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let E=this.length();return E===0?(this.x=0,this.y=0,this.z=0,this.w=1):(E=1/E,this.x*=E,this.y*=E,this.z*=E,this.w*=E),this}multiply(E){return this.multiplyQuaternions(this,E)}multiplyScalar(E){return this.x*=E,this.y*=E,this.z*=E,this.w*=E,this}multiplyQuaternions(E,K){const Y=E.x,re=E.y,ue=E.z,q=E.w,he=K.x,Oe=K.y,be=K.z,Te=K.w;return this.x=Y*Te+q*he+re*be-ue*Oe,this.y=re*Te+q*Oe+ue*he-Y*be,this.z=ue*Te+q*be+Y*Oe-re*he,this.w=q*Te-Y*he-re*Oe-ue*be,this}sub(E){return this.x-=E.x,this.y-=E.y,this.z-=E.z,this.w-=E.w,this}clone(){return new o(this.x,this.y,this.z,this.w)}setFromEuler(E){const K=Math.cos(E.x/2),Y=Math.cos(E.y/2),re=Math.cos(E.z/2),ue=Math.sin(E.x/2),q=Math.sin(E.y/2),he=Math.sin(E.z/2);return this.x=ue*Y*re+K*q*he,this.y=K*q*re-ue*Y*he,this.z=K*Y*he+ue*q*re,this.w=K*Y*re-ue*q*he,this}}class c{constructor(E,K){this.x=E||0,this.y=K||0}set(E,K){return this.x=E,this.y=K,this}subVectors(E,K){return this.x=E.x-K.x,this.y=E.y-K.y,this}copy(E){return this.x=E.x,this.y=E.y,this}clone(){return new c(this.x,this.y)}}function x(ne,E,K){return Math.min(Math.max(ne,E),K)}const u=Math.PI/180;function p(ne){return ne*u}var d,w,C,v,k;class H{constructor(E=1,K=0,Y=0,re=0,ue=0,q=1,he=0,Oe=0,be=0,Te=0,Ae=1,Ve=0,_e=0,W=0,we=0,ge=1){E!==void 0&&typeof E!="number"?this.elements=new Float32Array(E):(this.elements=new Float32Array(16),this.elements[0]=E,this.elements[4]=K,this.elements[8]=Y,this.elements[12]=re,this.elements[1]=ue,this.elements[5]=q,this.elements[9]=he,this.elements[13]=Oe,this.elements[2]=be,this.elements[6]=Te,this.elements[10]=Ae,this.elements[14]=Ve,this.elements[3]=_e,this.elements[7]=W,this.elements[11]=we,this.elements[15]=ge)}makeScale(E,K,Y){throw new Error("Method not implemented.")}set(E,K,Y,re,ue,q,he,Oe,be,Te,Ae,Ve,_e,W,we,ge){const ae=this.elements;return ae[0]=E,ae[4]=K,ae[8]=Y,ae[12]=re,ae[1]=ue,ae[5]=q,ae[9]=he,ae[13]=Oe,ae[2]=be,ae[6]=Te,ae[10]=Ae,ae[14]=Ve,ae[3]=_e,ae[7]=W,ae[11]=we,ae[15]=ge,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(E){const K=E.elements;return this.set(K[0],K[4],K[8],K[12],K[1],K[5],K[9],K[13],K[2],K[6],K[10],K[14],K[3],K[7],K[11],K[15]),this}matrix3FromTopLeft(){const E=this.elements;return new j(E[0],E[4],E[8],E[1],E[5],E[9],E[2],E[6],E[10])}setRotationFromEuler(E,K){const Y=this.elements,{x:re,y:ue,z:q}=E,he=Math.cos(re),Oe=Math.sin(re),be=Math.cos(ue),Te=Math.sin(ue),Ae=Math.cos(q),Ve=Math.sin(q);if(K===void 0||K==="XYZ"){const _e=he*Ae,W=he*Ve,we=Oe*Ae,ge=Oe*Ve;Y[0]=be*Ae,Y[4]=-be*Ve,Y[8]=Te,Y[1]=W+we*Te,Y[5]=_e-ge*Te,Y[9]=-Oe*be,Y[2]=ge-_e*Te,Y[6]=we+W*Te,Y[10]=he*be}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${K}`);return this}setRotationFromQuaternion(E){const K=this.elements,{x:Y,y:re,z:ue,w:q}=E,he=Y+Y,Oe=re+re,be=ue+ue,Te=Y*he,Ae=Y*Oe,Ve=Y*be,_e=re*Oe,W=re*be,we=ue*be,ge=q*he,ae=q*Oe,Ue=q*be;return K[0]=1-(_e+we),K[4]=Ae-Ue,K[8]=Ve+ae,K[1]=Ae+Ue,K[5]=1-(Te+we),K[9]=W-ge,K[2]=Ve-ae,K[6]=W+ge,K[10]=1-(Te+_e),this}multiplyMatrices(E,K){const Y=E.elements,re=K.elements,ue=this.elements,q=Y[0],he=Y[4],Oe=Y[8],be=Y[12],Te=Y[1],Ae=Y[5],Ve=Y[9],_e=Y[13],W=Y[2],we=Y[6],ge=Y[10],ae=Y[14],Ue=Y[3],Ee=Y[7],Ge=Y[11],tt=Y[15],ve=re[0],ze=re[4],rt=re[8],at=re[12],Ke=re[1],ft=re[5],vt=re[9],yt=re[13],Kt=re[2],zt=re[6],vr=re[10],yr=re[14],jr=re[3],Lr=re[7],Cr=re[11],Rr=re[15];return ue[0]=q*ve+he*Ke+Oe*Kt+be*jr,ue[4]=q*ze+he*ft+Oe*zt+be*Lr,ue[8]=q*rt+he*vt+Oe*vr+be*Cr,ue[12]=q*at+he*yt+Oe*yr+be*Rr,ue[1]=Te*ve+Ae*Ke+Ve*Kt+_e*jr,ue[5]=Te*ze+Ae*ft+Ve*zt+_e*Lr,ue[9]=Te*rt+Ae*vt+Ve*vr+_e*Cr,ue[13]=Te*at+Ae*yt+Ve*yr+_e*Rr,ue[2]=W*ve+we*Ke+ge*Kt+ae*jr,ue[6]=W*ze+we*ft+ge*zt+ae*Lr,ue[10]=W*rt+we*vt+ge*vr+ae*Cr,ue[14]=W*at+we*yt+ge*yr+ae*Rr,ue[3]=Ue*ve+Ee*Ke+Ge*Kt+tt*jr,ue[7]=Ue*ze+Ee*ft+Ge*zt+tt*Lr,ue[11]=Ue*rt+Ee*vt+Ge*vr+tt*Cr,ue[15]=Ue*at+Ee*yt+Ge*yr+tt*Rr,this}multiplyScalar(E){const K=this.elements;return K[0]*=E,K[4]*=E,K[8]*=E,K[12]*=E,K[1]*=E,K[5]*=E,K[9]*=E,K[13]*=E,K[2]*=E,K[6]*=E,K[10]*=E,K[14]*=E,K[3]*=E,K[7]*=E,K[11]*=E,K[15]*=E,this}makeTranslation(E,K,Y){return this.set(1,0,0,E,0,1,0,K,0,0,1,Y,0,0,0,1),this}snap(E){const K=Math.pow(10,4),Y=this.elements;for(let re=0;re<16;re++){const ue=Math.round(Y[re]);ue===Math.round(Y[re]*K)/K&&(Y[re]=ue)}return this}transpose(){const E=this.elements;let K;return K=E[1],E[1]=E[4],E[4]=K,K=E[2],E[2]=E[8],E[8]=K,K=E[6],E[6]=E[9],E[9]=K,K=E[3],E[3]=E[12],E[12]=K,K=E[7],E[7]=E[13],E[13]=K,K=E[11],E[11]=E[14],E[14]=K,this}setPosition(E){const K=this.elements;return K[12]=E.x,K[13]=E.y,K[14]=E.z,this}translate(E){const K=this.elements;return K[12]+=E.x,K[13]+=E.y,K[14]+=E.z,this}getInverse(E,K){const Y=this.elements,re=E.elements,ue=re[0],q=re[4],he=re[8],Oe=re[12],be=re[1],Te=re[5],Ae=re[9],Ve=re[13],_e=re[2],W=re[6],we=re[10],ge=re[14],ae=re[3],Ue=re[7],Ee=re[11],Ge=re[15];Y[0]=Ae*ge*Ue-Ve*we*Ue+Ve*W*Ee-Te*ge*Ee-Ae*W*Ge+Te*we*Ge,Y[4]=Oe*we*Ue-he*ge*Ue-Oe*W*Ee+q*ge*Ee+he*W*Ge-q*we*Ge,Y[8]=he*Ve*Ue-Oe*Ae*Ue+Oe*Te*Ee-q*Ve*Ee-he*Te*Ge+q*Ae*Ge,Y[12]=Oe*Ae*W-he*Ve*W-Oe*Te*we+q*Ve*we+he*Te*ge-q*Ae*ge,Y[1]=Ve*we*ae-Ae*ge*ae-Ve*_e*Ee+be*ge*Ee+Ae*_e*Ge-be*we*Ge,Y[5]=he*ge*ae-Oe*we*ae+Oe*_e*Ee-ue*ge*Ee-he*_e*Ge+ue*we*Ge,Y[9]=Oe*Ae*ae-he*Ve*ae-Oe*be*Ee+ue*Ve*Ee+he*be*Ge-ue*Ae*Ge,Y[13]=he*Ve*_e-Oe*Ae*_e+Oe*be*we-ue*Ve*we-he*be*ge+ue*Ae*ge,Y[2]=Te*ge*ae-Ve*W*ae+Ve*_e*Ue-be*ge*Ue-Te*_e*Ge+be*W*Ge,Y[6]=Oe*W*ae-q*ge*ae-Oe*_e*Ue+ue*ge*Ue+q*_e*Ge-ue*W*Ge,Y[10]=q*Ve*ae-Oe*Te*ae+Oe*be*Ue-ue*Ve*Ue-q*be*Ge+ue*Te*Ge,Y[14]=Oe*Te*_e-q*Ve*_e-Oe*be*W+ue*Ve*W+q*be*ge-ue*Te*ge,Y[3]=Ae*W*ae-Te*we*ae-Ae*_e*Ue+be*we*Ue+Te*_e*Ee-be*W*Ee,Y[7]=q*we*ae-he*W*ae+he*_e*Ue-ue*we*Ue-q*_e*Ee+ue*W*Ee,Y[11]=he*Te*ae-q*Ae*ae-he*be*Ue+ue*Ae*Ue+q*be*Ee-ue*Te*Ee,Y[15]=q*Ae*_e-he*Te*_e+he*be*W-ue*Ae*W-q*be*we+ue*Te*we;const tt=ue*Y[0]+be*Y[4]+_e*Y[8]+ae*Y[12];if(tt===0){const ve="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(K)throw new Error(ve);return console.warn(ve),this.identity(),this}return this.multiplyScalar(1/tt),this}isReflected(){const E=this.elements,K=E[0],Y=E[4],re=E[8],ue=E[1],q=E[5],he=E[9],Oe=E[2],be=E[6],Te=E[10];return K*q*Te+ue*be*re+Oe*Y*he-Oe*q*re-ue*Y*Te-K*be*he<0}scale(E){const K=this.elements,{x:Y}=E,{y:re}=E,{z:ue}=E;return K[0]*=Y,K[4]*=re,K[8]*=ue,K[1]*=Y,K[5]*=re,K[9]*=ue,K[2]*=Y,K[6]*=re,K[10]*=ue,K[3]*=Y,K[7]*=re,K[11]*=ue,this}getMaxScaleOnAxis(){const E=this.elements,K=E[0]*E[0]+E[1]*E[1]+E[2]*E[2],Y=E[4]*E[4]+E[5]*E[5]+E[6]*E[6],re=E[8]*E[8]+E[9]*E[9]+E[10]*E[10];return Math.sqrt(Math.max(K,Math.max(Y,re)))}makeFrustum(E,K,Y,re,ue,q){const he=this.elements,Oe=2*ue/(K-E),be=2*ue/(re-Y),Te=(K+E)/(K-E),Ae=(re+Y)/(re-Y),Ve=-(q+ue)/(q-ue),_e=-2*q*ue/(q-ue);return he[0]=Oe,he[4]=0,he[8]=Te,he[12]=0,he[1]=0,he[5]=be,he[9]=Ae,he[13]=0,he[2]=0,he[6]=0,he[10]=Ve,he[14]=_e,he[3]=0,he[7]=0,he[11]=-1,he[15]=0,this}makePerspective(E,K,Y,re){const ue=Y*Math.tan(p(.5*E)),q=-ue,he=q*K,Oe=ue*K;return this.makeFrustum(he,Oe,q,ue,Y,re)}makeOrthographic(E,K,Y,re,ue,q){const he=this.elements,Oe=1/(K-E),be=1/(Y-re),Te=1/(q-ue),Ae=(K+E)*Oe,Ve=(Y+re)*be,_e=(q+ue)*Te;return he[0]=2*Oe,he[4]=0,he[8]=0,he[12]=-Ae,he[1]=0,he[5]=2*be,he[9]=0,he[13]=-Ve,he[2]=0,he[6]=0,he[10]=-2*Te,he[14]=-_e,he[3]=0,he[7]=0,he[11]=0,he[15]=1,this}isEqual(E){const K=E.elements,Y=this.elements;return Y[0]===K[0]&&Y[4]===K[4]&&Y[8]===K[8]&&Y[12]===K[12]&&Y[1]===K[1]&&Y[5]===K[5]&&Y[9]===K[9]&&Y[13]===K[13]&&Y[2]===K[2]&&Y[6]===K[6]&&Y[10]===K[10]&&Y[14]===K[14]&&Y[3]===K[3]&&Y[7]===K[7]&&Y[11]===K[11]&&Y[15]===K[15]}clone(){const E=this.elements;return new H(E[0],E[4],E[8],E[12],E[1],E[5],E[9],E[13],E[2],E[6],E[10],E[14],E[3],E[7],E[11],E[15])}isIdentity(){const E=this.elements;return E[0]===1&&E[4]===0&&E[8]===0&&E[12]===0&&E[1]===0&&E[5]===1&&E[9]===0&&E[13]===0&&E[2]===0&&E[6]===0&&E[10]===1&&E[14]===0&&E[3]===0&&E[7]===0&&E[11]===0&&E[15]===1}isNearlyIdentity(E){return this.clone().snap(E).isIdentity()}getScale(E){const K=this.elements;return E=E||new P,C.set(K[0],K[1],K[2]),v.set(K[4],K[5],K[6]),k.set(K[8],K[9],K[10]),E.x=C.length(),E.y=v.length(),E.z=k.length(),E}lookAt(E,K,Y){const re=this.elements;return k.subVectors(E,K).normalize(),k.length()===0&&(k.z=1),C.crossVectors(Y,k).normalize(),C.length()===0&&(k.x+=1e-4,C.crossVectors(Y,k).normalize()),v.crossVectors(k,C),re[0]=C.x,re[4]=v.x,re[8]=k.x,re[1]=C.y,re[5]=v.y,re[9]=k.y,re[2]=C.z,re[6]=v.z,re[10]=k.z,this}compose(E,K,Y){const re=this.elements;return d.identity(),d.setRotationFromQuaternion(K),w.makeScale(Y.x,Y.y,Y.z),this.multiplyMatrices(d,w),re[12]=E.x,re[13]=E.y,re[14]=E.z,this}}d=new H,w=new H;class P{constructor(E,K,Y){this.x=E||0,this.y=K||0,this.z=Y||0,this.atomid=void 0}set(E,K,Y){return this.x=E,this.y=K,this.z=Y,this}copy(E){return this.x=E.x,this.y=E.y,this.z=E.z,this}add(E){return this.x+=E.x,this.y+=E.y,this.z+=E.z,this}addVectors(E,K){return this.x=E.x+K.x,this.y=E.y+K.y,this.z=E.z+K.z,this}multiplyVectors(E,K){return this.x=E.x*K.x,this.y=E.y*K.y,this.z=E.z*K.z,this}sub(E){return this.x-=E.x,this.y-=E.y,this.z-=E.z,this}subVectors(E,K){return this.x=E.x-K.x,this.y=E.y-K.y,this.z=E.z-K.z,this}multiplyScalar(E){return this.x*=E,this.y*=E,this.z*=E,this}divideScalar(E){return E!==0?(this.x/=E,this.y/=E,this.z/=E):(this.x=0,this.y=0,this.z=0),this}max(E){return this.x=Math.max(this.x,E.x),this.y=Math.max(this.y,E.y),this.z=Math.max(this.z,E.z),this}min(E){return this.x=Math.min(this.x,E.x),this.y=Math.min(this.y,E.y),this.z=Math.min(this.z,E.z),this}distanceTo(E){return Math.sqrt(this.distanceToSquared(E))}distanceToSquared(E){const K=this.x-E.x,Y=this.y-E.y,re=this.z-E.z;return K*K+Y*Y+re*re}applyMatrix3(E){const{x:K}=this,{y:Y}=this,{z:re}=this,ue=E.elements;return this.x=ue[0]*K+ue[3]*Y+ue[6]*re,this.y=ue[1]*K+ue[4]*Y+ue[7]*re,this.z=ue[2]*K+ue[5]*Y+ue[8]*re,this}applyMatrix4(E){const{x:K}=this,{y:Y}=this,{z:re}=this,ue=E.elements;return this.x=ue[0]*K+ue[4]*Y+ue[8]*re+ue[12],this.y=ue[1]*K+ue[5]*Y+ue[9]*re+ue[13],this.z=ue[2]*K+ue[6]*Y+ue[10]*re+ue[14],this}applyProjection(E){const{x:K}=this,{y:Y}=this,{z:re}=this,ue=E.elements,q=ue[3]*K+ue[7]*Y+ue[11]*re+ue[15];return this.x=(ue[0]*K+ue[4]*Y+ue[8]*re+ue[12])/q,this.y=(ue[1]*K+ue[5]*Y+ue[9]*re+ue[13])/q,this.z=(ue[2]*K+ue[6]*Y+ue[10]*re+ue[14])/q,this}applyQuaternion(E){const{x:K}=this,{y:Y}=this,{z:re}=this,ue=E.x,q=E.y,he=E.z,Oe=E.w,be={};be.x=2*(Y*he-re*q),be.y=2*(re*ue-K*he),be.z=2*(K*q-Y*ue);const Te={};return Te.x=be.y*he-be.z*q,Te.y=be.z*ue-be.x*he,Te.z=be.x*q-be.y*ue,this.x=K+Oe*be.x+Te.x,this.y=Y+Oe*be.y+Te.y,this.z=re+Oe*be.z+Te.z,this}negate(){return this.multiplyScalar(-1)}dot(E){return this.x*E.x+this.y*E.y+this.z*E.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(E){const{x:K}=this,{y:Y}=this,{z:re}=this;return this.x=Y*E.z-re*E.y,this.y=re*E.x-K*E.z,this.z=K*E.y-Y*E.x,this}crossVectors(E,K){return this.x=E.y*K.z-E.z*K.y,this.y=E.z*K.x-E.x*K.z,this.z=E.x*K.y-E.y*K.x,this}equals(E){return this.x==E.x&&this.y==E.y&&this.z==E.z}getPositionFromMatrix(E){return this.x=E.elements[12],this.y=E.elements[13],this.z=E.elements[14],this}setEulerFromRotationMatrix(E,K){const Y=E.elements,re=Y[0],ue=Y[4],q=Y[8],he=Y[5],Oe=Y[9],be=Y[6],Te=Y[10];return K===void 0||K==="XYZ"?(this.y=Math.asin(x(q,-1,1)),Math.abs(q)<.99999?(this.x=Math.atan2(-Oe,Te),this.z=Math.atan2(-ue,re)):(this.x=Math.atan2(be,he),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${K}`),this}rotateAboutVector(E,K){E.normalize();const Y=Math.cos(K),re=Math.sin(K),ue=this.clone().multiplyScalar(Y),q=E.clone().cross(this).multiplyScalar(re),he=E.clone().multiplyScalar(E.clone().dot(this)).multiplyScalar(1-Y),Oe=ue.add(q).add(he);return this.x=Oe.x,this.y=Oe.y,this.z=Oe.z,this}setFromMatrixPosition(E){const K=E.elements;return this.x=K[12],this.y=K[13],this.z=K[14],this}transformDirection(E){const{x:K}=this,{y:Y}=this,{z:re}=this,ue=E.elements;return this.x=ue[0]*K+ue[4]*Y+ue[8]*re,this.y=ue[1]*K+ue[5]*Y+ue[9]*re,this.z=ue[2]*K+ue[6]*Y+ue[10]*re,this.normalize()}clone(){return new P(this.x,this.y,this.z)}unproject(E){const K=d;return K.multiplyMatrices(E.matrixWorld,K.getInverse(E.projectionMatrix)),this.applyMatrix4(K)}}C=new P,v=new P,k=new P;class j{constructor(E=1,K=0,Y=0,re=0,ue=1,q=0,he=0,Oe=0,be=1){this.elements=new Float32Array(9),this.set(E,K,Y,re,ue,q,he,Oe,be)}set(E,K,Y,re,ue,q,he,Oe,be){const Te=this.elements;return Te[0]=E,Te[3]=K,Te[6]=Y,Te[1]=re,Te[4]=ue,Te[7]=q,Te[2]=he,Te[5]=Oe,Te[8]=be,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(E){const K=E.elements;this.set(K[0],K[3],K[6],K[1],K[4],K[7],K[2],K[5],K[8])}multiplyScalar(E){const K=this.elements;return K[0]*=E,K[3]*=E,K[6]*=E,K[1]*=E,K[4]*=E,K[7]*=E,K[2]*=E,K[5]*=E,K[8]*=E,this}getInverse3(E){const K=E.elements,Y=this.elements;Y[0]=K[4]*K[8]-K[5]*K[7],Y[3]=K[6]*K[5]-K[3]*K[8],Y[6]=K[3]*K[7]-K[6]*K[4],Y[1]=K[7]*K[2]-K[1]*K[8],Y[4]=K[0]*K[8]-K[6]*K[2],Y[7]=K[1]*K[6]-K[0]*K[7],Y[2]=K[1]*K[5]-K[2]*K[4],Y[5]=K[2]*K[3]-K[0]*K[5],Y[8]=K[0]*K[4]-K[1]*K[3];const re=K[0]*Y[0]+K[3]*Y[1]+K[6]*Y[2];return this.multiplyScalar(1/re),this}getInverse(E,K){const Y=E.elements,re=this.elements;re[0]=Y[10]*Y[5]-Y[6]*Y[9],re[1]=-Y[10]*Y[1]+Y[2]*Y[9],re[2]=Y[6]*Y[1]-Y[2]*Y[5],re[3]=-Y[10]*Y[4]+Y[6]*Y[8],re[4]=Y[10]*Y[0]-Y[2]*Y[8],re[5]=-Y[6]*Y[0]+Y[2]*Y[4],re[6]=Y[9]*Y[4]-Y[5]*Y[8],re[7]=-Y[9]*Y[0]+Y[1]*Y[8],re[8]=Y[5]*Y[0]-Y[1]*Y[4];const ue=Y[0]*re[0]+Y[1]*re[3]+Y[2]*re[6];if(ue===0){const q="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(K)throw new Error(q);return console.warn(q),this.identity(),this}return this.multiplyScalar(1/ue),this}getDeterminant(){const E=this.elements;return E[0]*E[4]*E[8]+E[1]*E[5]*E[6]+E[2]*E[3]*E[7]-E[2]*E[4]*E[6]-E[1]*E[3]*E[8]-E[0]*E[5]*E[7]}transpose(){let E;const K=this.elements;return E=K[1],K[1]=K[3],K[3]=E,E=K[2],K[2]=K[6],K[6]=E,E=K[5],K[5]=K[7],K[7]=E,this}clone(){const E=this.elements;return new j(E[0],E[3],E[6],E[1],E[4],E[7],E[2],E[5],E[8])}getMatrix4(){const E=this.elements;return new H(E[0],E[3],E[6],0,E[1],E[4],E[7],0,E[2],E[5],E[8],0)}}class se{constructor(E,K){this.origin=E!==void 0?E:new P,this.direction=K!==void 0?K:new P}set(E,K){return this.origin.copy(E),this.direction.copy(K),this}copy(E){return this.origin.copy(E.origin),this.direction.copy(E.direction),this}at(E,K){return(K||new P).copy(this.direction).multiplyScalar(E).add(this.origin)}recast(E){const K=C;return this.origin.copy(this.at(E,K)),this}closestPointToPoint(E,K){const Y=K||new P;Y.subVectors(E,this.origin);const re=Y.dot(this.direction);return Y.copy(this.direction).multiplyScalar(re).add(this.origin)}distanceToPoint(E){const K=C,Y=K.subVectors(E,this.origin).dot(this.direction);return K.copy(this.direction).multiplyScalar(Y).add(this.origin),K.distanceTo(E)}isIntersectionCylinder(){}isIntersectionSphere(E){return this.distanceToPoint(E.center)<=E.radius}isIntersectionPlane(E){return E.normal.dot(this.direction)!==0||E.distanceToPoint(this.origin)===0}distanceToPlane(E){const K=E.normal.dot(this.direction);return K===0?E.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(E.normal)+E.constant)/K}intersectPlane(E,K){const Y=this.distanceToPlane(E);if(Y!==void 0)return this.at(Y,K)}applyMatrix4(E){return this.direction.add(this.origin).applyMatrix4(E),this.origin.applyMatrix4(E),this.direction.sub(this.origin),this}clone(){return new se().copy(this)}}function ce(ne,E,K,Y,re,ue){Y=Y*Math.PI/180,re=re*Math.PI/180,ue=ue*Math.PI/180;const q=Ae=>Ae*Ae,he=Math.cos(Y),Oe=Math.cos(re),be=Math.cos(ue),Te=Math.sin(ue);return new j(ne,E*be,K*Oe,0,E*Te,K*(he-Oe*be)/Te,0,0,K*Math.sqrt(1-q(he)-q(Oe)-q(be)+2*he*Oe*be)/Te)}},546:(e,r,s)=>{s.r(r),s.d(r,{CustomLinear:()=>C,Gradient:()=>k,GradientType:()=>c,ROYGB:()=>d,RWB:()=>p,Sinebow:()=>w,builtinGradients:()=>v,getGradient:()=>u,normalizeValue:()=>x});var o=s(222);class c{}function x(H,P,j){return P>=H?(j<H&&(j=H),j>P&&(j=P),{lo:H,hi:P,val:j}):(j>H&&(j=H),j<P&&(j=P),{lo:P,hi:H,val:j=H-j+P})}function u(H){if(H instanceof c)return H;if(H.gradient!==void 0&&v[H.gradient]){let P=H.min===void 0?-1:H.min,j=H.max===void 0?1:H.max;return H.mid===void 0?H.colors===void 0?new v[H.gradient](P,j):new v[H.gradient](P,j,H.colors):new v[H.gradient](P,j,H.mid)}if(typeof H.gradient=="string"&&H.gradient.startsWith("linear_")){let P=H.gradient.split("_");P.shift();let j=H.min===void 0?-1:H.min,se=H.max===void 0?1:H.max;return new C(j,se,P)}return H}class p extends c{constructor(P,j,se){super(),this.gradient="RWB",this.mult=1,this.mid=se,this.min=P,this.max=j,j===void 0&&Array.isArray(P)&&P.length>=2?(this.max=P[1],this.min=P[0]):P&&j&&!Array.isArray(P)&&(this.min=P,this.max=j)}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}valueToHex(P,j){var se,ce;if(P=this.mult*P,j?(se=j[0],ce=j[1]):(se=this.min,ce=this.max),P===void 0)return 16777215;var ne=x(se,ce,P);se=ne.lo;var E,K=((ce=ne.hi)+se)/2;return(P=ne.val)<(K=j&&j[2]!==void 0?j[2]:this.mid!==void 0?this.mid:(se+ce)/2)?16711680+256*(E=Math.floor(255*Math.sqrt((P-se)/(K-se))))+E:P>K?65536*(E=Math.floor(255*Math.sqrt(1-(P-K)/(ce-K))))+256*E+255:16777215}}class d extends c{constructor(P,j){super(),this.gradient="ROYGB",this.mult=1,this.min=P,this.max=j,j===void 0&&Array.isArray(P)&&P.length>=2?(this.max=P[1],this.min=P[0]):P&&j&&!Array.isArray(P)&&(this.min=P,this.max=j)}valueToHex(P,j){var se,ce;if(P=this.mult*P,j?(se=j[0],ce=j[1]):(se=this.min,ce=this.max),P===void 0)return 16777215;var ne=x(se,ce,P),E=((se=ne.lo)+(ce=ne.hi))/2,K=(se+E)/2,Y=(E+ce)/2;return(P=ne.val)<K?16711680+256*Math.floor(255*Math.sqrt((P-se)/(K-se)))+0:P<E?65536*Math.floor(255*Math.sqrt(1-(P-K)/(E-K)))+65280+0:P<Y?65280+1*Math.floor(255*Math.sqrt((P-E)/(Y-E))):0+256*Math.floor(255*Math.sqrt(1-(P-Y)/(ce-Y)))+255}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}}class w extends c{constructor(P,j){super(),this.gradient="Sinebow",this.mult=1,this.min=P,this.max=j,j===void 0&&Array.isArray(P)&&P.length>=2&&(this.max=P[1],this.min=P[0]),j<P&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex(P,j){var se,ce;if(P=this.mult*P,j?(se=j[0],ce=j[1]):(se=this.min,ce=this.max),P===void 0)return 16777215;var ne=k.normalizeValue(se,ce,P);se=ne.lo,ce=ne.hi;var E=((P=ne.val)-se)/(ce-se)*5/6+.5,K=Math.sin(Math.PI*E);K*=255*K;var Y=Math.sin(Math.PI*(E+1/3));Y*=255*Y;var re=Math.sin(Math.PI*(E+2/3));return re*=255*re,65536*Math.floor(K)+256*Math.floor(re)+1*Math.floor(Y)}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}}class C extends c{constructor(P,j,se){var ce;if(super(),this.gradient="linear",this.colors=new Array,Array.isArray(P)&&P.length>=2?(this.max=P[1],this.min=P[0],ce=j):(this.min=P,this.max=j,ce=se),ce)for(let ne of ce)this.colors.push(o.CC.color(ne));else this.colors.push(o.CC.color(0))}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}valueToHex(P,j){var se,ce;if(j?(se=j[0],ce=j[1]):(se=this.min,ce=this.max),P===void 0)return 16777215;var ne=x(se,ce,P);se=ne.lo,ce=ne.hi,P=ne.val;let E=this.colors.length,K=(ce-se)/E,Y=Math.min(Math.floor((P-se)/K),E-1),re=Math.min(Y+1,E-1),ue=(P-se-Y*K)/K,q=this.colors[Y],he=this.colors[re];return new o.Color(q.r+ue*(he.r-q.r),q.g+ue*(he.g-q.g),q.b+ue*(he.b-q.b)).getHex()}}const v={rwb:p,RWB:p,roygb:d,ROYGB:d,sinebow:w,linear:C};class k extends c{valueToHex(P,j){return 0}range(){return null}}k.RWB=p,k.ROYGB=d,k.Sinebow=w,k.CustomLinear=C,k.builtinGradients=v,k.normalizeValue=x,k.getGradient=u},663:(e,r,s)=>{var o=s(981),c=s(701),x=s(407),u=s(165),p=s(358),d=-2,w=12,C=30;function v(re){return(re>>>24&255)+(re>>>8&65280)+((65280&re)<<8)+((255&re)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function H(re){var ue;return re&&re.state?(ue=re.state,re.total_in=re.total_out=ue.total=0,re.msg="",ue.wrap&&(re.adler=1&ue.wrap),ue.mode=1,ue.last=0,ue.havedict=0,ue.dmax=32768,ue.head=null,ue.hold=0,ue.bits=0,ue.lencode=ue.lendyn=new o.Buf32(852),ue.distcode=ue.distdyn=new o.Buf32(592),ue.sane=1,ue.back=-1,0):d}function P(re){var ue;return re&&re.state?((ue=re.state).wsize=0,ue.whave=0,ue.wnext=0,H(re)):d}function j(re,ue){var q,he;return re&&re.state?(he=re.state,ue<0?(q=0,ue=-ue):(q=1+(ue>>4),ue<48&&(ue&=15)),ue&&(ue<8||ue>15)?d:(he.window!==null&&he.wbits!==ue&&(he.window=null),he.wrap=q,he.wbits=ue,P(re))):d}function se(re,ue){var q,he;return re?(he=new k,re.state=he,he.window=null,(q=j(re,ue))!==0&&(re.state=null),q):d}var ce,ne,E=!0;function K(re){if(E){var ue;for(ce=new o.Buf32(512),ne=new o.Buf32(32),ue=0;ue<144;)re.lens[ue++]=8;for(;ue<256;)re.lens[ue++]=9;for(;ue<280;)re.lens[ue++]=7;for(;ue<288;)re.lens[ue++]=8;for(p(1,re.lens,0,288,ce,0,re.work,{bits:9}),ue=0;ue<32;)re.lens[ue++]=5;p(2,re.lens,0,32,ne,0,re.work,{bits:5}),E=!1}re.lencode=ce,re.lenbits=9,re.distcode=ne,re.distbits=5}function Y(re,ue,q,he){var Oe,be=re.state;return be.window===null&&(be.wsize=1<<be.wbits,be.wnext=0,be.whave=0,be.window=new o.Buf8(be.wsize)),he>=be.wsize?(o.arraySet(be.window,ue,q-be.wsize,be.wsize,0),be.wnext=0,be.whave=be.wsize):((Oe=be.wsize-be.wnext)>he&&(Oe=he),o.arraySet(be.window,ue,q-he,Oe,be.wnext),(he-=Oe)?(o.arraySet(be.window,ue,q-he,he,0),be.wnext=he,be.whave=be.wsize):(be.wnext+=Oe,be.wnext===be.wsize&&(be.wnext=0),be.whave<be.wsize&&(be.whave+=Oe))),0}r.inflateReset=P,r.inflateReset2=j,r.inflateResetKeep=H,r.inflateInit=function(re){return se(re,15)},r.inflateInit2=se,r.inflate=function(re,ue){var q,he,Oe,be,Te,Ae,Ve,_e,W,we,ge,ae,Ue,Ee,Ge,tt,ve,ze,rt,at,Ke,ft,vt,yt,Kt=0,zt=new o.Buf8(4),vr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!re||!re.state||!re.output||!re.input&&re.avail_in!==0)return d;(q=re.state).mode===w&&(q.mode=13),Te=re.next_out,Oe=re.output,Ve=re.avail_out,be=re.next_in,he=re.input,Ae=re.avail_in,_e=q.hold,W=q.bits,we=Ae,ge=Ve,ft=0;e:for(;;)switch(q.mode){case 1:if(q.wrap===0){q.mode=13;break}for(;W<16;){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}if(2&q.wrap&&_e===35615){q.check=0,zt[0]=255&_e,zt[1]=_e>>>8&255,q.check=x(q.check,zt,2,0),_e=0,W=0,q.mode=2;break}if(q.flags=0,q.head&&(q.head.done=!1),!(1&q.wrap)||(((255&_e)<<8)+(_e>>8))%31){re.msg="incorrect header check",q.mode=C;break}if((15&_e)!=8){re.msg="unknown compression method",q.mode=C;break}if(W-=4,Ke=8+(15&(_e>>>=4)),q.wbits===0)q.wbits=Ke;else if(Ke>q.wbits){re.msg="invalid window size",q.mode=C;break}q.dmax=1<<Ke,re.adler=q.check=1,q.mode=512&_e?10:w,_e=0,W=0;break;case 2:for(;W<16;){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}if(q.flags=_e,(255&q.flags)!=8){re.msg="unknown compression method",q.mode=C;break}if(57344&q.flags){re.msg="unknown header flags set",q.mode=C;break}q.head&&(q.head.text=_e>>8&1),512&q.flags&&(zt[0]=255&_e,zt[1]=_e>>>8&255,q.check=x(q.check,zt,2,0)),_e=0,W=0,q.mode=3;case 3:for(;W<32;){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}q.head&&(q.head.time=_e),512&q.flags&&(zt[0]=255&_e,zt[1]=_e>>>8&255,zt[2]=_e>>>16&255,zt[3]=_e>>>24&255,q.check=x(q.check,zt,4,0)),_e=0,W=0,q.mode=4;case 4:for(;W<16;){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}q.head&&(q.head.xflags=255&_e,q.head.os=_e>>8),512&q.flags&&(zt[0]=255&_e,zt[1]=_e>>>8&255,q.check=x(q.check,zt,2,0)),_e=0,W=0,q.mode=5;case 5:if(1024&q.flags){for(;W<16;){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}q.length=_e,q.head&&(q.head.extra_len=_e),512&q.flags&&(zt[0]=255&_e,zt[1]=_e>>>8&255,q.check=x(q.check,zt,2,0)),_e=0,W=0}else q.head&&(q.head.extra=null);q.mode=6;case 6:if(1024&q.flags&&((ae=q.length)>Ae&&(ae=Ae),ae&&(q.head&&(Ke=q.head.extra_len-q.length,q.head.extra||(q.head.extra=new Array(q.head.extra_len)),o.arraySet(q.head.extra,he,be,ae,Ke)),512&q.flags&&(q.check=x(q.check,he,ae,be)),Ae-=ae,be+=ae,q.length-=ae),q.length))break e;q.length=0,q.mode=7;case 7:if(2048&q.flags){if(Ae===0)break e;ae=0;do Ke=he[be+ae++],q.head&&Ke&&q.length<65536&&(q.head.name+=String.fromCharCode(Ke));while(Ke&&ae<Ae);if(512&q.flags&&(q.check=x(q.check,he,ae,be)),Ae-=ae,be+=ae,Ke)break e}else q.head&&(q.head.name=null);q.length=0,q.mode=8;case 8:if(4096&q.flags){if(Ae===0)break e;ae=0;do Ke=he[be+ae++],q.head&&Ke&&q.length<65536&&(q.head.comment+=String.fromCharCode(Ke));while(Ke&&ae<Ae);if(512&q.flags&&(q.check=x(q.check,he,ae,be)),Ae-=ae,be+=ae,Ke)break e}else q.head&&(q.head.comment=null);q.mode=9;case 9:if(512&q.flags){for(;W<16;){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}if(_e!==(65535&q.check)){re.msg="header crc mismatch",q.mode=C;break}_e=0,W=0}q.head&&(q.head.hcrc=q.flags>>9&1,q.head.done=!0),re.adler=q.check=0,q.mode=w;break;case 10:for(;W<32;){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}re.adler=q.check=v(_e),_e=0,W=0,q.mode=11;case 11:if(q.havedict===0)return re.next_out=Te,re.avail_out=Ve,re.next_in=be,re.avail_in=Ae,q.hold=_e,q.bits=W,2;re.adler=q.check=1,q.mode=w;case w:if(ue===5||ue===6)break e;case 13:if(q.last){_e>>>=7&W,W-=7&W,q.mode=27;break}for(;W<3;){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}switch(q.last=1&_e,W-=1,3&(_e>>>=1)){case 0:q.mode=14;break;case 1:if(K(q),q.mode=20,ue===6){_e>>>=2,W-=2;break e}break;case 2:q.mode=17;break;case 3:re.msg="invalid block type",q.mode=C}_e>>>=2,W-=2;break;case 14:for(_e>>>=7&W,W-=7&W;W<32;){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}if((65535&_e)!=(_e>>>16^65535)){re.msg="invalid stored block lengths",q.mode=C;break}if(q.length=65535&_e,_e=0,W=0,q.mode=15,ue===6)break e;case 15:q.mode=16;case 16:if(ae=q.length){if(ae>Ae&&(ae=Ae),ae>Ve&&(ae=Ve),ae===0)break e;o.arraySet(Oe,he,be,ae,Te),Ae-=ae,be+=ae,Ve-=ae,Te+=ae,q.length-=ae;break}q.mode=w;break;case 17:for(;W<14;){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}if(q.nlen=257+(31&_e),_e>>>=5,W-=5,q.ndist=1+(31&_e),_e>>>=5,W-=5,q.ncode=4+(15&_e),_e>>>=4,W-=4,q.nlen>286||q.ndist>30){re.msg="too many length or distance symbols",q.mode=C;break}q.have=0,q.mode=18;case 18:for(;q.have<q.ncode;){for(;W<3;){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}q.lens[vr[q.have++]]=7&_e,_e>>>=3,W-=3}for(;q.have<19;)q.lens[vr[q.have++]]=0;if(q.lencode=q.lendyn,q.lenbits=7,vt={bits:q.lenbits},ft=p(0,q.lens,0,19,q.lencode,0,q.work,vt),q.lenbits=vt.bits,ft){re.msg="invalid code lengths set",q.mode=C;break}q.have=0,q.mode=19;case 19:for(;q.have<q.nlen+q.ndist;){for(;tt=(Kt=q.lencode[_e&(1<<q.lenbits)-1])>>>16&255,ve=65535&Kt,!((Ge=Kt>>>24)<=W);){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}if(ve<16)_e>>>=Ge,W-=Ge,q.lens[q.have++]=ve;else{if(ve===16){for(yt=Ge+2;W<yt;){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}if(_e>>>=Ge,W-=Ge,q.have===0){re.msg="invalid bit length repeat",q.mode=C;break}Ke=q.lens[q.have-1],ae=3+(3&_e),_e>>>=2,W-=2}else if(ve===17){for(yt=Ge+3;W<yt;){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}W-=Ge,Ke=0,ae=3+(7&(_e>>>=Ge)),_e>>>=3,W-=3}else{for(yt=Ge+7;W<yt;){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}W-=Ge,Ke=0,ae=11+(127&(_e>>>=Ge)),_e>>>=7,W-=7}if(q.have+ae>q.nlen+q.ndist){re.msg="invalid bit length repeat",q.mode=C;break}for(;ae--;)q.lens[q.have++]=Ke}}if(q.mode===C)break;if(q.lens[256]===0){re.msg="invalid code -- missing end-of-block",q.mode=C;break}if(q.lenbits=9,vt={bits:q.lenbits},ft=p(1,q.lens,0,q.nlen,q.lencode,0,q.work,vt),q.lenbits=vt.bits,ft){re.msg="invalid literal/lengths set",q.mode=C;break}if(q.distbits=6,q.distcode=q.distdyn,vt={bits:q.distbits},ft=p(2,q.lens,q.nlen,q.ndist,q.distcode,0,q.work,vt),q.distbits=vt.bits,ft){re.msg="invalid distances set",q.mode=C;break}if(q.mode=20,ue===6)break e;case 20:q.mode=21;case 21:if(Ae>=6&&Ve>=258){re.next_out=Te,re.avail_out=Ve,re.next_in=be,re.avail_in=Ae,q.hold=_e,q.bits=W,u(re,ge),Te=re.next_out,Oe=re.output,Ve=re.avail_out,be=re.next_in,he=re.input,Ae=re.avail_in,_e=q.hold,W=q.bits,q.mode===w&&(q.back=-1);break}for(q.back=0;tt=(Kt=q.lencode[_e&(1<<q.lenbits)-1])>>>16&255,ve=65535&Kt,!((Ge=Kt>>>24)<=W);){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}if(tt&&!(240&tt)){for(ze=Ge,rt=tt,at=ve;tt=(Kt=q.lencode[at+((_e&(1<<ze+rt)-1)>>ze)])>>>16&255,ve=65535&Kt,!(ze+(Ge=Kt>>>24)<=W);){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}_e>>>=ze,W-=ze,q.back+=ze}if(_e>>>=Ge,W-=Ge,q.back+=Ge,q.length=ve,tt===0){q.mode=26;break}if(32&tt){q.back=-1,q.mode=w;break}if(64&tt){re.msg="invalid literal/length code",q.mode=C;break}q.extra=15&tt,q.mode=22;case 22:if(q.extra){for(yt=q.extra;W<yt;){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}q.length+=_e&(1<<q.extra)-1,_e>>>=q.extra,W-=q.extra,q.back+=q.extra}q.was=q.length,q.mode=23;case 23:for(;tt=(Kt=q.distcode[_e&(1<<q.distbits)-1])>>>16&255,ve=65535&Kt,!((Ge=Kt>>>24)<=W);){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}if(!(240&tt)){for(ze=Ge,rt=tt,at=ve;tt=(Kt=q.distcode[at+((_e&(1<<ze+rt)-1)>>ze)])>>>16&255,ve=65535&Kt,!(ze+(Ge=Kt>>>24)<=W);){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}_e>>>=ze,W-=ze,q.back+=ze}if(_e>>>=Ge,W-=Ge,q.back+=Ge,64&tt){re.msg="invalid distance code",q.mode=C;break}q.offset=ve,q.extra=15&tt,q.mode=24;case 24:if(q.extra){for(yt=q.extra;W<yt;){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}q.offset+=_e&(1<<q.extra)-1,_e>>>=q.extra,W-=q.extra,q.back+=q.extra}if(q.offset>q.dmax){re.msg="invalid distance too far back",q.mode=C;break}q.mode=25;case 25:if(Ve===0)break e;if(ae=ge-Ve,q.offset>ae){if((ae=q.offset-ae)>q.whave&&q.sane){re.msg="invalid distance too far back",q.mode=C;break}ae>q.wnext?(ae-=q.wnext,Ue=q.wsize-ae):Ue=q.wnext-ae,ae>q.length&&(ae=q.length),Ee=q.window}else Ee=Oe,Ue=Te-q.offset,ae=q.length;ae>Ve&&(ae=Ve),Ve-=ae,q.length-=ae;do Oe[Te++]=Ee[Ue++];while(--ae);q.length===0&&(q.mode=21);break;case 26:if(Ve===0)break e;Oe[Te++]=q.length,Ve--,q.mode=21;break;case 27:if(q.wrap){for(;W<32;){if(Ae===0)break e;Ae--,_e|=he[be++]<<W,W+=8}if(ge-=Ve,re.total_out+=ge,q.total+=ge,ge&&(re.adler=q.check=q.flags?x(q.check,Oe,ge,Te-ge):c(q.check,Oe,ge,Te-ge)),ge=Ve,(q.flags?_e:v(_e))!==q.check){re.msg="incorrect data check",q.mode=C;break}_e=0,W=0}q.mode=28;case 28:if(q.wrap&&q.flags){for(;W<32;){if(Ae===0)break e;Ae--,_e+=he[be++]<<W,W+=8}if(_e!==(4294967295&q.total)){re.msg="incorrect length check",q.mode=C;break}_e=0,W=0}q.mode=29;case 29:ft=1;break e;case C:ft=-3;break e;case 31:return-4;default:return d}return re.next_out=Te,re.avail_out=Ve,re.next_in=be,re.avail_in=Ae,q.hold=_e,q.bits=W,(q.wsize||ge!==re.avail_out&&q.mode<C&&(q.mode<27||ue!==4))&&Y(re,re.output,re.next_out,ge-re.avail_out)?(q.mode=31,-4):(we-=re.avail_in,ge-=re.avail_out,re.total_in+=we,re.total_out+=ge,q.total+=ge,q.wrap&&ge&&(re.adler=q.check=q.flags?x(q.check,Oe,ge,re.next_out-ge):c(q.check,Oe,ge,re.next_out-ge)),re.data_type=q.bits+(q.last?64:0)+(q.mode===w?128:0)+(q.mode===20||q.mode===15?256:0),(we===0&&ge===0||ue===4)&&ft===0&&(ft=-5),ft)},r.inflateEnd=function(re){if(!re||!re.state)return d;var ue=re.state;return ue.window&&(ue.window=null),re.state=null,0},r.inflateGetHeader=function(re,ue){var q;return re&&re.state&&2&(q=re.state).wrap?(q.head=ue,ue.done=!1,0):d},r.inflateSetDictionary=function(re,ue){var q,he=ue.length;return re&&re.state?(q=re.state).wrap!==0&&q.mode!==11?d:q.mode===11&&c(1,ue,he,0)!==q.check?-3:Y(re,ue,he,he)?(q.mode=31,-4):(q.havedict=1,0):d},r.inflateInfo="pako inflate (from Nodeca project)"},670:e=>{e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},681:e=>{e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},697:(e,r,s)=>{var o=s(981);function c(ve){for(var ze=ve.length;--ze>=0;)ve[ze]=0}var x=256,u=286,p=30,d=15,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(576);c(H);var P=new Array(60);c(P);var j=new Array(512);c(j);var se=new Array(256);c(se);var ce=new Array(29);c(ce);var ne,E,K,Y=new Array(p);function re(ve,ze,rt,at,Ke){this.static_tree=ve,this.extra_bits=ze,this.extra_base=rt,this.elems=at,this.max_length=Ke,this.has_stree=ve&&ve.length}function ue(ve,ze){this.dyn_tree=ve,this.max_code=0,this.stat_desc=ze}function q(ve){return ve<256?j[ve]:j[256+(ve>>>7)]}function he(ve,ze){ve.pending_buf[ve.pending++]=255&ze,ve.pending_buf[ve.pending++]=ze>>>8&255}function Oe(ve,ze,rt){ve.bi_valid>16-rt?(ve.bi_buf|=ze<<ve.bi_valid&65535,he(ve,ve.bi_buf),ve.bi_buf=ze>>16-ve.bi_valid,ve.bi_valid+=rt-16):(ve.bi_buf|=ze<<ve.bi_valid&65535,ve.bi_valid+=rt)}function be(ve,ze,rt){Oe(ve,rt[2*ze],rt[2*ze+1])}function Te(ve,ze){var rt=0;do rt|=1&ve,ve>>>=1,rt<<=1;while(--ze>0);return rt>>>1}function Ae(ve,ze,rt){var at,Ke,ft=new Array(16),vt=0;for(at=1;at<=d;at++)ft[at]=vt=vt+rt[at-1]<<1;for(Ke=0;Ke<=ze;Ke++){var yt=ve[2*Ke+1];yt!==0&&(ve[2*Ke]=Te(ft[yt]++,yt))}}function Ve(ve){var ze;for(ze=0;ze<u;ze++)ve.dyn_ltree[2*ze]=0;for(ze=0;ze<p;ze++)ve.dyn_dtree[2*ze]=0;for(ze=0;ze<19;ze++)ve.bl_tree[2*ze]=0;ve.dyn_ltree[512]=1,ve.opt_len=ve.static_len=0,ve.last_lit=ve.matches=0}function _e(ve){ve.bi_valid>8?he(ve,ve.bi_buf):ve.bi_valid>0&&(ve.pending_buf[ve.pending++]=ve.bi_buf),ve.bi_buf=0,ve.bi_valid=0}function W(ve,ze,rt,at){var Ke=2*ze,ft=2*rt;return ve[Ke]<ve[ft]||ve[Ke]===ve[ft]&&at[ze]<=at[rt]}function we(ve,ze,rt){for(var at=ve.heap[rt],Ke=rt<<1;Ke<=ve.heap_len&&(Ke<ve.heap_len&&W(ze,ve.heap[Ke+1],ve.heap[Ke],ve.depth)&&Ke++,!W(ze,at,ve.heap[Ke],ve.depth));)ve.heap[rt]=ve.heap[Ke],rt=Ke,Ke<<=1;ve.heap[rt]=at}function ge(ve,ze,rt){var at,Ke,ft,vt,yt=0;if(ve.last_lit!==0)do at=ve.pending_buf[ve.d_buf+2*yt]<<8|ve.pending_buf[ve.d_buf+2*yt+1],Ke=ve.pending_buf[ve.l_buf+yt],yt++,at===0?be(ve,Ke,ze):(be(ve,(ft=se[Ke])+x+1,ze),(vt=w[ft])!==0&&Oe(ve,Ke-=ce[ft],vt),be(ve,ft=q(--at),rt),(vt=C[ft])!==0&&Oe(ve,at-=Y[ft],vt));while(yt<ve.last_lit);be(ve,256,ze)}function ae(ve,ze){var rt,at,Ke,ft=ze.dyn_tree,vt=ze.stat_desc.static_tree,yt=ze.stat_desc.has_stree,Kt=ze.stat_desc.elems,zt=-1;for(ve.heap_len=0,ve.heap_max=573,rt=0;rt<Kt;rt++)ft[2*rt]!==0?(ve.heap[++ve.heap_len]=zt=rt,ve.depth[rt]=0):ft[2*rt+1]=0;for(;ve.heap_len<2;)ft[2*(Ke=ve.heap[++ve.heap_len]=zt<2?++zt:0)]=1,ve.depth[Ke]=0,ve.opt_len--,yt&&(ve.static_len-=vt[2*Ke+1]);for(ze.max_code=zt,rt=ve.heap_len>>1;rt>=1;rt--)we(ve,ft,rt);Ke=Kt;do rt=ve.heap[1],ve.heap[1]=ve.heap[ve.heap_len--],we(ve,ft,1),at=ve.heap[1],ve.heap[--ve.heap_max]=rt,ve.heap[--ve.heap_max]=at,ft[2*Ke]=ft[2*rt]+ft[2*at],ve.depth[Ke]=(ve.depth[rt]>=ve.depth[at]?ve.depth[rt]:ve.depth[at])+1,ft[2*rt+1]=ft[2*at+1]=Ke,ve.heap[1]=Ke++,we(ve,ft,1);while(ve.heap_len>=2);ve.heap[--ve.heap_max]=ve.heap[1],(function(vr,yr){var jr,Lr,Cr,Rr,Pr,Ei,Br=yr.dyn_tree,Wr=yr.max_code,Gi=yr.stat_desc.static_tree,Di=yr.stat_desc.has_stree,tn=yr.stat_desc.extra_bits,Ce=yr.stat_desc.extra_base,Le=yr.stat_desc.max_length,We=0;for(Rr=0;Rr<=d;Rr++)vr.bl_count[Rr]=0;for(Br[2*vr.heap[vr.heap_max]+1]=0,jr=vr.heap_max+1;jr<573;jr++)(Rr=Br[2*Br[2*(Lr=vr.heap[jr])+1]+1]+1)>Le&&(Rr=Le,We++),Br[2*Lr+1]=Rr,Lr>Wr||(vr.bl_count[Rr]++,Pr=0,Lr>=Ce&&(Pr=tn[Lr-Ce]),Ei=Br[2*Lr],vr.opt_len+=Ei*(Rr+Pr),Di&&(vr.static_len+=Ei*(Gi[2*Lr+1]+Pr)));if(We!==0){do{for(Rr=Le-1;vr.bl_count[Rr]===0;)Rr--;vr.bl_count[Rr]--,vr.bl_count[Rr+1]+=2,vr.bl_count[Le]--,We-=2}while(We>0);for(Rr=Le;Rr!==0;Rr--)for(Lr=vr.bl_count[Rr];Lr!==0;)(Cr=vr.heap[--jr])>Wr||(Br[2*Cr+1]!==Rr&&(vr.opt_len+=(Rr-Br[2*Cr+1])*Br[2*Cr],Br[2*Cr+1]=Rr),Lr--)}})(ve,ze),Ae(ft,zt,ve.bl_count)}function Ue(ve,ze,rt){var at,Ke,ft=-1,vt=ze[1],yt=0,Kt=7,zt=4;for(vt===0&&(Kt=138,zt=3),ze[2*(rt+1)+1]=65535,at=0;at<=rt;at++)Ke=vt,vt=ze[2*(at+1)+1],++yt<Kt&&Ke===vt||(yt<zt?ve.bl_tree[2*Ke]+=yt:Ke!==0?(Ke!==ft&&ve.bl_tree[2*Ke]++,ve.bl_tree[32]++):yt<=10?ve.bl_tree[34]++:ve.bl_tree[36]++,yt=0,ft=Ke,vt===0?(Kt=138,zt=3):Ke===vt?(Kt=6,zt=3):(Kt=7,zt=4))}function Ee(ve,ze,rt){var at,Ke,ft=-1,vt=ze[1],yt=0,Kt=7,zt=4;for(vt===0&&(Kt=138,zt=3),at=0;at<=rt;at++)if(Ke=vt,vt=ze[2*(at+1)+1],!(++yt<Kt&&Ke===vt)){if(yt<zt)do be(ve,Ke,ve.bl_tree);while(--yt!==0);else Ke!==0?(Ke!==ft&&(be(ve,Ke,ve.bl_tree),yt--),be(ve,16,ve.bl_tree),Oe(ve,yt-3,2)):yt<=10?(be(ve,17,ve.bl_tree),Oe(ve,yt-3,3)):(be(ve,18,ve.bl_tree),Oe(ve,yt-11,7));yt=0,ft=Ke,vt===0?(Kt=138,zt=3):Ke===vt?(Kt=6,zt=3):(Kt=7,zt=4)}}c(Y);var Ge=!1;function tt(ve,ze,rt,at){Oe(ve,0+(at?1:0),3),(function(Ke,ft,vt,yt){_e(Ke),he(Ke,vt),he(Ke,~vt),o.arraySet(Ke.pending_buf,Ke.window,ft,vt,Ke.pending),Ke.pending+=vt})(ve,ze,rt)}r._tr_init=function(ve){Ge||((function(){var ze,rt,at,Ke,ft,vt=new Array(16);for(at=0,Ke=0;Ke<28;Ke++)for(ce[Ke]=at,ze=0;ze<1<<w[Ke];ze++)se[at++]=Ke;for(se[at-1]=Ke,ft=0,Ke=0;Ke<16;Ke++)for(Y[Ke]=ft,ze=0;ze<1<<C[Ke];ze++)j[ft++]=Ke;for(ft>>=7;Ke<p;Ke++)for(Y[Ke]=ft<<7,ze=0;ze<1<<C[Ke]-7;ze++)j[256+ft++]=Ke;for(rt=0;rt<=d;rt++)vt[rt]=0;for(ze=0;ze<=143;)H[2*ze+1]=8,ze++,vt[8]++;for(;ze<=255;)H[2*ze+1]=9,ze++,vt[9]++;for(;ze<=279;)H[2*ze+1]=7,ze++,vt[7]++;for(;ze<=287;)H[2*ze+1]=8,ze++,vt[8]++;for(Ae(H,287,vt),ze=0;ze<p;ze++)P[2*ze+1]=5,P[2*ze]=Te(ze,5);ne=new re(H,w,257,u,d),E=new re(P,C,0,p,d),K=new re(new Array(0),v,0,19,7)})(),Ge=!0),ve.l_desc=new ue(ve.dyn_ltree,ne),ve.d_desc=new ue(ve.dyn_dtree,E),ve.bl_desc=new ue(ve.bl_tree,K),ve.bi_buf=0,ve.bi_valid=0,Ve(ve)},r._tr_stored_block=tt,r._tr_flush_block=function(ve,ze,rt,at){var Ke,ft,vt=0;ve.level>0?(ve.strm.data_type===2&&(ve.strm.data_type=(function(yt){var Kt,zt=4093624447;for(Kt=0;Kt<=31;Kt++,zt>>>=1)if(1&zt&&yt.dyn_ltree[2*Kt]!==0)return 0;if(yt.dyn_ltree[18]!==0||yt.dyn_ltree[20]!==0||yt.dyn_ltree[26]!==0)return 1;for(Kt=32;Kt<x;Kt++)if(yt.dyn_ltree[2*Kt]!==0)return 1;return 0})(ve)),ae(ve,ve.l_desc),ae(ve,ve.d_desc),vt=(function(yt){var Kt;for(Ue(yt,yt.dyn_ltree,yt.l_desc.max_code),Ue(yt,yt.dyn_dtree,yt.d_desc.max_code),ae(yt,yt.bl_desc),Kt=18;Kt>=3&&yt.bl_tree[2*k[Kt]+1]===0;Kt--);return yt.opt_len+=3*(Kt+1)+5+5+4,Kt})(ve),Ke=ve.opt_len+3+7>>>3,(ft=ve.static_len+3+7>>>3)<=Ke&&(Ke=ft)):Ke=ft=rt+5,rt+4<=Ke&&ze!==-1?tt(ve,ze,rt,at):ve.strategy===4||ft===Ke?(Oe(ve,2+(at?1:0),3),ge(ve,H,P)):(Oe(ve,4+(at?1:0),3),(function(yt,Kt,zt,vr){var yr;for(Oe(yt,Kt-257,5),Oe(yt,zt-1,5),Oe(yt,vr-4,4),yr=0;yr<vr;yr++)Oe(yt,yt.bl_tree[2*k[yr]+1],3);Ee(yt,yt.dyn_ltree,Kt-1),Ee(yt,yt.dyn_dtree,zt-1)})(ve,ve.l_desc.max_code+1,ve.d_desc.max_code+1,vt+1),ge(ve,ve.dyn_ltree,ve.dyn_dtree)),Ve(ve),at&&_e(ve)},r._tr_tally=function(ve,ze,rt){return ve.pending_buf[ve.d_buf+2*ve.last_lit]=ze>>>8&255,ve.pending_buf[ve.d_buf+2*ve.last_lit+1]=255&ze,ve.pending_buf[ve.l_buf+ve.last_lit]=255&rt,ve.last_lit++,ze===0?ve.dyn_ltree[2*rt]++:(ve.matches++,ze--,ve.dyn_ltree[2*(se[rt]+x+1)]++,ve.dyn_dtree[2*q(ze)]++),ve.last_lit===ve.lit_bufsize-1},r._tr_align=function(ve){Oe(ve,2,3),be(ve,256,H),(function(ze){ze.bi_valid===16?(he(ze,ze.bi_buf),ze.bi_buf=0,ze.bi_valid=0):ze.bi_valid>=8&&(ze.pending_buf[ze.pending++]=255&ze.bi_buf,ze.bi_buf>>=8,ze.bi_valid-=8)})(ve)}},701:e=>{e.exports=function(r,s,o,c){for(var x=65535&r,u=r>>>16&65535,p=0;o!==0;){o-=p=o>2e3?2e3:o;do u=u+(x=x+s[c++]|0)|0;while(--p);x%=65521,u%=65521}return x|u<<16}},746:e=>{e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},788:(e,r,s)=>{var o={};(0,s(981).assign)(o,s(71),s(3),s(681)),e.exports=o},797:(e,r,s)=>{s.r(r),s.d(r,{VASP:()=>x});var o=s(378),c=s(392);function x(u,p={}){var d=[[]],w={};const C=p.assignBonds===void 0||p.assignBonds;var v=u.replace(/^\s+/,"").split(/\r?\n/);if(v.length<3)return d;if(!v[1].match(/\d+/))return console.log("Warning: second line of the vasp structure file must be a number"),d;if(w.length=parseFloat(v[1]),w.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),d;w.xVec=new Float32Array(v[2].replace(/^\s+/,"").split(/\s+/)),w.yVec=new Float32Array(v[3].replace(/^\s+/,"").split(/\s+/)),w.zVec=new Float32Array(v[4].replace(/^\s+/,"").split(/\s+/));var k=new o.Matrix3(w.xVec[0],w.xVec[1],w.xVec[2],w.yVec[0],w.yVec[1],w.yVec[2],w.zVec[0],w.zVec[1],w.zVec[2]);k.multiplyScalar(w.length),d.modelData=[{symmetries:[],cryst:{matrix:k}}];var H=v[5].trim().split(/\s+/),P=new Int16Array(v[6].trim().split(/\s+/)),j=v[7].trim(),se=!1;if(j.match(/S/)&&(se=!0,j=v[8].trim()),j.toLowerCase()[0]=="c")j="cartesian";else{if(j.toLowerCase()[0]!="d")return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),d;j="direct"}if(H.length!=P.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(H),console.log(P),d;se?v.splice(0,9):v.splice(0,8);for(var ce=0,ne=0,E=H.length;ne<E;ne++){for(var K=H[ne],Y=0,re=P[ne];Y<re;Y++){var ue=new Float32Array(v[ce+Y].trim().split(/\s+/)),q={};q.elem=K,j=="cartesian"?(q.x=w.length*ue[0],q.y=w.length*ue[1],q.z=w.length*ue[2]):(q.x=w.length*(ue[0]*w.xVec[0]+ue[1]*w.yVec[0]+ue[2]*w.zVec[0]),q.y=w.length*(ue[0]*w.xVec[1]+ue[1]*w.yVec[1]+ue[2]*w.zVec[1]),q.z=w.length*(ue[0]*w.xVec[2]+ue[1]*w.yVec[2]+ue[2]*w.zVec[2])),q.bonds=[],q.bondOrder=[],d[0].push(q)}ce+=P[ne]}if(C)for(let he=0;he<d.length;he++)(0,c.assignBonds)(d[he],p);return d}},834:e=>{e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},848:(e,r,s)=>{s.r(r),s.d(r,{VolumeData:()=>d});var o=s(864),c=s(529),x=s(797),u=s(865),p=s(75);class d{constructor(C,v,k){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set(["ccp4","CCP4"]),this.getCoordinates=function(ce){var ne=ce/(this.size.y*this.size.z),E=ce%(this.size.y*this.size.z),K=ce%this.size.z;return ne*=this.unit.x,E*=this.unit.y,K*=this.unit.z,{x:ne+=this.origin.x,y:E+=this.origin.y,z:K+=this.origin.z}},this.vasp=function(ce){var ne=ce.replace(/^\s+/,"").split(/[\n\r]/),E=(0,x.VASP)(ce)[0].length;if(E==0)return console.warn("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),void(this.data=[]);var K,Y=1.889725992,re=parseFloat(ne[1]);K=ne[2].replace(/^\s+/,"").split(/\s+/);var ue=new c.Vector3(parseFloat(K[0]),parseFloat(K[1]),parseFloat(K[2])).multiplyScalar(re*Y);K=ne[3].replace(/^\s+/,"").split(/\s+/);var q=new c.Vector3(parseFloat(K[0]),parseFloat(K[1]),parseFloat(K[2])).multiplyScalar(re*Y);K=ne[4].replace(/^\s+/,"").split(/\s+/);var he=new c.Vector3(parseFloat(K[0]),parseFloat(K[1]),parseFloat(K[2])).multiplyScalar(re*Y),Oe=ue.x*(q.y*he.z-he.y*q.z)-q.x*(ue.y*he.z-he.y*ue.z)+he.x*(ue.y*q.z-q.y*ue.z),be=1/(Oe=Math.abs(Oe)/Math.pow(Y,3));ne.splice(0,8+E+1);var Te=ne[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),Ae=Math.abs(parseFloat(Te[0])),Ve=Math.abs(parseFloat(Te[1])),_e=Math.abs(parseFloat(Te[2])),W=this.origin=new c.Vector3(0,0,0);this.size={x:Ae,y:Ve,z:_e},this.unit=new c.Vector3(ue.x,q.y,he.z),ue=ue.multiplyScalar(1/(Y*Ae)),q=q.multiplyScalar(1/(Y*Ve)),he=he.multiplyScalar(1/(Y*_e)),ue.y==0&&ue.z==0&&q.x==0&&q.z==0&&he.x==0&&he.y==0||(this.matrix=new c.Matrix4(ue.x,q.x,he.x,0,ue.y,q.y,he.y,0,ue.z,q.z,he.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new c.Matrix4().makeTranslation(W.x,W.y,W.z)),this.origin=new c.Vector3(0,0,0),this.unit=new c.Vector3(1,1,1)),ne.splice(0,1);var we=ne.join(" "),ge=(we=we.replace(/^\s+/,"")).split(/[\s\r]+/);ge.splice(Ae*Ve*_e+1);for(var ae=Float32Array.from(ge,parseFloat),Ue=0;Ue<ae.length;Ue++)ae[Ue]=ae[Ue]*be*.036749309;this.data=ae},this.dx=function(ce){var ne,E=ce.split(/[\n\r]+/),K=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,Y=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,re=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,ue=/data follows/,q=0;for(q=0;q<E.length;q++){var he=E[q];if(ne=K.exec(he)){var Oe=parseInt(ne[1]),be=parseInt(ne[2]),Te=parseInt(ne[3]);this.size={x:Oe,y:be,z:Te}}else if(ne=re.exec(he)){var Ae=parseFloat(ne[1]);if(parseFloat(ne[2])==0&&parseFloat(ne[3])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),he=E[q+=1],(ne=re.exec(he))==null)return void console.error("Parse error in dx delta matrix");var Ve=parseFloat(ne[2]);if(parseFloat(ne[1])==0&&parseFloat(ne[3])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),he=E[q+=1],(ne=re.exec(he))==null)return void console.error("Parse error in dx delta matrix");var _e=parseFloat(ne[3]);parseFloat(ne[1])==0&&parseFloat(ne[2])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new c.Vector3(Ae,Ve,_e)}else if(ne=Y.exec(he)){var W=parseFloat(ne[1]),we=parseFloat(ne[2]),ge=parseFloat(ne[3]);this.origin=new c.Vector3(W,we,ge)}else if(ne=ue.exec(he))break}if(q+=1,this.size&&this.origin&&this.unit&&this.size){var ae=E.splice(q).join(" ").split(/[\s\r]+/);this.data=Float32Array.from(ae,parseFloat)}else console.error("Error parsing dx format")},v=v.toLowerCase(),/\.gz$/.test(v)){v=v.replace(/\.gz$/,"");try{this[v]&&this.isbinary.has(v)?(typeof C=="string"&&(C=(0,o.base64ToArray)(C)),C=(0,p.inflate)(C)):C=new TextDecoder("utf-8").decode((0,p.inflate)(C))}catch(ce){console.error(ce)}}if(this[v]&&(this.isbinary.has(v)&&typeof C=="string"&&(C=(0,o.base64ToArray)(C)),this[v](C)),k){if(k.negate)for(let ce=0,ne=this.data.length;ce<ne;ce++)this.data[ce]=-this.data[ce];if(k.normalize){var H=0;for(let ce=0,ne=this.data.length;ce<ne;ce++)H+=this.data[ce];var P=H/this.data.length;H=0;for(let ce=0,ne=this.data.length;ce<ne;ce++){var j=this.data[ce]-P;H+=j*j}var se=H/this.data.length;for(let ce=0,ne=this.data.length;ce<ne;ce++)this.data[ce]=(this.data[ce]-P)/se}}}getIndex(C,v,k){if(this.matrix){this.inversematrix==null&&(this.inversematrix=new c.Matrix4().getInverse(this.matrix));var H=new c.Vector3(C,v,k);C=(H=H.applyMatrix4(this.inversematrix)).x,v=H.y,k=H.z}else C-=this.origin.x,v-=this.origin.y,k-=this.origin.z,C/=this.unit.x,v/=this.unit.y,k/=this.unit.z;return C=Math.round(C),v=Math.round(v),k=Math.round(k),C<0||C>=this.size.x||v<0||v>=this.size.y||k<0||k>=this.size.z?-1:C*this.size.y*this.size.z+v*this.size.z+k}getVal(C,v,k){let H=this.getIndex(C,v,k);return H<0?0:this.data[H]}cube(C){var v=C.split(/\r?\n/);if(!(v.length<6)){var k=(0,u.CUBE)(C,{}).modelData[0].cryst,H=v[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),P=parseFloat(H[0]),j=Math.abs(P);this.origin=k.origin,this.size=k.size,this.unit=k.unit,this.matrix=k.matrix4;var se=6;P<0&&se++;var ce=v.splice(j+se).join(" "),ne=(ce=ce.replace(/^\s+/,"")).split(/[\s\r]+/);this.data=Float32Array.from(ne,parseFloat)}}ccp4(C){var v={};C=new Int8Array(C);var k=new Int32Array(C.buffer,0,56),H=new Float32Array(C.buffer,0,56),P=new DataView(C.buffer);if(v.MAP=String.fromCharCode(P.getUint8(208),P.getUint8(209),P.getUint8(210),P.getUint8(211)),v.MACHST=[P.getUint8(212),P.getUint8(213)],v.MACHST[0]===17&&v.MACHST[1]===17)for(var j=C.byteLength,se=0;se<j;se+=4)P.setFloat32(se,P.getFloat32(se),!0);v.NX=k[0],v.NY=k[1],v.NZ=k[2],v.MODE=k[3],v.NXSTART=k[4],v.NYSTART=k[5],v.NZSTART=k[6],v.MX=k[7],v.MY=k[8],v.MZ=k[9],v.xlen=H[10],v.ylen=H[11],v.zlen=H[12],v.alpha=H[13],v.beta=H[14],v.gamma=H[15],v.MAPC=k[16],v.MAPR=k[17],v.MAPS=k[18],v.DMIN=H[19],v.DMAX=H[20],v.DMEAN=H[21],v.ISPG=k[22],v.NSYMBT=k[23],v.LSKFLG=k[24],v.originX=H[49],v.originY=H[50],v.originZ=H[51],v.ARMS=H[54];var ce=v,ne=[ce.xlen,0,0],E=[ce.ylen*Math.cos(Math.PI/180*ce.gamma),ce.ylen*Math.sin(Math.PI/180*ce.gamma),0],K=[ce.zlen*Math.cos(Math.PI/180*ce.beta),ce.zlen*(Math.cos(Math.PI/180*ce.alpha)-Math.cos(Math.PI/180*ce.gamma)*Math.cos(Math.PI/180*ce.beta))/Math.sin(Math.PI/180*ce.gamma),0];K[2]=Math.sqrt(ce.zlen*ce.zlen*Math.sin(Math.PI/180*ce.beta)*Math.sin(Math.PI/180*ce.beta)-K[1]*K[1]);var Y=[0,ne,E,K],re=[0,ce.MX,ce.MY,ce.MZ],ue=[0,ce.MAPC,ce.MAPR,ce.MAPS];this.matrix=new c.Matrix4,this.matrix.set(Y[ue[1]][0]/re[ue[1]],Y[ue[2]][0]/re[ue[2]],Y[ue[3]][0]/re[ue[3]],0,Y[ue[1]][1]/re[ue[1]],Y[ue[2]][1]/re[ue[2]],Y[ue[3]][1]/re[ue[3]],0,Y[ue[1]][2]/re[ue[1]],Y[ue[2]][2]/re[ue[2]],Y[ue[3]][2]/re[ue[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new c.Matrix4().makeTranslation(ce.NXSTART+ce.originX,ce.NYSTART+ce.originY,ce.NZSTART+ce.originZ)),this.origin=new c.Vector3(0,0,0),this.unit=new c.Vector3(1,1,1),this.size={x:v.NX,y:v.NY,z:v.NZ},this.dimensionorder=[v.MAPC,v.MAPR,v.MAPS];var q=new Float32Array(C.buffer,1024+v.NSYMBT),he=v.NX,Oe=v.NY,be=v.NZ;this.data=new Float32Array(he*Oe*be);for(let Te=0;Te<he;Te++)for(let Ae=0;Ae<Oe;Ae++)for(let Ve=0;Ve<be;Ve++)this.data[(Te*Oe+Ae)*be+Ve]=q[(Ve*Oe+Ae)*he+Te]}}},864:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,inflateString:()=>inflateString,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(546),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(848),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(222),pako__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(75);function extend(e,r){for(var s in r)r.hasOwnProperty(s)&&r[s]!==void 0&&(e[s]=r[s]);return e}function deepCopy(e){let r,s,o;if(e==null)return{};if(typeof e!="object"||e===null)return e;for(o in r=Array.isArray(e)?[]:{},e)s=e[o],r[o]=deepCopy(s);return r}function isNumeric(e){var r=typeof e;return(r==="number"||r==="string")&&!isNaN(e-parseFloat(e))}function isEmptyObject(e){return Object.keys(e).length===0}function makeFunction(callback){return callback&&typeof callback=="string"&&(callback=eval("("+callback+")")),callback&&typeof callback!="function"?(console.warn("Invalid callback provided."),()=>{}):callback}function adjustVolumeStyle(e){e&&(!e.volformat||e.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData||(e.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(e.voldata,e.volformat)),e.volscheme&&(e.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(e.volscheme)))}function getExtent(e,r){var s,o,c,x,u,p,d,w,C,v,k=!r;if(s=o=c=9999,x=u=p=-9999,d=w=C=v=0,e.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var H=0;H<e.length;H++){var P=e[H];if(P!==void 0&&isFinite(P.x)&&isFinite(P.y)&&isFinite(P.z)&&(v++,d+=P.x,w+=P.y,C+=P.z,s=s<P.x?s:P.x,o=o<P.y?o:P.y,c=c<P.z?c:P.z,x=x>P.x?x:P.x,u=u>P.y?u:P.y,p=p>P.z?p:P.z,P.symmetries&&k))for(var j=0;j<P.symmetries.length;j++)v++,d+=P.symmetries[j].x,w+=P.symmetries[j].y,C+=P.symmetries[j].z,s=s<P.symmetries[j].x?s:P.symmetries[j].x,o=o<P.symmetries[j].y?o:P.symmetries[j].y,c=c<P.symmetries[j].z?c:P.symmetries[j].z,x=x>P.symmetries[j].x?x:P.symmetries[j].x,u=u>P.symmetries[j].y?u:P.symmetries[j].y,p=p>P.symmetries[j].z?p:P.symmetries[j].z}return[[s,o,c],[x,u,p],[d/v,w/v,C/v]]}function getPropertyRange(e,r){for(var s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,c=0,x=e.length;c<x;c++){var u=getAtomProperty(e[c],r);u!=null&&(u<s&&(s=u),u>o&&(o=u))}return isFinite(s)||isFinite(o)?isFinite(s)?isFinite(o)||(o=s):s=o:s=o=0,[s,o]}class PausableTimer{constructor(r,s,o){this.total_time_run=0,this.fn=r,this.arg=o,this.countdown=s,this.start_time=new Date().getTime(),this.ident=setTimeout(r,s,o)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(e){for(var r=window.atob(e),s=r.length,o=new Uint8Array(s),c=0;c<s;c++)o[c]=r.charCodeAt(c);return o}function getAtomProperty(e,r){var s=null;return e.properties&&e.properties[r]!==void 0?s=e.properties[r]:e[r]!==void 0&&(s=e[r]),s}function mergeGeos(e,r){var s=r.geometry;s!==void 0&&e.geometryGroups.push(s.geometryGroups[0])}function specStringToObject(e){if(typeof e=="object"||e===void 0||e==null)return e;try{return JSON.parse(e)}catch{}var r=function(k){return isNumeric(k)?Math.floor(parseFloat(k))==parseInt(k)||k.indexOf(".")>=0?parseFloat(k):parseInt(k):k==="true"||k!=="false"&&k},s={};if((e=e.replace(/%7E/g,"~"))==="all")return s;for(var o=e.split(";"),c=0;c<o.length;c++){var x=o[c].split(":"),u=x[0],p={},d=x[1];if(d)if((d=d.replace(/~/g,"=")).indexOf("=")!==-1)for(var w=d.split(","),C=0;C<w.length;C++){var v=w[C].split("=",2);p[v[0]]=r(v[1])}else p=d.indexOf(",")!==-1?d.split(","):r(d);s[u]=p}return s}function checkStatus(e){if(!e.ok)throw new Error(`HTTP ${e.status} - ${e.statusText}`);return e}function get(e,r){var s=fetch(e).then(checkStatus).then(o=>o.text());return r?s.then(r):s}function getbin(e,r,s,o){var c;return c=s=="POST"?fetch(e,{method:"POST",body:o}).then(x=>checkStatus(x)).then(x=>x.arrayBuffer()):fetch(e).then(x=>checkStatus(x)).then(x=>x.arrayBuffer()),r?c.then(r):c}function download(e,r,s,o){var c="",x="",u="",p=null,d=r.addModel();if(e.indexOf(":")<0&&(e=e.length==4?"pdb:"+e:isNaN(e)?"url:"+e:"cid:"+e),e.substring(0,5)=="mmtf:"&&(console.warn("WARNING: MMTF now deprecated.  Reverting to bcif."),e="bcif:"+e.slice(5)),e.substring(0,5)==="bcif:")e=e.substring(5).toUpperCase(),u="https://models.rcsb.org/"+e+".bcif.gz",s&&s.noComputeSecondaryStructure===void 0&&(s.noComputeSecondaryStructure=!0),p=new Promise(function(C){getbin(u).then(function(v){d.addMolData(v,"bcif.gz",s),r.zoomTo(),r.render(),C(d)},function(){console.error("fetch of "+u+" failed.")})});else{if(e.substring(0,4)==="pdb:"){if(c="bcif",s&&s.format&&(c=s.format),s&&s.noComputeSecondaryStructure===void 0&&(s.noComputeSecondaryStructure=!0),!(e=e.substring(4).toUpperCase()).match(/^[1-9][A-Za-z0-9]{3}$/))return void alert("Wrong PDB ID");c=="bcif"?u="https://models.rcsb.org/"+e.toUpperCase()+".bcif.gz":(x=s&&s.pdbUri?s.pdbUri:"https://files.rcsb.org/view/",u=x+e+"."+c)}else if(e.substring(0,4)=="cid:"){if(c="sdf",!(e=e.substring(4)).match(/^[0-9]+$/))return void alert("Wrong Compound ID");u="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+e+"/SDF?record_type=3d"}else e.substring(0,4)=="url:"&&(u=e.substring(4),c=u);var w=function(C){d.addMolData(C,c,s),r.zoomTo(),r.render()};p=new Promise(function(C){c=="bcif"?getbin(u).then(function(v){w(v),C(d)}).catch(function(){x=s&&s.pdbUri?s.pdbUri:"https://files.rcsb.org/view/",u=x+e+".pdb",c="pdb",console.warn("falling back to pdb format"),get(u).then(function(v){w(v),C(d)}).catch(function(v){w(""),C(d),console.error("fetch of "+u+" failed: "+v.statusText)})}):get(u).then(function(v){w(v),C(d)}).catch(function(v){w(""),C(d),console.error("fetch of "+u+" failed: "+v.statusText)})})}return o?(p.then(function(C){o(C)}),d):p}function getColorFromStyle(e,r){let s=r.colorscheme;if(_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s]!==void 0)s=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s];else if(typeof s=="string"&&s.endsWith("Carbon")){let x=s.substring(0,s.lastIndexOf("Carbon")).toLowerCase();if(_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[x]!==void 0){let u=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);u.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[x],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s]={prop:"elem",map:u},s=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[s]}}let o=e.color;if(r.color!==void 0&&r.color!="spectrum"&&(o=r.color),s!==void 0){let x,u;if(_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[s]!==void 0)s=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[s],s[e[s.prop]]!==void 0&&(o=s.map[e[s.prop]]);else if(s[e[s.prop]]!==void 0)o=s.map[e[s.prop]];else if(s.prop!==void 0&&s.gradient!==void 0){x=s.prop;var c=s.gradient;c instanceof _Gradient__WEBPACK_IMPORTED_MODULE_0__.GradientType||(c=(0,_Gradient__WEBPACK_IMPORTED_MODULE_0__.getGradient)(s));let p=c.range()||[-1,1];u=getAtomProperty(e,x),u!=null&&(o=c.valueToHex(u,p))}else s.prop!==void 0&&s.map!==void 0?(x=s.prop,u=getAtomProperty(e,x),s.map[u]!==void 0&&(o=s.map[u])):r.colorscheme[e.elem]!==void 0?o=r.colorscheme[e.elem]:console.warn("Could not interpret colorscheme "+s)}else r.colorfunc!==void 0&&(o=r.colorfunc(e));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(o)}function getElement(e){let r=e;return typeof e=="string"?r=document.querySelector("#"+e):typeof e=="object"&&e.get&&(r=e.get(0)),r}function inflateString(e,r=!0){let s;return s=typeof e=="string"?new TextEncoder().encode(e):new Uint8Array(e),(0,pako__WEBPACK_IMPORTED_MODULE_3__.inflate)(s,{to:r?"string":null})}},865:(e,r,s)=>{s.r(r),s.d(r,{CUBE:()=>u});var o=s(378),c=s(392);const x={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"};function u(p,d){d=d||{};const w=[[]];let C=p.split(/\r?\n/);const v=d.assignBonds===void 0||d.assignBonds;if(C.length<6)return w;let k=C[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const H=Math.abs(parseFloat(k[0]));let P={origin:void 0,size:void 0,unit:void 0,matrix4:void 0,matrix:void 0};const j=P.origin=new o.Vector3(parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3]));k=C[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),k=C[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const se=k[0]>0?.529177:1;j.multiplyScalar(se);const ce=Math.abs(k[0]),ne=new o.Vector3(parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3])).multiplyScalar(se);k=C[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const E=Math.abs(k[0]),K=new o.Vector3(parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3])).multiplyScalar(se);k=C[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const Y=Math.abs(k[0]),re=new o.Vector3(parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3])).multiplyScalar(se);if(P.size={x:ce,y:E,z:Y},P.unit=new o.Vector3(ne.x,K.y,re.z),ne.y!=0||ne.z!=0||K.x!=0||K.z!=0||re.x!=0||re.y!=0){P.matrix4=new o.Matrix4(ne.x,K.x,re.x,0,ne.y,K.y,re.y,0,ne.z,K.z,re.z,0,0,0,0,1);let Te=new o.Matrix4().makeTranslation(j.x,j.y,j.z);P.matrix4=P.matrix4.multiplyMatrices(Te,P.matrix4),P.matrix=P.matrix4.matrix3FromTopLeft(),P.origin=new o.Vector3(0,0,0),P.unit=new o.Vector3(1,1,1)}w.modelData=[{cryst:P}],C=C.splice(6,H);for(var ue=w[w.length-1].length,q=ue+C.length,he=ue;he<q;++he){var Oe={};Oe.serial=he;var be=C[he-ue].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");Oe.elem=x[be[0]],Oe.x=parseFloat(be[2])*se,Oe.y=parseFloat(be[3])*se,Oe.z=parseFloat(be[4])*se,Oe.hetflag=!0,Oe.bonds=[],Oe.bondOrder=[],Oe.properties={},w[w.length-1].push(Oe)}if(v)for(let Te=0;Te<w.length;Te++)(0,c.assignBonds)(w[Te],d);return w}},972:(e,r,s)=>{var o=s(981),c=!0,x=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{x=!1}for(var u=new o.Buf8(256),p=0;p<256;p++)u[p]=p>=252?6:p>=248?5:p>=240?4:p>=224?3:p>=192?2:1;function d(w,C){if(C<65534&&(w.subarray&&x||!w.subarray&&c))return String.fromCharCode.apply(null,o.shrinkBuf(w,C));for(var v="",k=0;k<C;k++)v+=String.fromCharCode(w[k]);return v}u[254]=u[254]=1,r.string2buf=function(w){var C,v,k,H,P,j=w.length,se=0;for(H=0;H<j;H++)(64512&(v=w.charCodeAt(H)))==55296&&H+1<j&&(64512&(k=w.charCodeAt(H+1)))==56320&&(v=65536+(v-55296<<10)+(k-56320),H++),se+=v<128?1:v<2048?2:v<65536?3:4;for(C=new o.Buf8(se),P=0,H=0;P<se;H++)(64512&(v=w.charCodeAt(H)))==55296&&H+1<j&&(64512&(k=w.charCodeAt(H+1)))==56320&&(v=65536+(v-55296<<10)+(k-56320),H++),v<128?C[P++]=v:v<2048?(C[P++]=192|v>>>6,C[P++]=128|63&v):v<65536?(C[P++]=224|v>>>12,C[P++]=128|v>>>6&63,C[P++]=128|63&v):(C[P++]=240|v>>>18,C[P++]=128|v>>>12&63,C[P++]=128|v>>>6&63,C[P++]=128|63&v);return C},r.buf2binstring=function(w){return d(w,w.length)},r.binstring2buf=function(w){for(var C=new o.Buf8(w.length),v=0,k=C.length;v<k;v++)C[v]=w.charCodeAt(v);return C},r.buf2string=function(w,C){var v,k,H,P,j=C||w.length,se=new Array(2*j);for(k=0,v=0;v<j;)if((H=w[v++])<128)se[k++]=H;else if((P=u[H])>4)se[k++]=65533,v+=P-1;else{for(H&=P===2?31:P===3?15:7;P>1&&v<j;)H=H<<6|63&w[v++],P--;P>1?se[k++]=65533:H<65536?se[k++]=H:(H-=65536,se[k++]=55296|H>>10&1023,se[k++]=56320|1023&H)}return d(se,k)},r.utf8border=function(w,C){var v;for((C=C||w.length)>w.length&&(C=w.length),v=C-1;v>=0&&(192&w[v])==128;)v--;return v<0||v===0?C:v+u[w[v]]>C?v:C}},981:(e,r)=>{var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function o(u,p){return Object.prototype.hasOwnProperty.call(u,p)}r.assign=function(u){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var d=p.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var w in d)o(d,w)&&(u[w]=d[w])}}return u},r.shrinkBuf=function(u,p){return u.length===p?u:u.subarray?u.subarray(0,p):(u.length=p,u)};var c={arraySet:function(u,p,d,w,C){if(p.subarray&&u.subarray)u.set(p.subarray(d,d+w),C);else for(var v=0;v<w;v++)u[C+v]=p[d+v]},flattenChunks:function(u){var p,d,w,C,v,k;for(w=0,p=0,d=u.length;p<d;p++)w+=u[p].length;for(k=new Uint8Array(w),C=0,p=0,d=u.length;p<d;p++)v=u[p],k.set(v,C),C+=v.length;return k}},x={arraySet:function(u,p,d,w,C){for(var v=0;v<w;v++)u[C+v]=p[d+v]},flattenChunks:function(u){return[].concat.apply([],u)}};r.setTyped=function(u){u?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,c)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,x))},r.setTyped(s)}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];if(r!==void 0)return r.exports;var s=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(s.exports,s,s.exports,__webpack_require__),s.exports}__webpack_require__.d=(e,r)=>{for(var s in r)__webpack_require__.o(r,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:r[s]})},__webpack_require__.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),__webpack_require__.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__(16),__webpack_require__(185);var __webpack_exports__=__webpack_require__(307);return __webpack_exports__})(),module.exports=factory()})(_3DmolMin)),_3DmolMin.exports}require_3DmolMin();const covalentRadii={H:.31,He:.28,Li:1.28,Be:.96,B:.84,C:.76,N:.71,O:.66,F:.57,Ne:.58,Na:1.66,Mg:1.41,Al:1.21,Si:1.11,P:1.07,S:1.05,Cl:1.02,Ar:1.06,K:2.03,Ca:1.76,Sc:1.7,Ti:1.6,V:1.53,Cr:1.39,Mn:1.61,Fe:1.52,Co:1.5,Ni:1.24,Cu:1.32,Zn:1.22,Ga:1.22,Ge:1.2,As:1.19,Se:1.2,Br:1.2,Kr:1.16,Rb:2.2,Sr:1.95,Y:1.9,Zr:1.75,Nb:1.64,Mo:1.54,Tc:1.47,Ru:1.46,Rh:1.42,Pd:1.39,Ag:1.45,Cd:1.44,In:1.42,Sn:1.39,Sb:1.39,Te:1.38,I:1.39,Xe:1.4,Cs:2.44,Ba:2.15,La:2.07,Ce:2.04,Pr:2.03,Nd:2.01,Pm:1.99,Sm:1.98,Eu:1.98,Gd:1.96,Tb:1.94,Dy:1.92,Ho:1.92,Er:1.89,Tm:1.9,Yb:1.87,Lu:1.75,Hf:1.87,Ta:1.7,W:1.62,Re:1.51,Os:1.44,Ir:1.41,Pt:1.36,Au:1.36,Hg:1.32,Tl:1.45,Pb:1.46,Bi:1.48,Po:1.4,At:1.5,Rn:1.5,Fr:2.6,Ra:2.21,Ac:2.15,Th:2.06,Pa:2,U:1.96,Np:1.9,Pu:1.87,Am:1.8,Cm:1.69},$3Dmol$1=window.$3Dmol;function mod(e,r){return(e%r+r)%r}function setCustomBondLengths(){function e(r,s){$3Dmol$1.setBondLength(r,s)}Object.keys(covalentRadii).forEach(r=>{e(r,1.05*covalentRadii[r])})}const Visualizer3dmol=reactExports.forwardRef(({viewerParams:e,cifText:r},s)=>{const o=reactExports.useRef(null),c=reactExports.useRef(null),x=reactExports.useRef("gldiv-"+(Math.random()+1).toString(36).substring(7));reactExports.useEffect(()=>{setCustomBondLengths()},[]);const u=()=>{if(c.current=o.current.addModel(),r){let w=$3Dmol$1.Parsers.CIF(r),C=w[0],v=w.modelData[0].cryst;c.current.setCrystData(v.a,v.b,v.c,v.alpha,v.beta,v.gamma);let k=c.current.modelData.cryst.matrix,H=new $3Dmol$1.Matrix3().getInverse3(k),P=[],j=[];C.forEach(ne=>{let E=new $3Dmol$1.Vector3(ne.x,ne.y,ne.z);if(e.packedCell){let K=E.clone().applyMatrix3(H);E=new $3Dmol$1.Vector3(mod(K.x,1),mod(K.y,1),mod(K.z,1)).applyMatrix3(k)}j.push({elem:ne.elem,x:E.x,y:E.y,z:E.z})});let se=.03,ce=e.supercell;for(let ne=-1;ne<ce[0]+1;ne++)for(let E=-1;E<ce[1]+1;E++)for(let K=-1;K<ce[2]+1;K++){let Y=new $3Dmol$1.Vector3(ne,E,K);if(Y.applyMatrix3(k),ne==-1||ne==ce[0]||E==-1||E==ce[1]||K==-1||K==ce[2])if(e.packedCell)j.forEach(re=>{let ue=new $3Dmol$1.Vector3(re.x,re.y,re.z);ue.add(Y);let q=ue.clone().applyMatrix3(H);q.x>-se&&q.x<ce[0]+se&&q.y>-se&&q.y<ce[1]+se&&q.z>-se&&q.z<ce[2]+se&&P.push({elem:re.elem,x:ue.x,y:ue.y,z:ue.z})});else continue;else j.forEach(re=>{P.push({elem:re.elem,x:re.x+Y.x,y:re.y+Y.y,z:re.z+Y.z})})}c.current.addAtoms(P)}},p=()=>{o.current.removeAllModels(),u();let w={sphere:{scale:.3,colorscheme:"Jmol"}};e.vdwRadius&&(w.sphere.scale=1),e.bonds&&(w.stick={radius:.15,colorscheme:"Jmol"}),o.current.setStyle(w),o.current.addUnitCell(c.current),c.current.assignBonds(),o.current.removeAllLabels(),e.atomLabels&&c.current.atoms.forEach(C=>{o.current.addLabel(C.elem,{position:{x:C.x,y:C.y,z:C.z},fontColor:"black",bold:!0,fontSize:18,showBackground:!1,backgroundOpacity:1,inFront:!0},null,!0)}),o.current.zoomTo(),o.current.zoom(1.4),o.current.render()},d=(w,C)=>{w=="camera"&&(C=="x"&&o.current.setView([0,0,0,0,-.5,-.5,-.5,.5]),C=="y"&&o.current.setView([0,0,0,0,.5,.5,.5,.5]),C=="z"&&o.current.setView([0,0,0,0,0,0,0,1]),o.current.zoomTo(),o.current.zoom(1.4))};return reactExports.useImperativeHandle(s,()=>({handleEvent:d})),reactExports.useEffect(()=>{let w={backgroundColor:"white",orthographic:!0};o.current=$3Dmol$1.createViewer(x.current,w),p()},[]),reactExports.useEffect(()=>{o.current&&p()},[e,r]),jsxRuntimeExports.jsx("div",{id:x.current,className:"gldiv",children:"No data!"})});Visualizer3dmol.displayName="Visualizer3dmol";const StructureWindow=({mouseEnabled:e,setMouseEnabledState:r,visualizerRef:s,viewerParams:o,cifText:c})=>{let x="structure-window";e||(x+=" disable-mouse");let u="Click to interact",p="mouse-disabled-note";return e&&(p="mouse-disabled-note on"),jsxRuntimeExports.jsxs("div",{className:"structure-window-outer",children:[jsxRuntimeExports.jsx("div",{className:"structure-window-click-handler",onClick:()=>r(!0),children:jsxRuntimeExports.jsx("div",{className:x,children:jsxRuntimeExports.jsx(Visualizer3dmol,{ref:s,viewerParams:o,cifText:c})})}),jsxRuntimeExports.jsx("div",{className:p,onClick:()=>r(!e),children:u})]})},StructureVisualizer=e=>{const[r,s]=reactExports.useState({supercell:e.initSupercell||[2,2,2],bonds:!0,packedCell:!0,atomLabels:!1,vdwRadius:!1}),[o,c]=reactExports.useState(!1),x=reactExports.useRef(null),u=reactExports.useRef(null);reactExports.useEffect(()=>{const C=v=>{u&&!u.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[]);const p=C=>{c(C)},d=(C,v)=>{s(k=>({...k,[C]:v}))},w=(C,v)=>{x.current.handleEvent(C,v)};return jsxRuntimeExports.jsxs("div",{ref:u,className:"structure-visualizer",children:[jsxRuntimeExports.jsx(StructureWindow,{visualizerRef:x,viewerParams:r,cifText:e.cifText,mouseEnabled:o,setMouseEnabledState:p}),jsxRuntimeExports.jsx(ControlBox,{viewerParams:r,onViewerParamChange:d,onViewerEvent:w})]})};function DownloadIcon({size:e=14,className:r=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[jsxRuntimeExports.jsx("path",{d:"M12 15V3"}),jsxRuntimeExports.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),jsxRuntimeExports.jsx("path",{d:"m7 10 5 5 5-5"})]})}function NextIcon({size:e=14,className:r=""}){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,hegiht:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:jsxRuntimeExports.jsx("path",{d:"m9 18 6-6-6-6"})})}function PreviousIcon({size:e=14,className:r=""}){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,hegiht:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:jsxRuntimeExports.jsx("path",{d:"m15 18-6-6 6-6"})})}function FirstIcon({size:e=14,className:r=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,hegiht:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[jsxRuntimeExports.jsx("path",{d:"m17 18-6-6 6-6"}),jsxRuntimeExports.jsx("path",{d:"M7 6v12"})]})}function LastIcon({size:e=14,className:r=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,hegiht:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[jsxRuntimeExports.jsx("path",{d:"m7 18 6-6-6-6"}),jsxRuntimeExports.jsx("path",{d:"M17 6v12"})]})}class y{constructor(r,s,o={}){this.speciesIndex=r,this.cart=s,this.props=o}getProp(r){return this.props[r]}setProp(r,s){this.props[r]=s}}function A(e){return e.sites.some(r=>Array.isArray(r.props.selectiveDynamics))}class S{constructor({lattice:r,species:s,sites:o}){this.lattice=this._validateLattice(r),this.species=this._validateSpecies(s),this.sites=this._validateSites(o)}get numSites(){return this.sites.length}site(r){return this.sites[r]}cartCoords(r){return this.sites[r].cart}siteSpecies(r){return this.species[this.sites[r].speciesIndex]}get elements(){return this.species}addSite(r,s){this._validateSpeciesIndex(r),this.sites.push(new y(r,s))}removeSite(r){this.sites.splice(r,1)}_validateLattice(r){if(!Array.isArray(r)||r.length!==3)throw new Error("Lattice must be a 3x3 matrix");return r.forEach(s=>{if(!Array.isArray(s)||s.length!==3)throw new Error("Lattice vectors must be length 3")}),r}_validateSpecies(r){if(!Array.isArray(r))throw new Error("Species must be an array");return r.forEach(s=>{if(typeof s!="string")throw new Error("Species entries must be strings")}),r}_validateSites(r){if(!Array.isArray(r))throw new Error("Sites must be an array");return r.map(s=>{if(s instanceof y)return s;if(typeof s=="object"&&typeof s.speciesIndex=="number"&&Array.isArray(s.cart)&&s.cart.length===3)return this._validateSpeciesIndex(s.speciesIndex),new y(s.speciesIndex,s.cart,s.props??{});throw new Error("Each site must be a Site instance or a valid site object")})}_validateSpeciesIndex(r){if(r<0||r>=this.species.length)throw new Error("speciesIndex out of bounds")}}function D(e){const r=[],s=A(e);r.push("Generated by matsci-parse"),r.push("1.0"),e.lattice.forEach(x=>{r.push(x.map(u=>u.toFixed(10)).join(" "))});const o=Array.from(new Set(e.sites.map(x=>e.species[x.speciesIndex]))),c=o.map(x=>e.sites.filter(u=>e.species[u.speciesIndex]===x).length);return r.push(o.join(" ")),r.push(c.join(" ")),s&&r.push("Selective dynamics"),r.push("Cartesian"),o.forEach(x=>{e.sites.filter(u=>e.species[u.speciesIndex]===x).forEach(u=>{const p=u.cart.map(d=>d.toFixed(10)).join(" ");if(s){const d=(Array.isArray(u.props?.selectiveDynamics)?u.props.selectiveDynamics:[!0,!0,!0]).map(w=>w?"T":"F").join(" ");r.push(`${p} ${d}`)}else r.push(p)})}),r.join(`
`)}function R(e){const r=[];return r.push("CRYSTAL"),r.push("PRIMVEC"),e.lattice.forEach(s=>{r.push(s.map(o=>o.toFixed(10)).join(" "))}),r.push("PRIMCOORD"),r.push(`${e.numSites} 1`),e.sites.forEach(s=>{const o=e.species[s.speciesIndex];r.push(`${o} ${s.cart.map(c=>c.toFixed(10)).join(" ")}`)}),r.join(`
`)}function O(e){const r=[],s=e.sites.length;r.push(String(s));const o=A(e),c=e.lattice,x=[c[0][0],c[1][0],c[2][0],c[0][1],c[1][1],c[2][1],c[0][2],c[1][2],c[2][2]].join(" "),u=["species:S:1","pos:R:3",o?"selectiveDynamics:L:3":null].filter(Boolean).join(":");r.push(`Lattice="${x}" Properties=${u}`);for(const p of e.sites){const d=e.species[p.speciesIndex],[w,C,v]=p.cart;let k=`${d} ${w.toFixed(10)} ${C.toFixed(10)} ${v.toFixed(10)}`;if(o){const H=Array.isArray(p.props?.selectiveDynamics)?p.props.selectiveDynamics:[!0,!0,!0];k+=" "+H.map(P=>P?"T":"F").join(" ")}r.push(k)}return r.join(`
`)}function F(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}function M(e){return Math.sqrt(F(e,e))}function $(e){return e*180/Math.PI}function L(e,r){const[s,o,c]=r,x=s[0]*(o[1]*c[2]-o[2]*c[1])-s[1]*(o[0]*c[2]-o[2]*c[0])+s[2]*(o[0]*c[1]-o[1]*c[0]);if(Math.abs(x)<1e-12)throw new Error("Singular lattice matrix");const u=[[(o[1]*c[2]-o[2]*c[1])/x,(s[2]*c[1]-s[1]*c[2])/x,(s[1]*o[2]-s[2]*o[1])/x],[(o[2]*c[0]-o[0]*c[2])/x,(s[0]*c[2]-s[2]*c[0])/x,(s[2]*o[0]-s[0]*o[2])/x],[(o[0]*c[1]-o[1]*c[0])/x,(s[1]*c[0]-s[0]*c[1])/x,(s[0]*o[1]-s[1]*o[0])/x]];return[e[0]*u[0][0]+e[1]*u[1][0]+e[2]*u[2][0],e[0]*u[0][1]+e[1]*u[1][1]+e[2]*u[2][1],e[0]*u[0][2]+e[1]*u[1][2]+e[2]*u[2][2]]}function N(e){const[r,s,o]=e.lattice,c=M(r),x=M(s),u=M(o),p=$(Math.acos(F(s,o)/(x*u))),d=$(Math.acos(F(r,o)/(c*u))),w=$(Math.acos(F(r,s)/(c*x)));let C=`data_made_with_matsci-parse
    _symmetry_space_group_name_H-M   'P 1'
    _symmetry_Int_Tables_number    1

    _cell_length_a   ${c.toFixed(6)}
    _cell_length_b   ${x.toFixed(6)}
    _cell_length_c   ${u.toFixed(6)}
    _cell_angle_alpha   ${p.toFixed(6)}
    _cell_angle_beta    ${d.toFixed(6)}
    _cell_angle_gamma   ${w.toFixed(6)}

    loop_
    _atom_site_label
    _atom_site_type_symbol
    _atom_site_fract_x
    _atom_site_fract_y
    _atom_site_fract_z
`;return e.sites.forEach((v,k)=>{const H=e.species[v.speciesIndex],P=L(v.cart,e.lattice);C+=`${H}${k+1} ${H} ${P[0].toFixed(6)} ${P[1].toFixed(6)} ${P[2].toFixed(6)}
`}),C}const baseButtonStyle=`px-2 py-1 md:px-3 md:py-1.5 rounded
 bg-blue-600 text-white 
 hover:bg-blue-700 hover:cursor-pointer
`,defaultFormats=[{format:"json",label:"JSON"},{format:"cif",label:"CIF"},{format:"xyz",label:"XYZ"},{format:"xsf",label:"XSF"},{format:"poscar",label:"VASP"}];function downloadFile(e,r){const s=new Blob([e],{type:"text/plain"}),o=URL.createObjectURL(s),c=document.createElement("a");c.href=o,c.download=r,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(o)}function StructureDownload({OptimadeStructure:e,download_formats:r}){const[s,o]=reactExports.useState(!1),c=reactExports.useRef(null),x=r||defaultFormats,u=e.attributes.lattice_vectors,p=e?.attributes?.cartesian_site_positions||[],d=e.attributes.species_at_sites,w=p.map((k,H)=>{const P=d[H],j=d.indexOf(P);return new y(j,[k[0],k[1],k[2]])}),C=new S({lattice:u,species:d,sites:w}),v=k=>{let H="",P="structure";k==="cif"?(H=N(C),P+=".cif"):k==="xyz"?(H=O(C),P+=".xyz"):k==="poscar"?(H=D(C),P+=".vasp"):k==="xsf"?(H=R(C),P+=".xsf"):k==="json"&&(H=JSON.stringify(e,null,2),P+=".json"),H&&downloadFile(H,P),o(!1)};return reactExports.useEffect(()=>{const k=H=>{c.current&&!c.current.contains(H.target)&&o(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]),jsxRuntimeExports.jsxs("div",{className:"relative inline-block",ref:c,children:[jsxRuntimeExports.jsx("div",{onClick:()=>o(k=>!k),className:`${baseButtonStyle} ${textSmall} py-2! px-2!`,title:"Download",children:jsxRuntimeExports.jsx(DownloadIcon,{})}),s&&jsxRuntimeExports.jsx("div",{className:"absolute right-0 mt-0.5 bg-white rounded-sm shadow-sm ring-1 ring-slate-500 z-100",children:jsxRuntimeExports.jsx("ul",{children:x.map(({format:k,label:H})=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{onClick:()=>v(k),className:`${textSmall} w-full text-left px-3 py-1.25 text-slate-700 hover:bg-gray-100 hover:cursor-pointer`,children:H})},k))})})]})}function optimadeToCrystalStructure(e){if(!e||!e.attributes)throw new Error("Invalid OPTIMADE object");const r=e.attributes.lattice_vectors,s=e.attributes.cartesian_site_positions,o=e.attributes.species_at_sites;if(!r||!s||!o)throw new Error("Malformed OPTIMADE structure");const c=[],x=new Map;o.forEach(p=>{x.has(p)||(x.set(p,c.length),c.push(p))});const u=s.map((p,d)=>{const w=o[d],C=x.get(w);return new y(C,[p[0],p[1],p[2]],{})});return new S({lattice:r,species:c,sites:u})}function StructureViewerWithDownload({OptimadeStructure:e}){let r=null,s="",o=!1;try{e?(r=optimadeToCrystalStructure(e),s=r?N(r):""):o=!0}catch(c){console.error("Failed to parse OptimadeStructure:",c),o=!0}return o||!e?.attributes?.cartesian_site_positions?jsxRuntimeExports.jsx("div",{className:`${containerStyle} min-h-[450px] flex items-center justify-center`,children:jsxRuntimeExports.jsxs("div",{className:textError,children:[jsxRuntimeExports.jsx("p",{children:"Unexpected or malformed data format found."}),jsxRuntimeExports.jsx("p",{children:"--"}),jsxRuntimeExports.jsx("p",{children:"Crystal structure rendering skipped..."})]})}):jsxRuntimeExports.jsxs("div",{className:"relative min-h-[450px]",children:[jsxRuntimeExports.jsx("div",{className:"w-full h-[450px]",children:jsxRuntimeExports.jsx(StructureVisualizer,{cifText:s},s)}),jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2 z-10",children:jsxRuntimeExports.jsx(StructureDownload,{OptimadeStructure:e})})]})}function QEInputButton({cifText:e}){const r="https://qeinputgenerator.materialscloud.io",s=async()=>{if(!e){alert("No CIF data available");return}const o=window.open("","_blank");try{const c=new FormData;c.append("fileformat","cif-ase"),c.append("structurefile",new Blob([e],{type:"text/plain;charset=utf-8"}),"structure.cif");const x=await fetch(`${r}/compute/upload_structure/`,{method:"POST",body:c});if(!x.ok)throw new Error(`Upload failed: ${x.statusText}`);const u=await x.json();u.redirect?o.location=`${r}${u.redirect}`:(o.close(),alert("Unexpected response from server"))}catch(c){console.error(c),o.close(),alert("Failed to upload structure.")}};return jsxRuntimeExports.jsx("button",{onClick:s,disabled:!e,title:"Use the chosen structure in the QE Input Generator Tool",className:`${baseButtonStyle} ${textNormal}`,children:"Use in QE Input Generator"})}function ResultViewer({selectedResult:e}){const{structureData:r,cifText:s}=reactExports.useMemo(()=>{if(!e)return{structureData:null,cifText:""};try{const o=optimadeToCrystalStructure(e),c=o?N(o):"";return{structureData:o,cifText:c}}catch(o){return console.error("Failed to convert selectedResult:",o),{structureData:null,cifText:""}}},[e]);return jsxRuntimeExports.jsx("div",{className:"w-full flex flex-col",children:e?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"@container w-full flex flex-col md:flex-row gap-2 md:gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-full md:w-1/2",children:jsxRuntimeExports.jsx(StructureViewerWithDownload,{OptimadeStructure:e})}),jsxRuntimeExports.jsx("div",{className:containerStyleHalf,children:jsxRuntimeExports.jsx(JsonView,{data:e,compactTopLevel:!0,shouldExpandNode:o=>o<2,style:{backgroundColor:""}})})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 md:mt-4 flex justify-center",children:jsxRuntimeExports.jsx(QEInputButton,{cifText:s})})]}):null})}const corsProxies=[{name:"cors-materialscloud",urlRule:e=>`https://cors.materialscloud.org/${e}`}],elements=[{num:1,sym:"H",row:1,col:1,group:"group1"},{num:2,sym:"He",row:1,col:18,group:"group18"},{num:3,sym:"Li",row:2,col:1,group:"group1"},{num:4,sym:"Be",row:2,col:2,group:"group2"},{num:5,sym:"B",row:2,col:13,group:"metalloid"},{num:6,sym:"C",row:2,col:14,group:"mainGroup"},{num:7,sym:"N",row:2,col:15,group:"mainGroup"},{num:8,sym:"O",row:2,col:16,group:"mainGroup"},{num:9,sym:"F",row:2,col:17,group:"group17"},{num:10,sym:"Ne",row:2,col:18,group:"group18"},{num:11,sym:"Na",row:3,col:1,group:"group1"},{num:12,sym:"Mg",row:3,col:2,group:"group2"},{num:13,sym:"Al",row:3,col:13,group:"postTransition"},{num:14,sym:"Si",row:3,col:14,group:"metalloid"},{num:15,sym:"P",row:3,col:15,group:"mainGroup"},{num:16,sym:"S",row:3,col:16,group:"mainGroup"},{num:17,sym:"Cl",row:3,col:17,group:"group17"},{num:18,sym:"Ar",row:3,col:18,group:"group18"},{num:19,sym:"K",row:4,col:1,group:"group1"},{num:20,sym:"Ca",row:4,col:2,group:"group2"},{num:21,sym:"Sc",row:4,col:3,group:"transition"},{num:22,sym:"Ti",row:4,col:4,group:"transition"},{num:23,sym:"V",row:4,col:5,group:"transition"},{num:24,sym:"Cr",row:4,col:6,group:"transition"},{num:25,sym:"Mn",row:4,col:7,group:"transition"},{num:26,sym:"Fe",row:4,col:8,group:"transition"},{num:27,sym:"Co",row:4,col:9,group:"transition"},{num:28,sym:"Ni",row:4,col:10,group:"transition"},{num:29,sym:"Cu",row:4,col:11,group:"transition"},{num:30,sym:"Zn",row:4,col:12,group:"transition"},{num:31,sym:"Ga",row:4,col:13,group:"postTransition"},{num:32,sym:"Ge",row:4,col:14,group:"metalloid"},{num:33,sym:"As",row:4,col:15,group:"metalloid"},{num:34,sym:"Se",row:4,col:16,group:"mainGroup"},{num:35,sym:"Br",row:4,col:17,group:"group17"},{num:36,sym:"Kr",row:4,col:18,group:"group18"},{num:37,sym:"Rb",row:5,col:1,group:"group1"},{num:38,sym:"Sr",row:5,col:2,group:"group2"},{num:39,sym:"Y",row:5,col:3,group:"transition"},{num:40,sym:"Zr",row:5,col:4,group:"transition"},{num:41,sym:"Nb",row:5,col:5,group:"transition"},{num:42,sym:"Mo",row:5,col:6,group:"transition"},{num:43,sym:"Tc",row:5,col:7,group:"transition"},{num:44,sym:"Ru",row:5,col:8,group:"transition"},{num:45,sym:"Rh",row:5,col:9,group:"transition"},{num:46,sym:"Pd",row:5,col:10,group:"transition"},{num:47,sym:"Ag",row:5,col:11,group:"transition"},{num:48,sym:"Cd",row:5,col:12,group:"transition"},{num:49,sym:"In",row:5,col:13,group:"postTransition"},{num:50,sym:"Sn",row:5,col:14,group:"postTransition"},{num:51,sym:"Sb",row:5,col:15,group:"metalloid"},{num:52,sym:"Te",row:5,col:16,group:"metalloid"},{num:53,sym:"I",row:5,col:17,group:"group17"},{num:54,sym:"Xe",row:5,col:18,group:"group18"},{num:55,sym:"Cs",row:6,col:1,group:"group1"},{num:56,sym:"Ba",row:6,col:2,group:"group2"},{num:72,sym:"Hf",row:6,col:4,group:"transition"},{num:73,sym:"Ta",row:6,col:5,group:"transition"},{num:74,sym:"W",row:6,col:6,group:"transition"},{num:75,sym:"Re",row:6,col:7,group:"transition"},{num:76,sym:"Os",row:6,col:8,group:"transition"},{num:77,sym:"Ir",row:6,col:9,group:"transition"},{num:78,sym:"Pt",row:6,col:10,group:"transition"},{num:79,sym:"Au",row:6,col:11,group:"transition"},{num:80,sym:"Hg",row:6,col:12,group:"transition"},{num:81,sym:"Tl",row:6,col:13,group:"postTransition"},{num:82,sym:"Pb",row:6,col:14,group:"postTransition"},{num:83,sym:"Bi",row:6,col:15,group:"postTransition"},{num:84,sym:"Po",row:6,col:16,group:"postTransition"},{num:85,sym:"At",row:6,col:17,group:"group17"},{num:86,sym:"Rn",row:6,col:18,group:"group18"},{num:87,sym:"Fr",row:7,col:1,group:"group1"},{num:88,sym:"Ra",row:7,col:2,group:"group2"},{num:104,sym:"Rf",row:7,col:4,group:"transition"},{num:105,sym:"Db",row:7,col:5,group:"transition"},{num:106,sym:"Sg",row:7,col:6,group:"transition"},{num:107,sym:"Bh",row:7,col:7,group:"transition"},{num:108,sym:"Hs",row:7,col:8,group:"transition"},{num:109,sym:"Mt",row:7,col:9,group:"bg-lime-200"},{num:110,sym:"Ds",row:7,col:10,group:"bg-lime-200"},{num:111,sym:"Rg",row:7,col:11,group:"bg-lime-200"},{num:112,sym:"Cn",row:7,col:12,group:"bg-lime-200"},{num:113,sym:"Nh",row:7,col:13,group:"bg-lime-200"},{num:114,sym:"Fl",row:7,col:14,group:"bg-lime-200"},{num:115,sym:"Mc",row:7,col:15,group:"bg-lime-200"},{num:116,sym:"Lv",row:7,col:16,group:"bg-lime-200"},{num:117,sym:"Ts",row:7,col:17,group:"bg-lime-200"},{num:118,sym:"Og",row:7,col:18,group:"bg-lime-200"},{num:57,sym:"La",row:12,col:3,group:"lanthanide"},{num:58,sym:"Ce",row:12,col:4,group:"lanthanide"},{num:59,sym:"Pr",row:12,col:5,group:"lanthanide"},{num:60,sym:"Nd",row:12,col:6,group:"lanthanide"},{num:61,sym:"Pm",row:12,col:7,group:"lanthanide"},{num:62,sym:"Sm",row:12,col:8,group:"lanthanide"},{num:63,sym:"Eu",row:12,col:9,group:"lanthanide"},{num:64,sym:"Gd",row:12,col:10,group:"lanthanide"},{num:65,sym:"Tb",row:12,col:11,group:"lanthanide"},{num:66,sym:"Dy",row:12,col:12,group:"lanthanide"},{num:67,sym:"Ho",row:12,col:13,group:"lanthanide"},{num:68,sym:"Er",row:12,col:14,group:"lanthanide"},{num:69,sym:"Tm",row:12,col:15,group:"lanthanide"},{num:70,sym:"Yb",row:12,col:16,group:"lanthanide"},{num:71,sym:"Lu",row:12,col:17,group:"lanthanide"},{num:89,sym:"Ac",row:13,col:3,group:"actinide"},{num:90,sym:"Th",row:13,col:4,group:"actinide"},{num:91,sym:"Pa",row:13,col:5,group:"actinide"},{num:92,sym:"U",row:13,col:6,group:"actinide"},{num:93,sym:"Np",row:13,col:7,group:"actinide"},{num:94,sym:"Pu",row:13,col:8,group:"actinide"},{num:95,sym:"Am",row:13,col:9,group:"actinide"},{num:96,sym:"Cm",row:13,col:10,group:"actinide"},{num:97,sym:"Bk",row:13,col:11,group:"actinide"},{num:98,sym:"Cf",row:13,col:12,group:"actinide"},{num:99,sym:"Es",row:13,col:13,group:"actinide"},{num:100,sym:"Fm",row:13,col:14,group:"actinide"},{num:101,sym:"Md",row:13,col:15,group:"actinide"},{num:102,sym:"No",row:13,col:16,group:"actinide"},{num:103,sym:"Lr",row:13,col:17,group:"actinide"}];async function fetchWithCorsFallback(e){const r=[{name:"direct",url:e},...corsProxies.map(s=>({name:s.name,url:s.urlRule(e)}))];for(const{url:s}of r)try{const o=await fetch(s);if(!o.ok)continue;return await o.json()}catch{continue}throw new Error("All fetch attempts failed")}async function getProvidersList(e="https://raw.githubusercontent.com/Materials-Consortia/providers/refs/heads/master/src/links/v1/providers.json",r=[]){async function s(x){const u=await fetch(x);if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);return await u.json()}let o;try{o=await s(e)}catch(x){console.warn("Remote fetch failed, falling back to cachedProviders.json:",x);try{o=await s("cachedProviders.json")}catch(u){throw console.error("Both remote and local fetches failed:",u),u}}const c=o.data.filter(x=>!r.includes(x.id));return{...o,data:c}}async function getProviderLinks(e){try{return{children:((await fetchWithCorsFallback(`${e}/v1/links`)).data||[]).filter(o=>o.attributes?.link_type==="child"),error:null}}catch(r){return{children:[],error:r}}}async function getCustomInfo({baseUrl:e}){try{const r=await fetchWithCorsFallback(`${e}/info/`);if(!r||!r.meta)throw new Error("Invalid OPTIMADE response");return{meta:r.meta}}catch(r){throw r}}async function getInfo({providerUrl:e}){try{const s=(await fetchWithCorsFallback(`${e}/info/structures`)).data?.properties??{};return{customProps:Object.fromEntries(Object.entries(s).filter(([c])=>c.startsWith("_"))),allProps:s,error:null}}catch(r){return{customProps:{},allProps:{},error:r}}}async function getStructures({providerUrl:e,filter:r="",page:s=1,pageSize:o=20}){if(!e)throw new Error("Provider URL is required");await new Promise(se=>setTimeout(se,1e3));const c=["cartesian_site_positions","species_at_sites","lattice_vectors","chemical_formula_descriptive","chemical_formula_hill"],x=(s-1)*o,u=r?`?filter=${encodeURIComponent(r)}&page_offset=${x}`:`?page_offset=${x}`,p=`${e}/v1/structures${u}`;let d;try{d=await fetchWithCorsFallback(p,corsProxies)}catch{throw new Error("Failed to fetch base structures")}const w=d?.data??[];if(!w.length)return d;const C=w[0].attributes??{},v=new Set(Object.keys(C)),k=c.filter(se=>!v.has(se));if(!k.length)return d;const H=`${e}/v1/structures${u}&response_fields=${k.join(",")}`;let P;try{P=await fetchWithCorsFallback(H,corsProxies)}catch{return console.warn("Failed to fetch missing fields, returning base response"),d}const j=new Map((P.data??[]).map(se=>[se.id,se.attributes??{}]));return{...d,data:w.map(se=>({...se,attributes:{...se.attributes,...j.get(se.id)??{}}}))}}function HelpIcon({popover:e,size:r=24,color:s="currentColor",strokeWidthBorder:o=2,strokeWidth:c=2.5,placement:x="top",popoutBgColor:u="bg-gray-800",popoutTextColor:p="text-white",popoutStyleOverrides:d=""}){let w="";switch(x){case"top":w="bottom-full left-1/2 transform -translate-x-1/2 mb-2";break;case"bottom":w="top-full left-1/2 transform -translate-x-1/2 mt-2";break;case"left":w="right-full top-1/2 transform -translate-y-1/2 mr-2";break;case"right":w="left-full top-1/2 transform -translate-y-1/2 ml-2";break;default:w="bottom-full left-1/2 transform -translate-x-1/2 mb-2"}return jsxRuntimeExports.jsxs("span",{className:"relative inline-block group",children:[jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:o,strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",strokeWidth:c}),jsxRuntimeExports.jsx("path",{d:"M12 17h.01",strokeWidth:c})]}),e&&jsxRuntimeExports.jsx("span",{className:`absolute ${w} w-max max-w-xs rounded-sm ${u} ${p} text-xs p-1
          text-center opacity-0 group-hover:opacity-100 transition-opacity z-50 pointer-events-none ${d}`,children:e})]})}const defaultColors={group1:"bg-[#d7bbbb]",group2:"bg-[#d7cdbb]",group17:"bg-[#d7d9c2]",group18:"bg-[#d0d5ee]",transition:"bg-[#c4d0d8]",lanthanide:"bg-[#e5cbee]",actinide:"bg-[#aebcee]",metalloid:"bg-[#cdd9c2]",postTransition:"bg-[#c2c8d9]",mainGroup:"bg-[#d9c2ce]",default:"bg-gray-200"};function PTable({providerUrl:e=null,selected:r={},onSelectionChange:s,colors:o=defaultColors,selectedClassName:c="bg-green-400 border border-green-700 text-white scale-105",deselectedClassName:x="bg-red-400 border border-red-700 text-white scale-105",defaultBorderClassName:u="border border-slate-700",hoverClassName:p="transform transition-transform duration-100 hover:scale-105 hover:z-10 hover:cursor-pointer"}){const[d,w]=reactExports.useState(elements),[C,v]=reactExports.useState(null),[k,H]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{const ce=["./cachedPTable.json","https://raw.githubusercontent.com/materialscloud-org/tools-optimadeclient-react/main/public/cachedPTable.json"];let ne=null;for(const K of ce)try{const Y=await fetch(K);if(!Y.ok)throw new Error(`Failed to load cached PTable from ${K}`);ne=await Y.json(),console.log(`Loaded cached PTable from ${K}`);break}catch(Y){console.warn(Y.message)}if(!ne){console.error("Failed to load cached PTable from all sources");return}ne.lastUpdated&&H(new Date(ne.lastUpdated).toLocaleDateString());const E={};ne.data.forEach(K=>{if(!K.providerUrl)return;const Y=K.providerUrl.replace(/\/+$/,""),re=K.ptable??Object.fromEntries(Object.entries(K).filter(([ue])=>ue!=="providerUrl"&&ue!=="lastUpdated"));E[Y]=re}),v(E)})()},[]),reactExports.useEffect(()=>{if(!e||!C)return;const se=C[e]||{},ce=elements.map(ne=>({...ne,present:ne.sym in se?se[ne.sym]:void 0}));w(ce)},[e,C]);const P=se=>{if(!s)return;const ce=((r[se]??0)+1)%3;s({[se]:ce})},j=se=>{const ce=r[se.sym]??0,ne=o[se.group]??o.default;if(ce===1)return c;if(ce===2)return x;const E=se.present?"":"opacity-30";return`${ne} ${u} ${E}`};return jsxRuntimeExports.jsx("div",{className:"w-full max-w-full mx-auto px-0 md:px-2",children:jsxRuntimeExports.jsxs("div",{className:"@container",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-end pb-2 pr-1.5",children:jsxRuntimeExports.jsx(HelpIcon,{popover:`All OPTIMADE provider databases have been prefiltered, with unavailable structures greyed out. Last updated: ${k}.`,placement:"left",color:"rgb(40,40,40)"})}),jsxRuntimeExports.jsx("div",{className:"grid @gap-0.5 @sm:gap-1 w-full",style:{gridTemplateColumns:"repeat(18, minmax(0, 1fr))"},children:d.map(se=>jsxRuntimeExports.jsx("div",{style:{gridColumn:se.col,gridRow:se.row},className:"relative w-full",children:jsxRuntimeExports.jsx("div",{className:"w-full aspect-square",children:jsxRuntimeExports.jsxs("button",{onClick:()=>P(se.sym),className:`flex flex-col justify-center items-center w-full h-full rounded-sm ${p} ${j(se)}`,children:[jsxRuntimeExports.jsx("span",{className:"text-[0px] opacity-0 @sm:text-[0.3rem] @sm:opacity-100 @md:text-[0.5rem] @lg:text-[0.7rem] text-gray-700 leading-tight",children:se.num}),jsxRuntimeExports.jsx("span",{className:"text-[0.55rem] font-medium leading-none",style:{fontSize:"clamp(0.55rem, 2.5vw, 1.25rem)"},children:se.sym})]})})},se.sym))})]})})}function QueryTextBox({value:e,onChange:r,placeholder:s="Enter OPTIMADE filter",onSubmit:o,loading:c=!1}){return jsxRuntimeExports.jsx("div",{className:textNormal,children:jsxRuntimeExports.jsxs("form",{onSubmit:x=>{x.preventDefault(),o?.()},className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"text",value:e,onChange:x=>r(x.target.value),placeholder:s,className:`${containerStyle} border-gray-300! bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 `}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:c,className:`${baseButtonStyle} disabled:opacity-50`,children:c?"Loading":"Query"})]})})}var lib={},Range={},utils={},types={},hasRequiredTypes;function requireTypes(){if(hasRequiredTypes)return types;hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0}),types.Direction=void 0;var e;return(function(r){r.Right="to right",r.Left="to left",r.Down="to bottom",r.Up="to top"})(e||(types.Direction=e={})),types}var hasRequiredUtils;function requireUtils(){return hasRequiredUtils||(hasRequiredUtils=1,(function(e){var r=utils&&utils.__spreadArray||function(Te,Ae,Ve){if(Ve||arguments.length===2)for(var _e=0,W=Ae.length,we;_e<W;_e++)(we||!(_e in Ae))&&(we||(we=Array.prototype.slice.call(Ae,0,_e)),we[_e]=Ae[_e]);return Te.concat(we||Array.prototype.slice.call(Ae))};Object.defineProperty(e,"__esModule",{value:!0}),e.isIOS=e.useThumbOverlap=e.assertUnreachable=e.voidFn=e.getTrackBackground=e.replaceAt=e.schd=e.translate=e.getClosestThumbIndex=e.translateThumbs=e.getPaddingAndBorder=e.getMargin=e.checkInitialOverlap=e.checkValuesAgainstBoundaries=e.checkBoundaries=e.isVertical=e.relativeValue=e.normalizeValue=e.isStepDivisible=e.isTouchEvent=e.getStepDecimals=void 0;var s=requireReact(),o=requireTypes(),c=function(Te){var Ae=Te.toString().split(".")[1];return Ae?Ae.length:0};e.getStepDecimals=c;function x(Te){return Te.touches&&Te.touches.length||Te.changedTouches&&Te.changedTouches.length}e.isTouchEvent=x;function u(Te,Ae,Ve){var _e=(Ae-Te)/Ve,W=8,we=Number(_e.toFixed(W));return parseInt(we.toString(),10)===we}e.isStepDivisible=u;function p(Te,Ae,Ve,_e,W,we,ge){var ae=1e11;if(Te=Math.round(Te*ae)/ae,!we){var Ue=ge[Ae-1],Ee=ge[Ae+1];if(Ue&&Ue>Te)return Ue;if(Ee&&Ee<Te)return Ee}if(Te>_e)return _e;if(Te<Ve)return Ve;var Ge=Math.floor(Te*ae-Ve*ae)%Math.floor(W*ae),tt=Math.floor(Te*ae-Math.abs(Ge)),ve=Ge===0?Te:tt/ae,ze=Math.abs(Ge/ae)<W/2?ve:ve+W,rt=(0,e.getStepDecimals)(W);return parseFloat(ze.toFixed(rt))}e.normalizeValue=p;function d(Te,Ae,Ve){return(Te-Ae)/(Ve-Ae)}e.relativeValue=d;function w(Te){return Te===o.Direction.Up||Te===o.Direction.Down}e.isVertical=w;function C(Te,Ae,Ve){if(Ae>=Ve)throw new RangeError("min (".concat(Ae,") is equal/bigger than max (").concat(Ve,")"));if(Te<Ae)throw new RangeError("value (".concat(Te,") is smaller than min (").concat(Ae,")"));if(Te>Ve)throw new RangeError("value (".concat(Te,") is bigger than max (").concat(Ve,")"))}e.checkBoundaries=C;function v(Te,Ae,Ve){return Te<Ae?Ae:Te>Ve?Ve:Te}e.checkValuesAgainstBoundaries=v;function k(Te){if(!(Te.length<2)&&!Te.slice(1).every(function(Ae,Ve){return Te[Ve]<=Ae}))throw new RangeError("values={[".concat(Te,"]} needs to be sorted when allowOverlap={false}"))}e.checkInitialOverlap=k;function H(Te){var Ae=window.getComputedStyle(Te);return{top:parseInt(Ae["margin-top"],10),bottom:parseInt(Ae["margin-bottom"],10),left:parseInt(Ae["margin-left"],10),right:parseInt(Ae["margin-right"],10)}}e.getMargin=H;function P(Te){var Ae=window.getComputedStyle(Te);return{top:parseInt(Ae["padding-top"],10)+parseInt(Ae["border-top-width"],10),bottom:parseInt(Ae["padding-bottom"],10)+parseInt(Ae["border-bottom-width"],10),left:parseInt(Ae["padding-left"],10)+parseInt(Ae["border-left-width"],10),right:parseInt(Ae["padding-right"],10)+parseInt(Ae["border-right-width"],10)}}e.getPaddingAndBorder=P;function j(Te,Ae,Ve){var _e=Ve?-1:1;Te.forEach(function(W,we){return ce(W,_e*Ae[we].x,Ae[we].y)})}e.translateThumbs=j;function se(Te,Ae,Ve,_e){for(var W=0,we=Oe(Te[0],Ae,Ve,_e),ge=1;ge<Te.length;ge++){var ae=Oe(Te[ge],Ae,Ve,_e);ae<we&&(we=ae,W=ge)}return W}e.getClosestThumbIndex=se;function ce(Te,Ae,Ve){Te.style.transform="translate(".concat(Ae,"px, ").concat(Ve,"px)")}e.translate=ce;var ne=function(Te){var Ae=[],Ve=null,_e=function(){for(var W=[],we=0;we<arguments.length;we++)W[we]=arguments[we];Ae=W,!Ve&&(Ve=requestAnimationFrame(function(){Ve=null,Te.apply(void 0,Ae)}))};return _e};e.schd=ne;function E(Te,Ae,Ve){var _e=Te.slice(0);return _e[Ae]=Ve,_e}e.replaceAt=E;function K(Te){var Ae=Te.values,Ve=Te.colors,_e=Te.min,W=Te.max,we=Te.direction,ge=we===void 0?o.Direction.Right:we,ae=Te.rtl,Ue=ae===void 0?!1:ae;Ue&&ge===o.Direction.Right?ge=o.Direction.Left:Ue&&o.Direction.Left&&(ge=o.Direction.Right);var Ee=Ae.slice(0).sort(function(tt,ve){return tt-ve}).map(function(tt){return(tt-_e)/(W-_e)*100}),Ge=Ee.reduce(function(tt,ve,ze){return"".concat(tt,", ").concat(Ve[ze]," ").concat(ve,"%, ").concat(Ve[ze+1]," ").concat(ve,"%")},"");return"linear-gradient(".concat(ge,", ").concat(Ve[0]," 0%").concat(Ge,", ").concat(Ve[Ve.length-1]," 100%)")}e.getTrackBackground=K;function Y(){}e.voidFn=Y;function re(Te){throw new Error("Didn't expect to get here")}e.assertUnreachable=re;var ue=function(Te,Ae,Ve,_e,W){W===void 0&&(W=function(ge){return ge});var we=Math.ceil(r([Te],Array.from(Te.children),!0).reduce(function(ge,ae){var Ue=Math.ceil(ae.getBoundingClientRect().width);if(ae.innerText&&ae.innerText.includes(Ve)&&ae.childElementCount===0){var Ee=ae.cloneNode(!0);Ee.innerHTML=W(Ae.toFixed(_e)),Ee.style.visibility="hidden",document.body.appendChild(Ee),Ue=Math.ceil(Ee.getBoundingClientRect().width),document.body.removeChild(Ee)}return Ue>ge?Ue:ge},Te.getBoundingClientRect().width));return we},q=function(Te,Ae,Ve,_e,W,we,ge){ge===void 0&&(ge=function(Ee){return Ee});var ae=[],Ue=function(Ee){var Ge=ue(Ve[Ee],_e[Ee],W,we,ge),tt=Ae[Ee].x;Ae.forEach(function(ve,ze){var rt=ve.x,at=ue(Ve[ze],_e[ze],W,we,ge);Ee!==ze&&(tt>=rt&&tt<=rt+at||tt+Ge>=rt&&tt+Ge<=rt+at)&&(ae.includes(ze)||(ae.push(Ee),ae.push(ze),ae=r(r([],ae,!0),[Ee,ze],!1),Ue(ze)))})};return Ue(Te),Array.from(new Set(ae.sort()))},he=function(Te,Ae,Ve,_e,W,we){_e===void 0&&(_e=.1),W===void 0&&(W=" - "),we===void 0&&(we=function(ze){return ze});var ge=(0,e.getStepDecimals)(_e),ae=(0,s.useState)({}),Ue=ae[0],Ee=ae[1],Ge=(0,s.useState)(we(Ae[Ve].toFixed(ge))),tt=Ge[0],ve=Ge[1];return(0,s.useEffect)(function(){if(Te){var ze=Te.getThumbs();if(ze.length<1)return;var rt={},at=Te.getOffsets(),Ke=q(Ve,at,ze,Ae,W,ge,we),ft=we(Ae[Ve].toFixed(ge));if(Ke.length){var vt=Ke.reduce(function(yr,jr,Lr,Cr){return yr.length?r(r([],yr,!0),[at[Cr[Lr]].x],!1):[at[Cr[Lr]].x]},[]);if(Math.min.apply(Math,vt)===at[Ve].x){var yt=[];Ke.forEach(function(yr){yt.push(Ae[yr].toFixed(ge))}),ft=Array.from(new Set(yt.sort(function(yr,jr){return parseFloat(yr)-parseFloat(jr)}))).map(we).join(W);var Kt=Math.min.apply(Math,vt),zt=Math.max.apply(Math,vt),vr=ze[Ke[vt.indexOf(zt)]].getBoundingClientRect().width;rt.left="".concat(Math.abs(Kt-(zt+vr))/2,"px"),rt.transform="translate(-50%, 0)"}else rt.visibility="hidden"}ve(ft),Ee(rt)}},[Te,Ae]),[tt,Ue]};e.useThumbOverlap=he;function Oe(Te,Ae,Ve,_e){var W=Te.getBoundingClientRect(),we=W.left,ge=W.top,ae=W.width,Ue=W.height;return w(_e)?Math.abs(Ve-(ge+Ue/2)):Math.abs(Ae-(we+ae/2))}var be=function(){var Te,Ae=((Te=navigator.userAgentData)===null||Te===void 0?void 0:Te.platform)||navigator.platform;return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(Ae)||navigator.userAgent.includes("Mac")&&"ontouchend"in document};e.isIOS=be})(utils)),utils}var hasRequiredRange;function requireRange(){if(hasRequiredRange)return Range;hasRequiredRange=1;var e=Range&&Range.__extends||(function(){var v=function(k,H){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,j){P.__proto__=j}||function(P,j){for(var se in j)Object.prototype.hasOwnProperty.call(j,se)&&(P[se]=j[se])},v(k,H)};return function(k,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");v(k,H);function P(){this.constructor=k}k.prototype=H===null?Object.create(H):(P.prototype=H.prototype,new P)}})(),r=Range&&Range.__createBinding||(Object.create?(function(v,k,H,P){P===void 0&&(P=H);var j=Object.getOwnPropertyDescriptor(k,H);(!j||("get"in j?!k.__esModule:j.writable||j.configurable))&&(j={enumerable:!0,get:function(){return k[H]}}),Object.defineProperty(v,P,j)}):(function(v,k,H,P){P===void 0&&(P=H),v[P]=k[H]})),s=Range&&Range.__setModuleDefault||(Object.create?(function(v,k){Object.defineProperty(v,"default",{enumerable:!0,value:k})}):function(v,k){v.default=k}),o=Range&&Range.__importStar||function(v){if(v&&v.__esModule)return v;var k={};if(v!=null)for(var H in v)H!=="default"&&Object.prototype.hasOwnProperty.call(v,H)&&r(k,v,H);return s(k,v),k},c=Range&&Range.__spreadArray||function(v,k,H){if(H||arguments.length===2)for(var P=0,j=k.length,se;P<j;P++)(se||!(P in k))&&(se||(se=Array.prototype.slice.call(k,0,P)),se[P]=k[P]);return v.concat(se||Array.prototype.slice.call(k))};Object.defineProperty(Range,"__esModule",{value:!0});var x=o(requireReact()),u=requireUtils(),p=requireTypes(),d=["ArrowRight","ArrowUp","k","PageUp"],w=["ArrowLeft","ArrowDown","j","PageDown"],C=(function(v){e(k,v);function k(H){var P=v.call(this,H)||this;if(P.trackRef=x.createRef(),P.thumbRefs=[],P.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(P.props.values.length).fill(0).map(function(j,se){return se}),isChanged:!1,markOffsets:[]},P.getOffsets=function(){var j=P.props,se=j.direction,ce=j.values,ne=j.min,E=j.max,K=P.trackRef.current;if(!K)return console.warn("No track element found."),[];var Y=K.getBoundingClientRect(),re=(0,u.getPaddingAndBorder)(K);return P.getThumbs().map(function(ue,q){var he={x:0,y:0},Oe=ue.getBoundingClientRect(),be=(0,u.getMargin)(ue);switch(se){case p.Direction.Right:return he.x=(be.left+re.left)*-1,he.y=((Oe.height-Y.height)/2+re.top)*-1,he.x+=Y.width*(0,u.relativeValue)(ce[q],ne,E)-Oe.width/2,he;case p.Direction.Left:return he.x=(be.right+re.right)*-1,he.y=((Oe.height-Y.height)/2+re.top)*-1,he.x+=Y.width-Y.width*(0,u.relativeValue)(ce[q],ne,E)-Oe.width/2,he;case p.Direction.Up:return he.x=((Oe.width-Y.width)/2+be.left+re.left)*-1,he.y=-re.left,he.y+=Y.height-Y.height*(0,u.relativeValue)(ce[q],ne,E)-Oe.height/2,he;case p.Direction.Down:return he.x=((Oe.width-Y.width)/2+be.left+re.left)*-1,he.y=-re.left,he.y+=Y.height*(0,u.relativeValue)(ce[q],ne,E)-Oe.height/2,he;default:return(0,u.assertUnreachable)(se)}})},P.getThumbs=function(){return P.trackRef&&P.trackRef.current?Array.from(P.trackRef.current.children).filter(function(j){return j.hasAttribute("aria-valuenow")}):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},P.getTargetIndex=function(j){return P.getThumbs().findIndex(function(se){return se===j.target||se.contains(j.target)})},P.addTouchEvents=function(j){document.addEventListener("touchmove",P.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",P.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",P.schdOnEnd,{passive:!1})},P.addMouseEvents=function(j){document.addEventListener("mousemove",P.schdOnMouseMove),document.addEventListener("mouseup",P.schdOnEnd)},P.onMouseDownTrack=function(j){var se;if(!(j.button!==0||(0,u.isIOS)()))if(j.persist(),j.preventDefault(),P.addMouseEvents(j.nativeEvent),P.props.values.length>1&&P.props.draggableTrack){if(P.thumbRefs.some(function(ne){var E;return(E=ne.current)===null||E===void 0?void 0:E.contains(j.target)}))return;P.setState({draggedTrackPos:[j.clientX,j.clientY]},function(){return P.onMove(j.clientX,j.clientY)})}else{var ce=(0,u.getClosestThumbIndex)(P.thumbRefs.map(function(ne){return ne.current}),j.clientX,j.clientY,P.props.direction);(se=P.thumbRefs[ce].current)===null||se===void 0||se.focus(),P.setState({draggedThumbIndex:ce},function(){return P.onMove(j.clientX,j.clientY)})}},P.onResize=function(){(0,u.translateThumbs)(P.getThumbs(),P.getOffsets(),P.props.rtl),P.calculateMarkOffsets()},P.onTouchStartTrack=function(j){var se;if(j.persist(),P.addTouchEvents(j.nativeEvent),P.props.values.length>1&&P.props.draggableTrack){if(P.thumbRefs.some(function(ne){var E;return(E=ne.current)===null||E===void 0?void 0:E.contains(j.target)}))return;P.setState({draggedTrackPos:[j.touches[0].clientX,j.touches[0].clientY]},function(){return P.onMove(j.touches[0].clientX,j.touches[0].clientY)})}else{var ce=(0,u.getClosestThumbIndex)(P.thumbRefs.map(function(ne){return ne.current}),j.touches[0].clientX,j.touches[0].clientY,P.props.direction);(se=P.thumbRefs[ce].current)===null||se===void 0||se.focus(),P.setState({draggedThumbIndex:ce},function(){return P.onMove(j.touches[0].clientX,j.touches[0].clientY)})}},P.onMouseOrTouchStart=function(j){if(!P.props.disabled){var se=(0,u.isTouchEvent)(j);if(!(!se&&j.button!==0)){var ce=P.getTargetIndex(j);ce!==-1&&(se?P.addTouchEvents(j):P.addMouseEvents(j),P.setState({draggedThumbIndex:ce,thumbZIndexes:P.state.thumbZIndexes.map(function(ne,E){return E===ce?Math.max.apply(Math,P.state.thumbZIndexes):ne<=P.state.thumbZIndexes[ce]?ne:ne-1})}))}}},P.onMouseMove=function(j){j.preventDefault(),P.onMove(j.clientX,j.clientY)},P.onTouchMove=function(j){j.preventDefault(),P.onMove(j.touches[0].clientX,j.touches[0].clientY)},P.onKeyDown=function(j){var se=P.props,ce=se.values,ne=se.onChange,E=se.step,K=se.rtl,Y=se.direction,re=P.state.isChanged,ue=P.getTargetIndex(j.nativeEvent),q=K||Y===p.Direction.Left||Y===p.Direction.Down?-1:1;ue!==-1&&(d.includes(j.key)?(j.preventDefault(),P.setState({draggedThumbIndex:ue,isChanged:!0}),ne((0,u.replaceAt)(ce,ue,P.normalizeValue(ce[ue]+q*(j.key==="PageUp"?E*10:E),ue)))):w.includes(j.key)?(j.preventDefault(),P.setState({draggedThumbIndex:ue,isChanged:!0}),ne((0,u.replaceAt)(ce,ue,P.normalizeValue(ce[ue]-q*(j.key==="PageDown"?E*10:E),ue)))):j.key==="Tab"?P.setState({draggedThumbIndex:-1},function(){re&&P.fireOnFinalChange()}):re&&P.fireOnFinalChange())},P.onKeyUp=function(j){var se=P.state.isChanged;P.setState({draggedThumbIndex:-1},function(){se&&P.fireOnFinalChange()})},P.onMove=function(j,se){var ce=P.state,ne=ce.draggedThumbIndex,E=ce.draggedTrackPos,K=P.props,Y=K.direction,re=K.min,ue=K.max,q=K.onChange,he=K.values,Oe=K.step,be=K.rtl;if(ne===-1&&E[0]===-1&&E[1]===-1)return null;var Te=P.trackRef.current;if(!Te)return null;var Ae=Te.getBoundingClientRect(),Ve=(0,u.isVertical)(Y)?Ae.height:Ae.width;if(E[0]!==-1&&E[1]!==-1){var _e=j-E[0],W=se-E[1],we=0;switch(Y){case p.Direction.Right:case p.Direction.Left:we=_e/Ve*(ue-re);break;case p.Direction.Down:case p.Direction.Up:we=W/Ve*(ue-re);break;default:(0,u.assertUnreachable)(Y)}if(be&&(we*=-1),Math.abs(we)>=Oe/2){for(var ge=0;ge<P.thumbRefs.length;ge++){if(he[ge]===ue&&Math.sign(we)===1||he[ge]===re&&Math.sign(we)===-1)return;var ae=he[ge]+we;ae>ue?we=ue-he[ge]:ae<re&&(we=re-he[ge])}for(var Ue=he.slice(0),ge=0;ge<P.thumbRefs.length;ge++)Ue=(0,u.replaceAt)(Ue,ge,P.normalizeValue(he[ge]+we,ge));P.setState({draggedTrackPos:[j,se]}),q(Ue)}}else{var Ee=0;switch(Y){case p.Direction.Right:Ee=(j-Ae.left)/Ve*(ue-re)+re;break;case p.Direction.Left:Ee=(Ve-(j-Ae.left))/Ve*(ue-re)+re;break;case p.Direction.Down:Ee=(se-Ae.top)/Ve*(ue-re)+re;break;case p.Direction.Up:Ee=(Ve-(se-Ae.top))/Ve*(ue-re)+re;break;default:(0,u.assertUnreachable)(Y)}be&&(Ee=ue+re-Ee),Math.abs(he[ne]-Ee)>=Oe/2&&q((0,u.replaceAt)(he,ne,P.normalizeValue(Ee,ne)))}},P.normalizeValue=function(j,se){var ce=P.props,ne=ce.min,E=ce.max,K=ce.step,Y=ce.allowOverlap,re=ce.values;return(0,u.normalizeValue)(j,se,ne,E,K,Y,re)},P.onEnd=function(j){if(j.preventDefault(),document.removeEventListener("mousemove",P.schdOnMouseMove),document.removeEventListener("touchmove",P.schdOnTouchMove),document.removeEventListener("mouseup",P.schdOnEnd),document.removeEventListener("touchend",P.schdOnEnd),document.removeEventListener("touchcancel",P.schdOnEnd),P.state.draggedThumbIndex===-1&&P.state.draggedTrackPos[0]===-1&&P.state.draggedTrackPos[1]===-1)return null;P.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},function(){P.fireOnFinalChange()})},P.fireOnFinalChange=function(){P.setState({isChanged:!1});var j=P.props,se=j.onFinalChange,ce=j.values;se&&se(ce)},P.updateMarkRefs=function(j){if(!j.renderMark){P.numOfMarks=void 0,P.markRefs=void 0;return}P.numOfMarks=(j.max-j.min)/P.props.step,P.markRefs=[];for(var se=0;se<P.numOfMarks+1;se++)P.markRefs[se]=x.createRef()},P.calculateMarkOffsets=function(){if(!(!P.props.renderMark||!P.trackRef||!P.numOfMarks||!P.markRefs||P.trackRef.current===null)){for(var j=window.getComputedStyle(P.trackRef.current),se=parseInt(j.width,10),ce=parseInt(j.height,10),ne=parseInt(j.paddingLeft,10),E=parseInt(j.paddingTop,10),K=[],Y=0;Y<P.numOfMarks+1;Y++){var re=9999,ue=9999;if(P.markRefs[Y].current){var q=P.markRefs[Y].current.getBoundingClientRect();re=q.height,ue=q.width}P.props.direction===p.Direction.Left||P.props.direction===p.Direction.Right?K.push([Math.round(se/P.numOfMarks*Y+ne-ue/2),-Math.round((re-ce)/2)]):K.push([Math.round(ce/P.numOfMarks*Y+E-re/2),-Math.round((ue-se)/2)])}P.setState({markOffsets:K})}},H.step===0)throw new Error('"step" property should be a positive number');return P.schdOnMouseMove=(0,u.schd)(P.onMouseMove),P.schdOnTouchMove=(0,u.schd)(P.onTouchMove),P.schdOnEnd=(0,u.schd)(P.onEnd),P.thumbRefs=H.values.map(function(){return x.createRef()}),P.updateMarkRefs(H),P}return k.prototype.componentDidMount=function(){var H=this,P=this.props,j=P.values,se=P.min,ce=P.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",H.onResize)},unobserve:function(){return window.removeEventListener("resize",H.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),!this.props.allowOverlap&&(0,u.checkInitialOverlap)(this.props.values),this.props.values.forEach(function(ne){return(0,u.checkBoundaries)(ne,H.props.min,H.props.max)}),this.resizeObserver.observe(this.trackRef.current),(0,u.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),j.forEach(function(ne){(0,u.isStepDivisible)(se,ne,ce)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})},k.prototype.componentDidUpdate=function(H,P){var j=this.props,se=j.max,ce=j.min,ne=j.step,E=j.values,K=j.rtl;(H.max!==se||H.min!==ce||H.step!==ne)&&this.updateMarkRefs(this.props),(0,u.translateThumbs)(this.getThumbs(),this.getOffsets(),K),(H.max!==se||H.min!==ce||H.step!==ne||P.markOffsets.length!==this.state.markOffsets.length)&&(this.calculateMarkOffsets(),E.forEach(function(Y){(0,u.isStepDivisible)(ce,Y,ne)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},k.prototype.componentWillUnmount=function(){var H={passive:!1};document.removeEventListener("mousedown",this.onMouseOrTouchStart,H),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},k.prototype.render=function(){var H=this,P=this.props,j=P.label,se=P.labelledBy,ce=P.renderTrack,ne=P.renderThumb,E=P.renderMark,K=E===void 0?function(){return null}:E,Y=P.values,re=P.min,ue=P.max,q=P.allowOverlap,he=P.disabled,Oe=this.state,be=Oe.draggedThumbIndex,Te=Oe.thumbZIndexes,Ae=Oe.markOffsets;return ce({props:{style:{transform:"scale(1)",cursor:be>-1?"grabbing":this.props.draggableTrack?(0,u.isVertical)(this.props.direction)?"ns-resize":"ew-resize":Y.length===1&&!he?"pointer":"inherit"},onMouseDown:he?u.voidFn:this.onMouseDownTrack,onTouchStart:he?u.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:this.state.draggedThumbIndex>-1,disabled:he,children:c(c([],Ae.map(function(Ve,_e,W){return K({props:{style:H.props.direction===p.Direction.Left||H.props.direction===p.Direction.Right?{position:"absolute",left:"".concat(Ve[0],"px"),marginTop:"".concat(Ve[1],"px")}:{position:"absolute",top:"".concat(Ve[0],"px"),marginLeft:"".concat(Ve[1],"px")},key:"mark".concat(_e),ref:H.markRefs[_e]},index:_e})}),!0),Y.map(function(Ve,_e){var W=H.state.draggedThumbIndex===_e;return ne({index:_e,value:Ve,isDragged:W,props:{style:{position:"absolute",zIndex:Te[_e],cursor:he?"inherit":W?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:_e,tabIndex:he?void 0:0,"aria-valuemax":q?ue:Y[_e+1]||ue,"aria-valuemin":q?re:Y[_e-1]||re,"aria-valuenow":Ve,draggable:!1,ref:H.thumbRefs[_e],"aria-label":j,"aria-labelledby":se,role:"slider",onKeyDown:he?u.voidFn:H.onKeyDown,onKeyUp:he?u.voidFn:H.onKeyUp}})}),!0)})},k.defaultProps={label:"Accessibility label",labelledBy:null,step:1,direction:p.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},k})(x.Component);return Range.default=C,Range}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,(function(e){var r=lib&&lib.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0}),e.checkValuesAgainstBoundaries=e.relativeValue=e.useThumbOverlap=e.Direction=e.getTrackBackground=e.Range=void 0;var s=r(requireRange());e.Range=s.default;var o=requireUtils();Object.defineProperty(e,"getTrackBackground",{enumerable:!0,get:function(){return o.getTrackBackground}}),Object.defineProperty(e,"useThumbOverlap",{enumerable:!0,get:function(){return o.useThumbOverlap}}),Object.defineProperty(e,"relativeValue",{enumerable:!0,get:function(){return o.relativeValue}}),Object.defineProperty(e,"checkValuesAgainstBoundaries",{enumerable:!0,get:function(){return o.checkValuesAgainstBoundaries}});var c=requireTypes();Object.defineProperty(e,"Direction",{enumerable:!0,get:function(){return c.Direction}})})(lib)),lib}var libExports=requireLib();const inputOverride=`w-12 text-center bg-transparent border-none outline-none p-0
             [&::-webkit-inner-spin-button]:appearance-none
             [&::-webkit-outer-spin-button]:appearance-none
             [-moz-appearance:textfield]`,sliderBgStyle="flex-1 h-2 bg-gray-300 rounded relative",sliderFgStyle="absolute h-2 bg-blue-500 rounded",sliderThumbStyle="w-4.5 h-4.5 bg-slate-100 border-2 border-slate-400 rounded-full transition-transform transform origin-center hover:scale-125";function RangeSlider({title:e,value:r,onChange:s,min:o,max:c}){const[x,u]=reactExports.useState(r.map(String));reactExports.useEffect(()=>{u(r.map(String))},[r]);const p=(w,C)=>{u(k=>{const H=[...k];return H[w]=C,H});const v=parseFloat(C);if(!isNaN(v)){let k=[...r];w===0?k[0]=Math.min(Math.max(v,o),r[1]):k[1]=Math.max(Math.min(v,c),r[0]),s(k)}},d=w=>{const C=parseFloat(x[w]);isNaN(C)&&u(v=>{const k=[...v];return k[w]=String(r[w]),k})};return jsxRuntimeExports.jsxs("div",{className:`${textNormal} p-2  pt-4`,children:[jsxRuntimeExports.jsx("label",{className:"block",children:e}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2.5 items-center",children:[jsxRuntimeExports.jsx("input",{type:"number",value:x[0],placeholder:o,min:o,max:r[1],onChange:w=>p(0,w.target.value),onBlur:()=>d(0),className:inputOverride}),jsxRuntimeExports.jsx(libExports.Range,{step:1,min:o,max:c,values:r,onChange:s,renderTrack:({props:w,children:C})=>{const{key:v,...k}=w;return jsxRuntimeExports.jsxs("div",{...k,className:sliderBgStyle,children:[jsxRuntimeExports.jsx("div",{className:sliderFgStyle,style:{left:`${(r[0]-o)/(c-o)*100}%`,width:`${(r[1]-r[0])/(c-o)*100}%`}}),C]},v)},renderThumb:({props:w})=>{const{key:C,...v}=w;return jsxRuntimeExports.jsx("div",{...v,className:"relative w-5 h-5 flex items-center",children:jsxRuntimeExports.jsx("div",{className:sliderThumbStyle})},C)}}),jsxRuntimeExports.jsx("input",{type:"number",value:x[1],placeholder:c,min:r[0],max:c,onChange:w=>p(1,w.target.value),onBlur:()=>d(1),className:`${inputOverride} ${textSmall}`})]})]})}function buildQueryString(e,r,s,o,c){const x=[],u=[],p=[];for(const[d,w]of Object.entries(s))w===1&&u.push(d),w===2&&p.push(d);return p.length&&x.push(`NOT elements HAS ANY ${p.map(d=>`"${d}"`).join(", ")}`),u.length&&x.push(`elements HAS ALL ${u.map(d=>`"${d}"`).join(", ")}`),o[0]!==e[0]&&x.push(`nelements>=${o[0]}`),o[1]!==e[1]&&x.push(`nelements<=${o[1]}`),c[0]!==r[0]&&x.push(`nsites>=${c[0]}`),c[1]!==r[1]&&x.push(`nsites<=${c[1]}`),x.join(" AND ")}function OptimadeFilters({queryUrl:e,initialFilter:r,onSubmit:s}){const[o,c]=reactExports.useState([1,118]),[x,u]=reactExports.useState([1,1e3]),[p,d]=reactExports.useState({}),[w,C]=reactExports.useState(!1),[v,k]=reactExports.useState(r||""),H=buildQueryString([1,118],[1,1e3],p,o,x),P=w?v:H,j=()=>{s(P)},se=()=>{C(ce=>!ce),w||(k(H),d({}),c([1,118]),u([1,1e3]))};return reactExports.useEffect(()=>{r&&k(r)},[r]),jsxRuntimeExports.jsxs("div",{className:"pb-4 space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:w?"opacity-50 pointer-events-none":"",children:[jsxRuntimeExports.jsx(PTable,{providerUrl:e,selected:p,onSelectionChange:ce=>d(ne=>({...ne,...ce}))}),jsxRuntimeExports.jsx(RangeSlider,{title:"Number of elements",value:o,onChange:c,min:1,max:118}),jsxRuntimeExports.jsx(RangeSlider,{title:"Number of sites",value:x,onChange:u,min:0,max:1e3})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("input",{id:"manual-mode-toggle",type:"checkbox",checked:w,onChange:se,className:"hover:cursor-pointer h-4 w-4"}),jsxRuntimeExports.jsx("label",{htmlFor:"manual-mode-toggle",className:`${textSmall} text-gray-700 select-none`,children:"Unlock custom query"})]}),jsxRuntimeExports.jsx(QueryTextBox,{value:P,onChange:w?k:()=>{},onSubmit:j})]})}const slateDropdown=`min-w-[325]
  w-full border-2 border-slate-300
  bg-slate-200 py-1 px-3 rounded shadow hover:cursor-pointer
  hover:bg-slate-300 disabled:cursor-not-allowed
  disabled:bg-gray-100 text-sm md:text-base
`,longSlateDropdown=slateDropdown+" min-w-[300px] max-w-[700px]";function ResultsDropdown({results:e,selectedResult:r,setSelectedResult:s}){const o=c=>{const x=e?.find(u=>String(u.id)===c.target.value);x&&s(x)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select a result"}),jsxRuntimeExports.jsx("select",{className:`${slateDropdown} w-full`,value:r?.id||"",onChange:o,disabled:!e?.length,children:e?.length?e.map(c=>jsxRuntimeExports.jsx("option",{value:c.id,children:`${c.attributes?.chemical_formula_descriptive||c.attributes?.chemical_formula_hill||"Unknown"} (${c.id})`},c.id)):jsxRuntimeExports.jsx("option",{value:"",children:"No results for current query"})})]})}var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},defaultTimeoutProvider={setTimeout:(e,r)=>setTimeout(e,r),clearTimeout:e=>clearTimeout(e),setInterval:(e,r)=>setInterval(e,r),clearInterval:e=>clearInterval(e)},TimeoutManager=class{#e=defaultTimeoutProvider;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,r){return this.#e.setTimeout(e,r)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,r){return this.#e.setInterval(e,r)}clearInterval(e){this.#e.clearInterval(e)}},timeoutManager=new TimeoutManager;function systemSetTimeoutZero(e){setTimeout(e,0)}var isServer=typeof window>"u"||"Deno"in globalThis;function noop$1(){}function functionalUpdate(e,r){return typeof e=="function"?e(r):e}function isValidTimeout(e){return typeof e=="number"&&e>=0&&e!==1/0}function timeUntilStale(e,r){return Math.max(e+(r||0)-Date.now(),0)}function resolveStaleTime(e,r){return typeof e=="function"?e(r):e}function resolveEnabled(e,r){return typeof e=="function"?e(r):e}function matchQuery(e,r){const{type:s="all",exact:o,fetchStatus:c,predicate:x,queryKey:u,stale:p}=e;if(u){if(o){if(r.queryHash!==hashQueryKeyByOptions(u,r.options))return!1}else if(!partialMatchKey(r.queryKey,u))return!1}if(s!=="all"){const d=r.isActive();if(s==="active"&&!d||s==="inactive"&&d)return!1}return!(typeof p=="boolean"&&r.isStale()!==p||c&&c!==r.state.fetchStatus||x&&!x(r))}function matchMutation(e,r){const{exact:s,status:o,predicate:c,mutationKey:x}=e;if(x){if(!r.options.mutationKey)return!1;if(s){if(hashKey(r.options.mutationKey)!==hashKey(x))return!1}else if(!partialMatchKey(r.options.mutationKey,x))return!1}return!(o&&r.state.status!==o||c&&!c(r))}function hashQueryKeyByOptions(e,r){return(r?.queryKeyHashFn||hashKey)(e)}function hashKey(e){return JSON.stringify(e,(r,s)=>isPlainObject(s)?Object.keys(s).sort().reduce((o,c)=>(o[c]=s[c],o),{}):s)}function partialMatchKey(e,r){return e===r?!0:typeof e!=typeof r?!1:e&&r&&typeof e=="object"&&typeof r=="object"?Object.keys(r).every(s=>partialMatchKey(e[s],r[s])):!1}var hasOwn=Object.prototype.hasOwnProperty;function replaceEqualDeep(e,r,s=0){if(e===r)return e;if(s>500)return r;const o=isPlainArray(e)&&isPlainArray(r);if(!o&&!(isPlainObject(e)&&isPlainObject(r)))return r;const x=(o?e:Object.keys(e)).length,u=o?r:Object.keys(r),p=u.length,d=o?new Array(p):{};let w=0;for(let C=0;C<p;C++){const v=o?C:u[C],k=e[v],H=r[v];if(k===H){d[v]=k,(o?C<x:hasOwn.call(e,v))&&w++;continue}if(k===null||H===null||typeof k!="object"||typeof H!="object"){d[v]=H;continue}const P=replaceEqualDeep(k,H,s+1);d[v]=P,P===k&&w++}return x===p&&w===x?e:d}function shallowEqualObjects(e,r){if(!r||Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}function isPlainArray(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function isPlainObject(e){if(!hasObjectPrototype(e))return!1;const r=e.constructor;if(r===void 0)return!0;const s=r.prototype;return!(!hasObjectPrototype(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function hasObjectPrototype(e){return Object.prototype.toString.call(e)==="[object Object]"}function sleep(e){return new Promise(r=>{timeoutManager.setTimeout(r,e)})}function replaceData(e,r,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,r):s.structuralSharing!==!1?replaceEqualDeep(e,r):r}function addToEnd(e,r,s=0){const o=[...e,r];return s&&o.length>s?o.slice(1):o}function addToStart(e,r,s=0){const o=[r,...e];return s&&o.length>s?o.slice(0,-1):o}var skipToken=Symbol();function ensureQueryFn(e,r){return!e.queryFn&&r?.initialPromise?()=>r.initialPromise:!e.queryFn||e.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function shouldThrowError(e,r){return typeof e=="function"?e(...r):!!e}function addConsumeAwareSignal(e,r,s){let o=!1,c;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(c??=r(),o||(o=!0,c.aborted?s():c.addEventListener("abort",s,{once:!0})),c)}),e}var FocusManager=class extends Subscribable{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!isServer&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},focusManager=new FocusManager;function pendingThenable(){let e,r;const s=new Promise((c,x)=>{e=c,r=x});s.status="pending",s.catch(()=>{});function o(c){Object.assign(s,c),delete s.resolve,delete s.reject}return s.resolve=c=>{o({status:"fulfilled",value:c}),e(c)},s.reject=c=>{o({status:"rejected",reason:c}),r(c)},s}var defaultScheduler=systemSetTimeoutZero;function createNotifyManager(){let e=[],r=0,s=p=>{p()},o=p=>{p()},c=defaultScheduler;const x=p=>{r?e.push(p):c(()=>{s(p)})},u=()=>{const p=e;e=[],p.length&&c(()=>{o(()=>{p.forEach(d=>{s(d)})})})};return{batch:p=>{let d;r++;try{d=p()}finally{r--,r||u()}return d},batchCalls:p=>(...d)=>{x(()=>{p(...d)})},schedule:x,setNotifyFunction:p=>{s=p},setBatchNotifyFunction:p=>{o=p},setScheduler:p=>{c=p}}}var notifyManager=createNotifyManager(),OnlineManager=class extends Subscribable{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!isServer&&window.addEventListener){const r=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(s=>{s(e)}))}isOnline(){return this.#e}},onlineManager=new OnlineManager;function defaultRetryDelay(e){return Math.min(1e3*2**e,3e4)}function canFetch(e){return(e??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function createRetryer(e){let r=!1,s=0,o;const c=pendingThenable(),x=()=>c.status!=="pending",u=j=>{if(!x()){const se=new CancelledError(j);k(se),e.onCancel?.(se)}},p=()=>{r=!0},d=()=>{r=!1},w=()=>focusManager.isFocused()&&(e.networkMode==="always"||onlineManager.isOnline())&&e.canRun(),C=()=>canFetch(e.networkMode)&&e.canRun(),v=j=>{x()||(o?.(),c.resolve(j))},k=j=>{x()||(o?.(),c.reject(j))},H=()=>new Promise(j=>{o=se=>{(x()||w())&&j(se)},e.onPause?.()}).then(()=>{o=void 0,x()||e.onContinue?.()}),P=()=>{if(x())return;let j;const se=s===0?e.initialPromise:void 0;try{j=se??e.fn()}catch(ce){j=Promise.reject(ce)}Promise.resolve(j).then(v).catch(ce=>{if(x())return;const ne=e.retry??(isServer?0:3),E=e.retryDelay??defaultRetryDelay,K=typeof E=="function"?E(s,ce):E,Y=ne===!0||typeof ne=="number"&&s<ne||typeof ne=="function"&&ne(s,ce);if(r||!Y){k(ce);return}s++,e.onFail?.(s,ce),sleep(K).then(()=>w()?void 0:H()).then(()=>{r?k(ce):P()})})};return{promise:c,status:()=>c.status,cancel:u,continue:()=>(o?.(),c),cancelRetry:p,continueRetry:d,canStart:C,start:()=>(C()?P():H().then(P),c)}}var Removable=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&(this.#e=timeoutManager.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(isServer?1/0:300*1e3))}clearGcTimeout(){this.#e&&(timeoutManager.clearTimeout(this.#e),this.#e=void 0)}},Query=class extends Removable{#e;#t;#r;#n;#i;#o;#a;constructor(e){super(),this.#a=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#r=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=getDefaultState$1(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=getDefaultState$1(this.options);r.data!==void 0&&(this.setState(successState(r.data,r.dataUpdatedAt)),this.#e=r)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,r){const s=replaceData(this.state.data,e,this.options);return this.#s({data:s,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),s}setState(e,r){this.#s({type:"setState",state:e,setStateOptions:r})}cancel(e){const r=this.#i?.promise;return this.#i?.cancel(e),r?r.then(noop$1).catch(noop$1):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>resolveEnabled(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>resolveStaleTime(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!timeUntilStale(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(r=>r.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(r=>r.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(this.#i&&(this.#a?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,r){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&r?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(d=>d.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,o=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(this.#a=!0,s.signal)})},c=()=>{const p=ensureQueryFn(this.options,r),w=(()=>{const C={client:this.#n,queryKey:this.queryKey,meta:this.meta};return o(C),C})();return this.#a=!1,this.options.persister?this.options.persister(p,w,this):p(w)},u=(()=>{const p={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:c};return o(p),p})();this.options.behavior?.onFetch(u,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==u.fetchOptions?.meta)&&this.#s({type:"fetch",meta:u.fetchOptions?.meta}),this.#i=createRetryer({initialPromise:r?.initialPromise,fn:u.fetchFn,onCancel:p=>{p instanceof CancelledError&&p.revert&&this.setState({...this.#t,fetchStatus:"idle"}),s.abort()},onFail:(p,d)=>{this.#s({type:"failed",failureCount:p,error:d})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0});try{const p=await this.#i.start();if(p===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(p),this.#r.config.onSuccess?.(p,this),this.#r.config.onSettled?.(p,this.state.error,this),p}catch(p){if(p instanceof CancelledError){if(p.silent)return this.#i.promise;if(p.revert){if(this.state.data===void 0)throw p;return this.state.data}}throw this.#s({type:"error",error:p}),this.#r.config.onError?.(p,this),this.#r.config.onSettled?.(this.state.data,p,this),p}finally{this.scheduleGc()}}#s(e){const r=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...fetchState(s.data,this.options),fetchMeta:e.meta??null};case"success":const o={...s,...successState(e.data,e.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?o:void 0,o;case"error":const c=e.error;return{...s,error:c,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=r(this.state),notifyManager.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function fetchState(e,r){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(r.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function successState(e,r){return{data:e,dataUpdatedAt:r??Date.now(),error:null,isInvalidated:!1,status:"success"}}function getDefaultState$1(e){const r=typeof e.initialData=="function"?e.initialData():e.initialData,s=r!==void 0,o=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:r,dataUpdateCount:0,dataUpdatedAt:s?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var QueryObserver=class extends Subscribable{constructor(e,r){super(),this.options=r,this.#e=e,this.#s=null,this.#a=pendingThenable(),this.bindMethods(),this.setOptions(r)}#e;#t=void 0;#r=void 0;#n=void 0;#i;#o;#a;#s;#m;#d;#f;#u;#c;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),shouldFetchOnMount(this.#t,this.options)?this.#h():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const r=this.options,s=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof resolveEnabled(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#b(),this.#t.setOptions(this.options),r._defaulted&&!shallowEqualObjects(this.options,r)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const o=this.hasListeners();o&&shouldFetchOptionally(this.#t,s,this.options,r)&&this.#h(),this.updateResult(),o&&(this.#t!==s||resolveEnabled(this.options.enabled,this.#t)!==resolveEnabled(r.enabled,this.#t)||resolveStaleTime(this.options.staleTime,this.#t)!==resolveStaleTime(r.staleTime,this.#t))&&this.#g();const c=this.#v();o&&(this.#t!==s||resolveEnabled(this.options.enabled,this.#t)!==resolveEnabled(r.enabled,this.#t)||c!==this.#l)&&this.#y(c)}getOptimisticResult(e){const r=this.#e.getQueryCache().build(this.#e,e),s=this.createResult(r,e);return shouldAssignObserverCurrentProperties(this,s)&&(this.#n=s,this.#o=this.options,this.#i=this.#t.state),s}getCurrentResult(){return this.#n}trackResult(e,r){return new Proxy(e,{get:(s,o)=>(this.trackProp(o),r?.(o),o==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,o))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,r);return s.fetch().then(()=>this.createResult(s,r))}fetch(e){return this.#h({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#h(e){this.#b();let r=this.#t.fetch(this.options,e);return e?.throwOnError||(r=r.catch(noop$1)),r}#g(){this.#_();const e=resolveStaleTime(this.options.staleTime,this.#t);if(isServer||this.#n.isStale||!isValidTimeout(e))return;const s=timeUntilStale(this.#n.dataUpdatedAt,e)+1;this.#u=timeoutManager.setTimeout(()=>{this.#n.isStale||this.updateResult()},s)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#w(),this.#l=e,!(isServer||resolveEnabled(this.options.enabled,this.#t)===!1||!isValidTimeout(this.#l)||this.#l===0)&&(this.#c=timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&this.#h()},this.#l))}#x(){this.#g(),this.#y(this.#v())}#_(){this.#u&&(timeoutManager.clearTimeout(this.#u),this.#u=void 0)}#w(){this.#c&&(timeoutManager.clearInterval(this.#c),this.#c=void 0)}createResult(e,r){const s=this.#t,o=this.options,c=this.#n,x=this.#i,u=this.#o,d=e!==s?e.state:this.#r,{state:w}=e;let C={...w},v=!1,k;if(r._optimisticResults){const q=this.hasListeners(),he=!q&&shouldFetchOnMount(e,r),Oe=q&&shouldFetchOptionally(e,s,r,o);(he||Oe)&&(C={...C,...fetchState(w.data,e.options)}),r._optimisticResults==="isRestoring"&&(C.fetchStatus="idle")}let{error:H,errorUpdatedAt:P,status:j}=C;k=C.data;let se=!1;if(r.placeholderData!==void 0&&k===void 0&&j==="pending"){let q;c?.isPlaceholderData&&r.placeholderData===u?.placeholderData?(q=c.data,se=!0):q=typeof r.placeholderData=="function"?r.placeholderData(this.#f?.state.data,this.#f):r.placeholderData,q!==void 0&&(j="success",k=replaceData(c?.data,q,r),v=!0)}if(r.select&&k!==void 0&&!se)if(c&&k===x?.data&&r.select===this.#m)k=this.#d;else try{this.#m=r.select,k=r.select(k),k=replaceData(c?.data,k,r),this.#d=k,this.#s=null}catch(q){this.#s=q}this.#s&&(H=this.#s,k=this.#d,P=Date.now(),j="error");const ce=C.fetchStatus==="fetching",ne=j==="pending",E=j==="error",K=ne&&ce,Y=k!==void 0,ue={status:j,fetchStatus:C.fetchStatus,isPending:ne,isSuccess:j==="success",isError:E,isInitialLoading:K,isLoading:K,data:k,dataUpdatedAt:C.dataUpdatedAt,error:H,errorUpdatedAt:P,failureCount:C.fetchFailureCount,failureReason:C.fetchFailureReason,errorUpdateCount:C.errorUpdateCount,isFetched:C.dataUpdateCount>0||C.errorUpdateCount>0,isFetchedAfterMount:C.dataUpdateCount>d.dataUpdateCount||C.errorUpdateCount>d.errorUpdateCount,isFetching:ce,isRefetching:ce&&!ne,isLoadingError:E&&!Y,isPaused:C.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:E&&Y,isStale:isStale(e,r),refetch:this.refetch,promise:this.#a,isEnabled:resolveEnabled(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const q=ue.data!==void 0,he=ue.status==="error"&&!q,Oe=Ae=>{he?Ae.reject(ue.error):q&&Ae.resolve(ue.data)},be=()=>{const Ae=this.#a=ue.promise=pendingThenable();Oe(Ae)},Te=this.#a;switch(Te.status){case"pending":e.queryHash===s.queryHash&&Oe(Te);break;case"fulfilled":(he||ue.data!==Te.value)&&be();break;case"rejected":(!he||ue.error!==Te.reason)&&be();break}}return ue}updateResult(){const e=this.#n,r=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#o=this.options,this.#i.data!==void 0&&(this.#f=this.#t),shallowEqualObjects(r,e))return;this.#n=r;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,c=typeof o=="function"?o():o;if(c==="all"||!c&&!this.#p.size)return!0;const x=new Set(c??this.#p);return this.options.throwOnError&&x.add("error"),Object.keys(this.#n).some(u=>{const p=u;return this.#n[p]!==e[p]&&x.has(p)})};this.#S({listeners:s()})}#b(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const r=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(r?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#S(e){notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function shouldLoadOnMount(e,r){return resolveEnabled(r.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&r.retryOnMount===!1)}function shouldFetchOnMount(e,r){return shouldLoadOnMount(e,r)||e.state.data!==void 0&&shouldFetchOn(e,r,r.refetchOnMount)}function shouldFetchOn(e,r,s){if(resolveEnabled(r.enabled,e)!==!1&&resolveStaleTime(r.staleTime,e)!=="static"){const o=typeof s=="function"?s(e):s;return o==="always"||o!==!1&&isStale(e,r)}return!1}function shouldFetchOptionally(e,r,s,o){return(e!==r||resolveEnabled(o.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&isStale(e,s)}function isStale(e,r){return resolveEnabled(r.enabled,e)!==!1&&e.isStaleByTime(resolveStaleTime(r.staleTime,e))}function shouldAssignObserverCurrentProperties(e,r){return!shallowEqualObjects(e.getCurrentResult(),r)}function infiniteQueryBehavior(e){return{onFetch:(r,s)=>{const o=r.options,c=r.fetchOptions?.meta?.fetchMore?.direction,x=r.state.data?.pages||[],u=r.state.data?.pageParams||[];let p={pages:[],pageParams:[]},d=0;const w=async()=>{let C=!1;const v=P=>{addConsumeAwareSignal(P,()=>r.signal,()=>C=!0)},k=ensureQueryFn(r.options,r.fetchOptions),H=async(P,j,se)=>{if(C)return Promise.reject();if(j==null&&P.pages.length)return Promise.resolve(P);const ne=(()=>{const re={client:r.client,queryKey:r.queryKey,pageParam:j,direction:se?"backward":"forward",meta:r.options.meta};return v(re),re})(),E=await k(ne),{maxPages:K}=r.options,Y=se?addToStart:addToEnd;return{pages:Y(P.pages,E,K),pageParams:Y(P.pageParams,j,K)}};if(c&&x.length){const P=c==="backward",j=P?getPreviousPageParam:getNextPageParam,se={pages:x,pageParams:u},ce=j(o,se);p=await H(se,ce,P)}else{const P=e??x.length;do{const j=d===0?u[0]??o.initialPageParam:getNextPageParam(o,p);if(d>0&&j==null)break;p=await H(p,j),d++}while(d<P)}return p};r.options.persister?r.fetchFn=()=>r.options.persister?.(w,{client:r.client,queryKey:r.queryKey,meta:r.options.meta,signal:r.signal},s):r.fetchFn=w}}}function getNextPageParam(e,{pages:r,pageParams:s}){const o=r.length-1;return r.length>0?e.getNextPageParam(r[o],r,s[o],s):void 0}function getPreviousPageParam(e,{pages:r,pageParams:s}){return r.length>0?e.getPreviousPageParam?.(r[0],r,s[0],s):void 0}var Mutation=class extends Removable{#e;#t;#r;#n;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||getDefaultState(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(r=>r!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(e){const r=()=>{this.#i({type:"continue"})},s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#n=createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(x,u)=>{this.#i({type:"failed",failureCount:x,error:u})},onPause:()=>{this.#i({type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const o=this.state.status==="pending",c=!this.#n.canStart();try{if(o)r();else{this.#i({type:"pending",variables:e,isPaused:c}),this.#r.config.onMutate&&await this.#r.config.onMutate(e,this,s);const u=await this.options.onMutate?.(e,s);u!==this.state.context&&this.#i({type:"pending",context:u,variables:e,isPaused:c})}const x=await this.#n.start();return await this.#r.config.onSuccess?.(x,e,this.state.context,this,s),await this.options.onSuccess?.(x,e,this.state.context,s),await this.#r.config.onSettled?.(x,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(x,null,e,this.state.context,s),this.#i({type:"success",data:x}),x}catch(x){try{await this.#r.config.onError?.(x,e,this.state.context,this,s)}catch(u){Promise.reject(u)}try{await this.options.onError?.(x,e,this.state.context,s)}catch(u){Promise.reject(u)}try{await this.#r.config.onSettled?.(void 0,x,this.state.variables,this.state.context,this,s)}catch(u){Promise.reject(u)}try{await this.options.onSettled?.(void 0,x,e,this.state.context,s)}catch(u){Promise.reject(u)}throw this.#i({type:"error",error:x}),x}finally{this.#r.runNext(this)}}#i(e){const r=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),notifyManager.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var MutationCache=class extends Subscribable{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,r,s){const o=new Mutation({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(r),state:s});return this.add(o),o}add(e){this.#e.add(e);const r=scopeFor(e);if(typeof r=="string"){const s=this.#t.get(r);s?s.push(e):this.#t.set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const r=scopeFor(e);if(typeof r=="string"){const s=this.#t.get(r);if(s)if(s.length>1){const o=s.indexOf(e);o!==-1&&s.splice(o,1)}else s[0]===e&&this.#t.delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=scopeFor(e);if(typeof r=="string"){const o=this.#t.get(r)?.find(c=>c.state.status==="pending");return!o||o===e}else return!0}runNext(e){const r=scopeFor(e);return typeof r=="string"?this.#t.get(r)?.find(o=>o!==e&&o.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){notifyManager.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const r={exact:!0,...e};return this.getAll().find(s=>matchMutation(r,s))}findAll(e={}){return this.getAll().filter(r=>matchMutation(e,r))}notify(e){notifyManager.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return notifyManager.batch(()=>Promise.all(e.map(r=>r.continue().catch(noop$1))))}};function scopeFor(e){return e.options.scope?.id}var QueryCache=class extends Subscribable{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,r,s){const o=r.queryKey,c=r.queryHash??hashQueryKeyByOptions(o,r);let x=this.get(c);return x||(x=new Query({client:e,queryKey:o,queryHash:c,options:e.defaultQueryOptions(r),state:s,defaultOptions:e.getQueryDefaults(o)}),this.add(x)),x}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=this.#e.get(e.queryHash);r&&(e.destroy(),r===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const r={exact:!0,...e};return this.getAll().find(s=>matchQuery(r,s))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(s=>matchQuery(e,s)):r}notify(e){notifyManager.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},QueryClient=class{#e;#t;#r;#n;#i;#o;#a;#s;constructor(e={}){this.#e=e.queryCache||new QueryCache,this.#t=e.mutationCache||new MutationCache,this.#r=e.defaultOptions||{},this.#n=new Map,this.#i=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=focusManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=onlineManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const r=this.defaultQueryOptions({queryKey:e});return this.#e.get(r.queryHash)?.state.data}ensureQueryData(e){const r=this.defaultQueryOptions(e),s=this.#e.build(this,r),o=s.state.data;return o===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(resolveStaleTime(r.staleTime,s))&&this.prefetchQuery(r),Promise.resolve(o))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:r,state:s})=>{const o=s.data;return[r,o]})}setQueryData(e,r,s){const o=this.defaultQueryOptions({queryKey:e}),x=this.#e.get(o.queryHash)?.state.data,u=functionalUpdate(r,x);if(u!==void 0)return this.#e.build(this,o).setData(u,{...s,manual:!0})}setQueriesData(e,r,s){return notifyManager.batch(()=>this.#e.findAll(e).map(({queryKey:o})=>[o,this.setQueryData(o,r,s)]))}getQueryState(e){const r=this.defaultQueryOptions({queryKey:e});return this.#e.get(r.queryHash)?.state}removeQueries(e){const r=this.#e;notifyManager.batch(()=>{r.findAll(e).forEach(s=>{r.remove(s)})})}resetQueries(e,r){const s=this.#e;return notifyManager.batch(()=>(s.findAll(e).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...e},r)))}cancelQueries(e,r={}){const s={revert:!0,...r},o=notifyManager.batch(()=>this.#e.findAll(e).map(c=>c.cancel(s)));return Promise.all(o).then(noop$1).catch(noop$1)}invalidateQueries(e,r={}){return notifyManager.batch(()=>(this.#e.findAll(e).forEach(s=>{s.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},r)))}refetchQueries(e,r={}){const s={...r,cancelRefetch:r.cancelRefetch??!0},o=notifyManager.batch(()=>this.#e.findAll(e).filter(c=>!c.isDisabled()&&!c.isStatic()).map(c=>{let x=c.fetch(void 0,s);return s.throwOnError||(x=x.catch(noop$1)),c.state.fetchStatus==="paused"?Promise.resolve():x}));return Promise.all(o).then(noop$1)}fetchQuery(e){const r=this.defaultQueryOptions(e);r.retry===void 0&&(r.retry=!1);const s=this.#e.build(this,r);return s.isStaleByTime(resolveStaleTime(r.staleTime,s))?s.fetch(r):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(noop$1).catch(noop$1)}fetchInfiniteQuery(e){return e.behavior=infiniteQueryBehavior(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(noop$1).catch(noop$1)}ensureInfiniteQueryData(e){return e.behavior=infiniteQueryBehavior(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return onlineManager.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,r){this.#n.set(hashKey(e),{queryKey:e,defaultOptions:r})}getQueryDefaults(e){const r=[...this.#n.values()],s={};return r.forEach(o=>{partialMatchKey(e,o.queryKey)&&Object.assign(s,o.defaultOptions)}),s}setMutationDefaults(e,r){this.#i.set(hashKey(e),{mutationKey:e,defaultOptions:r})}getMutationDefaults(e){const r=[...this.#i.values()],s={};return r.forEach(o=>{partialMatchKey(e,o.mutationKey)&&Object.assign(s,o.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const r={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return r.queryHash||(r.queryHash=hashQueryKeyByOptions(r.queryKey,r)),r.refetchOnReconnect===void 0&&(r.refetchOnReconnect=r.networkMode!=="always"),r.throwOnError===void 0&&(r.throwOnError=!!r.suspense),!r.networkMode&&r.persister&&(r.networkMode="offlineFirst"),r.queryFn===skipToken&&(r.enabled=!1),r}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},QueryClientContext=reactExports.createContext(void 0),useQueryClient=e=>{const r=reactExports.useContext(QueryClientContext);if(!r)throw new Error("No QueryClient set, use QueryClientProvider to set one");return r},QueryClientProvider=({client:e,children:r})=>(reactExports.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:e,children:r})),IsRestoringContext=reactExports.createContext(!1),useIsRestoring=()=>reactExports.useContext(IsRestoringContext);IsRestoringContext.Provider;function createValue(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var QueryErrorResetBoundaryContext=reactExports.createContext(createValue()),useQueryErrorResetBoundary=()=>reactExports.useContext(QueryErrorResetBoundaryContext),ensurePreventErrorBoundaryRetry=(e,r,s)=>{const o=s?.state.error&&typeof e.throwOnError=="function"?shouldThrowError(e.throwOnError,[s.state.error,s]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||o)&&(r.isReset()||(e.retryOnMount=!1))},useClearResetErrorBoundary=e=>{reactExports.useEffect(()=>{e.clearReset()},[e])},getHasError=({result:e,errorResetBoundary:r,throwOnError:s,query:o,suspense:c})=>e.isError&&!r.isReset()&&!e.isFetching&&o&&(c&&e.data===void 0||shouldThrowError(s,[e.error,o])),ensureSuspenseTimers=e=>{if(e.suspense){const s=c=>c==="static"?c:Math.max(c??1e3,1e3),o=e.staleTime;e.staleTime=typeof o=="function"?(...c)=>s(o(...c)):s(o),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},willFetch=(e,r)=>e.isLoading&&e.isFetching&&!r,shouldSuspend=(e,r)=>e?.suspense&&r.isPending,fetchOptimistic=(e,r,s)=>r.fetchOptimistic(e).catch(()=>{s.clearReset()});function useBaseQuery(e,r,s){const o=useIsRestoring(),c=useQueryErrorResetBoundary(),x=useQueryClient(),u=x.defaultQueryOptions(e);x.getDefaultOptions().queries?._experimental_beforeQuery?.(u);const p=x.getQueryCache().get(u.queryHash);u._optimisticResults=o?"isRestoring":"optimistic",ensureSuspenseTimers(u),ensurePreventErrorBoundaryRetry(u,c,p),useClearResetErrorBoundary(c);const d=!x.getQueryCache().get(u.queryHash),[w]=reactExports.useState(()=>new r(x,u)),C=w.getOptimisticResult(u),v=!o&&e.subscribed!==!1;if(reactExports.useSyncExternalStore(reactExports.useCallback(k=>{const H=v?w.subscribe(notifyManager.batchCalls(k)):noop$1;return w.updateResult(),H},[w,v]),()=>w.getCurrentResult(),()=>w.getCurrentResult()),reactExports.useEffect(()=>{w.setOptions(u)},[u,w]),shouldSuspend(u,C))throw fetchOptimistic(u,w,c);if(getHasError({result:C,errorResetBoundary:c,throwOnError:u.throwOnError,query:p,suspense:u.suspense}))throw C.error;return x.getDefaultOptions().queries?._experimental_afterQuery?.(u,C),u.experimental_prefetchInRender&&!isServer&&willFetch(C,o)&&(d?fetchOptimistic(u,w,c):p?.promise)?.catch(noop$1).finally(()=>{w.updateResult()}),u.notifyOnChangeProps?C:w.trackResult(C)}function useQuery(e,r){return useBaseQuery(e,QueryObserver)}const tableTitleclassName="font-semibold border-b [&>th]:px-2",tableRowclassName="border-b border-slate-300 *:py-0.5 *:pl-2 pr-8 *:break-words";function OptimadeProviderInfo({queryUrl:e}){const{data:r,isLoading:s,isError:o,error:c}=useQuery({queryKey:["provider-info",e],queryFn:()=>getInfo({providerUrl:e}),enabled:!!e,staleTime:1/0}),x=r?.customProps??{},u=o?[c]:[],[p,d]=reactExports.useState(!1),w=reactExports.useRef(null),[C,v]=reactExports.useState("0px");return reactExports.useEffect(()=>{w.current&&v(p?`${w.current.scrollHeight}px`:"0px")},[p,x,u,s]),!e||u.length>0&&!s?null:jsxRuntimeExports.jsxs("div",{className:containerStyleDropdown,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>d(!p),className:"w-full flex justify-between p-3 bg-slate-100 hover:bg-slate-200 hover:cursor-pointer transition",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Custom attributes in selected database"}),jsxRuntimeExports.jsx("span",{children:p?"":""})]}),jsxRuntimeExports.jsx("div",{ref:w,style:{maxHeight:C},className:"transition-[max-height] duration-300 ease-in-out",children:jsxRuntimeExports.jsxs("div",{className:"pt-2 max-h-96 overflow-y-auto",children:[s&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-4",children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 border-2 border-t-2 border-gray-400 border-t-blue-500 rounded-full animate-spin mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"Loading provider info"})]}),x&&!s&&jsxRuntimeExports.jsxs("table",{className:"w-full table-fixed text-left border-collapse",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:tableTitleclassName,children:[jsxRuntimeExports.jsx("th",{children:"Field"}),jsxRuntimeExports.jsx("th",{children:"Description"}),jsxRuntimeExports.jsx("th",{children:"Unit"})]})}),jsxRuntimeExports.jsx("tbody",{children:Object.entries(x).map(([k,H])=>jsxRuntimeExports.jsxs("tr",{className:tableRowclassName,children:[jsxRuntimeExports.jsx("td",{children:k}),jsxRuntimeExports.jsx("td",{children:H.description||"-"}),jsxRuntimeExports.jsx("td",{children:H.unit||"-"})]},k))})]})]})})]})}const buttonClassName="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 hover:cursor-pointer disabled:bg-gray-200 disabled:opacity-50 disabled:cursor-default";function PaginationHandler({currentPage:e,totalPages:r,metaData:s,onPageChange:o}){if(!r||r<1)return null;const c=s?.data_returned||"N/A",x=e>1;let u=!1;return(s?.more_data_available===!0||e<r)&&(u=!0),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-slate-700 text-sm text-center w-full md:w-auto",children:`Filtered results: ${c} of ${s.data_available} | Showing page ${e} of ${r}`}),jsxRuntimeExports.jsx("button",{onClick:()=>o(1),disabled:e===1,className:buttonClassName,children:jsxRuntimeExports.jsx(FirstIcon,{})}),jsxRuntimeExports.jsx("button",{onClick:()=>o(e-1),disabled:!x,className:buttonClassName,children:jsxRuntimeExports.jsx(PreviousIcon,{})}),jsxRuntimeExports.jsx("button",{onClick:()=>o(e+1),disabled:!u,className:buttonClassName,children:jsxRuntimeExports.jsx(NextIcon,{})}),jsxRuntimeExports.jsx("button",{onClick:()=>o(r),disabled:e===r,className:buttonClassName,children:jsxRuntimeExports.jsx(LastIcon,{})})]})}const LayoutGroupContext=reactExports.createContext({});function useConstant(e){const r=reactExports.useRef(null);return r.current===null&&(r.current=e()),r.current}const isBrowser$1=typeof window<"u",useIsomorphicLayoutEffect=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(e,r){e.indexOf(r)===-1&&e.push(r)}function removeItem(e,r){const s=e.indexOf(r);s>-1&&e.splice(s,1)}const clamp=(e,r,s)=>s>r?r:s<e?e:s;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function isObject(e){return typeof e=="object"&&e!==null}const isZeroValueString=e=>/^0[^.\s]+$/u.test(e);function memo(e){let r;return()=>(r===void 0&&(r=e()),r)}const noop=e=>e,combineFunctions=(e,r)=>s=>r(e(s)),pipe=(...e)=>e.reduce(combineFunctions),progress=(e,r,s)=>{const o=r-e;return o===0?1:(s-e)/o};class SubscriptionManager{constructor(){this.subscriptions=[]}add(r){return addUniqueItem(this.subscriptions,r),()=>removeItem(this.subscriptions,r)}notify(r,s,o){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](r,s,o);else for(let x=0;x<c;x++){const u=this.subscriptions[x];u&&u(r,s,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=e=>e*1e3,millisecondsToSeconds=e=>e/1e3;function velocityPerSecond(e,r){return r?e*(1e3/r):0}const calcBezier=(e,r,s)=>(((1-3*s+3*r)*e+(3*s-6*r))*e+3*r)*e,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(e,r,s,o,c){let x,u,p=0;do u=r+(s-r)/2,x=calcBezier(u,o,c)-e,x>0?s=u:r=u;while(Math.abs(x)>subdivisionPrecision&&++p<subdivisionMaxIterations);return u}function cubicBezier(e,r,s,o){if(e===r&&s===o)return noop;const c=x=>binarySubdivide(x,0,1,e,s);return x=>x===0||x===1?x:calcBezier(c(x),r,o)}const mirrorEasing=e=>r=>r<=.5?e(2*r)/2:(2-e(2*(1-r)))/2,reverseEasing=e=>r=>1-e(1-r),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=e=>(e*=2)<1?.5*backIn(e):.5*(2-Math.pow(2,-10*(e-1))),circIn=e=>1-Math.sin(Math.acos(e)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=e=>Array.isArray(e)&&typeof e[0]!="number",isBezierDefinition=e=>Array.isArray(e)&&typeof e[0]=="number",easingLookup={linear:noop,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=e=>typeof e=="string",easingDefinitionToFunction=e=>{if(isBezierDefinition(e)){invariant(e.length===4);const[r,s,o,c]=e;return cubicBezier(r,s,o,c)}else if(isValidEasing(e))return easingLookup[e];return e},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(e,r){let s=new Set,o=new Set,c=!1,x=!1;const u=new WeakSet;let p={delta:0,timestamp:0,isProcessing:!1};function d(C){u.has(C)&&(w.schedule(C),e()),C(p)}const w={schedule:(C,v=!1,k=!1)=>{const P=k&&c?s:o;return v&&u.add(C),P.has(C)||P.add(C),C},cancel:C=>{o.delete(C),u.delete(C)},process:C=>{if(p=C,c){x=!0;return}c=!0,[s,o]=[o,s],s.forEach(d),s.clear(),c=!1,x&&(x=!1,w.process(C))}};return w}const maxElapsed=40;function createRenderBatcher(e,r){let s=!1,o=!0;const c={delta:0,timestamp:0,isProcessing:!1},x=()=>s=!0,u=stepsOrder.reduce((E,K)=>(E[K]=createRenderStep(x),E),{}),{setup:p,read:d,resolveKeyframes:w,preUpdate:C,update:v,preRender:k,render:H,postRender:P}=u,j=()=>{const E=MotionGlobalConfig.useManualTiming?c.timestamp:performance.now();s=!1,MotionGlobalConfig.useManualTiming||(c.delta=o?1e3/60:Math.max(Math.min(E-c.timestamp,maxElapsed),1)),c.timestamp=E,c.isProcessing=!0,p.process(c),d.process(c),w.process(c),C.process(c),v.process(c),k.process(c),H.process(c),P.process(c),c.isProcessing=!1,s&&r&&(o=!1,e(j))},se=()=>{s=!0,o=!0,c.isProcessing||e(j)};return{schedule:stepsOrder.reduce((E,K)=>{const Y=u[K];return E[K]=(re,ue=!1,q=!1)=>(s||se(),Y.schedule(re,ue,q)),E},{}),cancel:E=>{for(let K=0;K<stepsOrder.length;K++)u[stepsOrder[K]].cancel(E)},state:c,steps:u}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop,!0);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:e=>{now=e,queueMicrotask(clearTime)}},checkStringStartsWith=e=>r=>typeof r=="string"&&r.startsWith(e),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=e=>startsAsVariableToken(e)?singleCssVariableRegex.test(e.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function containsCSSVariable(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const number={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},alpha={...number,transform:e=>clamp(0,1,e)},scale={...number,default:1},sanitize=e=>Math.round(e*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(e){return e==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(e,r)=>s=>!!(typeof s=="string"&&singleColorRegex.test(s)&&s.startsWith(e)||r&&!isNullish(s)&&Object.prototype.hasOwnProperty.call(s,r)),splitColor=(e,r,s)=>o=>{if(typeof o!="string")return o;const[c,x,u,p]=o.match(floatRegex);return{[e]:parseFloat(c),[r]:parseFloat(x),[s]:parseFloat(u),alpha:p!==void 0?parseFloat(p):1}},clampRgbUnit=e=>clamp(0,255,e),rgbUnit={...number,transform:e=>Math.round(clampRgbUnit(e))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:e,green:r,blue:s,alpha:o=1})=>"rgba("+rgbUnit.transform(e)+", "+rgbUnit.transform(r)+", "+rgbUnit.transform(s)+", "+sanitize(alpha.transform(o))+")"};function parseHex(e){let r="",s="",o="",c="";return e.length>5?(r=e.substring(1,3),s=e.substring(3,5),o=e.substring(5,7),c=e.substring(7,9)):(r=e.substring(1,2),s=e.substring(2,3),o=e.substring(3,4),c=e.substring(4,5),r+=r,s+=s,o+=o,c+=c),{red:parseInt(r,16),green:parseInt(s,16),blue:parseInt(o,16),alpha:c?parseInt(c,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=e=>({test:r=>typeof r=="string"&&r.endsWith(e)&&r.split(" ").length===1,parse:parseFloat,transform:r=>`${r}${e}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:e=>percent.parse(e)/100,transform:e=>percent.transform(e*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:e,saturation:r,lightness:s,alpha:o=1})=>"hsla("+Math.round(e)+", "+percent.transform(sanitize(r))+", "+percent.transform(sanitize(s))+", "+sanitize(alpha.transform(o))+")"},color={test:e=>rgba.test(e)||hex.test(e)||hsla.test(e),parse:e=>rgba.test(e)?rgba.parse(e):hsla.test(e)?hsla.parse(e):hex.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?rgba.transform(e):hsla.transform(e),getAnimatableNone:e=>{const r=color.parse(e);return r.alpha=0,color.transform(r)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(e){return isNaN(e)&&typeof e=="string"&&(e.match(floatRegex)?.length||0)+(e.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(e){const r=e.toString(),s=[],o={color:[],number:[],var:[]},c=[];let x=0;const p=r.replace(complexRegex,d=>(color.test(d)?(o.color.push(x),c.push(COLOR_TOKEN),s.push(color.parse(d))):d.startsWith(VAR_FUNCTION_TOKEN)?(o.var.push(x),c.push(VAR_TOKEN),s.push(d)):(o.number.push(x),c.push(NUMBER_TOKEN),s.push(parseFloat(d))),++x,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:s,split:p,indexes:o,types:c}}function parseComplexValue(e){return analyseComplexValue(e).values}function createTransformer(e){const{split:r,types:s}=analyseComplexValue(e),o=r.length;return c=>{let x="";for(let u=0;u<o;u++)if(x+=r[u],c[u]!==void 0){const p=s[u];p===NUMBER_TOKEN?x+=sanitize(c[u]):p===COLOR_TOKEN?x+=color.transform(c[u]):x+=c[u]}return x}}const convertNumbersToZero=e=>typeof e=="number"?0:color.test(e)?color.getAnimatableNone(e):e;function getAnimatableNone$1(e){const r=parseComplexValue(e);return createTransformer(e)(r.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(e,r,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(r-e)*6*s:s<1/2?r:s<2/3?e+(r-e)*(2/3-s)*6:e}function hslaToRgba({hue:e,saturation:r,lightness:s,alpha:o}){e/=360,r/=100,s/=100;let c=0,x=0,u=0;if(!r)c=x=u=s;else{const p=s<.5?s*(1+r):s+r-s*r,d=2*s-p;c=hueToRgb(d,p,e+1/3),x=hueToRgb(d,p,e),u=hueToRgb(d,p,e-1/3)}return{red:Math.round(c*255),green:Math.round(x*255),blue:Math.round(u*255),alpha:o}}function mixImmediate(e,r){return s=>s>0?r:e}const mixNumber$1=(e,r,s)=>e+(r-e)*s,mixLinearColor=(e,r,s)=>{const o=e*e,c=s*(r*r-o)+o;return c<0?0:Math.sqrt(c)},colorTypes=[hex,rgba,hsla],getColorType=e=>colorTypes.find(r=>r.test(e));function asRGBA(e){const r=getColorType(e);if(!r)return!1;let s=r.parse(e);return r===hsla&&(s=hslaToRgba(s)),s}const mixColor=(e,r)=>{const s=asRGBA(e),o=asRGBA(r);if(!s||!o)return mixImmediate(e,r);const c={...s};return x=>(c.red=mixLinearColor(s.red,o.red,x),c.green=mixLinearColor(s.green,o.green,x),c.blue=mixLinearColor(s.blue,o.blue,x),c.alpha=mixNumber$1(s.alpha,o.alpha,x),rgba.transform(c))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(e,r){return invisibleValues.has(e)?s=>s<=0?e:r:s=>s>=1?r:e}function mixNumber(e,r){return s=>mixNumber$1(e,r,s)}function getMixer(e){return typeof e=="number"?mixNumber:typeof e=="string"?isCSSVariableToken(e)?mixImmediate:color.test(e)?mixColor:mixComplex:Array.isArray(e)?mixArray:typeof e=="object"?color.test(e)?mixColor:mixObject:mixImmediate}function mixArray(e,r){const s=[...e],o=s.length,c=e.map((x,u)=>getMixer(x)(x,r[u]));return x=>{for(let u=0;u<o;u++)s[u]=c[u](x);return s}}function mixObject(e,r){const s={...e,...r},o={};for(const c in s)e[c]!==void 0&&r[c]!==void 0&&(o[c]=getMixer(e[c])(e[c],r[c]));return c=>{for(const x in o)s[x]=o[x](c);return s}}function matchOrder(e,r){const s=[],o={color:0,var:0,number:0};for(let c=0;c<r.values.length;c++){const x=r.types[c],u=e.indexes[x][o[x]],p=e.values[u]??0;s[c]=p,o[x]++}return s}const mixComplex=(e,r)=>{const s=complex.createTransformer(r),o=analyseComplexValue(e),c=analyseComplexValue(r);return o.indexes.var.length===c.indexes.var.length&&o.indexes.color.length===c.indexes.color.length&&o.indexes.number.length>=c.indexes.number.length?invisibleValues.has(e)&&!c.values.length||invisibleValues.has(r)&&!o.values.length?mixVisibility(e,r):pipe(mixArray(matchOrder(o,c),c.values),s):mixImmediate(e,r)};function mix(e,r,s){return typeof e=="number"&&typeof r=="number"&&typeof s=="number"?mixNumber$1(e,r,s):getMixer(e)(e,r)}const frameloopDriver=e=>{const r=({timestamp:s})=>e(s);return{start:(s=!0)=>frame.update(r,s),stop:()=>cancelFrame(r),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(e,r,s=10)=>{let o="";const c=Math.max(Math.round(r/s),2);for(let x=0;x<c;x++)o+=Math.round(e(x/(c-1))*1e4)/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(e){let r=0;const s=50;let o=e.next(r);for(;!o.done&&r<maxGeneratorDuration;)r+=s,o=e.next(r);return r>=maxGeneratorDuration?1/0:r}function createGeneratorEasing(e,r=100,s){const o=s({...e,keyframes:[0,r]}),c=Math.min(calcGeneratorDuration(o),maxGeneratorDuration);return{type:"keyframes",ease:x=>o.next(c*x).value/r,duration:millisecondsToSeconds(c)}}const velocitySampleDuration=5;function calcGeneratorVelocity(e,r,s){const o=Math.max(r-velocitySampleDuration,0);return velocityPerSecond(s-e(o),r-o)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:e=springDefaults.duration,bounce:r=springDefaults.bounce,velocity:s=springDefaults.velocity,mass:o=springDefaults.mass}){let c,x,u=1-r;u=clamp(springDefaults.minDamping,springDefaults.maxDamping,u),e=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(e)),u<1?(c=w=>{const C=w*u,v=C*e,k=C-s,H=calcAngularFreq(w,u),P=Math.exp(-v);return safeMin-k/H*P},x=w=>{const v=w*u*e,k=v*s+s,H=Math.pow(u,2)*Math.pow(w,2)*e,P=Math.exp(-v),j=calcAngularFreq(Math.pow(w,2),u);return(-c(w)+safeMin>0?-1:1)*((k-H)*P)/j}):(c=w=>{const C=Math.exp(-w*e),v=(w-s)*e+1;return-safeMin+C*v},x=w=>{const C=Math.exp(-w*e),v=(s-w)*(e*e);return C*v});const p=5/e,d=approximateRoot(c,x,p);if(e=secondsToMilliseconds(e),isNaN(d))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:e};{const w=Math.pow(d,2)*o;return{stiffness:w,damping:u*2*Math.sqrt(o*w),duration:e}}}const rootIterations=12;function approximateRoot(e,r,s){let o=s;for(let c=1;c<rootIterations;c++)o=o-e(o)/r(o);return o}function calcAngularFreq(e,r){return e*Math.sqrt(1-r*r)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(e,r){return r.some(s=>e[s]!==void 0)}function getSpringOptions(e){let r={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...e};if(!isSpringType(e,physicsKeys)&&isSpringType(e,durationKeys))if(e.visualDuration){const s=e.visualDuration,o=2*Math.PI/(s*1.2),c=o*o,x=2*clamp(.05,1,1-(e.bounce||0))*Math.sqrt(c);r={...r,mass:springDefaults.mass,stiffness:c,damping:x}}else{const s=findSpring(e);r={...r,...s,mass:springDefaults.mass},r.isResolvedFromDuration=!0}return r}function spring(e=springDefaults.visualDuration,r=springDefaults.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:r}:e;let{restSpeed:o,restDelta:c}=s;const x=s.keyframes[0],u=s.keyframes[s.keyframes.length-1],p={done:!1,value:x},{stiffness:d,damping:w,mass:C,duration:v,velocity:k,isResolvedFromDuration:H}=getSpringOptions({...s,velocity:-millisecondsToSeconds(s.velocity||0)}),P=k||0,j=w/(2*Math.sqrt(d*C)),se=u-x,ce=millisecondsToSeconds(Math.sqrt(d/C)),ne=Math.abs(se)<5;o||(o=ne?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),c||(c=ne?springDefaults.restDelta.granular:springDefaults.restDelta.default);let E;if(j<1){const Y=calcAngularFreq(ce,j);E=re=>{const ue=Math.exp(-j*ce*re);return u-ue*((P+j*ce*se)/Y*Math.sin(Y*re)+se*Math.cos(Y*re))}}else if(j===1)E=Y=>u-Math.exp(-ce*Y)*(se+(P+ce*se)*Y);else{const Y=ce*Math.sqrt(j*j-1);E=re=>{const ue=Math.exp(-j*ce*re),q=Math.min(Y*re,300);return u-ue*((P+j*ce*se)*Math.sinh(q)+Y*se*Math.cosh(q))/Y}}const K={calculatedDuration:H&&v||null,next:Y=>{const re=E(Y);if(H)p.done=Y>=v;else{let ue=Y===0?P:0;j<1&&(ue=Y===0?secondsToMilliseconds(P):calcGeneratorVelocity(E,Y,re));const q=Math.abs(ue)<=o,he=Math.abs(u-re)<=c;p.done=q&&he}return p.value=p.done?u:re,p},toString:()=>{const Y=Math.min(calcGeneratorDuration(K),maxGeneratorDuration),re=generateLinearEasing(ue=>K.next(Y*ue).value,Y,30);return Y+"ms "+re},toTransition:()=>{}};return K}spring.applyToOptions=e=>{const r=createGeneratorEasing(e,100,spring);return e.ease=r.ease,e.duration=secondsToMilliseconds(r.duration),e.type="keyframes",e};function inertia({keyframes:e,velocity:r=0,power:s=.8,timeConstant:o=325,bounceDamping:c=10,bounceStiffness:x=500,modifyTarget:u,min:p,max:d,restDelta:w=.5,restSpeed:C}){const v=e[0],k={done:!1,value:v},H=q=>p!==void 0&&q<p||d!==void 0&&q>d,P=q=>p===void 0?d:d===void 0||Math.abs(p-q)<Math.abs(d-q)?p:d;let j=s*r;const se=v+j,ce=u===void 0?se:u(se);ce!==se&&(j=ce-v);const ne=q=>-j*Math.exp(-q/o),E=q=>ce+ne(q),K=q=>{const he=ne(q),Oe=E(q);k.done=Math.abs(he)<=w,k.value=k.done?ce:Oe};let Y,re;const ue=q=>{H(k.value)&&(Y=q,re=spring({keyframes:[k.value,P(k.value)],velocity:calcGeneratorVelocity(E,q,k.value),damping:c,stiffness:x,restDelta:w,restSpeed:C}))};return ue(0),{calculatedDuration:null,next:q=>{let he=!1;return!re&&Y===void 0&&(he=!0,K(q),ue(q)),Y!==void 0&&q>=Y?re.next(q-Y):(!he&&K(q),k)}}}function createMixers(e,r,s){const o=[],c=s||MotionGlobalConfig.mix||mix,x=e.length-1;for(let u=0;u<x;u++){let p=c(e[u],e[u+1]);if(r){const d=Array.isArray(r)?r[u]||noop:r;p=pipe(d,p)}o.push(p)}return o}function interpolate(e,r,{clamp:s=!0,ease:o,mixer:c}={}){const x=e.length;if(invariant(x===r.length),x===1)return()=>r[0];if(x===2&&r[0]===r[1])return()=>r[1];const u=e[0]===e[1];e[0]>e[x-1]&&(e=[...e].reverse(),r=[...r].reverse());const p=createMixers(r,o,c),d=p.length,w=C=>{if(u&&C<e[0])return r[0];let v=0;if(d>1)for(;v<e.length-2&&!(C<e[v+1]);v++);const k=progress(e[v],e[v+1],C);return p[v](k)};return s?C=>w(clamp(e[0],e[x-1],C)):w}function fillOffset(e,r){const s=e[e.length-1];for(let o=1;o<=r;o++){const c=progress(0,r,o);e.push(mixNumber$1(s,1,c))}}function defaultOffset(e){const r=[0];return fillOffset(r,e.length-1),r}function convertOffsetToTimes(e,r){return e.map(s=>s*r)}function defaultEasing(e,r){return e.map(()=>r||easeInOut).splice(0,e.length-1)}function keyframes({duration:e=300,keyframes:r,times:s,ease:o="easeInOut"}){const c=isEasingArray(o)?o.map(easingDefinitionToFunction):easingDefinitionToFunction(o),x={done:!1,value:r[0]},u=convertOffsetToTimes(s&&s.length===r.length?s:defaultOffset(r),e),p=interpolate(u,r,{ease:Array.isArray(c)?c:defaultEasing(r,c)});return{calculatedDuration:e,next:d=>(x.value=p(d),x.done=d>=e,x)}}const isNotNull$1=e=>e!==null;function getFinalKeyframe$1(e,{repeat:r,repeatType:s="loop"},o,c=1){const x=e.filter(isNotNull$1),p=c<0||r&&s!=="loop"&&r%2===1?0:x.length-1;return!p||o===void 0?x[p]:o}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(e){typeof e.type=="string"&&(e.type=transitionTypeMap[e.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(r=>{this.resolve=r})}notifyFinished(){this.resolve()}then(r,s){return this.finished.then(r,s)}}const percentToProgress=e=>e/100;class JSAnimation extends WithPromise{constructor(r){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=r,this.initAnimation(),this.play(),r.autoplay===!1&&this.pause()}initAnimation(){const{options:r}=this;replaceTransitionType(r);const{type:s=keyframes,repeat:o=0,repeatDelay:c=0,repeatType:x,velocity:u=0}=r;let{keyframes:p}=r;const d=s||keyframes;d!==keyframes&&typeof p[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(p[0],p[1])),p=[0,100]);const w=d({...r,keyframes:p});x==="mirror"&&(this.mirroredGenerator=d({...r,keyframes:[...p].reverse(),velocity:-u})),w.calculatedDuration===null&&(w.calculatedDuration=calcGeneratorDuration(w));const{calculatedDuration:C}=w;this.calculatedDuration=C,this.resolvedDuration=C+c,this.totalDuration=this.resolvedDuration*(o+1)-c,this.generator=w}updateTime(r){const s=Math.round(r-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(r,s=!1){const{generator:o,totalDuration:c,mixKeyframes:x,mirroredGenerator:u,resolvedDuration:p,calculatedDuration:d}=this;if(this.startTime===null)return o.next(0);const{delay:w=0,keyframes:C,repeat:v,repeatType:k,repeatDelay:H,type:P,onUpdate:j,finalKeyframe:se}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,r):this.speed<0&&(this.startTime=Math.min(r-c/this.speed,this.startTime)),s?this.currentTime=r:this.updateTime(r);const ce=this.currentTime-w*(this.playbackSpeed>=0?1:-1),ne=this.playbackSpeed>=0?ce<0:ce>c;this.currentTime=Math.max(ce,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let E=this.currentTime,K=o;if(v){const q=Math.min(this.currentTime,c)/p;let he=Math.floor(q),Oe=q%1;!Oe&&q>=1&&(Oe=1),Oe===1&&he--,he=Math.min(he,v+1),he%2&&(k==="reverse"?(Oe=1-Oe,H&&(Oe-=H/p)):k==="mirror"&&(K=u)),E=clamp(0,1,Oe)*p}const Y=ne?{done:!1,value:C[0]}:K.next(E);x&&(Y.value=x(Y.value));let{done:re}=Y;!ne&&d!==null&&(re=this.playbackSpeed>=0?this.currentTime>=c:this.currentTime<=0);const ue=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&re);return ue&&P!==inertia&&(Y.value=getFinalKeyframe$1(C,this.options,se,this.speed)),j&&j(Y.value),ue&&this.finish(),Y}then(r,s){return this.finished.then(r,s)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get iterationDuration(){const{delay:r=0}=this.options||{};return this.duration+millisecondsToSeconds(r)}get time(){return millisecondsToSeconds(this.currentTime)}set time(r){r=secondsToMilliseconds(r),this.currentTime=r,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=r:this.driver&&(this.startTime=this.driver.now()-r/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(r){this.updateTime(time.now());const s=this.playbackSpeed!==r;this.playbackSpeed=r,s&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:r=frameloopDriver,startTime:s}=this.options;this.driver||(this.driver=r(c=>this.tick(c))),this.options.onPlay?.();const o=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=o):this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime||(this.startTime=s??o),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(r){return this.startTime=0,this.tick(r,!0)}attachTimeline(r){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),r.observe(this)}}function fillWildcards(e){for(let r=1;r<e.length;r++)e[r]??(e[r]=e[r-1])}const radToDeg=e=>e*180/Math.PI,rotate=e=>{const r=radToDeg(Math.atan2(e[1],e[0]));return rebaseAngle(r)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate,rotateZ:rotate,skewX:e=>radToDeg(Math.atan(e[1])),skewY:e=>radToDeg(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},rebaseAngle=e=>(e=e%360,e<0&&(e+=360),e),rotateZ=rotate,scaleX=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),scaleY=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:e=>(scaleX(e)+scaleY(e))/2,rotateX:e=>rebaseAngle(radToDeg(Math.atan2(e[6],e[5]))),rotateY:e=>rebaseAngle(radToDeg(Math.atan2(-e[2],e[0]))),rotateZ,rotate:rotateZ,skewX:e=>radToDeg(Math.atan(e[4])),skewY:e=>radToDeg(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function defaultTransformValue(e){return e.includes("scale")?1:0}function parseValueFromTransform(e,r){if(!e||e==="none")return defaultTransformValue(r);const s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,c;if(s)o=matrix3dParsers,c=s;else{const p=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=matrix2dParsers,c=p}if(!c)return defaultTransformValue(r);const x=o[r],u=c[1].split(",").map(convertTransformToNumber);return typeof x=="function"?x(u):u[x]}const readTransformValue=(e,r)=>{const{transform:s="none"}=getComputedStyle(e);return parseValueFromTransform(s,r)};function convertTransformToNumber(e){return parseFloat(e.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=e=>e===number||e===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(e=>!transformKeys.has(e));function removeNonTranslationalTransform(e){const r=[];return nonTranslationalTransformKeys.forEach(s=>{const o=e.getValue(s);o!==void 0&&(r.push([s,o.get()]),o.set(s.startsWith("scale")?1:0))}),r}const positionalValues={width:({x:e},{paddingLeft:r="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(r)-parseFloat(s),height:({y:e},{paddingTop:r="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(r)-parseFloat(s),top:(e,{top:r})=>parseFloat(r),left:(e,{left:r})=>parseFloat(r),bottom:({y:e},{top:r})=>parseFloat(r)+(e.max-e.min),right:({x:e},{left:r})=>parseFloat(r)+(e.max-e.min),x:(e,{transform:r})=>parseValueFromTransform(r,"x"),y:(e,{transform:r})=>parseValueFromTransform(r,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const e=Array.from(toResolve).filter(o=>o.needsMeasurement),r=new Set(e.map(o=>o.element)),s=new Map;r.forEach(o=>{const c=removeNonTranslationalTransform(o);c.length&&(s.set(o,c),o.render())}),e.forEach(o=>o.measureInitialState()),r.forEach(o=>{o.render();const c=s.get(o);c&&c.forEach(([x,u])=>{o.getValue(x)?.set(u)})}),e.forEach(o=>o.measureEndState()),e.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(e=>e.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(r,s,o,c,x,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...r],this.onComplete=s,this.name=o,this.motionValue=c,this.element=x,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:r,name:s,element:o,motionValue:c}=this;if(r[0]===null){const x=c?.get(),u=r[r.length-1];if(x!==void 0)r[0]=x;else if(o&&s){const p=o.readValue(s,u);p!=null&&(r[0]=p)}r[0]===void 0&&(r[0]=u),c&&x===void 0&&c.set(r[0])}fillWildcards(r)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(r=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,r),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=e=>e.startsWith("--");function setStyle(e,r,s){isCSSVar(r)?e.style.setProperty(r,s):e.style[r]=s}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(e,r){const s=memo(e);return()=>supportsFlags[r]??s()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([e,r,s,o])=>`cubic-bezier(${e}, ${r}, ${s}, ${o})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(e,r){if(e)return typeof e=="function"?supportsLinearEasing()?generateLinearEasing(e,r):"ease-out":isBezierDefinition(e)?cubicBezierAsString(e):Array.isArray(e)?e.map(s=>mapEasingToNativeEasing(s,r)||supportedWaapiEasing.easeOut):supportedWaapiEasing[e]}function startWaapiAnimation(e,r,s,{delay:o=0,duration:c=300,repeat:x=0,repeatType:u="loop",ease:p="easeOut",times:d}={},w=void 0){const C={[r]:s};d&&(C.offset=d);const v=mapEasingToNativeEasing(p,c);Array.isArray(v)&&(C.easing=v);const k={delay:o,duration:c,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:x+1,direction:u==="reverse"?"alternate":"normal"};return w&&(k.pseudoElement=w),e.animate(C,k)}function isGenerator(e){return typeof e=="function"&&"applyToOptions"in e}function applyGeneratorOptions({type:e,...r}){return isGenerator(e)&&supportsLinearEasing()?e.applyToOptions(r):(r.duration??(r.duration=300),r.ease??(r.ease="easeOut"),r)}class NativeAnimation extends WithPromise{constructor(r){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!r)return;const{element:s,name:o,keyframes:c,pseudoElement:x,allowFlatten:u=!1,finalKeyframe:p,onComplete:d}=r;this.isPseudoElement=!!x,this.allowFlatten=u,this.options=r,invariant(typeof r.type!="string");const w=applyGeneratorOptions(r);this.animation=startWaapiAnimation(s,o,c,w,x),w.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!x){const C=getFinalKeyframe$1(c,this.options,p,this.speed);this.updateMotionValue?this.updateMotionValue(C):setStyle(s,o,C),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:r}=this;r==="idle"||r==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const r=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(r))}get iterationDuration(){const{delay:r=0}=this.options||{};return this.duration+millisecondsToSeconds(r)}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(r){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(r)}get speed(){return this.animation.playbackRate}set speed(r){r<0&&(this.finishedTime=null),this.animation.playbackRate=r}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(r){this.manualStartTime=this.animation.startTime=r}attachTimeline({timeline:r,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,r&&supportsScrollTimeline()?(this.animation.timeline=r,noop):s(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(e){return e in unsupportedEasingFunctions}function replaceStringEasing(e){typeof e.ease=="string"&&isUnsupportedEase(e.ease)&&(e.ease=unsupportedEasingFunctions[e.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(r){replaceStringEasing(r),replaceTransitionType(r),super(r),r.startTime!==void 0&&(this.startTime=r.startTime),this.options=r}updateMotionValue(r){const{motionValue:s,onUpdate:o,onComplete:c,element:x,...u}=this.options;if(!s)return;if(r!==void 0){s.set(r);return}const p=new JSAnimation({...u,autoplay:!1}),d=Math.max(sampleDelta,time.now()-this.startTime),w=clamp(0,sampleDelta,d-sampleDelta);s.setWithVelocity(p.sample(Math.max(0,d-w)).value,p.sample(d).value,w),p.stop()}}const isAnimatable=(e,r)=>r==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(complex.test(e)||e==="0")&&!e.startsWith("url("));function hasKeyframesChanged(e){const r=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==r)return!0}function canAnimate(e,r,s,o){const c=e[0];if(c===null)return!1;if(r==="display"||r==="visibility")return!0;const x=e[e.length-1],u=isAnimatable(c,r),p=isAnimatable(x,r);return!u||!p?!1:hasKeyframesChanged(e)||(s==="spring"||isGenerator(s))&&o}function makeAnimationInstant(e){e.duration=0,e.type="keyframes"}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(e){const{motionValue:r,name:s,repeatDelay:o,repeatType:c,damping:x,type:u}=e;if(!(r?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:w}=r.owner.getProps();return supportsWaapi()&&s&&acceleratedValues.has(s)&&(s!=="transform"||!w)&&!d&&!o&&c!=="mirror"&&x!==0&&u!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:r=!0,delay:s=0,type:o="keyframes",repeat:c=0,repeatDelay:x=0,repeatType:u="loop",keyframes:p,name:d,motionValue:w,element:C,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();const k={autoplay:r,delay:s,type:o,repeat:c,repeatDelay:x,repeatType:u,name:d,motionValue:w,element:C,...v},H=C?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new H(p,(P,j,se)=>this.onKeyframesResolved(P,j,k,!se),d,w,C),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(r,s,o,c){this.keyframeResolver=void 0;const{name:x,type:u,velocity:p,delay:d,isHandoff:w,onUpdate:C}=o;this.resolvedAt=time.now(),canAnimate(r,x,u,p)||((MotionGlobalConfig.instantAnimations||!d)&&C?.(getFinalKeyframe$1(r,o,s)),r[0]=r[r.length-1],makeAnimationInstant(o),o.repeat=0);const k={startTime:c?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...o,keyframes:r},H=!w&&supportsBrowserAnimation(k),P=k.motionValue?.owner?.current,j=H?new NativeAnimationExtended({...k,element:P}):new JSAnimation(k);j.finished.then(()=>{this.notifyFinished()}).catch(noop),this.pendingTimeline&&(this.stopTimeline=j.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=j}get finished(){return this._animation?this.animation.finished:this._finished}then(r,s){return this.finished.finally(r).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(r){this.animation.time=r}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(r){this.animation.speed=r}get startTime(){return this.animation.startTime}attachTimeline(r){return this._animation?this.stopTimeline=this.animation.attachTimeline(r):this.pendingTimeline=r,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function calcChildStagger(e,r,s,o=0,c=1){const x=Array.from(e).sort((w,C)=>w.sortNodePosition(C)).indexOf(r),u=e.size,p=(u-1)*o;return typeof s=="function"?s(x,u):c===1?x*o:p-x*o}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(e){const r=splitCSSVariableRegex.exec(e);if(!r)return[,];const[,s,o,c]=r;return[`--${s??o}`,c]}function getVariableValue(e,r,s=1){const[o,c]=parseCSSVariable(e);if(!o)return;const x=window.getComputedStyle(r).getPropertyValue(o);if(x){const u=x.trim();return isNumericalString(u)?parseFloat(u):u}return isCSSVariableToken(c)?getVariableValue(c,r,s+1):c}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(e,{keyframes:r})=>r.length>2?keyframesTransition:transformProps.has(e)?e.startsWith("scale")?criticallyDampedSpring(r[1]):underDampedSpring:ease,isNotNull=e=>e!==null;function getFinalKeyframe(e,{repeat:r,repeatType:s="loop"},o){const c=e.filter(isNotNull),x=r&&s!=="loop"&&r%2===1?0:c.length-1;return c[x]}function getValueTransition(e,r){return e?.[r]??e?.default??e}function isTransitionDefined({when:e,delay:r,delayChildren:s,staggerChildren:o,staggerDirection:c,repeat:x,repeatType:u,repeatDelay:p,from:d,elapsed:w,...C}){return!!Object.keys(C).length}const animateMotionValue=(e,r,s,o={},c,x)=>u=>{const p=getValueTransition(o,e)||{},d=p.delay||o.delay||0;let{elapsed:w=0}=o;w=w-secondsToMilliseconds(d);const C={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:r.getVelocity(),...p,delay:-w,onUpdate:k=>{r.set(k),p.onUpdate&&p.onUpdate(k)},onComplete:()=>{u(),p.onComplete&&p.onComplete()},name:e,motionValue:r,element:x?void 0:c};isTransitionDefined(p)||Object.assign(C,getDefaultTransition(e,C)),C.duration&&(C.duration=secondsToMilliseconds(C.duration)),C.repeatDelay&&(C.repeatDelay=secondsToMilliseconds(C.repeatDelay)),C.from!==void 0&&(C.keyframes[0]=C.from);let v=!1;if((C.type===!1||C.duration===0&&!C.repeatDelay)&&(makeAnimationInstant(C),C.delay===0&&(v=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(v=!0,makeAnimationInstant(C),C.delay=0),C.allowFlatten=!p.type&&!p.ease,v&&!x&&r.get()!==void 0){const k=getFinalKeyframe(C.keyframes,p);if(k!==void 0){frame.update(()=>{C.onUpdate(k),C.onComplete()});return}}return p.isSync?new JSAnimation(C):new AsyncMotionValueAnimation(C)};function getValueState(e){const r=[{},{}];return e?.values.forEach((s,o)=>{r[0][o]=s.get(),r[1][o]=s.getVelocity()}),r}function resolveVariantFromProps(e,r,s,o){if(typeof r=="function"){const[c,x]=getValueState(o);r=r(s!==void 0?s:e.custom,c,x)}if(typeof r=="string"&&(r=e.variants&&e.variants[r]),typeof r=="function"){const[c,x]=getValueState(o);r=r(s!==void 0?s:e.custom,c,x)}return r}function resolveVariant(e,r,s){const o=e.getProps();return resolveVariantFromProps(o,r,s!==void 0?s:o.custom,e)}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),MAX_VELOCITY_DELTA=30,isFloat=e=>!isNaN(parseFloat(e));class MotionValue{constructor(r,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=o=>{const c=time.now();if(this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const x of this.dependents)x.dirty()},this.hasAnimated=!1,this.setCurrent(r),this.owner=s.owner}setCurrent(r){this.current=r,this.updatedAt=time.now(),this.canTrackVelocity===null&&r!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(r=this.current){this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt}onChange(r){return this.on("change",r)}on(r,s){this.events[r]||(this.events[r]=new SubscriptionManager);const o=this.events[r].add(s);return r==="change"?()=>{o(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const r in this.events)this.events[r].clear()}attach(r,s){this.passiveEffect=r,this.stopPassiveEffect=s}set(r){this.passiveEffect?this.passiveEffect(r,this.updateAndNotify):this.updateAndNotify(r)}setWithVelocity(r,s,o){this.set(s),this.prev=void 0,this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt-o}jump(r,s=!0){this.updateAndNotify(r),this.prev=r,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(r){this.dependents||(this.dependents=new Set),this.dependents.add(r)}removeDependent(r){this.dependents&&this.dependents.delete(r)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const r=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||r-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(r){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=r(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(e,r){return new MotionValue(e,r)}const isKeyframesTarget=e=>Array.isArray(e);function setMotionValue(e,r,s){e.hasValue(r)?e.getValue(r).set(s):e.addValue(r,motionValue(s))}function resolveFinalValueInKeyframes(e){return isKeyframesTarget(e)?e[e.length-1]||0:e}function setTarget(e,r){const s=resolveVariant(e,r);let{transitionEnd:o={},transition:c={},...x}=s||{};x={...x,...o};for(const u in x){const p=resolveFinalValueInKeyframes(x[u]);setMotionValue(e,u,p)}}const isMotionValue=e=>!!(e&&e.getVelocity);function isWillChangeMotionValue(e){return!!(isMotionValue(e)&&e.add)}function addValueToWillChange(e,r){const s=e.getValue("willChange");if(isWillChangeMotionValue(s))return s.add(r);if(!s&&MotionGlobalConfig.WillChange){const o=new MotionGlobalConfig.WillChange("auto");e.addValue("willChange",o),o.add(r)}}function camelToDash(e){return e.replace(/([A-Z])/g,r=>`-${r.toLowerCase()}`)}const optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(e){return e.props[optimizedAppearDataAttribute]}function shouldBlockAnimation({protectedKeys:e,needsAnimating:r},s){const o=e.hasOwnProperty(s)&&r[s]!==!0;return r[s]=!1,o}function animateTarget(e,r,{delay:s=0,transitionOverride:o,type:c}={}){let{transition:x=e.getDefaultTransition(),transitionEnd:u,...p}=r;const d=x?.reduceMotion;o&&(x=o);const w=[],C=c&&e.animationState&&e.animationState.getState()[c];for(const v in p){const k=e.getValue(v,e.latestValues[v]??null),H=p[v];if(H===void 0||C&&shouldBlockAnimation(C,v))continue;const P={delay:s,...getValueTransition(x||{},v)},j=k.get();if(j!==void 0&&!k.isAnimating&&!Array.isArray(H)&&H===j&&!P.velocity)continue;let se=!1;if(window.MotionHandoffAnimation){const E=getOptimisedAppearId(e);if(E){const K=window.MotionHandoffAnimation(E,v,frame);K!==null&&(P.startTime=K,se=!0)}}addValueToWillChange(e,v);const ce=d??e.shouldReduceMotion;k.start(animateMotionValue(v,k,H,ce&&positionalKeys.has(v)?{type:!1}:P,e,se));const ne=k.animation;ne&&w.push(ne)}return u&&Promise.all(w).then(()=>{frame.update(()=>{u&&setTarget(e,u)})}),w}function animateVariant(e,r,s={}){const o=resolveVariant(e,r,s.type==="exit"?e.presenceContext?.custom:void 0);let{transition:c=e.getDefaultTransition()||{}}=o||{};s.transitionOverride&&(c=s.transitionOverride);const x=o?()=>Promise.all(animateTarget(e,o,s)):()=>Promise.resolve(),u=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:w=0,staggerChildren:C,staggerDirection:v}=c;return animateChildren(e,r,d,w,C,v,s)}:()=>Promise.resolve(),{when:p}=c;if(p){const[d,w]=p==="beforeChildren"?[x,u]:[u,x];return d().then(()=>w())}else return Promise.all([x(),u(s.delay)])}function animateChildren(e,r,s=0,o=0,c=0,x=1,u){const p=[];for(const d of e.variantChildren)d.notify("AnimationStart",r),p.push(animateVariant(d,r,{...u,delay:s+(typeof o=="function"?0:o)+calcChildStagger(e.variantChildren,d,o,c,x)}).then(()=>d.notify("AnimationComplete",r)));return Promise.all(p)}function animateVisualElement(e,r,s={}){e.notify("AnimationStart",r);let o;if(Array.isArray(r)){const c=r.map(x=>animateVariant(e,x,s));o=Promise.all(c)}else if(typeof r=="string")o=animateVariant(e,r,s);else{const c=typeof r=="function"?resolveVariant(e,r,s.custom):r;o=Promise.all(animateTarget(e,c,s))}return o.then(()=>{e.notify("AnimationComplete",r)})}const auto={test:e=>e==="auto",parse:e=>e},testValueType=e=>r=>r.test(e),dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=e=>dimensionValueTypes.find(testValueType(e));function isNone(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||isZeroValueString(e):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(e){const[r,s]=e.slice(0,-1).split("(");if(r==="drop-shadow")return e;const[o]=s.match(floatRegex)||[];if(!o)return e;const c=s.replace(o,"");let x=maxDefaults.has(r)?1:0;return o!==s&&(x*=100),r+"("+x+c+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:e=>{const r=e.match(functionRegex);return r?r.map(applyDefaultFilter).join(" "):e}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,inset:px,insetBlock:px,insetBlockStart:px,insetBlockEnd:px,insetInline:px,insetInlineStart:px,insetInlineEnd:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,paddingBlock:px,paddingBlockStart:px,paddingBlockEnd:px,paddingInline:px,paddingInlineStart:px,paddingInlineEnd:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,marginBlock:px,marginBlockStart:px,marginBlockEnd:px,marginInline:px,marginInlineStart:px,marginInlineEnd:px,fontSize:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=e=>defaultValueTypes[e];function getAnimatableNone(e,r){let s=getDefaultValueType(e);return s!==filter&&(s=complex),s.getAnimatableNone?s.getAnimatableNone(r):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(e,r,s){let o=0,c;for(;o<e.length&&!c;){const x=e[o];typeof x=="string"&&!invalidTemplates.has(x)&&analyseComplexValue(x).values.length&&(c=e[o]),o++}if(c&&s)for(const x of r)e[x]=getAnimatableNone(s,c)}class DOMKeyframesResolver extends KeyframeResolver{constructor(r,s,o,c,x){super(r,s,o,c,x,!0)}readKeyframes(){const{unresolvedKeyframes:r,element:s,name:o}=this;if(!s||!s.current)return;super.readKeyframes();for(let C=0;C<r.length;C++){let v=r[C];if(typeof v=="string"&&(v=v.trim(),isCSSVariableToken(v))){const k=getVariableValue(v,s.current);k!==void 0&&(r[C]=k),C===r.length-1&&(this.finalKeyframe=v)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(o)||r.length!==2)return;const[c,x]=r,u=findDimensionValueType(c),p=findDimensionValueType(x),d=containsCSSVariable(c),w=containsCSSVariable(x);if(d!==w&&positionalValues[o]){this.needsMeasurement=!0;return}if(u!==p)if(isNumOrPxType(u)&&isNumOrPxType(p))for(let C=0;C<r.length;C++){const v=r[C];typeof v=="string"&&(r[C]=parseFloat(v))}else positionalValues[o]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:r,name:s}=this,o=[];for(let c=0;c<r.length;c++)(r[c]===null||isNone(r[c]))&&o.push(c);o.length&&makeNoneKeyframesAnimatable(r,o,s)}measureInitialState(){const{element:r,unresolvedKeyframes:s,name:o}=this;if(!r||!r.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[o](r.measureViewportBox(),window.getComputedStyle(r.current)),s[0]=this.measuredOrigin;const c=s[s.length-1];c!==void 0&&r.getValue(o,c).jump(c,!1)}measureEndState(){const{element:r,name:s,unresolvedKeyframes:o}=this;if(!r||!r.current)return;const c=r.getValue(s);c&&c.jump(this.measuredOrigin,!1);const x=o.length-1,u=o[x];o[x]=positionalValues[s](r.measureViewportBox(),window.getComputedStyle(r.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([p,d])=>{r.getValue(p).set(d)}),this.resolveNoneKeyframes()}}function resolveElements(e,r,s){if(e==null)return[];if(e instanceof EventTarget)return[e];if(typeof e=="string"){let o=document;const c=s?.[e]??o.querySelectorAll(e);return c?Array.from(c):[]}return Array.from(e).filter(o=>o!=null)}const getValueAsType=(e,r)=>r&&typeof e=="number"?r.transform(e):e;function isHTMLElement(e){return isObject(e)&&"offsetHeight"in e}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(e){return e==="x"||e==="y"?isDragging[e]?null:(isDragging[e]=!0,()=>{isDragging[e]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(e,r){const s=resolveElements(e),o=new AbortController,c={passive:!0,...r,signal:o.signal};return[s,c,()=>o.abort()]}function isValidHover(e){return!(e.pointerType==="touch"||isDragActive())}function hover(e,r,s={}){const[o,c,x]=setupGesture(e,s),u=p=>{if(!isValidHover(p))return;const{target:d}=p,w=r(d,p);if(typeof w!="function"||!d)return;const C=v=>{isValidHover(v)&&(w(v),d.removeEventListener("pointerleave",C))};d.addEventListener("pointerleave",C,c)};return o.forEach(p=>{p.addEventListener("pointerenter",u,c)}),x}const isNodeOrChild=(e,r)=>r?e===r?!0:isNodeOrChild(e,r.parentElement):!1,isPrimaryPointer=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,interactiveElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(e){return interactiveElements.has(e.tagName)||e.isContentEditable===!0}const isPressing=new WeakSet;function filterEvents(e){return r=>{r.key==="Enter"&&e(r)}}function firePointerEvent(e,r){e.dispatchEvent(new PointerEvent("pointer"+r,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(e,r)=>{const s=e.currentTarget;if(!s)return;const o=filterEvents(()=>{if(isPressing.has(s))return;firePointerEvent(s,"down");const c=filterEvents(()=>{firePointerEvent(s,"up")}),x=()=>firePointerEvent(s,"cancel");s.addEventListener("keyup",c,r),s.addEventListener("blur",x,r)});s.addEventListener("keydown",o,r),s.addEventListener("blur",()=>s.removeEventListener("keydown",o),r)};function isValidPressEvent(e){return isPrimaryPointer(e)&&!isDragActive()}function press(e,r,s={}){const[o,c,x]=setupGesture(e,s),u=p=>{const d=p.currentTarget;if(!isValidPressEvent(p))return;isPressing.add(d);const w=r(d,p),C=(H,P)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",k),isPressing.has(d)&&isPressing.delete(d),isValidPressEvent(H)&&typeof w=="function"&&w(H,{success:P})},v=H=>{C(H,d===window||d===document||s.useGlobalTarget||isNodeOrChild(d,H.target))},k=H=>{C(H,!1)};window.addEventListener("pointerup",v,c),window.addEventListener("pointercancel",k,c)};return o.forEach(p=>{(s.useGlobalTarget?window:p).addEventListener("pointerdown",u,c),isHTMLElement(p)&&(p.addEventListener("focus",w=>enableKeyboardPress(w,c)),!isElementKeyboardAccessible(p)&&!p.hasAttribute("tabindex")&&(p.tabIndex=0))}),x}function isSVGElement(e){return isObject(e)&&"ownerSVGElement"in e}function isSVGSVGElement(e){return isSVGElement(e)&&e.tagName==="svg"}const valueTypes=[...dimensionValueTypes,color,complex],findValueType=e=>valueTypes.find(testValueType(e)),createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1},isBrowser=typeof window<"u";function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),r=()=>prefersReducedMotion.current=e.matches;e.addEventListener("change",r),r()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function isAnimationControls(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function isVariantLabel(e){return typeof e=="string"||Array.isArray(e)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(e){return isAnimationControls(e.animate)||variantProps.some(r=>isVariantLabel(e[r]))}function isVariantNode(e){return!!(isControllingVariants(e)||e.variants)}function updateMotionValuesFromProps(e,r,s){for(const o in r){const c=r[o],x=s[o];if(isMotionValue(c))e.addValue(o,c);else if(isMotionValue(x))e.addValue(o,motionValue(c,{owner:e}));else if(x!==c)if(e.hasValue(o)){const u=e.getValue(o);u.liveStyle===!0?u.jump(c):u.hasAnimated||u.set(c)}else{const u=e.getStaticValue(o);e.addValue(o,motionValue(u!==void 0?u:c,{owner:e}))}}for(const o in s)r[o]===void 0&&e.removeValue(o);return r}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let featureDefinitions={};function setFeatureDefinitions(e){featureDefinitions=e}function getFeatureDefinitions(){return featureDefinitions}class VisualElement{scrapeMotionValuesFromProps(r,s,o){return{}}constructor({parent:r,props:s,presenceContext:o,reducedMotionConfig:c,blockInitialAnimation:x,visualState:u},p={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const k=time.now();this.renderScheduledAt<k&&(this.renderScheduledAt=k,frame.render(this.render,!1,!0))};const{latestValues:d,renderState:w}=u;this.latestValues=d,this.baseTarget={...d},this.initialValues=s.initial?{...d}:{},this.renderState=w,this.parent=r,this.props=s,this.presenceContext=o,this.depth=r?r.depth+1:0,this.reducedMotionConfig=c,this.options=p,this.blockInitialAnimation=!!x,this.isControllingVariants=isControllingVariants(s),this.isVariantNode=isVariantNode(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(r&&r.current);const{willChange:C,...v}=this.scrapeMotionValuesFromProps(s,{},this);for(const k in v){const H=v[k];d[k]!==void 0&&isMotionValue(H)&&H.set(d[k])}}mount(r){this.current=r,visualElementStore.set(r,this),this.projection&&!this.projection.instance&&this.projection.mount(r),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=prefersReducedMotion.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const s=this.features[r];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(r){this.children.add(r),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(r)}removeChild(r){this.children.delete(r),this.enteringChildren&&this.enteringChildren.delete(r)}bindToMotionValue(r,s){this.valueSubscriptions.has(r)&&this.valueSubscriptions.get(r)();const o=transformProps.has(r);o&&this.onBindTransform&&this.onBindTransform();const c=s.on("change",u=>{this.latestValues[r]=u,this.props.onUpdate&&frame.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let x;typeof window<"u"&&window.MotionCheckAppearSync&&(x=window.MotionCheckAppearSync(this,r,s)),this.valueSubscriptions.set(r,()=>{c(),x&&x(),s.owner&&s.stop()})}sortNodePosition(r){return!this.current||!this.sortInstanceNodePosition||this.type!==r.type?0:this.sortInstanceNodePosition(this.current,r.current)}updateFeatures(){let r="animation";for(r in featureDefinitions){const s=featureDefinitions[r];if(!s)continue;const{isEnabled:o,Feature:c}=s;if(!this.features[r]&&c&&o(this.props)&&(this.features[r]=new c(this)),this.features[r]){const x=this.features[r];x.isMounted?x.update():(x.mount(),x.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(r){return this.latestValues[r]}setStaticValue(r,s){this.latestValues[r]=s}update(r,s){(r.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=r,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let o=0;o<propEventHandlers.length;o++){const c=propEventHandlers[o];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const x="on"+c,u=r[x];u&&(this.propEventSubscriptions[c]=this.on(c,u))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(r,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(r){return this.props.variants?this.props.variants[r]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(r){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(r),()=>s.variantChildren.delete(r)}addValue(r,s){const o=this.values.get(r);s!==o&&(o&&this.removeValue(r),this.bindToMotionValue(r,s),this.values.set(r,s),this.latestValues[r]=s.get())}removeValue(r){this.values.delete(r);const s=this.valueSubscriptions.get(r);s&&(s(),this.valueSubscriptions.delete(r)),delete this.latestValues[r],this.removeValueFromRenderState(r,this.renderState)}hasValue(r){return this.values.has(r)}getValue(r,s){if(this.props.values&&this.props.values[r])return this.props.values[r];let o=this.values.get(r);return o===void 0&&s!==void 0&&(o=motionValue(s===null?void 0:s,{owner:this}),this.addValue(r,o)),o}readValue(r,s){let o=this.latestValues[r]!==void 0||!this.current?this.latestValues[r]:this.getBaseTargetFromProps(this.props,r)??this.readValueFromInstance(this.current,r,this.options);return o!=null&&(typeof o=="string"&&(isNumericalString(o)||isZeroValueString(o))?o=parseFloat(o):!findValueType(o)&&complex.test(s)&&(o=getAnimatableNone(r,s)),this.setBaseTarget(r,isMotionValue(o)?o.get():o)),isMotionValue(o)?o.get():o}setBaseTarget(r,s){this.baseTarget[r]=s}getBaseTarget(r){const{initial:s}=this.props;let o;if(typeof s=="string"||typeof s=="object"){const x=resolveVariantFromProps(this.props,s,this.presenceContext?.custom);x&&(o=x[r])}if(s&&o!==void 0)return o;const c=this.getBaseTargetFromProps(this.props,r);return c!==void 0&&!isMotionValue(c)?c:this.initialValues[r]!==void 0&&o===void 0?void 0:this.baseTarget[r]}on(r,s){return this.events[r]||(this.events[r]=new SubscriptionManager),this.events[r].add(s)}notify(r,...s){this.events[r]&&this.events[r].notify(...s)}scheduleRenderMicrotask(){microtask.render(this.render)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(r,s){return r.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(r,s){const o=r.style;return o?o[s]:void 0}removeValueFromRenderState(r,{vars:s,style:o}){delete s[r],delete o[r]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:r}=this.props;isMotionValue(r)&&(this.childSubscription=r.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}class Feature{constructor(r){this.isMounted=!1,this.node=r}update(){}}function convertBoundingBoxToBox({top:e,left:r,right:s,bottom:o}){return{x:{min:r,max:s},y:{min:e,max:o}}}function convertBoxToBoundingBox({x:e,y:r}){return{top:r.min,right:e.max,bottom:r.max,left:e.min}}function transformBoxPoints(e,r){if(!r)return e;const s=r({x:e.left,y:e.top}),o=r({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:o.y,right:o.x}}function isIdentityScale(e){return e===void 0||e===1}function hasScale({scale:e,scaleX:r,scaleY:s}){return!isIdentityScale(e)||!isIdentityScale(r)||!isIdentityScale(s)}function hasTransform(e){return hasScale(e)||has2DTranslate(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function has2DTranslate(e){return is2DTranslate(e.x)||is2DTranslate(e.y)}function is2DTranslate(e){return e&&e!=="0%"}function scalePoint(e,r,s){const o=e-s,c=r*o;return s+c}function applyPointDelta(e,r,s,o,c){return c!==void 0&&(e=scalePoint(e,c,o)),scalePoint(e,s,o)+r}function applyAxisDelta(e,r=0,s=1,o,c){e.min=applyPointDelta(e.min,r,s,o,c),e.max=applyPointDelta(e.max,r,s,o,c)}function applyBoxDelta(e,{x:r,y:s}){applyAxisDelta(e.x,r.translate,r.scale,r.originPoint),applyAxisDelta(e.y,s.translate,s.scale,s.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(e,r,s,o=!1){const c=s.length;if(!c)return;r.x=r.y=1;let x,u;for(let p=0;p<c;p++){x=s[p],u=x.projectionDelta;const{visualElement:d}=x.options;d&&d.props.style&&d.props.style.display==="contents"||(o&&x.options.layoutScroll&&x.scroll&&x!==x.root&&transformBox(e,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),u&&(r.x*=u.x.scale,r.y*=u.y.scale,applyBoxDelta(e,u)),o&&hasTransform(x.latestValues)&&transformBox(e,x.latestValues))}r.x<TREE_SCALE_SNAP_MAX&&r.x>TREE_SCALE_SNAP_MIN&&(r.x=1),r.y<TREE_SCALE_SNAP_MAX&&r.y>TREE_SCALE_SNAP_MIN&&(r.y=1)}function translateAxis(e,r){e.min=e.min+r,e.max=e.max+r}function transformAxis(e,r,s,o,c=.5){const x=mixNumber$1(e.min,e.max,c);applyAxisDelta(e,r,s,x,o)}function transformBox(e,r){transformAxis(e.x,r.x,r.scaleX,r.scale,r.originX),transformAxis(e.y,r.y,r.scaleY,r.scale,r.originY)}function measureViewportBox(e,r){return convertBoundingBoxToBox(transformBoxPoints(e.getBoundingClientRect(),r))}function measurePageBox(e,r,s){const o=measureViewportBox(e,s),{scroll:c}=r;return c&&(translateAxis(o.x,c.offset.x),translateAxis(o.y,c.offset.y)),o}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(e,r,s){let o="",c=!0;for(let x=0;x<numTransforms;x++){const u=transformPropOrder[x],p=e[u];if(p===void 0)continue;let d=!0;if(typeof p=="number")d=p===(u.startsWith("scale")?1:0);else{const w=parseFloat(p);d=u.startsWith("scale")?w===1:w===0}if(!d||s){const w=getValueAsType(p,numberValueTypes[u]);if(!d){c=!1;const C=translateAlias[u]||u;o+=`${C}(${w}) `}s&&(r[u]=w)}}return o=o.trim(),s?o=s(r,c?"":o):c&&(o="none"),o}function buildHTMLStyles(e,r,s){const{style:o,vars:c,transformOrigin:x}=e;let u=!1,p=!1;for(const d in r){const w=r[d];if(transformProps.has(d)){u=!0;continue}else if(isCSSVariableName(d)){c[d]=w;continue}else{const C=getValueAsType(w,numberValueTypes[d]);d.startsWith("origin")?(p=!0,x[d]=C):o[d]=C}}if(r.transform||(u||s?o.transform=buildTransform(r,e.transform,s):o.transform&&(o.transform="none")),p){const{originX:d="50%",originY:w="50%",originZ:C=0}=x;o.transformOrigin=`${d} ${w} ${C}`}}function renderHTML(e,{style:r,vars:s},o,c){const x=e.style;let u;for(u in r)x[u]=r[u];c?.applyProjectionStyles(x,o);for(u in s)x.setProperty(u,s[u])}function pixelsToPercent(e,r){return r.max===r.min?0:e/(r.max-r.min)*100}const correctBorderRadius={correct:(e,r)=>{if(!r.target)return e;if(typeof e=="string")if(px.test(e))e=parseFloat(e);else return e;const s=pixelsToPercent(e,r.target.x),o=pixelsToPercent(e,r.target.y);return`${s}% ${o}%`}},correctBoxShadow={correct:(e,{treeScale:r,projectionDelta:s})=>{const o=e,c=complex.parse(e);if(c.length>5)return o;const x=complex.createTransformer(e),u=typeof c[0]!="number"?1:0,p=s.x.scale*r.x,d=s.y.scale*r.y;c[0+u]/=p,c[1+u]/=d;const w=mixNumber$1(p,d,.5);return typeof c[2+u]=="number"&&(c[2+u]/=w),typeof c[3+u]=="number"&&(c[3+u]/=w),x(c)}},scaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function isForcedMotionValue(e,{layout:r,layoutId:s}){return transformProps.has(e)||e.startsWith("origin")||(r||s!==void 0)&&(!!scaleCorrectors[e]||e==="opacity")}function scrapeMotionValuesFromProps$1(e,r,s){const o=e.style,c=r?.style,x={};if(!o)return x;for(const u in o)(isMotionValue(o[u])||c&&isMotionValue(c[u])||isForcedMotionValue(u,e)||s?.getValue(u)?.liveStyle!==void 0)&&(x[u]=o[u]);return x}function getComputedStyle$1(e){return window.getComputedStyle(e)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(r,s){if(transformProps.has(s))return this.projection?.isProjecting?defaultTransformValue(s):readTransformValue(r,s);{const o=getComputedStyle$1(r),c=(isCSSVariableName(s)?o.getPropertyValue(s):o[s])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(r,{transformPagePoint:s}){return measureViewportBox(r,s)}build(r,s,o){buildHTMLStyles(r,s,o.transformTemplate)}scrapeMotionValuesFromProps(r,s,o){return scrapeMotionValuesFromProps$1(r,s,o)}}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(e,r,s=1,o=0,c=!0){e.pathLength=1;const x=c?dashKeys:camelKeys;e[x.offset]=`${-o}`,e[x.array]=`${r} ${s}`}const cssMotionPathProperties=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function buildSVGAttrs(e,{attrX:r,attrY:s,attrScale:o,pathLength:c,pathSpacing:x=1,pathOffset:u=0,...p},d,w,C){if(buildHTMLStyles(e,p,w),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:v,style:k}=e;v.transform&&(k.transform=v.transform,delete v.transform),(k.transform||v.transformOrigin)&&(k.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),k.transform&&(k.transformBox=C?.transformBox??"fill-box",delete v.transformBox);for(const H of cssMotionPathProperties)v[H]!==void 0&&(k[H]=v[H],delete v[H]);r!==void 0&&(v.x=r),s!==void 0&&(v.y=s),o!==void 0&&(v.scale=o),c!==void 0&&buildSVGPath(v,c,x,u,!1)}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),isSVGTag=e=>typeof e=="string"&&e.toLowerCase()==="svg";function renderSVG(e,r,s,o){renderHTML(e,r,void 0,o);for(const c in r.attrs)e.setAttribute(camelCaseAttributes.has(c)?c:camelToDash(c),r.attrs[c])}function scrapeMotionValuesFromProps(e,r,s){const o=scrapeMotionValuesFromProps$1(e,r,s);for(const c in e)if(isMotionValue(e[c])||isMotionValue(r[c])){const x=transformPropOrder.indexOf(c)!==-1?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c;o[x]=e[c]}return o}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(r,s){return r[s]}readValueFromInstance(r,s){if(transformProps.has(s)){const o=getDefaultValueType(s);return o&&o.default||0}return s=camelCaseAttributes.has(s)?s:camelToDash(s),r.getAttribute(s)}scrapeMotionValuesFromProps(r,s,o){return scrapeMotionValuesFromProps(r,s,o)}build(r,s,o){buildSVGAttrs(r,s,this.isSVGTag,o.transformTemplate,o.style)}renderInstance(r,s,o,c){renderSVG(r,s,o,c)}mount(r){this.isSVGTag=isSVGTag(r.tagName),super.mount(r)}}const numVariantProps=variantProps.length;function getVariantContext(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?getVariantContext(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const r={};for(let s=0;s<numVariantProps;s++){const o=variantProps[s],c=e.props[o];(isVariantLabel(c)||c===!1)&&(r[o]=c)}return r}function shallowCompare(e,r){if(!Array.isArray(r))return!1;const s=r.length;if(s!==e.length)return!1;for(let o=0;o<s;o++)if(r[o]!==e[o])return!1;return!0}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function createAnimateFunction(e){return r=>Promise.all(r.map(({animation:s,options:o})=>animateVisualElement(e,s,o)))}function createAnimationState(e){let r=createAnimateFunction(e),s=createState(),o=!0;const c=d=>(w,C)=>{const v=resolveVariant(e,C,d==="exit"?e.presenceContext?.custom:void 0);if(v){const{transition:k,transitionEnd:H,...P}=v;w={...w,...P,...H}}return w};function x(d){r=d(e)}function u(d){const{props:w}=e,C=getVariantContext(e.parent)||{},v=[],k=new Set;let H={},P=1/0;for(let se=0;se<numAnimationTypes;se++){const ce=reversePriorityOrder[se],ne=s[ce],E=w[ce]!==void 0?w[ce]:C[ce],K=isVariantLabel(E),Y=ce===d?ne.isActive:null;Y===!1&&(P=se);let re=E===C[ce]&&E!==w[ce]&&K;if(re&&o&&e.manuallyAnimateOnMount&&(re=!1),ne.protectedKeys={...H},!ne.isActive&&Y===null||!E&&!ne.prevProp||isAnimationControls(E)||typeof E=="boolean")continue;const ue=checkVariantsDidChange(ne.prevProp,E);let q=ue||ce===d&&ne.isActive&&!re&&K||se>P&&K,he=!1;const Oe=Array.isArray(E)?E:[E];let be=Oe.reduce(c(ce),{});Y===!1&&(be={});const{prevResolvedValues:Te={}}=ne,Ae={...Te,...be},Ve=we=>{q=!0,k.has(we)&&(he=!0,k.delete(we)),ne.needsAnimating[we]=!0;const ge=e.getValue(we);ge&&(ge.liveStyle=!1)};for(const we in Ae){const ge=be[we],ae=Te[we];if(H.hasOwnProperty(we))continue;let Ue=!1;isKeyframesTarget(ge)&&isKeyframesTarget(ae)?Ue=!shallowCompare(ge,ae):Ue=ge!==ae,Ue?ge!=null?Ve(we):k.add(we):ge!==void 0&&k.has(we)?Ve(we):ne.protectedKeys[we]=!0}ne.prevProp=E,ne.prevResolvedValues=be,ne.isActive&&(H={...H,...be}),o&&e.blockInitialAnimation&&(q=!1);const _e=re&&ue;q&&(!_e||he)&&v.push(...Oe.map(we=>{const ge={type:ce};if(typeof we=="string"&&o&&!_e&&e.manuallyAnimateOnMount&&e.parent){const{parent:ae}=e,Ue=resolveVariant(ae,we);if(ae.enteringChildren&&Ue){const{delayChildren:Ee}=Ue.transition||{};ge.delay=calcChildStagger(ae.enteringChildren,e,Ee)}}return{animation:we,options:ge}}))}if(k.size){const se={};if(typeof w.initial!="boolean"){const ce=resolveVariant(e,Array.isArray(w.initial)?w.initial[0]:w.initial);ce&&ce.transition&&(se.transition=ce.transition)}k.forEach(ce=>{const ne=e.getBaseTarget(ce),E=e.getValue(ce);E&&(E.liveStyle=!0),se[ce]=ne??null}),v.push({animation:se})}let j=!!v.length;return o&&(w.initial===!1||w.initial===w.animate)&&!e.manuallyAnimateOnMount&&(j=!1),o=!1,j?r(v):Promise.resolve()}function p(d,w){if(s[d].isActive===w)return Promise.resolve();e.variantChildren?.forEach(v=>v.animationState?.setActive(d,w)),s[d].isActive=w;const C=u(d);for(const v in s)s[v].protectedKeys={};return C}return{animateChanges:u,setActive:p,setAnimateFunction:x,getState:()=>s,reset:()=>{s=createState()}}}function checkVariantsDidChange(e,r){return typeof r=="string"?r!==e:Array.isArray(r)?!shallowCompare(r,e):!1}function createTypeState(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}function copyAxisInto(e,r){e.min=r.min,e.max=r.max}function copyBoxInto(e,r){copyAxisInto(e.x,r.x),copyAxisInto(e.y,r.y)}function copyAxisDeltaInto(e,r){e.translate=r.translate,e.scale=r.scale,e.originPoint=r.originPoint,e.origin=r.origin}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(e){return e.max-e.min}function isNear(e,r,s){return Math.abs(e-r)<=s}function calcAxisDelta(e,r,s,o=.5){e.origin=o,e.originPoint=mixNumber$1(r.min,r.max,e.origin),e.scale=calcLength(s)/calcLength(r),e.translate=mixNumber$1(s.min,s.max,e.origin)-e.originPoint,(e.scale>=SCALE_MIN&&e.scale<=SCALE_MAX||isNaN(e.scale))&&(e.scale=1),(e.translate>=TRANSLATE_MIN&&e.translate<=TRANSLATE_MAX||isNaN(e.translate))&&(e.translate=0)}function calcBoxDelta(e,r,s,o){calcAxisDelta(e.x,r.x,s.x,o?o.originX:void 0),calcAxisDelta(e.y,r.y,s.y,o?o.originY:void 0)}function calcRelativeAxis(e,r,s){e.min=s.min+r.min,e.max=e.min+calcLength(r)}function calcRelativeBox(e,r,s){calcRelativeAxis(e.x,r.x,s.x),calcRelativeAxis(e.y,r.y,s.y)}function calcRelativeAxisPosition(e,r,s){e.min=r.min-s.min,e.max=e.min+calcLength(r)}function calcRelativePosition(e,r,s){calcRelativeAxisPosition(e.x,r.x,s.x),calcRelativeAxisPosition(e.y,r.y,s.y)}function removePointDelta(e,r,s,o,c){return e-=r,e=scalePoint(e,1/s,o),c!==void 0&&(e=scalePoint(e,1/c,o)),e}function removeAxisDelta(e,r=0,s=1,o=.5,c,x=e,u=e){if(percent.test(r)&&(r=parseFloat(r),r=mixNumber$1(u.min,u.max,r/100)-u.min),typeof r!="number")return;let p=mixNumber$1(x.min,x.max,o);e===x&&(p-=r),e.min=removePointDelta(e.min,r,s,p,c),e.max=removePointDelta(e.max,r,s,p,c)}function removeAxisTransforms(e,r,[s,o,c],x,u){removeAxisDelta(e,r[s],r[o],r[c],r.scale,x,u)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(e,r,s,o){removeAxisTransforms(e.x,r,xKeys,s?s.x:void 0,o?o.x:void 0),removeAxisTransforms(e.y,r,yKeys,s?s.y:void 0,o?o.y:void 0)}function isAxisDeltaZero(e){return e.translate===0&&e.scale===1}function isDeltaZero(e){return isAxisDeltaZero(e.x)&&isAxisDeltaZero(e.y)}function axisEquals(e,r){return e.min===r.min&&e.max===r.max}function boxEquals(e,r){return axisEquals(e.x,r.x)&&axisEquals(e.y,r.y)}function axisEqualsRounded(e,r){return Math.round(e.min)===Math.round(r.min)&&Math.round(e.max)===Math.round(r.max)}function boxEqualsRounded(e,r){return axisEqualsRounded(e.x,r.x)&&axisEqualsRounded(e.y,r.y)}function aspectRatio(e){return calcLength(e.x)/calcLength(e.y)}function axisDeltaEquals(e,r){return e.translate===r.translate&&e.scale===r.scale&&e.originPoint===r.originPoint}function eachAxis(e){return[e("x"),e("y")]}function buildProjectionTransform(e,r,s){let o="";const c=e.x.translate/r.x,x=e.y.translate/r.y,u=s?.z||0;if((c||x||u)&&(o=`translate3d(${c}px, ${x}px, ${u}px) `),(r.x!==1||r.y!==1)&&(o+=`scale(${1/r.x}, ${1/r.y}) `),s){const{transformPerspective:w,rotate:C,rotateX:v,rotateY:k,skewX:H,skewY:P}=s;w&&(o=`perspective(${w}px) ${o}`),C&&(o+=`rotate(${C}deg) `),v&&(o+=`rotateX(${v}deg) `),k&&(o+=`rotateY(${k}deg) `),H&&(o+=`skewX(${H}deg) `),P&&(o+=`skewY(${P}deg) `)}const p=e.x.scale*r.x,d=e.y.scale*r.y;return(p!==1||d!==1)&&(o+=`scale(${p}, ${d})`),o||"none"}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=e=>typeof e=="string"?parseFloat(e):e,isPx=e=>typeof e=="number"||px.test(e);function mixValues(e,r,s,o,c,x){c?(e.opacity=mixNumber$1(0,s.opacity??1,easeCrossfadeIn(o)),e.opacityExit=mixNumber$1(r.opacity??1,0,easeCrossfadeOut(o))):x&&(e.opacity=mixNumber$1(r.opacity??1,s.opacity??1,o));for(let u=0;u<numBorders;u++){const p=`border${borders[u]}Radius`;let d=getRadius(r,p),w=getRadius(s,p);if(d===void 0&&w===void 0)continue;d||(d=0),w||(w=0),d===0||w===0||isPx(d)===isPx(w)?(e[p]=Math.max(mixNumber$1(asNumber(d),asNumber(w),o),0),(percent.test(w)||percent.test(d))&&(e[p]+="%")):e[p]=w}(r.rotate||s.rotate)&&(e.rotate=mixNumber$1(r.rotate||0,s.rotate||0,o))}function getRadius(e,r){return e[r]!==void 0?e[r]:e.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop);function compress(e,r,s){return o=>o<e?0:o>r?1:s(progress(e,r,o))}function animateSingleValue(e,r,s){const o=isMotionValue(e)?e:motionValue(e);return o.start(animateMotionValue("",o,r,s)),o.animation}function addDomEvent(e,r,s,o={passive:!0}){return e.addEventListener(r,s,o),()=>e.removeEventListener(r,s)}const compareByDepth=(e,r)=>e.depth-r.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(r){addUniqueItem(this.children,r),this.isDirty=!0}remove(r){removeItem(this.children,r),this.isDirty=!0}forEach(r){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(r)}}function delay(e,r){const s=time.now(),o=({timestamp:c})=>{const x=c-s;x>=r&&(cancelFrame(o),e(x-r))};return frame.setup(o,!0),()=>cancelFrame(o)}function resolveMotionValue(e){return isMotionValue(e)?e.get():e}class NodeStack{constructor(){this.members=[]}add(r){addUniqueItem(this.members,r),r.scheduleRender()}remove(r){if(removeItem(this.members,r),r===this.prevLead&&(this.prevLead=void 0),r===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(r){const s=this.members.findIndex(c=>r===c);if(s===0)return!1;let o;for(let c=s;c>=0;c--){const x=this.members[c];if(x.isPresent!==!1){o=x;break}}return o?(this.promote(o),!0):!1}promote(r,s){const o=this.lead;if(r!==o&&(this.prevLead=o,this.lead=r,r.show(),o)){o.instance&&o.scheduleRender(),r.scheduleRender();const c=o.options.layoutDependency,x=r.options.layoutDependency;c!==void 0&&x!==void 0&&c===x||(r.resumeFrom=o,s&&(r.resumeFrom.preserveOpacity=!0),o.snapshot&&(r.snapshot=o.snapshot,r.snapshot.latestValues=o.animationValues||o.latestValues),r.root&&r.root.isUpdating&&(r.isLayoutDirty=!0));const{crossfade:p}=r.options;p===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(r=>{const{options:s,resumingFrom:o}=r;s.onExitComplete&&s.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(r=>{r.instance&&r.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1},transformAxes=["","X","Y","Z"],animationTarget=1e3;let id$1=0;function resetDistortingTransform(e,r,s,o){const{latestValues:c}=r;c[e]&&(s[e]=c[e],r.setStaticValue(e,0),o&&(o[e]=0))}function cancelTreeOptimisedTransformAnimations(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:r}=e.options;if(!r)return;const s=getOptimisedAppearId(r);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:c,layoutId:x}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",frame,!(c||x))}const{parent:o}=e;o&&!o.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(o)}function createProjectionNode$1({attachResizeListener:e,defaultParent:r,measureScroll:s,checkIsScrollRoot:o,resetTransform:c}){return class{constructor(u={},p=r?.()){this.id=id$1++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=p?p.root||p:this,this.path=p?[...p.path,p]:[],this.parent=p,this.depth=p?p.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(u,p){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new SubscriptionManager),this.eventHandlers.get(u).add(p)}notifyListeners(u,...p){const d=this.eventHandlers.get(u);d&&d.notify(...p)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=isSVGElement(u)&&!isSVGSVGElement(u),this.instance=u;const{layoutId:p,layout:d,visualElement:w}=this.options;if(w&&!w.current&&w.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||p)&&(this.isLayoutDirty=!0),e){let C,v=0;const k=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{v=window.innerWidth}),e(u,()=>{const H=window.innerWidth;H!==v&&(v=H,this.root.updateBlockedByResize=!0,C&&C(),C=delay(k,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&w&&(p||d)&&this.addEventListener("didUpdate",({delta:C,hasLayoutChanged:v,hasRelativeLayoutChanged:k,layout:H})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const P=this.options.transition||w.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:j,onLayoutAnimationComplete:se}=w.getProps(),ce=!this.targetLayout||!boxEqualsRounded(this.targetLayout,H),ne=!v&&k;if(this.options.layoutRoot||this.resumeFrom||ne||v&&(ce||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...getValueTransition(P,"layout"),onPlay:j,onComplete:se};(w.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(C,ne)}else v||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=H})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let C=0;C<this.path.length;C++){const v=this.path[C];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:p,layout:d}=this.options;if(p===void 0&&!d)return;const w=this.getTransformTemplate();this.prevTransformTemplateValue=w?w(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const p=time.now();frameData.delta=clamp(0,1e3/60,p-frameData.timestamp),frameData.timestamp=p,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:p}=this.options;p&&p.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let p=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(p=!1),p&&this.instance){const d=o(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:d,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!c)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,p=this.projectionDelta&&!isDeltaZero(this.projectionDelta),d=this.getTransformTemplate(),w=d?d(this.latestValues,""):void 0,C=w!==this.prevTransformTemplateValue;u&&this.instance&&(p||hasTransform(this.latestValues)||C)&&(c(this.instance,w),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const p=this.measurePageBox();let d=this.removeElementScroll(p);return u&&(d=this.removeTransform(d)),roundBox(d),{animationId:this.root.animationId,measuredBox:p,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return createBox();const p=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:w}=this.root;w&&(translateAxis(p.x,w.offset.x),translateAxis(p.y,w.offset.y))}return p}removeElementScroll(u){const p=createBox();if(copyBoxInto(p,u),this.scroll?.wasRoot)return p;for(let d=0;d<this.path.length;d++){const w=this.path[d],{scroll:C,options:v}=w;w!==this.root&&C&&v.layoutScroll&&(C.wasRoot&&copyBoxInto(p,u),translateAxis(p.x,C.offset.x),translateAxis(p.y,C.offset.y))}return p}applyTransform(u,p=!1){const d=createBox();copyBoxInto(d,u);for(let w=0;w<this.path.length;w++){const C=this.path[w];!p&&C.options.layoutScroll&&C.scroll&&C!==C.root&&transformBox(d,{x:-C.scroll.offset.x,y:-C.scroll.offset.y}),hasTransform(C.latestValues)&&transformBox(d,C.latestValues)}return hasTransform(this.latestValues)&&transformBox(d,this.latestValues),d}removeTransform(u){const p=createBox();copyBoxInto(p,u);for(let d=0;d<this.path.length;d++){const w=this.path[d];if(!w.instance||!hasTransform(w.latestValues))continue;hasScale(w.latestValues)&&w.updateSnapshot();const C=createBox(),v=w.measurePageBox();copyBoxInto(C,v),removeBoxTransforms(p,w.latestValues,w.snapshot?w.snapshot.layoutBox:void 0,C)}return hasTransform(this.latestValues)&&removeBoxTransforms(p,this.latestValues),p}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==p;if(!(u||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:C,layoutId:v}=this.options;if(!this.layout||!(C||v))return;this.resolvedRelativeTargetAt=frameData.timestamp;const k=this.getClosestProjectingParent();k&&this.linkedParentVersion!==k.layoutVersion&&!k.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(k&&k.layout?this.createRelativeTarget(k,this.layout.layoutBox,k.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,k&&!!k.resumingFrom==!!this.resumingFrom&&!k.options.layoutScroll&&k.target&&this.animationProgress!==1?this.createRelativeTarget(k,this.target,k.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,p,d){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,p,d),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const u=this.getLead(),p=!!this.resumingFrom||this!==u;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(d=!1),d)return;const{layout:w,layoutId:C}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(w||C))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,k=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,p),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=createBox());const{target:H}=u;if(!H){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,H,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==k||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",H))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const p=this.getStack();p&&p.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(u,p=!1){const d=this.snapshot,w=d?d.latestValues:{},C={...this.latestValues},v=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!p;const k=createBox(),H=d?d.source:void 0,P=this.layout?this.layout.source:void 0,j=H!==P,se=this.getStack(),ce=!se||se.members.length<=1,ne=!!(j&&!ce&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let E;this.mixTargetDelta=K=>{const Y=K/1e3;mixAxisDelta(v.x,u.x,Y),mixAxisDelta(v.y,u.y,Y),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(k,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,k,Y),E&&boxEquals(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=createBox()),copyBoxInto(E,this.relativeTarget)),j&&(this.animationValues=C,mixValues(C,w,this.latestValues,Y,ne,ce)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Y},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),u.onUpdate&&u.onUpdate(p)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:p,target:d,layout:w,latestValues:C}=u;if(!(!p||!d||!w)){if(this!==u&&this.layout&&w&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,w.layoutBox)){d=this.target||createBox();const v=calcLength(this.layout.layoutBox.x);d.x.min=u.target.x.min,d.x.max=d.x.min+v;const k=calcLength(this.layout.layoutBox.y);d.y.min=u.target.y.min,d.y.max=d.y.min+k}copyBoxInto(p,d),transformBox(p,C),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,p,C)}}registerSharedNode(u,p){this.sharedNodes.has(u)||this.sharedNodes.set(u,new NodeStack),this.sharedNodes.get(u).add(p);const w=p.options.initialPromotionConfig;p.promote({transition:w?w.transition:void 0,preserveFollowOpacity:w&&w.shouldPreserveFollowOpacity?w.shouldPreserveFollowOpacity(p):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:p,preserveFollowOpacity:d}={}){const w=this.getStack();w&&w.promote(this,d),u&&(this.projectionDelta=void 0,this.needsReset=!0),p&&this.setOptions({transition:p})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let p=!1;const{latestValues:d}=u;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(p=!0),!p)return;const w={};d.z&&resetDistortingTransform("z",u,w,this.animationValues);for(let C=0;C<transformAxes.length;C++)resetDistortingTransform(`rotate${transformAxes[C]}`,u,w,this.animationValues),resetDistortingTransform(`skew${transformAxes[C]}`,u,w,this.animationValues);u.render();for(const C in w)u.setStaticValue(C,w[C]),this.animationValues&&(this.animationValues[C]=w[C]);u.scheduleRender()}applyProjectionStyles(u,p){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=resolveMotionValue(p?.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none";return}const w=this.getLead();if(!this.projectionDelta||!this.layout||!w.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=resolveMotionValue(p?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(u.transform=d?d({},""):"none",this.hasProjected=!1);return}u.visibility="";const C=w.animationValues||w.latestValues;this.applyTransformsToTarget();let v=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,C);d&&(v=d(C,v)),u.transform=v;const{x:k,y:H}=this.projectionDelta;u.transformOrigin=`${k.origin*100}% ${H.origin*100}% 0`,w.animationValues?u.opacity=w===this?C.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:C.opacityExit:u.opacity=w===this?C.opacity!==void 0?C.opacity:"":C.opacityExit!==void 0?C.opacityExit:0;for(const P in scaleCorrectors){if(C[P]===void 0)continue;const{correct:j,applyTo:se,isCSSVariable:ce}=scaleCorrectors[P],ne=v==="none"?C[P]:j(C[P],w);if(se){const E=se.length;for(let K=0;K<E;K++)u[se[K]]=ne}else ce?this.options.visualElement.renderState.vars[P]=ne:u[P]=ne}this.options.layoutId&&(u.pointerEvents=w===this?resolveMotionValue(p?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(e){e.updateLayout()}function notifyLayoutUpdate(e){const r=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:o}=e.layout,{animationType:c}=e.options,x=r.source!==e.layout.source;c==="size"?eachAxis(C=>{const v=x?r.measuredBox[C]:r.layoutBox[C],k=calcLength(v);v.min=s[C].min,v.max=v.min+k}):shouldAnimatePositionOnly(c,r.layoutBox,s)&&eachAxis(C=>{const v=x?r.measuredBox[C]:r.layoutBox[C],k=calcLength(s[C]);v.max=v.min+k,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[C].max=e.relativeTarget[C].min+k)});const u=createDelta();calcBoxDelta(u,s,r.layoutBox);const p=createDelta();x?calcBoxDelta(p,e.applyTransform(o,!0),r.measuredBox):calcBoxDelta(p,s,r.layoutBox);const d=!isDeltaZero(u);let w=!1;if(!e.resumeFrom){const C=e.getClosestProjectingParent();if(C&&!C.resumeFrom){const{snapshot:v,layout:k}=C;if(v&&k){const H=createBox();calcRelativePosition(H,r.layoutBox,v.layoutBox);const P=createBox();calcRelativePosition(P,s,k.layoutBox),boxEqualsRounded(H,P)||(w=!0),C.options.layoutRoot&&(e.relativeTarget=P,e.relativeTargetOrigin=H,e.relativeParent=C)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:r,delta:p,layoutDelta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:w})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function propagateDirtyNodes(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cleanDirtyNodes(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function clearSnapshot(e){e.clearSnapshot()}function clearMeasurements(e){e.clearMeasurements()}function clearIsLayoutDirty(e){e.isLayoutDirty=!1}function resetTransformStyle(e){const{visualElement:r}=e.options;r&&r.getProps().onBeforeLayoutMeasure&&r.notify("BeforeLayoutMeasure"),e.resetTransform()}function finishAnimation(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function resolveTargetDelta(e){e.resolveTargetDelta()}function calcProjection(e){e.calcProjection()}function resetSkewAndRotation(e){e.resetSkewAndRotation()}function removeLeadSnapshots(e){e.removeLeadSnapshot()}function mixAxisDelta(e,r,s){e.translate=mixNumber$1(r.translate,0,s),e.scale=mixNumber$1(r.scale,1,s),e.origin=r.origin,e.originPoint=r.originPoint}function mixAxis(e,r,s,o){e.min=mixNumber$1(r.min,s.min,o),e.max=mixNumber$1(r.max,s.max,o)}function mixBox(e,r,s,o){mixAxis(e.x,r.x,s.x,o),mixAxis(e.y,r.y,s.y,o)}function hasOpacityCrossfade(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop;function roundAxis(e){e.min=roundPoint(e.min),e.max=roundPoint(e.max)}function roundBox(e){roundAxis(e.x),roundAxis(e.y)}function shouldAnimatePositionOnly(e,r,s){return e==="position"||e==="preserve-aspect"&&!isNear(aspectRatio(r),aspectRatio(s),.2)}function checkNodeWasScrollRoot(e){return e!==e.root&&e.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(e,r)=>addDomEvent(e,"resize",r),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const e=new DocumentProjectionNode({});e.mount(window),e.setOptions({layoutScroll:!0}),rootProjectionNode.current=e}return rootProjectionNode.current},resetTransform:(e,r)=>{e.style.transform=r!==void 0?r:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),MotionConfigContext=reactExports.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function usePresence(e=!0){const r=reactExports.useContext(PresenceContext);if(r===null)return[!0,null];const{isPresent:s,onExitComplete:o,register:c}=r,x=reactExports.useId();reactExports.useEffect(()=>{if(e)return c(x)},[e]);const u=reactExports.useCallback(()=>e&&o&&o(x),[x,o,e]);return!s&&o?[!1,u]:[!0]}const LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let isInitialized=!1;function initFeatureDefinitions(){if(isInitialized)return;const e={};for(const r in featureProps)e[r]={isEnabled:s=>featureProps[r].some(o=>!!s[o])};setFeatureDefinitions(e),isInitialized=!0}function getInitializedFeatureDefinitions(){return initFeatureDefinitions(),getFeatureDefinitions()}function loadFeatures(e){const r=getInitializedFeatureDefinitions();for(const s in e)r[s]={...r[s],...e[s]};setFeatureDefinitions(r)}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||validMotionProps.has(e)}let shouldForward=e=>!isValidMotionProp(e);function loadExternalIsValidProp(e){typeof e=="function"&&(shouldForward=r=>r.startsWith("on")?!isValidMotionProp(r):e(r))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(e,r,s){const o={};for(const c in e)c==="values"&&typeof e.values=="object"||(shouldForward(c)||s===!0&&isValidMotionProp(c)||!r&&!isValidMotionProp(c)||e.draggable&&c.startsWith("onDrag"))&&(o[c]=e[c]);return o}const MotionContext=reactExports.createContext({});function getCurrentTreeVariants(e,r){if(isControllingVariants(e)){const{initial:s,animate:o}=e;return{initial:s===!1||isVariantLabel(s)?s:void 0,animate:isVariantLabel(o)?o:void 0}}return e.inherit!==!1?r:{}}function useCreateMotionContext(e){const{initial:r,animate:s}=getCurrentTreeVariants(e,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:r,animate:s}),[variantLabelsAsDependency(r),variantLabelsAsDependency(s)])}function variantLabelsAsDependency(e){return Array.isArray(e)?e.join(" "):e}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(e,r,s){for(const o in r)!isMotionValue(r[o])&&!isForcedMotionValue(o,s)&&(e[o]=r[o])}function useInitialMotionValues({transformTemplate:e},r){return reactExports.useMemo(()=>{const s=createHtmlRenderState();return buildHTMLStyles(s,r,e),Object.assign({},s.vars,s.style)},[r])}function useStyle(e,r){const s=e.style||{},o={};return copyRawValuesOnly(o,s,e),Object.assign(o,useInitialMotionValues(e,r)),o}function useHTMLProps(e,r){const s={},o=useStyle(e,r);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=o,s}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}});function useSVGProps(e,r,s,o){const c=reactExports.useMemo(()=>{const x=createSvgRenderState();return buildSVGAttrs(x,r,isSVGTag(o),e.transformTemplate,e.style),{...x.attrs,style:{...x.style}}},[r]);if(e.style){const x={};copyRawValuesOnly(x,e.style,e),c.style={...x,...c.style}}return c}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(e){return typeof e!="string"||e.includes("-")?!1:!!(lowercaseSVGElements.indexOf(e)>-1||/[A-Z]/u.test(e))}function useRender(e,r,s,{latestValues:o},c,x=!1,u){const d=(u??isSVGComponent(e)?useSVGProps:useHTMLProps)(r,o,c,e),w=filterProps(r,typeof e=="string",x),C=e!==reactExports.Fragment?{...w,...d,ref:s}:{},{children:v}=r,k=reactExports.useMemo(()=>isMotionValue(v)?v.get():v,[v]);return reactExports.createElement(e,{...C,children:k})}function makeState({scrapeMotionValuesFromProps:e,createRenderState:r},s,o,c){return{latestValues:makeLatestValues(s,o,c,e),renderState:r()}}function makeLatestValues(e,r,s,o){const c={},x=o(e,{});for(const k in x)c[k]=resolveMotionValue(x[k]);let{initial:u,animate:p}=e;const d=isControllingVariants(e),w=isVariantNode(e);r&&w&&!d&&e.inherit!==!1&&(u===void 0&&(u=r.initial),p===void 0&&(p=r.animate));let C=s?s.initial===!1:!1;C=C||u===!1;const v=C?p:u;if(v&&typeof v!="boolean"&&!isAnimationControls(v)){const k=Array.isArray(v)?v:[v];for(let H=0;H<k.length;H++){const P=resolveVariantFromProps(e,k[H]);if(P){const{transitionEnd:j,transition:se,...ce}=P;for(const ne in ce){let E=ce[ne];if(Array.isArray(E)){const K=C?E.length-1:0;E=E[K]}E!==null&&(c[ne]=E)}for(const ne in j)c[ne]=j[ne]}}}return c}const makeUseVisualState=e=>(r,s)=>{const o=reactExports.useContext(MotionContext),c=reactExports.useContext(PresenceContext),x=()=>makeState(e,r,o,c);return s?x():useConstant(x)},useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState}),useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function useMotionRef(e,r,s){const o=reactExports.useRef(s);reactExports.useInsertionEffect(()=>{o.current=s});const c=reactExports.useRef(null);return reactExports.useCallback(x=>{x&&e.onMount?.(x),r&&(x?r.mount(x):r.unmount());const u=o.current;if(typeof u=="function")if(x){const p=u(x);typeof p=="function"&&(c.current=p)}else c.current?(c.current(),c.current=null):u(x);else u&&(u.current=x)},[r])}const SwitchLayoutGroupContext=reactExports.createContext({});function isRefObject(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function useVisualElement(e,r,s,o,c,x){const{visualElement:u}=reactExports.useContext(MotionContext),p=reactExports.useContext(LazyContext),d=reactExports.useContext(PresenceContext),w=reactExports.useContext(MotionConfigContext).reducedMotion,C=reactExports.useRef(null),v=reactExports.useRef(!1);o=o||p.renderer,!C.current&&o&&(C.current=o(e,{visualState:r,parent:u,props:s,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:w,isSVG:x}),v.current&&C.current&&(C.current.manuallyAnimateOnMount=!0));const k=C.current,H=reactExports.useContext(SwitchLayoutGroupContext);k&&!k.projection&&c&&(k.type==="html"||k.type==="svg")&&createProjectionNode(C.current,s,c,H);const P=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{k&&P.current&&k.update(s,d)});const j=s[optimizedAppearDataAttribute],se=reactExports.useRef(!!j&&!window.MotionHandoffIsComplete?.(j)&&window.MotionHasOptimisedAnimation?.(j));return useIsomorphicLayoutEffect(()=>{v.current=!0,k&&(P.current=!0,window.MotionIsMounted=!0,k.updateFeatures(),k.scheduleRenderMicrotask(),se.current&&k.animationState&&k.animationState.animateChanges())}),reactExports.useEffect(()=>{k&&(!se.current&&k.animationState&&k.animationState.animateChanges(),se.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(j)}),se.current=!1),k.enteringChildren=void 0)}),k}function createProjectionNode(e,r,s,o){const{layoutId:c,layout:x,drag:u,dragConstraints:p,layoutScroll:d,layoutRoot:w,layoutCrossfade:C}=r;e.projection=new s(e.latestValues,r["data-framer-portal-id"]?void 0:getClosestProjectingNode(e.parent)),e.projection.setOptions({layoutId:c,layout:x,alwaysMeasureLayout:!!u||p&&isRefObject(p),visualElement:e,animationType:typeof x=="string"?x:"both",initialPromotionConfig:o,crossfade:C,layoutScroll:d,layoutRoot:w})}function getClosestProjectingNode(e){if(e)return e.options.allowProjection!==!1?e.projection:getClosestProjectingNode(e.parent)}function createMotionComponent(e,{forwardMotionProps:r=!1,type:s}={},o,c){o&&loadFeatures(o);const x=s?s==="svg":isSVGComponent(e),u=x?useSVGVisualState:useHTMLVisualState;function p(w,C){let v;const k={...reactExports.useContext(MotionConfigContext),...w,layoutId:useLayoutId(w)},{isStatic:H}=k,P=useCreateMotionContext(w),j=u(w,H);if(!H&&isBrowser$1){useStrictMode();const se=getProjectionFunctionality(k);v=se.MeasureLayout,P.visualElement=useVisualElement(e,j,k,c,se.ProjectionNode,x)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:P,children:[v&&P.visualElement?jsxRuntimeExports.jsx(v,{visualElement:P.visualElement,...k}):null,useRender(e,w,useMotionRef(j,P.visualElement,C),j,H,r,x)]})}p.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const d=reactExports.forwardRef(p);return d[motionComponentSymbol]=e,d}function useLayoutId({layoutId:e}){const r=reactExports.useContext(LayoutGroupContext).id;return r&&e!==void 0?r+"-"+e:e}function useStrictMode(e,r){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(e){const r=getInitializedFeatureDefinitions(),{drag:s,layout:o}=r;if(!s&&!o)return{};const c={...s,...o};return{MeasureLayout:s?.isEnabled(e)||o?.isEnabled(e)?c.MeasureLayout:void 0,ProjectionNode:c.ProjectionNode}}function createMotionProxy(e,r){if(typeof Proxy>"u")return createMotionComponent;const s=new Map,o=(x,u)=>createMotionComponent(x,u,e,r),c=(x,u)=>o(x,u);return new Proxy(c,{get:(x,u)=>u==="create"?o:(s.has(u)||s.set(u,createMotionComponent(u,void 0,e,r)),s.get(u))})}const createDomVisualElement=(e,r)=>r.isSVG??isSVGComponent(e)?new SVGVisualElement(r):new HTMLVisualElement(r,{allowProjection:e!==reactExports.Fragment});class AnimationFeature extends Feature{constructor(r){super(r),r.animationState||(r.animationState=createAnimationState(r))}updateAnimationControlsSubscription(){const{animate:r}=this.node.getProps();isAnimationControls(r)&&(this.unmountControls=r.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:r}=this.node.getProps(),{animate:s}=this.node.prevProps||{};r!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id++}update(){if(!this.node.presenceContext)return;const{isPresent:r,onExitComplete:s}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||r===o)return;const c=this.node.animationState.setActive("exit",!r);s&&!r&&c.then(()=>{s(this.id)})}mount(){const{register:r,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),r&&(this.unmount=r(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function extractEventInfo(e){return{point:{x:e.pageX,y:e.pageY}}}const addPointerInfo=e=>r=>isPrimaryPointer(r)&&e(r,extractEventInfo(r));function addPointerEvent(e,r,s,o){return addDomEvent(e,r,addPointerInfo(s),o)}const getContextWindow=({current:e})=>e?e.ownerDocument.defaultView:null,distance=(e,r)=>Math.abs(e-r);function distance2D(e,r){const s=distance(e.x,r.x),o=distance(e.y,r.y);return Math.sqrt(s**2+o**2)}const overflowStyles=new Set(["auto","scroll"]);class PanSession{constructor(r,s,{transformPagePoint:o,contextWindow:c=window,dragSnapToOrigin:x=!1,distanceThreshold:u=3,element:p}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=H=>{this.handleScroll(H.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const H=getPanInfo(this.lastMoveEventInfo,this.history),P=this.startEvent!==null,j=distance2D(H.offset,{x:0,y:0})>=this.distanceThreshold;if(!P&&!j)return;const{point:se}=H,{timestamp:ce}=frameData;this.history.push({...se,timestamp:ce});const{onStart:ne,onMove:E}=this.handlers;P||(ne&&ne(this.lastMoveEvent,H),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,H)},this.handlePointerMove=(H,P)=>{this.lastMoveEvent=H,this.lastMoveEventInfo=transformPoint(P,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(H,P)=>{this.end();const{onEnd:j,onSessionEnd:se,resumeAnimation:ce}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&ce&&ce(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const ne=getPanInfo(H.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(P,this.transformPagePoint),this.history);this.startEvent&&j&&j(H,ne),se&&se(H,ne)},!isPrimaryPointer(r))return;this.dragSnapToOrigin=x,this.handlers=s,this.transformPagePoint=o,this.distanceThreshold=u,this.contextWindow=c||window;const d=extractEventInfo(r),w=transformPoint(d,this.transformPagePoint),{point:C}=w,{timestamp:v}=frameData;this.history=[{...C,timestamp:v}];const{onSessionStart:k}=s;k&&k(r,getPanInfo(w,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp)),p&&this.startScrollTracking(p)}startScrollTracking(r){let s=r.parentElement;for(;s;){const o=getComputedStyle(s);(overflowStyles.has(o.overflowX)||overflowStyles.has(o.overflowY))&&this.scrollPositions.set(s,{x:s.scrollLeft,y:s.scrollTop}),s=s.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(r){const s=this.scrollPositions.get(r);if(!s)return;const o=r===window,c=o?{x:window.scrollX,y:window.scrollY}:{x:r.scrollLeft,y:r.scrollTop},x={x:c.x-s.x,y:c.y-s.y};x.x===0&&x.y===0||(o?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=x.x,this.lastMoveEventInfo.point.y+=x.y):this.history.length>0&&(this.history[0].x-=x.x,this.history[0].y-=x.y),this.scrollPositions.set(r,c),frame.update(this.updatePoint,!0))}updateHandlers(r){this.handlers=r}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),cancelFrame(this.updatePoint)}}function transformPoint(e,r){return r?{point:r(e.point)}:e}function subtractPoint(e,r){return{x:e.x-r.x,y:e.y-r.y}}function getPanInfo({point:e},r){return{point:e,delta:subtractPoint(e,lastDevicePoint(r)),offset:subtractPoint(e,startDevicePoint(r)),velocity:getVelocity(r,.1)}}function startDevicePoint(e){return e[0]}function lastDevicePoint(e){return e[e.length-1]}function getVelocity(e,r){if(e.length<2)return{x:0,y:0};let s=e.length-1,o=null;const c=lastDevicePoint(e);for(;s>=0&&(o=e[s],!(c.timestamp-o.timestamp>secondsToMilliseconds(r)));)s--;if(!o)return{x:0,y:0};const x=millisecondsToSeconds(c.timestamp-o.timestamp);if(x===0)return{x:0,y:0};const u={x:(c.x-o.x)/x,y:(c.y-o.y)/x};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function applyConstraints(e,{min:r,max:s},o){return r!==void 0&&e<r?e=o?mixNumber$1(r,e,o.min):Math.max(e,r):s!==void 0&&e>s&&(e=o?mixNumber$1(s,e,o.max):Math.min(e,s)),e}function calcRelativeAxisConstraints(e,r,s){return{min:r!==void 0?e.min+r:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function calcRelativeConstraints(e,{top:r,left:s,bottom:o,right:c}){return{x:calcRelativeAxisConstraints(e.x,s,c),y:calcRelativeAxisConstraints(e.y,r,o)}}function calcViewportAxisConstraints(e,r){let s=r.min-e.min,o=r.max-e.max;return r.max-r.min<e.max-e.min&&([s,o]=[o,s]),{min:s,max:o}}function calcViewportConstraints(e,r){return{x:calcViewportAxisConstraints(e.x,r.x),y:calcViewportAxisConstraints(e.y,r.y)}}function calcOrigin(e,r){let s=.5;const o=calcLength(e),c=calcLength(r);return c>o?s=progress(r.min,r.max-o,e.min):o>c&&(s=progress(e.min,e.max-c,r.min)),clamp(0,1,s)}function rebaseAxisConstraints(e,r){const s={};return r.min!==void 0&&(s.min=r.min-e.min),r.max!==void 0&&(s.max=r.max-e.min),s}const defaultElastic=.35;function resolveDragElastic(e=defaultElastic){return e===!1?e=0:e===!0&&(e=defaultElastic),{x:resolveAxisElastic(e,"left","right"),y:resolveAxisElastic(e,"top","bottom")}}function resolveAxisElastic(e,r,s){return{min:resolvePointElastic(e,r),max:resolvePointElastic(e,s)}}function resolvePointElastic(e,r){return typeof e=="number"?e:e[r]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(r){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=r}start(r,{snapToCursor:s=!1,distanceThreshold:o}={}){const{presenceContext:c}=this.visualElement;if(c&&c.isPresent===!1)return;const x=v=>{s?(this.stopAnimation(),this.snapToCursor(extractEventInfo(v).point)):this.pauseAnimation()},u=(v,k)=>{this.stopAnimation();const{drag:H,dragPropagation:P,onDragStart:j}=this.getProps();if(H&&!P&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(H),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=k,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(ce=>{let ne=this.getAxisMotionValue(ce).get()||0;if(percent.test(ne)){const{projection:E}=this.visualElement;if(E&&E.layout){const K=E.layout.layoutBox[ce];K&&(ne=calcLength(K)*(parseFloat(ne)/100))}}this.originPoint[ce]=ne}),j&&frame.postRender(()=>j(v,k)),addValueToWillChange(this.visualElement,"transform");const{animationState:se}=this.visualElement;se&&se.setActive("whileDrag",!0)},p=(v,k)=>{this.latestPointerEvent=v,this.latestPanInfo=k;const{dragPropagation:H,dragDirectionLock:P,onDirectionLock:j,onDrag:se}=this.getProps();if(!H&&!this.openDragLock)return;const{offset:ce}=k;if(P&&this.currentDirection===null){this.currentDirection=getCurrentDirection(ce),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",k.point,ce),this.updateAxis("y",k.point,ce),this.visualElement.render(),se&&se(v,k)},d=(v,k)=>{this.latestPointerEvent=v,this.latestPanInfo=k,this.stop(v,k),this.latestPointerEvent=null,this.latestPanInfo=null},w=()=>eachAxis(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:C}=this.getProps();this.panSession=new PanSession(r,{onSessionStart:x,onStart:u,onMove:p,onSessionEnd:d,resumeAnimation:w},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:C,distanceThreshold:o,contextWindow:getContextWindow(this.visualElement),element:this.visualElement.current})}stop(r,s){const o=r||this.latestPointerEvent,c=s||this.latestPanInfo,x=this.isDragging;if(this.cancel(),!x||!c||!o)return;const{velocity:u}=c;this.startAnimation(u);const{onDragEnd:p}=this.getProps();p&&frame.postRender(()=>p(o,c))}cancel(){this.isDragging=!1;const{projection:r,animationState:s}=this.visualElement;r&&(r.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(r,s,o){const{drag:c}=this.getProps();if(!o||!shouldDrag(r,c,this.currentDirection))return;const x=this.getAxisMotionValue(r);let u=this.originPoint[r]+o[r];this.constraints&&this.constraints[r]&&(u=applyConstraints(u,this.constraints[r],this.elastic[r])),x.set(u)}resolveConstraints(){const{dragConstraints:r,dragElastic:s}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,c=this.constraints;r&&isRefObject(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&o?this.constraints=calcRelativeConstraints(o.layoutBox,r):this.constraints=!1,this.elastic=resolveDragElastic(s),c!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(x=>{this.constraints!==!1&&this.getAxisMotionValue(x)&&(this.constraints[x]=rebaseAxisConstraints(o.layoutBox[x],this.constraints[x]))})}resolveRefConstraints(){const{dragConstraints:r,onMeasureDragConstraints:s}=this.getProps();if(!r||!isRefObject(r))return!1;const o=r.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const x=measurePageBox(o,c.root,this.visualElement.getTransformPagePoint());let u=calcViewportConstraints(c.layout.layoutBox,x);if(s){const p=s(convertBoxToBoundingBox(u));this.hasMutatedConstraints=!!p,p&&(u=convertBoundingBoxToBox(p))}return u}startAnimation(r){const{drag:s,dragMomentum:o,dragElastic:c,dragTransition:x,dragSnapToOrigin:u,onDragTransitionEnd:p}=this.getProps(),d=this.constraints||{},w=eachAxis(C=>{if(!shouldDrag(C,s,this.currentDirection))return;let v=d&&d[C]||{};u&&(v={min:0,max:0});const k=c?200:1e6,H=c?40:1e7,P={type:"inertia",velocity:o?r[C]:0,bounceStiffness:k,bounceDamping:H,timeConstant:750,restDelta:1,restSpeed:10,...x,...v};return this.startAxisValueAnimation(C,P)});return Promise.all(w).then(p)}startAxisValueAnimation(r,s){const o=this.getAxisMotionValue(r);return addValueToWillChange(this.visualElement,r),o.start(animateMotionValue(r,o,0,s,this.visualElement,!1))}stopAnimation(){eachAxis(r=>this.getAxisMotionValue(r).stop())}pauseAnimation(){eachAxis(r=>this.getAxisMotionValue(r).animation?.pause())}getAnimationState(r){return this.getAxisMotionValue(r).animation?.state}getAxisMotionValue(r){const s=`_drag${r.toUpperCase()}`,o=this.visualElement.getProps(),c=o[s];return c||this.visualElement.getValue(r,(o.initial?o.initial[r]:void 0)||0)}snapToCursor(r){eachAxis(s=>{const{drag:o}=this.getProps();if(!shouldDrag(s,o,this.currentDirection))return;const{projection:c}=this.visualElement,x=this.getAxisMotionValue(s);if(c&&c.layout){const{min:u,max:p}=c.layout.layoutBox[s],d=x.get()||0;x.set(r[s]-mixNumber$1(u,p,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:r,dragConstraints:s}=this.getProps(),{projection:o}=this.visualElement;if(!isRefObject(s)||!o||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};eachAxis(u=>{const p=this.getAxisMotionValue(u);if(p&&this.constraints!==!1){const d=p.get();c[u]=calcOrigin({min:d,max:d},this.constraints[u])}});const{transformTemplate:x}=this.visualElement.getProps();this.visualElement.current.style.transform=x?x({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),eachAxis(u=>{if(!shouldDrag(u,r,null))return;const p=this.getAxisMotionValue(u),{min:d,max:w}=this.constraints[u];p.set(mixNumber$1(d,w,c[u]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const r=this.visualElement.current,s=addPointerEvent(r,"pointerdown",d=>{const{drag:w,dragListener:C=!0}=this.getProps(),v=d.target,k=v!==r&&isElementKeyboardAccessible(v);w&&C&&!k&&this.start(d)}),o=()=>{const{dragConstraints:d}=this.getProps();isRefObject(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,x=c.addEventListener("measure",o);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),frame.read(o);const u=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),p=c.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:w})=>{this.isDragging&&w&&(eachAxis(C=>{const v=this.getAxisMotionValue(C);v&&(this.originPoint[C]+=d[C].translate,v.set(v.get()+d[C].translate))}),this.visualElement.render())}));return()=>{u(),s(),x(),p&&p()}}getProps(){const r=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:o=!1,dragPropagation:c=!1,dragConstraints:x=!1,dragElastic:u=defaultElastic,dragMomentum:p=!0}=r;return{...r,drag:s,dragDirectionLock:o,dragPropagation:c,dragConstraints:x,dragElastic:u,dragMomentum:p}}}function shouldDrag(e,r,s){return(r===!0||r===e)&&(s===null||s===e)}function getCurrentDirection(e,r=10){let s=null;return Math.abs(e.y)>r?s="y":Math.abs(e.x)>r&&(s="x"),s}class DragGesture extends Feature{constructor(r){super(r),this.removeGroupControls=noop,this.removeListeners=noop,this.controls=new VisualElementDragControls(r)}mount(){const{dragControls:r}=this.node.getProps();r&&(this.removeGroupControls=r.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop}update(){const{dragControls:r}=this.node.getProps(),{dragControls:s}=this.node.prevProps||{};r!==s&&(this.removeGroupControls(),r&&(this.removeGroupControls=r.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const asyncHandler=e=>(r,s)=>{e&&frame.postRender(()=>e(r,s))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop}onPointerDown(r){this.session=new PanSession(r,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:r,onPanStart:s,onPan:o,onPanEnd:c}=this.node.getProps();return{onSessionStart:asyncHandler(r),onStart:asyncHandler(s),onMove:o,onEnd:(x,u)=>{delete this.session,c&&frame.postRender(()=>c(x,u))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",r=>this.onPointerDown(r))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:r,layoutGroup:s,switchLayoutGroup:o,layoutId:c}=this.props,{projection:x}=r;x&&(s.group&&s.group.add(x),o&&o.register&&c&&o.register(x),hasTakenAnySnapshot&&x.root.didUpdate(),x.addEventListener("animationComplete",()=>{this.safeToRemove()}),x.setOptions({...x.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(r){const{layoutDependency:s,visualElement:o,drag:c,isPresent:x}=this.props,{projection:u}=o;return u&&(u.isPresent=x,r.layoutDependency!==s&&u.setOptions({...u.options,layoutDependency:s}),hasTakenAnySnapshot=!0,c||r.layoutDependency!==s||s===void 0||r.isPresent!==x?u.willUpdate():this.safeToRemove(),r.isPresent!==x&&(x?u.promote():u.relegate()||frame.postRender(()=>{const p=u.getStack();(!p||!p.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:r}=this.props.visualElement;r&&(r.root.didUpdate(),microtask.postRender(()=>{!r.currentAnimation&&r.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:r,layoutGroup:s,switchLayoutGroup:o}=this.props,{projection:c}=r;hasTakenAnySnapshot=!0,c&&(c.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(c),o&&o.deregister&&o.deregister(c))}safeToRemove(){const{safeToRemove:r}=this.props;r&&r()}render(){return null}}function MeasureLayout(e){const[r,s]=usePresence(),o=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...e,layoutGroup:o,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:r,safeToRemove:s})}const drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(e,r,s){const{props:o}=e;e.animationState&&o.whileHover&&e.animationState.setActive("whileHover",s==="Start");const c="onHover"+s,x=o[c];x&&frame.postRender(()=>x(r,extractEventInfo(r)))}class HoverGesture extends Feature{mount(){const{current:r}=this.node;r&&(this.unmount=hover(r,(s,o)=>(handleHoverEvent(this.node,o,"Start"),c=>handleHoverEvent(this.node,c,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let r=!1;try{r=this.node.current.matches(":focus-visible")}catch{r=!0}!r||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(e,r,s){const{props:o}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&o.whileTap&&e.animationState.setActive("whileTap",s==="Start");const c="onTap"+(s==="End"?"":s),x=o[c];x&&frame.postRender(()=>x(r,extractEventInfo(r)))}class PressGesture extends Feature{mount(){const{current:r}=this.node;r&&(this.unmount=press(r,(s,o)=>(handlePressEvent(this.node,o,"Start"),(c,{success:x})=>handlePressEvent(this.node,c,x?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=e=>{const r=observerCallbacks.get(e.target);r&&r(e)},fireAllObserverCallbacks=e=>{e.forEach(fireObserverCallback)};function initIntersectionObserver({root:e,...r}){const s=e||document;observers.has(s)||observers.set(s,{});const o=observers.get(s),c=JSON.stringify(r);return o[c]||(o[c]=new IntersectionObserver(fireAllObserverCallbacks,{root:e,...r})),o[c]}function observeIntersection(e,r,s){const o=initIntersectionObserver(r);return observerCallbacks.set(e,s),o.observe(e),()=>{observerCallbacks.delete(e),o.unobserve(e)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:r={}}=this.node.getProps(),{root:s,margin:o,amount:c="some",once:x}=r,u={root:s?s.current:void 0,rootMargin:o,threshold:typeof c=="number"?c:thresholdNames[c]},p=d=>{const{isIntersecting:w}=d;if(this.isInView===w||(this.isInView=w,x&&!w&&this.hasEnteredView))return;w&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",w);const{onViewportEnter:C,onViewportLeave:v}=this.node.getProps(),k=w?C:v;k&&k(d)};return observeIntersection(this.node.current,u,p)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:r,prevProps:s}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(r,s))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:e={}},{viewport:r={}}={}){return s=>e[s]!==r[s]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement);function OptimadeNoResults({queryUrl:e,currentFilter:r}){const s=`${e}/structures?filter=${encodeURIComponent(r)}`,o=`${e}/structures?filter=${decodeURIComponent(r)}`;return jsxRuntimeExports.jsxs("div",{className:`${warningContainerStyle} ${textSmall}`,children:[jsxRuntimeExports.jsx("strong",{className:"font-semibold",children:"Warning: "}),"No results returned for this query. Try to relax the filters.",jsxRuntimeExports.jsxs("p",{className:"pt-2",children:["Attempted Query:"," ",jsxRuntimeExports.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:`${textHyperlink} break-all`,children:o})]})]})}function OptimadeChildInfo({child:e}){const r=e?.id==="__custom__",{data:s,isLoading:o,isError:c}=useQuery({queryKey:["custom-provider-info",e?.base_url],queryFn:()=>getCustomInfo({baseUrl:e.base_url}),enabled:!!(r&&e?.base_url),staleTime:1e3*60*60,retry:0});if(!e)return null;const x=r?s?.meta?.provider:e;if(r&&o)return jsxRuntimeExports.jsxs("div",{className:`${containerStyle} ${textTiny} h-35 flex items-center justify-center`,children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-blue-500 rounded-full animate-spin mr-2"}),jsxRuntimeExports.jsx("p",{children:"Fetching provider info..."})]});if(r&&c)return jsxRuntimeExports.jsxs("div",{className:`${containerStyle} ${textTiny} h-25 overflow-auto`,children:[jsxRuntimeExports.jsx("p",{className:"pb-1",children:"Could not retrieve information. Please check if the base URL is correct and OPTIMADE-compliant, it's unlikely any queries will preceed..."}),e?.base_url&&jsxRuntimeExports.jsxs("p",{children:["Submitted url:"," ",jsxRuntimeExports.jsx("a",{href:e.base_url,target:"_blank",rel:"noopener noreferrer",className:textHyperlink,children:e.base_url})]})]});if(r&&!x)return null;const{name:u,description:p,homepage:d,base_url:w}=x||{},C=r?e.base_url:w;return jsxRuntimeExports.jsxs("div",{className:`${containerStyle} ${textTiny} h-35 overflow-auto`,children:[jsxRuntimeExports.jsx("h3",{className:`${textNormal} pb-1.5`,children:r?`Provider information: ${u||"Unknown"}`:`${u}`}),p&&jsxRuntimeExports.jsx("p",{className:"pb-1",children:p}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[d&&jsxRuntimeExports.jsxs("p",{children:["Homepage:"," ",jsxRuntimeExports.jsx("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:textHyperlink,children:d})]}),C&&jsxRuntimeExports.jsxs("p",{children:[r?"Database base url":"Base url",":"," ",jsxRuntimeExports.jsx("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:textHyperlink,children:C})]})]})]})}function OptimadeParentInfo({provider:e,providers:r}){if(!e||!r)return null;const s=r.find(d=>d.attributes?.base_url===e.attributes?.base_url);if(!s)return jsxRuntimeExports.jsxs("div",{className:`${containerStyle} h-35 overflow-auto ${textTiny}`,children:[jsxRuntimeExports.jsx("h3",{className:`${textNormal} pb-1.5`,children:"Unknown top level provider"}),jsxRuntimeExports.jsx("p",{children:"This is not neccessarily a problem and usually occurs when using the Custom endpoint. Queries will proceed as usual..."})]});const{name:o,description:c,homepage:x,base_url:u,...p}=s.attributes??{};return jsxRuntimeExports.jsxs("div",{className:`${containerStyle} h-35 overflow-auto ${textTiny}`,children:[jsxRuntimeExports.jsx("h3",{className:`${textNormal} pb-1.5`,children:o}),c&&jsxRuntimeExports.jsx("p",{className:"pb-1",children:c}),x&&jsxRuntimeExports.jsxs("p",{children:["Homepage:"," ",jsxRuntimeExports.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:textHyperlink,children:x})]}),u&&jsxRuntimeExports.jsxs("p",{children:["Index metadb:"," ",jsxRuntimeExports.jsx("a",{href:`${u}/v1/links`,target:"_blank",rel:"noopener noreferrer",className:textHyperlink,children:`${u}/v1/links`})]})]})}function ParentProviderDropdown({providers:e,selectedProvider:r,onSelectProvider:s}){const o=r?r.id==="__custom__"?"__custom__":r.attributes.base_url:"__none__";return jsxRuntimeExports.jsxs("select",{className:longSlateDropdown,value:o,onChange:c=>{const x=c.target.value;if(x==="__custom__")s({id:"__custom__",attributes:{base_url:""}});else{const u=e.find(p=>p.attributes?.base_url===x);s(u||null)}},children:[jsxRuntimeExports.jsx("option",{value:"__none__",disabled:!0,children:"Select a provider"}),e.map(c=>jsxRuntimeExports.jsx("option",{value:c.attributes?.base_url||"",children:`${c.id}: ${c.attributes?.name}`},c.attributes?.id??c.id??c.attributes?.base_url)),jsxRuntimeExports.jsx("option",{value:"__custom__",children:"Custom endpoint"})]})}function ChildProviderDropdown({selectedProvider:e,selectedChild:r,onSelectChild:s,childEntries:o,loadingChildren:c}){const[x,u]=reactExports.useState(r?.id==="__custom__"?r.base_url:""),p=reactExports.useRef(x);return reactExports.useEffect(()=>{!e||e.id==="__custom__"||c||(o.length===1?(!r||r.id!==o[0].id)&&s(o[0]):o.length>1?r&&!o.find(d=>d.id===r.id)&&s(null):r!==null&&s(null))},[e,o,c,r,s]),reactExports.useEffect(()=>{e&&e.id==="__custom__"&&(!r||r.base_url!==p.current)&&(s({id:"__custom__",name:"Custom Endpoint",base_url:p.current}),u(p.current))},[e,r,s]),e?e.id==="__custom__"?jsxRuntimeExports.jsxs("form",{className:"flex gap-2 items-center",onSubmit:d=>{d.preventDefault();const w={id:"__custom__",name:"Custom Endpoint",base_url:x};p.current=x,s(w)},children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter custom endpoint URL",className:"flex-1 ring-1 ring-slate-300 rounded-sm px-2 py-1",value:x,onChange:d=>u(d.target.value)}),jsxRuntimeExports.jsx("button",{className:`${baseButtonStyle} rounded-sm md:py-1!`,type:"submit",children:"Submit"})]}):jsxRuntimeExports.jsx("select",{className:longSlateDropdown,value:r?.id||"",onChange:d=>{const w=o.find(C=>C.id===d.target.value);s(w||null)},disabled:c,children:c?jsxRuntimeExports.jsx("option",{children:"Loading"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("option",{value:"",disabled:!0,children:"Select a subdatabase"}),o.map(d=>jsxRuntimeExports.jsx("option",{value:d.id,children:`${d.id}: ${d.name}`},d.id))]})}):null}function OptimadeQuerier({selectedResult:e,setSelectedResult:r,hideProviderList:s=["exmpl","matcloud"],customUrl:o=null,providerParam:c=null,dbParam:x=null,updateUrlParams:u=null}){const[p,d]=reactExports.useState(""),[w,C]=reactExports.useState(1),v=!!o,[k,H]=reactExports.useState(v?{id:"__custom__",base_url:""}:null),[P,j]=reactExports.useState(v?{id:"__custom__",base_url:o}:null),{data:se}=useQuery({queryKey:["providers",s],queryFn:()=>getProvidersList(void 0,s),staleTime:1/0}),ce=se?.data??[],{data:ne,isLoading:E}=useQuery({queryKey:["provider-links",k?.attributes?.base_url],queryFn:()=>getProviderLinks(k.attributes.base_url),enabled:!!k?.attributes?.base_url,staleTime:1/0}),K=ne?.children?.map(_e=>({id:_e.id,..._e.attributes??{}}))??[];reactExports.useEffect(()=>{if(v||!ce.length||!c)return;const _e=ce.find(W=>W.id===c);_e&&H(_e)},[ce,c,v]),reactExports.useEffect(()=>{if(!(v||!x||!K.length)&&!P){const _e=K.find(W=>W.id===x);_e&&j(_e)}},[K,x,v,!!P]),reactExports.useEffect(()=>{if(u){if(k?.id==="__custom__"){const _e=P?.base_url??o??"";u({base_url:_e||null,provider:null,db:null});return}if(k?.id){const _e=P?.id&&P.id!=="__custom__"?P.id:P==null&&x||null;u({base_url:null,provider:k.id,db:_e});return}u({base_url:null,provider:null,db:null})}},[u,k?.id,P?.id,P,P?.base_url,o,x]);const Y=_e=>{_e?.id!==k?.id&&(H(_e),j(null),_e?.id==="__custom__"&&j({id:"__custom__",base_url:o||""}))},re=_e=>{j(_e)},ue=25e3,{data:q,isLoading:he,isError:Oe,error:be}=useQuery({queryKey:["structures",P?.base_url,p,w],queryFn:async()=>P?.base_url?new Promise(async(W,we)=>{const ge=setTimeout(()=>{we(new Error("Request timed out after 25 seconds"))},ue);try{const ae=await getStructures({providerUrl:P.base_url,filter:p,page:w});clearTimeout(ge),W(ae)}catch(ae){clearTimeout(ge),we(new Error(ae?.message))}}):null,enabled:!!P?.base_url,staleTime:120*1e3,keepPreviousData:!0}),Te=q?.data??[],Ae=q?.meta??{data_returned:0,data_available:0},Ve=Ae.data_returned!=null?Math.max(1,Math.ceil(Ae.data_returned/20)):1;return reactExports.useEffect(()=>{r(Te[0]??null)},[Te]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"pt-4 p-2 w-full flex flex-col gap-2 mx-auto max-w-[650px]",children:[jsxRuntimeExports.jsx(ParentProviderDropdown,{providers:ce,selectedProvider:k,onSelectProvider:Y}),jsxRuntimeExports.jsx(ChildProviderDropdown,{selectedProvider:k,selectedChild:P,onSelectChild:re,childEntries:K,loadingChildren:E})]}),jsxRuntimeExports.jsxs("div",{className:`flex flex-col md:flex-row w-full max-w-5xl px-2 md:px-4 py-2 gap-4 ${k?.id==="__custom__"?"justify-center":""}`,children:[k?.id!="__custom__"&&jsxRuntimeExports.jsx("div",{className:"md:w-1/2 w-full",children:jsxRuntimeExports.jsx(OptimadeParentInfo,{provider:k,providers:ce})}),jsxRuntimeExports.jsx("div",{className:`w-full ${k?.id==="__custom__"?"md:w-2/3 lg:w-1/2":"md:w-1/2"}`,children:jsxRuntimeExports.jsx(OptimadeChildInfo,{child:P})})]}),Oe&&jsxRuntimeExports.jsxs("div",{className:"flex items-start p-4 text-red-800 bg-red-50 border border-red-300 rounded-lg shadow-sm",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 shrink-0",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4m0 4h.01M21 12c0 4.9706-4.0294 9-9 9s-9-4.0294-9-9 4.0294-9 9-9 9 4.0294 9 9z"})}),jsxRuntimeExports.jsxs("div",{className:"text-sm leading-relaxed",children:["Could not fetch data  the provider subdataset"," ",jsxRuntimeExports.jsx("a",{href:P.base_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-800",children:P.base_url})," ","may be unreachable. Please try again later."]})]}),jsxRuntimeExports.jsx("div",{className:"p-2 w-full",children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:P?.base_url?1:0,y:P?.base_url?0:20},transition:{duration:.3,ease:"easeInOut"},className:`${containerStyle} ${P?.base_url?"":"pointer-events-none"}`,children:jsxRuntimeExports.jsx(OptimadeFilters,{queryUrl:P?.base_url||"",onSubmit:_e=>{d(_e),C(1)}})})}),jsxRuntimeExports.jsx("div",{className:"p-2 w-full",children:jsxRuntimeExports.jsx(OptimadeProviderInfo,{queryUrl:P?.base_url})}),P?.base_url&&jsxRuntimeExports.jsxs("div",{className:"px-2 md:px-4 w-full relative",children:[jsxRuntimeExports.jsx("div",{className:"border-b border-slate-300 py-2"}),!he&&!e&&p&&jsxRuntimeExports.jsx("div",{className:"p-2",children:jsxRuntimeExports.jsx(OptimadeNoResults,{queryUrl:P?.base_url,currentFilter:p})}),he&&jsxRuntimeExports.jsx("div",{className:"inset-0 p-10 flex justify-center items-center bg-white/70 z-1000",children:jsxRuntimeExports.jsx("div",{className:"w-16 h-16 border-4 border-gray-300 border-t-blue-500 rounded-full animate-spin"})}),Te.length>0&&e&&jsxRuntimeExports.jsx("div",{className:"relative py-1 md:py-2",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-end gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(ResultsDropdown,{results:Te,selectedResult:e,setSelectedResult:r})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(PaginationHandler,{currentPage:w,totalPages:Ve,metaData:Ae,onPageChange:C})})]})})]})]})}function OptimadeClient({hideProviderList:e}){const[r,s]=useSearchParams(),o=reactExports.useRef(""),c=r.get("base_url"),x=r.get("provider"),u=r.get("db"),p=reactExports.useCallback(({base_url:C,provider:v,db:k})=>{const H=new URLSearchParams(r);H.delete("base_url"),H.delete("provider"),H.delete("db"),v?(H.set("provider",v),k&&H.set("db",k)):C&&H.set("base_url",C),H.sort();const P=H.toString(),j=r.toString();P!==j&&P!==o.current&&(o.current=P,s(H,{replace:!0}))},[r,s]),[d,w]=reactExports.useState(null);return jsxRuntimeExports.jsx("div",{className:"min-h-screen max-w-5xl mx-auto bg-white mb-4 shadow-md rounded-xs",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center w-full px-2 md:px-4 py-2",children:[jsxRuntimeExports.jsx(OptimadeHeader,{}),jsxRuntimeExports.jsx("div",{className:"p-2 w-full",children:jsxRuntimeExports.jsx(OptimadeFAQs,{})}),jsxRuntimeExports.jsx(OptimadeQuerier,{selectedResult:d,setSelectedResult:w,hideProviderList:e,customUrl:c,providerParam:x,dbParam:u,updateUrlParams:p}),jsxRuntimeExports.jsx(ResultViewer,{selectedResult:d})]})})}const badProviders=["exmpl","aiida","aflow","ccdc","ccpnc","httk","matcloud","mpds","mpod","optimake","optimade","pcod","psdi"];function App(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MaterialsCloudHeader,{className:"header",activeSection:"work",breadcrumbsPath:[{name:"Work",link:"https://www.materialscloud.org/work"},{name:"OPTIMADE-Client",link:null}]}),jsxRuntimeExports.jsx(OptimadeClient,{hideProviderList:badProviders})]})}const queryClient=new QueryClient({defaultOptions:{queries:{staleTime:3600*1e3,refetchOnWindowFocus:!1,retry:1}}});clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})})})}));
